!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],t):t(e.dataTool={},e.echarts)}(this,function(e,t){function r(e,t,r){if(e&&t){if(e.map&&e.map===c){return e.map(t,r)}for(var a=[],n=0,o=e.length;n<o;n++){a.push(t.call(r,e[n],n,e))}return a}}function a(e){return e?r(u(e,"attribute"),function(e){return{id:i(e,"id"),title:i(e,"title"),type:i(e,"type")}}):[]}function n(e,t){return e?r(u(e,"node"),function(e){var r={id:i(e,"id"),name:i(e,"label"),itemStyle:{normal:{}}},a=l(e,"viz:size"),n=l(e,"viz:position"),o=l(e,"viz:color"),s=l(e,"attvalues");if(a&&(r.symbolSize=parseFloat(i(a,"value"))),n&&(r.x=parseFloat(i(n,"x")),r.y=parseFloat(i(n,"y"))),o&&(r.itemStyle.normal.color="rgb("+[0|i(o,"r"),0|i(o,"g"),0|i(o,"b")].join(",")+")"),s){var f=u(s,"attvalue");r.attributes={};for(var c=0;c<f.length;c++){var p=f[c],d=i(p,"for"),v=i(p,"value"),g=t[d];if(g){switch(g.type){case"integer":case"long":v=parseInt(v,10);break;case"float":case"double":v=parseFloat(v);break;case"boolean":v="true"==v.toLowerCase()}r.attributes[d]=v}}}return r}):[]}function o(e){return e?r(u(e,"edge"),function(e){var t={id:i(e,"id"),name:i(e,"label"),source:i(e,"source"),target:i(e,"target"),lineStyle:{normal:{}}},r=t.lineStyle.normal,a=l(e,"viz:thickness"),n=l(e,"viz:color");return a&&(r.width=parseFloat(a.getAttribute("value"))),n&&(r.color="rgb("+[0|i(n,"r"),0|i(n,"g"),0|i(n,"b")].join(",")+")"),t}):[]}function i(e,t){return e.getAttribute(t)}function l(e,t){for(var r=e.firstChild;r;){if(1==r.nodeType&&r.nodeName.toLowerCase()==t.toLowerCase()){return r}r=r.nextSibling}return null}function u(e,t){for(var r=e.firstChild,a=[];r;){r.nodeName.toLowerCase()==t.toLowerCase()&&a.push(r),r=r.nextSibling}return a}function s(e){return e.sort(function(e,t){return e-t}),e}function f(e,t){var r=(e.length-1)*t+1,a=Math.floor(r),n=+e[a-1],o=r-a;return o?n+o*(e[a]-n):n}var c=Array.prototype.map,p=(Object.freeze||Object)({parse:function(e){var t;
if(!(t="string"==typeof e?(new DOMParser).parseFromString(e,"text/xml"):e)||t.getElementsByTagName("parsererror").length){return null}var r=l(t,"gexf");if(!r){return null}for(var i=l(r,"graph"),u=a(l(i,"attributes")),s={},f=0;f<u.length;f++){s[u[f].id]=u[f]}return{nodes:n(l(i,"nodes"),s),links:o(l(i,"edges"))}}}),d=function(e,t){for(var r=[],a=[],n=[],o=(t=t||[]).boundIQR,i="none"===o||0===o,l=0;l<e.length;l++){n.push(l+"");var u=s(e[l].slice()),c=f(u,0.25),p=f(u,0.5),d=f(u,0.75),v=u[0],g=u[u.length-1],h=(null==o?1.5:o)*(d-c),b=i?v:Math.max(v,c-h),m=i?g:Math.min(g,d+h);r.push([b,c,p,d,m]);for(var y=0;y<u.length;y++){var x=u[y];if(x<b||x>m){var w=[l,x];"vertical"===t.layout&&w.reverse(),a.push(w)}}}return{boxData:r,outliers:a,axisData:n}};t.dataTool&&(t.dataTool.version="1.0.0",t.dataTool.gexf=p,t.dataTool.prepareBoxplotData=d),e.version="1.0.0",e.gexf=p,e.prepareBoxplotData=d});
(function($){$.fn.fSelect=function(options){if(typeof options=="string"){var settings=options}else{var settings=$.extend({placeholder:"Select some options",numDisplayed:3,overflowText:"{n} selected",searchText:"Search",showSearch:true},options)}function fSelect(select,settings){this.$select=$(select);this.settings=settings;this.create()}fSelect.prototype={create:function(){var multiple=this.$select.is("[multiple]")?" multiple":"";this.$select.wrap('<div class="fs-wrap'+multiple+'"></div>');this.$select.before('<div class="fs-label-wrap"><div class="fs-label">'+this.settings.placeholder+'</div><span class="fs-arrow"></span></div>');this.$select.before('<div class="fs-dropdown hidden"><div class="fs-options"></div></div>');this.$select.addClass("hidden");this.$wrap=this.$select.closest(".fs-wrap");this.reload()},reload:function(){if(this.settings.showSearch){var search='<div class="fs-search"><input type="search" placeholder="'+this.settings.searchText+'" /></div>';this.$wrap.find(".fs-dropdown").prepend(search)}var choices=this.buildOptions(this.$select);this.$wrap.find(".fs-options").html(choices);this.reloadDropdownLabel()},destroy:function(){this.$wrap.find(".fs-label-wrap").remove();this.$wrap.find(".fs-dropdown").remove();this.$select.unwrap().removeClass("hidden")},buildOptions:function($element){var $this=this;var choices="";$element.children().each(function(i,el){var $el=$(el);if("optgroup"==$el.prop("nodeName").toLowerCase()){choices+='<div class="fs-optgroup">';choices+='<div class="fs-optgroup-label">'+$el.prop("label")+"</div>";choices+=$this.buildOptions($el);choices+="</div>"}else{var selected=$el.is("[selected]")?" selected":"";choices+='<div class="fs-option'+selected+'" data-value="'+$el.prop("value")+'"><span class="fs-checkbox"><i></i></span><div class="fs-option-label">'+$el.html()+"</div></div>"}});return choices},reloadDropdownLabel:function(){var settings=this.settings;var labelText=[];this.$wrap.find(".fs-option.selected").each(function(i,el){labelText.push($(el).find(".fs-option-label").text())
});if(labelText.length<1){labelText=settings.placeholder}else{if(labelText.length>settings.numDisplayed){labelText=settings.overflowText.replace("{n}",labelText.length)}else{labelText=labelText.join(", ")}}this.$wrap.find(".fs-label").html(labelText);this.$select.change()}};return this.each(function(){var data=$(this).data("fSelect");if(!data){data=new fSelect(this,settings);$(this).data("fSelect",data)}if(typeof settings=="string"){data[settings]()}})};window.fSelect={"active":null,"idx":-1};function setIndexes($wrap){$wrap.find(".fs-option:not(.hidden)").each(function(i,el){$(el).attr("data-index",i);$wrap.find(".fs-option").removeClass("hl")});$wrap.find(".fs-search input").focus();window.fSelect.idx=-1}function setScroll($wrap){var $container=$wrap.find(".fs-options");var $selected=$wrap.find(".fs-option.hl");var itemMin=$selected.offset().top+$container.scrollTop();var itemMax=itemMin+$selected.outerHeight();var containerMin=$container.offset().top+$container.scrollTop();var containerMax=containerMin+$container.outerHeight();if(itemMax>containerMax){var to=$container.scrollTop()+itemMax-containerMax;$container.scrollTop(to)}else{if(itemMin<containerMin){var to=$container.scrollTop()-containerMin-itemMin;$container.scrollTop(to)}}}$(document).on("click",".fs-option",function(){var $wrap=$(this).closest(".fs-wrap");if($wrap.hasClass("multiple")){var selected=[];$(this).toggleClass("selected");$wrap.find(".fs-option.selected").each(function(i,el){selected.push($(el).attr("data-value"))})}else{var selected=$(this).attr("data-value");$wrap.find(".fs-option").removeClass("selected");$(this).addClass("selected");$wrap.find(".fs-dropdown").hide()}$wrap.find("select").val(selected);$wrap.find("select").fSelect("reloadDropdownLabel")});$(document).on("keyup",".fs-search input",function(e){if(40==e.which){$(this).blur();return}var $wrap=$(this).closest(".fs-wrap");var keywords=$(this).val();$wrap.find(".fs-option, .fs-optgroup-label").removeClass("hidden");if(""!=keywords){$wrap.find(".fs-option").each(function(){var regex=new RegExp(keywords,"gi");
if(null===$(this).find(".fs-option-label").text().match(regex)){$(this).addClass("hidden")}});$wrap.find(".fs-optgroup-label").each(function(){var num_visible=$(this).closest(".fs-optgroup").find(".fs-option:not(.hidden)").length;if(num_visible<1){$(this).addClass("hidden")}})}setIndexes($wrap)});$(document).on("click",function(e){var $el=$(e.target);var $wrap=$el.closest(".fs-wrap");if(0<$wrap.length){if($el.hasClass("fs-label")){window.fSelect.active=$wrap;var is_hidden=$wrap.find(".fs-dropdown").hasClass("hidden");$(".fs-dropdown").addClass("hidden");if(is_hidden){$wrap.find(".fs-dropdown").removeClass("hidden")}else{$wrap.find(".fs-dropdown").addClass("hidden")}setIndexes($wrap)}}else{$(".fs-dropdown").addClass("hidden");window.fSelect.active=null}});$(document).on("keydown",function(e){var $wrap=window.fSelect.active;if(null===$wrap){return}else{if(38==e.which){e.preventDefault();$wrap.find(".fs-option").removeClass("hl");if(window.fSelect.idx>0){window.fSelect.idx--;$wrap.find(".fs-option[data-index="+window.fSelect.idx+"]").addClass("hl");setScroll($wrap)}else{window.fSelect.idx=-1;$wrap.find(".fs-search input").focus()}}else{if(40==e.which){e.preventDefault();var last_index=$wrap.find(".fs-option:last").attr("data-index");if(window.fSelect.idx<parseInt(last_index)){window.fSelect.idx++;$wrap.find(".fs-option").removeClass("hl");$wrap.find(".fs-option[data-index="+window.fSelect.idx+"]").addClass("hl");setScroll($wrap)}}else{if(32==e.which||13==e.which){$wrap.find(".fs-option.hl").click()}else{if(27==e.which){$(".fs-dropdown").addClass("hidden");window.fSelect.active=null}}}}}})})(jQuery);
$(document).ready(function(){$("#select_btn").click(function(){$("#select_file").trigger("click")});$("#select_file").change(function(){$("#select_text").val($("#select_file").val());importf(this)})});
/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */
var DO_NOT_EXPORT_CODEPAGE=true;var DO_NOT_EXPORT_JSZIP=true;(function(e){if("object"==typeof exports&&"undefined"!=typeof module&&"undefined"==typeof DO_NOT_EXPORT_JSZIP){module.exports=e()}else{if("function"==typeof define&&define.amd&&"undefined"==typeof DO_NOT_EXPORT_JSZIP){JSZipSync=e();define([],e)}else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof $&&$.global?r=$.global:"undefined"!=typeof self&&(r=self),r.JSZipSync=e()}}})(function(){var e,r,t;return function a(e,r,t){function n(s,f){if(!r[s]){if(!e[s]){var o=typeof require=="function"&&require;if(!f&&o){return o(s,!0)}if(i){return i(s,!0)}throw new Error("Cannot find module '"+s+"'")}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(r){var t=e[s][1][r];return n(t?t:r)},l,l.exports,a,e,r,t)}return r[s].exports}var i=typeof require=="function"&&require;for(var s=0;s<t.length;s++){n(t[s])}return n}({1:[function(e,r,t){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e,r){var t="";var n,i,s,f,o,l,c;var h=0;while(h<e.length){n=e.charCodeAt(h++);i=e.charCodeAt(h++);s=e.charCodeAt(h++);f=n>>2;o=(n&3)<<4|i>>4;l=(i&15)<<2|s>>6;c=s&63;if(isNaN(i)){l=c=64}else{if(isNaN(s)){c=64}}t=t+a.charAt(f)+a.charAt(o)+a.charAt(l)+a.charAt(c)}return t};t.decode=function(e,r){var t="";var n,i,s;var f,o,l,c;var h=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(h<e.length){f=a.indexOf(e.charAt(h++));o=a.indexOf(e.charAt(h++));l=a.indexOf(e.charAt(h++));c=a.indexOf(e.charAt(h++));n=f<<2|o>>4;i=(o&15)<<4|l>>2;s=(l&3)<<6|c;t=t+String.fromCharCode(n);if(l!=64){t=t+String.fromCharCode(i)}if(c!=64){t=t+String.fromCharCode(s)}}return t}},{}],2:[function(e,r,t){function a(){this.compressedSize=0;this.uncompressedSize=0;this.crc32=0;this.compressionMethod=null;this.compressedContent=null}a.prototype={getContent:function(){return null},getCompressedContent:function(){return null}};r.exports=a
},{}],3:[function(e,r,t){t.STORE={magic:"\0\0",compress:function(e){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null};t.DEFLATE=e("./flate")},{"./flate":8}],4:[function(e,r,t){var a=e("./utils");var n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];
r.exports=function i(e,r){if(typeof e==="undefined"||!e.length){return 0}var t=a.getTypeOf(e)!=="string";if(typeof r=="undefined"){r=0}var i=0;var s=0;var f=0;r=r^-1;for(var o=0,l=e.length;o<l;o++){f=t?e[o]:e.charCodeAt(o);s=(r^f)&255;i=n[s];r=r>>>8^i}return r^-1}},{"./utils":21}],5:[function(e,r,t){var a=e("./utils");function n(e){this.data=null;this.length=0;this.index=0}n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<e||e<0){throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")}},setIndex:function(e){this.checkIndex(e);this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var r=0,t;this.checkOffset(e);for(t=this.index+e-1;t>=this.index;t--){r=(r<<8)+this.byteAt(t)}this.index+=e;return r},readString:function(e){return a.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(e&31)<<1)}};r.exports=n},{"./utils":21}],6:[function(e,r,t){t.base64=false;t.binary=false;t.dir=false;t.createFolders=false;t.date=null;t.compression=null;t.comment=null},{}],7:[function(e,r,t){var a=e("./utils");t.string2binary=function(e){return a.string2binary(e)};t.string2Uint8Array=function(e){return a.transformTo("uint8array",e)};t.uint8Array2String=function(e){return a.transformTo("string",e)};t.string2Blob=function(e){var r=a.transformTo("arraybuffer",e);return a.arrayBuffer2Blob(r)};t.arrayBuffer2Blob=function(e){return a.arrayBuffer2Blob(e)};t.transformTo=function(e,r){return a.transformTo(e,r)};t.getTypeOf=function(e){return a.getTypeOf(e)};t.checkSupport=function(e){return a.checkSupport(e)};t.MAX_VALUE_16BITS=a.MAX_VALUE_16BITS;t.MAX_VALUE_32BITS=a.MAX_VALUE_32BITS;t.pretty=function(e){return a.pretty(e)};t.findCompression=function(e){return a.findCompression(e)};t.isRegExp=function(e){return a.isRegExp(e)
}},{"./utils":21}],8:[function(e,r,t){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Uint32Array!=="undefined";var n=e("pako");t.uncompressInputType=a?"uint8array":"array";t.compressInputType=a?"uint8array":"array";t.magic="\b\0";t.compress=function(e){return n.deflateRaw(e)};t.uncompress=function(e){return n.inflateRaw(e)}},{pako:24}],9:[function(e,r,t){var a=e("./base64");function n(e,r){if(!(this instanceof n)){return new n(e,r)}this.files={};this.comment=null;this.root="";if(e){this.load(e,r)}this.clone=function(){var e=new n;for(var r in this){if(typeof this[r]!=="function"){e[r]=this[r]}}return e}}n.prototype=e("./object");n.prototype.load=e("./load");n.support=e("./support");n.defaults=e("./defaults");n.utils=e("./deprecatedPublicUtils");n.base64={encode:function(e){return a.encode(e)},decode:function(e){return a.decode(e)}};n.compressions=e("./compressions");r.exports=n},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(e,r,t){var a=e("./base64");var n=e("./zipEntries");r.exports=function(e,r){var t,i,s,f;r=r||{};if(r.base64){e=a.decode(e)}i=new n(e,r);t=i.files;for(s=0;s<t.length;s++){f=t[s];this.file(f.fileName,f.decompressed,{binary:true,optimizedBinaryString:true,date:f.date,dir:f.dir,comment:f.fileComment.length?f.fileComment:null,createFolders:r.createFolders})}if(i.zipComment.length){this.comment=i.zipComment}return this}},{"./base64":1,"./zipEntries":22}],11:[function(e,r,t){(function(e){var t=function(){};if(typeof e!=="undefined"){var a=!e.from;if(!a){try{e.from("foo","utf8")}catch(n){a=true}}t=a?function(r,t){return t?new e(r,t):new e(r)}:e.from.bind(e);if(!e.alloc){e.alloc=function(r){return new e(r)}}}r.exports=function(r,a){return typeof r=="number"?e.alloc(r):t(r,a)};r.exports.test=function(r){return e.isBuffer(r)}}).call(this,typeof Buffer!=="undefined"?Buffer:undefined)},{}],12:[function(e,r,t){var a=e("./uint8ArrayReader");function n(e){this.data=e;
this.length=this.data.length;this.index=0}n.prototype=new a;n.prototype.readData=function(e){this.checkOffset(e);var r=this.data.slice(this.index,this.index+e);this.index+=e;return r};r.exports=n},{"./uint8ArrayReader":18}],13:[function(e,r,t){var a=e("./support");var n=e("./utils");var i=e("./crc32");var s=e("./signature");var f=e("./defaults");var o=e("./base64");var l=e("./compressions");var c=e("./compressedObject");var h=e("./nodeBuffer");var u=e("./utf8");var d=e("./stringWriter");var p=e("./uint8ArrayWriter");var v=function(e){if(e._data instanceof c){e._data=e._data.getContent();e.options.binary=true;e.options.base64=false;if(n.getTypeOf(e._data)==="uint8array"){var r=e._data;e._data=new Uint8Array(r.length);if(r.length!==0){e._data.set(r,0)}}}return e._data};var g=function(e){var r=v(e),t=n.getTypeOf(r);if(t==="string"){if(!e.options.binary){if(a.nodebuffer){return h(r,"utf-8")}}return e.asBinary()}return r};var m=function(e){var r=v(this);if(r===null||typeof r==="undefined"){return""}if(this.options.base64){r=o.decode(r)}if(e&&this.options.binary){r=T.utf8decode(r)}else{r=n.transformTo("string",r)}if(!e&&!this.options.binary){r=n.transformTo("string",T.utf8encode(r))}return r};var b=function(e,r,t){this.name=e;this.dir=t.dir;this.date=t.date;this.comment=t.comment;this._data=r;this.options=t;this._initialMetadata={dir:t.dir,date:t.date}};b.prototype={asText:function(){return m.call(this,true)},asBinary:function(){return m.call(this,false)},asNodeBuffer:function(){var e=g(this);return n.transformTo("nodebuffer",e)},asUint8Array:function(){var e=g(this);return n.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var w=function(e,r){var t="",a;for(a=0;a<r;a++){t+=String.fromCharCode(e&255);e=e>>>8}return t};var C=function(){var e={},r,t;for(r=0;r<arguments.length;r++){for(t in arguments[r]){if(arguments[r].hasOwnProperty(t)&&typeof e[t]==="undefined"){e[t]=arguments[r][t]}}}return e};var E=function(e){e=e||{};if(e.base64===true&&(e.binary===null||e.binary===undefined)){e.binary=true
}e=C(e,f);e.date=e.date||new Date;if(e.compression!==null){e.compression=e.compression.toUpperCase()}return e};var k=function(e,r,t){var a=n.getTypeOf(r),i;t=E(t);if(t.createFolders&&(i=S(e))){A.call(this,i,true)}if(t.dir||r===null||typeof r==="undefined"){t.base64=false;t.binary=false;r=null}else{if(a==="string"){if(t.binary&&!t.base64){if(t.optimizedBinaryString!==true){r=n.string2binary(r)}}}else{t.base64=false;t.binary=true;if(!a&&!(r instanceof c)){throw new Error("The data of '"+e+"' is in an unsupported format !")}if(a==="arraybuffer"){r=n.transformTo("uint8array",r)}}}var s=new b(e,r,t);this.files[e]=s;return s};var S=function(e){if(e.slice(-1)=="/"){e=e.substring(0,e.length-1)}var r=e.lastIndexOf("/");return r>0?e.substring(0,r):""};var A=function(e,r){if(e.slice(-1)!="/"){e+="/"}r=typeof r!=="undefined"?r:false;if(!this.files[e]){k.call(this,e,null,{dir:true,createFolders:r})}return this.files[e]};var _=function(e,r){var t=new c,a;if(e._data instanceof c){t.uncompressedSize=e._data.uncompressedSize;t.crc32=e._data.crc32;if(t.uncompressedSize===0||e.dir){r=l["STORE"];t.compressedContent="";t.crc32=0}else{if(e._data.compressionMethod===r.magic){t.compressedContent=e._data.getCompressedContent()}else{a=e._data.getContent();t.compressedContent=r.compress(n.transformTo(r.compressInputType,a))}}}else{a=g(e);if(!a||a.length===0||e.dir){r=l["STORE"];a=""}t.uncompressedSize=a.length;t.crc32=i(a);t.compressedContent=r.compress(n.transformTo(r.compressInputType,a))}t.compressedSize=t.compressedContent.length;t.compressionMethod=r.magic;return t};var B=function(e,r,t,a){var f=t.compressedContent,o=n.transformTo("string",u.utf8encode(r.name)),l=r.comment||"",c=n.transformTo("string",u.utf8encode(l)),h=o.length!==r.name.length,d=c.length!==l.length,p=r.options,v,g,m="",b="",C="",E,k;if(r._initialMetadata.dir!==r.dir){E=r.dir}else{E=p.dir}if(r._initialMetadata.date!==r.date){k=r.date}else{k=p.date}v=k.getHours();v=v<<6;v=v|k.getMinutes();v=v<<5;v=v|k.getSeconds()/2;g=k.getFullYear()-1980;
g=g<<4;g=g|k.getMonth()+1;g=g<<5;g=g|k.getDate();if(h){b=w(1,1)+w(i(o),4)+o;m+="up"+w(b.length,2)+b}if(d){C=w(1,1)+w(this.crc32(c),4)+c;m+="uc"+w(C.length,2)+C}var S="";S+="\n\0";S+=h||d?"\0\b":"\0\0";S+=t.compressionMethod;S+=w(v,2);S+=w(g,2);S+=w(t.crc32,4);S+=w(t.compressedSize,4);S+=w(t.uncompressedSize,4);S+=w(o.length,2);S+=w(m.length,2);var A=s.LOCAL_FILE_HEADER+S+o+m;var _=s.CENTRAL_FILE_HEADER+"\0"+S+w(c.length,2)+"\0\0"+"\0\0"+(E===true?"\0\0\0":"\0\0\0\0")+w(a,4)+o+m+c;return{fileRecord:A,dirRecord:_,compressedObject:t}};var T={load:function(e,r){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var r=[],t,a,n,i;for(t in this.files){if(!this.files.hasOwnProperty(t)){continue}n=this.files[t];i=new b(n.name,n._data,C(n.options));a=t.slice(this.root.length,t.length);if(t.slice(0,this.root.length)===this.root&&e(a,i)){r.push(i)}}return r},file:function(e,r,t){if(arguments.length===1){if(n.isRegExp(e)){var a=e;return this.filter(function(e,r){return !r.dir&&a.test(e)})}else{return this.filter(function(r,t){return !t.dir&&r===e})[0]||null}}else{e=this.root+e;k.call(this,e,r,t)}return this},folder:function(e){if(!e){return this}if(n.isRegExp(e)){return this.filter(function(r,t){return t.dir&&e.test(r)})}var r=this.root+e;var t=A.call(this,r);var a=this.clone();a.root=t.name;return a},remove:function(e){e=this.root+e;var r=this.files[e];if(!r){if(e.slice(-1)!="/"){e+="/"}r=this.files[e]}if(r&&!r.dir){delete this.files[e]}else{var t=this.filter(function(r,t){return t.name.slice(0,e.length)===e});for(var a=0;a<t.length;a++){delete this.files[t[a].name]}}return this},generate:function(e){e=C(e||{},{base64:true,compression:"STORE",type:"base64",comment:null});n.checkSupport(e.type);var r=[],t=0,a=0,i,f,c=n.transformTo("string",this.utf8encode(e.comment||this.comment||""));for(var h in this.files){if(!this.files.hasOwnProperty(h)){continue}var u=this.files[h];var v=u.options.compression||e.compression.toUpperCase();
var g=l[v];if(!g){throw new Error(v+" is not a valid compression method !")}var m=_.call(this,u,g);var b=B.call(this,h,u,m,t);t+=b.fileRecord.length+m.compressedSize;a+=b.dirRecord.length;r.push(b)}var E="";E=s.CENTRAL_DIRECTORY_END+"\0\0"+"\0\0"+w(r.length,2)+w(r.length,2)+w(a,4)+w(t,4)+w(c.length,2)+c;var k=e.type.toLowerCase();if(k==="uint8array"||k==="arraybuffer"||k==="blob"||k==="nodebuffer"){i=new p(t+a+E.length)}else{i=new d(t+a+E.length)}for(f=0;f<r.length;f++){i.append(r[f].fileRecord);i.append(r[f].compressedObject.compressedContent)}for(f=0;f<r.length;f++){i.append(r[f].dirRecord)}i.append(E);var S=i.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(e.type.toLowerCase(),S);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",S));case"base64":return e.base64?o.encode(S):S;default:return S}},crc32:function(e,r){return i(e,r)},utf8encode:function(e){return n.transformTo("string",u.utf8encode(e))},utf8decode:function(e){return u.utf8decode(e)}};r.exports=T},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(e,r,t){t.LOCAL_FILE_HEADER="PK";t.CENTRAL_FILE_HEADER="PK";t.CENTRAL_DIRECTORY_END="PK";t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK";t.ZIP64_CENTRAL_DIRECTORY_END="PK";t.DATA_DESCRIPTOR="PK\b"},{}],15:[function(e,r,t){var a=e("./dataReader");var n=e("./utils");function i(e,r){this.data=e;if(!r){this.data=n.string2binary(this.data)}this.length=this.data.length;this.index=0}i.prototype=new a;i.prototype.byteAt=function(e){return this.data.charCodeAt(e)};i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)};i.prototype.readData=function(e){this.checkOffset(e);var r=this.data.slice(this.index,this.index+e);this.index+=e;return r};r.exports=i},{"./dataReader":5,"./utils":21}],16:[function(e,r,t){var a=e("./utils");
var n=function(){this.data=[]};n.prototype={append:function(e){e=a.transformTo("string",e);this.data.push(e)},finalize:function(){return this.data.join("")}};r.exports=n},{"./utils":21}],17:[function(e,r,t){(function(e){t.base64=true;t.array=true;t.string=true;t.arraybuffer=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined";t.nodebuffer=typeof e!=="undefined";t.uint8array=typeof Uint8Array!=="undefined";if(typeof ArrayBuffer==="undefined"){t.blob=false}else{var r=new ArrayBuffer(0);try{t.blob=new Blob([r],{type:"application/zip"}).size===0}catch(a){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;var i=new n;i.append(r);t.blob=i.getBlob("application/zip").size===0}catch(a){t.blob=false}}}}).call(this,typeof Buffer!=="undefined"?Buffer:undefined)},{}],18:[function(e,r,t){var a=e("./dataReader");function n(e){if(e){this.data=e;this.length=this.data.length;this.index=0}}n.prototype=new a;n.prototype.byteAt=function(e){return this.data[e]};n.prototype.lastIndexOfSignature=function(e){var r=e.charCodeAt(0),t=e.charCodeAt(1),a=e.charCodeAt(2),n=e.charCodeAt(3);for(var i=this.length-4;i>=0;--i){if(this.data[i]===r&&this.data[i+1]===t&&this.data[i+2]===a&&this.data[i+3]===n){return i}}return -1};n.prototype.readData=function(e){this.checkOffset(e);if(e===0){return new Uint8Array(0)}var r=this.data.subarray(this.index,this.index+e);this.index+=e;return r};r.exports=n},{"./dataReader":5}],19:[function(e,r,t){var a=e("./utils");var n=function(e){this.data=new Uint8Array(e);this.index=0};n.prototype={append:function(e){if(e.length!==0){e=a.transformTo("uint8array",e);this.data.set(e,this.index);this.index+=e.length}},finalize:function(){return this.data}};r.exports=n},{"./utils":21}],20:[function(e,r,t){var a=e("./utils");var n=e("./support");var i=e("./nodeBuffer");var s=new Array(256);for(var f=0;f<256;f++){s[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1}s[254]=s[254]=1;var o=function(e){var r,t,a,i,s,f=e.length,o=0;
for(i=0;i<f;i++){t=e.charCodeAt(i);if((t&64512)===55296&&i+1<f){a=e.charCodeAt(i+1);if((a&64512)===56320){t=65536+(t-55296<<10)+(a-56320);i++}}o+=t<128?1:t<2048?2:t<65536?3:4}if(n.uint8array){r=new Uint8Array(o)}else{r=new Array(o)}for(s=0,i=0;s<o;i++){t=e.charCodeAt(i);if((t&64512)===55296&&i+1<f){a=e.charCodeAt(i+1);if((a&64512)===56320){t=65536+(t-55296<<10)+(a-56320);i++}}if(t<128){r[s++]=t}else{if(t<2048){r[s++]=192|t>>>6;r[s++]=128|t&63}else{if(t<65536){r[s++]=224|t>>>12;r[s++]=128|t>>>6&63;r[s++]=128|t&63}else{r[s++]=240|t>>>18;r[s++]=128|t>>>12&63;r[s++]=128|t>>>6&63;r[s++]=128|t&63}}}}return r};var l=function(e,r){var t;r=r||e.length;if(r>e.length){r=e.length}t=r-1;while(t>=0&&(e[t]&192)===128){t--}if(t<0){return r}if(t===0){return r}return t+s[e[t]]>r?t:r};var c=function(e){var r,t,n,i,f;var o=e.length;var l=new Array(o*2);for(n=0,t=0;t<o;){i=e[t++];if(i<128){l[n++]=i;continue}f=s[i];if(f>4){l[n++]=65533;t+=f-1;continue}i&=f===2?31:f===3?15:7;while(f>1&&t<o){i=i<<6|e[t++]&63;f--}if(f>1){l[n++]=65533;continue}if(i<65536){l[n++]=i}else{i-=65536;l[n++]=55296|i>>10&1023;l[n++]=56320|i&1023}}if(l.length!==n){if(l.subarray){l=l.subarray(0,n)}else{l.length=n}}return a.applyFromCharCode(l)};t.utf8encode=function h(e){if(n.nodebuffer){return i(e,"utf-8")}return o(e)};t.utf8decode=function u(e){if(n.nodebuffer){return a.transformTo("nodebuffer",e).toString("utf-8")}e=a.transformTo(n.uint8array?"uint8array":"array",e);var r=[],t=0,i=e.length,s=65536;while(t<i){var f=l(e,Math.min(t+s,i));if(n.uint8array){r.push(c(e.subarray(t,f)))}else{r.push(c(e.slice(t,f)))}t=f}return r.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(e,r,t){var a=e("./support");var n=e("./compressions");var i=e("./nodeBuffer");t.string2binary=function(e){var r="";for(var t=0;t<e.length;t++){r+=String.fromCharCode(e.charCodeAt(t)&255)}return r};t.arrayBuffer2Blob=function(e){t.checkSupport("blob");try{return new Blob([e],{type:"application/zip"})}catch(r){try{var a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;
var n=new a;n.append(e);return n.getBlob("application/zip")}catch(r){throw new Error("Bug : can't construct the Blob.")}}};function s(e){return e}function f(e,r){for(var t=0;t<e.length;++t){r[t]=e.charCodeAt(t)&255}return r}function o(e){var r=65536;var a=[],n=e.length,s=t.getTypeOf(e),f=0,o=true;try{switch(s){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,i(0));break}}catch(l){o=false}if(!o){var c="";for(var h=0;h<e.length;h++){c+=String.fromCharCode(e[h])}return c}while(f<n&&r>1){try{if(s==="array"||s==="nodebuffer"){a.push(String.fromCharCode.apply(null,e.slice(f,Math.min(f+r,n))))}else{a.push(String.fromCharCode.apply(null,e.subarray(f,Math.min(f+r,n))))}f+=r}catch(l){r=Math.floor(r/2)}}return a.join("")}t.applyFromCharCode=o;function l(e,r){for(var t=0;t<e.length;t++){r[t]=e[t]}return r}var c={};c["string"]={string:s,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return c["string"]["uint8array"](e).buffer},uint8array:function(e){return f(e,new Uint8Array(e.length))},nodebuffer:function(e){return f(e,i(e.length))}};c["array"]={string:o,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i(e)}};c["arraybuffer"]={string:function(e){return o(new Uint8Array(e))},array:function(e){return l(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i(new Uint8Array(e))}};c["uint8array"]={string:o,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return i(e)}};c["nodebuffer"]={string:o,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return c["nodebuffer"]["uint8array"](e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:s};t.transformTo=function(e,r){if(!r){r=""}if(!e){return r
}t.checkSupport(e);var a=t.getTypeOf(r);var n=c[a][e](r);return n};t.getTypeOf=function(e){if(typeof e==="string"){return"string"}if(Object.prototype.toString.call(e)==="[object Array]"){return"array"}if(a.nodebuffer&&i.test(e)){return"nodebuffer"}if(a.uint8array&&e instanceof Uint8Array){return"uint8array"}if(a.arraybuffer&&e instanceof ArrayBuffer){return"arraybuffer"}};t.checkSupport=function(e){var r=a[e.toLowerCase()];if(!r){throw new Error(e+" is not supported by this browser")}};t.MAX_VALUE_16BITS=65535;t.MAX_VALUE_32BITS=-1;t.pretty=function(e){var r="",t,a;for(a=0;a<(e||"").length;a++){t=e.charCodeAt(a);r+="\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}return r};t.findCompression=function(e){for(var r in n){if(!n.hasOwnProperty(r)){continue}if(n[r].magic===e){return n[r]}}return null};t.isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(e,r,t){var a=e("./stringReader");var n=e("./nodeBufferReader");var i=e("./uint8ArrayReader");var s=e("./utils");var f=e("./signature");var o=e("./zipEntry");var l=e("./support");var c=e("./object");function h(e,r){this.files=[];this.loadOptions=r;if(e){this.load(e)}}h.prototype={checkSignature:function(e){var r=this.reader.readString(4);if(r!==e){throw new Error("Corrupted zip or bug : unexpected signature "+"("+s.pretty(r)+", expected "+s.pretty(e)+")")}},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);this.zipComment=this.reader.readString(this.zipCommentLength);this.zipComment=c.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.versionMadeBy=this.reader.readString(2);
this.versionNeeded=this.reader.readInt(2);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};var e=this.zip64EndOfCentralSize-44,r=0,t,a,n;while(r<e){t=this.reader.readInt(2);a=this.reader.readInt(4);n=this.reader.readString(a);this.zip64ExtensibleData[t]={id:t,length:a,value:n}}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(this.disksCount>1){throw new Error("Multi-volumes zip are not supported")}},readLocalFiles:function(){var e,r;for(e=0;e<this.files.length;e++){r=this.files[e];this.reader.setIndex(r.localHeaderOffset);this.checkSignature(f.LOCAL_FILE_HEADER);r.readLocalPart(this.reader);r.handleUTF8()}},readCentralDir:function(){var e;this.reader.setIndex(this.centralDirOffset);while(this.reader.readString(4)===f.CENTRAL_FILE_HEADER){e=new o({zip64:this.zip64},this.loadOptions);e.readCentralPart(this.reader);this.files.push(e)}},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(f.CENTRAL_DIRECTORY_END);if(e===-1){throw new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(e);this.checkSignature(f.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){this.zip64=true;e=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR);if(e===-1){throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator")}this.reader.setIndex(e);
this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}},prepareReader:function(e){var r=s.getTypeOf(e);if(r==="string"&&!l.uint8array){this.reader=new a(e,this.loadOptions.optimizedBinaryString)}else{if(r==="nodebuffer"){this.reader=new n(e)}else{this.reader=new i(s.transformTo("uint8array",e))}}},load:function(e){this.prepareReader(e);this.readEndOfCentral();this.readCentralDir();this.readLocalFiles()}};r.exports=h},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(e,r,t){var a=e("./stringReader");var n=e("./utils");var i=e("./compressedObject");var s=e("./object");function f(e,r){this.options=e;this.loadOptions=r}f.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},prepareCompressedContent:function(e,r,t){return function(){var a=e.index;e.setIndex(r);var n=e.readData(t);e.setIndex(a);return n}},prepareContent:function(e,r,t,a,i){return function(){var e=n.transformTo(a.uncompressInputType,this.getCompressedContent());var r=a.uncompress(e);if(r.length!==i){throw new Error("Bug : uncompressed data size mismatch")}return r}},readLocalPart:function(e){var r,t;e.skip(22);this.fileNameLength=e.readInt(2);t=e.readInt(2);this.fileName=e.readString(this.fileNameLength);e.skip(t);if(this.compressedSize==-1||this.uncompressedSize==-1){throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory "+"(compressedSize == -1 || uncompressedSize == -1)")}r=n.findCompression(this.compressionMethod);if(r===null){throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")")}this.decompressed=new i;this.decompressed.compressedSize=this.compressedSize;
this.decompressed.uncompressedSize=this.uncompressedSize;this.decompressed.crc32=this.crc32;this.decompressed.compressionMethod=this.compressionMethod;this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,r);this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,r,this.uncompressedSize);if(this.loadOptions.checkCRC32){this.decompressed=n.transformTo("string",this.decompressed.getContent());if(s.crc32(this.decompressed)!==this.crc32){throw new Error("Corrupted zip : CRC32 mismatch")}}},readCentralPart:function(e){this.versionMadeBy=e.readString(2);this.versionNeeded=e.readInt(2);this.bitFlag=e.readInt(2);this.compressionMethod=e.readString(2);this.date=e.readDate();this.crc32=e.readInt(4);this.compressedSize=e.readInt(4);this.uncompressedSize=e.readInt(4);this.fileNameLength=e.readInt(2);this.extraFieldsLength=e.readInt(2);this.fileCommentLength=e.readInt(2);this.diskNumberStart=e.readInt(2);this.internalFileAttributes=e.readInt(2);this.externalFileAttributes=e.readInt(4);this.localHeaderOffset=e.readInt(4);if(this.isEncrypted()){throw new Error("Encrypted zip are not supported")}this.fileName=e.readString(this.fileNameLength);this.readExtraFields(e);this.parseZIP64ExtraField(e);this.fileComment=e.readString(this.fileCommentLength);this.dir=this.externalFileAttributes&16?true:false},parseZIP64ExtraField:function(e){if(!this.extraFields[1]){return}var r=new a(this.extraFields[1].value);if(this.uncompressedSize===n.MAX_VALUE_32BITS){this.uncompressedSize=r.readInt(8)}if(this.compressedSize===n.MAX_VALUE_32BITS){this.compressedSize=r.readInt(8)}if(this.localHeaderOffset===n.MAX_VALUE_32BITS){this.localHeaderOffset=r.readInt(8)}if(this.diskNumberStart===n.MAX_VALUE_32BITS){this.diskNumberStart=r.readInt(4)}},readExtraFields:function(e){var r=e.index,t,a,n;this.extraFields=this.extraFields||{};while(e.index<r+this.extraFieldsLength){t=e.readInt(2);a=e.readInt(2);n=e.readString(a);this.extraFields[t]={id:t,length:a,value:n}
}},handleUTF8:function(){if(this.useUTF8()){this.fileName=s.utf8decode(this.fileName);this.fileComment=s.utf8decode(this.fileComment)}else{var e=this.findExtraFieldUnicodePath();if(e!==null){this.fileName=e}var r=this.findExtraFieldUnicodeComment();if(r!==null){this.fileComment=r}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var r=new a(e.value);if(r.readInt(1)!==1){return null}if(s.crc32(this.fileName)!==r.readInt(4)){return null}return s.utf8decode(r.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var r=new a(e.value);if(r.readInt(1)!==1){return null}if(s.crc32(this.fileComment)!==r.readInt(4)){return null}return s.utf8decode(r.readString(e.length-5))}return null}};r.exports=f},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(e,r,t){var a=e("./lib/utils/common").assign;var n=e("./lib/deflate");var i=e("./lib/inflate");var s=e("./lib/zlib/constants");var f={};a(f,n,i,s);r.exports=f},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(e,r,t){var a=e("./zlib/deflate.js");var n=e("./utils/common");var i=e("./utils/strings");var s=e("./zlib/messages");var f=e("./zlib/zstream");var o=0;var l=4;var c=0;var h=1;var u=-1;var d=0;var p=8;var v=function(e){this.options=n.assign({level:u,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var r=this.options;if(r.raw&&r.windowBits>0){r.windowBits=-r.windowBits}else{if(r.gzip&&r.windowBits>0&&r.windowBits<16){r.windowBits+=16}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new f;this.strm.avail_out=0;var t=a.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==c){throw new Error(s[t])}if(r.header){a.deflateSetHeader(this.strm,r.header)}};v.prototype.push=function(e,r){var t=this.strm;var s=this.options.chunkSize;var f,u;if(this.ended){return false}u=r===~~r?r:r===true?l:o;if(typeof e==="string"){t.input=i.string2buf(e)
}else{t.input=e}t.next_in=0;t.avail_in=t.input.length;do{if(t.avail_out===0){t.output=new n.Buf8(s);t.next_out=0;t.avail_out=s}f=a.deflate(t,u);if(f!==h&&f!==c){this.onEnd(f);this.ended=true;return false}if(t.avail_out===0||t.avail_in===0&&u===l){if(this.options.to==="string"){this.onData(i.buf2binstring(n.shrinkBuf(t.output,t.next_out)))}else{this.onData(n.shrinkBuf(t.output,t.next_out))}}}while((t.avail_in>0||t.avail_out===0)&&f!==h);if(u===l){f=a.deflateEnd(this.strm);this.onEnd(f);this.ended=true;return f===c}return true};v.prototype.onData=function(e){this.chunks.push(e)};v.prototype.onEnd=function(e){if(e===c){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=n.flattenChunks(this.chunks)}}this.chunks=[];this.err=e;this.msg=this.strm.msg};function g(e,r){var t=new v(r);t.push(e,true);if(t.err){throw t.msg}return t.result}function m(e,r){r=r||{};r.raw=true;return g(e,r)}function b(e,r){r=r||{};r.gzip=true;return g(e,r)}t.Deflate=v;t.deflate=g;t.deflateRaw=m;t.gzip=b},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(e,r,t){var a=e("./zlib/inflate.js");var n=e("./utils/common");var i=e("./utils/strings");var s=e("./zlib/constants");var f=e("./zlib/messages");var o=e("./zlib/zstream");var l=e("./zlib/gzheader");var c=function(e){this.options=n.assign({chunkSize:16384,windowBits:0,to:""},e||{});var r=this.options;if(r.raw&&r.windowBits>=0&&r.windowBits<16){r.windowBits=-r.windowBits;if(r.windowBits===0){r.windowBits=-15}}if(r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)){r.windowBits+=32}if(r.windowBits>15&&r.windowBits<48){if((r.windowBits&15)===0){r.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new o;this.strm.avail_out=0;var t=a.inflateInit2(this.strm,r.windowBits);if(t!==s.Z_OK){throw new Error(f[t])}this.header=new l;a.inflateGetHeader(this.strm,this.header)};c.prototype.push=function(e,r){var t=this.strm;var f=this.options.chunkSize;
var o,l;var c,h,u;if(this.ended){return false}l=r===~~r?r:r===true?s.Z_FINISH:s.Z_NO_FLUSH;if(typeof e==="string"){t.input=i.binstring2buf(e)}else{t.input=e}t.next_in=0;t.avail_in=t.input.length;do{if(t.avail_out===0){t.output=new n.Buf8(f);t.next_out=0;t.avail_out=f}o=a.inflate(t,s.Z_NO_FLUSH);if(o!==s.Z_STREAM_END&&o!==s.Z_OK){this.onEnd(o);this.ended=true;return false}if(t.next_out){if(t.avail_out===0||o===s.Z_STREAM_END||t.avail_in===0&&l===s.Z_FINISH){if(this.options.to==="string"){c=i.utf8border(t.output,t.next_out);h=t.next_out-c;u=i.buf2string(t.output,c);t.next_out=h;t.avail_out=f-h;if(h){n.arraySet(t.output,t.output,c,h,0)}this.onData(u)}else{this.onData(n.shrinkBuf(t.output,t.next_out))}}}}while(t.avail_in>0&&o!==s.Z_STREAM_END);if(o===s.Z_STREAM_END){l=s.Z_FINISH}if(l===s.Z_FINISH){o=a.inflateEnd(this.strm);this.onEnd(o);this.ended=true;return o===s.Z_OK}return true};c.prototype.onData=function(e){this.chunks.push(e)};c.prototype.onEnd=function(e){if(e===s.Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=n.flattenChunks(this.chunks)}}this.chunks=[];this.err=e;this.msg=this.strm.msg};function h(e,r){var t=new c(r);t.push(e,true);if(t.err){throw t.msg}return t.result}function u(e,r){r=r||{};r.raw=true;return h(e,r)}t.Inflate=c;t.inflate=h;t.inflateRaw=u;t.ungzip=h},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(e,r,t){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";t.assign=function(e){var r=Array.prototype.slice.call(arguments,1);while(r.length){var t=r.shift();if(!t){continue}if(typeof t!=="object"){throw new TypeError(t+"must be non-object")}for(var a in t){if(t.hasOwnProperty(a)){e[a]=t[a]}}}return e};t.shrinkBuf=function(e,r){if(e.length===r){return e}if(e.subarray){return e.subarray(0,r)}e.length=r;return e};var n={arraySet:function(e,r,t,a,n){if(r.subarray&&e.subarray){e.set(r.subarray(t,t+a),n);
return}for(var i=0;i<a;i++){e[n+i]=r[t+i]}},flattenChunks:function(e){var r,t,a,n,i,s;a=0;for(r=0,t=e.length;r<t;r++){a+=e[r].length}s=new Uint8Array(a);n=0;for(r=0,t=e.length;r<t;r++){i=e[r];s.set(i,n);n+=i.length}return s}};var i={arraySet:function(e,r,t,a,n){for(var i=0;i<a;i++){e[n+i]=r[t+i]}},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){if(e){t.Buf8=Uint8Array;t.Buf16=Uint16Array;t.Buf32=Int32Array;t.assign(t,n)}else{t.Buf8=Array;t.Buf16=Array;t.Buf32=Array;t.assign(t,i)}};t.setTyped(a)},{}],28:[function(e,r,t){var a=e("./common");var n=true;var i=true;try{String.fromCharCode.apply(null,[0])}catch(s){n=false}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){i=false}var f=new a.Buf8(256);for(var o=0;o<256;o++){f[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1}f[254]=f[254]=1;t.string2buf=function(e){var r,t,n,i,s,f=e.length,o=0;for(i=0;i<f;i++){t=e.charCodeAt(i);if((t&64512)===55296&&i+1<f){n=e.charCodeAt(i+1);if((n&64512)===56320){t=65536+(t-55296<<10)+(n-56320);i++}}o+=t<128?1:t<2048?2:t<65536?3:4}r=new a.Buf8(o);for(s=0,i=0;s<o;i++){t=e.charCodeAt(i);if((t&64512)===55296&&i+1<f){n=e.charCodeAt(i+1);if((n&64512)===56320){t=65536+(t-55296<<10)+(n-56320);i++}}if(t<128){r[s++]=t}else{if(t<2048){r[s++]=192|t>>>6;r[s++]=128|t&63}else{if(t<65536){r[s++]=224|t>>>12;r[s++]=128|t>>>6&63;r[s++]=128|t&63}else{r[s++]=240|t>>>18;r[s++]=128|t>>>12&63;r[s++]=128|t>>>6&63;r[s++]=128|t&63}}}}return r};function l(e,r){if(r<65537){if(e.subarray&&i||!e.subarray&&n){return String.fromCharCode.apply(null,a.shrinkBuf(e,r))}}var t="";for(var s=0;s<r;s++){t+=String.fromCharCode(e[s])}return t}t.buf2binstring=function(e){return l(e,e.length)};t.binstring2buf=function(e){var r=new a.Buf8(e.length);for(var t=0,n=r.length;t<n;t++){r[t]=e.charCodeAt(t)}return r};t.buf2string=function(e,r){var t,a,n,i;var s=r||e.length;var o=new Array(s*2);for(a=0,t=0;t<s;){n=e[t++];if(n<128){o[a++]=n;continue}i=f[n];if(i>4){o[a++]=65533;t+=i-1;continue}n&=i===2?31:i===3?15:7;
while(i>1&&t<s){n=n<<6|e[t++]&63;i--}if(i>1){o[a++]=65533;continue}if(n<65536){o[a++]=n}else{n-=65536;o[a++]=55296|n>>10&1023;o[a++]=56320|n&1023}}return l(o,a)};t.utf8border=function(e,r){var t;r=r||e.length;if(r>e.length){r=e.length}t=r-1;while(t>=0&&(e[t]&192)===128){t--}if(t<0){return r}if(t===0){return r}return t+f[e[t]]>r?t:r}},{"./common":27}],29:[function(e,r,t){function a(e,r,t,a){var n=e&65535|0,i=e>>>16&65535|0,s=0;while(t!==0){s=t>2000?2000:t;t-=s;do{n=n+r[a++]|0;i=i+n|0}while(--s);n%=65521;i%=65521}return n|i<<16|0}r.exports=a},{}],30:[function(e,r,t){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(e,r,t){function a(){var e,r=[];for(var t=0;t<256;t++){e=t;for(var a=0;a<8;a++){e=e&1?3988292384^e>>>1:e>>>1}r[t]=e}return r}var n=a();function i(e,r,t,a){var i=n,s=a+t;e=e^-1;for(var f=a;f<s;f++){e=e>>>8^i[(e^r[f])&255]}return e^-1}r.exports=i},{}],32:[function(e,r,t){var a=e("../utils/common");var n=e("./trees");var i=e("./adler32");var s=e("./crc32");var f=e("./messages");var o=0;var l=1;var c=3;var h=4;var u=5;var d=0;var p=1;var v=-2;var g=-3;var m=-5;var b=-1;var w=1;var C=2;var E=3;var k=4;var S=0;var A=2;var _=8;var B=9;var T=15;var y=8;var x=29;var I=256;var R=I+1+x;var D=30;var O=19;var F=2*R+1;var P=15;var N=3;var L=258;var M=L+N+1;var U=32;var H=42;var W=69;var V=73;var z=91;var X=103;var G=113;var j=666;var K=1;var Y=2;var $=3;var Z=4;var Q=3;function J(e,r){e.msg=f[r];return r}function q(e){return(e<<1)-(e>4?9:0)}function ee(e){var r=e.length;while(--r>=0){e[r]=0}}function re(e){var r=e.state;var t=r.pending;if(t>e.avail_out){t=e.avail_out}if(t===0){return}a.arraySet(e.output,r.pending_buf,r.pending_out,t,e.next_out);
e.next_out+=t;r.pending_out+=t;e.total_out+=t;e.avail_out-=t;r.pending-=t;if(r.pending===0){r.pending_out=0}}function te(e,r){n._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r);e.block_start=e.strstart;re(e.strm)}function ae(e,r){e.pending_buf[e.pending++]=r}function ne(e,r){e.pending_buf[e.pending++]=r>>>8&255;e.pending_buf[e.pending++]=r&255}function ie(e,r,t,n){var f=e.avail_in;if(f>n){f=n}if(f===0){return 0}e.avail_in-=f;a.arraySet(r,e.input,e.next_in,f,t);if(e.state.wrap===1){e.adler=i(e.adler,r,f,t)}else{if(e.state.wrap===2){e.adler=s(e.adler,r,f,t)}}e.next_in+=f;e.total_in+=f;return f}function se(e,r){var t=e.max_chain_length;var a=e.strstart;var n;var i;var s=e.prev_length;var f=e.nice_match;var o=e.strstart>e.w_size-M?e.strstart-(e.w_size-M):0;var l=e.window;var c=e.w_mask;var h=e.prev;var u=e.strstart+L;var d=l[a+s-1];var p=l[a+s];if(e.prev_length>=e.good_match){t>>=2}if(f>e.lookahead){f=e.lookahead}do{n=r;if(l[n+s]!==p||l[n+s-1]!==d||l[n]!==l[a]||l[++n]!==l[a+1]){continue}a+=2;n++;do{}while(l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&a<u);i=L-(u-a);a=u-L;if(i>s){e.match_start=r;s=i;if(i>=f){break}d=l[a+s-1];p=l[a+s]}}while((r=h[r&c])>o&&--t!==0);if(s<=e.lookahead){return s}return e.lookahead}function fe(e){var r=e.w_size;var t,n,i,s,f;do{s=e.window_size-e.lookahead-e.strstart;if(e.strstart>=r+(r-M)){a.arraySet(e.window,e.window,r,r,0);e.match_start-=r;e.strstart-=r;e.block_start-=r;n=e.hash_size;t=n;do{i=e.head[--t];e.head[t]=i>=r?i-r:0}while(--n);n=r;t=n;do{i=e.prev[--t];e.prev[t]=i>=r?i-r:0}while(--n);s+=r}if(e.strm.avail_in===0){break}n=ie(e.strm,e.window,e.strstart+e.lookahead,s);e.lookahead+=n;if(e.lookahead+e.insert>=N){f=e.strstart-e.insert;e.ins_h=e.window[f];e.ins_h=(e.ins_h<<e.hash_shift^e.window[f+1])&e.hash_mask;while(e.insert){e.ins_h=(e.ins_h<<e.hash_shift^e.window[f+N-1])&e.hash_mask;e.prev[f&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=f;
f++;e.insert--;if(e.lookahead+e.insert<N){break}}}}while(e.lookahead<M&&e.strm.avail_in!==0)}function oe(e,r){var t=65535;if(t>e.pending_buf_size-5){t=e.pending_buf_size-5}for(;;){if(e.lookahead<=1){fe(e);if(e.lookahead===0&&r===o){return K}if(e.lookahead===0){break}}e.strstart+=e.lookahead;e.lookahead=0;var a=e.block_start+t;if(e.strstart===0||e.strstart>=a){e.lookahead=e.strstart-a;e.strstart=a;te(e,false);if(e.strm.avail_out===0){return K}}if(e.strstart-e.block_start>=e.w_size-M){te(e,false);if(e.strm.avail_out===0){return K}}}e.insert=0;if(r===h){te(e,true);if(e.strm.avail_out===0){return $}return Z}if(e.strstart>e.block_start){te(e,false);if(e.strm.avail_out===0){return K}}return K}function le(e,r){var t;var a;for(;;){if(e.lookahead<M){fe(e);if(e.lookahead<M&&r===o){return K}if(e.lookahead===0){break}}t=0;if(e.lookahead>=N){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+N-1])&e.hash_mask;t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}if(t!==0&&e.strstart-t<=e.w_size-M){e.match_length=se(e,t)}if(e.match_length>=N){a=n._tr_tally(e,e.strstart-e.match_start,e.match_length-N);e.lookahead-=e.match_length;if(e.match_length<=e.max_lazy_match&&e.lookahead>=N){e.match_length--;do{e.strstart++;e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+N-1])&e.hash_mask;t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}while(--e.match_length!==0);e.strstart++}else{e.strstart+=e.match_length;e.match_length=0;e.ins_h=e.window[e.strstart];e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask}}else{a=n._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(a){te(e,false);if(e.strm.avail_out===0){return K}}}e.insert=e.strstart<N-1?e.strstart:N-1;if(r===h){te(e,true);if(e.strm.avail_out===0){return $}return Z}if(e.last_lit){te(e,false);if(e.strm.avail_out===0){return K}}return Y}function ce(e,r){var t;var a;var i;for(;;){if(e.lookahead<M){fe(e);if(e.lookahead<M&&r===o){return K}if(e.lookahead===0){break}}t=0;if(e.lookahead>=N){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+N-1])&e.hash_mask;
t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}e.prev_length=e.match_length;e.prev_match=e.match_start;e.match_length=N-1;if(t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-M){e.match_length=se(e,t);if(e.match_length<=5&&(e.strategy===w||e.match_length===N&&e.strstart-e.match_start>4096)){e.match_length=N-1}}if(e.prev_length>=N&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-N;a=n._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-N);e.lookahead-=e.prev_length-1;e.prev_length-=2;do{if(++e.strstart<=i){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+N-1])&e.hash_mask;t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}}while(--e.prev_length!==0);e.match_available=0;e.match_length=N-1;e.strstart++;if(a){te(e,false);if(e.strm.avail_out===0){return K}}}else{if(e.match_available){a=n._tr_tally(e,0,e.window[e.strstart-1]);if(a){te(e,false)}e.strstart++;e.lookahead--;if(e.strm.avail_out===0){return K}}else{e.match_available=1;e.strstart++;e.lookahead--}}}if(e.match_available){a=n._tr_tally(e,0,e.window[e.strstart-1]);e.match_available=0}e.insert=e.strstart<N-1?e.strstart:N-1;if(r===h){te(e,true);if(e.strm.avail_out===0){return $}return Z}if(e.last_lit){te(e,false);if(e.strm.avail_out===0){return K}}return Y}function he(e,r){var t;var a;var i,s;var f=e.window;for(;;){if(e.lookahead<=L){fe(e);if(e.lookahead<=L&&r===o){return K}if(e.lookahead===0){break}}e.match_length=0;if(e.lookahead>=N&&e.strstart>0){i=e.strstart-1;a=f[i];if(a===f[++i]&&a===f[++i]&&a===f[++i]){s=e.strstart+L;do{}while(a===f[++i]&&a===f[++i]&&a===f[++i]&&a===f[++i]&&a===f[++i]&&a===f[++i]&&a===f[++i]&&a===f[++i]&&i<s);e.match_length=L-(s-i);if(e.match_length>e.lookahead){e.match_length=e.lookahead}}}if(e.match_length>=N){t=n._tr_tally(e,1,e.match_length-N);e.lookahead-=e.match_length;e.strstart+=e.match_length;e.match_length=0}else{t=n._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(t){te(e,false);if(e.strm.avail_out===0){return K
}}}e.insert=0;if(r===h){te(e,true);if(e.strm.avail_out===0){return $}return Z}if(e.last_lit){te(e,false);if(e.strm.avail_out===0){return K}}return Y}function ue(e,r){var t;for(;;){if(e.lookahead===0){fe(e);if(e.lookahead===0){if(r===o){return K}break}}e.match_length=0;t=n._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++;if(t){te(e,false);if(e.strm.avail_out===0){return K}}}e.insert=0;if(r===h){te(e,true);if(e.strm.avail_out===0){return $}return Z}if(e.last_lit){te(e,false);if(e.strm.avail_out===0){return K}}return Y}var de=function(e,r,t,a,n){this.good_length=e;this.max_lazy=r;this.nice_length=t;this.max_chain=a;this.func=n};var pe;pe=[new de(0,0,0,0,oe),new de(4,4,8,4,le),new de(4,5,16,8,le),new de(4,6,32,32,le),new de(4,4,16,16,ce),new de(8,16,32,32,ce),new de(8,16,128,128,ce),new de(8,32,128,256,ce),new de(32,128,258,1024,ce),new de(32,258,258,4096,ce)];function ve(e){e.window_size=2*e.w_size;ee(e.head);e.max_lazy_match=pe[e.level].max_lazy;e.good_match=pe[e.level].good_length;e.nice_match=pe[e.level].nice_length;e.max_chain_length=pe[e.level].max_chain;e.strstart=0;e.block_start=0;e.lookahead=0;e.insert=0;e.match_length=e.prev_length=N-1;e.match_available=0;e.ins_h=0}function ge(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=_;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new a.Buf16(F*2);this.dyn_dtree=new a.Buf16((2*D+1)*2);this.bl_tree=new a.Buf16((2*O+1)*2);ee(this.dyn_ltree);ee(this.dyn_dtree);ee(this.bl_tree);
this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new a.Buf16(P+1);this.heap=new a.Buf16(2*R+1);ee(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new a.Buf16(2*R+1);ee(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function me(e){var r;if(!e||!e.state){return J(e,v)}e.total_in=e.total_out=0;e.data_type=A;r=e.state;r.pending=0;r.pending_out=0;if(r.wrap<0){r.wrap=-r.wrap}r.status=r.wrap?H:G;e.adler=r.wrap===2?0:1;r.last_flush=o;n._tr_init(r);return d}function be(e){var r=me(e);if(r===d){ve(e.state)}return r}function we(e,r){if(!e||!e.state){return v}if(e.state.wrap!==2){return v}e.state.gzhead=r;return d}function Ce(e,r,t,n,i,s){if(!e){return v}var f=1;if(r===b){r=6}if(n<0){f=0;n=-n}else{if(n>15){f=2;n-=16}}if(i<1||i>B||t!==_||n<8||n>15||r<0||r>9||s<0||s>k){return J(e,v)}if(n===8){n=9}var o=new ge;e.state=o;o.strm=e;o.wrap=f;o.gzhead=null;o.w_bits=n;o.w_size=1<<o.w_bits;o.w_mask=o.w_size-1;o.hash_bits=i+7;o.hash_size=1<<o.hash_bits;o.hash_mask=o.hash_size-1;o.hash_shift=~~((o.hash_bits+N-1)/N);o.window=new a.Buf8(o.w_size*2);o.head=new a.Buf16(o.hash_size);o.prev=new a.Buf16(o.w_size);o.lit_bufsize=1<<i+6;o.pending_buf_size=o.lit_bufsize*4;o.pending_buf=new a.Buf8(o.pending_buf_size);o.d_buf=o.lit_bufsize>>1;o.l_buf=(1+2)*o.lit_bufsize;o.level=r;o.strategy=s;o.method=t;return be(e)}function Ee(e,r){return Ce(e,r,_,T,y,S)}function ke(e,r){var t,a;var i,f;if(!e||!e.state||r>u||r<0){return e?J(e,v):v}a=e.state;if(!e.output||!e.input&&e.avail_in!==0||a.status===j&&r!==h){return J(e,e.avail_out===0?m:v)}a.strm=e;t=a.last_flush;a.last_flush=r;if(a.status===H){if(a.wrap===2){e.adler=0;ae(a,31);ae(a,139);ae(a,8);if(!a.gzhead){ae(a,0);ae(a,0);ae(a,0);ae(a,0);ae(a,0);ae(a,a.level===9?2:a.strategy>=C||a.level<2?4:0);ae(a,Q);a.status=G}else{ae(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(!a.gzhead.extra?0:4)+(!a.gzhead.name?0:8)+(!a.gzhead.comment?0:16));
ae(a,a.gzhead.time&255);ae(a,a.gzhead.time>>8&255);ae(a,a.gzhead.time>>16&255);ae(a,a.gzhead.time>>24&255);ae(a,a.level===9?2:a.strategy>=C||a.level<2?4:0);ae(a,a.gzhead.os&255);if(a.gzhead.extra&&a.gzhead.extra.length){ae(a,a.gzhead.extra.length&255);ae(a,a.gzhead.extra.length>>8&255)}if(a.gzhead.hcrc){e.adler=s(e.adler,a.pending_buf,a.pending,0)}a.gzindex=0;a.status=W}}else{var g=_+(a.w_bits-8<<4)<<8;var b=-1;if(a.strategy>=C||a.level<2){b=0}else{if(a.level<6){b=1}else{if(a.level===6){b=2}else{b=3}}}g|=b<<6;if(a.strstart!==0){g|=U}g+=31-g%31;a.status=G;ne(a,g);if(a.strstart!==0){ne(a,e.adler>>>16);ne(a,e.adler&65535)}e.adler=1}}if(a.status===W){if(a.gzhead.extra){i=a.pending;while(a.gzindex<(a.gzhead.extra.length&65535)){if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i){e.adler=s(e.adler,a.pending_buf,a.pending-i,i)}re(e);i=a.pending;if(a.pending===a.pending_buf_size){break}}ae(a,a.gzhead.extra[a.gzindex]&255);a.gzindex++}if(a.gzhead.hcrc&&a.pending>i){e.adler=s(e.adler,a.pending_buf,a.pending-i,i)}if(a.gzindex===a.gzhead.extra.length){a.gzindex=0;a.status=V}}else{a.status=V}}if(a.status===V){if(a.gzhead.name){i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i){e.adler=s(e.adler,a.pending_buf,a.pending-i,i)}re(e);i=a.pending;if(a.pending===a.pending_buf_size){f=1;break}}if(a.gzindex<a.gzhead.name.length){f=a.gzhead.name.charCodeAt(a.gzindex++)&255}else{f=0}ae(a,f)}while(f!==0);if(a.gzhead.hcrc&&a.pending>i){e.adler=s(e.adler,a.pending_buf,a.pending-i,i)}if(f===0){a.gzindex=0;a.status=z}}else{a.status=z}}if(a.status===z){if(a.gzhead.comment){i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i){e.adler=s(e.adler,a.pending_buf,a.pending-i,i)}re(e);i=a.pending;if(a.pending===a.pending_buf_size){f=1;break}}if(a.gzindex<a.gzhead.comment.length){f=a.gzhead.comment.charCodeAt(a.gzindex++)&255}else{f=0}ae(a,f)}while(f!==0);if(a.gzhead.hcrc&&a.pending>i){e.adler=s(e.adler,a.pending_buf,a.pending-i,i)}if(f===0){a.status=X
}}else{a.status=X}}if(a.status===X){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size){re(e)}if(a.pending+2<=a.pending_buf_size){ae(a,e.adler&255);ae(a,e.adler>>8&255);e.adler=0;a.status=G}}else{a.status=G}}if(a.pending!==0){re(e);if(e.avail_out===0){a.last_flush=-1;return d}}else{if(e.avail_in===0&&q(r)<=q(t)&&r!==h){return J(e,m)}}if(a.status===j&&e.avail_in!==0){return J(e,m)}if(e.avail_in!==0||a.lookahead!==0||r!==o&&a.status!==j){var w=a.strategy===C?ue(a,r):a.strategy===E?he(a,r):pe[a.level].func(a,r);if(w===$||w===Z){a.status=j}if(w===K||w===$){if(e.avail_out===0){a.last_flush=-1}return d}if(w===Y){if(r===l){n._tr_align(a)}else{if(r!==u){n._tr_stored_block(a,0,0,false);if(r===c){ee(a.head);if(a.lookahead===0){a.strstart=0;a.block_start=0;a.insert=0}}}}re(e);if(e.avail_out===0){a.last_flush=-1;return d}}}if(r!==h){return d}if(a.wrap<=0){return p}if(a.wrap===2){ae(a,e.adler&255);ae(a,e.adler>>8&255);ae(a,e.adler>>16&255);ae(a,e.adler>>24&255);ae(a,e.total_in&255);ae(a,e.total_in>>8&255);ae(a,e.total_in>>16&255);ae(a,e.total_in>>24&255)}else{ne(a,e.adler>>>16);ne(a,e.adler&65535)}re(e);if(a.wrap>0){a.wrap=-a.wrap}return a.pending!==0?d:p}function Se(e){var r;if(!e||!e.state){return v}r=e.state.status;if(r!==H&&r!==W&&r!==V&&r!==z&&r!==X&&r!==G&&r!==j){return J(e,v)}e.state=null;return r===G?J(e,g):d}t.deflateInit=Ee;t.deflateInit2=Ce;t.deflateReset=be;t.deflateResetKeep=me;t.deflateSetHeader=we;t.deflate=ke;t.deflateEnd=Se;t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(e,r,t){function a(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}r.exports=a},{}],34:[function(e,r,t){var a=30;var n=12;r.exports=function i(e,r){var t;var i;var s;var f;var o;var l;var c;var h;var u;var d;var p;var v;var g;var m;var b;var w;var C;var E;var k;var S;var A;var _;var B;var T,y;t=e.state;i=e.next_in;
T=e.input;s=i+(e.avail_in-5);f=e.next_out;y=e.output;o=f-(r-e.avail_out);l=f+(e.avail_out-257);c=t.dmax;h=t.wsize;u=t.whave;d=t.wnext;p=t.window;v=t.hold;g=t.bits;m=t.lencode;b=t.distcode;w=(1<<t.lenbits)-1;C=(1<<t.distbits)-1;e:do{if(g<15){v+=T[i++]<<g;g+=8;v+=T[i++]<<g;g+=8}E=m[v&w];r:for(;;){k=E>>>24;v>>>=k;g-=k;k=E>>>16&255;if(k===0){y[f++]=E&65535}else{if(k&16){S=E&65535;k&=15;if(k){if(g<k){v+=T[i++]<<g;g+=8}S+=v&(1<<k)-1;v>>>=k;g-=k}if(g<15){v+=T[i++]<<g;g+=8;v+=T[i++]<<g;g+=8}E=b[v&C];t:for(;;){k=E>>>24;v>>>=k;g-=k;k=E>>>16&255;if(k&16){A=E&65535;k&=15;if(g<k){v+=T[i++]<<g;g+=8;if(g<k){v+=T[i++]<<g;g+=8}}A+=v&(1<<k)-1;if(A>c){e.msg="invalid distance too far back";t.mode=a;break e}v>>>=k;g-=k;k=f-o;if(A>k){k=A-k;if(k>u){if(t.sane){e.msg="invalid distance too far back";t.mode=a;break e}}_=0;B=p;if(d===0){_+=h-k;if(k<S){S-=k;do{y[f++]=p[_++]}while(--k);_=f-A;B=y}}else{if(d<k){_+=h+d-k;k-=d;if(k<S){S-=k;do{y[f++]=p[_++]}while(--k);_=0;if(d<S){k=d;S-=k;do{y[f++]=p[_++]}while(--k);_=f-A;B=y}}}else{_+=d-k;if(k<S){S-=k;do{y[f++]=p[_++]}while(--k);_=f-A;B=y}}}while(S>2){y[f++]=B[_++];y[f++]=B[_++];y[f++]=B[_++];S-=3}if(S){y[f++]=B[_++];if(S>1){y[f++]=B[_++]}}}else{_=f-A;do{y[f++]=y[_++];y[f++]=y[_++];y[f++]=y[_++];S-=3}while(S>2);if(S){y[f++]=y[_++];if(S>1){y[f++]=y[_++]}}}}else{if((k&64)===0){E=b[(E&65535)+(v&(1<<k)-1)];continue t}else{e.msg="invalid distance code";t.mode=a;break e}}break}}else{if((k&64)===0){E=m[(E&65535)+(v&(1<<k)-1)];continue r}else{if(k&32){t.mode=n;break e}else{e.msg="invalid literal/length code";t.mode=a;break e}}}}break}}while(i<s&&f<l);S=g>>3;i-=S;g-=S<<3;v&=(1<<g)-1;e.next_in=i;e.next_out=f;e.avail_in=i<s?5+(s-i):5-(i-s);e.avail_out=f<l?257+(l-f):257-(f-l);t.hold=v;t.bits=g;return}},{}],35:[function(e,r,t){var a=e("../utils/common");var n=e("./adler32");var i=e("./crc32");var s=e("./inffast");var f=e("./inftrees");var o=0;var l=1;var c=2;var h=4;var u=5;var d=6;var p=0;var v=1;var g=2;var m=-2;var b=-3;var w=-4;var C=-5;var E=8;var k=1;var S=2;
var A=3;var _=4;var B=5;var T=6;var y=7;var x=8;var I=9;var R=10;var D=11;var O=12;var F=13;var P=14;var N=15;var L=16;var M=17;var U=18;var H=19;var W=20;var V=21;var z=22;var X=23;var G=24;var j=25;var K=26;var Y=27;var $=28;var Z=29;var Q=30;var J=31;var q=32;var ee=852;var re=592;var te=15;var ae=te;function ne(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function ie(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new a.Buf16(320);this.work=new a.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function se(e){var r;if(!e||!e.state){return m}r=e.state;e.total_in=e.total_out=r.total=0;e.msg="";if(r.wrap){e.adler=r.wrap&1}r.mode=k;r.last=0;r.havedict=0;r.dmax=32768;r.head=null;r.hold=0;r.bits=0;r.lencode=r.lendyn=new a.Buf32(ee);r.distcode=r.distdyn=new a.Buf32(re);r.sane=1;r.back=-1;return p}function fe(e){var r;if(!e||!e.state){return m}r=e.state;r.wsize=0;r.whave=0;r.wnext=0;return se(e)}function oe(e,r){var t;var a;if(!e||!e.state){return m}a=e.state;if(r<0){t=0;r=-r}else{t=(r>>4)+1;if(r<48){r&=15}}if(r&&(r<8||r>15)){return m}if(a.window!==null&&a.wbits!==r){a.window=null}a.wrap=t;a.wbits=r;return fe(e)}function le(e,r){var t;var a;if(!e){return m}a=new ie;e.state=a;a.window=null;t=oe(e,r);if(t!==p){e.state=null}return t}function ce(e){return le(e,ae)}var he=true;var ue,de;function pe(e){if(he){var r;ue=new a.Buf32(512);de=new a.Buf32(32);r=0;while(r<144){e.lens[r++]=8}while(r<256){e.lens[r++]=9}while(r<280){e.lens[r++]=7}while(r<288){e.lens[r++]=8}f(l,e.lens,0,288,ue,0,e.work,{bits:9});r=0;while(r<32){e.lens[r++]=5}f(c,e.lens,0,32,de,0,e.work,{bits:5});he=false
}e.lencode=ue;e.lenbits=9;e.distcode=de;e.distbits=5}function ve(e,r,t,n){var i;var s=e.state;if(s.window===null){s.wsize=1<<s.wbits;s.wnext=0;s.whave=0;s.window=new a.Buf8(s.wsize)}if(n>=s.wsize){a.arraySet(s.window,r,t-s.wsize,s.wsize,0);s.wnext=0;s.whave=s.wsize}else{i=s.wsize-s.wnext;if(i>n){i=n}a.arraySet(s.window,r,t-n,i,s.wnext);n-=i;if(n){a.arraySet(s.window,r,t-n,n,0);s.wnext=n;s.whave=s.wsize}else{s.wnext+=i;if(s.wnext===s.wsize){s.wnext=0}if(s.whave<s.wsize){s.whave+=i}}}return 0}function ge(e,r){var t;var ee,re;var te;var ae;var ie,se;var fe;var oe;var le,ce;var he;var ue;var de;var ge=0;var me,be,we;var Ce,Ee,ke;var Se;var Ae;var _e=new a.Buf8(4);var Be;var Te;var ye=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0){return m}t=e.state;if(t.mode===O){t.mode=F}ae=e.next_out;re=e.output;se=e.avail_out;te=e.next_in;ee=e.input;ie=e.avail_in;fe=t.hold;oe=t.bits;le=ie;ce=se;Ae=p;e:for(;;){switch(t.mode){case k:if(t.wrap===0){t.mode=F;break}while(oe<16){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}if(t.wrap&2&&fe===35615){t.check=0;_e[0]=fe&255;_e[1]=fe>>>8&255;t.check=i(t.check,_e,2,0);fe=0;oe=0;t.mode=S;break}t.flags=0;if(t.head){t.head.done=false}if(!(t.wrap&1)||(((fe&255)<<8)+(fe>>8))%31){e.msg="incorrect header check";t.mode=Q;break}if((fe&15)!==E){e.msg="unknown compression method";t.mode=Q;break}fe>>>=4;oe-=4;Se=(fe&15)+8;if(t.wbits===0){t.wbits=Se}else{if(Se>t.wbits){e.msg="invalid window size";t.mode=Q;break}}t.dmax=1<<Se;e.adler=t.check=1;t.mode=fe&512?R:O;fe=0;oe=0;break;case S:while(oe<16){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}t.flags=fe;if((t.flags&255)!==E){e.msg="unknown compression method";t.mode=Q;break}if(t.flags&57344){e.msg="unknown header flags set";t.mode=Q;break}if(t.head){t.head.text=fe>>8&1}if(t.flags&512){_e[0]=fe&255;_e[1]=fe>>>8&255;t.check=i(t.check,_e,2,0)}fe=0;oe=0;t.mode=A;case A:while(oe<32){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}if(t.head){t.head.time=fe}if(t.flags&512){_e[0]=fe&255;
_e[1]=fe>>>8&255;_e[2]=fe>>>16&255;_e[3]=fe>>>24&255;t.check=i(t.check,_e,4,0)}fe=0;oe=0;t.mode=_;case _:while(oe<16){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}if(t.head){t.head.xflags=fe&255;t.head.os=fe>>8}if(t.flags&512){_e[0]=fe&255;_e[1]=fe>>>8&255;t.check=i(t.check,_e,2,0)}fe=0;oe=0;t.mode=B;case B:if(t.flags&1024){while(oe<16){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}t.length=fe;if(t.head){t.head.extra_len=fe}if(t.flags&512){_e[0]=fe&255;_e[1]=fe>>>8&255;t.check=i(t.check,_e,2,0)}fe=0;oe=0}else{if(t.head){t.head.extra=null}}t.mode=T;case T:if(t.flags&1024){he=t.length;if(he>ie){he=ie}if(he){if(t.head){Se=t.head.extra_len-t.length;if(!t.head.extra){t.head.extra=new Array(t.head.extra_len)}a.arraySet(t.head.extra,ee,te,he,Se)}if(t.flags&512){t.check=i(t.check,ee,he,te)}ie-=he;te+=he;t.length-=he}if(t.length){break e}}t.length=0;t.mode=y;case y:if(t.flags&2048){if(ie===0){break e}he=0;do{Se=ee[te+he++];if(t.head&&Se&&t.length<65536){t.head.name+=String.fromCharCode(Se)}}while(Se&&he<ie);if(t.flags&512){t.check=i(t.check,ee,he,te)}ie-=he;te+=he;if(Se){break e}}else{if(t.head){t.head.name=null}}t.length=0;t.mode=x;case x:if(t.flags&4096){if(ie===0){break e}he=0;do{Se=ee[te+he++];if(t.head&&Se&&t.length<65536){t.head.comment+=String.fromCharCode(Se)}}while(Se&&he<ie);if(t.flags&512){t.check=i(t.check,ee,he,te)}ie-=he;te+=he;if(Se){break e}}else{if(t.head){t.head.comment=null}}t.mode=I;case I:if(t.flags&512){while(oe<16){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}if(fe!==(t.check&65535)){e.msg="header crc mismatch";t.mode=Q;break}fe=0;oe=0}if(t.head){t.head.hcrc=t.flags>>9&1;t.head.done=true}e.adler=t.check=0;t.mode=O;break;case R:while(oe<32){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}e.adler=t.check=ne(fe);fe=0;oe=0;t.mode=D;case D:if(t.havedict===0){e.next_out=ae;e.avail_out=se;e.next_in=te;e.avail_in=ie;t.hold=fe;t.bits=oe;return g}e.adler=t.check=1;t.mode=O;case O:if(r===u||r===d){break e}case F:if(t.last){fe>>>=oe&7;oe-=oe&7;t.mode=Y;break}while(oe<3){if(ie===0){break e
}ie--;fe+=ee[te++]<<oe;oe+=8}t.last=fe&1;fe>>>=1;oe-=1;switch(fe&3){case 0:t.mode=P;break;case 1:pe(t);t.mode=W;if(r===d){fe>>>=2;oe-=2;break e}break;case 2:t.mode=M;break;case 3:e.msg="invalid block type";t.mode=Q}fe>>>=2;oe-=2;break;case P:fe>>>=oe&7;oe-=oe&7;while(oe<32){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}if((fe&65535)!==(fe>>>16^65535)){e.msg="invalid stored block lengths";t.mode=Q;break}t.length=fe&65535;fe=0;oe=0;t.mode=N;if(r===d){break e}case N:t.mode=L;case L:he=t.length;if(he){if(he>ie){he=ie}if(he>se){he=se}if(he===0){break e}a.arraySet(re,ee,te,he,ae);ie-=he;te+=he;se-=he;ae+=he;t.length-=he;break}t.mode=O;break;case M:while(oe<14){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}t.nlen=(fe&31)+257;fe>>>=5;oe-=5;t.ndist=(fe&31)+1;fe>>>=5;oe-=5;t.ncode=(fe&15)+4;fe>>>=4;oe-=4;if(t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols";t.mode=Q;break}t.have=0;t.mode=U;case U:while(t.have<t.ncode){while(oe<3){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}t.lens[ye[t.have++]]=fe&7;fe>>>=3;oe-=3}while(t.have<19){t.lens[ye[t.have++]]=0}t.lencode=t.lendyn;t.lenbits=7;Be={bits:t.lenbits};Ae=f(o,t.lens,0,19,t.lencode,0,t.work,Be);t.lenbits=Be.bits;if(Ae){e.msg="invalid code lengths set";t.mode=Q;break}t.have=0;t.mode=H;case H:while(t.have<t.nlen+t.ndist){for(;;){ge=t.lencode[fe&(1<<t.lenbits)-1];me=ge>>>24;be=ge>>>16&255;we=ge&65535;if(me<=oe){break}if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}if(we<16){fe>>>=me;oe-=me;t.lens[t.have++]=we}else{if(we===16){Te=me+2;while(oe<Te){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}fe>>>=me;oe-=me;if(t.have===0){e.msg="invalid bit length repeat";t.mode=Q;break}Se=t.lens[t.have-1];he=3+(fe&3);fe>>>=2;oe-=2}else{if(we===17){Te=me+3;while(oe<Te){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}fe>>>=me;oe-=me;Se=0;he=3+(fe&7);fe>>>=3;oe-=3}else{Te=me+7;while(oe<Te){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}fe>>>=me;oe-=me;Se=0;he=11+(fe&127);fe>>>=7;oe-=7}}if(t.have+he>t.nlen+t.ndist){e.msg="invalid bit length repeat";
t.mode=Q;break}while(he--){t.lens[t.have++]=Se}}}if(t.mode===Q){break}if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block";t.mode=Q;break}t.lenbits=9;Be={bits:t.lenbits};Ae=f(l,t.lens,0,t.nlen,t.lencode,0,t.work,Be);t.lenbits=Be.bits;if(Ae){e.msg="invalid literal/lengths set";t.mode=Q;break}t.distbits=6;t.distcode=t.distdyn;Be={bits:t.distbits};Ae=f(c,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,Be);t.distbits=Be.bits;if(Ae){e.msg="invalid distances set";t.mode=Q;break}t.mode=W;if(r===d){break e}case W:t.mode=V;case V:if(ie>=6&&se>=258){e.next_out=ae;e.avail_out=se;e.next_in=te;e.avail_in=ie;t.hold=fe;t.bits=oe;s(e,ce);ae=e.next_out;re=e.output;se=e.avail_out;te=e.next_in;ee=e.input;ie=e.avail_in;fe=t.hold;oe=t.bits;if(t.mode===O){t.back=-1}break}t.back=0;for(;;){ge=t.lencode[fe&(1<<t.lenbits)-1];me=ge>>>24;be=ge>>>16&255;we=ge&65535;if(me<=oe){break}if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}if(be&&(be&240)===0){Ce=me;Ee=be;ke=we;for(;;){ge=t.lencode[ke+((fe&(1<<Ce+Ee)-1)>>Ce)];me=ge>>>24;be=ge>>>16&255;we=ge&65535;if(Ce+me<=oe){break}if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}fe>>>=Ce;oe-=Ce;t.back+=Ce}fe>>>=me;oe-=me;t.back+=me;t.length=we;if(be===0){t.mode=K;break}if(be&32){t.back=-1;t.mode=O;break}if(be&64){e.msg="invalid literal/length code";t.mode=Q;break}t.extra=be&15;t.mode=z;case z:if(t.extra){Te=t.extra;while(oe<Te){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}t.length+=fe&(1<<t.extra)-1;fe>>>=t.extra;oe-=t.extra;t.back+=t.extra}t.was=t.length;t.mode=X;case X:for(;;){ge=t.distcode[fe&(1<<t.distbits)-1];me=ge>>>24;be=ge>>>16&255;we=ge&65535;if(me<=oe){break}if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}if((be&240)===0){Ce=me;Ee=be;ke=we;for(;;){ge=t.distcode[ke+((fe&(1<<Ce+Ee)-1)>>Ce)];me=ge>>>24;be=ge>>>16&255;we=ge&65535;if(Ce+me<=oe){break}if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}fe>>>=Ce;oe-=Ce;t.back+=Ce}fe>>>=me;oe-=me;t.back+=me;if(be&64){e.msg="invalid distance code";t.mode=Q;break}t.offset=we;t.extra=be&15;t.mode=G;case G:if(t.extra){Te=t.extra;
while(oe<Te){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}t.offset+=fe&(1<<t.extra)-1;fe>>>=t.extra;oe-=t.extra;t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back";t.mode=Q;break}t.mode=j;case j:if(se===0){break e}he=ce-se;if(t.offset>he){he=t.offset-he;if(he>t.whave){if(t.sane){e.msg="invalid distance too far back";t.mode=Q;break}}if(he>t.wnext){he-=t.wnext;ue=t.wsize-he}else{ue=t.wnext-he}if(he>t.length){he=t.length}de=t.window}else{de=re;ue=ae-t.offset;he=t.length}if(he>se){he=se}se-=he;t.length-=he;do{re[ae++]=de[ue++]}while(--he);if(t.length===0){t.mode=V}break;case K:if(se===0){break e}re[ae++]=t.length;se--;t.mode=V;break;case Y:if(t.wrap){while(oe<32){if(ie===0){break e}ie--;fe|=ee[te++]<<oe;oe+=8}ce-=se;e.total_out+=ce;t.total+=ce;if(ce){e.adler=t.check=t.flags?i(t.check,re,ce,ae-ce):n(t.check,re,ce,ae-ce)}ce=se;if((t.flags?fe:ne(fe))!==t.check){e.msg="incorrect data check";t.mode=Q;break}fe=0;oe=0}t.mode=$;case $:if(t.wrap&&t.flags){while(oe<32){if(ie===0){break e}ie--;fe+=ee[te++]<<oe;oe+=8}if(fe!==(t.total&4294967295)){e.msg="incorrect length check";t.mode=Q;break}fe=0;oe=0}t.mode=Z;case Z:Ae=v;break e;case Q:Ae=b;break e;case J:return w;case q:default:return m}}e.next_out=ae;e.avail_out=se;e.next_in=te;e.avail_in=ie;t.hold=fe;t.bits=oe;if(t.wsize||ce!==e.avail_out&&t.mode<Q&&(t.mode<Y||r!==h)){if(ve(e,e.output,e.next_out,ce-e.avail_out)){t.mode=J;return w}}le-=e.avail_in;ce-=e.avail_out;e.total_in+=le;e.total_out+=ce;t.total+=ce;if(t.wrap&&ce){e.adler=t.check=t.flags?i(t.check,re,ce,e.next_out-ce):n(t.check,re,ce,e.next_out-ce)}e.data_type=t.bits+(t.last?64:0)+(t.mode===O?128:0)+(t.mode===W||t.mode===N?256:0);if((le===0&&ce===0||r===h)&&Ae===p){Ae=C}return Ae}function me(e){if(!e||!e.state){return m}var r=e.state;if(r.window){r.window=null}e.state=null;return p}function be(e,r){var t;if(!e||!e.state){return m}t=e.state;if((t.wrap&2)===0){return m}t.head=r;r.done=false;return p}t.inflateReset=fe;t.inflateReset2=oe;t.inflateResetKeep=se;
t.inflateInit=ce;t.inflateInit2=le;t.inflate=ge;t.inflateEnd=me;t.inflateGetHeader=be;t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(e,r,t){var a=e("../utils/common");var n=15;var i=852;var s=592;var f=0;var o=1;var l=2;var c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function p(e,r,t,v,g,m,b,w){var C=w.bits;var E=0;var k=0;var S=0,A=0;var _=0;var B=0;var T=0;var y=0;var x=0;var I=0;var R;var D;var O;var F;var P;var N=null;var L=0;var M;var U=new a.Buf16(n+1);var H=new a.Buf16(n+1);var W=null;var V=0;var z,X,G;for(E=0;E<=n;E++){U[E]=0}for(k=0;k<v;k++){U[r[t+k]]++}_=C;for(A=n;A>=1;A--){if(U[A]!==0){break}}if(_>A){_=A}if(A===0){g[m++]=1<<24|64<<16|0;g[m++]=1<<24|64<<16|0;w.bits=1;return 0}for(S=1;S<A;S++){if(U[S]!==0){break}}if(_<S){_=S}y=1;for(E=1;E<=n;E++){y<<=1;y-=U[E];if(y<0){return -1}}if(y>0&&(e===f||A!==1)){return -1}H[1]=0;for(E=1;E<n;E++){H[E+1]=H[E]+U[E]}for(k=0;k<v;k++){if(r[t+k]!==0){b[H[r[t+k]]++]=k}}if(e===f){N=W=b;M=19}else{if(e===o){N=c;L-=257;W=h;V-=257;M=256}else{N=u;W=d;M=-1}}I=0;k=0;E=S;P=m;B=_;T=0;O=-1;x=1<<_;F=x-1;if(e===o&&x>i||e===l&&x>s){return 1}var j=0;for(;;){j++;z=E-T;if(b[k]<M){X=0;G=b[k]}else{if(b[k]>M){X=W[V+b[k]];G=N[L+b[k]]}else{X=32+64;G=0}}R=1<<E-T;D=1<<B;S=D;do{D-=R;g[P+(I>>T)+D]=z<<24|X<<16|G|0}while(D!==0);R=1<<E-1;while(I&R){R>>=1}if(R!==0){I&=R-1;I+=R}else{I=0}k++;if(--U[E]===0){if(E===A){break}E=r[t+b[k]]}if(E>_&&(I&F)!==O){if(T===0){T=_}P+=S;B=E-T;y=1<<B;while(B+T<A){y-=U[B+T];if(y<=0){break}B++;y<<=1}x+=1<<B;if(e===o&&x>i||e===l&&x>s){return 1}O=I&F;
g[O]=_<<24|B<<16|P-m|0}}if(I!==0){g[P+I]=E-T<<24|64<<16|0}w.bits=_;return 0}},{"../utils/common":27}],37:[function(e,r,t){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(e,r,t){var a=e("../utils/common");var n=4;var i=0;var s=1;var f=2;function o(e){var r=e.length;while(--r>=0){e[r]=0}}var l=0;var c=1;var h=2;var u=3;var d=258;var p=29;var v=256;var g=v+1+p;var m=30;var b=19;var w=2*g+1;var C=15;var E=16;var k=7;var S=256;var A=16;var _=17;var B=18;var T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var R=512;var D=new Array((g+2)*2);o(D);var O=new Array(m*2);o(O);var F=new Array(R);o(F);var P=new Array(d-u+1);o(P);var N=new Array(p);o(N);var L=new Array(m);o(L);var M=function(e,r,t,a,n){this.static_tree=e;this.extra_bits=r;this.extra_base=t;this.elems=a;this.max_length=n;this.has_stree=e&&e.length};var U;var H;var W;var V=function(e,r){this.dyn_tree=e;this.max_code=0;this.stat_desc=r};function z(e){return e<256?F[e]:F[256+(e>>>7)]}function X(e,r){e.pending_buf[e.pending++]=r&255;e.pending_buf[e.pending++]=r>>>8&255}function G(e,r,t){if(e.bi_valid>E-t){e.bi_buf|=r<<e.bi_valid&65535;X(e,e.bi_buf);e.bi_buf=r>>E-e.bi_valid;e.bi_valid+=t-E}else{e.bi_buf|=r<<e.bi_valid&65535;e.bi_valid+=t}}function j(e,r,t){G(e,t[r*2],t[r*2+1])}function K(e,r){var t=0;do{t|=e&1;e>>>=1;t<<=1}while(--r>0);return t>>>1}function Y(e){if(e.bi_valid===16){X(e,e.bi_buf);e.bi_buf=0;e.bi_valid=0}else{if(e.bi_valid>=8){e.pending_buf[e.pending++]=e.bi_buf&255;e.bi_buf>>=8;e.bi_valid-=8}}}function $(e,r){var t=r.dyn_tree;var a=r.max_code;var n=r.stat_desc.static_tree;var i=r.stat_desc.has_stree;var s=r.stat_desc.extra_bits;var f=r.stat_desc.extra_base;var o=r.stat_desc.max_length;
var l;var c,h;var u;var d;var p;var v=0;for(u=0;u<=C;u++){e.bl_count[u]=0}t[e.heap[e.heap_max]*2+1]=0;for(l=e.heap_max+1;l<w;l++){c=e.heap[l];u=t[t[c*2+1]*2+1]+1;if(u>o){u=o;v++}t[c*2+1]=u;if(c>a){continue}e.bl_count[u]++;d=0;if(c>=f){d=s[c-f]}p=t[c*2];e.opt_len+=p*(u+d);if(i){e.static_len+=p*(n[c*2+1]+d)}}if(v===0){return}do{u=o-1;while(e.bl_count[u]===0){u--}e.bl_count[u]--;e.bl_count[u+1]+=2;e.bl_count[o]--;v-=2}while(v>0);for(u=o;u!==0;u--){c=e.bl_count[u];while(c!==0){h=e.heap[--l];if(h>a){continue}if(t[h*2+1]!==u){e.opt_len+=(u-t[h*2+1])*t[h*2];t[h*2+1]=u}c--}}}function Z(e,r,t){var a=new Array(C+1);var n=0;var i;var s;for(i=1;i<=C;i++){a[i]=n=n+t[i-1]<<1}for(s=0;s<=r;s++){var f=e[s*2+1];if(f===0){continue}e[s*2]=K(a[f]++,f)}}function Q(){var e;var r;var t;var a;var n;var i=new Array(C+1);t=0;for(a=0;a<p-1;a++){N[a]=t;for(e=0;e<1<<T[a];e++){P[t++]=a}}P[t-1]=a;n=0;for(a=0;a<16;a++){L[a]=n;for(e=0;e<1<<y[a];e++){F[n++]=a}}n>>=7;for(;a<m;a++){L[a]=n<<7;for(e=0;e<1<<y[a]-7;e++){F[256+n++]=a}}for(r=0;r<=C;r++){i[r]=0}e=0;while(e<=143){D[e*2+1]=8;e++;i[8]++}while(e<=255){D[e*2+1]=9;e++;i[9]++}while(e<=279){D[e*2+1]=7;e++;i[7]++}while(e<=287){D[e*2+1]=8;e++;i[8]++}Z(D,g+1,i);for(e=0;e<m;e++){O[e*2+1]=5;O[e*2]=K(e,5)}U=new M(D,T,v+1,g,C);H=new M(O,y,0,m,C);W=new M(new Array(0),x,0,b,k)}function J(e){var r;for(r=0;r<g;r++){e.dyn_ltree[r*2]=0}for(r=0;r<m;r++){e.dyn_dtree[r*2]=0}for(r=0;r<b;r++){e.bl_tree[r*2]=0}e.dyn_ltree[S*2]=1;e.opt_len=e.static_len=0;e.last_lit=e.matches=0}function q(e){if(e.bi_valid>8){X(e,e.bi_buf)}else{if(e.bi_valid>0){e.pending_buf[e.pending++]=e.bi_buf}}e.bi_buf=0;e.bi_valid=0}function ee(e,r,t,n){q(e);if(n){X(e,t);X(e,~t)}a.arraySet(e.pending_buf,e.window,r,t,e.pending);e.pending+=t}function re(e,r,t,a){var n=r*2;var i=t*2;return e[n]<e[i]||e[n]===e[i]&&a[r]<=a[t]}function te(e,r,t){var a=e.heap[t];var n=t<<1;while(n<=e.heap_len){if(n<e.heap_len&&re(r,e.heap[n+1],e.heap[n],e.depth)){n++}if(re(r,a,e.heap[n],e.depth)){break}e.heap[t]=e.heap[n];t=n;
n<<=1}e.heap[t]=a}function ae(e,r,t){var a;var n;var i=0;var s;var f;if(e.last_lit!==0){do{a=e.pending_buf[e.d_buf+i*2]<<8|e.pending_buf[e.d_buf+i*2+1];n=e.pending_buf[e.l_buf+i];i++;if(a===0){j(e,n,r)}else{s=P[n];j(e,s+v+1,r);f=T[s];if(f!==0){n-=N[s];G(e,n,f)}a--;s=z(a);j(e,s,t);f=y[s];if(f!==0){a-=L[s];G(e,a,f)}}}while(i<e.last_lit)}j(e,S,r)}function ne(e,r){var t=r.dyn_tree;var a=r.stat_desc.static_tree;var n=r.stat_desc.has_stree;var i=r.stat_desc.elems;var s,f;var o=-1;var l;e.heap_len=0;e.heap_max=w;for(s=0;s<i;s++){if(t[s*2]!==0){e.heap[++e.heap_len]=o=s;e.depth[s]=0}else{t[s*2+1]=0}}while(e.heap_len<2){l=e.heap[++e.heap_len]=o<2?++o:0;t[l*2]=1;e.depth[l]=0;e.opt_len--;if(n){e.static_len-=a[l*2+1]}}r.max_code=o;for(s=e.heap_len>>1;s>=1;s--){te(e,t,s)}l=i;do{s=e.heap[1];e.heap[1]=e.heap[e.heap_len--];te(e,t,1);f=e.heap[1];e.heap[--e.heap_max]=s;e.heap[--e.heap_max]=f;t[l*2]=t[s*2]+t[f*2];e.depth[l]=(e.depth[s]>=e.depth[f]?e.depth[s]:e.depth[f])+1;t[s*2+1]=t[f*2+1]=l;e.heap[1]=l++;te(e,t,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1];$(e,r);Z(t,o,e.bl_count)}function ie(e,r,t){var a;var n=-1;var i;var s=r[0*2+1];var f=0;var o=7;var l=4;if(s===0){o=138;l=3}r[(t+1)*2+1]=65535;for(a=0;a<=t;a++){i=s;s=r[(a+1)*2+1];if(++f<o&&i===s){continue}else{if(f<l){e.bl_tree[i*2]+=f}else{if(i!==0){if(i!==n){e.bl_tree[i*2]++}e.bl_tree[A*2]++}else{if(f<=10){e.bl_tree[_*2]++}else{e.bl_tree[B*2]++}}}}f=0;n=i;if(s===0){o=138;l=3}else{if(i===s){o=6;l=3}else{o=7;l=4}}}}function se(e,r,t){var a;var n=-1;var i;var s=r[0*2+1];var f=0;var o=7;var l=4;if(s===0){o=138;l=3}for(a=0;a<=t;a++){i=s;s=r[(a+1)*2+1];if(++f<o&&i===s){continue}else{if(f<l){do{j(e,i,e.bl_tree)}while(--f!==0)}else{if(i!==0){if(i!==n){j(e,i,e.bl_tree);f--}j(e,A,e.bl_tree);G(e,f-3,2)}else{if(f<=10){j(e,_,e.bl_tree);G(e,f-3,3)}else{j(e,B,e.bl_tree);G(e,f-11,7)}}}}f=0;n=i;if(s===0){o=138;l=3}else{if(i===s){o=6;l=3}else{o=7;l=4}}}}function fe(e){var r;ie(e,e.dyn_ltree,e.l_desc.max_code);ie(e,e.dyn_dtree,e.d_desc.max_code);
ne(e,e.bl_desc);for(r=b-1;r>=3;r--){if(e.bl_tree[I[r]*2+1]!==0){break}}e.opt_len+=3*(r+1)+5+5+4;return r}function oe(e,r,t,a){var n;G(e,r-257,5);G(e,t-1,5);G(e,a-4,4);for(n=0;n<a;n++){G(e,e.bl_tree[I[n]*2+1],3)}se(e,e.dyn_ltree,r-1);se(e,e.dyn_dtree,t-1)}function le(e){var r=4093624447;var t;for(t=0;t<=31;t++,r>>>=1){if(r&1&&e.dyn_ltree[t*2]!==0){return i}}if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0){return s}for(t=32;t<v;t++){if(e.dyn_ltree[t*2]!==0){return s}}return i}var ce=false;function he(e){if(!ce){Q();ce=true}e.l_desc=new V(e.dyn_ltree,U);e.d_desc=new V(e.dyn_dtree,H);e.bl_desc=new V(e.bl_tree,W);e.bi_buf=0;e.bi_valid=0;J(e)}function ue(e,r,t,a){G(e,(l<<1)+(a?1:0),3);ee(e,r,t,true)}function de(e){G(e,c<<1,3);j(e,S,D);Y(e)}function pe(e,r,t,a){var i,s;var o=0;if(e.level>0){if(e.strm.data_type===f){e.strm.data_type=le(e)}ne(e,e.l_desc);ne(e,e.d_desc);o=fe(e);i=e.opt_len+3+7>>>3;s=e.static_len+3+7>>>3;if(s<=i){i=s}}else{i=s=t+5}if(t+4<=i&&r!==-1){ue(e,r,t,a)}else{if(e.strategy===n||s===i){G(e,(c<<1)+(a?1:0),3);ae(e,D,O)}else{G(e,(h<<1)+(a?1:0),3);oe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1);ae(e,e.dyn_ltree,e.dyn_dtree)}}J(e);if(a){q(e)}}function ve(e,r,t){e.pending_buf[e.d_buf+e.last_lit*2]=r>>>8&255;e.pending_buf[e.d_buf+e.last_lit*2+1]=r&255;e.pending_buf[e.l_buf+e.last_lit]=t&255;e.last_lit++;if(r===0){e.dyn_ltree[t*2]++}else{e.matches++;r--;e.dyn_ltree[(P[t]+v+1)*2]++;e.dyn_dtree[z(r)*2]++}return e.last_lit===e.lit_bufsize-1}t._tr_init=he;t._tr_stored_block=ue;t._tr_flush_block=pe;t._tr_tally=ve;t._tr_align=de},{"../utils/common":27}],39:[function(e,r,t){function a(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}r.exports=a},{}]},{},[9])(9)});var cptable={version:"1.14.0"};cptable[437]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};
for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[620]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[737]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[850]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[852]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[857]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};
for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[861]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[865]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[866]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[874]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[895]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};
for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[932]=function(){var e=[],r={},t=[],a;t[0]="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".split("");for(a=0;a!=t[0].length;++a){if(t[0][a].charCodeAt(0)!==65533){r[t[0][a]]=0+a;e[0+a]=t[0][a]}}t[129]="".split("");for(a=0;a!=t[129].length;++a){if(t[129][a].charCodeAt(0)!==65533){r[t[129][a]]=33024+a;e[33024+a]=t[129][a]}}t[130]="".split("");for(a=0;a!=t[130].length;++a){if(t[130][a].charCodeAt(0)!==65533){r[t[130][a]]=33280+a;e[33280+a]=t[130][a]}}t[131]="".split("");for(a=0;a!=t[131].length;++a){if(t[131][a].charCodeAt(0)!==65533){r[t[131][a]]=33536+a;e[33536+a]=t[131][a]}}t[132]="".split("");for(a=0;a!=t[132].length;++a){if(t[132][a].charCodeAt(0)!==65533){r[t[132][a]]=33792+a;
e[33792+a]=t[132][a]}}t[135]="".split("");for(a=0;a!=t[135].length;++a){if(t[135][a].charCodeAt(0)!==65533){r[t[135][a]]=34560+a;e[34560+a]=t[135][a]}}t[136]="".split("");for(a=0;a!=t[136].length;++a){if(t[136][a].charCodeAt(0)!==65533){r[t[136][a]]=34816+a;e[34816+a]=t[136][a]}}t[137]="".split("");for(a=0;a!=t[137].length;++a){if(t[137][a].charCodeAt(0)!==65533){r[t[137][a]]=35072+a;e[35072+a]=t[137][a]}}t[138]="".split("");for(a=0;a!=t[138].length;++a){if(t[138][a].charCodeAt(0)!==65533){r[t[138][a]]=35328+a;e[35328+a]=t[138][a]}}t[139]="".split("");for(a=0;a!=t[139].length;++a){if(t[139][a].charCodeAt(0)!==65533){r[t[139][a]]=35584+a;e[35584+a]=t[139][a]}}t[140]="".split("");
for(a=0;a!=t[140].length;++a){if(t[140][a].charCodeAt(0)!==65533){r[t[140][a]]=35840+a;e[35840+a]=t[140][a]}}t[141]="".split("");for(a=0;a!=t[141].length;++a){if(t[141][a].charCodeAt(0)!==65533){r[t[141][a]]=36096+a;e[36096+a]=t[141][a]}}t[142]="".split("");for(a=0;a!=t[142].length;++a){if(t[142][a].charCodeAt(0)!==65533){r[t[142][a]]=36352+a;e[36352+a]=t[142][a]}}t[143]="".split("");for(a=0;a!=t[143].length;++a){if(t[143][a].charCodeAt(0)!==65533){r[t[143][a]]=36608+a;e[36608+a]=t[143][a]}}t[144]="".split("");for(a=0;a!=t[144].length;++a){if(t[144][a].charCodeAt(0)!==65533){r[t[144][a]]=36864+a;e[36864+a]=t[144][a]}}t[145]="".split("");for(a=0;a!=t[145].length;++a){if(t[145][a].charCodeAt(0)!==65533){r[t[145][a]]=37120+a;
e[37120+a]=t[145][a]}}t[146]="".split("");for(a=0;a!=t[146].length;++a){if(t[146][a].charCodeAt(0)!==65533){r[t[146][a]]=37376+a;e[37376+a]=t[146][a]}}t[147]="".split("");for(a=0;a!=t[147].length;++a){if(t[147][a].charCodeAt(0)!==65533){r[t[147][a]]=37632+a;e[37632+a]=t[147][a]}}t[148]="".split("");for(a=0;a!=t[148].length;++a){if(t[148][a].charCodeAt(0)!==65533){r[t[148][a]]=37888+a;e[37888+a]=t[148][a]}}t[149]="".split("");for(a=0;a!=t[149].length;++a){if(t[149][a].charCodeAt(0)!==65533){r[t[149][a]]=38144+a;e[38144+a]=t[149][a]}}t[150]="".split("");for(a=0;a!=t[150].length;++a){if(t[150][a].charCodeAt(0)!==65533){r[t[150][a]]=38400+a;e[38400+a]=t[150][a]}}t[151]="".split("");
for(a=0;a!=t[151].length;++a){if(t[151][a].charCodeAt(0)!==65533){r[t[151][a]]=38656+a;e[38656+a]=t[151][a]}}t[152]="".split("");for(a=0;a!=t[152].length;++a){if(t[152][a].charCodeAt(0)!==65533){r[t[152][a]]=38912+a;e[38912+a]=t[152][a]}}t[153]="".split("");for(a=0;a!=t[153].length;++a){if(t[153][a].charCodeAt(0)!==65533){r[t[153][a]]=39168+a;e[39168+a]=t[153][a]}}t[154]="".split("");for(a=0;a!=t[154].length;++a){if(t[154][a].charCodeAt(0)!==65533){r[t[154][a]]=39424+a;e[39424+a]=t[154][a]}}t[155]="".split("");for(a=0;a!=t[155].length;++a){if(t[155][a].charCodeAt(0)!==65533){r[t[155][a]]=39680+a;e[39680+a]=t[155][a]}}t[156]="".split("");for(a=0;a!=t[156].length;++a){if(t[156][a].charCodeAt(0)!==65533){r[t[156][a]]=39936+a;
e[39936+a]=t[156][a]}}t[157]="".split("");for(a=0;a!=t[157].length;++a){if(t[157][a].charCodeAt(0)!==65533){r[t[157][a]]=40192+a;e[40192+a]=t[157][a]}}t[158]="".split("");for(a=0;a!=t[158].length;++a){if(t[158][a].charCodeAt(0)!==65533){r[t[158][a]]=40448+a;e[40448+a]=t[158][a]}}t[159]="".split("");for(a=0;a!=t[159].length;++a){if(t[159][a].charCodeAt(0)!==65533){r[t[159][a]]=40704+a;e[40704+a]=t[159][a]}}t[224]="".split("");for(a=0;a!=t[224].length;++a){if(t[224][a].charCodeAt(0)!==65533){r[t[224][a]]=57344+a;e[57344+a]=t[224][a]}}t[225]="".split("");for(a=0;a!=t[225].length;++a){if(t[225][a].charCodeAt(0)!==65533){r[t[225][a]]=57600+a;e[57600+a]=t[225][a]}}t[226]="".split("");
for(a=0;a!=t[226].length;++a){if(t[226][a].charCodeAt(0)!==65533){r[t[226][a]]=57856+a;e[57856+a]=t[226][a]}}t[227]="".split("");for(a=0;a!=t[227].length;++a){if(t[227][a].charCodeAt(0)!==65533){r[t[227][a]]=58112+a;e[58112+a]=t[227][a]}}t[228]="".split("");for(a=0;a!=t[228].length;++a){if(t[228][a].charCodeAt(0)!==65533){r[t[228][a]]=58368+a;e[58368+a]=t[228][a]}}t[229]="".split("");for(a=0;a!=t[229].length;++a){if(t[229][a].charCodeAt(0)!==65533){r[t[229][a]]=58624+a;e[58624+a]=t[229][a]}}t[230]="".split("");for(a=0;a!=t[230].length;++a){if(t[230][a].charCodeAt(0)!==65533){r[t[230][a]]=58880+a;e[58880+a]=t[230][a]}}t[231]="".split("");for(a=0;a!=t[231].length;++a){if(t[231][a].charCodeAt(0)!==65533){r[t[231][a]]=59136+a;
e[59136+a]=t[231][a]}}t[232]="".split("");for(a=0;a!=t[232].length;++a){if(t[232][a].charCodeAt(0)!==65533){r[t[232][a]]=59392+a;e[59392+a]=t[232][a]}}t[233]="".split("");for(a=0;a!=t[233].length;++a){if(t[233][a].charCodeAt(0)!==65533){r[t[233][a]]=59648+a;e[59648+a]=t[233][a]}}t[234]="".split("");for(a=0;a!=t[234].length;++a){if(t[234][a].charCodeAt(0)!==65533){r[t[234][a]]=59904+a;e[59904+a]=t[234][a]}}t[237]="".split("");for(a=0;a!=t[237].length;++a){if(t[237][a].charCodeAt(0)!==65533){r[t[237][a]]=60672+a;e[60672+a]=t[237][a]}}t[238]="".split("");for(a=0;a!=t[238].length;++a){if(t[238][a].charCodeAt(0)!==65533){r[t[238][a]]=60928+a;e[60928+a]=t[238][a]}}t[250]="".split("");
for(a=0;a!=t[250].length;++a){if(t[250][a].charCodeAt(0)!==65533){r[t[250][a]]=64000+a;e[64000+a]=t[250][a]}}t[251]="".split("");for(a=0;a!=t[251].length;++a){if(t[251][a].charCodeAt(0)!==65533){r[t[251][a]]=64256+a;e[64256+a]=t[251][a]}}t[252]="".split("");for(a=0;a!=t[252].length;++a){if(t[252][a].charCodeAt(0)!==65533){r[t[252][a]]=64512+a;e[64512+a]=t[252][a]}}return{enc:r,dec:e}}();cptable[936]=function(){var e=[],r={},t=[],a;t[0]="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".split("");for(a=0;a!=t[0].length;++a){if(t[0][a].charCodeAt(0)!==65533){r[t[0][a]]=0+a;e[0+a]=t[0][a]}}t[129]="".split("");for(a=0;a!=t[129].length;++a){if(t[129][a].charCodeAt(0)!==65533){r[t[129][a]]=33024+a;e[33024+a]=t[129][a]}}t[130]="".split("");for(a=0;a!=t[130].length;
++a){if(t[130][a].charCodeAt(0)!==65533){r[t[130][a]]=33280+a;e[33280+a]=t[130][a]}}t[131]="".split("");for(a=0;a!=t[131].length;++a){if(t[131][a].charCodeAt(0)!==65533){r[t[131][a]]=33536+a;e[33536+a]=t[131][a]}}t[132]="".split("");for(a=0;a!=t[132].length;++a){if(t[132][a].charCodeAt(0)!==65533){r[t[132][a]]=33792+a;e[33792+a]=t[132][a]}}t[133]="".split("");for(a=0;a!=t[133].length;++a){if(t[133][a].charCodeAt(0)!==65533){r[t[133][a]]=34048+a;e[34048+a]=t[133][a]}}t[134]="".split("");for(a=0;a!=t[134].length;++a){if(t[134][a].charCodeAt(0)!==65533){r[t[134][a]]=34304+a;e[34304+a]=t[134][a]}}t[135]="".split("");for(a=0;a!=t[135].length;++a){if(t[135][a].charCodeAt(0)!==65533){r[t[135][a]]=34560+a;e[34560+a]=t[135][a]
}}t[136]="".split("");for(a=0;a!=t[136].length;++a){if(t[136][a].charCodeAt(0)!==65533){r[t[136][a]]=34816+a;e[34816+a]=t[136][a]}}t[137]="".split("");for(a=0;a!=t[137].length;++a){if(t[137][a].charCodeAt(0)!==65533){r[t[137][a]]=35072+a;e[35072+a]=t[137][a]}}t[138]="".split("");for(a=0;a!=t[138].length;++a){if(t[138][a].charCodeAt(0)!==65533){r[t[138][a]]=35328+a;e[35328+a]=t[138][a]}}t[139]="".split("");for(a=0;a!=t[139].length;++a){if(t[139][a].charCodeAt(0)!==65533){r[t[139][a]]=35584+a;e[35584+a]=t[139][a]}}t[140]="".split("");for(a=0;a!=t[140].length;++a){if(t[140][a].charCodeAt(0)!==65533){r[t[140][a]]=35840+a;e[35840+a]=t[140][a]}}t[141]="".split("");
for(a=0;a!=t[141].length;++a){if(t[141][a].charCodeAt(0)!==65533){r[t[141][a]]=36096+a;e[36096+a]=t[141][a]}}t[142]="".split("");for(a=0;a!=t[142].length;++a){if(t[142][a].charCodeAt(0)!==65533){r[t[142][a]]=36352+a;e[36352+a]=t[142][a]}}t[143]="".split("");for(a=0;a!=t[143].length;++a){if(t[143][a].charCodeAt(0)!==65533){r[t[143][a]]=36608+a;e[36608+a]=t[143][a]}}t[144]="".split("");for(a=0;a!=t[144].length;++a){if(t[144][a].charCodeAt(0)!==65533){r[t[144][a]]=36864+a;e[36864+a]=t[144][a]}}t[145]="".split("");for(a=0;a!=t[145].length;++a){if(t[145][a].charCodeAt(0)!==65533){r[t[145][a]]=37120+a;e[37120+a]=t[145][a]}}t[146]="".split("");for(a=0;a!=t[146].length;++a){if(t[146][a].charCodeAt(0)!==65533){r[t[146][a]]=37376+a;
e[37376+a]=t[146][a]}}t[147]="".split("");for(a=0;a!=t[147].length;++a){if(t[147][a].charCodeAt(0)!==65533){r[t[147][a]]=37632+a;e[37632+a]=t[147][a]}}t[148]="".split("");for(a=0;a!=t[148].length;++a){if(t[148][a].charCodeAt(0)!==65533){r[t[148][a]]=37888+a;e[37888+a]=t[148][a]}}t[149]="".split("");for(a=0;a!=t[149].length;++a){if(t[149][a].charCodeAt(0)!==65533){r[t[149][a]]=38144+a;e[38144+a]=t[149][a]}}t[150]="".split("");for(a=0;a!=t[150].length;++a){if(t[150][a].charCodeAt(0)!==65533){r[t[150][a]]=38400+a;e[38400+a]=t[150][a]}}t[151]="".split("");for(a=0;a!=t[151].length;++a){if(t[151][a].charCodeAt(0)!==65533){r[t[151][a]]=38656+a;e[38656+a]=t[151][a]}}t[152]="".split("");
for(a=0;a!=t[152].length;++a){if(t[152][a].charCodeAt(0)!==65533){r[t[152][a]]=38912+a;e[38912+a]=t[152][a]}}t[153]="".split("");for(a=0;a!=t[153].length;++a){if(t[153][a].charCodeAt(0)!==65533){r[t[153][a]]=39168+a;e[39168+a]=t[153][a]}}t[154]="".split("");for(a=0;a!=t[154].length;++a){if(t[154][a].charCodeAt(0)!==65533){r[t[154][a]]=39424+a;e[39424+a]=t[154][a]}}t[155]="".split("");for(a=0;a!=t[155].length;++a){if(t[155][a].charCodeAt(0)!==65533){r[t[155][a]]=39680+a;e[39680+a]=t[155][a]}}t[156]="".split("");for(a=0;a!=t[156].length;++a){if(t[156][a].charCodeAt(0)!==65533){r[t[156][a]]=39936+a;e[39936+a]=t[156][a]}}t[157]="".split("");for(a=0;a!=t[157].length;++a){if(t[157][a].charCodeAt(0)!==65533){r[t[157][a]]=40192+a;
e[40192+a]=t[157][a]}}t[158]="".split("");for(a=0;a!=t[158].length;++a){if(t[158][a].charCodeAt(0)!==65533){r[t[158][a]]=40448+a;e[40448+a]=t[158][a]}}t[159]="".split("");for(a=0;a!=t[159].length;++a){if(t[159][a].charCodeAt(0)!==65533){r[t[159][a]]=40704+a;e[40704+a]=t[159][a]}}t[160]="".split("");for(a=0;a!=t[160].length;++a){if(t[160][a].charCodeAt(0)!==65533){r[t[160][a]]=40960+a;e[40960+a]=t[160][a]}}t[161]="".split("");for(a=0;a!=t[161].length;++a){if(t[161][a].charCodeAt(0)!==65533){r[t[161][a]]=41216+a;e[41216+a]=t[161][a]}}t[162]="".split("");for(a=0;a!=t[162].length;++a){if(t[162][a].charCodeAt(0)!==65533){r[t[162][a]]=41472+a;e[41472+a]=t[162][a]}}t[163]="".split("");
for(a=0;a!=t[163].length;++a){if(t[163][a].charCodeAt(0)!==65533){r[t[163][a]]=41728+a;e[41728+a]=t[163][a]}}t[164]="".split("");for(a=0;a!=t[164].length;++a){if(t[164][a].charCodeAt(0)!==65533){r[t[164][a]]=41984+a;e[41984+a]=t[164][a]}}t[165]="".split("");for(a=0;a!=t[165].length;++a){if(t[165][a].charCodeAt(0)!==65533){r[t[165][a]]=42240+a;e[42240+a]=t[165][a]}}t[166]="".split("");for(a=0;a!=t[166].length;++a){if(t[166][a].charCodeAt(0)!==65533){r[t[166][a]]=42496+a;e[42496+a]=t[166][a]}}t[167]="".split("");for(a=0;a!=t[167].length;++a){if(t[167][a].charCodeAt(0)!==65533){r[t[167][a]]=42752+a;e[42752+a]=t[167][a]}}t[168]="".split("");for(a=0;a!=t[168].length;++a){if(t[168][a].charCodeAt(0)!==65533){r[t[168][a]]=43008+a;
e[43008+a]=t[168][a]}}t[169]="".split("");for(a=0;a!=t[169].length;++a){if(t[169][a].charCodeAt(0)!==65533){r[t[169][a]]=43264+a;e[43264+a]=t[169][a]}}t[170]="".split("");for(a=0;a!=t[170].length;++a){if(t[170][a].charCodeAt(0)!==65533){r[t[170][a]]=43520+a;e[43520+a]=t[170][a]}}t[171]="".split("");for(a=0;a!=t[171].length;++a){if(t[171][a].charCodeAt(0)!==65533){r[t[171][a]]=43776+a;e[43776+a]=t[171][a]}}t[172]="".split("");for(a=0;a!=t[172].length;++a){if(t[172][a].charCodeAt(0)!==65533){r[t[172][a]]=44032+a;e[44032+a]=t[172][a]}}t[173]="".split("");for(a=0;a!=t[173].length;++a){if(t[173][a].charCodeAt(0)!==65533){r[t[173][a]]=44288+a;e[44288+a]=t[173][a]}}t[174]="".split("");
for(a=0;a!=t[174].length;++a){if(t[174][a].charCodeAt(0)!==65533){r[t[174][a]]=44544+a;e[44544+a]=t[174][a]}}t[175]="".split("");for(a=0;a!=t[175].length;++a){if(t[175][a].charCodeAt(0)!==65533){r[t[175][a]]=44800+a;e[44800+a]=t[175][a]}}t[176]="".split("");for(a=0;a!=t[176].length;++a){if(t[176][a].charCodeAt(0)!==65533){r[t[176][a]]=45056+a;e[45056+a]=t[176][a]}}t[177]="".split("");for(a=0;a!=t[177].length;++a){if(t[177][a].charCodeAt(0)!==65533){r[t[177][a]]=45312+a;e[45312+a]=t[177][a]}}t[178]="".split("");for(a=0;a!=t[178].length;++a){if(t[178][a].charCodeAt(0)!==65533){r[t[178][a]]=45568+a;e[45568+a]=t[178][a]}}t[179]="".split("");for(a=0;a!=t[179].length;++a){if(t[179][a].charCodeAt(0)!==65533){r[t[179][a]]=45824+a;
e[45824+a]=t[179][a]}}t[180]="".split("");for(a=0;a!=t[180].length;++a){if(t[180][a].charCodeAt(0)!==65533){r[t[180][a]]=46080+a;e[46080+a]=t[180][a]}}t[181]="".split("");for(a=0;a!=t[181].length;++a){if(t[181][a].charCodeAt(0)!==65533){r[t[181][a]]=46336+a;e[46336+a]=t[181][a]}}t[182]="".split("");for(a=0;a!=t[182].length;++a){if(t[182][a].charCodeAt(0)!==65533){r[t[182][a]]=46592+a;e[46592+a]=t[182][a]}}t[183]="".split("");for(a=0;a!=t[183].length;++a){if(t[183][a].charCodeAt(0)!==65533){r[t[183][a]]=46848+a;e[46848+a]=t[183][a]}}t[184]="".split("");for(a=0;a!=t[184].length;++a){if(t[184][a].charCodeAt(0)!==65533){r[t[184][a]]=47104+a;e[47104+a]=t[184][a]}}t[185]="".split("");
for(a=0;a!=t[185].length;++a){if(t[185][a].charCodeAt(0)!==65533){r[t[185][a]]=47360+a;e[47360+a]=t[185][a]}}t[186]="".split("");for(a=0;a!=t[186].length;++a){if(t[186][a].charCodeAt(0)!==65533){r[t[186][a]]=47616+a;e[47616+a]=t[186][a]}}t[187]="".split("");for(a=0;a!=t[187].length;++a){if(t[187][a].charCodeAt(0)!==65533){r[t[187][a]]=47872+a;e[47872+a]=t[187][a]}}t[188]="".split("");for(a=0;a!=t[188].length;++a){if(t[188][a].charCodeAt(0)!==65533){r[t[188][a]]=48128+a;e[48128+a]=t[188][a]}}t[189]="".split("");for(a=0;a!=t[189].length;++a){if(t[189][a].charCodeAt(0)!==65533){r[t[189][a]]=48384+a;e[48384+a]=t[189][a]}}t[190]="".split("");for(a=0;a!=t[190].length;++a){if(t[190][a].charCodeAt(0)!==65533){r[t[190][a]]=48640+a;
e[48640+a]=t[190][a]}}t[191]="".split("");for(a=0;a!=t[191].length;++a){if(t[191][a].charCodeAt(0)!==65533){r[t[191][a]]=48896+a;e[48896+a]=t[191][a]}}t[192]="".split("");for(a=0;a!=t[192].length;++a){if(t[192][a].charCodeAt(0)!==65533){r[t[192][a]]=49152+a;e[49152+a]=t[192][a]}}t[193]="".split("");for(a=0;a!=t[193].length;++a){if(t[193][a].charCodeAt(0)!==65533){r[t[193][a]]=49408+a;e[49408+a]=t[193][a]}}t[194]="".split("");for(a=0;a!=t[194].length;++a){if(t[194][a].charCodeAt(0)!==65533){r[t[194][a]]=49664+a;e[49664+a]=t[194][a]}}t[195]="".split("");for(a=0;a!=t[195].length;++a){if(t[195][a].charCodeAt(0)!==65533){r[t[195][a]]=49920+a;e[49920+a]=t[195][a]}}t[196]="".split("");
for(a=0;a!=t[196].length;++a){if(t[196][a].charCodeAt(0)!==65533){r[t[196][a]]=50176+a;e[50176+a]=t[196][a]}}t[197]="".split("");for(a=0;a!=t[197].length;++a){if(t[197][a].charCodeAt(0)!==65533){r[t[197][a]]=50432+a;e[50432+a]=t[197][a]}}t[198]="".split("");for(a=0;a!=t[198].length;++a){if(t[198][a].charCodeAt(0)!==65533){r[t[198][a]]=50688+a;e[50688+a]=t[198][a]}}t[199]="".split("");for(a=0;a!=t[199].length;++a){if(t[199][a].charCodeAt(0)!==65533){r[t[199][a]]=50944+a;e[50944+a]=t[199][a]}}t[200]="".split("");for(a=0;a!=t[200].length;++a){if(t[200][a].charCodeAt(0)!==65533){r[t[200][a]]=51200+a;e[51200+a]=t[200][a]}}t[201]="".split("");for(a=0;a!=t[201].length;++a){if(t[201][a].charCodeAt(0)!==65533){r[t[201][a]]=51456+a;
e[51456+a]=t[201][a]}}t[202]="".split("");for(a=0;a!=t[202].length;++a){if(t[202][a].charCodeAt(0)!==65533){r[t[202][a]]=51712+a;e[51712+a]=t[202][a]}}t[203]="".split("");for(a=0;a!=t[203].length;++a){if(t[203][a].charCodeAt(0)!==65533){r[t[203][a]]=51968+a;e[51968+a]=t[203][a]}}t[204]="".split("");for(a=0;a!=t[204].length;++a){if(t[204][a].charCodeAt(0)!==65533){r[t[204][a]]=52224+a;e[52224+a]=t[204][a]}}t[205]="".split("");for(a=0;a!=t[205].length;++a){if(t[205][a].charCodeAt(0)!==65533){r[t[205][a]]=52480+a;e[52480+a]=t[205][a]}}t[206]="".split("");for(a=0;a!=t[206].length;++a){if(t[206][a].charCodeAt(0)!==65533){r[t[206][a]]=52736+a;e[52736+a]=t[206][a]}}t[207]="".split("");
for(a=0;a!=t[207].length;++a){if(t[207][a].charCodeAt(0)!==65533){r[t[207][a]]=52992+a;e[52992+a]=t[207][a]}}t[208]="".split("");for(a=0;a!=t[208].length;++a){if(t[208][a].charCodeAt(0)!==65533){r[t[208][a]]=53248+a;e[53248+a]=t[208][a]}}t[209]="".split("");for(a=0;a!=t[209].length;++a){if(t[209][a].charCodeAt(0)!==65533){r[t[209][a]]=53504+a;e[53504+a]=t[209][a]}}t[210]="".split("");for(a=0;a!=t[210].length;++a){if(t[210][a].charCodeAt(0)!==65533){r[t[210][a]]=53760+a;e[53760+a]=t[210][a]}}t[211]="".split("");for(a=0;a!=t[211].length;++a){if(t[211][a].charCodeAt(0)!==65533){r[t[211][a]]=54016+a;e[54016+a]=t[211][a]}}t[212]="".split("");for(a=0;a!=t[212].length;++a){if(t[212][a].charCodeAt(0)!==65533){r[t[212][a]]=54272+a;
e[54272+a]=t[212][a]}}t[213]="".split("");for(a=0;a!=t[213].length;++a){if(t[213][a].charCodeAt(0)!==65533){r[t[213][a]]=54528+a;e[54528+a]=t[213][a]}}t[214]="".split("");for(a=0;a!=t[214].length;++a){if(t[214][a].charCodeAt(0)!==65533){r[t[214][a]]=54784+a;e[54784+a]=t[214][a]}}t[215]="".split("");for(a=0;a!=t[215].length;++a){if(t[215][a].charCodeAt(0)!==65533){r[t[215][a]]=55040+a;e[55040+a]=t[215][a]}}t[216]="".split("");for(a=0;a!=t[216].length;++a){if(t[216][a].charCodeAt(0)!==65533){r[t[216][a]]=55296+a;e[55296+a]=t[216][a]}}t[217]="".split("");for(a=0;a!=t[217].length;++a){if(t[217][a].charCodeAt(0)!==65533){r[t[217][a]]=55552+a;e[55552+a]=t[217][a]}}t[218]="".split("");
for(a=0;a!=t[218].length;++a){if(t[218][a].charCodeAt(0)!==65533){r[t[218][a]]=55808+a;e[55808+a]=t[218][a]}}t[219]="".split("");for(a=0;a!=t[219].length;++a){if(t[219][a].charCodeAt(0)!==65533){r[t[219][a]]=56064+a;e[56064+a]=t[219][a]}}t[220]="".split("");for(a=0;a!=t[220].length;++a){if(t[220][a].charCodeAt(0)!==65533){r[t[220][a]]=56320+a;e[56320+a]=t[220][a]}}t[221]="".split("");for(a=0;a!=t[221].length;++a){if(t[221][a].charCodeAt(0)!==65533){r[t[221][a]]=56576+a;e[56576+a]=t[221][a]}}t[222]="".split("");for(a=0;a!=t[222].length;++a){if(t[222][a].charCodeAt(0)!==65533){r[t[222][a]]=56832+a;e[56832+a]=t[222][a]}}t[223]="".split("");for(a=0;a!=t[223].length;++a){if(t[223][a].charCodeAt(0)!==65533){r[t[223][a]]=57088+a;
e[57088+a]=t[223][a]}}t[224]="".split("");for(a=0;a!=t[224].length;++a){if(t[224][a].charCodeAt(0)!==65533){r[t[224][a]]=57344+a;e[57344+a]=t[224][a]}}t[225]="".split("");for(a=0;a!=t[225].length;++a){if(t[225][a].charCodeAt(0)!==65533){r[t[225][a]]=57600+a;e[57600+a]=t[225][a]}}t[226]="".split("");for(a=0;a!=t[226].length;++a){if(t[226][a].charCodeAt(0)!==65533){r[t[226][a]]=57856+a;e[57856+a]=t[226][a]}}t[227]="".split("");for(a=0;a!=t[227].length;++a){if(t[227][a].charCodeAt(0)!==65533){r[t[227][a]]=58112+a;e[58112+a]=t[227][a]}}t[228]="".split("");for(a=0;a!=t[228].length;++a){if(t[228][a].charCodeAt(0)!==65533){r[t[228][a]]=58368+a;e[58368+a]=t[228][a]}}t[229]="".split("");
for(a=0;a!=t[229].length;++a){if(t[229][a].charCodeAt(0)!==65533){r[t[229][a]]=58624+a;e[58624+a]=t[229][a]}}t[230]="".split("");for(a=0;a!=t[230].length;++a){if(t[230][a].charCodeAt(0)!==65533){r[t[230][a]]=58880+a;e[58880+a]=t[230][a]}}t[231]="".split("");for(a=0;a!=t[231].length;++a){if(t[231][a].charCodeAt(0)!==65533){r[t[231][a]]=59136+a;e[59136+a]=t[231][a]}}t[232]="".split("");for(a=0;a!=t[232].length;++a){if(t[232][a].charCodeAt(0)!==65533){r[t[232][a]]=59392+a;e[59392+a]=t[232][a]}}t[233]="".split("");for(a=0;a!=t[233].length;++a){if(t[233][a].charCodeAt(0)!==65533){r[t[233][a]]=59648+a;e[59648+a]=t[233][a]}}t[234]="".split("");for(a=0;a!=t[234].length;++a){if(t[234][a].charCodeAt(0)!==65533){r[t[234][a]]=59904+a;
e[59904+a]=t[234][a]}}t[235]="".split("");for(a=0;a!=t[235].length;++a){if(t[235][a].charCodeAt(0)!==65533){r[t[235][a]]=60160+a;e[60160+a]=t[235][a]}}t[236]="".split("");for(a=0;a!=t[236].length;++a){if(t[236][a].charCodeAt(0)!==65533){r[t[236][a]]=60416+a;e[60416+a]=t[236][a]}}t[237]="".split("");for(a=0;a!=t[237].length;++a){if(t[237][a].charCodeAt(0)!==65533){r[t[237][a]]=60672+a;e[60672+a]=t[237][a]}}t[238]="".split("");for(a=0;a!=t[238].length;++a){if(t[238][a].charCodeAt(0)!==65533){r[t[238][a]]=60928+a;e[60928+a]=t[238][a]}}t[239]="".split("");for(a=0;a!=t[239].length;++a){if(t[239][a].charCodeAt(0)!==65533){r[t[239][a]]=61184+a;e[61184+a]=t[239][a]}}t[240]="".split("");
for(a=0;a!=t[240].length;++a){if(t[240][a].charCodeAt(0)!==65533){r[t[240][a]]=61440+a;e[61440+a]=t[240][a]}}t[241]="".split("");for(a=0;a!=t[241].length;++a){if(t[241][a].charCodeAt(0)!==65533){r[t[241][a]]=61696+a;e[61696+a]=t[241][a]}}t[242]="".split("");for(a=0;a!=t[242].length;++a){if(t[242][a].charCodeAt(0)!==65533){r[t[242][a]]=61952+a;e[61952+a]=t[242][a]}}t[243]="".split("");for(a=0;a!=t[243].length;++a){if(t[243][a].charCodeAt(0)!==65533){r[t[243][a]]=62208+a;e[62208+a]=t[243][a]}}t[244]="".split("");for(a=0;a!=t[244].length;++a){if(t[244][a].charCodeAt(0)!==65533){r[t[244][a]]=62464+a;e[62464+a]=t[244][a]}}t[245]="".split("");for(a=0;a!=t[245].length;++a){if(t[245][a].charCodeAt(0)!==65533){r[t[245][a]]=62720+a;
e[62720+a]=t[245][a]}}t[246]="".split("");for(a=0;a!=t[246].length;++a){if(t[246][a].charCodeAt(0)!==65533){r[t[246][a]]=62976+a;e[62976+a]=t[246][a]}}t[247]="".split("");for(a=0;a!=t[247].length;++a){if(t[247][a].charCodeAt(0)!==65533){r[t[247][a]]=63232+a;e[63232+a]=t[247][a]}}t[248]="".split("");for(a=0;a!=t[248].length;++a){if(t[248][a].charCodeAt(0)!==65533){r[t[248][a]]=63488+a;e[63488+a]=t[248][a]}}t[249]="".split("");for(a=0;a!=t[249].length;++a){if(t[249][a].charCodeAt(0)!==65533){r[t[249][a]]=63744+a;e[63744+a]=t[249][a]}}t[250]="".split("");for(a=0;a!=t[250].length;++a){if(t[250][a].charCodeAt(0)!==65533){r[t[250][a]]=64000+a;e[64000+a]=t[250][a]}}t[251]="".split("");
for(a=0;a!=t[251].length;++a){if(t[251][a].charCodeAt(0)!==65533){r[t[251][a]]=64256+a;e[64256+a]=t[251][a]}}t[252]="".split("");for(a=0;a!=t[252].length;++a){if(t[252][a].charCodeAt(0)!==65533){r[t[252][a]]=64512+a;e[64512+a]=t[252][a]}}t[253]="".split("");for(a=0;a!=t[253].length;++a){if(t[253][a].charCodeAt(0)!==65533){r[t[253][a]]=64768+a;e[64768+a]=t[253][a]}}t[254]="".split("");for(a=0;a!=t[254].length;++a){if(t[254][a].charCodeAt(0)!==65533){r[t[254][a]]=65024+a;e[65024+a]=t[254][a]}}return{enc:r,dec:e}}();cptable[949]=function(){var e=[],r={},t=[],a;t[0]="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".split("");for(a=0;a!=t[0].length;++a){if(t[0][a].charCodeAt(0)!==65533){r[t[0][a]]=0+a;e[0+a]=t[0][a]}}t[129]="".split("");for(a=0;a!=t[129].length;
++a){if(t[129][a].charCodeAt(0)!==65533){r[t[129][a]]=33024+a;e[33024+a]=t[129][a]}}t[130]="".split("");for(a=0;a!=t[130].length;++a){if(t[130][a].charCodeAt(0)!==65533){r[t[130][a]]=33280+a;e[33280+a]=t[130][a]}}t[131]="".split("");for(a=0;a!=t[131].length;++a){if(t[131][a].charCodeAt(0)!==65533){r[t[131][a]]=33536+a;e[33536+a]=t[131][a]}}t[132]="".split("");for(a=0;a!=t[132].length;++a){if(t[132][a].charCodeAt(0)!==65533){r[t[132][a]]=33792+a;e[33792+a]=t[132][a]}}t[133]="".split("");for(a=0;a!=t[133].length;++a){if(t[133][a].charCodeAt(0)!==65533){r[t[133][a]]=34048+a;e[34048+a]=t[133][a]}}t[134]="".split("");for(a=0;a!=t[134].length;++a){if(t[134][a].charCodeAt(0)!==65533){r[t[134][a]]=34304+a;e[34304+a]=t[134][a]
}}t[135]="".split("");for(a=0;a!=t[135].length;++a){if(t[135][a].charCodeAt(0)!==65533){r[t[135][a]]=34560+a;e[34560+a]=t[135][a]}}t[136]="".split("");for(a=0;a!=t[136].length;++a){if(t[136][a].charCodeAt(0)!==65533){r[t[136][a]]=34816+a;e[34816+a]=t[136][a]}}t[137]="".split("");for(a=0;a!=t[137].length;++a){if(t[137][a].charCodeAt(0)!==65533){r[t[137][a]]=35072+a;e[35072+a]=t[137][a]}}t[138]="".split("");for(a=0;a!=t[138].length;++a){if(t[138][a].charCodeAt(0)!==65533){r[t[138][a]]=35328+a;e[35328+a]=t[138][a]}}t[139]="".split("");for(a=0;a!=t[139].length;++a){if(t[139][a].charCodeAt(0)!==65533){r[t[139][a]]=35584+a;e[35584+a]=t[139][a]}}t[140]="".split("");
for(a=0;a!=t[140].length;++a){if(t[140][a].charCodeAt(0)!==65533){r[t[140][a]]=35840+a;e[35840+a]=t[140][a]}}t[141]="".split("");for(a=0;a!=t[141].length;++a){if(t[141][a].charCodeAt(0)!==65533){r[t[141][a]]=36096+a;e[36096+a]=t[141][a]}}t[142]="".split("");for(a=0;a!=t[142].length;++a){if(t[142][a].charCodeAt(0)!==65533){r[t[142][a]]=36352+a;e[36352+a]=t[142][a]}}t[143]="".split("");for(a=0;a!=t[143].length;++a){if(t[143][a].charCodeAt(0)!==65533){r[t[143][a]]=36608+a;e[36608+a]=t[143][a]}}t[144]="".split("");for(a=0;a!=t[144].length;++a){if(t[144][a].charCodeAt(0)!==65533){r[t[144][a]]=36864+a;e[36864+a]=t[144][a]}}t[145]="".split("");for(a=0;a!=t[145].length;++a){if(t[145][a].charCodeAt(0)!==65533){r[t[145][a]]=37120+a;
e[37120+a]=t[145][a]}}t[146]="".split("");for(a=0;a!=t[146].length;++a){if(t[146][a].charCodeAt(0)!==65533){r[t[146][a]]=37376+a;e[37376+a]=t[146][a]}}t[147]="".split("");for(a=0;a!=t[147].length;++a){if(t[147][a].charCodeAt(0)!==65533){r[t[147][a]]=37632+a;e[37632+a]=t[147][a]}}t[148]="".split("");for(a=0;a!=t[148].length;++a){if(t[148][a].charCodeAt(0)!==65533){r[t[148][a]]=37888+a;e[37888+a]=t[148][a]}}t[149]="".split("");for(a=0;a!=t[149].length;++a){if(t[149][a].charCodeAt(0)!==65533){r[t[149][a]]=38144+a;e[38144+a]=t[149][a]}}t[150]="".split("");for(a=0;a!=t[150].length;++a){if(t[150][a].charCodeAt(0)!==65533){r[t[150][a]]=38400+a;e[38400+a]=t[150][a]}}t[151]="".split("");
for(a=0;a!=t[151].length;++a){if(t[151][a].charCodeAt(0)!==65533){r[t[151][a]]=38656+a;e[38656+a]=t[151][a]}}t[152]="".split("");for(a=0;a!=t[152].length;++a){if(t[152][a].charCodeAt(0)!==65533){r[t[152][a]]=38912+a;e[38912+a]=t[152][a]}}t[153]="".split("");for(a=0;a!=t[153].length;++a){if(t[153][a].charCodeAt(0)!==65533){r[t[153][a]]=39168+a;e[39168+a]=t[153][a]}}t[154]="".split("");for(a=0;a!=t[154].length;++a){if(t[154][a].charCodeAt(0)!==65533){r[t[154][a]]=39424+a;e[39424+a]=t[154][a]}}t[155]="".split("");for(a=0;a!=t[155].length;++a){if(t[155][a].charCodeAt(0)!==65533){r[t[155][a]]=39680+a;e[39680+a]=t[155][a]}}t[156]="".split("");for(a=0;a!=t[156].length;++a){if(t[156][a].charCodeAt(0)!==65533){r[t[156][a]]=39936+a;
e[39936+a]=t[156][a]}}t[157]="".split("");for(a=0;a!=t[157].length;++a){if(t[157][a].charCodeAt(0)!==65533){r[t[157][a]]=40192+a;e[40192+a]=t[157][a]}}t[158]="".split("");for(a=0;a!=t[158].length;++a){if(t[158][a].charCodeAt(0)!==65533){r[t[158][a]]=40448+a;e[40448+a]=t[158][a]}}t[159]="".split("");for(a=0;a!=t[159].length;++a){if(t[159][a].charCodeAt(0)!==65533){r[t[159][a]]=40704+a;e[40704+a]=t[159][a]}}t[160]="".split("");for(a=0;a!=t[160].length;++a){if(t[160][a].charCodeAt(0)!==65533){r[t[160][a]]=40960+a;e[40960+a]=t[160][a]}}t[161]="".split("");for(a=0;a!=t[161].length;++a){if(t[161][a].charCodeAt(0)!==65533){r[t[161][a]]=41216+a;e[41216+a]=t[161][a]}}t[162]="".split("");
for(a=0;a!=t[162].length;++a){if(t[162][a].charCodeAt(0)!==65533){r[t[162][a]]=41472+a;e[41472+a]=t[162][a]}}t[163]="".split("");for(a=0;a!=t[163].length;++a){if(t[163][a].charCodeAt(0)!==65533){r[t[163][a]]=41728+a;e[41728+a]=t[163][a]}}t[164]="".split("");for(a=0;a!=t[164].length;++a){if(t[164][a].charCodeAt(0)!==65533){r[t[164][a]]=41984+a;e[41984+a]=t[164][a]}}t[165]="".split("");for(a=0;a!=t[165].length;++a){if(t[165][a].charCodeAt(0)!==65533){r[t[165][a]]=42240+a;e[42240+a]=t[165][a]}}t[166]="".split("");for(a=0;a!=t[166].length;++a){if(t[166][a].charCodeAt(0)!==65533){r[t[166][a]]=42496+a;e[42496+a]=t[166][a]}}t[167]="".split("");for(a=0;a!=t[167].length;++a){if(t[167][a].charCodeAt(0)!==65533){r[t[167][a]]=42752+a;
e[42752+a]=t[167][a]}}t[168]="".split("");for(a=0;a!=t[168].length;++a){if(t[168][a].charCodeAt(0)!==65533){r[t[168][a]]=43008+a;e[43008+a]=t[168][a]}}t[169]="".split("");for(a=0;a!=t[169].length;++a){if(t[169][a].charCodeAt(0)!==65533){r[t[169][a]]=43264+a;e[43264+a]=t[169][a]}}t[170]="".split("");for(a=0;a!=t[170].length;++a){if(t[170][a].charCodeAt(0)!==65533){r[t[170][a]]=43520+a;e[43520+a]=t[170][a]}}t[171]="".split("");for(a=0;a!=t[171].length;++a){if(t[171][a].charCodeAt(0)!==65533){r[t[171][a]]=43776+a;e[43776+a]=t[171][a]}}t[172]="".split("");for(a=0;a!=t[172].length;++a){if(t[172][a].charCodeAt(0)!==65533){r[t[172][a]]=44032+a;e[44032+a]=t[172][a]}}t[173]="".split("");
for(a=0;a!=t[173].length;++a){if(t[173][a].charCodeAt(0)!==65533){r[t[173][a]]=44288+a;e[44288+a]=t[173][a]}}t[174]="".split("");for(a=0;a!=t[174].length;++a){if(t[174][a].charCodeAt(0)!==65533){r[t[174][a]]=44544+a;e[44544+a]=t[174][a]}}t[175]="".split("");for(a=0;a!=t[175].length;++a){if(t[175][a].charCodeAt(0)!==65533){r[t[175][a]]=44800+a;e[44800+a]=t[175][a]}}t[176]="".split("");for(a=0;a!=t[176].length;++a){if(t[176][a].charCodeAt(0)!==65533){r[t[176][a]]=45056+a;e[45056+a]=t[176][a]}}t[177]="".split("");for(a=0;a!=t[177].length;++a){if(t[177][a].charCodeAt(0)!==65533){r[t[177][a]]=45312+a;e[45312+a]=t[177][a]}}t[178]="".split("");for(a=0;a!=t[178].length;++a){if(t[178][a].charCodeAt(0)!==65533){r[t[178][a]]=45568+a;
e[45568+a]=t[178][a]}}t[179]="".split("");for(a=0;a!=t[179].length;++a){if(t[179][a].charCodeAt(0)!==65533){r[t[179][a]]=45824+a;e[45824+a]=t[179][a]}}t[180]="".split("");for(a=0;a!=t[180].length;++a){if(t[180][a].charCodeAt(0)!==65533){r[t[180][a]]=46080+a;e[46080+a]=t[180][a]}}t[181]="".split("");for(a=0;a!=t[181].length;++a){if(t[181][a].charCodeAt(0)!==65533){r[t[181][a]]=46336+a;e[46336+a]=t[181][a]}}t[182]="".split("");for(a=0;a!=t[182].length;++a){if(t[182][a].charCodeAt(0)!==65533){r[t[182][a]]=46592+a;e[46592+a]=t[182][a]}}t[183]="".split("");for(a=0;a!=t[183].length;++a){if(t[183][a].charCodeAt(0)!==65533){r[t[183][a]]=46848+a;e[46848+a]=t[183][a]}}t[184]="".split("");
for(a=0;a!=t[184].length;++a){if(t[184][a].charCodeAt(0)!==65533){r[t[184][a]]=47104+a;e[47104+a]=t[184][a]}}t[185]="".split("");for(a=0;a!=t[185].length;++a){if(t[185][a].charCodeAt(0)!==65533){r[t[185][a]]=47360+a;e[47360+a]=t[185][a]}}t[186]="".split("");for(a=0;a!=t[186].length;++a){if(t[186][a].charCodeAt(0)!==65533){r[t[186][a]]=47616+a;e[47616+a]=t[186][a]}}t[187]="".split("");for(a=0;a!=t[187].length;++a){if(t[187][a].charCodeAt(0)!==65533){r[t[187][a]]=47872+a;e[47872+a]=t[187][a]}}t[188]="".split("");for(a=0;a!=t[188].length;++a){if(t[188][a].charCodeAt(0)!==65533){r[t[188][a]]=48128+a;e[48128+a]=t[188][a]}}t[189]="".split("");for(a=0;a!=t[189].length;++a){if(t[189][a].charCodeAt(0)!==65533){r[t[189][a]]=48384+a;
e[48384+a]=t[189][a]}}t[190]="".split("");for(a=0;a!=t[190].length;++a){if(t[190][a].charCodeAt(0)!==65533){r[t[190][a]]=48640+a;e[48640+a]=t[190][a]}}t[191]="".split("");for(a=0;a!=t[191].length;++a){if(t[191][a].charCodeAt(0)!==65533){r[t[191][a]]=48896+a;e[48896+a]=t[191][a]}}t[192]="".split("");for(a=0;a!=t[192].length;++a){if(t[192][a].charCodeAt(0)!==65533){r[t[192][a]]=49152+a;e[49152+a]=t[192][a]}}t[193]="".split("");for(a=0;a!=t[193].length;++a){if(t[193][a].charCodeAt(0)!==65533){r[t[193][a]]=49408+a;e[49408+a]=t[193][a]}}t[194]="".split("");for(a=0;a!=t[194].length;++a){if(t[194][a].charCodeAt(0)!==65533){r[t[194][a]]=49664+a;e[49664+a]=t[194][a]}}t[195]="".split("");
for(a=0;a!=t[195].length;++a){if(t[195][a].charCodeAt(0)!==65533){r[t[195][a]]=49920+a;e[49920+a]=t[195][a]}}t[196]="".split("");for(a=0;a!=t[196].length;++a){if(t[196][a].charCodeAt(0)!==65533){r[t[196][a]]=50176+a;e[50176+a]=t[196][a]}}t[197]="".split("");for(a=0;a!=t[197].length;++a){if(t[197][a].charCodeAt(0)!==65533){r[t[197][a]]=50432+a;e[50432+a]=t[197][a]}}t[198]="".split("");for(a=0;a!=t[198].length;++a){if(t[198][a].charCodeAt(0)!==65533){r[t[198][a]]=50688+a;e[50688+a]=t[198][a]}}t[199]="".split("");for(a=0;a!=t[199].length;++a){if(t[199][a].charCodeAt(0)!==65533){r[t[199][a]]=50944+a;e[50944+a]=t[199][a]}}t[200]="".split("");for(a=0;a!=t[200].length;++a){if(t[200][a].charCodeAt(0)!==65533){r[t[200][a]]=51200+a;
e[51200+a]=t[200][a]}}t[202]="".split("");for(a=0;a!=t[202].length;++a){if(t[202][a].charCodeAt(0)!==65533){r[t[202][a]]=51712+a;e[51712+a]=t[202][a]}}t[203]="".split("");for(a=0;a!=t[203].length;++a){if(t[203][a].charCodeAt(0)!==65533){r[t[203][a]]=51968+a;e[51968+a]=t[203][a]}}t[204]="".split("");for(a=0;a!=t[204].length;++a){if(t[204][a].charCodeAt(0)!==65533){r[t[204][a]]=52224+a;e[52224+a]=t[204][a]}}t[205]="".split("");for(a=0;a!=t[205].length;++a){if(t[205][a].charCodeAt(0)!==65533){r[t[205][a]]=52480+a;e[52480+a]=t[205][a]}}t[206]="".split("");for(a=0;a!=t[206].length;++a){if(t[206][a].charCodeAt(0)!==65533){r[t[206][a]]=52736+a;e[52736+a]=t[206][a]}}t[207]="".split("");
for(a=0;a!=t[207].length;++a){if(t[207][a].charCodeAt(0)!==65533){r[t[207][a]]=52992+a;e[52992+a]=t[207][a]}}t[208]="".split("");for(a=0;a!=t[208].length;++a){if(t[208][a].charCodeAt(0)!==65533){r[t[208][a]]=53248+a;e[53248+a]=t[208][a]}}t[209]="".split("");for(a=0;a!=t[209].length;++a){if(t[209][a].charCodeAt(0)!==65533){r[t[209][a]]=53504+a;e[53504+a]=t[209][a]}}t[210]="".split("");for(a=0;a!=t[210].length;++a){if(t[210][a].charCodeAt(0)!==65533){r[t[210][a]]=53760+a;e[53760+a]=t[210][a]}}t[211]="".split("");for(a=0;a!=t[211].length;++a){if(t[211][a].charCodeAt(0)!==65533){r[t[211][a]]=54016+a;e[54016+a]=t[211][a]}}t[212]="".split("");for(a=0;a!=t[212].length;++a){if(t[212][a].charCodeAt(0)!==65533){r[t[212][a]]=54272+a;
e[54272+a]=t[212][a]}}t[213]="".split("");for(a=0;a!=t[213].length;++a){if(t[213][a].charCodeAt(0)!==65533){r[t[213][a]]=54528+a;e[54528+a]=t[213][a]}}t[214]="".split("");for(a=0;a!=t[214].length;++a){if(t[214][a].charCodeAt(0)!==65533){r[t[214][a]]=54784+a;e[54784+a]=t[214][a]}}t[215]="".split("");for(a=0;a!=t[215].length;++a){if(t[215][a].charCodeAt(0)!==65533){r[t[215][a]]=55040+a;e[55040+a]=t[215][a]}}t[216]="".split("");for(a=0;a!=t[216].length;++a){if(t[216][a].charCodeAt(0)!==65533){r[t[216][a]]=55296+a;e[55296+a]=t[216][a]}}t[217]="".split("");for(a=0;a!=t[217].length;++a){if(t[217][a].charCodeAt(0)!==65533){r[t[217][a]]=55552+a;e[55552+a]=t[217][a]}}t[218]="".split("");
for(a=0;a!=t[218].length;++a){if(t[218][a].charCodeAt(0)!==65533){r[t[218][a]]=55808+a;e[55808+a]=t[218][a]}}t[219]="".split("");for(a=0;a!=t[219].length;++a){if(t[219][a].charCodeAt(0)!==65533){r[t[219][a]]=56064+a;e[56064+a]=t[219][a]}}t[220]="".split("");for(a=0;a!=t[220].length;++a){if(t[220][a].charCodeAt(0)!==65533){r[t[220][a]]=56320+a;e[56320+a]=t[220][a]}}t[221]="".split("");for(a=0;a!=t[221].length;++a){if(t[221][a].charCodeAt(0)!==65533){r[t[221][a]]=56576+a;e[56576+a]=t[221][a]}}t[222]="".split("");for(a=0;a!=t[222].length;++a){if(t[222][a].charCodeAt(0)!==65533){r[t[222][a]]=56832+a;e[56832+a]=t[222][a]}}t[223]="".split("");for(a=0;a!=t[223].length;++a){if(t[223][a].charCodeAt(0)!==65533){r[t[223][a]]=57088+a;
e[57088+a]=t[223][a]}}t[224]="".split("");for(a=0;a!=t[224].length;++a){if(t[224][a].charCodeAt(0)!==65533){r[t[224][a]]=57344+a;e[57344+a]=t[224][a]}}t[225]="".split("");for(a=0;a!=t[225].length;++a){if(t[225][a].charCodeAt(0)!==65533){r[t[225][a]]=57600+a;e[57600+a]=t[225][a]}}t[226]="".split("");for(a=0;a!=t[226].length;++a){if(t[226][a].charCodeAt(0)!==65533){r[t[226][a]]=57856+a;e[57856+a]=t[226][a]}}t[227]="".split("");for(a=0;a!=t[227].length;++a){if(t[227][a].charCodeAt(0)!==65533){r[t[227][a]]=58112+a;e[58112+a]=t[227][a]}}t[228]="".split("");for(a=0;a!=t[228].length;++a){if(t[228][a].charCodeAt(0)!==65533){r[t[228][a]]=58368+a;e[58368+a]=t[228][a]}}t[229]="".split("");
for(a=0;a!=t[229].length;++a){if(t[229][a].charCodeAt(0)!==65533){r[t[229][a]]=58624+a;e[58624+a]=t[229][a]}}t[230]="".split("");for(a=0;a!=t[230].length;++a){if(t[230][a].charCodeAt(0)!==65533){r[t[230][a]]=58880+a;e[58880+a]=t[230][a]}}t[231]="".split("");for(a=0;a!=t[231].length;++a){if(t[231][a].charCodeAt(0)!==65533){r[t[231][a]]=59136+a;e[59136+a]=t[231][a]}}t[232]="".split("");for(a=0;a!=t[232].length;++a){if(t[232][a].charCodeAt(0)!==65533){r[t[232][a]]=59392+a;e[59392+a]=t[232][a]}}t[233]="".split("");for(a=0;a!=t[233].length;++a){if(t[233][a].charCodeAt(0)!==65533){r[t[233][a]]=59648+a;e[59648+a]=t[233][a]}}t[234]="".split("");for(a=0;a!=t[234].length;++a){if(t[234][a].charCodeAt(0)!==65533){r[t[234][a]]=59904+a;
e[59904+a]=t[234][a]}}t[235]="".split("");for(a=0;a!=t[235].length;++a){if(t[235][a].charCodeAt(0)!==65533){r[t[235][a]]=60160+a;e[60160+a]=t[235][a]}}t[236]="".split("");for(a=0;a!=t[236].length;++a){if(t[236][a].charCodeAt(0)!==65533){r[t[236][a]]=60416+a;e[60416+a]=t[236][a]}}t[237]="".split("");for(a=0;a!=t[237].length;++a){if(t[237][a].charCodeAt(0)!==65533){r[t[237][a]]=60672+a;e[60672+a]=t[237][a]}}t[238]="".split("");for(a=0;a!=t[238].length;++a){if(t[238][a].charCodeAt(0)!==65533){r[t[238][a]]=60928+a;e[60928+a]=t[238][a]}}t[239]="".split("");for(a=0;a!=t[239].length;++a){if(t[239][a].charCodeAt(0)!==65533){r[t[239][a]]=61184+a;e[61184+a]=t[239][a]}}t[240]="".split("");
for(a=0;a!=t[240].length;++a){if(t[240][a].charCodeAt(0)!==65533){r[t[240][a]]=61440+a;e[61440+a]=t[240][a]}}t[241]="".split("");for(a=0;a!=t[241].length;++a){if(t[241][a].charCodeAt(0)!==65533){r[t[241][a]]=61696+a;e[61696+a]=t[241][a]}}t[242]="".split("");for(a=0;a!=t[242].length;++a){if(t[242][a].charCodeAt(0)!==65533){r[t[242][a]]=61952+a;e[61952+a]=t[242][a]}}t[243]="".split("");for(a=0;a!=t[243].length;++a){if(t[243][a].charCodeAt(0)!==65533){r[t[243][a]]=62208+a;e[62208+a]=t[243][a]}}t[244]="".split("");for(a=0;a!=t[244].length;++a){if(t[244][a].charCodeAt(0)!==65533){r[t[244][a]]=62464+a;e[62464+a]=t[244][a]}}t[245]="".split("");for(a=0;a!=t[245].length;++a){if(t[245][a].charCodeAt(0)!==65533){r[t[245][a]]=62720+a;
e[62720+a]=t[245][a]}}t[246]="".split("");for(a=0;a!=t[246].length;++a){if(t[246][a].charCodeAt(0)!==65533){r[t[246][a]]=62976+a;e[62976+a]=t[246][a]}}t[247]="".split("");for(a=0;a!=t[247].length;++a){if(t[247][a].charCodeAt(0)!==65533){r[t[247][a]]=63232+a;e[63232+a]=t[247][a]}}t[248]="".split("");for(a=0;a!=t[248].length;++a){if(t[248][a].charCodeAt(0)!==65533){r[t[248][a]]=63488+a;e[63488+a]=t[248][a]}}t[249]="".split("");for(a=0;a!=t[249].length;++a){if(t[249][a].charCodeAt(0)!==65533){r[t[249][a]]=63744+a;e[63744+a]=t[249][a]}}t[250]="".split("");for(a=0;a!=t[250].length;++a){if(t[250][a].charCodeAt(0)!==65533){r[t[250][a]]=64000+a;e[64000+a]=t[250][a]}}t[251]="".split("");
for(a=0;a!=t[251].length;++a){if(t[251][a].charCodeAt(0)!==65533){r[t[251][a]]=64256+a;e[64256+a]=t[251][a]}}t[252]="".split("");for(a=0;a!=t[252].length;++a){if(t[252][a].charCodeAt(0)!==65533){r[t[252][a]]=64512+a;e[64512+a]=t[252][a]}}t[253]="".split("");for(a=0;a!=t[253].length;++a){if(t[253][a].charCodeAt(0)!==65533){r[t[253][a]]=64768+a;e[64768+a]=t[253][a]}}return{enc:r,dec:e}}();cptable[950]=function(){var e=[],r={},t=[],a;t[0]="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".split("");for(a=0;a!=t[0].length;++a){if(t[0][a].charCodeAt(0)!==65533){r[t[0][a]]=0+a;e[0+a]=t[0][a]}}t[161]="".split("");for(a=0;a!=t[161].length;++a){if(t[161][a].charCodeAt(0)!==65533){r[t[161][a]]=41216+a;e[41216+a]=t[161][a]}}t[162]="".split("");for(a=0;a!=t[162].length;
++a){if(t[162][a].charCodeAt(0)!==65533){r[t[162][a]]=41472+a;e[41472+a]=t[162][a]}}t[163]="".split("");for(a=0;a!=t[163].length;++a){if(t[163][a].charCodeAt(0)!==65533){r[t[163][a]]=41728+a;e[41728+a]=t[163][a]}}t[164]="".split("");for(a=0;a!=t[164].length;++a){if(t[164][a].charCodeAt(0)!==65533){r[t[164][a]]=41984+a;e[41984+a]=t[164][a]}}t[165]="".split("");for(a=0;a!=t[165].length;++a){if(t[165][a].charCodeAt(0)!==65533){r[t[165][a]]=42240+a;e[42240+a]=t[165][a]}}t[166]="".split("");for(a=0;a!=t[166].length;++a){if(t[166][a].charCodeAt(0)!==65533){r[t[166][a]]=42496+a;e[42496+a]=t[166][a]}}t[167]="".split("");for(a=0;a!=t[167].length;++a){if(t[167][a].charCodeAt(0)!==65533){r[t[167][a]]=42752+a;e[42752+a]=t[167][a]
}}t[168]="".split("");for(a=0;a!=t[168].length;++a){if(t[168][a].charCodeAt(0)!==65533){r[t[168][a]]=43008+a;e[43008+a]=t[168][a]}}t[169]="".split("");for(a=0;a!=t[169].length;++a){if(t[169][a].charCodeAt(0)!==65533){r[t[169][a]]=43264+a;e[43264+a]=t[169][a]}}t[170]="".split("");for(a=0;a!=t[170].length;++a){if(t[170][a].charCodeAt(0)!==65533){r[t[170][a]]=43520+a;e[43520+a]=t[170][a]}}t[171]="".split("");for(a=0;a!=t[171].length;++a){if(t[171][a].charCodeAt(0)!==65533){r[t[171][a]]=43776+a;e[43776+a]=t[171][a]}}t[172]="".split("");for(a=0;a!=t[172].length;++a){if(t[172][a].charCodeAt(0)!==65533){r[t[172][a]]=44032+a;e[44032+a]=t[172][a]}}t[173]="".split("");
for(a=0;a!=t[173].length;++a){if(t[173][a].charCodeAt(0)!==65533){r[t[173][a]]=44288+a;e[44288+a]=t[173][a]}}t[174]="".split("");for(a=0;a!=t[174].length;++a){if(t[174][a].charCodeAt(0)!==65533){r[t[174][a]]=44544+a;e[44544+a]=t[174][a]}}t[175]="".split("");for(a=0;a!=t[175].length;++a){if(t[175][a].charCodeAt(0)!==65533){r[t[175][a]]=44800+a;e[44800+a]=t[175][a]}}t[176]="".split("");for(a=0;a!=t[176].length;++a){if(t[176][a].charCodeAt(0)!==65533){r[t[176][a]]=45056+a;e[45056+a]=t[176][a]}}t[177]="".split("");for(a=0;a!=t[177].length;++a){if(t[177][a].charCodeAt(0)!==65533){r[t[177][a]]=45312+a;e[45312+a]=t[177][a]}}t[178]="".split("");for(a=0;a!=t[178].length;++a){if(t[178][a].charCodeAt(0)!==65533){r[t[178][a]]=45568+a;
e[45568+a]=t[178][a]}}t[179]="".split("");for(a=0;a!=t[179].length;++a){if(t[179][a].charCodeAt(0)!==65533){r[t[179][a]]=45824+a;e[45824+a]=t[179][a]}}t[180]="".split("");for(a=0;a!=t[180].length;++a){if(t[180][a].charCodeAt(0)!==65533){r[t[180][a]]=46080+a;e[46080+a]=t[180][a]}}t[181]="".split("");for(a=0;a!=t[181].length;++a){if(t[181][a].charCodeAt(0)!==65533){r[t[181][a]]=46336+a;e[46336+a]=t[181][a]}}t[182]="".split("");for(a=0;a!=t[182].length;++a){if(t[182][a].charCodeAt(0)!==65533){r[t[182][a]]=46592+a;e[46592+a]=t[182][a]}}t[183]="".split("");for(a=0;a!=t[183].length;++a){if(t[183][a].charCodeAt(0)!==65533){r[t[183][a]]=46848+a;e[46848+a]=t[183][a]}}t[184]="".split("");
for(a=0;a!=t[184].length;++a){if(t[184][a].charCodeAt(0)!==65533){r[t[184][a]]=47104+a;e[47104+a]=t[184][a]}}t[185]="".split("");for(a=0;a!=t[185].length;++a){if(t[185][a].charCodeAt(0)!==65533){r[t[185][a]]=47360+a;e[47360+a]=t[185][a]}}t[186]="".split("");for(a=0;a!=t[186].length;++a){if(t[186][a].charCodeAt(0)!==65533){r[t[186][a]]=47616+a;e[47616+a]=t[186][a]}}t[187]="".split("");for(a=0;a!=t[187].length;++a){if(t[187][a].charCodeAt(0)!==65533){r[t[187][a]]=47872+a;e[47872+a]=t[187][a]}}t[188]="".split("");for(a=0;a!=t[188].length;++a){if(t[188][a].charCodeAt(0)!==65533){r[t[188][a]]=48128+a;e[48128+a]=t[188][a]}}t[189]="".split("");for(a=0;a!=t[189].length;++a){if(t[189][a].charCodeAt(0)!==65533){r[t[189][a]]=48384+a;
e[48384+a]=t[189][a]}}t[190]="".split("");for(a=0;a!=t[190].length;++a){if(t[190][a].charCodeAt(0)!==65533){r[t[190][a]]=48640+a;e[48640+a]=t[190][a]}}t[191]="".split("");for(a=0;a!=t[191].length;++a){if(t[191][a].charCodeAt(0)!==65533){r[t[191][a]]=48896+a;e[48896+a]=t[191][a]}}t[192]="".split("");for(a=0;a!=t[192].length;++a){if(t[192][a].charCodeAt(0)!==65533){r[t[192][a]]=49152+a;e[49152+a]=t[192][a]}}t[193]="".split("");for(a=0;a!=t[193].length;++a){if(t[193][a].charCodeAt(0)!==65533){r[t[193][a]]=49408+a;e[49408+a]=t[193][a]}}t[194]="".split("");for(a=0;a!=t[194].length;++a){if(t[194][a].charCodeAt(0)!==65533){r[t[194][a]]=49664+a;e[49664+a]=t[194][a]}}t[195]="".split("");
for(a=0;a!=t[195].length;++a){if(t[195][a].charCodeAt(0)!==65533){r[t[195][a]]=49920+a;e[49920+a]=t[195][a]}}t[196]="".split("");for(a=0;a!=t[196].length;++a){if(t[196][a].charCodeAt(0)!==65533){r[t[196][a]]=50176+a;e[50176+a]=t[196][a]}}t[197]="".split("");for(a=0;a!=t[197].length;++a){if(t[197][a].charCodeAt(0)!==65533){r[t[197][a]]=50432+a;e[50432+a]=t[197][a]}}t[198]="".split("");for(a=0;a!=t[198].length;++a){if(t[198][a].charCodeAt(0)!==65533){r[t[198][a]]=50688+a;e[50688+a]=t[198][a]}}t[201]="".split("");for(a=0;a!=t[201].length;++a){if(t[201][a].charCodeAt(0)!==65533){r[t[201][a]]=51456+a;e[51456+a]=t[201][a]}}t[202]="".split("");for(a=0;a!=t[202].length;++a){if(t[202][a].charCodeAt(0)!==65533){r[t[202][a]]=51712+a;
e[51712+a]=t[202][a]}}t[203]="".split("");for(a=0;a!=t[203].length;++a){if(t[203][a].charCodeAt(0)!==65533){r[t[203][a]]=51968+a;e[51968+a]=t[203][a]}}t[204]="".split("");for(a=0;a!=t[204].length;++a){if(t[204][a].charCodeAt(0)!==65533){r[t[204][a]]=52224+a;e[52224+a]=t[204][a]}}t[205]="".split("");for(a=0;a!=t[205].length;++a){if(t[205][a].charCodeAt(0)!==65533){r[t[205][a]]=52480+a;e[52480+a]=t[205][a]}}t[206]="".split("");for(a=0;a!=t[206].length;++a){if(t[206][a].charCodeAt(0)!==65533){r[t[206][a]]=52736+a;e[52736+a]=t[206][a]}}t[207]="".split("");for(a=0;a!=t[207].length;++a){if(t[207][a].charCodeAt(0)!==65533){r[t[207][a]]=52992+a;e[52992+a]=t[207][a]}}t[208]="".split("");
for(a=0;a!=t[208].length;++a){if(t[208][a].charCodeAt(0)!==65533){r[t[208][a]]=53248+a;e[53248+a]=t[208][a]}}t[209]="".split("");for(a=0;a!=t[209].length;++a){if(t[209][a].charCodeAt(0)!==65533){r[t[209][a]]=53504+a;e[53504+a]=t[209][a]}}t[210]="".split("");for(a=0;a!=t[210].length;++a){if(t[210][a].charCodeAt(0)!==65533){r[t[210][a]]=53760+a;e[53760+a]=t[210][a]}}t[211]="".split("");for(a=0;a!=t[211].length;++a){if(t[211][a].charCodeAt(0)!==65533){r[t[211][a]]=54016+a;e[54016+a]=t[211][a]}}t[212]="".split("");for(a=0;a!=t[212].length;++a){if(t[212][a].charCodeAt(0)!==65533){r[t[212][a]]=54272+a;e[54272+a]=t[212][a]}}t[213]="".split("");for(a=0;a!=t[213].length;++a){if(t[213][a].charCodeAt(0)!==65533){r[t[213][a]]=54528+a;
e[54528+a]=t[213][a]}}t[214]="".split("");for(a=0;a!=t[214].length;++a){if(t[214][a].charCodeAt(0)!==65533){r[t[214][a]]=54784+a;e[54784+a]=t[214][a]}}t[215]="".split("");for(a=0;a!=t[215].length;++a){if(t[215][a].charCodeAt(0)!==65533){r[t[215][a]]=55040+a;e[55040+a]=t[215][a]}}t[216]="".split("");for(a=0;a!=t[216].length;++a){if(t[216][a].charCodeAt(0)!==65533){r[t[216][a]]=55296+a;e[55296+a]=t[216][a]}}t[217]="".split("");for(a=0;a!=t[217].length;++a){if(t[217][a].charCodeAt(0)!==65533){r[t[217][a]]=55552+a;e[55552+a]=t[217][a]}}t[218]="".split("");for(a=0;a!=t[218].length;++a){if(t[218][a].charCodeAt(0)!==65533){r[t[218][a]]=55808+a;e[55808+a]=t[218][a]}}t[219]="".split("");
for(a=0;a!=t[219].length;++a){if(t[219][a].charCodeAt(0)!==65533){r[t[219][a]]=56064+a;e[56064+a]=t[219][a]}}t[220]="".split("");for(a=0;a!=t[220].length;++a){if(t[220][a].charCodeAt(0)!==65533){r[t[220][a]]=56320+a;e[56320+a]=t[220][a]}}t[221]="".split("");for(a=0;a!=t[221].length;++a){if(t[221][a].charCodeAt(0)!==65533){r[t[221][a]]=56576+a;e[56576+a]=t[221][a]}}t[222]="".split("");for(a=0;a!=t[222].length;++a){if(t[222][a].charCodeAt(0)!==65533){r[t[222][a]]=56832+a;e[56832+a]=t[222][a]}}t[223]="".split("");for(a=0;a!=t[223].length;++a){if(t[223][a].charCodeAt(0)!==65533){r[t[223][a]]=57088+a;e[57088+a]=t[223][a]}}t[224]="".split("");for(a=0;a!=t[224].length;++a){if(t[224][a].charCodeAt(0)!==65533){r[t[224][a]]=57344+a;
e[57344+a]=t[224][a]}}t[225]="".split("");for(a=0;a!=t[225].length;++a){if(t[225][a].charCodeAt(0)!==65533){r[t[225][a]]=57600+a;e[57600+a]=t[225][a]}}t[226]="".split("");for(a=0;a!=t[226].length;++a){if(t[226][a].charCodeAt(0)!==65533){r[t[226][a]]=57856+a;e[57856+a]=t[226][a]}}t[227]="".split("");for(a=0;a!=t[227].length;++a){if(t[227][a].charCodeAt(0)!==65533){r[t[227][a]]=58112+a;e[58112+a]=t[227][a]}}t[228]="".split("");for(a=0;a!=t[228].length;++a){if(t[228][a].charCodeAt(0)!==65533){r[t[228][a]]=58368+a;e[58368+a]=t[228][a]}}t[229]="".split("");for(a=0;a!=t[229].length;++a){if(t[229][a].charCodeAt(0)!==65533){r[t[229][a]]=58624+a;e[58624+a]=t[229][a]}}t[230]="".split("");
for(a=0;a!=t[230].length;++a){if(t[230][a].charCodeAt(0)!==65533){r[t[230][a]]=58880+a;e[58880+a]=t[230][a]}}t[231]="".split("");for(a=0;a!=t[231].length;++a){if(t[231][a].charCodeAt(0)!==65533){r[t[231][a]]=59136+a;e[59136+a]=t[231][a]}}t[232]="".split("");for(a=0;a!=t[232].length;++a){if(t[232][a].charCodeAt(0)!==65533){r[t[232][a]]=59392+a;e[59392+a]=t[232][a]}}t[233]="".split("");for(a=0;a!=t[233].length;++a){if(t[233][a].charCodeAt(0)!==65533){r[t[233][a]]=59648+a;e[59648+a]=t[233][a]}}t[234]="".split("");for(a=0;a!=t[234].length;++a){if(t[234][a].charCodeAt(0)!==65533){r[t[234][a]]=59904+a;e[59904+a]=t[234][a]}}t[235]="".split("");for(a=0;a!=t[235].length;++a){if(t[235][a].charCodeAt(0)!==65533){r[t[235][a]]=60160+a;
e[60160+a]=t[235][a]}}t[236]="".split("");for(a=0;a!=t[236].length;++a){if(t[236][a].charCodeAt(0)!==65533){r[t[236][a]]=60416+a;e[60416+a]=t[236][a]}}t[237]="".split("");for(a=0;a!=t[237].length;++a){if(t[237][a].charCodeAt(0)!==65533){r[t[237][a]]=60672+a;e[60672+a]=t[237][a]}}t[238]="".split("");for(a=0;a!=t[238].length;++a){if(t[238][a].charCodeAt(0)!==65533){r[t[238][a]]=60928+a;e[60928+a]=t[238][a]}}t[239]="".split("");for(a=0;a!=t[239].length;++a){if(t[239][a].charCodeAt(0)!==65533){r[t[239][a]]=61184+a;e[61184+a]=t[239][a]}}t[240]="".split("");for(a=0;a!=t[240].length;++a){if(t[240][a].charCodeAt(0)!==65533){r[t[240][a]]=61440+a;e[61440+a]=t[240][a]}}t[241]="".split("");
for(a=0;a!=t[241].length;++a){if(t[241][a].charCodeAt(0)!==65533){r[t[241][a]]=61696+a;e[61696+a]=t[241][a]}}t[242]="".split("");for(a=0;a!=t[242].length;++a){if(t[242][a].charCodeAt(0)!==65533){r[t[242][a]]=61952+a;e[61952+a]=t[242][a]}}t[243]="".split("");for(a=0;a!=t[243].length;++a){if(t[243][a].charCodeAt(0)!==65533){r[t[243][a]]=62208+a;e[62208+a]=t[243][a]}}t[244]="".split("");for(a=0;a!=t[244].length;++a){if(t[244][a].charCodeAt(0)!==65533){r[t[244][a]]=62464+a;e[62464+a]=t[244][a]}}t[245]="".split("");for(a=0;a!=t[245].length;++a){if(t[245][a].charCodeAt(0)!==65533){r[t[245][a]]=62720+a;e[62720+a]=t[245][a]}}t[246]="".split("");for(a=0;a!=t[246].length;++a){if(t[246][a].charCodeAt(0)!==65533){r[t[246][a]]=62976+a;
e[62976+a]=t[246][a]}}t[247]="".split("");for(a=0;a!=t[247].length;++a){if(t[247][a].charCodeAt(0)!==65533){r[t[247][a]]=63232+a;e[63232+a]=t[247][a]}}t[248]="".split("");for(a=0;a!=t[248].length;++a){if(t[248][a].charCodeAt(0)!==65533){r[t[248][a]]=63488+a;e[63488+a]=t[248][a]}}t[249]="".split("");for(a=0;a!=t[249].length;++a){if(t[249][a].charCodeAt(0)!==65533){r[t[249][a]]=63744+a;e[63744+a]=t[249][a]}}return{enc:r,dec:e}}();cptable[1250]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[1251]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a
}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[1252]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[1253]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[1254]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[1255]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[1256]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};
for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[1257]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[1258]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[10000]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[10006]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[10007]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};
for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[10008]=function(){var e=[],r={},t=[],a;t[0]="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".split("");for(a=0;a!=t[0].length;++a){if(t[0][a].charCodeAt(0)!==65533){r[t[0][a]]=0+a;e[0+a]=t[0][a]}}t[161]="".split("");for(a=0;a!=t[161].length;++a){if(t[161][a].charCodeAt(0)!==65533){r[t[161][a]]=41216+a;e[41216+a]=t[161][a]}}t[162]="".split("");for(a=0;a!=t[162].length;++a){if(t[162][a].charCodeAt(0)!==65533){r[t[162][a]]=41472+a;e[41472+a]=t[162][a]}}t[163]="".split("");for(a=0;a!=t[163].length;++a){if(t[163][a].charCodeAt(0)!==65533){r[t[163][a]]=41728+a;e[41728+a]=t[163][a]}}t[164]="".split("");for(a=0;a!=t[164].length;++a){if(t[164][a].charCodeAt(0)!==65533){r[t[164][a]]=41984+a;
e[41984+a]=t[164][a]}}t[165]="".split("");for(a=0;a!=t[165].length;++a){if(t[165][a].charCodeAt(0)!==65533){r[t[165][a]]=42240+a;e[42240+a]=t[165][a]}}t[166]="".split("");for(a=0;a!=t[166].length;++a){if(t[166][a].charCodeAt(0)!==65533){r[t[166][a]]=42496+a;e[42496+a]=t[166][a]}}t[167]="".split("");for(a=0;a!=t[167].length;++a){if(t[167][a].charCodeAt(0)!==65533){r[t[167][a]]=42752+a;e[42752+a]=t[167][a]}}t[168]="".split("");for(a=0;a!=t[168].length;++a){if(t[168][a].charCodeAt(0)!==65533){r[t[168][a]]=43008+a;e[43008+a]=t[168][a]}}t[169]="".split("");for(a=0;a!=t[169].length;++a){if(t[169][a].charCodeAt(0)!==65533){r[t[169][a]]=43264+a;e[43264+a]=t[169][a]}}t[176]="".split("");
for(a=0;a!=t[176].length;++a){if(t[176][a].charCodeAt(0)!==65533){r[t[176][a]]=45056+a;e[45056+a]=t[176][a]}}t[177]="".split("");for(a=0;a!=t[177].length;++a){if(t[177][a].charCodeAt(0)!==65533){r[t[177][a]]=45312+a;e[45312+a]=t[177][a]}}t[178]="".split("");for(a=0;a!=t[178].length;++a){if(t[178][a].charCodeAt(0)!==65533){r[t[178][a]]=45568+a;e[45568+a]=t[178][a]}}t[179]="".split("");for(a=0;a!=t[179].length;++a){if(t[179][a].charCodeAt(0)!==65533){r[t[179][a]]=45824+a;e[45824+a]=t[179][a]}}t[180]="".split("");for(a=0;a!=t[180].length;++a){if(t[180][a].charCodeAt(0)!==65533){r[t[180][a]]=46080+a;e[46080+a]=t[180][a]}}t[181]="".split("");for(a=0;a!=t[181].length;++a){if(t[181][a].charCodeAt(0)!==65533){r[t[181][a]]=46336+a;
e[46336+a]=t[181][a]}}t[182]="".split("");for(a=0;a!=t[182].length;++a){if(t[182][a].charCodeAt(0)!==65533){r[t[182][a]]=46592+a;e[46592+a]=t[182][a]}}t[183]="".split("");for(a=0;a!=t[183].length;++a){if(t[183][a].charCodeAt(0)!==65533){r[t[183][a]]=46848+a;e[46848+a]=t[183][a]}}t[184]="".split("");for(a=0;a!=t[184].length;++a){if(t[184][a].charCodeAt(0)!==65533){r[t[184][a]]=47104+a;e[47104+a]=t[184][a]}}t[185]="".split("");for(a=0;a!=t[185].length;++a){if(t[185][a].charCodeAt(0)!==65533){r[t[185][a]]=47360+a;e[47360+a]=t[185][a]}}t[186]="".split("");for(a=0;a!=t[186].length;++a){if(t[186][a].charCodeAt(0)!==65533){r[t[186][a]]=47616+a;e[47616+a]=t[186][a]}}t[187]="".split("");
for(a=0;a!=t[187].length;++a){if(t[187][a].charCodeAt(0)!==65533){r[t[187][a]]=47872+a;e[47872+a]=t[187][a]}}t[188]="".split("");for(a=0;a!=t[188].length;++a){if(t[188][a].charCodeAt(0)!==65533){r[t[188][a]]=48128+a;e[48128+a]=t[188][a]}}t[189]="".split("");for(a=0;a!=t[189].length;++a){if(t[189][a].charCodeAt(0)!==65533){r[t[189][a]]=48384+a;e[48384+a]=t[189][a]}}t[190]="".split("");for(a=0;a!=t[190].length;++a){if(t[190][a].charCodeAt(0)!==65533){r[t[190][a]]=48640+a;e[48640+a]=t[190][a]}}t[191]="".split("");for(a=0;a!=t[191].length;++a){if(t[191][a].charCodeAt(0)!==65533){r[t[191][a]]=48896+a;e[48896+a]=t[191][a]}}t[192]="".split("");for(a=0;a!=t[192].length;++a){if(t[192][a].charCodeAt(0)!==65533){r[t[192][a]]=49152+a;
e[49152+a]=t[192][a]}}t[193]="".split("");for(a=0;a!=t[193].length;++a){if(t[193][a].charCodeAt(0)!==65533){r[t[193][a]]=49408+a;e[49408+a]=t[193][a]}}t[194]="".split("");for(a=0;a!=t[194].length;++a){if(t[194][a].charCodeAt(0)!==65533){r[t[194][a]]=49664+a;e[49664+a]=t[194][a]}}t[195]="".split("");for(a=0;a!=t[195].length;++a){if(t[195][a].charCodeAt(0)!==65533){r[t[195][a]]=49920+a;e[49920+a]=t[195][a]}}t[196]="".split("");for(a=0;a!=t[196].length;++a){if(t[196][a].charCodeAt(0)!==65533){r[t[196][a]]=50176+a;e[50176+a]=t[196][a]}}t[197]="".split("");for(a=0;a!=t[197].length;++a){if(t[197][a].charCodeAt(0)!==65533){r[t[197][a]]=50432+a;e[50432+a]=t[197][a]}}t[198]="".split("");
for(a=0;a!=t[198].length;++a){if(t[198][a].charCodeAt(0)!==65533){r[t[198][a]]=50688+a;e[50688+a]=t[198][a]}}t[199]="".split("");for(a=0;a!=t[199].length;++a){if(t[199][a].charCodeAt(0)!==65533){r[t[199][a]]=50944+a;e[50944+a]=t[199][a]}}t[200]="".split("");for(a=0;a!=t[200].length;++a){if(t[200][a].charCodeAt(0)!==65533){r[t[200][a]]=51200+a;e[51200+a]=t[200][a]}}t[201]="".split("");for(a=0;a!=t[201].length;++a){if(t[201][a].charCodeAt(0)!==65533){r[t[201][a]]=51456+a;e[51456+a]=t[201][a]}}t[202]="".split("");for(a=0;a!=t[202].length;++a){if(t[202][a].charCodeAt(0)!==65533){r[t[202][a]]=51712+a;e[51712+a]=t[202][a]}}t[203]="".split("");for(a=0;a!=t[203].length;++a){if(t[203][a].charCodeAt(0)!==65533){r[t[203][a]]=51968+a;
e[51968+a]=t[203][a]}}t[204]="".split("");for(a=0;a!=t[204].length;++a){if(t[204][a].charCodeAt(0)!==65533){r[t[204][a]]=52224+a;e[52224+a]=t[204][a]}}t[205]="".split("");for(a=0;a!=t[205].length;++a){if(t[205][a].charCodeAt(0)!==65533){r[t[205][a]]=52480+a;e[52480+a]=t[205][a]}}t[206]="".split("");for(a=0;a!=t[206].length;++a){if(t[206][a].charCodeAt(0)!==65533){r[t[206][a]]=52736+a;e[52736+a]=t[206][a]}}t[207]="".split("");for(a=0;a!=t[207].length;++a){if(t[207][a].charCodeAt(0)!==65533){r[t[207][a]]=52992+a;e[52992+a]=t[207][a]}}t[208]="".split("");for(a=0;a!=t[208].length;++a){if(t[208][a].charCodeAt(0)!==65533){r[t[208][a]]=53248+a;e[53248+a]=t[208][a]}}t[209]="".split("");
for(a=0;a!=t[209].length;++a){if(t[209][a].charCodeAt(0)!==65533){r[t[209][a]]=53504+a;e[53504+a]=t[209][a]}}t[210]="".split("");for(a=0;a!=t[210].length;++a){if(t[210][a].charCodeAt(0)!==65533){r[t[210][a]]=53760+a;e[53760+a]=t[210][a]}}t[211]="".split("");for(a=0;a!=t[211].length;++a){if(t[211][a].charCodeAt(0)!==65533){r[t[211][a]]=54016+a;e[54016+a]=t[211][a]}}t[212]="".split("");for(a=0;a!=t[212].length;++a){if(t[212][a].charCodeAt(0)!==65533){r[t[212][a]]=54272+a;e[54272+a]=t[212][a]}}t[213]="".split("");for(a=0;a!=t[213].length;++a){if(t[213][a].charCodeAt(0)!==65533){r[t[213][a]]=54528+a;e[54528+a]=t[213][a]}}t[214]="".split("");for(a=0;a!=t[214].length;++a){if(t[214][a].charCodeAt(0)!==65533){r[t[214][a]]=54784+a;
e[54784+a]=t[214][a]}}t[215]="".split("");for(a=0;a!=t[215].length;++a){if(t[215][a].charCodeAt(0)!==65533){r[t[215][a]]=55040+a;e[55040+a]=t[215][a]}}t[216]="".split("");for(a=0;a!=t[216].length;++a){if(t[216][a].charCodeAt(0)!==65533){r[t[216][a]]=55296+a;e[55296+a]=t[216][a]}}t[217]="".split("");for(a=0;a!=t[217].length;++a){if(t[217][a].charCodeAt(0)!==65533){r[t[217][a]]=55552+a;e[55552+a]=t[217][a]}}t[218]="".split("");for(a=0;a!=t[218].length;++a){if(t[218][a].charCodeAt(0)!==65533){r[t[218][a]]=55808+a;e[55808+a]=t[218][a]}}t[219]="".split("");for(a=0;a!=t[219].length;++a){if(t[219][a].charCodeAt(0)!==65533){r[t[219][a]]=56064+a;e[56064+a]=t[219][a]}}t[220]="".split("");
for(a=0;a!=t[220].length;++a){if(t[220][a].charCodeAt(0)!==65533){r[t[220][a]]=56320+a;e[56320+a]=t[220][a]}}t[221]="".split("");for(a=0;a!=t[221].length;++a){if(t[221][a].charCodeAt(0)!==65533){r[t[221][a]]=56576+a;e[56576+a]=t[221][a]}}t[222]="".split("");for(a=0;a!=t[222].length;++a){if(t[222][a].charCodeAt(0)!==65533){r[t[222][a]]=56832+a;e[56832+a]=t[222][a]}}t[223]="".split("");for(a=0;a!=t[223].length;++a){if(t[223][a].charCodeAt(0)!==65533){r[t[223][a]]=57088+a;e[57088+a]=t[223][a]}}t[224]="".split("");for(a=0;a!=t[224].length;++a){if(t[224][a].charCodeAt(0)!==65533){r[t[224][a]]=57344+a;e[57344+a]=t[224][a]}}t[225]="".split("");for(a=0;a!=t[225].length;++a){if(t[225][a].charCodeAt(0)!==65533){r[t[225][a]]=57600+a;
e[57600+a]=t[225][a]}}t[226]="".split("");for(a=0;a!=t[226].length;++a){if(t[226][a].charCodeAt(0)!==65533){r[t[226][a]]=57856+a;e[57856+a]=t[226][a]}}t[227]="".split("");for(a=0;a!=t[227].length;++a){if(t[227][a].charCodeAt(0)!==65533){r[t[227][a]]=58112+a;e[58112+a]=t[227][a]}}t[228]="".split("");for(a=0;a!=t[228].length;++a){if(t[228][a].charCodeAt(0)!==65533){r[t[228][a]]=58368+a;e[58368+a]=t[228][a]}}t[229]="".split("");for(a=0;a!=t[229].length;++a){if(t[229][a].charCodeAt(0)!==65533){r[t[229][a]]=58624+a;e[58624+a]=t[229][a]}}t[230]="".split("");for(a=0;a!=t[230].length;++a){if(t[230][a].charCodeAt(0)!==65533){r[t[230][a]]=58880+a;e[58880+a]=t[230][a]}}t[231]="".split("");
for(a=0;a!=t[231].length;++a){if(t[231][a].charCodeAt(0)!==65533){r[t[231][a]]=59136+a;e[59136+a]=t[231][a]}}t[232]="".split("");for(a=0;a!=t[232].length;++a){if(t[232][a].charCodeAt(0)!==65533){r[t[232][a]]=59392+a;e[59392+a]=t[232][a]}}t[233]="".split("");for(a=0;a!=t[233].length;++a){if(t[233][a].charCodeAt(0)!==65533){r[t[233][a]]=59648+a;e[59648+a]=t[233][a]}}t[234]="".split("");for(a=0;a!=t[234].length;++a){if(t[234][a].charCodeAt(0)!==65533){r[t[234][a]]=59904+a;e[59904+a]=t[234][a]}}t[235]="".split("");for(a=0;a!=t[235].length;++a){if(t[235][a].charCodeAt(0)!==65533){r[t[235][a]]=60160+a;e[60160+a]=t[235][a]}}t[236]="".split("");for(a=0;a!=t[236].length;++a){if(t[236][a].charCodeAt(0)!==65533){r[t[236][a]]=60416+a;
e[60416+a]=t[236][a]}}t[237]="".split("");for(a=0;a!=t[237].length;++a){if(t[237][a].charCodeAt(0)!==65533){r[t[237][a]]=60672+a;e[60672+a]=t[237][a]}}t[238]="".split("");for(a=0;a!=t[238].length;++a){if(t[238][a].charCodeAt(0)!==65533){r[t[238][a]]=60928+a;e[60928+a]=t[238][a]}}t[239]="".split("");for(a=0;a!=t[239].length;++a){if(t[239][a].charCodeAt(0)!==65533){r[t[239][a]]=61184+a;e[61184+a]=t[239][a]}}t[240]="".split("");for(a=0;a!=t[240].length;++a){if(t[240][a].charCodeAt(0)!==65533){r[t[240][a]]=61440+a;e[61440+a]=t[240][a]}}t[241]="".split("");for(a=0;a!=t[241].length;++a){if(t[241][a].charCodeAt(0)!==65533){r[t[241][a]]=61696+a;e[61696+a]=t[241][a]}}t[242]="".split("");
for(a=0;a!=t[242].length;++a){if(t[242][a].charCodeAt(0)!==65533){r[t[242][a]]=61952+a;e[61952+a]=t[242][a]}}t[243]="".split("");for(a=0;a!=t[243].length;++a){if(t[243][a].charCodeAt(0)!==65533){r[t[243][a]]=62208+a;e[62208+a]=t[243][a]}}t[244]="".split("");for(a=0;a!=t[244].length;++a){if(t[244][a].charCodeAt(0)!==65533){r[t[244][a]]=62464+a;e[62464+a]=t[244][a]}}t[245]="".split("");for(a=0;a!=t[245].length;++a){if(t[245][a].charCodeAt(0)!==65533){r[t[245][a]]=62720+a;e[62720+a]=t[245][a]}}t[246]="".split("");for(a=0;a!=t[246].length;++a){if(t[246][a].charCodeAt(0)!==65533){r[t[246][a]]=62976+a;e[62976+a]=t[246][a]}}t[247]="".split("");for(a=0;a!=t[247].length;++a){if(t[247][a].charCodeAt(0)!==65533){r[t[247][a]]=63232+a;
e[63232+a]=t[247][a]}}return{enc:r,dec:e}}();cptable[10029]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[10079]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();cptable[10081]=function(){var e="\0\b\t\n\x0B\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",r=[],t={};for(var a=0;a!=e.length;++a){if(e.charCodeAt(a)!==65533){t[e.charAt(a)]=a}r[a]=e.charAt(a)}return{enc:t,dec:r}}();if(typeof module!=="undefined"&&module.exports&&typeof DO_NOT_EXPORT_CODEPAGE==="undefined"){module.exports=cptable}(function(e,r){if(typeof cptable==="undefined"){if(typeof require!=="undefined"){var t=cptable;if(typeof module!=="undefined"&&module.exports&&typeof DO_NOT_EXPORT_CODEPAGE==="undefined"){module.exports=r(t)}else{e.cptable=r(t)}}else{throw new Error("cptable not found")}}else{cptable=r(cptable)}})(this,function(e){var r={1200:"utf16le",1201:"utf16be",12000:"utf32le",12001:"utf32be",16969:"utf64le",20127:"ascii",65000:"utf7",65001:"utf8"};var t=[874,1250,1251,1252,1253,1254,1255,1256,10000];var a=[932,936,949,950];var n=[65001];var i={};var s={};var f={};var o={};
var l=function F(e){return String.fromCharCode(e)};var c=function P(e){return e.charCodeAt(0)};var h=typeof Buffer!=="undefined";var u=function(){};if(h){var d=!Buffer.from;if(!d){try{Buffer.from("foo","utf8")}catch(p){d=true}}u=d?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer);if(!Buffer.allocUnsafe){Buffer.allocUnsafe=function(e){return new Buffer(e)}}var v=1024,g=Buffer.allocUnsafe(v);var m=function N(e){var r=Buffer.allocUnsafe(65536);for(var t=0;t<65536;++t){r[t]=0}var a=Object.keys(e),n=a.length;for(var i=0,s=a[i];i<n;++i){if(!(s=a[i])){continue}r[s.charCodeAt(0)]=e[s]}return r};var b=function L(r){var t=m(e[r].enc);return function a(e,r){var a=e.length;var n,i=0,s=0,f=0,o=0;if(typeof e==="string"){n=Buffer.allocUnsafe(a);for(i=0;i<a;++i){n[i]=t[e.charCodeAt(i)]}}else{if(Buffer.isBuffer(e)){n=Buffer.allocUnsafe(2*a);s=0;for(i=0;i<a;++i){f=e[i];if(f<128){n[s++]=t[f]}else{if(f<224){n[s++]=t[((f&31)<<6)+(e[i+1]&63)];++i}else{if(f<240){n[s++]=t[((f&15)<<12)+((e[i+1]&63)<<6)+(e[i+2]&63)];i+=2}else{o=((f&7)<<18)+((e[i+1]&63)<<12)+((e[i+2]&63)<<6)+(e[i+3]&63);i+=3;if(o<65536){n[s++]=t[o]}else{o-=65536;n[s++]=t[55296+(o>>10&1023)];n[s++]=t[56320+(o&1023)]}}}}}n=n.slice(0,s)}else{n=Buffer.allocUnsafe(a);for(i=0;i<a;++i){n[i]=t[e[i].charCodeAt(0)]}}}if(!r||r==="buf"){return n}if(r!=="arr"){return n.toString("binary")}return[].slice.call(n)}};var w=function M(r){var t=e[r].dec;var a=Buffer.allocUnsafe(131072),n=0,i="";for(n=0;n<t.length;++n){if(!(i=t[n])){continue}var s=i.charCodeAt(0);a[2*n]=s&255;a[2*n+1]=s>>8}return function f(e){var r=e.length,t=0,n=0;if(2*r>v){v=2*r;g=Buffer.allocUnsafe(v)}if(Buffer.isBuffer(e)){for(t=0;t<r;t++){n=2*e[t];g[2*t]=a[n];g[2*t+1]=a[n+1]}}else{if(typeof e==="string"){for(t=0;t<r;t++){n=2*e.charCodeAt(t);g[2*t]=a[n];g[2*t+1]=a[n+1]}}else{for(t=0;t<r;t++){n=2*e[t];g[2*t]=a[n];g[2*t+1]=a[n+1]}}}return g.slice(0,2*r).toString("ucs2")}};var C=function U(r){var t=e[r].enc;var a=Buffer.allocUnsafe(131072);for(var n=0;
n<131072;++n){a[n]=0}var i=Object.keys(t);for(var s=0,f=i[s];s<i.length;++s){if(!(f=i[s])){continue}var o=f.charCodeAt(0);a[2*o]=t[f]&255;a[2*o+1]=t[f]>>8}return function l(e,r){var t=e.length,n=Buffer.allocUnsafe(2*t),i=0,s=0,f=0,o=0,l=0;if(typeof e==="string"){for(i=o=0;i<t;++i){s=e.charCodeAt(i)*2;n[o++]=a[s+1]||a[s];if(a[s+1]>0){n[o++]=a[s]}}n=n.slice(0,o)}else{if(Buffer.isBuffer(e)){for(i=o=0;i<t;++i){l=e[i];if(l<128){s=l}else{if(l<224){s=((l&31)<<6)+(e[i+1]&63);++i}else{if(l<240){s=((l&15)<<12)+((e[i+1]&63)<<6)+(e[i+2]&63);i+=2}else{s=((l&7)<<18)+((e[i+1]&63)<<12)+((e[i+2]&63)<<6)+(e[i+3]&63);i+=3}}}if(s<65536){s*=2;n[o++]=a[s+1]||a[s];if(a[s+1]>0){n[o++]=a[s]}}else{f=s-65536;s=2*(55296+(f>>10&1023));n[o++]=a[s+1]||a[s];if(a[s+1]>0){n[o++]=a[s]}s=2*(56320+(f&1023));n[o++]=a[s+1]||a[s];if(a[s+1]>0){n[o++]=a[s]}}}n=n.slice(0,o)}else{for(i=o=0;i<t;i++){s=e[i].charCodeAt(0)*2;n[o++]=a[s+1]||a[s];if(a[s+1]>0){n[o++]=a[s]}}}}if(!r||r==="buf"){return n}if(r!=="arr"){return n.toString("binary")}return[].slice.call(n)}};var E=function H(r){var t=e[r].dec;var a=Buffer.allocUnsafe(131072),n=0,i,s=0,f=0,o=0;for(o=0;o<65536;++o){a[2*o]=255;a[2*o+1]=253}for(n=0;n<t.length;++n){if(!(i=t[n])){continue}s=i.charCodeAt(0);f=2*n;a[f]=s&255;a[f+1]=s>>8}return function l(e){var r=e.length,t=Buffer.allocUnsafe(2*r),n=0,i=0,s=0;if(Buffer.isBuffer(e)){for(n=0;n<r;n++){i=2*e[n];if(a[i]===255&&a[i+1]===253){i=2*((e[n]<<8)+e[n+1]);++n}t[s++]=a[i];t[s++]=a[i+1]}}else{if(typeof e==="string"){for(n=0;n<r;n++){i=2*e.charCodeAt(n);if(a[i]===255&&a[i+1]===253){i=2*((e.charCodeAt(n)<<8)+e.charCodeAt(n+1));++n}t[s++]=a[i];t[s++]=a[i+1]}}else{for(n=0;n<r;n++){i=2*e[n];if(a[i]===255&&a[i+1]===253){i=2*((e[n]<<8)+e[n+1]);++n}t[s++]=a[i];t[s++]=a[i+1]}}}return t.slice(0,s).toString("ucs2")}};i[65001]=function W(e){if(typeof e==="string"){return W(e.split("").map(c))}var r=e.length,t=0,a=0;if(4*r>v){v=4*r;g=Buffer.allocUnsafe(v)}var n=0;if(r>=3&&e[0]==239){if(e[1]==187&&e[2]==191){n=3}}for(var i=1,s=0,f=0;
n<r;n+=i){i=1;f=e[n];if(f<128){t=f}else{if(f<224){t=(f&31)*64+(e[n+1]&63);i=2}else{if(f<240){t=((f&15)<<12)+(e[n+1]&63)*64+(e[n+2]&63);i=3}else{t=(f&7)*262144+((e[n+1]&63)<<12)+(e[n+2]&63)*64+(e[n+3]&63);i=4}}}if(t<65536){g[s++]=t&255;g[s++]=t>>8}else{t-=65536;a=55296+(t>>10&1023);t=56320+(t&1023);g[s++]=a&255;g[s++]=a>>>8;g[s++]=t&255;g[s++]=t>>>8&255}}return g.slice(0,s).toString("ucs2")};s[65001]=function V(e,r){if(h&&Buffer.isBuffer(e)){if(!r||r==="buf"){return e}if(r!=="arr"){return e.toString("binary")}return[].slice.call(e)}var t=e.length,a=0,n=0,i=0;var s=typeof e==="string";if(4*t>v){v=4*t;g=Buffer.allocUnsafe(v)}for(var f=0;f<t;++f){a=s?e.charCodeAt(f):e[f].charCodeAt(0);if(a<=127){g[i++]=a}else{if(a<=2047){g[i++]=192+(a>>6);g[i++]=128+(a&63)}else{if(a>=55296&&a<=57343){a-=55296;++f;n=(s?e.charCodeAt(f):e[f].charCodeAt(0))-56320+(a<<10);g[i++]=240+(n>>>18&7);g[i++]=144+(n>>>12&63);g[i++]=128+(n>>>6&63);g[i++]=128+(n&63)}else{g[i++]=224+(a>>12);g[i++]=128+(a>>6&63);g[i++]=128+(a&63)}}}}if(!r||r==="buf"){return g.slice(0,i)}if(r!=="arr"){return g.slice(0,i).toString("binary")}return[].slice.call(g,0,i)}}var k=function z(){if(h){if(f[t[0]]){return}var r=0,l=0;for(r=0;r<t.length;++r){l=t[r];if(e[l]){f[l]=w(l);o[l]=b(l)}}for(r=0;r<a.length;++r){l=a[r];if(e[l]){f[l]=E(l);o[l]=C(l)}}for(r=0;r<n.length;++r){l=n[r];if(i[l]){f[l]=i[l]}if(s[l]){o[l]=s[l]}}}};var S=function(e,r){void r;return""};var A=function X(e){delete f[e];delete o[e]};var _=function G(){if(h){if(!f[t[0]]){return}t.forEach(A);a.forEach(A);n.forEach(A)}x=S;I=0};var B={encache:k,decache:_,sbcs:t,dbcs:a};k();var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'(),-./:?";var x=S,I=0;var R=function j(t,a,n){if(t===I&&x){return x(a,n)}if(o[t]){x=o[I=t];return x(a,n)}if(h&&Buffer.isBuffer(a)){a=a.toString("utf8")}var i=a.length;var s=h?Buffer.allocUnsafe(4*i):[],f=0,c=0,d=0,p=0;var v=e[t],g,m="";var b=typeof a==="string";
if(v&&(g=v.enc)){for(c=0;c<i;++c,++d){f=g[b?a.charAt(c):a[c]];if(f>255){s[d]=f>>8;s[++d]=f&255}else{s[d]=f&255}}}else{if(m=r[t]){switch(m){case"utf8":if(h&&b){s=u(a,m);d=s.length;break}for(c=0;c<i;++c,++d){f=b?a.charCodeAt(c):a[c].charCodeAt(0);if(f<=127){s[d]=f}else{if(f<=2047){s[d]=192+(f>>6);s[++d]=128+(f&63)}else{if(f>=55296&&f<=57343){f-=55296;p=(b?a.charCodeAt(++c):a[++c].charCodeAt(0))-56320+(f<<10);s[d]=240+(p>>>18&7);s[++d]=144+(p>>>12&63);s[++d]=128+(p>>>6&63);s[++d]=128+(p&63)}else{s[d]=224+(f>>12);s[++d]=128+(f>>6&63);s[++d]=128+(f&63)}}}}break;case"ascii":if(h&&typeof a==="string"){s=u(a,m);d=s.length;break}for(c=0;c<i;++c,++d){f=b?a.charCodeAt(c):a[c].charCodeAt(0);if(f<=127){s[d]=f}else{throw new Error("bad ascii "+f)}}break;case"utf16le":if(h&&typeof a==="string"){s=u(a,m);d=s.length;break}for(c=0;c<i;++c){f=b?a.charCodeAt(c):a[c].charCodeAt(0);s[d++]=f&255;s[d++]=f>>8}break;case"utf16be":for(c=0;c<i;++c){f=b?a.charCodeAt(c):a[c].charCodeAt(0);s[d++]=f>>8;s[d++]=f&255}break;case"utf32le":for(c=0;c<i;++c){f=b?a.charCodeAt(c):a[c].charCodeAt(0);if(f>=55296&&f<=57343){f=65536+(f-55296<<10)+(a[++c].charCodeAt(0)-56320)}s[d++]=f&255;f>>=8;s[d++]=f&255;f>>=8;s[d++]=f&255;f>>=8;s[d++]=f&255}break;case"utf32be":for(c=0;c<i;++c){f=b?a.charCodeAt(c):a[c].charCodeAt(0);if(f>=55296&&f<=57343){f=65536+(f-55296<<10)+(a[++c].charCodeAt(0)-56320)}s[d+3]=f&255;f>>=8;s[d+2]=f&255;f>>=8;s[d+1]=f&255;f>>=8;s[d]=f&255;d+=4}break;case"utf7":for(c=0;c<i;c++){var w=b?a.charAt(c):a[c].charAt(0);if(w==="+"){s[d++]=43;s[d++]=45;continue}if(y.indexOf(w)>-1){s[d++]=w.charCodeAt(0);continue}var C=j(1201,w);s[d++]=43;s[d++]=T.charCodeAt(C[0]>>2);s[d++]=T.charCodeAt(((C[0]&3)<<4)+((C[1]||0)>>4));s[d++]=T.charCodeAt(((C[1]&15)<<2)+((C[2]||0)>>6));s[d++]=45}break;default:throw new Error("Unsupported magic: "+t+" "+r[t])}}else{throw new Error("Unrecognized CP: "+t)}}s=s.slice(0,d);if(!h){return n=="str"?s.map(l).join(""):s}if(!n||n==="buf"){return s}if(n!=="arr"){return s.toString("binary")
}return[].slice.call(s)};var D=function K(t,a){var n;if(n=f[t]){return n(a)}if(typeof a==="string"){return K(t,a.split("").map(c))}var i=a.length,s=new Array(i),o="",l=0,u=0,d=1,p=0,v=0;var g=e[t],m,b="";if(g&&(m=g.dec)){for(u=0;u<i;u+=d){d=2;o=m[(a[u]<<8)+a[u+1]];if(!o){d=1;o=m[a[u]]}if(!o){throw new Error("Unrecognized code: "+a[u]+" "+a[u+d-1]+" "+u+" "+d+" "+m[a[u]])}s[p++]=o}}else{if(b=r[t]){switch(b){case"utf8":if(i>=3&&a[0]==239){if(a[1]==187&&a[2]==191){u=3}}for(;u<i;u+=d){d=1;if(a[u]<128){l=a[u]}else{if(a[u]<224){l=(a[u]&31)*64+(a[u+1]&63);d=2}else{if(a[u]<240){l=((a[u]&15)<<12)+(a[u+1]&63)*64+(a[u+2]&63);d=3}else{l=(a[u]&7)*262144+((a[u+1]&63)<<12)+(a[u+2]&63)*64+(a[u+3]&63);d=4}}}if(l<65536){s[p++]=String.fromCharCode(l)}else{l-=65536;v=55296+(l>>10&1023);l=56320+(l&1023);s[p++]=String.fromCharCode(v);s[p++]=String.fromCharCode(l)}}break;case"ascii":if(h&&Buffer.isBuffer(a)){return a.toString(b)}for(u=0;u<i;u++){s[u]=String.fromCharCode(a[u])}p=i;break;case"utf16le":if(i>=2&&a[0]==255){if(a[1]==254){u=2}}if(h&&Buffer.isBuffer(a)){return a.toString(b)}d=2;for(;u+1<i;u+=d){s[p++]=String.fromCharCode((a[u+1]<<8)+a[u])}break;case"utf16be":if(i>=2&&a[0]==254){if(a[1]==255){u=2}}d=2;for(;u+1<i;u+=d){s[p++]=String.fromCharCode((a[u]<<8)+a[u+1])}break;case"utf32le":if(i>=4&&a[0]==255){if(a[1]==254&&a[2]===0&&a[3]===0){u=4}}d=4;for(;u<i;u+=d){l=(a[u+3]<<24)+(a[u+2]<<16)+(a[u+1]<<8)+a[u];if(l>65535){l-=65536;s[p++]=String.fromCharCode(55296+(l>>10&1023));s[p++]=String.fromCharCode(56320+(l&1023))}else{s[p++]=String.fromCharCode(l)}}break;case"utf32be":if(i>=4&&a[3]==255){if(a[2]==254&&a[1]===0&&a[0]===0){u=4}}d=4;for(;u<i;u+=d){l=(a[u]<<24)+(a[u+1]<<16)+(a[u+2]<<8)+a[u+3];if(l>65535){l-=65536;s[p++]=String.fromCharCode(55296+(l>>10&1023));s[p++]=String.fromCharCode(56320+(l&1023))}else{s[p++]=String.fromCharCode(l)}}break;case"utf7":if(i>=4&&a[0]==43&&a[1]==47&&a[2]==118){if(i>=5&&a[3]==56&&a[4]==45){u=5}else{if(a[3]==56||a[3]==57||a[3]==43||a[3]==47){u=4}}}for(;u<i;
u+=d){if(a[u]!==43){d=1;s[p++]=String.fromCharCode(a[u]);continue}d=1;if(a[u+1]===45){d=2;s[p++]="+";continue}while(String.fromCharCode(a[u+d]).match(/[A-Za-z0-9+\/]/)){d++}var w=0;if(a[u+d]===45){++d;w=1}var C=[];var E="";var k=0,S=0,A=0;var _=0,B=0,y=0,x=0;for(var I=1;I<d-w;){_=T.indexOf(String.fromCharCode(a[u+I++]));B=T.indexOf(String.fromCharCode(a[u+I++]));k=_<<2|B>>4;C.push(k);y=T.indexOf(String.fromCharCode(a[u+I++]));if(y===-1){break}S=(B&15)<<4|y>>2;C.push(S);x=T.indexOf(String.fromCharCode(a[u+I++]));if(x===-1){break}A=(y&3)<<6|x;if(x<64){C.push(A)}}E=K(1201,C);for(I=0;I<E.length;++I){s[p++]=E.charAt(I)}}break;default:throw new Error("Unsupported magic: "+t+" "+r[t])}}else{throw new Error("Unrecognized CP: "+t)}}return s.slice(0,p).join("")};var O=function Y(t){return !!(e[t]||r[t])};e.utils={decode:D,encode:R,hascp:O,magic:r,cache:B};return e});var XLSX={};function make_xlsx_lib(e){e.version="0.14.1";var r=1200,t=1252;if(typeof module!=="undefined"&&typeof require!=="undefined"){if(typeof cptable==="undefined"){if(typeof global!=="undefined"){global.cptable=undefined}else{if(typeof window!=="undefined"){window.cptable=undefined}}}}var a=[874,932,936,949,950];for(var n=0;n<=8;++n){a.push(1250+n)}var i={0:1252,1:65001,2:65001,77:10000,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969};var s=function(e){if(a.indexOf(e)==-1){return}t=i[0]=e};function f(){s(1252)}var o=function(e){r=e;s(e)};function l(){o(1200);f()}function c(e){var r=[];for(var t=0,a=e.length;t<a;++t){r[t]=e.charCodeAt(t)}return r}function h(e){var r=[];for(var t=0;t<e.length>>1;++t){r[t]=String.fromCharCode(e.charCodeAt(2*t)+(e.charCodeAt(2*t+1)<<8))}return r.join("")}function u(e){var r=[];for(var t=0;t<e.length>>1;++t){r[t]=String.fromCharCode(e.charCodeAt(2*t+1)+(e.charCodeAt(2*t)<<8))}return r.join("")}var d=function(e){var r=e.charCodeAt(0),t=e.charCodeAt(1);if(r==255&&t==254){return h(e.slice(2))}if(r==254&&t==255){return u(e.slice(2))
}if(r==65279){return e.slice(1)}return e};var p=function Hg(e){return String.fromCharCode(e)};if(typeof cptable!=="undefined"){o=function(e){r=e};d=function(e){if(e.charCodeAt(0)===255&&e.charCodeAt(1)===254){return cptable.utils.decode(1200,c(e.slice(2)))}return e};p=function Wg(e){if(r===1200){return String.fromCharCode(e)}return cptable.utils.decode(r,[e&255,e>>8])[0]}}var v=null;var g=true;var m=function Vg(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(r){var t="";var a=0,n=0,i=0,s=0,f=0,o=0,l=0;for(var c=0;c<r.length;){a=r.charCodeAt(c++);s=a>>2;n=r.charCodeAt(c++);f=(a&3)<<4|n>>4;i=r.charCodeAt(c++);o=(n&15)<<2|i>>6;l=i&63;if(isNaN(n)){o=l=64}else{if(isNaN(i)){l=64}}t+=e.charAt(s)+e.charAt(f)+e.charAt(o)+e.charAt(l)}return t},decode:function r(t){var a="";var n=0,i=0,s=0,f=0,o=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var h=0;h<t.length;){f=e.indexOf(t.charAt(h++));o=e.indexOf(t.charAt(h++));n=f<<2|o>>4;a+=String.fromCharCode(n);l=e.indexOf(t.charAt(h++));i=(o&15)<<4|l>>2;if(l!==64){a+=String.fromCharCode(i)}c=e.indexOf(t.charAt(h++));s=(l&3)<<6|c;if(c!==64){a+=String.fromCharCode(s)}}return a}}}();var b=typeof Buffer!=="undefined"&&typeof process!=="undefined"&&typeof process.versions!=="undefined"&&!!process.versions.node;var w=function(){};if(typeof Buffer!=="undefined"){var C=!Buffer.from;if(!C){try{Buffer.from("foo","utf8")}catch(E){C=true}}w=C?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer);if(!Buffer.alloc){Buffer.alloc=function(e){return new Buffer(e)}}if(!Buffer.allocUnsafe){Buffer.allocUnsafe=function(e){return new Buffer(e)}}}function k(e){return b?Buffer.alloc(e):new Array(e)}function S(e){return b?Buffer.allocUnsafe(e):new Array(e)}var A=function zg(e){if(b){return w(e,"binary")}return e.split("").map(function(e){return e.charCodeAt(0)&255})};function _(e){if(typeof ArrayBuffer==="undefined"){return A(e)}var r=new ArrayBuffer(e.length),t=new Uint8Array(r);for(var a=0;
a!=e.length;++a){t[a]=e.charCodeAt(a)&255}return r}function B(e){if(Array.isArray(e)){return e.map(xp).join("")}var r=[];for(var t=0;t<e.length;++t){r[t]=xp(e[t])}return r.join("")}function T(e){if(typeof Uint8Array==="undefined"){throw new Error("Unsupported")}return new Uint8Array(e)}function y(e){if(typeof ArrayBuffer=="undefined"){throw new Error("Unsupported")}if(e instanceof ArrayBuffer){return y(new Uint8Array(e))}var r=new Array(e.length);for(var t=0;t<e.length;++t){r[t]=e[t]}return r}var x=function(e){return[].concat.apply([],e)};var I=/\u0000/g,R=/[\u0001-\u0006]/g;var D={};var O=function Xg(e){e.version="0.10.2";function r(e){var r="",t=e.length-1;while(t>=0){r+=e.charAt(t--)}return r}function t(e,r){var t="";while(t.length<r){t+=e}return t}function a(e,r){var a=""+e;return a.length>=r?a:t("0",r-a.length)+a}function n(e,r){var a=""+e;return a.length>=r?a:t(" ",r-a.length)+a}function i(e,r){var a=""+e;return a.length>=r?a:a+t(" ",r-a.length)}function s(e,r){var a=""+Math.round(e);return a.length>=r?a:t("0",r-a.length)+a}function f(e,r){var a=""+e;return a.length>=r?a:t("0",r-a.length)+a}var o=Math.pow(2,32);function l(e,r){if(e>o||e<-o){return s(e,r)}var t=Math.round(e);return f(t,r)}function c(e,r){r=r||0;return e.length>=7+r&&(e.charCodeAt(r)|32)===103&&(e.charCodeAt(r+1)|32)===101&&(e.charCodeAt(r+2)|32)===110&&(e.charCodeAt(r+3)|32)===101&&(e.charCodeAt(r+4)|32)===114&&(e.charCodeAt(r+5)|32)===97&&(e.charCodeAt(r+6)|32)===108}var h=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]];var u=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function d(e){e[0]="General";e[1]="0";e[2]="0.00";e[3]="#,##0";e[4]="#,##0.00";e[9]="0%";e[10]="0.00%";e[11]="0.00E+00";e[12]="# ?/?";e[13]="# ??/??";
e[14]="m/d/yy";e[15]="d-mmm-yy";e[16]="d-mmm";e[17]="mmm-yy";e[18]="h:mm AM/PM";e[19]="h:mm:ss AM/PM";e[20]="h:mm";e[21]="h:mm:ss";e[22]="m/d/yy h:mm";e[37]="#,##0 ;(#,##0)";e[38]="#,##0 ;[Red](#,##0)";e[39]="#,##0.00;(#,##0.00)";e[40]="#,##0.00;[Red](#,##0.00)";e[45]="mm:ss";e[46]="[h]:mm:ss";e[47]="mmss.0";e[48]="##0.0E+0";e[49]="@";e[56]='"/ "hh""mm""ss" "';e[65535]="General"}var p={};d(p);function v(e,r,t){var a=e<0?-1:1;var n=e*a;var i=0,s=1,f=0;var o=1,l=0,c=0;var h=Math.floor(n);while(l<r){h=Math.floor(n);f=h*s+i;c=h*l+o;if(n-h<5e-8){break}n=1/(n-h);i=s;s=f;o=l;l=c}if(c>r){if(l>r){c=o;f=i}else{c=l;f=s}}if(!t){return[0,a*f,c]}var u=Math.floor(a*f/c);return[u,a*f-u*c,c]}function g(e,r,t){if(e>2958465||e<0){return null}var a=e|0,n=Math.floor(86400*(e-a)),i=0;var s=[];var f={D:a,T:n,u:86400*(e-a)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(f.u)<0.000001){f.u=0}if(r&&r.date1904){a+=1462}if(f.u>0.9999){f.u=0;if(++n==86400){f.T=n=0;++a;++f.D}}if(a===60){s=t?[1317,10,29]:[1900,2,29];i=3}else{if(a===0){s=t?[1317,8,29]:[1900,1,0];i=6}else{if(a>60){--a}var o=new Date(1900,0,1);o.setDate(o.getDate()+a-1);s=[o.getFullYear(),o.getMonth()+1,o.getDate()];i=o.getDay();if(a<60){i=(i+6)%7}if(t){i=A(o,s)}}}f.y=s[0];f.m=s[1];f.d=s[2];f.S=n%60;n=Math.floor(n/60);f.M=n%60;n=Math.floor(n/60);f.H=n;f.q=i;return f}e.parse_date_code=g;var m=new Date(1899,11,31,0,0,0);var b=m.getTime();var w=new Date(1900,2,1,0,0,0);function C(e,r){var t=e.getTime();if(r){t-=1461*24*60*60*1000}else{if(e>=w){t+=24*60*60*1000}}return(t-(b+(e.getTimezoneOffset()-m.getTimezoneOffset())*60000))/(24*60*60*1000)}function E(e){return e.toString(10)}e._general_int=E;var k=function M(){var e=/\.(\d*[1-9])0+$/,r=/\.0*$/,t=/\.(\d*[1-9])0+/,a=/\.0*[Ee]/,n=/(E[+-])(\d)$/;function i(e){var r=e<0?12:11;var t=o(e.toFixed(12));if(t.length<=r){return t}t=e.toPrecision(10);if(t.length<=r){return t}return e.toExponential(5)}function s(r){var t=r.toFixed(11).replace(e,".$1");if(t.length>(r<0?12:11)){t=r.toPrecision(6)}return t
}function f(e){for(var r=0;r!=e.length;++r){if((e.charCodeAt(r)|32)===101){return e.replace(t,".$1").replace(a,"E").replace("e","E").replace(n,"$10$2")}}return e}function o(t){return t.indexOf(".")>-1?t.replace(r,"").replace(e,".$1"):t}return function l(e){var r=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),t;if(r>=-4&&r<=-1){t=e.toPrecision(10+r)}else{if(Math.abs(r)<=9){t=i(e)}else{if(r===10){t=e.toFixed(10).substr(0,12)}else{t=s(e)}}}return o(f(t))}}();e._general_num=k;function S(e,r){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?E(e):k(e);case"undefined":return"";case"object":if(e==null){return""}if(e instanceof Date){return N(14,C(e,r&&r.date1904),r)}}throw new Error("unsupported value in General format: "+e)}e._general=S;function A(){return 0}function _(e,r,t,n){var i="",s=0,f=0,o=t.y,l,c=0;switch(e){case 98:o=t.y+543;case 121:switch(r.length){case 1:case 2:l=o%100;c=2;break;default:l=o%10000;c=4;break}break;case 109:switch(r.length){case 1:case 2:l=t.m;c=r.length;break;case 3:return u[t.m-1][1];case 5:return u[t.m-1][0];default:return u[t.m-1][2]}break;case 100:switch(r.length){case 1:case 2:l=t.d;c=r.length;break;case 3:return h[t.q][0];default:return h[t.q][1]}break;case 104:switch(r.length){case 1:case 2:l=1+(t.H+11)%12;c=r.length;break;default:throw"bad hour format: "+r}break;case 72:switch(r.length){case 1:case 2:l=t.H;c=r.length;break;default:throw"bad hour format: "+r}break;case 77:switch(r.length){case 1:case 2:l=t.M;c=r.length;break;default:throw"bad minute format: "+r}break;case 115:if(r!="s"&&r!="ss"&&r!=".0"&&r!=".00"&&r!=".000"){throw"bad second format: "+r}if(t.u===0&&(r=="s"||r=="ss")){return a(t.S,r.length)}if(n>=2){f=n===3?1000:100}else{f=n===1?10:1}s=Math.round(f*(t.S+t.u));if(s>=60*f){s=0}if(r==="s"){return s===0?"0":""+s/f}i=a(s,2+n);if(r==="ss"){return i.substr(0,2)}return"."+i.substr(2,r.length-1);case 90:switch(r){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;
break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+r}c=r.length===3?1:2;break;case 101:l=o;c=1}if(c>0){return a(l,c)}else{return""}}function B(e){var r=3;if(e.length<=r){return e}var t=e.length%r,a=e.substr(0,t);for(;t!=e.length;t+=r){a+=(a.length>0?",":"")+e.substr(t,r)}return a}var T=function U(){var e=/%/g;function s(r,a,n){var i=a.replace(e,""),s=a.length-i.length;return T(r,i,n*Math.pow(10,2*s))+t("%",s)}function f(e,r,t){var a=r.length-1;while(r.charCodeAt(a-1)===44){--a}return T(e,r.substr(0,a),t/Math.pow(10,3*(r.length-a)))}function o(e,r){var t;var a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(r==0){return"0.0E+0"}else{if(r<0){return"-"+o(e,-r)}}var n=e.indexOf(".");if(n===-1){n=e.indexOf("E")}var i=Math.floor(Math.log(r)*Math.LOG10E)%n;if(i<0){i+=n}t=(r/Math.pow(10,i)).toPrecision(a+1+(n+i)%n);if(t.indexOf("e")===-1){var s=Math.floor(Math.log(r)*Math.LOG10E);if(t.indexOf(".")===-1){t=t.charAt(0)+"."+t.substr(1)+"E+"+(s-t.length+i)}else{t+="E+"+(s-i)}while(t.substr(0,2)==="0."){t=t.charAt(0)+t.substr(2,n)+"."+t.substr(2+n);t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.")}t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,r,t,a){return r+t+a.substr(0,(n+i)%n)+"."+a.substr(i)+"E"})}else{t=r.toExponential(a)}if(e.match(/E\+00$/)&&t.match(/e[+-]\d$/)){t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)}if(e.match(/E\-/)&&t.match(/e\+/)){t=t.replace(/e\+/,"e")}return t.replace("e","E")}var c=/# (\?+)( ?)\/( ?)(\d+)/;function h(e,r,i){var s=parseInt(e[4],10),f=Math.round(r*s),o=Math.floor(f/s);var l=f-o*s,c=s;return i+(o===0?"":""+o)+" "+(l===0?t(" ",e[1].length+1+e[4].length):n(l,e[1].length)+e[2]+"/"+e[3]+a(c,e[4].length))}function u(e,r,a){return a+(r===0?"":""+r)+t(" ",e[1].length+2+e[4].length)}var d=/^#*0*\.([0#]+)/;var p=/\).*[0#]/;var g=/\(###\) ###\\?-####/;function m(e){var r="",t;for(var a=0;a!=e.length;++a){switch(t=e.charCodeAt(a)){case 35:break;
case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(t)}}return r}function b(e,r){var t=Math.pow(10,r);return""+Math.round(e*t)/t}function w(e,r){if(r<(""+Math.round((e-Math.floor(e))*Math.pow(10,r))).length){return 0}return Math.round((e-Math.floor(e))*Math.pow(10,r))}function C(e,r){if(r<(""+Math.round((e-Math.floor(e))*Math.pow(10,r))).length){return 1}return 0}function E(e){if(e<2147483647&&e>-2147483648){return""+(e>=0?e|0:e-1|0)}return""+Math.floor(e)}function k(e,u,S){if(e.charCodeAt(0)===40&&!u.match(p)){var A=u.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");if(S>=0){return k("n",A,S)}return"("+k("n",A,-S)+")"}if(u.charCodeAt(u.length-1)===44){return f(e,u,S)}if(u.indexOf("%")!==-1){return s(e,u,S)}if(u.indexOf("E")!==-1){return o(u,S)}if(u.charCodeAt(0)===36){return"$"+k(e,u.substr(u.charAt(1)==" "?2:1),S)}var _;var y,x,I,R=Math.abs(S),D=S<0?"-":"";if(u.match(/^00+$/)){return D+l(R,u.length)}if(u.match(/^[#?]+$/)){_=l(S,0);if(_==="0"){_=""}return _.length>u.length?_:m(u.substr(0,u.length-_.length))+_}if(y=u.match(c)){return h(y,R,D)}if(u.match(/^#+0+$/)){return D+l(R,u.length-u.indexOf("0"))}if(y=u.match(d)){_=b(S,y[1].length).replace(/^([^\.]+)$/,"$1."+m(y[1])).replace(/\.$/,"."+m(y[1])).replace(/\.(\d*)$/,function(e,r){return"."+r+t("0",m(y[1]).length-r.length)});return u.indexOf("0.")!==-1?_:_.replace(/^0\./,".")}u=u.replace(/^#+([0.])/,"$1");if(y=u.match(/^(0*)\.(#*)$/)){return D+b(R,y[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,y[1].length?"0.":".")}if(y=u.match(/^#{1,3},##0(\.?)$/)){return D+B(l(R,0))}if(y=u.match(/^#,##0\.([#0]*0)$/)){return S<0?"-"+k(e,u,-S):B(""+(Math.floor(S)+C(S,y[1].length)))+"."+a(w(S,y[1].length),y[1].length)}if(y=u.match(/^#,#*,#0/)){return k(e,u.replace(/^#,#*,/,""),S)}if(y=u.match(/^([0#]+)(\\?-([0#]+))+$/)){_=r(k(e,u.replace(/[\\-]/g,""),S));x=0;return r(r(u.replace(/\\/g,"")).replace(/[0#]/g,function(e){return x<_.length?_.charAt(x++):e==="0"?"0":""}))}if(u.match(g)){_=k(e,"##########",S);
return"("+_.substr(0,3)+") "+_.substr(3,3)+"-"+_.substr(6)}var O="";if(y=u.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/)){x=Math.min(y[4].length,7);I=v(R,Math.pow(10,x)-1,false);_=""+D;O=T("n",y[1],I[1]);if(O.charAt(O.length-1)==" "){O=O.substr(0,O.length-1)+"0"}_+=O+y[2]+"/"+y[3];O=i(I[2],x);if(O.length<y[4].length){O=m(y[4].substr(y[4].length-O.length))+O}_+=O;return _}if(y=u.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/)){x=Math.min(Math.max(y[1].length,y[4].length),7);I=v(R,Math.pow(10,x)-1,true);return D+(I[0]||(I[1]?"":"0"))+" "+(I[1]?n(I[1],x)+y[2]+"/"+y[3]+i(I[2],x):t(" ",2*x+1+y[2].length+y[3].length))}if(y=u.match(/^[#0?]+$/)){_=l(S,0);if(u.length<=_.length){return _}return m(u.substr(0,u.length-_.length))+_}if(y=u.match(/^([#0?]+)\.([#0]+)$/)){_=""+S.toFixed(Math.min(y[2].length,10)).replace(/([^0])0+$/,"$1");x=_.indexOf(".");var F=u.indexOf(".")-x,P=u.length-_.length-F;return m(u.substr(0,F)+_+u.substr(u.length-P))}if(y=u.match(/^00,000\.([#0]*0)$/)){x=w(S,y[1].length);return S<0?"-"+k(e,u,-S):B(E(S)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?a(0,3-e.length):"")+e})+"."+a(x,y[1].length)}switch(u){case"###,##0.00":return k(e,"#,##0.00",S);case"###,###":case"##,###":case"#,###":var N=B(l(R,0));return N!=="0"?D+N:"";case"###,###.00":return k(e,"###,##0.00",S).replace(/^0\./,".");case"#,###.00":return k(e,"#,##0.00",S).replace(/^0\./,".");default:}throw new Error("unsupported format |"+u+"|")}function S(e,r,t){var a=r.length-1;while(r.charCodeAt(a-1)===44){--a}return T(e,r.substr(0,a),t/Math.pow(10,3*(r.length-a)))}function A(r,a,n){var i=a.replace(e,""),s=a.length-i.length;return T(r,i,n*Math.pow(10,2*s))+t("%",s)}function _(e,r){var t;var a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(r==0){return"0.0E+0"}else{if(r<0){return"-"+_(e,-r)}}var n=e.indexOf(".");if(n===-1){n=e.indexOf("E")}var i=Math.floor(Math.log(r)*Math.LOG10E)%n;if(i<0){i+=n}t=(r/Math.pow(10,i)).toPrecision(a+1+(n+i)%n);if(!t.match(/[Ee]/)){var s=Math.floor(Math.log(r)*Math.LOG10E);
if(t.indexOf(".")===-1){t=t.charAt(0)+"."+t.substr(1)+"E+"+(s-t.length+i)}else{t+="E+"+(s-i)}t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,r,t,a){return r+t+a.substr(0,(n+i)%n)+"."+a.substr(i)+"E"})}else{t=r.toExponential(a)}if(e.match(/E\+00$/)&&t.match(/e[+-]\d$/)){t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)}if(e.match(/E\-/)&&t.match(/e\+/)){t=t.replace(/e\+/,"e")}return t.replace("e","E")}function y(e,s,f){if(e.charCodeAt(0)===40&&!s.match(p)){var o=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");if(f>=0){return y("n",o,f)}return"("+y("n",o,-f)+")"}if(s.charCodeAt(s.length-1)===44){return S(e,s,f)}if(s.indexOf("%")!==-1){return A(e,s,f)}if(s.indexOf("E")!==-1){return _(s,f)}if(s.charCodeAt(0)===36){return"$"+y(e,s.substr(s.charAt(1)==" "?2:1),f)}var l;var h,b,w,C=Math.abs(f),E=f<0?"-":"";if(s.match(/^00+$/)){return E+a(C,s.length)}if(s.match(/^[#?]+$/)){l=""+f;if(f===0){l=""}return l.length>s.length?l:m(s.substr(0,s.length-l.length))+l}if(h=s.match(c)){return u(h,C,E)}if(s.match(/^#+0+$/)){return E+a(C,s.length-s.indexOf("0"))}if(h=s.match(d)){l=(""+f).replace(/^([^\.]+)$/,"$1."+m(h[1])).replace(/\.$/,"."+m(h[1]));l=l.replace(/\.(\d*)$/,function(e,r){return"."+r+t("0",m(h[1]).length-r.length)});return s.indexOf("0.")!==-1?l:l.replace(/^0\./,".")}s=s.replace(/^#+([0.])/,"$1");if(h=s.match(/^(0*)\.(#*)$/)){return E+(""+C).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,h[1].length?"0.":".")}if(h=s.match(/^#{1,3},##0(\.?)$/)){return E+B(""+C)}if(h=s.match(/^#,##0\.([#0]*0)$/)){return f<0?"-"+y(e,s,-f):B(""+f)+"."+t("0",h[1].length)}if(h=s.match(/^#,#*,#0/)){return y(e,s.replace(/^#,#*,/,""),f)}if(h=s.match(/^([0#]+)(\\?-([0#]+))+$/)){l=r(y(e,s.replace(/[\\-]/g,""),f));b=0;return r(r(s.replace(/\\/g,"")).replace(/[0#]/g,function(e){return b<l.length?l.charAt(b++):e==="0"?"0":""}))}if(s.match(g)){l=y(e,"##########",f);return"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6)}var k="";if(h=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/)){b=Math.min(h[4].length,7);
w=v(C,Math.pow(10,b)-1,false);l=""+E;k=T("n",h[1],w[1]);if(k.charAt(k.length-1)==" "){k=k.substr(0,k.length-1)+"0"}l+=k+h[2]+"/"+h[3];k=i(w[2],b);if(k.length<h[4].length){k=m(h[4].substr(h[4].length-k.length))+k}l+=k;return l}if(h=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/)){b=Math.min(Math.max(h[1].length,h[4].length),7);w=v(C,Math.pow(10,b)-1,true);return E+(w[0]||(w[1]?"":"0"))+" "+(w[1]?n(w[1],b)+h[2]+"/"+h[3]+i(w[2],b):t(" ",2*b+1+h[2].length+h[3].length))}if(h=s.match(/^[#0?]+$/)){l=""+f;if(s.length<=l.length){return l}return m(s.substr(0,s.length-l.length))+l}if(h=s.match(/^([#0]+)\.([#0]+)$/)){l=""+f.toFixed(Math.min(h[2].length,10)).replace(/([^0])0+$/,"$1");b=l.indexOf(".");var x=s.indexOf(".")-b,I=s.length-l.length-x;return m(s.substr(0,x)+l+s.substr(s.length-I))}if(h=s.match(/^00,000\.([#0]*0)$/)){return f<0?"-"+y(e,s,-f):B(""+f).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?a(0,3-e.length):"")+e})+"."+a(0,h[1].length)}switch(s){case"###,###":case"##,###":case"#,###":var R=B(""+C);return R!=="0"?E+R:"";default:if(s.match(/\.[0#?]*$/)){return y(e,s.slice(0,s.lastIndexOf(".")),f)+m(s.slice(s.lastIndexOf(".")))}}throw new Error("unsupported format |"+s+"|")}return function x(e,r,t){return(t|0)===t?y(e,r,t):k(e,r,t)}}();function y(e){var r=[];var t=false;for(var a=0,n=0;a<e.length;++a){switch(e.charCodeAt(a)){case 34:t=!t;break;case 95:case 42:case 92:++a;break;case 59:r[r.length]=e.substr(n,a-n);n=a+1}}r[r.length]=e.substr(n);if(t===true){throw new Error("Format |"+e+"| unterminated string ")}return r}e._split=y;var x=/\[[HhMmSs]*\]/;function I(e){var r=0,t="",a="";while(r<e.length){switch(t=e.charAt(r)){case"G":if(c(e,r)){r+=6}r++;break;case'"':for(;e.charCodeAt(++r)!==34&&r<e.length;){++r}++r;break;case"\\":r+=2;break;case"_":r+=2;break;case"@":++r;break;case"B":case"b":if(e.charAt(r+1)==="1"||e.charAt(r+1)==="2"){return true}case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return true;
case"A":case"a":if(e.substr(r,3).toUpperCase()==="A/P"){return true}if(e.substr(r,5).toUpperCase()==="AM/PM"){return true}++r;break;case"[":a=t;while(e.charAt(r++)!=="]"&&r<e.length){a+=e.charAt(r)}if(a.match(x)){return true}break;case".":case"0":case"#":while(r<e.length&&("0#?.,E+-%".indexOf(t=e.charAt(++r))>-1||t=="\\"&&e.charAt(r+1)=="-"&&"0#".indexOf(e.charAt(r+2))>-1)){}break;case"?":while(e.charAt(++r)===t){}break;case"*":++r;if(e.charAt(r)==" "||e.charAt(r)=="*"){++r}break;case"(":case")":++r;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":while(r<e.length&&"0123456789".indexOf(e.charAt(++r))>-1){}break;case" ":++r;break;default:++r;break}}return false}e.is_date=I;function R(e,r,t,a){var n=[],i="",s=0,f="",o="t",l,h,u;var d="H";while(s<e.length){switch(f=e.charAt(s)){case"G":if(!c(e,s)){throw new Error("unrecognized character "+f+" in "+e)}n[n.length]={t:"G",v:"General"};s+=7;break;case'"':for(i="";(u=e.charCodeAt(++s))!==34&&s<e.length;){i+=String.fromCharCode(u)}n[n.length]={t:"t",v:i};++s;break;case"\\":var p=e.charAt(++s),v=p==="("||p===")"?p:"t";n[n.length]={t:v,v:p};++s;break;case"_":n[n.length]={t:"t",v:" "};s+=2;break;case"@":n[n.length]={t:"T",v:r};++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(l==null){l=g(r,t,e.charAt(s+1)==="2");if(l==null){return""}}n[n.length]={t:"X",v:e.substr(s,2)};o=f;s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":f=f.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(r<0){return""}if(l==null){l=g(r,t);if(l==null){return""}}i=f;while(++s<e.length&&e.charAt(s).toLowerCase()===f){i+=f}if(f==="m"&&o.toLowerCase()==="h"){f="M"}if(f==="h"){f=d}n[n.length]={t:f,v:i};o=f;break;case"A":case"a":var m={t:f,v:f};if(l==null){l=g(r,t)}if(e.substr(s,3).toUpperCase()==="A/P"){if(l!=null){m.v=l.H>=12?"P":"A"}m.t="T";d="h";s+=3}else{if(e.substr(s,5).toUpperCase()==="AM/PM"){if(l!=null){m.v=l.H>=12?"PM":"AM"}m.t="T";s+=5;d="h"}else{m.t="t";++s}}if(l==null&&m.t==="T"){return""
}n[n.length]=m;o=f;break;case"[":i=f;while(e.charAt(s++)!=="]"&&s<e.length){i+=e.charAt(s)}if(i.slice(-1)!=="]"){throw'unterminated "[" block: |'+i+"|"}if(i.match(x)){if(l==null){l=g(r,t);if(l==null){return""}}n[n.length]={t:"Z",v:i.toLowerCase()};o=i.charAt(1)}else{if(i.indexOf("$")>-1){i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$";if(!I(e)){n[n.length]={t:"t",v:i}}}}break;case".":if(l!=null){i=f;while(++s<e.length&&(f=e.charAt(s))==="0"){i+=f}n[n.length]={t:"s",v:i};break}case"0":case"#":i=f;while(++s<e.length&&"0#?.,E+-%".indexOf(f=e.charAt(s))>-1||f=="\\"&&e.charAt(s+1)=="-"&&s<e.length-2&&"0#".indexOf(e.charAt(s+2))>-1){i+=f}n[n.length]={t:"n",v:i};break;case"?":i=f;while(e.charAt(++s)===f){i+=f}n[n.length]={t:f,v:i};o=f;break;case"*":++s;if(e.charAt(s)==" "||e.charAt(s)=="*"){++s}break;case"(":case")":n[n.length]={t:a===1?"t":f,v:f};++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i=f;while(s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1){i+=e.charAt(s)}n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:f,v:f};++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(f)===-1){throw new Error("unrecognized character "+f+" in "+e)}n[n.length]={t:"t",v:f};++s;break}}var b=0,w=0,C;for(s=n.length-1,o="t";s>=0;--s){switch(n[s].t){case"h":case"H":n[s].t=d;o="h";if(b<1){b=1}break;case"s":if(C=n[s].v.match(/\.0+$/)){w=Math.max(w,C[0].length-1)}if(b<3){b=3}case"d":case"y":case"M":case"e":o=n[s].t;break;case"m":if(o==="s"){n[s].t="M";if(b<2){b=2}}break;case"X":break;case"Z":if(b<1&&n[s].v.match(/[Hh]/)){b=1}if(b<2&&n[s].v.match(/[Mm]/)){b=2}if(b<3&&n[s].v.match(/[Ss]/)){b=3}}}switch(b){case 0:break;case 1:if(l.u>=0.5){l.u=0;++l.S}if(l.S>=60){l.S=0;++l.M}if(l.M>=60){l.M=0;++l.H}break;case 2:if(l.u>=0.5){l.u=0;++l.S}if(l.S>=60){l.S=0;++l.M}break}var E="",k;for(s=0;s<n.length;++s){switch(n[s].t){case"t":case"T":case" ":case"D":break;case"X":n[s].v="";n[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[s].v=_(n[s].t.charCodeAt(0),n[s].v,l,w);
n[s].t="t";break;case"n":case"(":case"?":k=s+1;while(n[k]!=null&&((f=n[k].t)==="?"||f==="D"||(f===" "||f==="t")&&n[k+1]!=null&&(n[k+1].t==="?"||n[k+1].t==="t"&&n[k+1].v==="/")||n[s].t==="("&&(f===" "||f==="n"||f===")")||f==="t"&&(n[k].v==="/"||n[k].v===" "&&n[k+1]!=null&&n[k+1].t=="?"))){n[s].v+=n[k].v;n[k]={v:"",t:";"};++k}E+=n[s].v;s=k-1;break;case"G":n[s].t="t";n[s].v=S(r,t);break}}var A="",B,y;if(E.length>0){if(E.charCodeAt(0)==40){B=r<0&&E.charCodeAt(0)===45?-r:r;y=T("(",E,B)}else{B=r<0&&a>1?-r:r;y=T("n",E,B);if(B<0&&n[0]&&n[0].t=="t"){y=y.substr(1);n[0].v="-"+n[0].v}}k=y.length-1;var R=n.length;for(s=0;s<n.length;++s){if(n[s]!=null&&n[s].t!="t"&&n[s].v.indexOf(".")>-1){R=s;break}}var D=n.length;if(R===n.length&&y.indexOf("E")===-1){for(s=n.length-1;s>=0;--s){if(n[s]==null||"n?(".indexOf(n[s].t)===-1){continue}if(k>=n[s].v.length-1){k-=n[s].v.length;n[s].v=y.substr(k+1,n[s].v.length)}else{if(k<0){n[s].v=""}else{n[s].v=y.substr(0,k+1);k=-1}}n[s].t="t";D=s}if(k>=0&&D<n.length){n[D].v=y.substr(0,k+1)+n[D].v}}else{if(R!==n.length&&y.indexOf("E")===-1){k=y.indexOf(".")-1;for(s=R;s>=0;--s){if(n[s]==null||"n?(".indexOf(n[s].t)===-1){continue}h=n[s].v.indexOf(".")>-1&&s===R?n[s].v.indexOf(".")-1:n[s].v.length-1;A=n[s].v.substr(h+1);for(;h>=0;--h){if(k>=0&&(n[s].v.charAt(h)==="0"||n[s].v.charAt(h)==="#")){A=y.charAt(k--)+A}}n[s].v=A;n[s].t="t";D=s}if(k>=0&&D<n.length){n[D].v=y.substr(0,k+1)+n[D].v}k=y.indexOf(".")+1;for(s=R;s<n.length;++s){if(n[s]==null||"n?(".indexOf(n[s].t)===-1&&s!==R){continue}h=n[s].v.indexOf(".")>-1&&s===R?n[s].v.indexOf(".")+1:0;A=n[s].v.substr(0,h);for(;h<n[s].v.length;++h){if(k<y.length){A+=y.charAt(k++)}}n[s].v=A;n[s].t="t";D=s}}}}for(s=0;s<n.length;++s){if(n[s]!=null&&"n(?".indexOf(n[s].t)>-1){B=a>1&&r<0&&s>0&&n[s-1].v==="-"?-r:r;n[s].v=T(n[s].t,n[s].v,B);n[s].t="t"}}var O="";for(s=0;s!==n.length;++s){if(n[s]!=null){O+=n[s].v}}return O}e._eval=R;var D=/\[[=<>]/;var O=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function F(e,r){if(r==null){return false
}var t=parseFloat(r[2]);switch(r[1]){case"=":if(e==t){return true}break;case">":if(e>t){return true}break;case"<":if(e<t){return true}break;case"<>":if(e!=t){return true}break;case">=":if(e>=t){return true}break;case"<=":if(e<=t){return true}break}return false}function P(e,r){var t=y(e);var a=t.length,n=t[a-1].indexOf("@");if(a<4&&n>-1){--a}if(t.length>4){throw new Error("cannot find right format for |"+t.join("|")+"|")}if(typeof r!=="number"){return[4,t.length===4||n>-1?t[t.length-1]:"@"]}switch(t.length){case 1:t=n>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=n>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=n>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break;case 4:break}var i=r>0?t[0]:r<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1){return[a,i]}if(t[0].match(D)!=null||t[1].match(D)!=null){var s=t[0].match(O);var f=t[1].match(O);return F(r,s)?[a,t[0]]:F(r,f)?[a,t[1]]:[a,t[s!=null&&f!=null?2:1]]}return[a,i]}function N(e,r,t){if(t==null){t={}}var a="";switch(typeof e){case"string":if(e=="m/d/yy"&&t.dateNF){a=t.dateNF}else{a=e}break;case"number":if(e==14&&t.dateNF){a=t.dateNF}else{a=(t.table!=null?t.table:p)[e]}break}if(c(a,0)){return S(r,t)}if(r instanceof Date){r=C(r,t.date1904)}var n=P(a,r);if(c(n[1])){return S(r,t)}if(r===true){r="TRUE"}else{if(r===false){r="FALSE"}else{if(r===""||r==null){return""}}}return R(n[1],r,t,n[0])}function L(e,r){if(typeof r!="number"){r=+r||-1;for(var t=0;t<392;++t){if(p[t]==undefined){if(r<0){r=t}continue}if(p[t]==e){r=t;break}}if(r<0){r=391}}p[r]=e;return r}e.load=L;e._table=p;e.get_table=function H(){return p};e.load_table=function W(e){for(var r=0;r!=392;++r){if(e[r]!==undefined){L(e[r],r)}}};e.init_table=d;e.format=N};O(D);var F={"General Number":"General","General Date":D._table[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":D._table[15],"Short Date":D._table[14],"Long Time":D._table[19],"Medium Time":D._table[18],"Short Time":D._table[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:D._table[2],Standard:D._table[4],Percent:D._table[10],Scientific:D._table[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};
var P={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"};var N=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function L(e){var r=typeof e=="number"?D._table[e]:e;r=r.replace(N,"(\\d+)");return new RegExp("^"+r+"$")}function M(e,r,t){var a=-1,n=-1,i=-1,s=-1,f=-1,o=-1;(r.match(N)||[]).forEach(function(e,r){var l=parseInt(t[r+1],10);switch(e.toLowerCase().charAt(0)){case"y":a=l;break;case"d":i=l;break;case"h":s=l;break;case"s":o=l;break;case"m":if(s>=0){f=l}else{n=l}break}});if(o>=0&&f==-1&&n>=0){f=n;n=-1}var l=(""+(a>=0?a:(new Date).getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);if(l.length==7){l="0"+l}if(l.length==8){l="20"+l}var c=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2);if(s==-1&&f==-1&&o==-1){return l}if(a==-1&&n==-1&&i==-1){return c}return l+"T"+c}var U=true;var H;(function(e){e(H={})})(function(e){e.version="1.2.0";function r(){var e=0,r=new Array(256);for(var t=0;t!=256;++t){e=t;e=e&1?-306674912^e>>>1:e>>>1;e=e&1?-306674912^e>>>1:e>>>1;e=e&1?-306674912^e>>>1:e>>>1;
e=e&1?-306674912^e>>>1:e>>>1;e=e&1?-306674912^e>>>1:e>>>1;e=e&1?-306674912^e>>>1:e>>>1;e=e&1?-306674912^e>>>1:e>>>1;e=e&1?-306674912^e>>>1:e>>>1;r[t]=e}return typeof Int32Array!=="undefined"?new Int32Array(r):r}var t=r();function a(e,r){var a=r^-1,n=e.length-1;for(var i=0;i<n;){a=a>>>8^t[(a^e.charCodeAt(i++))&255];a=a>>>8^t[(a^e.charCodeAt(i++))&255]}if(i===n){a=a>>>8^t[(a^e.charCodeAt(i))&255]}return a^-1}function n(e,r){if(e.length>10000){return i(e,r)}var a=r^-1,n=e.length-3;for(var s=0;s<n;){a=a>>>8^t[(a^e[s++])&255];a=a>>>8^t[(a^e[s++])&255];a=a>>>8^t[(a^e[s++])&255];a=a>>>8^t[(a^e[s++])&255]}while(s<n+3){a=a>>>8^t[(a^e[s++])&255]}return a^-1}function i(e,r){var a=r^-1,n=e.length-7;for(var i=0;i<n;){a=a>>>8^t[(a^e[i++])&255];a=a>>>8^t[(a^e[i++])&255];a=a>>>8^t[(a^e[i++])&255];a=a>>>8^t[(a^e[i++])&255];a=a>>>8^t[(a^e[i++])&255];a=a>>>8^t[(a^e[i++])&255];a=a>>>8^t[(a^e[i++])&255];a=a>>>8^t[(a^e[i++])&255]}while(i<n+7){a=a>>>8^t[(a^e[i++])&255]}return a^-1}function s(e,r){var a=r^-1;for(var n=0,i=e.length,s,f;n<i;){s=e.charCodeAt(n++);if(s<128){a=a>>>8^t[(a^s)&255]}else{if(s<2048){a=a>>>8^t[(a^(192|s>>6&31))&255];a=a>>>8^t[(a^(128|s&63))&255]}else{if(s>=55296&&s<57344){s=(s&1023)+64;f=e.charCodeAt(n++)&1023;a=a>>>8^t[(a^(240|s>>8&7))&255];a=a>>>8^t[(a^(128|s>>2&63))&255];a=a>>>8^t[(a^(128|f>>6&15|(s&3)<<4))&255];a=a>>>8^t[(a^(128|f&63))&255]}else{a=a>>>8^t[(a^(224|s>>12&15))&255];a=a>>>8^t[(a^(128|s>>6&63))&255];a=a>>>8^t[(a^(128|s&63))&255]}}}}return a^-1}e.table=t;e.bstr=a;e.buf=n;e.str=s});var W=function Gg(){var e={};e.version="1.1.0";function r(e,r){var t=e.split("/"),a=r.split("/");for(var n=0,i=0,s=Math.min(t.length,a.length);n<s;++n){if(i=t[n].length-a[n].length){return i}if(t[n]!=a[n]){return t[n]<a[n]?-1:1}}return t.length-a.length}function t(e){if(e.charAt(e.length-1)=="/"){return e.slice(0,-1).indexOf("/")===-1?e:t(e.slice(0,-1))}var r=e.lastIndexOf("/");return r===-1?e:e.slice(0,r+1)}function a(e){if(e.charAt(e.length-1)=="/"){return a(e.slice(0,-1))}var r=e.lastIndexOf("/");
return r===-1?e:e.slice(r+1)}function n(e,r){if(typeof r==="string"){r=new Date(r)}var t=r.getHours();t=t<<6|r.getMinutes();t=t<<5|r.getSeconds()>>>1;e._W(2,t);var a=r.getFullYear()-1980;a=a<<4|r.getMonth()+1;a=a<<5|r.getDate();e._W(2,a)}function i(e){var r=e._R(2)&65535;var t=e._R(2)&65535;var a=new Date;var n=t&31;t>>>=5;var i=t&15;t>>>=4;a.setMilliseconds(0);a.setFullYear(t+1980);a.setMonth(i-1);a.setDate(n);var s=r&31;r>>>=5;var f=r&63;r>>>=6;a.setHours(r);a.setMinutes(f);a.setSeconds(s<<1);return a}function s(e){zr(e,0);var r={};var t=0;while(e.l<=e.length-4){var a=e._R(2);var n=e._R(2),i=e.l+n;var s={};switch(a){case 21589:t=e._R(1);if(t&1){s.mtime=e._R(4)}if(n>5){if(t&2){s.atime=e._R(4)}if(t&4){s.ctime=e._R(4)}}if(s.mtime){s.mt=new Date(s.mtime*1000)}break}e.l=i;r[a]=s}return r}var f;function o(){return f||(f=require("fs"))}function l(e,r){if(e[0]==80&&e[1]==75){return Be(e,r)}if(e.length<512){throw new Error("CFB file size "+e.length+" < 512")}var t=3;var a=512;var n=0;var i=0;var s=0;var f=0;var o=0;var l=[];var p=e.slice(0,512);zr(p,0);var g=c(p);t=g[0];switch(t){case 3:a=512;break;case 4:a=4096;break;case 0:if(g[1]==0){return Be(e,r)}default:throw new Error("Major Version: Expected 3 or 4 saw "+t)}if(a!==512){p=e.slice(0,a);zr(p,28)}var m=e.slice(0,a);h(p,t);var b=p._R(4,"i");if(t===3&&b!==0){throw new Error("# Directory Sectors: Expected 0 saw "+b)}p.l+=4;s=p._R(4,"i");p.l+=4;p.chk("00100000","Mini Stream Cutoff Size: ");f=p._R(4,"i");n=p._R(4,"i");o=p._R(4,"i");i=p._R(4,"i");for(var E=-1,k=0;k<109;++k){E=p._R(4,"i");if(E<0){break}l[k]=E}var S=u(e,a);v(o,i,S,a,l);var A=w(S,s,l,a);A[s].name="!Directory";if(n>0&&f!==N){A[f].name="!MiniFAT"}A[l[0]].name="!FAT";A.fat_addrs=l;A.ssz=a;var _={},B=[],T=[],y=[];C(s,A,S,B,n,_,T,f);d(T,y,B);B.shift();var x={FileIndex:T,FullPaths:y};if(r&&r.raw){x.raw={header:m,sectors:S}}return x}function c(e){if(e[e.l]==80&&e[e.l+1]==75){return[0,0]}e.chk(L,"Header Signature: ");e.chk(U,"CLSID: ");var r=e._R(2,"u");return[e._R(2,"u"),r]
}function h(e,r){var t=9;e.l+=2;switch(t=e._R(2)){case 9:if(r!=3){throw new Error("Sector Shift: Expected 9 saw "+t)}break;case 12:if(r!=4){throw new Error("Sector Shift: Expected 12 saw "+t)}break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+t)}e.chk("0600","Mini Sector Shift: ");e.chk("000000000000","Reserved: ")}function u(e,r){var t=Math.ceil(e.length/r)-1;var a=[];for(var n=1;n<t;++n){a[n-1]=e.slice(n*r,(n+1)*r)}a[t-1]=e.slice(t*r);return a}function d(e,r,t){var a=0,n=0,i=0,s=0,f=0,o=t.length;var l=[],c=[];for(;a<o;++a){l[a]=c[a]=a;r[a]=t[a]}for(;f<c.length;++f){a=c[f];n=e[a].L;i=e[a].R;s=e[a].C;if(l[a]===a){if(n!==-1&&l[n]!==n){l[a]=l[n]}if(i!==-1&&l[i]!==i){l[a]=l[i]}}if(s!==-1){l[s]=a}if(n!==-1){l[n]=l[a];if(c.lastIndexOf(n)<f){c.push(n)}}if(i!==-1){l[i]=l[a];if(c.lastIndexOf(i)<f){c.push(i)}}}for(a=1;a<o;++a){if(l[a]===a){if(i!==-1&&l[i]!==i){l[a]=l[i]}else{if(n!==-1&&l[n]!==n){l[a]=l[n]}}}}for(a=1;a<o;++a){if(e[a].type===0){continue}f=l[a];if(f===0){r[a]=r[0]+"/"+r[a]}else{while(f!==0&&f!==l[f]){r[a]=r[f]+"/"+r[a];f=l[f]}}l[a]=0}r[0]+="/";for(a=1;a<o;++a){if(e[a].type!==2){r[a]+="/"}}}function p(e,r,t){var a=e.start,n=e.size;var i=[];var s=a;while(t&&n>0&&s>=0){i.push(r.slice(s*P,s*P+P));n-=P;s=Pr(t,s*4)}if(i.length===0){return Gr(0)}return x(i).slice(0,e.size)}function v(e,r,t,a,n){var i=N;if(e===N){if(r!==0){throw new Error("DIFAT chain shorter than expected")}}else{if(e!==-1){var s=t[e],f=(a>>>2)-1;if(!s){return}for(var o=0;o<f;++o){if((i=Pr(s,o*4))===N){break}n.push(i)}v(Pr(s,a-4),r-1,t,a,n)}}}function g(e,r,t,a,n){var i=[],s=[];if(!n){n=[]}var f=a-1,o=0,l=0;for(o=r;o>=0;){n[o]=true;i[i.length]=o;s.push(e[o]);var c=t[Math.floor(o*4/a)];l=o*4&f;if(a<4+l){throw new Error("FAT boundary crossed: "+o+" 4 "+a)}if(!e[c]){break}o=Pr(e[c],l)}return{nodes:i,data:cr([s])}}function w(e,r,t,a){var n=e.length,i=[];var s=[],f=[],o=[];var l=a-1,c=0,h=0,u=0,d=0;for(c=0;c<n;++c){f=[];u=c+r;if(u>=n){u-=n}if(s[u]){continue}o=[];for(h=u;h>=0;){s[h]=true;f[f.length]=h;
o.push(e[h]);var p=t[Math.floor(h*4/a)];d=h*4&l;if(a<4+d){throw new Error("FAT boundary crossed: "+h+" 4 "+a)}if(!e[p]){break}h=Pr(e[p],d)}i[u]={nodes:f,data:cr([o])}}return i}function C(e,r,t,a,n,i,s,f){var o=0,l=a.length?2:0;var c=r[e].data;var h=0,u=0,d;for(;h<c.length;h+=128){var v=c.slice(h,h+128);zr(v,64);u=v._R(2);d=ur(v,0,u-l);a.push(d);var m={name:d,type:v._R(1),color:v._R(1),L:v._R(4,"i"),R:v._R(4,"i"),C:v._R(4,"i"),clsid:v._R(16),state:v._R(4,"i"),start:0,size:0};var b=v._R(2)+v._R(2)+v._R(2)+v._R(2);if(b!==0){m.ct=E(v,v.l-8)}var w=v._R(2)+v._R(2)+v._R(2)+v._R(2);if(w!==0){m.mt=E(v,v.l-8)}m.start=v._R(4,"i");m.size=v._R(4,"i");if(m.size<0&&m.start<0){m.size=m.type=0;m.start=N;m.name=""}if(m.type===5){o=m.start;if(n>0&&o!==N){r[o].name="!StreamData"}}else{if(m.size>=4096){m.storage="fat";if(r[m.start]===undefined){r[m.start]=g(t,m.start,r.fat_addrs,r.ssz)}r[m.start].name=m.name;m.content=r[m.start].data.slice(0,m.size)}else{m.storage="minifat";if(m.size<0){m.size=0}else{if(o!==N&&m.start!==N&&r[o]){m.content=p(m,r[o].data,(r[f]||{}).data)}}}}if(m.content){zr(m.content,0)}i[d]=m;s.push(m)}}function E(e,r){return new Date((Fr(e,r+4)/10000000*Math.pow(2,32)+Fr(e,r)/10000000-11644473600)*1000)}function _(e,r){o();return l(f.readFileSync(e),r)}function B(e,r){switch(r&&r.type||"base64"){case"file":return _(e,r);case"base64":return l(A(m.decode(e)),r);case"binary":return l(A(e),r)}return l(e,r)}function T(e,r){var t=r||{},a=t.root||"Root Entry";if(!e.FullPaths){e.FullPaths=[]}if(!e.FileIndex){e.FileIndex=[]}if(e.FullPaths.length!==e.FileIndex.length){throw new Error("inconsistent CFB structure")}if(e.FullPaths.length===0){e.FullPaths[0]=a+"/";e.FileIndex[0]={name:a,type:5}}if(t.CLSID){e.FileIndex[0].clsid=t.CLSID}y(e)}function y(e){var r="Sh33tJ5";if(W.find(e,"/"+r)){return}var t=Gr(4);t[0]=55;t[1]=t[3]=50;t[2]=54;e.FileIndex.push({name:r,type:2,content:t,size:4,L:69,R:69,C:69});e.FullPaths.push(e.FullPaths[0]+r);D(e)}function D(e,n){T(e);var i=false,s=false;for(var f=e.FullPaths.length-1;
f>=0;--f){var o=e.FileIndex[f];switch(o.type){case 0:if(s){i=true}else{e.FileIndex.pop();e.FullPaths.pop()}break;case 1:case 2:case 5:s=true;if(isNaN(o.R*o.L*o.C)){i=true}if(o.R>-1&&o.L>-1&&o.R==o.L){i=true}break;default:i=true;break}}if(!i&&!n){return}var l=new Date(1987,1,19),c=0;var h=[];for(f=0;f<e.FullPaths.length;++f){if(e.FileIndex[f].type===0){continue}h.push([e.FullPaths[f],e.FileIndex[f]])}for(f=0;f<h.length;++f){var u=t(h[f][0]);s=false;for(c=0;c<h.length;++c){if(h[c][0]===u){s=true}}if(!s){h.push([u,{name:a(u).replace("/",""),type:1,clsid:U,ct:l,mt:l,content:null}])}}h.sort(function(e,t){return r(e[0],t[0])});e.FullPaths=[];e.FileIndex=[];for(f=0;f<h.length;++f){e.FullPaths[f]=h[f][0];e.FileIndex[f]=h[f][1]}for(f=0;f<h.length;++f){var d=e.FileIndex[f];var p=e.FullPaths[f];d.name=a(p).replace("/","");d.L=d.R=d.C=-(d.color=1);d.size=d.content?d.content.length:0;d.start=0;d.clsid=d.clsid||U;if(f===0){d.C=h.length>1?1:-1;d.size=0;d.type=5}else{if(p.slice(-1)=="/"){for(c=f+1;c<h.length;++c){if(t(e.FullPaths[c])==p){break}}d.C=c>=h.length?-1:c;for(c=f+1;c<h.length;++c){if(t(e.FullPaths[c])==t(p)){break}}d.R=c>=h.length?-1:c;d.type=1}else{if(t(e.FullPaths[f+1]||"")==t(p)){d.R=f+1}d.type=2}}}}function O(e,r){var t=r||{};D(e);if(t.fileType=="zip"){return ye(e,t)}var a=function(e){var r=0,t=0;for(var a=0;a<e.FileIndex.length;++a){var n=e.FileIndex[a];if(!n.content){continue}var i=n.content.length;if(i>0){if(i<4096){r+=i+63>>6}else{t+=i+511>>9}}}var s=e.FullPaths.length+3>>2;var f=r+7>>3;var o=r+127>>7;var l=f+t+s+o;var c=l+127>>7;var h=c<=109?0:Math.ceil((c-109)/127);while(l+c+h+127>>7>c){h=++c<=109?0:Math.ceil((c-109)/127)}var u=[1,h,c,o,s,t,r,0];e.FileIndex[0].size=r<<6;u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3);return u}(e);var n=Gr(a[7]<<9);var i=0,s=0;for(i=0;i<8;++i){n._W(1,M[i])}for(i=0;i<8;++i){n._W(2,0)}n._W(2,62);n._W(2,3);n._W(2,65534);n._W(2,9);n._W(2,6);for(i=0;i<3;++i){n._W(2,0)}n._W(4,0);n._W(4,a[2]);n._W(4,a[0]+a[1]+a[2]+a[3]-1);
n._W(4,0);n._W(4,1<<12);n._W(4,a[3]?a[0]+a[1]+a[2]-1:N);n._W(4,a[3]);n._W(-4,a[1]?a[0]-1:N);n._W(4,a[1]);for(i=0;i<109;++i){n._W(-4,i<a[2]?a[1]+i:-1)}if(a[1]){for(s=0;s<a[1];++s){for(;i<236+s*127;++i){n._W(-4,i<a[2]?a[1]+i:-1)}n._W(-4,s===a[1]-1?N:s+1)}}var f=function(e){for(s+=e;i<s-1;++i){n._W(-4,i+1)}if(e){++i;n._W(-4,N)}};s=i=0;for(s+=a[1];i<s;++i){n._W(-4,V.DIFSECT)}for(s+=a[2];i<s;++i){n._W(-4,V.FATSECT)}f(a[3]);f(a[4]);var o=0,l=0;var c=e.FileIndex[0];for(;o<e.FileIndex.length;++o){c=e.FileIndex[o];if(!c.content){continue}l=c.content.length;if(l<4096){continue}c.start=s;f(l+511>>9)}f(a[6]+7>>3);while(n.l&511){n._W(-4,V.ENDOFCHAIN)}s=i=0;for(o=0;o<e.FileIndex.length;++o){c=e.FileIndex[o];if(!c.content){continue}l=c.content.length;if(!l||l>=4096){continue}c.start=s;f(l+63>>6)}while(n.l&511){n._W(-4,V.ENDOFCHAIN)}for(i=0;i<a[4]<<2;++i){var h=e.FullPaths[i];if(!h||h.length===0){for(o=0;o<17;++o){n._W(4,0)}for(o=0;o<3;++o){n._W(4,-1)}for(o=0;o<12;++o){n._W(4,0)}continue}c=e.FileIndex[i];if(i===0){c.start=c.size?c.start-1:N}var u=i===0&&t.root||c.name;l=2*(u.length+1);n._W(64,u,"utf16le");n._W(2,l);n._W(1,c.type);n._W(1,c.color);n._W(-4,c.L);n._W(-4,c.R);n._W(-4,c.C);if(!c.clsid){for(o=0;o<4;++o){n._W(4,0)}}else{n._W(16,c.clsid,"hex")}n._W(4,c.state||0);n._W(4,0);n._W(4,0);n._W(4,0);n._W(4,0);n._W(4,c.start);n._W(4,c.size);n._W(4,0)}for(i=1;i<e.FileIndex.length;++i){c=e.FileIndex[i];if(c.size>=4096){n.l=c.start+1<<9;for(o=0;o<c.size;++o){n._W(1,c.content[o])}for(;o&511;++o){n._W(1,0)}}}for(i=1;i<e.FileIndex.length;++i){c=e.FileIndex[i];if(c.size>0&&c.size<4096){for(o=0;o<c.size;++o){n._W(1,c.content[o])}for(;o&63;++o){n._W(1,0)}}}while(n.l<n.length){n._W(1,0)}return n}function F(e,r){var t=e.FullPaths.map(function(e){return e.toUpperCase()});var a=t.map(function(e){var r=e.split("/");return r[r.length-(e.slice(-1)=="/"?2:1)]});var n=false;if(r.charCodeAt(0)===47){n=true;r=t[0].slice(0,-1)+r}else{n=r.indexOf("/")!==-1}var i=r.toUpperCase();var s=n===true?t.indexOf(i):a.indexOf(i);
if(s!==-1){return e.FileIndex[s]}var f=!i.match(R);i=i.replace(I,"");if(f){i=i.replace(R,"!")}for(s=0;s<t.length;++s){if((f?t[s].replace(R,"!"):t[s]).replace(I,"")==i){return e.FileIndex[s]}if((f?a[s].replace(R,"!"):a[s]).replace(I,"")==i){return e.FileIndex[s]}}return null}var P=64;var N=-2;var L="d0cf11e0a1b11ae1";var M=[208,207,17,224,161,177,26,225];var U="00000000000000000000000000000000";var V={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:N,FREESECT:-1,HEADER_SIGNATURE:L,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:U,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function z(e,r,t){o();var a=O(e,t);f.writeFileSync(r,a)}function X(e){var r=new Array(e.length);for(var t=0;t<e.length;++t){r[t]=String.fromCharCode(e[t])}return r.join("")}function G(e,r){var t=O(e,r);switch(r&&r.type){case"file":o();f.writeFileSync(r.filename,t);return t;case"binary":return X(t);case"base64":return m.encode(X(t))}return t}var j;function K(e){try{var r=e.InflateRaw;var t=new r;t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag);if(t.bytesRead){j=e}else{throw new Error("zlib does not expose bytesRead")}}catch(a){console.error("cannot use native zlib: "+(a.message||a))}}function Y(e,r){if(!j){return Ae(e,r)}var t=j.InflateRaw;var a=new t;var n=a._processChunk(e.slice(e.l),a._finishFlushFlag);e.l+=a.bytesRead;return n}function $(e){return j?j.deflateRawSync(e):ue(e)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var Q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];var J=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function q(e){var r=(e<<1|e<<11)&139536|(e<<5|e<<15)&558144;return(r>>16|r>>8|r)&255}var ee=typeof Uint8Array!=="undefined";var re=ee?new Uint8Array(1<<8):[];for(var te=0;te<1<<8;++te){re[te]=q(te)}function ae(e,r){var t=re[e&255];if(r<=8){return t>>>8-r}t=t<<8|re[e>>8&255];if(r<=16){return t>>>16-r}t=t<<8|re[e>>16&255];
return t>>>24-r}function ne(e,r){var t=r&7,a=r>>>3;return(e[a]|(t<=6?0:e[a+1]<<8))>>>t&3}function ie(e,r){var t=r&7,a=r>>>3;return(e[a]|(t<=5?0:e[a+1]<<8))>>>t&7}function se(e,r){var t=r&7,a=r>>>3;return(e[a]|(t<=4?0:e[a+1]<<8))>>>t&15}function fe(e,r){var t=r&7,a=r>>>3;return(e[a]|(t<=3?0:e[a+1]<<8))>>>t&31}function oe(e,r){var t=r&7,a=r>>>3;return(e[a]|(t<=1?0:e[a+1]<<8))>>>t&127}function le(e,r,t){var a=r&7,n=r>>>3,i=(1<<t)-1;var s=e[n]>>>a;if(t<8-a){return s&i}s|=e[n+1]<<8-a;if(t<16-a){return s&i}s|=e[n+2]<<16-a;if(t<24-a){return s&i}s|=e[n+3]<<24-a;return s&i}function ce(e,r){var t=e.length,a=2*t>r?2*t:r+5,n=0;if(t>=r){return e}if(b){var i=S(a);if(e.copy){e.copy(i)}else{for(;n<e.length;++n){i[n]=e[n]}}return i}else{if(ee){var s=new Uint8Array(a);if(s.set){s.set(e)}else{for(;n<e.length;++n){s[n]=e[n]}}return s}}e.length=a;return e}function he(e){var r=new Array(e);for(var t=0;t<e;++t){r[t]=0}return r}var ue=function(){var e=function(){return function e(r,t){var a=0;while(a<r.length){var n=Math.min(65535,r.length-a);var i=a+n==r.length;t._W(1,+i);t._W(2,n);t._W(2,~n&65535);while(n-->0){t[t.l++]=r[a++]}}return t.l}}();return function(r){var t=Gr(50+Math.floor(r.length*1.1));var a=e(r,t);return t.slice(0,a)}}();function de(e,r,t){var a=1,n=0,i=0,s=0,f=0,o=e.length;var l=ee?new Uint16Array(32):he(32);for(i=0;i<32;++i){l[i]=0}for(i=o;i<t;++i){e[i]=0}o=e.length;var c=ee?new Uint16Array(o):he(o);for(i=0;i<o;++i){l[n=e[i]]++;if(a<n){a=n}c[i]=0}l[0]=0;for(i=1;i<=a;++i){l[i+16]=f=f+l[i-1]<<1}for(i=0;i<o;++i){f=e[i];if(f!=0){c[i]=l[f+16]++}}var h=0;for(i=0;i<o;++i){h=e[i];if(h!=0){f=ae(c[i],a)>>a-h;for(s=(1<<a+4-h)-1;s>=0;--s){r[f|s<<h]=h&15|i<<4}}}return a}var pe=ee?new Uint16Array(512):he(512);var ve=ee?new Uint16Array(32):he(32);if(!ee){for(var ge=0;ge<512;++ge){pe[ge]=0}for(ge=0;ge<32;++ge){ve[ge]=0}}(function(){var e=[];var r=0;for(;r<32;r++){e.push(5)}de(e,ve,32);var t=[];r=0;for(;r<=143;r++){t.push(8)}for(;r<=255;r++){t.push(9)}for(;r<=279;r++){t.push(7)}for(;r<=287;
r++){t.push(8)}de(t,pe,288)})();var me=ee?new Uint16Array(32768):he(32768);var be=ee?new Uint16Array(32768):he(32768);var we=ee?new Uint16Array(128):he(128);var Ce=1,Ee=1;function ke(e,r){var t=fe(e,r)+257;r+=5;var a=fe(e,r)+1;r+=5;var n=se(e,r)+4;r+=4;var i=0;var s=ee?new Uint8Array(19):he(19);var f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var o=1;var l=ee?new Uint8Array(8):he(8);var c=ee?new Uint8Array(8):he(8);var h=s.length;for(var u=0;u<n;++u){s[Z[u]]=i=ie(e,r);if(o<i){o=i}l[i]++;r+=3}var d=0;l[0]=0;for(u=1;u<=o;++u){c[u]=d=d+l[u-1]<<1}for(u=0;u<h;++u){if((d=s[u])!=0){f[u]=c[d]++}}var p=0;for(u=0;u<h;++u){p=s[u];if(p!=0){d=re[f[u]]>>8-p;for(var v=(1<<7-p)-1;v>=0;--v){we[d|v<<p]=p&7|u<<3}}}var g=[];o=1;for(;g.length<t+a;){d=we[oe(e,r)];r+=d&7;switch(d>>>=3){case 16:i=3+ne(e,r);r+=2;d=g[g.length-1];while(i-->0){g.push(d)}break;case 17:i=3+ie(e,r);r+=3;while(i-->0){g.push(0)}break;case 18:i=11+oe(e,r);r+=7;while(i-->0){g.push(0)}break;default:g.push(d);if(o<d){o=d}break}}var m=g.slice(0,t),b=g.slice(t);for(u=t;u<286;++u){m[u]=0}for(u=a;u<30;++u){b[u]=0}Ce=de(m,me,286);Ee=de(b,be,30);return r}function Se(e,r){if(e[0]==3&&!(e[1]&3)){return[k(r),2]}var t=0;var a=0;var n=S(r?r:1<<18);var i=0;var s=n.length>>>0;var f=0,o=0;while((a&1)==0){a=ie(e,t);t+=3;if(a>>>1==0){if(t&7){t+=8-(t&7)}var l=e[t>>>3]|e[(t>>>3)+1]<<8;t+=32;if(!r&&s<i+l){n=ce(n,i+l);s=n.length}if(typeof e.copy==="function"){e.copy(n,i,t>>>3,(t>>>3)+l);i+=l;t+=8*l}else{while(l-->0){n[i++]=e[t>>>3];t+=8}}continue}else{if(a>>>1==1){f=9;o=5}else{t=ke(e,t);f=Ce;o=Ee}}if(!r&&s<i+32767){n=ce(n,i+32767);s=n.length}for(;;){var c=le(e,t,f);var h=a>>>1==1?pe[c]:me[c];t+=h&15;h>>>=4;if((h>>>8&255)===0){n[i++]=h}else{if(h==256){break}else{h-=257;var u=h<8?0:h-4>>2;if(u>5){u=0}var d=i+Q[h];if(u>0){d+=le(e,t,u);t+=u}c=le(e,t,o);h=a>>>1==1?ve[c]:be[c];t+=h&15;h>>>=4;var p=h<4?0:h-2>>1;var v=J[h];if(p>0){v+=le(e,t,p);t+=p}if(!r&&s<d){n=ce(n,d);s=n.length}while(i<d){n[i]=n[i-v];++i}}}}}return[r?n:n.slice(0,i),t+7>>>3]}function Ae(e,r){var t=e.slice(e.l||0);
var a=Se(t,r);e.l+=a[1];return a[0]}function _e(e,r){if(e){if(typeof console!=="undefined"){console.error(r)}}else{throw new Error(r)}}function Be(e,r){var t=e;zr(t,0);var a=[],n=[];var i={FileIndex:a,FullPaths:n};T(i,{root:r.root});var f=t.length-4;while((t[f]!=80||t[f+1]!=75||t[f+2]!=5||t[f+3]!=6)&&f>=0){--f}t.l=f+4;t.l+=4;var o=t._R(2);t.l+=6;var l=t._R(4);t.l=l;for(f=0;f<o;++f){t.l+=20;var c=t._R(4);var h=t._R(4);var u=t._R(2);var d=t._R(2);var p=t._R(2);t.l+=8;var v=t._R(4);var g=s(t.slice(t.l+u,t.l+u+d));t.l+=u+d+p;var m=t.l;t.l=v+4;Te(t,c,h,i,g);t.l=m}return i}function Te(e,r,t,a,n){e.l+=2;var f=e._R(2);var o=e._R(2);var l=i(e);if(f&8257){throw new Error("Unsupported ZIP encryption")}var c=e._R(4);var h=e._R(4);var u=e._R(4);var d=e._R(2);var p=e._R(2);var v="";for(var g=0;g<d;++g){v+=String.fromCharCode(e[e.l++])}if(p){var m=s(e.slice(e.l,e.l+p));if((m[21589]||{}).mt){l=m[21589].mt}if(((n||{})[21589]||{}).mt){l=n[21589].mt}}e.l+=p;var b=e.slice(e.l,e.l+h);switch(o){case 8:b=Y(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var w=false;if(f&8){c=e._R(4);if(c==134695760){c=e._R(4);w=true}h=e._R(4);u=e._R(4)}if(h!=r){_e(w,"Bad compressed size: "+r+" != "+h)}if(u!=t){_e(w,"Bad uncompressed size: "+t+" != "+u)}var C=H.buf(b,0);if(c!=C){_e(w,"Bad CRC32 checksum: "+c+" != "+C)}Ie(a,v,b,{unsafe:true,mt:l})}function ye(e,r){var t=r||{};var a=[],i=[];var s=Gr(1);var f=t.compression?8:0,o=0;var l=false;if(l){o|=8}var c=0,h=0;var u=0,d=0;var p=e.FullPaths[0],v=p,g=e.FileIndex[0];var m=[];var b=0;for(c=1;c<e.FullPaths.length;++c){v=e.FullPaths[c].slice(p.length);g=e.FileIndex[c];if(!g.size||!g.content||v=="Sh33tJ5"){continue}var w=u;var C=Gr(v.length);for(h=0;h<v.length;++h){C._W(1,v.charCodeAt(h)&127)}C=C.slice(0,C.l);m[d]=H.buf(g.content,0);var E=g.content;if(f==8){E=$(E)}s=Gr(30);s._W(4,67324752);s._W(2,20);s._W(2,o);s._W(2,f);if(g.mt){n(s,g.mt)}else{s._W(4,0)}s._W(-4,o&8?0:m[d]);s._W(4,o&8?0:E.length);s._W(4,o&8?0:g.content.length);
s._W(2,C.length);s._W(2,0);u+=s.length;a.push(s);u+=C.length;a.push(C);u+=E.length;a.push(E);if(o&8){s=Gr(12);s._W(-4,m[d]);s._W(4,E.length);s._W(4,g.content.length);u+=s.l;a.push(s)}s=Gr(46);s._W(4,33639248);s._W(2,0);s._W(2,20);s._W(2,o);s._W(2,f);s._W(4,0);s._W(-4,m[d]);s._W(4,E.length);s._W(4,g.content.length);s._W(2,C.length);s._W(2,0);s._W(2,0);s._W(2,0);s._W(2,0);s._W(4,0);s._W(4,w);b+=s.l;i.push(s);b+=C.length;i.push(C);++d}s=Gr(22);s._W(4,101010256);s._W(2,0);s._W(2,0);s._W(2,d);s._W(2,d);s._W(4,b);s._W(4,u);s._W(2,0);return x([x(a),x(i),s])}function xe(e){var r={};T(r,e);return r}function Ie(e,r,t,n){var i=n&&n.unsafe;if(!i){T(e)}var s=!i&&W.find(e,r);if(!s){var f=e.FullPaths[0];if(r.slice(0,f.length)==f){f=r}else{if(f.slice(-1)!="/"){f+="/"}f=(f+r).replace("//","/")}s={name:a(r),type:2};e.FileIndex.push(s);e.FullPaths.push(f);if(!i){W.utils.cfb_gc(e)}}s.content=t;s.size=t?t.length:0;if(n){if(n.CLSID){s.clsid=n.CLSID}if(n.mt){s.mt=n.mt}if(n.ct){s.ct=n.ct}}return s}function Re(e,r){T(e);var t=W.find(e,r);if(t){for(var a=0;a<e.FileIndex.length;++a){if(e.FileIndex[a]==t){e.FileIndex.splice(a,1);e.FullPaths.splice(a,1);return true}}}return false}function De(e,r,t){T(e);var n=W.find(e,r);if(n){for(var i=0;i<e.FileIndex.length;++i){if(e.FileIndex[i]==n){e.FileIndex[i].name=a(t);e.FullPaths[i]=t;return true}}}return false}function Oe(e){D(e,true)}e.find=F;e.read=B;e.parse=l;e.write=G;e.writeFile=z;e.utils={cfb_new:xe,cfb_add:Ie,cfb_del:Re,cfb_mov:De,cfb_gc:Oe,ReadShift:Lr,CheckField:Vr,prep_blob:zr,bconcat:x,use_zlib:K,_deflateRaw:ue,_inflateRaw:Ae,consts:V};return e}();if(typeof require!=="undefined"&&typeof module!=="undefined"&&typeof U==="undefined"){module.exports=W}var V;if(typeof require!=="undefined"){try{V=require("fs")}catch(E){}}function z(e){if(typeof e==="string"){return _(e)}if(Array.isArray(e)){return T(e)}return e}function X(e,r,t){if(typeof V!=="undefined"&&V.writeFileSync){return t?V.writeFileSync(e,r,t):V.writeFileSync(e,r)}var a=t=="utf8"?Xe(r):r;
if(typeof IE_SaveFile!=="undefined"){return IE_SaveFile(a,e)}if(typeof Blob!=="undefined"){var n=new Blob([z(a)],{type:"application/octet-stream"});if(typeof navigator!=="undefined"&&navigator.msSaveBlob){return navigator.msSaveBlob(n,e)}if(typeof saveAs!=="undefined"){return saveAs(n,e)}if(typeof URL!=="undefined"&&typeof document!=="undefined"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(n);if(typeof chrome==="object"&&typeof(chrome.downloads||{}).download=="function"){if(URL.revokeObjectURL&&typeof setTimeout!=="undefined"){setTimeout(function(){URL.revokeObjectURL(i)},60000)}return chrome.downloads.download({url:i,filename:e,saveAs:true})}var s=document.createElement("a");if(s.download!=null){s.download=e;s.href=i;document.body.appendChild(s);s.click();document.body.removeChild(s);if(URL.revokeObjectURL&&typeof setTimeout!=="undefined"){setTimeout(function(){URL.revokeObjectURL(i)},60000)}return i}}}if(typeof $!=="undefined"&&typeof File!=="undefined"&&typeof Folder!=="undefined"){try{var f=File(e);f.open("w");f.encoding="binary";if(Array.isArray(r)){r=B(r)}f.write(r);f.close();return r}catch(o){if(!o.message||!o.message.match(/onstruct/)){throw o}}}throw new Error("cannot save file "+e)}function G(e){if(typeof V!=="undefined"){return V.readFileSync(e)}if(typeof $!=="undefined"&&typeof File!=="undefined"&&typeof Folder!=="undefined"){try{var r=File(e);r.open("r");r.encoding="binary";var t=r.read();r.close();return t}catch(a){if(!a.message||!a.message.match(/onstruct/)){throw a}}}throw new Error("Cannot access file "+e)}function j(e){var r=Object.keys(e),t=[];for(var a=0;a<r.length;++a){if(e.hasOwnProperty(r[a])){t.push(r[a])}}return t}function K(e,r){var t=[],a=j(e);for(var n=0;n!==a.length;++n){if(t[e[a[n]][r]]==null){t[e[a[n]][r]]=a[n]}}return t}function Y(e){var r=[],t=j(e);for(var a=0;a!==t.length;++a){r[e[t[a]]]=t[a]}return r}function Z(e){var r=[],t=j(e);for(var a=0;a!==t.length;++a){r[e[t[a]]]=parseInt(t[a],10)}return r}function Q(e){var r=[],t=j(e);
for(var a=0;a!==t.length;++a){if(r[e[t[a]]]==null){r[e[t[a]]]=[]}r[e[t[a]]].push(t[a])}return r}var J=new Date(1899,11,30,0,0,0);var q=J.getTime()+((new Date).getTimezoneOffset()-J.getTimezoneOffset())*60000;function ee(e,r){var t=e.getTime();if(r){t-=1462*24*60*60*1000}return(t-q)/(24*60*60*1000)}function re(e){var r=new Date;r.setTime(e*24*60*60*1000+q);return r}function te(e){var r=0,t=0,a=false;var n=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n){throw new Error("|"+e+"| is not an ISO8601 Duration")}for(var i=1;i!=n.length;++i){if(!n[i]){continue}t=1;if(i>3){a=true}switch(n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":t*=24;case"H":t*=60;case"M":if(!a){throw new Error("Unsupported ISO Duration Field: M")}else{t*=60}case"S":break}r+=t*parseInt(n[i],10)}return r}var ae=new Date("2017-02-19T19:06:09.000Z");if(isNaN(ae.getFullYear())){ae=new Date("2/19/17")}var ne=ae.getFullYear()==2017;function ie(e,r){var t=new Date(e);if(ne){if(r>0){t.setTime(t.getTime()+t.getTimezoneOffset()*60*1000)}else{if(r<0){t.setTime(t.getTime()-t.getTimezoneOffset()*60*1000)}}return t}if(e instanceof Date){return e}if(ae.getFullYear()==1917&&!isNaN(t.getFullYear())){var a=t.getFullYear();if(e.indexOf(""+a)>-1){return t}t.setFullYear(t.getFullYear()+100);return t}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"];var i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);if(e.indexOf("Z")>-1){i=new Date(i.getTime()-i.getTimezoneOffset()*60*1000)}return i}function se(e){var r="";for(var t=0;t!=e.length;++t){r+=String.fromCharCode(e[t])}return r}function fe(e){if(typeof JSON!="undefined"&&!Array.isArray(e)){return JSON.parse(JSON.stringify(e))}if(typeof e!="object"||e==null){return e}if(e instanceof Date){return new Date(e.getTime())}var r={};for(var t in e){if(e.hasOwnProperty(t)){r[t]=fe(e[t])}}return r}function oe(e,r){var t="";while(t.length<r){t+=e}return t}function le(e){var r=Number(e);
if(!isNaN(r)){return r}var t=1;var a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){t*=100;return""});if(!isNaN(r=Number(a))){return r/t}a=a.replace(/[(](.*)[)]/,function(e,r){t=-t;return r});if(!isNaN(r=Number(a))){return r/t}return r}function ce(e){var r=new Date(e),t=new Date(NaN);var a=r.getYear(),n=r.getMonth(),i=r.getDate();if(isNaN(i)){return t}if(a<0||a>8099){return t}if((n>0||i>1)&&a!=101){return r}if(e.toLowerCase().match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){return r}if(e.match(/[^-0-9:,\/\\]/)){return t}return r}var he="abacaba".split(/(:?b)/i).length==5;function ue(e,r,t){if(he||typeof r=="string"){return e.split(r)}var a=e.split(r),n=[a[0]];for(var i=1;i<a.length;++i){n.push(t);n.push(a[i])}return n}function de(e){if(!e){return null}if(e.data){return d(e.data)}if(e.asNodeBuffer&&b){return d(e.asNodeBuffer().toString("binary"))}if(e.asBinary){return d(e.asBinary())}if(e._data&&e._data.getContent){return d(se(Array.prototype.slice.call(e._data.getContent(),0)))}return null}function pe(e){if(!e){return null}if(e.data){return c(e.data)}if(e.asNodeBuffer&&b){return e.asNodeBuffer()}if(e._data&&e._data.getContent){var r=e._data.getContent();if(typeof r=="string"){return c(r)}return Array.prototype.slice.call(r)}return null}function ve(e){return e&&e.name.slice(-4)===".bin"?pe(e):de(e)}function ge(e,r){var t=j(e.files);var a=r.toLowerCase(),n=a.replace(/\//g,"\\");for(var i=0;i<t.length;++i){var s=t[i].toLowerCase();if(a==s||n==s){return e.files[t[i]]}}return null}function me(e,r){var t=ge(e,r);if(t==null){throw new Error("Cannot find file "+r+" in zip")}return t}function be(e,r,t){if(!t){return ve(me(e,r))}if(!r){return null}try{return be(e,r)}catch(a){return null}}function we(e,r,t){if(!t){return de(me(e,r))}if(!r){return null}try{return we(e,r)}catch(a){return null}}function Ce(e){var r=j(e.files),t=[];for(var a=0;a<r.length;++a){if(r[a].slice(-1)!="/"){t.push(r[a])}}return t.sort()}var Ee;if(typeof JSZipSync!=="undefined"){Ee=JSZipSync
}if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){if(typeof Ee==="undefined"){Ee=undefined}}}function ke(e,r){var t=r.split("/");if(r.slice(-1)!="/"){t.pop()}var a=e.split("/");while(a.length!==0){var n=a.shift();if(n===".."){t.pop()}else{if(n!=="."){t.push(n)}}}return t.join("/")}var Se='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var Ae=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g;var _e=/<[\/\?]?[a-zA-Z0-9:]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s?[\/\?]?>/g;if(!Se.match(_e)){_e=/<[^>]*>/g}var Be=/<\w*:/,Te=/<(\/?)\w+:/;function ye(e,r){var t={};var a=0,n=0;for(;a!==e.length;++a){if((n=e.charCodeAt(a))===32||n===10||n===13){break}}if(!r){t[0]=e.slice(0,a)}if(a===e.length){return t}var i=e.match(Ae),s=0,f="",o=0,l="",c="",h=1;if(i){for(o=0;o!=i.length;++o){c=i[o];for(n=0;n!=c.length;++n){if(c.charCodeAt(n)===61){break}}l=c.slice(0,n).trim();while(c.charCodeAt(n+1)==32){++n}h=(a=c.charCodeAt(n+1))==34||a==39?1:0;f=c.slice(n+1+h,c.length-h);for(s=0;s!=l.length;++s){if(l.charCodeAt(s)===58){break}}if(s===l.length){if(l.indexOf("_")>0){l=l.slice(0,l.indexOf("_"))}t[l]=f;t[l.toLowerCase()]=f}else{var u=(s===5&&l.slice(0,5)==="xmlns"?"xmlns":"")+l.slice(s+1);if(t[u]&&l.slice(s-3,s)=="ext"){continue}t[u]=f;t[u.toLowerCase()]=f}}}return t}function xe(e){return e.replace(Te,"<$1")}var Ie={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"};var Re=Y(Ie);var De=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/g,r=/_x([\da-fA-F]{4})_/g;return function t(a){var n=a+"",i=n.indexOf("<![CDATA[");if(i==-1){return n.replace(e,function(e,r){return Ie[e]||String.fromCharCode(parseInt(r,e.indexOf("x")>-1?16:10))||e}).replace(r,function(e,r){return String.fromCharCode(parseInt(r,16))})}var s=n.indexOf("]]>");return t(n.slice(0,i))+n.slice(i+9,s)+t(n.slice(s+3))}}();var Oe=/[&<>'"]/g,Fe=/[\u0000-\u0008\u000b-\u001f]/g;function Pe(e){var r=e+"";return r.replace(Oe,function(e){return Re[e]
}).replace(Fe,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Ne(e){return Pe(e).replace(/ /g,"_x0020_")}var Le=/[\u0000-\u001f]/g;function Me(e){var r=e+"";return r.replace(Oe,function(e){return Re[e]}).replace(/\n/g,"<br/>").replace(Le,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function Ue(e){var r=e+"";return r.replace(Oe,function(e){return Re[e]}).replace(Le,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var He=function(){var e=/&#(\d+);/g;function r(e,r){return String.fromCharCode(parseInt(r,10))}return function t(a){return a.replace(e,r)}}();var We=function(){return function e(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}}();function Ve(e){switch(e){case 1:case true:case"1":case"true":case"TRUE":return true;default:return false}}var ze=function jg(e){var r="",t=0,a=0,n=0,i=0,s=0,f=0;while(t<e.length){a=e.charCodeAt(t++);if(a<128){r+=String.fromCharCode(a);continue}n=e.charCodeAt(t++);if(a>191&&a<224){s=(a&31)<<6;s|=n&63;r+=String.fromCharCode(s);continue}i=e.charCodeAt(t++);if(a<240){r+=String.fromCharCode((a&15)<<12|(n&63)<<6|i&63);continue}s=e.charCodeAt(t++);f=((a&7)<<18|(n&63)<<12|(i&63)<<6|s&63)-65536;r+=String.fromCharCode(55296+(f>>>10&1023));r+=String.fromCharCode(56320+(f&1023))}return r};var Xe=function(e){var r=[],t=0,a=0,n=0;while(t<e.length){a=e.charCodeAt(t++);switch(true){case a<128:r.push(String.fromCharCode(a));break;case a<2048:r.push(String.fromCharCode(192+(a>>6)));r.push(String.fromCharCode(128+(a&63)));break;case a>=55296&&a<57344:a-=55296;n=e.charCodeAt(t++)-56320+(a<<10);r.push(String.fromCharCode(240+(n>>18&7)));r.push(String.fromCharCode(144+(n>>12&63)));r.push(String.fromCharCode(128+(n>>6&63)));r.push(String.fromCharCode(128+(n&63)));break;default:r.push(String.fromCharCode(224+(a>>12)));r.push(String.fromCharCode(128+(a>>6&63)));r.push(String.fromCharCode(128+(a&63)))}}return r.join("")};if(b){var Ge=function Kg(e){var r=Buffer.alloc(2*e.length),t,a,n=1,i=0,s=0,f;
for(a=0;a<e.length;a+=n){n=1;if((f=e.charCodeAt(a))<128){t=f}else{if(f<224){t=(f&31)*64+(e.charCodeAt(a+1)&63);n=2}else{if(f<240){t=(f&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63);n=3}else{n=4;t=(f&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63);t-=65536;s=55296+(t>>>10&1023);t=56320+(t&1023)}}}if(s!==0){r[i++]=s&255;r[i++]=s>>>8;s=0}r[i++]=t%256;r[i++]=t>>>8}return r.slice(0,i).toString("ucs2")};var je="foo bar baz";if(ze(je)==Ge(je)){ze=Ge}var Ke=function Yg(e){return w(e,"binary").toString("utf8")};if(ze(je)==Ke(je)){ze=Ke}Xe=function(e){return w(e,"utf8").toString("binary")}}var Ye=function(){var e={};return function r(t,a){var n=t+"|"+(a||"");if(e[n]){return e[n]}return e[n]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",a||"")}}();var $e=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","g"),e[1]]});return function r(t){var a=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,"");for(var n=0;n<e.length;++n){a=a.replace(e[n][0],e[n][1])}return a}}();var Ze=function(){var e={};return function r(t){if(e[t]!==undefined){return e[t]}return e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}();var Qe=/<\/?(?:vt:)?variant>/g,Je=/<(?:vt:)([^>]*)>([\s\S]*)</;function qe(e,r){var t=ye(e);var a=e.match(Ze(t.baseType))||[];var n=[];if(a.length!=t.size){if(r.WTF){throw new Error("unexpected vector length "+a.length+" != "+t.size)}return n}a.forEach(function(e){var r=e.replace(Qe,"").match(Je);if(r){n.push({v:ze(r[2]),t:r[1]})}});return n}var er=/(^\s|\s$|\n)/;function rr(e,r){return"<"+e+(r.match(er)?' xml:space="preserve"':"")+">"+r+"</"+e+">"}function tr(e){return j(e).map(function(r){return" "+r+'="'+e[r]+'"'}).join("")}function ar(e,r,t){return"<"+e+(t!=null?tr(t):"")+(r!=null?(r.match(er)?' xml:space="preserve"':"")+">"+r+"</"+e:"/")+">"
}function nr(e,r){try{return e.toISOString().replace(/\.\d*/,"")}catch(t){if(r){throw t}}return""}function ir(e){switch(typeof e){case"string":return ar("vt:lpwstr",e);case"number":return ar((e|0)==e?"vt:i4":"vt:r8",String(e));case"boolean":return ar("vt:bool",e?"true":"false")}if(e instanceof Date){return ar("vt:filetime",nr(e))}throw new Error("Unable to serialize "+e)}var sr={dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"};sr.main=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];var fr={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function or(e,r){var t=1-2*(e[r+7]>>>7);var a=((e[r+7]&127)<<4)+(e[r+6]>>>4&15);var n=e[r+6]&15;for(var i=5;i>=0;--i){n=n*256+e[r+i]}if(a==2047){return n==0?t*Infinity:NaN}if(a==0){a=-1022}else{a-=1023;n+=Math.pow(2,52)}return t*Math.pow(2,a-52)*n}function lr(e,r,t){var a=(r<0||1/r==-Infinity?1:0)<<7,n=0,i=0;var s=a?-r:r;if(!isFinite(s)){n=2047;i=isNaN(r)?26985:0}else{if(s==0){n=i=0}else{n=Math.floor(Math.log(s)/Math.LN2);i=s*Math.pow(2,52-n);if(n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))){n=-1022}else{i-=Math.pow(2,52);n+=1023}}}for(var f=0;f<=5;++f,i/=256){e[t+f]=i&255}e[t+6]=(n&15)<<4|i&15;e[t+7]=n>>4|a}var cr=function(e){var r=[],t=10240;
for(var a=0;a<e[0].length;++a){if(e[0][a]){for(var n=0,i=e[0][a].length;n<i;n+=t){r.push.apply(r,e[0][a].slice(n,n+t))}}}return r};var hr=cr;var ur=function(e,r,t){var a=[];for(var n=r;n<t;n+=2){a.push(String.fromCharCode(Dr(e,n)))}return a.join("").replace(I,"")};var dr=ur;var pr=function(e,r,t){var a=[];for(var n=r;n<r+t;++n){a.push(("0"+e[n].toString(16)).slice(-2))}return a.join("")};var vr=pr;var gr=function(e,r,t){var a=[];for(var n=r;n<t;n++){a.push(String.fromCharCode(Rr(e,n)))}return a.join("")};var mr=gr;var br=function(e,r){var t=Fr(e,r);return t>0?gr(e,r+4,r+4+t-1):""};var wr=br;var Cr=function(e,r){var t=Fr(e,r);return t>0?gr(e,r+4,r+4+t-1):""};var Er=Cr;var kr=function(e,r){var t=2*Fr(e,r);return t>0?gr(e,r+4,r+4+t-1):""};var Sr=kr;var Ar,_r;Ar=_r=function $g(e,r){var t=Fr(e,r);return t>0?ur(e,r+4,r+4+t):""};var Br=function(e,r){var t=Fr(e,r);return t>0?gr(e,r+4,r+4+t):""};var Tr=Br;var yr,xr;yr=xr=function(e,r){return or(e,r)};var Ir=function Zg(e){return Array.isArray(e)};if(b){ur=function(e,r,t){if(!Buffer.isBuffer(e)){return dr(e,r,t)}return e.toString("utf16le",r,t).replace(I,"")};pr=function(e,r,t){return Buffer.isBuffer(e)?e.toString("hex",r,r+t):vr(e,r,t)};br=function Qg(e,r){if(!Buffer.isBuffer(e)){return wr(e,r)}var t=e.readUInt32LE(r);return t>0?e.toString("utf8",r+4,r+4+t-1):""};Cr=function Jg(e,r){if(!Buffer.isBuffer(e)){return Er(e,r)}var t=e.readUInt32LE(r);return t>0?e.toString("utf8",r+4,r+4+t-1):""};kr=function qg(e,r){if(!Buffer.isBuffer(e)){return Sr(e,r)}var t=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+t-1)};Ar=function em(e,r){if(!Buffer.isBuffer(e)){return _r(e,r)}var t=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+t)};Br=function rm(e,r){if(!Buffer.isBuffer(e)){return Tr(e,r)}var t=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+t)};gr=function tm(e,r,t){return Buffer.isBuffer(e)?e.toString("utf8",r,t):mr(e,r,t)};cr=function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0]):hr(e)};x=function(e){return Buffer.isBuffer(e[0])?Buffer.concat(e):[].concat.apply([],e)
};yr=function am(e,r){if(Buffer.isBuffer(e)){return e.readDoubleLE(r)}return xr(e,r)};Ir=function nm(e){return Buffer.isBuffer(e)||Array.isArray(e)}}if(typeof cptable!=="undefined"){ur=function(e,r,t){return cptable.utils.decode(1200,e.slice(r,t)).replace(I,"")};gr=function(e,r,t){return cptable.utils.decode(65001,e.slice(r,t))};br=function(e,r){var a=Fr(e,r);return a>0?cptable.utils.decode(t,e.slice(r+4,r+4+a-1)):""};Cr=function(e,t){var a=Fr(e,t);return a>0?cptable.utils.decode(r,e.slice(t+4,t+4+a-1)):""};kr=function(e,r){var t=2*Fr(e,r);return t>0?cptable.utils.decode(1200,e.slice(r+4,r+4+t-1)):""};Ar=function(e,r){var t=Fr(e,r);return t>0?cptable.utils.decode(1200,e.slice(r+4,r+4+t)):""};Br=function(e,r){var t=Fr(e,r);return t>0?cptable.utils.decode(65001,e.slice(r+4,r+4+t)):""}}var Rr=function(e,r){return e[r]};var Dr=function(e,r){return e[r+1]*(1<<8)+e[r]};var Or=function(e,r){var t=e[r+1]*(1<<8)+e[r];return t<32768?t:(65535-t+1)*-1};var Fr=function(e,r){return e[r+3]*(1<<24)+(e[r+2]<<16)+(e[r+1]<<8)+e[r]};var Pr=function(e,r){return e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]};var Nr=function(e,r){return e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]};function Lr(e,t){var a="",n,i,s=[],f,o,l,c;switch(t){case"dbcs":c=this.l;if(b&&Buffer.isBuffer(this)){a=this.slice(this.l,this.l+2*e).toString("utf16le")}else{for(l=0;l<e;++l){a+=String.fromCharCode(Dr(this,c));c+=2}}e*=2;break;case"utf8":a=gr(this,this.l,this.l+e);break;case"utf16le":e*=2;a=ur(this,this.l,this.l+e);break;case"wstr":if(typeof cptable!=="undefined"){a=cptable.utils.decode(r,this.slice(this.l,this.l+2*e))}else{return Lr.call(this,e,"dbcs")}e=2*e;break;case"lpstr-ansi":a=br(this,this.l);e=4+Fr(this,this.l);break;case"lpstr-cp":a=Cr(this,this.l);e=4+Fr(this,this.l);break;case"lpwstr":a=kr(this,this.l);e=4+2*Fr(this,this.l);break;case"lpp4":e=4+Fr(this,this.l);a=Ar(this,this.l);if(e&2){e+=2}break;case"8lpp4":e=4+Fr(this,this.l);a=Br(this,this.l);if(e&3){e+=4-(e&3)}break;case"cstr":e=0;a="";while((f=Rr(this,this.l+e++))!==0){s.push(p(f))
}a=s.join("");break;case"_wstr":e=0;a="";while((f=Dr(this,this.l+e))!==0){s.push(p(f));e+=2}e+=2;a=s.join("");break;case"dbcs-cont":a="";c=this.l;for(l=0;l<e;++l){if(this.lens&&this.lens.indexOf(c)!==-1){f=Rr(this,c);this.l=c+1;o=Lr.call(this,e-l,f?"dbcs-cont":"sbcs-cont");return s.join("")+o}s.push(p(Dr(this,c)));c+=2}a=s.join("");e*=2;break;case"cpstr":if(typeof cptable!=="undefined"){a=cptable.utils.decode(r,this.slice(this.l,this.l+e));break}case"sbcs-cont":a="";c=this.l;for(l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(c)!==-1){f=Rr(this,c);this.l=c+1;o=Lr.call(this,e-l,f?"dbcs-cont":"sbcs-cont");return s.join("")+o}s.push(p(Rr(this,c)));c+=1}a=s.join("");break;default:switch(e){case 1:n=Rr(this,this.l);this.l++;return n;case 2:n=(t==="i"?Or:Dr)(this,this.l);this.l+=2;return n;case 4:case -4:if(t==="i"||(this[this.l+3]&128)===0){n=(e>0?Pr:Nr)(this,this.l);this.l+=4;return n}else{i=Fr(this,this.l);this.l+=4}return i;case 8:case -8:if(t==="f"){if(e==8){i=yr(this,this.l)}else{i=yr([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0)}this.l+=8;return i}else{e=8}case 16:a=pr(this,this.l,e);break}}this.l+=e;return a}var Mr=function(e,r,t){e[t]=r&255;e[t+1]=r>>>8&255;e[t+2]=r>>>16&255;e[t+3]=r>>>24&255};var Ur=function(e,r,t){e[t]=r&255;e[t+1]=r>>8&255;e[t+2]=r>>16&255;e[t+3]=r>>24&255};var Hr=function(e,r,t){e[t]=r&255;e[t+1]=r>>>8&255};function Wr(e,r,t){var a=0,n=0;if(t==="dbcs"){for(n=0;n!=r.length;++n){Hr(this,r.charCodeAt(n),this.l+2*n)}a=2*r.length}else{if(t==="sbcs"){r=r.replace(/[^\x00-\x7F]/g,"_");for(n=0;n!=r.length;++n){this[this.l+n]=r.charCodeAt(n)&255}a=r.length}else{if(t==="hex"){for(;n<e;++n){this[this.l++]=parseInt(r.slice(2*n,2*n+2),16)||0}return this}else{if(t==="utf16le"){var i=Math.min(this.l+e,this.length);for(n=0;n<Math.min(r.length,e);++n){var s=r.charCodeAt(n);this[this.l++]=s&255;this[this.l++]=s>>8}while(this.l<i){this[this.l++]=0}return this}else{switch(e){case 1:a=1;this[this.l]=r&255;
break;case 2:a=2;this[this.l]=r&255;r>>>=8;this[this.l+1]=r&255;break;case 3:a=3;this[this.l]=r&255;r>>>=8;this[this.l+1]=r&255;r>>>=8;this[this.l+2]=r&255;break;case 4:a=4;Mr(this,r,this.l);break;case 8:a=8;if(t==="f"){lr(this,r,this.l);break}case 16:break;case -4:a=4;Ur(this,r,this.l);break}}}}}this.l+=a;return this}function Vr(e,r){var t=pr(this,this.l,e.length>>1);if(t!==e){throw new Error(r+"Expected "+e+" saw "+t)}this.l+=e.length>>1}function zr(e,r){e.l=r;e._R=Lr;e.chk=Vr;e._W=Wr}function Xr(e,r){e.l+=r}function Gr(e){var r=k(e);zr(r,0);return r}function jr(e,r,t){if(!e){return}var a,n,i;zr(e,e.l||0);var s=e.length,f=0,o=0;while(e.l<s){f=e._R(1);if(f&128){f=(f&127)+((e._R(1)&127)<<7)}var l=hv[f]||hv[65535];a=e._R(1);i=a&127;for(n=1;n<4&&a&128;++n){i+=((a=e._R(1))&127)<<7*n}o=e.l+i;var c=(l.f||Xr)(e,i,t);e.l=o;if(r(c,l.n,f)){return}}}function Kr(){var e=[],r=b?256:2048;var t=function o(e){var r=Gr(e);zr(r,0);return r};var a=t(r);var n=function l(){if(!a){return}if(a.length>a.l){a=a.slice(0,a.l);a.l=a.length}if(a.length>0){e.push(a)}a=null};var i=function c(e){if(a&&e<a.length-a.l){return a}n();return a=t(Math.max(e+1,r))};var s=function h(){n();return cr([e])};var f=function u(e){n();a=e;if(a.l==null){a.l=a.length}i(r)};return{next:i,push:f,end:s,_bufs:e}}function Yr(e,r,t,a){var n=+uv[r],i;if(isNaN(n)){return}if(!a){a=hv[n].p||(t||[]).length||0}i=1+(n>=128?1:0)+1;if(a>=128){++i}if(a>=16384){++i}if(a>=2097152){++i}var s=e.next(i);if(n<=127){s._W(1,n)}else{s._W(1,(n&127)+128);s._W(1,n>>7)}for(var f=0;f!=4;++f){if(a>=128){s._W(1,(a&127)+128);a>>=7}else{s._W(1,a);break}}if(a>0&&Ir(t)){e.push(t)}}function $r(e,r,t){var a=fe(e);if(r.s){if(a.cRel){a.c+=r.s.c}if(a.rRel){a.r+=r.s.r}}else{if(a.cRel){a.c+=r.c}if(a.rRel){a.r+=r.r}}if(!t||t.biff<12){while(a.c>=256){a.c-=256}while(a.r>=65536){a.r-=65536}}return a}function Zr(e,r,t){var a=fe(e);a.s=$r(a.s,r.s,t);a.e=$r(a.e,r.s,t);return a}function Qr(e,r){if(e.cRel&&e.c<0){e=fe(e);e.c+=r>8?16384:256}if(e.rRel&&e.r<0){e=fe(e);
e.r+=r>8?1048576:r>5?65536:16384}var t=ht(e);if(e.cRel===0){t=ft(t)}if(e.rRel===0){t=at(t)}return t}function Jr(e,r){if(e.s.r==0&&!e.s.rRel){if(e.e.r==(r.biff>=12?1048575:r.biff>=8?65536:16384)&&!e.e.rRel){return(e.s.cRel?"":"$")+st(e.s.c)+":"+(e.e.cRel?"":"$")+st(e.e.c)}}if(e.s.c==0&&!e.s.cRel){if(e.e.c==(r.biff>=12?65535:255)&&!e.e.cRel){return(e.s.rRel?"":"$")+tt(e.s.r)+":"+(e.e.rRel?"":"$")+tt(e.e.r)}}return Qr(e.s,r.biff)+":"+Qr(e.e,r.biff)}var qr={};var et=function(e,r){var t;if(typeof r!=="undefined"){t=r}else{if(typeof require!=="undefined"){try{t=undefined}catch(a){t=null}}}e.rc4=function(e,r){var t=new Array(256);var a=0,n=0,i=0,s=0;for(n=0;n!=256;++n){t[n]=n}for(n=0;n!=256;++n){i=i+t[n]+e[n%e.length].charCodeAt(0)&255;s=t[n];t[n]=t[i];t[i]=s}n=i=0;var f=Buffer(r.length);for(a=0;a!=r.length;++a){n=n+1&255;i=(i+t[n])%256;s=t[n];t[n]=t[i];t[i]=s;f[a]=r[a]^t[t[n]+t[i]&255]}return f};e.md5=function(e){if(!t){throw new Error("Unsupported crypto")}return t.createHash("md5").update(e).digest("hex")}};et(qr,typeof crypto!=="undefined"?crypto:undefined);function rt(e){return parseInt(nt(e),10)-1}function tt(e){return""+(e+1)}function at(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function nt(e){return e.replace(/\$(\d+)$/,"$1")}function it(e){var r=ot(e),t=0,a=0;for(;a!==r.length;++a){t=26*t+r.charCodeAt(a)-64}return t-1}function st(e){var r="";for(++e;e;e=Math.floor((e-1)/26)){r=String.fromCharCode((e-1)%26+65)+r}return r}function ft(e){return e.replace(/^([A-Z])/,"$$$1")}function ot(e){return e.replace(/^\$([A-Z])/,"$1")}function lt(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ct(e){var r=lt(e);return{c:it(r[0]),r:rt(r[1])}}function ht(e){return st(e.c)+tt(e.r)}function ut(e){var r=e.split(":").map(ct);return{s:r[0],e:r[r.length-1]}}function dt(e,r){if(typeof r==="undefined"||typeof r==="number"){return dt(e.s,e.e)}if(typeof e!=="string"){e=ht(e)}if(typeof r!=="string"){r=ht(r)}return e==r?e:e+":"+r}function pt(e){var r={s:{c:0,r:0},e:{c:0,r:0}};
var t=0,a=0,n=0;var i=e.length;for(t=0;a<i;++a){if((n=e.charCodeAt(a)-64)<1||n>26){break}t=26*t+n}r.s.c=--t;for(t=0;a<i;++a){if((n=e.charCodeAt(a)-48)<0||n>9){break}t=10*t+n}r.s.r=--t;if(a===i||e.charCodeAt(++a)===58){r.e.c=r.s.c;r.e.r=r.s.r;return r}for(t=0;a!=i;++a){if((n=e.charCodeAt(a)-64)<1||n>26){break}t=26*t+n}r.e.c=--t;for(t=0;a!=i;++a){if((n=e.charCodeAt(a)-48)<0||n>9){break}t=10*t+n}r.e.r=--t;return r}function vt(e,r){var t=e.t=="d"&&r instanceof Date;if(e.z!=null){try{return e.w=D.format(e.z,t?ee(r):r)}catch(a){}}try{return e.w=D.format((e.XF||{}).numFmtId||(t?14:0),t?ee(r):r)}catch(a){return""+r}}function gt(e,r,t){if(e==null||e.t==null||e.t=="z"){return""}if(e.w!==undefined){return e.w}if(e.t=="d"&&!e.z&&t&&t.dateNF){e.z=t.dateNF}if(r==undefined){return vt(e,e.v)}return vt(e,r)}function mt(e,r){var t=r&&r.sheet?r.sheet:"Sheet1";var a={};a[t]=e;return{SheetNames:[t],Sheets:a}}function bt(e,r,t){var a=t||{};var n=e?Array.isArray(e):a.dense;if(v!=null&&n==null){n=v}var i=e||(n?[]:{});var s=0,f=0;if(i&&a.origin!=null){if(typeof a.origin=="number"){s=a.origin}else{var o=typeof a.origin=="string"?ct(a.origin):a.origin;s=o.r;f=o.c}}var l={s:{c:10000000,r:10000000},e:{c:0,r:0}};if(i["!ref"]){var c=pt(i["!ref"]);l.s.c=c.s.c;l.s.r=c.s.r;l.e.c=Math.max(l.e.c,c.e.c);l.e.r=Math.max(l.e.r,c.e.r);if(s==-1){l.e.r=s=c.e.r+1}}for(var h=0;h!=r.length;++h){if(!r[h]){continue}if(!Array.isArray(r[h])){throw new Error("aoa_to_sheet expects an array of arrays")}for(var u=0;u!=r[h].length;++u){if(typeof r[h][u]==="undefined"){continue}var d={v:r[h][u]};var p=s+h,g=f+u;if(l.s.r>p){l.s.r=p}if(l.s.c>g){l.s.c=g}if(l.e.r<p){l.e.r=p}if(l.e.c<g){l.e.c=g}if(r[h][u]&&typeof r[h][u]==="object"&&!Array.isArray(r[h][u])&&!(r[h][u] instanceof Date)){d=r[h][u]}else{if(Array.isArray(d.v)){d.f=r[h][u][1];d.v=d.v[0]}if(d.v===null){if(d.f){d.t="n"}else{if(!a.cellStubs){continue}else{d.t="z"}}}else{if(typeof d.v==="number"){d.t="n"}else{if(typeof d.v==="boolean"){d.t="b"}else{if(d.v instanceof Date){d.z=a.dateNF||D._table[14];
if(a.cellDates){d.t="d";d.w=D.format(d.z,ee(d.v))}else{d.t="n";d.v=ee(d.v);d.w=D.format(d.z,d.v)}}else{d.t="s"}}}}}if(n){if(!i[p]){i[p]=[]}i[p][g]=d}else{var m=ht({c:g,r:p});i[m]=d}}}if(l.s.c<10000000){i["!ref"]=dt(l)}return i}function wt(e,r){return bt(null,e,r)}function Ct(e,r){if(!r){r=Gr(4)}r._W(4,e);return r}function Et(e){var r=e._R(4);return r===0?"":e._R(r,"dbcs")}function kt(e,r){var t=false;if(r==null){t=true;r=Gr(4+2*e.length)}r._W(4,e.length);if(e.length>0){r._W(0,e,"dbcs")}return t?r.slice(0,r.l):r}function St(e){return{ich:e._R(2),ifnt:e._R(2)}}function At(e,r){if(!r){r=Gr(4)}r._W(2,e.ich||0);r._W(2,e.ifnt||0);return r}function _t(e,r){var t=e.l;var a=e._R(1);var n=Et(e);var i=[];var s={t:n,h:n};if((a&1)!==0){var f=e._R(4);for(var o=0;o!=f;++o){i.push(St(e))}s.r=i}else{s.r=[{ich:0,ifnt:0}]}e.l=t+r;return s}function Bt(e,r){var t=false;if(r==null){t=true;r=Gr(15+4*e.t.length)}r._W(1,0);kt(e.t,r);return t?r.slice(0,r.l):r}var Tt=_t;function yt(e,r){var t=false;if(r==null){t=true;r=Gr(23+4*e.t.length)}r._W(1,1);kt(e.t,r);r._W(4,1);At({ich:0,ifnt:0},r);return t?r.slice(0,r.l):r}function xt(e){var r=e._R(4);var t=e._R(2);t+=e._R(1)<<16;e.l++;return{c:r,iStyleRef:t}}function It(e,r){if(r==null){r=Gr(8)}r._W(-4,e.c);r._W(3,e.iStyleRef||e.s);r._W(1,0);return r}var Rt=Et;var Dt=kt;function Ot(e){var r=e._R(4);return r===0||r===4294967295?"":e._R(r,"dbcs")}function Ft(e,r){var t=false;if(r==null){t=true;r=Gr(127)}r._W(4,e.length>0?e.length:4294967295);if(e.length>0){r._W(0,e,"dbcs")}return t?r.slice(0,r.l):r}var Pt=Et;var Nt=Ot;var Lt=Ft;function Mt(e){var r=e.slice(e.l,e.l+4);var t=r[0]&1,a=r[0]&2;e.l+=4;r[0]&=252;var n=a===0?yr([0,0,0,0,r[0],r[1],r[2],r[3]],0):Pr(r,0)>>2;return t?n/100:n}function Ut(e,r){if(r==null){r=Gr(4)}var t=0,a=0,n=e*100;if(e==(e|0)&&e>=-(1<<29)&&e<1<<29){a=1}else{if(n==(n|0)&&n>=-(1<<29)&&n<1<<29){a=1;t=1}}if(a){r._W(-4,((t?n:e)<<2)+(t+2))}else{throw new Error("unsupported RkNumber "+e)}}function Ht(e){var r={s:{},e:{}};r.s.r=e._R(4);r.e.r=e._R(4);
r.s.c=e._R(4);r.e.c=e._R(4);return r}function Wt(e,r){if(!r){r=Gr(16)}r._W(4,e.s.r);r._W(4,e.e.r);r._W(4,e.s.c);r._W(4,e.e.c);return r}var Vt=Ht;var zt=Wt;function Xt(e){return e._R(8,"f")}function Gt(e,r){return(r||Gr(8))._W(8,e,"f")}var jt={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"};var Kt=Z(jt);function Yt(e){var r={};var t=e._R(1);var a=t>>>1;var n=e._R(1);var i=e._R(2,"i");var s=e._R(1);var f=e._R(1);var o=e._R(1);e.l++;switch(a){case 0:r.auto=1;break;case 1:r.index=n;var l=ka[n];if(l){r.rgb=Yf(l)}break;case 2:r.rgb=Yf([s,f,o]);break;case 3:r.theme=n;break}if(i!=0){r.tint=i>0?i/32767:i/32768}return r}function $t(e,r){if(!r){r=Gr(8)}if(!e||e.auto){r._W(4,0);r._W(4,0);return r}if(e.index){r._W(1,2);r._W(1,e.index)}else{if(e.theme){r._W(1,6);r._W(1,e.theme)}else{r._W(1,5);r._W(1,0)}}var t=e.tint||0;if(t>0){t*=32767}else{if(t<0){t*=32768}}r._W(2,t);if(!e.rgb){r._W(2,0);r._W(1,0);r._W(1,0)}else{var a=e.rgb||"FFFFFF";r._W(1,parseInt(a.slice(0,2),16));r._W(1,parseInt(a.slice(2,4),16));r._W(1,parseInt(a.slice(4,6),16));r._W(1,255)}return r}function Zt(e){var r=e._R(1);e.l++;var t={fItalic:r&2,fStrikeout:r&8,fOutline:r&16,fShadow:r&32,fCondense:r&64,fExtend:r&128};return t}function Qt(e,r){if(!r){r=Gr(2)}var t=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);r._W(1,t);r._W(1,0);return r}function Jt(e,r){var t={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"};var a=e._R(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return t[e._R(4)]||""}if(a>400){throw new Error("Unsupported Clipboard: "+a.toString(16))}e.l-=4;return e._R(0,r==1?"lpstr":"lpwstr")}function qt(e){return Jt(e,1)}function ea(e){return Jt(e,2)}var ra=2;var ta=3;var aa=11;var na=12;var ia=19;var sa=30;var fa=64;var oa=65;var la=71;var ca=4096;var ha=80;var ua=81;var da=[ha,ua];var pa={1:{n:"CodePage",t:ra},2:{n:"Category",t:ha},3:{n:"PresentationFormat",t:ha},4:{n:"ByteCount",t:ta},5:{n:"LineCount",t:ta},6:{n:"ParagraphCount",t:ta},7:{n:"SlideCount",t:ta},8:{n:"NoteCount",t:ta},9:{n:"HiddenCount",t:ta},10:{n:"MultimediaClipCount",t:ta},11:{n:"ScaleCrop",t:aa},12:{n:"HeadingPairs",t:ca|na},13:{n:"TitlesOfParts",t:ca|sa},14:{n:"Manager",t:ha},15:{n:"Company",t:ha},16:{n:"LinksUpToDate",t:aa},17:{n:"CharacterCount",t:ta},19:{n:"SharedDoc",t:aa},22:{n:"HyperlinksChanged",t:aa},23:{n:"AppVersion",t:ta,p:"version"},24:{n:"DigSig",t:oa},26:{n:"ContentType",t:ha},27:{n:"ContentStatus",t:ha},28:{n:"Language",t:ha},29:{n:"Version",t:ha},255:{}};
var va={1:{n:"CodePage",t:ra},2:{n:"Title",t:ha},3:{n:"Subject",t:ha},4:{n:"Author",t:ha},5:{n:"Keywords",t:ha},6:{n:"Comments",t:ha},7:{n:"Template",t:ha},8:{n:"LastAuthor",t:ha},9:{n:"RevNumber",t:ha},10:{n:"EditTime",t:fa},11:{n:"LastPrinted",t:fa},12:{n:"CreatedDate",t:fa},13:{n:"ModifiedDate",t:fa},14:{n:"PageCount",t:ta},15:{n:"WordCount",t:ta},16:{n:"CharCount",t:ta},17:{n:"Thumbnail",t:la},18:{n:"Application",t:ha},19:{n:"DocSecurity",t:ta},255:{}};var ga={2147483648:{n:"Locale",t:ia},2147483651:{n:"Behavior",t:ia},1919054434:{}};(function(){for(var e in ga){if(ga.hasOwnProperty(e)){pa[e]=va[e]=ga[e]}}})();var ma=K(pa,"n");var ba=K(va,"n");var wa={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"};var Ca=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Ea(e){return e.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var ka=Ea([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);var Sa={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.sheetMetadata":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"TODO","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"vba","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};
var Aa=function(){var e={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};j(e).forEach(function(r){["xlsm","xlam"].forEach(function(t){if(!e[r][t]){e[r][t]=e[r].xlsx}})});j(e).forEach(function(r){j(e[r]).forEach(function(t){Sa[e[r][t]]=r})});return e}();var _a=Q(Sa);sr.CT="http://schemas.openxmlformats.org/package/2006/content-types";function Ba(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],TODO:[],xmlns:""}}function Ta(e){var r=Ba();if(!e||!e.match){return r}var t={};(e.match(_e)||[]).forEach(function(e){var a=ye(e);switch(a[0].replace(Be,"<")){case"<?xml":break;case"<Types":r.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;
case"<Default":t[a.Extension]=a.ContentType;break;case"<Override":if(r[Sa[a.ContentType]]!==undefined){r[Sa[a.ContentType]].push(a.PartName)}break}});if(r.xmlns!==sr.CT){throw new Error("Unknown Namespace: "+r.xmlns)}r.calcchain=r.calcchains.length>0?r.calcchains[0]:"";r.sst=r.strs.length>0?r.strs[0]:"";r.style=r.styles.length>0?r.styles[0]:"";r.defaults=t;delete r.calcchains;return r}var ya=ar("Types",null,{xmlns:sr.CT,"xmlns:xsd":sr.xsd,"xmlns:xsi":sr.xsi});var xa=[["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels",_a.rels[0]]].map(function(e){return ar("Default",null,{Extension:e[0],ContentType:e[1]})});function Ia(e,r){var t=[],a;t[t.length]=Se;t[t.length]=ya;t=t.concat(xa);var n=function(n){if(e[n]&&e[n].length>0){a=e[n][0];t[t.length]=ar("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:Aa[n][r.bookType||"xlsx"]})}};var i=function(a){(e[a]||[]).forEach(function(e){t[t.length]=ar("Override",null,{PartName:(e[0]=="/"?"":"/")+e,ContentType:Aa[a][r.bookType||"xlsx"]})})};var s=function(r){(e[r]||[]).forEach(function(e){t[t.length]=ar("Override",null,{PartName:(e[0]=="/"?"":"/")+e,ContentType:_a[r][0]})})};n("workbooks");i("sheets");i("charts");s("themes");["strs","styles"].forEach(n);["coreprops","extprops","custprops"].forEach(s);s("vba");s("comments");s("drawings");if(t.length>2){t[t.length]="</Types>";t[1]=t[1].replace("/>",">")}return t.join("")}var Ra={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};
function Da(e){var r=e.lastIndexOf("/");return e.slice(0,r+1)+"_rels/"+e.slice(r+1)+".rels"}function Oa(e,r){if(!e){return e}if(r.charAt(0)!=="/"){r="/"+r}var t={};var a={};(e.match(_e)||[]).forEach(function(e){var n=ye(e);if(n[0]==="<Relationship"){var i={};i.Type=n.Type;i.Target=n.Target;i.Id=n.Id;i.TargetMode=n.TargetMode;var s=n.TargetMode==="External"?n.Target:ke(n.Target,r);t[s]=i;a[n.Id]=i}});t["!id"]=a;return t}sr.RELS="http://schemas.openxmlformats.org/package/2006/relationships";var Fa=ar("Relationships",null,{xmlns:sr.RELS});function Pa(e){var r=[Se,Fa];j(e["!id"]).forEach(function(t){r[r.length]=ar("Relationship",null,e["!id"][t])});if(r.length>2){r[r.length]="</Relationships>";r[1]=r[1].replace("/>",">")}return r.join("")}function Na(e,r,t,a,n){if(!n){n={}}if(!e["!id"]){e["!id"]={}}if(r<0){for(r=1;e["!id"]["rId"+r];++r){}}n.Id="rId"+r;n.Type=a;n.Target=t;if(n.Type==Ra.HLINK){n.TargetMode="External"}if(e["!id"][n.Id]){throw new Error("Cannot rewrite rId "+r)}e["!id"][n.Id]=n;e[("/"+n.Target).replace("//","/")]=n;return r}var La="application/vnd.oasis.opendocument.spreadsheet";function Ma(e,r){var t=Mp(e);var a;var n;while(a=Up.exec(t)){switch(a[3]){case"manifest":break;case"file-entry":n=ye(a[0],false);if(n.path=="/"&&n.type!==La){throw new Error("This OpenDocument is not a spreadsheet")}break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(r&&r.WTF){throw a}}}}function Ua(e){var r=[Se];r.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n');r.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var t=0;t<e.length;++t){r.push('  <manifest:file-entry manifest:full-path="'+e[t][0]+'" manifest:media-type="'+e[t][1]+'"/>\n')}r.push("</manifest:manifest>");return r.join("")}function Ha(e,r,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+r+'"/>\n',"  </rdf:Description>\n"].join("")
}function Wa(e,r){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+r+'"/>\n',"  </rdf:Description>\n"].join("")}function Va(e){var r=[Se];r.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var t=0;t!=e.length;++t){r.push(Ha(e[t][0],e[t][1]));r.push(Wa("",e[t][0]))}r.push(Ha("","Document","pkg"));r.push("</rdf:RDF>");return r.join("")}var za=function(){var r='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>Sheet'+"JS "+e.version+"</meta:generator></office:meta></office:document-meta>";return function t(){return r}}();var Xa=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];sr.CORE_PROPS="http://schemas.openxmlformats.org/package/2006/metadata/core-properties";Ra.CORE_PROPS="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties";var Ga=function(){var e=new Array(Xa.length);for(var r=0;r<Xa.length;++r){var t=Xa[r];var a="(?:"+t[0].slice(0,t[0].indexOf(":"))+":)"+t[0].slice(t[0].indexOf(":")+1);e[r]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e}();function ja(e){var r={};e=ze(e);for(var t=0;t<Xa.length;++t){var a=Xa[t],n=e.match(Ga[t]);if(n!=null&&n.length>0){r[a[1]]=n[1]}if(a[2]==="date"&&r[a[1]]){r[a[1]]=ie(r[a[1]])}}return r
}var Ka=ar("cp:coreProperties",null,{"xmlns:cp":sr.CORE_PROPS,"xmlns:dc":sr.dc,"xmlns:dcterms":sr.dcterms,"xmlns:dcmitype":sr.dcmitype,"xmlns:xsi":sr.xsi});function Ya(e,r,t,a,n){if(n[e]!=null||r==null||r===""){return}n[e]=r;a[a.length]=t?ar(e,r,t):rr(e,r)}function $a(e,r){var t=r||{};var a=[Se,Ka],n={};if(!e&&!t.Props){return a.join("")}if(e){if(e.CreatedDate!=null){Ya("dcterms:created",typeof e.CreatedDate==="string"?e.CreatedDate:nr(e.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n)}if(e.ModifiedDate!=null){Ya("dcterms:modified",typeof e.ModifiedDate==="string"?e.ModifiedDate:nr(e.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n)}}for(var i=0;i!=Xa.length;++i){var s=Xa[i];var f=t.Props&&t.Props[s[1]]!=null?t.Props[s[1]]:e?e[s[1]]:null;if(f===true){f="1"}else{if(f===false){f="0"}else{if(typeof f=="number"){f=String(f)}}}if(f!=null){Ya(s[0],f,null,a,n)}}if(a.length>2){a[a.length]="</cp:coreProperties>";a[1]=a[1].replace("/>",">")}return a.join("")}var Za=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];sr.EXT_PROPS="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties";Ra.EXT_PROPS="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties";var Qa=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Ja(e,r,t,a){var n=[];if(typeof e=="string"){n=qe(e,a)}else{for(var i=0;i<e.length;++i){n=n.concat(e[i].map(function(e){return{v:e}}))}}var s=typeof r=="string"?qe(r,a).map(function(e){return e.v}):r;var f=0,o=0;if(s.length>0){for(var l=0;l!==n.length;l+=2){o=+n[l+1].v;switch(n[l].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Werkbladen":t.Worksheets=o;
t.SheetNames=s.slice(f,f+o);break;case"Named Ranges":case"":case"Benannte Bereiche":case"Navngivne omrder":t.NamedRanges=o;t.DefinedNames=s.slice(f,f+o);break;case"Charts":case"Diagramme":t.Chartsheets=o;t.ChartNames=s.slice(f,f+o);break}f+=o}}}function qa(e,r,t){var a={};if(!r){r={}}e=ze(e);Za.forEach(function(t){switch(t[2]){case"string":r[t[1]]=(e.match(Ye(t[0]))||[])[1];break;case"bool":r[t[1]]=(e.match(Ye(t[0]))||[])[1]==="true";break;case"raw":var n=e.match(new RegExp("<"+t[0]+"[^>]*>([\\s\\S]*?)</"+t[0]+">"));if(n&&n.length>0){a[t[1]]=n[1]}break}});if(a.HeadingPairs&&a.TitlesOfParts){Ja(a.HeadingPairs,a.TitlesOfParts,r,t)}return r}var en=ar("Properties",null,{xmlns:sr.EXT_PROPS,"xmlns:vt":sr.vt});function rn(e){var r=[],t=ar;if(!e){e={}}e.Application="SheetJS";r[r.length]=Se;r[r.length]=en;Za.forEach(function(a){if(e[a[1]]===undefined){return}var n;switch(a[2]){case"string":n=String(e[a[1]]);break;case"bool":n=e[a[1]]?"true":"false";break}if(n!==undefined){r[r.length]=t(a[0],n)}});r[r.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"}));r[r.length]=t("TitlesOfParts",t("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+Pe(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"}));if(r.length>2){r[r.length]="</Properties>";r[1]=r[1].replace("/>",">")}return r.join("")}sr.CUST_PROPS="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties";Ra.CUST_PROPS="http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties";var tn=/<[^>]+>[^<]*/g;function an(e,r){var t={},a="";var n=e.match(tn);if(n){for(var i=0;i!=n.length;++i){var s=n[i],f=ye(s);switch(f[0]){case"<?xml":break;case"<Properties":break;case"<property":a=f.name;break;case"</property>":a=null;break;default:if(s.indexOf("<vt:")===0){var o=s.split(">");var l=o[0].slice(4),c=o[1];switch(l){case"lpstr":case"bstr":case"lpwstr":t[a]=De(c);
break;case"bool":t[a]=Ve(c);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":t[a]=parseInt(c,10);break;case"r4":case"r8":case"decimal":t[a]=parseFloat(c);break;case"filetime":case"date":t[a]=ie(c);break;case"cy":case"error":t[a]=De(c);break;default:if(l.slice(-1)=="/"){break}if(r.WTF&&typeof console!=="undefined"){console.warn("Unexpected",s,l,o)}}}else{if(s.slice(0,2)==="</"){}else{if(r.WTF){throw new Error(s)}}}}}}return t}var nn=ar("Properties",null,{xmlns:sr.CUST_PROPS,"xmlns:vt":sr.vt});function sn(e){var r=[Se,nn];if(!e){return r.join("")}var t=1;j(e).forEach(function a(n){++t;r[r.length]=ar("property",ir(e[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:n})});if(r.length>2){r[r.length]="</Properties>";r[1]=r[1].replace("/>",">")}return r.join("")}var fn={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};var on=Y(fn);function ln(e,r,t){r=on[r]||r;e[r]=t}function cn(e,r){var t=[];j(fn).map(function(e){for(var r=0;r<Xa.length;++r){if(Xa[r][1]==e){return Xa[r]}}for(r=0;r<Za.length;++r){if(Za[r][1]==e){return Za[r]}}throw e}).forEach(function(a){if(e[a[1]]==null){return}var n=r&&r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:e[a[1]];switch(a[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}if(typeof n=="number"){n=String(n)}else{if(n===true||n===false){n=n?"1":"0"}else{if(n instanceof Date){n=new Date(n).toISOString().replace(/\.\d*Z/,"")}}}t.push(rr(fn[a[1]]||a[1],n))});return ar("DocumentProperties",t.join(""),{xmlns:fr.o})}function hn(e,r){var t=["Worksheets","SheetNames"];var a="CustomDocumentProperties";var n=[];if(e){j(e).forEach(function(r){if(!e.hasOwnProperty(r)){return}for(var a=0;a<Xa.length;
++a){if(r==Xa[a][1]){return}}for(a=0;a<Za.length;++a){if(r==Za[a][1]){return}}for(a=0;a<t.length;++a){if(r==t[a]){return}}var i=e[r];var s="string";if(typeof i=="number"){s="float";i=String(i)}else{if(i===true||i===false){s="boolean";i=i?"1":"0"}else{i=String(i)}}n.push(ar(Ne(r),i,{"dt:dt":s}))})}if(r){j(r).forEach(function(t){if(!r.hasOwnProperty(t)){return}if(e&&e.hasOwnProperty(t)){return}var a=r[t];var i="string";if(typeof a=="number"){i="float";a=String(a)}else{if(a===true||a===false){i="boolean";a=a?"1":"0"}else{if(a instanceof Date){i="dateTime.tz";a=a.toISOString()}else{a=String(a)}}}n.push(ar(Ne(t),a,{"dt:dt":i}))})}return"<"+a+' xmlns="'+fr.o+'">'+n.join("")+"</"+a+">"}function un(e){var r=e._R(4),t=e._R(4);return new Date((t/10000000*Math.pow(2,32)+r/10000000-11644473600)*1000).toISOString().replace(/\.000/,"")}function dn(e){var r=typeof e=="string"?new Date(Date.parse(e)):e;var t=r.getTime()/1000+11644473600;var a=t%Math.pow(2,32),n=(t-a)/Math.pow(2,32);a*=10000000;n*=10000000;var i=a/Math.pow(2,32)|0;if(i>0){a=a%Math.pow(2,32);n+=i}var s=Gr(8);s._W(4,a);s._W(4,n);return s}function pn(e,r,t){var a=e.l;var n=e._R(0,"lpstr-cp");if(t){while(e.l-a&3){++e.l}}return n}function vn(e,r,t){var a=e._R(0,"lpwstr");if(t){e.l+=4-(a.length+1&3)&3}return a}function gn(e,r,t){if(r===31){return vn(e)}return pn(e,r,t)}function mn(e,r,t){return gn(e,r,t===false?0:4)}function bn(e,r){if(!r){throw new Error("VtUnalignedString must have positive length")}return gn(e,r,0)}function wn(e){var r=e._R(4);var t=[];for(var a=0;a!=r;++a){t[a]=e._R(0,"lpstr-cp").replace(I,"")}return t}function Cn(e){return wn(e)}function En(e){var r=Tn(e,ua);var t=Tn(e,ta);return[r,t]}function kn(e){var r=e._R(4);var t=[];for(var a=0;a!=r/2;++a){t.push(En(e))}return t}function Sn(e){return kn(e)}function An(e,r){var t=e._R(4);var a={};for(var n=0;n!=t;++n){var i=e._R(4);var s=e._R(4);a[i]=e._R(s,r===1200?"utf16le":"utf8").replace(I,"").replace(R,"!");if(r===1200&&s%2){e.l+=2}}if(e.l&3){e.l=e.l>>2+1<<2
}return a}function _n(e){var r=e._R(4);var t=e.slice(e.l,e.l+r);e.l+=r;if((r&3)>0){e.l+=4-(r&3)&3}return t}function Bn(e){var r={};r.Size=e._R(4);e.l+=r.Size+3-(r.Size-1)%4;return r}function Tn(e,r,t){var a=e._R(2),n,i=t||{};e.l+=2;if(r!==na){if(a!==r&&da.indexOf(r)===-1){throw new Error("Expected type "+r+" saw "+a)}}switch(r===na?a:r){case 2:n=e._R(2,"i");if(!i.raw){e.l+=2}return n;case 3:n=e._R(4,"i");return n;case 11:return e._R(4)!==0;case 19:n=e._R(4);return n;case 30:return pn(e,a,4).replace(I,"");case 31:return vn(e);case 64:return un(e);case 65:return _n(e);case 71:return Bn(e);case 80:return mn(e,a,!i.raw).replace(I,"");case 81:return bn(e,a).replace(I,"");case 4108:return Sn(e);case 4126:return Cn(e);default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+a)}}function yn(e,r){var t=Gr(4),a=Gr(4);t._W(4,e==80?31:e);switch(e){case 3:a._W(-4,r);break;case 5:a=Gr(8);a._W(8,r,"f");break;case 11:a._W(4,r?1:0);break;case 64:a=dn(r);break;case 31:case 80:a=Gr(4+2*(r.length+1)+(r.length%2?0:2));a._W(4,r.length+1);a._W(0,r,"dbcs");while(a.l!=a.length){a._W(1,0)}break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}return x([t,a])}function xn(e,r){var t=e.l;var a=e._R(4);var n=e._R(4);var i=[],s=0;var f=0;var l=-1,c={};for(s=0;s!=n;++s){var h=e._R(4);var u=e._R(4);i[s]=[h,u+t]}i.sort(function(e,r){return e[1]-r[1]});var d={};for(s=0;s!=n;++s){if(e.l!==i[s][1]){var p=true;if(s>0&&r){switch(r[i[s-1][0]].t){case 2:if(e.l+2===i[s][1]){e.l+=2;p=false}break;case 80:if(e.l<=i[s][1]){e.l=i[s][1];p=false}break;case 4108:if(e.l<=i[s][1]){e.l=i[s][1];p=false}break}}if((!r||s==0)&&e.l<=i[s][1]){p=false;e.l=i[s][1]}if(p){throw new Error("Read Error: Expected address "+i[s][1]+" at "+e.l+" :"+s)}}if(r){var v=r[i[s][0]];d[v.n]=Tn(e,v.t,{raw:true});if(v.p==="version"){d[v.n]=String(d[v.n]>>16)+"."+("0000"+String(d[v.n]&65535)).slice(-4)}if(v.n=="CodePage"){switch(d[v.n]){case 0:d[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 10000:case 1200:case 1201:case 1252:case 65000:case -536:case 65001:case -535:o(f=d[v.n]>>>0&65535);
break;default:throw new Error("Unsupported CodePage: "+d[v.n])}}}else{if(i[s][0]===1){f=d.CodePage=Tn(e,ra);o(f);if(l!==-1){var g=e.l;e.l=i[l][1];c=An(e,f);e.l=g}}else{if(i[s][0]===0){if(f===0){l=s;e.l=i[s+1][1];continue}c=An(e,f)}else{var m=c[i[s][0]];var b;switch(e[e.l]){case 65:e.l+=4;b=_n(e);break;case 30:e.l+=4;b=mn(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4;b=mn(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4;b=e._R(4,"i");break;case 19:e.l+=4;b=e._R(4);break;case 5:e.l+=4;b=e._R(8,"f");break;case 11:e.l+=4;b=Mn(e,4);break;case 64:e.l+=4;b=ie(un(e));break;default:throw new Error("unparsed value: "+e[e.l])}d[m]=b}}}}e.l=t+a;return d}var In=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"].concat(Qa);function Rn(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date){return 64}break}return -1}function Dn(e,r,t){var a=Gr(8),n=[],i=[];var s=8,f=0;var o=Gr(8),l=Gr(8);o._W(4,2);o._W(4,1200);l._W(4,1);i.push(o);n.push(l);s+=8+o.length;if(!r){l=Gr(8);l._W(4,0);n.unshift(l);var c=[Gr(4)];c[0]._W(4,e.length);for(f=0;f<e.length;++f){var h=e[f][0];o=Gr(4+4+2*(h.length+1)+(h.length%2?0:2));o._W(4,f+2);o._W(4,h.length+1);o._W(0,h,"dbcs");while(o.l!=o.length){o._W(1,0)}c.push(o)}o=x(c);i.unshift(o);s+=8+o.length}for(f=0;f<e.length;++f){if(r&&!r[e[f][0]]){continue}if(In.indexOf(e[f][0])>-1){continue}if(e[f][1]==null){continue}var u=e[f][1],d=0;if(r){d=+r[e[f][0]];var p=t[d];if(p.p=="version"&&typeof u=="string"){var v=u.split(".");u=(+v[0]<<16)+(+v[1]||0)}o=yn(p.t,u)}else{var g=Rn(u);if(g==-1){g=31;u=String(u)}o=yn(g,u)}i.push(o);l=Gr(8);l._W(4,!r?2+f:d);n.push(l);s+=8+o.length}var m=8*(i.length+1);for(f=0;f<i.length;++f){n[f]._W(4,m);m+=i[f].length}a._W(4,s);a._W(4,i.length);return x([a].concat(n).concat(i))}function On(e,r,t){var a=e.content;if(!a){return{}}zr(a,0);var n,i,s,f,o=0;a.chk("feff","Byte Order: ");a._R(2);var l=a._R(4);var c=a._R(16);if(c!==W.utils.consts.HEADER_CLSID&&c!==t){throw new Error("Bad PropertySet CLSID "+c)
}n=a._R(4);if(n!==1&&n!==2){throw new Error("Unrecognized #Sets: "+n)}i=a._R(16);f=a._R(4);if(n===1&&f!==a.l){throw new Error("Length mismatch: "+f+" !== "+a.l)}else{if(n===2){s=a._R(16);o=a._R(4)}}var h=xn(a,r);var u={SystemIdentifier:l};for(var d in h){u[d]=h[d]}u.FMTID=i;if(n===1){return u}if(o-a.l==2){a.l+=2}if(a.l!==o){throw new Error("Length mismatch 2: "+a.l+" !== "+o)}var p;try{p=xn(a,null)}catch(v){}for(d in p){u[d]=p[d]}u.FMTID=[i,s];return u}function Fn(e,r,t,a,n,i){var s=Gr(n?68:48);var f=[s];s._W(2,65534);s._W(2,0);s._W(4,842412599);s._W(16,W.utils.consts.HEADER_CLSID,"hex");s._W(4,n?2:1);s._W(16,r,"hex");s._W(4,n?68:48);var o=Dn(e,t,a);f.push(o);if(n){var l=Dn(n,null,null);s._W(16,i,"hex");s._W(4,68+o.length);f.push(l)}return x(f)}function Pn(e,r){e._R(r);return null}function Nn(e,r){if(!r){r=Gr(e)}for(var t=0;t<e;++t){r._W(1,0)}return r}function Ln(e,r,t){var a=[],n=e.l+r;while(e.l<n){a.push(t(e,n-e.l))}if(n!==e.l){throw new Error("Slurp error")}return a}function Mn(e,r){return e._R(r)===1}function Un(e,r){if(!r){r=Gr(2)}r._W(2,+!!e);return r}function Hn(e){return e._R(2,"u")}function Wn(e,r){if(!r){r=Gr(2)}r._W(2,e);return r}function Vn(e,r){return Ln(e,r,Hn)}function zn(e){var r=e._R(1),t=e._R(1);return t===1?r:r===1}function Xn(e,r,t){if(!t){t=Gr(2)}t._W(1,+e);t._W(1,r=="e"?1:0);return t}function Gn(e,t,a){var n=e._R(a&&a.biff>=12?2:1);var i="sbcs-cont";var s=r;if(a&&a.biff>=8){r=1200}if(!a||a.biff==8){var f=e._R(1);if(f){i="dbcs-cont"}}else{if(a.biff==12){i="wstr"}}if(a.biff>=2&&a.biff<=5){i="cpstr"}var o=n?e._R(n,i):"";r=s;return o}function jn(e){var t=r;r=1200;var a=e._R(2),n=e._R(1);var i=n&4,s=n&8;var f=1+(n&1);var o=0,l;var c={};if(s){o=e._R(2)}if(i){l=e._R(4)}var h=f==2?"dbcs-cont":"sbcs-cont";var u=a===0?"":e._R(a,h);if(s){e.l+=4*o}if(i){e.l+=l}c.t=u;if(!s){c.raw="<t>"+c.t+"</t>";c.r=c.t}r=t;return c}function Kn(e,r,t){var a;if(t){if(t.biff>=2&&t.biff<=5){return e._R(r,"cpstr")}if(t.biff>=12){return e._R(r,"dbcs-cont")}}var n=e._R(1);if(n===0){a=e._R(r,"sbcs-cont")
}else{a=e._R(r,"dbcs-cont")}return a}function Yn(e,r,t){var a=e._R(t&&t.biff==2?1:2);if(a===0){e.l++;return""}return Kn(e,a,t)}function $n(e,r,t){if(t.biff>5){return Yn(e,r,t)}var a=e._R(1);if(a===0){e.l++;return""}return e._R(a,t.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Zn(e,r,t){if(!t){t=Gr(3+2*e.length)}t._W(2,e.length);t._W(1,1);t._W(31,e,"utf16le");return t}function Qn(e){var r=e._R(1);e.l++;var t=e._R(2);e.l+=2;return[r,t]}function Jn(e){var r=e._R(4),t=e.l;var a=false;if(r>24){e.l+=r-24;if(e._R(16)==="795881f43b1d7f48af2c825dc4852763"){a=true}e.l=t}var n=e._R((a?r-24:r)>>1,"utf16le").replace(I,"");if(a){e.l+=24}return n}function qn(e){e.l+=2;var r=e._R(0,"lpstr-ansi");e.l+=2;if(e._R(2)!=57005){throw new Error("Bad FileMoniker")}var t=e._R(4);if(t===0){return r.replace(/\\/g,"/")}var a=e._R(4);if(e._R(2)!=3){throw new Error("Bad FileMoniker")}var n=e._R(a>>1,"utf16le").replace(I,"");return n}function ei(e,r){var t=e._R(16);r-=16;switch(t){case"e0c9ea79f9bace118c8200aa004ba90b":return Jn(e,r);case"0303000000000000c000000000000046":return qn(e,r);default:throw new Error("Unsupported Moniker "+t)}}function ri(e){var r=e._R(4);var t=r>0?e._R(r,"utf16le").replace(I,""):"";return t}function ti(e,r){var t=e.l+r;var a=e._R(4);if(a!==2){throw new Error("Unrecognized streamVersion: "+a)}var n=e._R(2);e.l+=2;var i,s,f,o,l="",c,h;if(n&16){i=ri(e,t-e.l)}if(n&128){s=ri(e,t-e.l)}if((n&257)===257){f=ri(e,t-e.l)}if((n&257)===1){o=ei(e,t-e.l)}if(n&8){l=ri(e,t-e.l)}if(n&32){c=e._R(16)}if(n&64){h=un(e)}e.l=t;var u=s||f||o||"";if(u&&l){u+="#"+l}if(!u){u="#"+l}var d={Target:u};if(c){d.guid=c}if(h){d.time=h}if(i){d.Tooltip=i}return d}function ai(e){var r=Gr(512),t=0;var a=e.Target;var n=a.indexOf("#")>-1?31:23;switch(a.charAt(0)){case"#":n=28;break;case".":n&=~2;break}r._W(4,2);r._W(4,n);var i=[8,6815827,6619237,4849780,83];for(t=0;t<i.length;++t){r._W(4,i[t])}if(n==28){a=a.slice(1);r._W(4,a.length+1);for(t=0;t<a.length;++t){r._W(2,a.charCodeAt(t))}r._W(2,0)}else{if(n&2){i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" ");
for(t=0;t<i.length;++t){r._W(1,parseInt(i[t],16))}r._W(4,2*(a.length+1));for(t=0;t<a.length;++t){r._W(2,a.charCodeAt(t))}r._W(2,0)}else{i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" ");for(t=0;t<i.length;++t){r._W(1,parseInt(i[t],16))}var s=0;while(a.slice(s*3,s*3+3)=="../"||a.slice(s*3,s*3+3)=="..\\"){++s}r._W(2,s);r._W(4,a.length+1);for(t=0;t<a.length;++t){r._W(1,a.charCodeAt(t)&255)}r._W(1,0);r._W(2,65535);r._W(2,57005);for(t=0;t<6;++t){r._W(4,0)}}}return r.slice(0,r.l)}function ni(e){var r=e._R(1),t=e._R(1),a=e._R(1),n=e._R(1);return[r,t,a,n]}function ii(e,r){var t=ni(e,r);t[3]=0;return t}function si(e){var r=e._R(2);var t=e._R(2);var a=e._R(2);return{r:r,c:t,ixfe:a}}function fi(e,r,t,a){if(!a){a=Gr(6)}a._W(2,e);a._W(2,r);a._W(2,t||0);return a}function oi(e){var r=e._R(2);var t=e._R(2);e.l+=8;return{type:r,flags:t}}function li(e,r,t){return r===0?"":$n(e,r,t)}function ci(e,r,t){var a=t.biff>8?4:2;var n=e._R(a),i=e._R(a,"i"),s=e._R(a,"i");return[n,i,s]}function hi(e){var r=e._R(2);var t=Mt(e);return[r,t]}function ui(e,r,t){e.l+=4;r-=4;var a=e.l+r;var n=Gn(e,r,t);var i=e._R(2);a-=e.l;if(i!==a){throw new Error("Malformed AddinUdf: padding = "+a+" != "+i)}e.l+=i;return n}function di(e){var r=e._R(2);var t=e._R(2);var a=e._R(2);var n=e._R(2);return{s:{c:a,r:r},e:{c:n,r:t}}}function pi(e,r){if(!r){r=Gr(8)}r._W(2,e.s.r);r._W(2,e.e.r);r._W(2,e.s.c);r._W(2,e.e.c);return r}function vi(e){var r=e._R(2);var t=e._R(2);var a=e._R(1);var n=e._R(1);return{s:{c:a,r:r},e:{c:n,r:t}}}var gi=vi;function mi(e){e.l+=4;var r=e._R(2);var t=e._R(2);var a=e._R(2);e.l+=12;return[t,r,a]}function bi(e){var r={};e.l+=4;e.l+=16;r.fSharedNote=e._R(2);e.l+=4;return r}function wi(e){var r={};e.l+=4;e.cf=e._R(2);return r}function Ci(e){e.l+=2;e.l+=e._R(2)}var Ei={0:Ci,4:Ci,5:Ci,6:Ci,7:wi,8:Ci,9:Ci,10:Ci,11:Ci,12:Ci,13:bi,14:Ci,15:Ci,16:Ci,17:Ci,18:Ci,19:Ci,20:Ci,21:mi};function ki(e,r){var t=e.l+r;var a=[];while(e.l<t){var n=e._R(2);e.l-=2;try{a.push(Ei[n](e,t-e.l))}catch(i){e.l=t;return a
}}if(e.l!=t){e.l=t}return a}function Si(e,r){var t={BIFFVer:0,dt:0};t.BIFFVer=e._R(2);r-=2;if(r>=2){t.dt=e._R(2);e.l-=2}switch(t.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(r>6){throw new Error("Unexpected BIFF Ver "+t.BIFFVer)}}e._R(r);return t}function Ai(e,r,t){var a=1536,n=16;switch(t.bookType){case"biff8":break;case"biff5":a=1280;n=8;break;case"biff4":a=4;n=6;break;case"biff3":a=3;n=6;break;case"biff2":a=2;n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Gr(n);i._W(2,a);i._W(2,r);if(n>4){i._W(2,29282)}if(n>6){i._W(2,1997)}if(n>8){i._W(2,49161);i._W(2,1);i._W(2,1798);i._W(2,0)}return i}function _i(e,r){if(r===0){return 1200}if(e._R(2)!==1200){}return 1200}function Bi(e,r,t){if(t.enc){e.l+=r;return""}var a=e.l;var n=$n(e,0,t);e._R(r+a-e.l);return n}function Ti(e,r){var t=!r||r.biff==8;var a=Gr(t?112:54);a._W(r.biff==8?2:1,7);if(t){a._W(1,0)}a._W(4,859007059);a._W(4,5458548|(t?0:536870912));while(a.l<a.length){a._W(1,t?0:32)}return a}function yi(e,r,t){var a=t&&t.biff==8||r==2?e._R(2):(e.l+=r,0);return{fDialog:a&16}}function xi(e,r,t){var a=e._R(4);var n=e._R(1)&3;var i=e._R(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var s=Gn(e,0,t);if(s.length===0){s="Sheet1"}return{pos:a,hs:n,dt:i,name:s}}function Ii(e,r){var t=!r||r.biff>=8?2:1;var a=Gr(8+t*e.name.length);a._W(4,e.pos);a._W(1,e.hs||0);a._W(1,e.dt);a._W(1,e.name.length);if(r.biff>=8){a._W(1,1)}a._W(t*e.name.length,e.name,r.biff<8?"sbcs":"utf16le");var n=a.slice(0,a.l);n.l=a.l;return n}function Ri(e,r){var t=e.l+r;var a=e._R(4);var n=e._R(4);var i=[];for(var s=0;s!=n&&e.l<t;++s){i.push(jn(e))}i.Count=a;i.Unique=n;return i}function Di(e,r){var t={};t.dsst=e._R(2);e.l+=r-2;return t}function Oi(e){var r={};r.r=e._R(2);r.c=e._R(2);r.cnt=e._R(2)-r.c;var t=e._R(2);e.l+=4;var a=e._R(1);e.l+=3;if(a&7){r.level=a&7}if(a&32){r.hidden=true}if(a&64){r.hpt=t/20}return r}function Fi(e){var r=oi(e);
if(r.type!=2211){throw new Error("Invalid Future Record "+r.type)}var t=e._R(4);return t!==0}function Pi(e){e._R(2);return e._R(4)}function Ni(e,r,t){var a=0;if(!(t&&t.biff==2)){a=e._R(2)}var n=e._R(2);if(t&&t.biff==2){a=1-(n>>15);n&=32767}var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,n]}function Li(e){var r=e._R(2),t=e._R(2),a=e._R(2),n=e._R(2);var i=e._R(2),s=e._R(2),f=e._R(2);var o=e._R(2),l=e._R(2);return{Pos:[r,t],Dim:[a,n],Flags:i,CurTab:s,FirstTab:f,Selected:o,TabRatio:l}}function Mi(){var e=Gr(18);e._W(2,0);e._W(2,0);e._W(2,29280);e._W(2,17600);e._W(2,56);e._W(2,0);e._W(2,0);e._W(2,1);e._W(2,500);return e}function Ui(e,r,t){if(t&&t.biff>=2&&t.biff<8){return{}}var a=e._R(2);return{RTL:a&64}}function Hi(e){var r=Gr(18),t=1718;if(e&&e.RTL){t|=64}r._W(2,t);r._W(4,0);r._W(4,64);r._W(4,0);r._W(4,0);return r}function Wi(e,r,t){var a={dyHeight:e._R(2),fl:e._R(2)};switch(t&&t.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}a.name=Gn(e,0,t);return a}function Vi(e,r){var t=e.name||"Arial";var a=r&&r.biff==5,n=a?15+t.length:16+2*t.length;var i=Gr(n);i._W(2,(e.sz||12)*20);i._W(4,0);i._W(2,400);i._W(4,0);i._W(2,0);i._W(1,t.length);if(!a){i._W(1,1)}i._W((a?1:2)*t.length,t,a?"sbcs":"utf16le");return i}function zi(e){var r=si(e);r.isst=e._R(4);return r}function Xi(e,r,t){var a=e.l+r;var n=si(e,6);if(t.biff==2){e.l++}var i=Yn(e,a-e.l,t);n.val=i;return n}function Gi(e,r,t,a,n){var i=!n||n.biff==8;var s=Gr(6+2+ +i+(1+i)*t.length);fi(e,r,a,s);s._W(2,t.length);if(i){s._W(1,1)}s._W((1+i)*t.length,t,i?"utf16le":"sbcs");return s}function ji(e,r,t){var a=e._R(2);var n=$n(e,0,t);return[a,n]}function Ki(e,r,t,a){var n=t&&t.biff==5;if(!a){a=Gr(n?3+r.length:5+2*r.length)}a._W(2,e);a._W(n?1:2,r.length);if(!n){a._W(1,1)}a._W((n?1:2)*r.length,r,n?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;if(i.l==null){i.l=i.length}return i}var Yi=$n;function $i(e,r,t){var a=e.l+r;var n=t.biff==8||!t.biff?4:2;var i=e._R(n),s=e._R(n);var f=e._R(2),o=e._R(2);
e.l=a;return{s:{r:i,c:f},e:{r:s,c:o}}}function Zi(e,r){var t=r.biff==8||!r.biff?4:2;var a=Gr(2*t+6);a._W(t,e.s.r);a._W(t,e.e.r+1);a._W(2,e.s.c);a._W(2,e.e.c+1);a._W(2,0);return a}function Qi(e){var r=e._R(2),t=e._R(2);var a=hi(e);return{r:r,c:t,ixfe:a[0],rknum:a[1]}}function Ji(e,r){var t=e.l+r-2;var a=e._R(2),n=e._R(2);var i=[];while(e.l<t){i.push(hi(e))}if(e.l!==t){throw new Error("MulRK read error")}var s=e._R(2);if(i.length!=s-n+1){throw new Error("MulRK length mismatch")}return{r:a,c:n,C:s,rkrec:i}}function qi(e,r){var t=e.l+r-2;var a=e._R(2),n=e._R(2);var i=[];while(e.l<t){i.push(e._R(2))}if(e.l!==t){throw new Error("MulBlank read error")}var s=e._R(2);if(i.length!=s-n+1){throw new Error("MulBlank length mismatch")}return{r:a,c:n,C:s,ixfe:i}}function es(e,r,t,a){var n={};var i=e._R(4),s=e._R(4);var f=e._R(4),o=e._R(2);n.patternType=Ca[f>>26];if(!a.cellStyles){return n}n.alc=i&7;n.fWrap=i>>3&1;n.alcV=i>>4&7;n.fJustLast=i>>7&1;n.trot=i>>8&255;n.cIndent=i>>16&15;n.fShrinkToFit=i>>20&1;n.iReadOrder=i>>22&2;n.fAtrNum=i>>26&1;n.fAtrFnt=i>>27&1;n.fAtrAlc=i>>28&1;n.fAtrBdr=i>>29&1;n.fAtrPat=i>>30&1;n.fAtrProt=i>>31&1;n.dgLeft=s&15;n.dgRight=s>>4&15;n.dgTop=s>>8&15;n.dgBottom=s>>12&15;n.icvLeft=s>>16&127;n.icvRight=s>>23&127;n.grbitDiag=s>>30&3;n.icvTop=f&127;n.icvBottom=f>>7&127;n.icvDiag=f>>14&127;n.dgDiag=f>>21&15;n.icvFore=o&127;n.icvBack=o>>7&127;n.fsxButton=o>>14&1;return n}function rs(e,r,t){var a={};a.ifnt=e._R(2);a.numFmtId=e._R(2);a.flags=e._R(2);a.fStyle=a.flags>>2&1;r-=6;a.data=es(e,r,a.fStyle,t);return a}function ts(e,r,t,a){var n=t&&t.biff==5;if(!a){a=Gr(n?16:20)}a._W(2,0);if(e.style){a._W(2,e.numFmtId||0);a._W(2,65524)}else{a._W(2,e.numFmtId||0);a._W(2,r<<4)}a._W(4,0);a._W(4,0);if(!n){a._W(4,0)}a._W(2,0);return a}function as(e){e.l+=4;var r=[e._R(2),e._R(2)];if(r[0]!==0){r[0]--}if(r[1]!==0){r[1]--}if(r[0]>7||r[1]>7){throw new Error("Bad Gutters: "+r.join("|"))}return r}function ns(e){var r=Gr(8);r._W(4,0);r._W(2,e[0]?e[0]+1:0);r._W(2,e[1]?e[1]+1:0);return r
}function is(e,r,t){var a=si(e,6);if(t.biff==2){++e.l}var n=zn(e,2);a.val=n;a.t=n===true||n===false?"b":"e";return a}function ss(e,r,t,a,n,i){var s=Gr(8);fi(e,r,a,s);Xn(t,i,s);return s}function fs(e){var r=si(e,6);var t=Xt(e,8);r.val=t;return r}function os(e,r,t,a){var n=Gr(14);fi(e,r,a,n);Gt(t,n);return n}var ls=li;function cs(e,r,t){var a=e.l+r;var n=e._R(2);var i=e._R(2);t.sbcch=i;if(i==1025||i==14849){return[i,n]}if(i<1||i>255){throw new Error("Unexpected SupBook type: "+i)}var s=Kn(e,i);var f=[];while(a>e.l){f.push(Yn(e))}return[i,n,s,f]}function hs(e,r,t){var a=e._R(2);var n;var i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};if(t.sbcch===14849){n=ui(e,r-2,t)}i.body=n||e._R(r-2);if(typeof n==="string"){i.Name=n}return i}var us=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function ds(e,r,t){var a=e.l+r;var n=e._R(2);var i=e._R(1);var s=e._R(1);var f=e._R(t&&t.biff==2?1:2);var o=0;if(!t||t.biff>=5){if(t.biff!=5){e.l+=2}o=e._R(2);if(t.biff==5){e.l+=2}e.l+=4}var l=Kn(e,s,t);if(n&32){l=us[l.charCodeAt(0)]}var c=a-e.l;if(t&&t.biff==2){--c}var h=a==e.l||f===0?[]:yh(e,c,t,f);return{chKey:i,Name:l,itab:o,rgce:h}}function ps(e,r,t){if(t.biff<8){return vs(e,r,t)}var a=[],n=e.l+r,i=e._R(t.biff>8?4:2);while(i--!==0){a.push(ci(e,t.biff>8?12:6,t))}if(e.l!=n){throw new Error("Bad ExternSheet: "+e.l+" != "+n)}return a}function vs(e,r,t){if(e[e.l+1]==3){e[e.l]++}var a=Gn(e,r,t);return a.charCodeAt(0)==3?a.slice(1):a}function gs(e,r,t){if(t.biff<8){e.l+=r;return}var a=e._R(2);var n=e._R(2);var i=Kn(e,a,t);var s=Kn(e,n,t);return[i,s]}function ms(e,r,t){var a=vi(e,6);e.l++;var n=e._R(1);r-=8;return[xh(e,r,t),n,a]}function bs(e,r,t){var a=gi(e,6);switch(t.biff){case 2:e.l++;r-=7;break;case 3:case 4:e.l+=2;
r-=8;break;default:e.l+=6;r-=12}return[a,Bh(e,r,t,a)]}function ws(e){var r=e._R(4)!==0;var t=e._R(4)!==0;var a=e._R(4);return[r,t,a]}function Cs(e,r,t){if(t.biff<8){return}var a=e._R(2),n=e._R(2);var i=e._R(2),s=e._R(2);var f=$n(e,0,t);if(t.biff<8){e._R(1)}return[{r:a,c:n},f,s,i]}function Es(e,r,t){return Cs(e,r,t)}function ks(e,r){var t=[];var a=e._R(2);while(a--){t.push(di(e,r))}return t}function Ss(e){var r=Gr(2+e.length*8);r._W(2,e.length);for(var t=0;t<e.length;++t){pi(e[t],r)}return r}function As(e,r,t){if(t&&t.biff<8){return Bs(e,r,t)}var a=mi(e,22);var n=ki(e,r-22,a[1]);return{cmo:a,ft:n}}var _s=[];_s[8]=function(e,r){var t=e.l+r;e.l+=10;var a=e._R(2);e.l+=4;e.l+=2;e.l+=2;e.l+=2;e.l+=4;var n=e._R(1);e.l+=n;e.l=t;return{fmt:a}};function Bs(e,r,t){e.l+=4;var a=e._R(2);var n=e._R(2);var i=e._R(2);e.l+=2;e.l+=2;e.l+=2;e.l+=2;e.l+=2;e.l+=2;e.l+=2;e.l+=2;e.l+=2;e.l+=6;r-=36;var s=[];s.push((_s[a]||Xr)(e,r,t));return{cmo:[n,a,i],ft:s}}function Ts(e,r,t){var a=e.l;var n="";try{e.l+=4;var i=(t.lastobj||{cmo:[0,0]}).cmo[1];var s;if([0,5,7,11,12,14].indexOf(i)==-1){e.l+=6}else{s=Qn(e,6,t)}var f=e._R(2);e._R(2);Hn(e,2);var o=e._R(2);e.l+=o;for(var l=1;l<e.lens.length-1;++l){if(e.l-a!=e.lens[l]){throw new Error("TxO: bad continue record")}var c=e[e.l];var h=Kn(e,e.lens[l+1]-e.lens[l]-1);n+=h;if(n.length>=(c?f:2*f)){break}}if(n.length!==f&&n.length!==f*2){throw new Error("cchText: "+f+" != "+n.length)}e.l=a+r;return{t:n}}catch(u){e.l=a+r;return{t:n}}}function ys(e,r){var t=di(e,8);e.l+=16;var a=ti(e,r-24);return[t,a]}function xs(e){var r=Gr(24);var t=ct(e[0]);r._W(2,t.r);r._W(2,t.r);r._W(2,t.c);r._W(2,t.c);var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" ");for(var n=0;n<16;++n){r._W(1,parseInt(a[n],16))}return x([r,ai(e[1])])}function Is(e,r){e._R(2);var t=di(e,8);var a=e._R((r-10)/2,"dbcs-cont");a=a.replace(I,"");return[t,a]}function Rs(e){var r=e[1].Tooltip;var t=Gr(10+2*(r.length+1));t._W(2,2048);var a=ct(e[0]);t._W(2,a.r);t._W(2,a.r);t._W(2,a.c);t._W(2,a.c);
for(var n=0;n<r.length;++n){t._W(2,r.charCodeAt(n))}t._W(2,0);return t}function Ds(e){var r=[0,0],t;t=e._R(2);r[0]=wa[t]||t;t=e._R(2);r[1]=wa[t]||t;return r}function Os(e){if(!e){e=Gr(4)}e._W(2,1);e._W(2,1);return e}function Fs(e){var r=e._R(2);var t=[];while(r-->0){t.push(ii(e,8))}return t}function Ps(e){var r=e._R(2);var t=[];while(r-->0){t.push(ii(e,8))}return t}function Ns(e){e.l+=2;var r={cxfs:0,crc:0};r.cxfs=e._R(2);r.crc=e._R(4);return r}function Ls(e,r,t){if(!t.cellStyles){return Xr(e,r)}var a=t&&t.biff>=12?4:2;var n=e._R(a);var i=e._R(a);var s=e._R(a);var f=e._R(a);var o=e._R(2);if(a==2){e.l+=2}return{s:n,e:i,w:s,ixfe:f,flags:o}}function Ms(e,r){var t={};if(r<32){return t}e.l+=16;t.header=Xt(e,8);t.footer=Xt(e,8);e.l+=2;return t}function Us(e,r,t){var a={area:false};if(t.biff!=5){e.l+=r;return a}var n=e._R(1);e.l+=3;if(n&16){a.area=true}return a}function Hs(e){var r=Gr(2*e);for(var t=0;t<e;++t){r._W(2,t+1)}return r}var Ws=si;var Vs=Vn;var zs=Yn;function Xs(e){var r=e._R(2);var t=e._R(2);var a=e._R(4);var n={fmt:r,env:t,len:a,data:e.slice(e.l,e.l+a)};e.l+=a;return n}function Gs(e,r,t){var a=si(e,6);++e.l;var n=$n(e,r-7,t);a.t="str";a.val=n;return a}function js(e){var r=si(e,6);++e.l;var t=Xt(e,8);r.t="n";r.val=t;return r}function Ks(e,r,t){var a=Gr(15);gv(a,e,r);a._W(8,t,"f");return a}function Ys(e){var r=si(e,6);++e.l;var t=e._R(2);r.t="n";r.val=t;return r}function $s(e,r,t){var a=Gr(9);gv(a,e,r);a._W(2,t);return a}function Zs(e){var r=e._R(1);if(r===0){e.l++;return""}return e._R(r,"sbcs-cont")}function Qs(e,r){e.l+=6;e.l+=2;e.l+=1;e.l+=3;e.l+=1;e.l+=r-13}function Js(e,r,t){var a=e.l+r;var n=si(e,6);var i=e._R(2);var s=Kn(e,i,t);e.l=a;n.t="str";n.val=s;return n}var qs=function(){var e={1:437,2:850,3:1252,4:10000,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,255:16969};
function r(r,t){var a=[];var n=k(1);switch(t.type){case"base64":n=A(m.decode(r));break;case"binary":n=A(r);break;case"buffer":case"array":n=r;break}zr(n,0);var i=n._R(1);var s=false;var f=false,o=false;switch(i){case 2:case 3:break;case 48:f=true;s=true;break;case 49:f=true;break;case 131:s=true;break;case 139:s=true;break;case 140:s=true;o=true;break;case 245:s=true;break;default:throw new Error("DBF Unsupported Version: "+i.toString(16))}var l=0,c=0;if(i==2){l=n._R(2)}n.l+=3;if(i!=2){l=n._R(4)}if(i!=2){c=n._R(2)}var h=n._R(2);var u=1252;if(i!=2){n.l+=16;n._R(1);if(n[n.l]!==0){u=e[n[n.l]]}n.l+=1;n.l+=2}if(o){n.l+=36}var d=[],p={};var v=c-10-(f?264:0),g=o?32:11;while(i==2?n.l<n.length&&n[n.l]!=13:n.l<v){p={};p.name=cptable.utils.decode(u,n.slice(n.l,n.l+g)).replace(/[\u0000\r\n].*$/g,"");n.l+=g;p.type=String.fromCharCode(n._R(1));if(i!=2&&!o){p.offset=n._R(4)}p.len=n._R(1);if(i==2){p.offset=n._R(2)}p.dec=n._R(1);if(p.name.length){d.push(p)}if(i!=2){n.l+=o?13:14}switch(p.type){case"B":if((!f||p.len!=8)&&t.WTF){console.log("Skipping "+p.name+":"+p.type)}break;case"G":case"P":if(t.WTF){console.log("Skipping "+p.name+":"+p.type)}break;case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":case"0":case"@":case"+":break;default:throw new Error("Unknown Field Type: "+p.type)}}if(n[n.l]!==13){n.l=c-1}else{if(i==2){n.l=521}}if(i!=2){if(n._R(1)!==13){throw new Error("DBF Terminator not found "+n.l+" "+n[n.l])}n.l=c}var b=0,w=0;a[0]=[];for(w=0;w!=d.length;++w){a[0][w]=d[w].name}while(l-->0){if(n[n.l]===42){n.l+=h;continue}++n.l;a[++b]=[];w=0;for(w=0;w!=d.length;++w){var C=n.slice(n.l,n.l+d[w].len);n.l+=d[w].len;zr(C,0);var E=cptable.utils.decode(u,C);switch(d[w].type){case"C":a[b][w]=cptable.utils.decode(u,C);a[b][w]=a[b][w].trim();break;case"D":if(E.length===8){a[b][w]=new Date(+E.slice(0,4),+E.slice(4,6)-1,+E.slice(6,8))}else{a[b][w]=E}break;case"F":a[b][w]=parseFloat(E.trim());break;case"+":case"I":a[b][w]=o?C._R(-4,"i")^2147483648:C._R(4,"i");break;
case"L":switch(E.toUpperCase()){case"Y":case"T":a[b][w]=true;break;case"N":case"F":a[b][w]=false;break;case" ":case"?":a[b][w]=false;break;default:throw new Error("DBF Unrecognized L:|"+E+"|")}break;case"M":if(!s){throw new Error("DBF Unexpected MEMO for type "+i.toString(16))}a[b][w]="##MEMO##"+(o?parseInt(E.trim(),10):C._R(4));break;case"N":a[b][w]=+E.replace(/\u0000/g,"").trim();break;case"@":a[b][w]=new Date(C._R(-8,"f")-62135683200000);break;case"T":a[b][w]=new Date((C._R(4)-2440588)*86400000+C._R(4));break;case"Y":a[b][w]=C._R(4,"i")/10000;break;case"O":a[b][w]=-C._R(-8,"f");break;case"B":if(f&&d[w].len==8){a[b][w]=C._R(8,"f");break}case"G":case"P":C.l+=d[w].len;break;case"0":if(d[w].name==="_NullFlags"){break}default:throw new Error("DBF Unsupported data type "+d[w].type)}}}if(i!=2){if(n.l<n.length&&n[n.l++]!=26){throw new Error("DBF EOF Marker missing "+(n.l-1)+" of "+n.length+" "+n[n.l-1].toString(16))}}if(t&&t.sheetRows){a=a.slice(0,t.sheetRows)}return a}function t(e,t){var a=t||{};if(!a.dateNF){a.dateNF="yyyymmdd"}return wt(r(e,a),a)}function a(e,r){try{return mt(t(e,r),r)}catch(a){if(r&&r.WTF){throw a}}return{SheetNames:[],Sheets:{}}}var n={B:8,C:250,L:1,D:8,"?":0,"":0};function i(e,r){var t=r||{};if(t.type=="string"){throw new Error("Cannot write DBF to JS string")}var a=Kr();var i=Rg(e,{header:1,cellDates:true});var s=i[0],f=i.slice(1);var o=0,l=0,c=0,h=1;for(o=0;o<s.length;++o){if(o==null){continue}++c;if(typeof s[o]==="number"){s[o]=s[o].toString(10)}if(typeof s[o]!=="string"){throw new Error("DBF Invalid column name "+s[o]+" |"+typeof s[o]+"|")}if(s.indexOf(s[o])!==o){for(l=0;l<1024;++l){if(s.indexOf(s[o]+"_"+l)==-1){s[o]+="_"+l;break}}}}var u=pt(e["!ref"]);var d=[];for(o=0;o<=u.e.c-u.s.c;++o){var p=[];for(l=0;l<f.length;++l){if(f[l][o]!=null){p.push(f[l][o])}}if(p.length==0||s[o]==null){d[o]="?";continue}var v="",g="";for(l=0;l<p.length;++l){switch(typeof p[l]){case"number":g="B";break;case"string":g="C";break;case"boolean":g="L";break;case"object":g=p[l] instanceof Date?"D":"C";
break;default:g="C"}v=v&&v!=g?"C":g;if(v=="C"){break}}h+=n[v]||0;d[o]=v}var m=a.next(32);m._W(4,318902576);m._W(4,f.length);m._W(2,296+32*c);m._W(2,h);for(o=0;o<4;++o){m._W(4,0)}m._W(4,768);for(o=0,l=0;o<s.length;++o){if(s[o]==null){continue}var b=a.next(32);var w=(s[o].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);b._W(1,w,"sbcs");b._W(1,d[o]=="?"?"C":d[o],"sbcs");b._W(4,l);b._W(1,n[d[o]]||0);b._W(1,0);b._W(1,2);b._W(4,0);b._W(1,0);b._W(4,0);b._W(4,0);l+=n[d[o]]||0}var C=a.next(264);C._W(4,13);for(o=0;o<65;++o){C._W(4,0)}for(o=0;o<f.length;++o){var E=a.next(h);E._W(1,0);for(l=0;l<s.length;++l){if(s[l]==null){continue}switch(d[l]){case"L":E._W(1,f[o][l]==null?63:f[o][l]?84:70);break;case"B":E._W(8,f[o][l]||0,"f");break;case"D":if(!f[o][l]){E._W(8,"00000000","sbcs")}else{E._W(4,("0000"+f[o][l].getFullYear()).slice(-4),"sbcs");E._W(2,("00"+(f[o][l].getMonth()+1)).slice(-2),"sbcs");E._W(2,("00"+f[o][l].getDate()).slice(-2),"sbcs")}break;case"C":var k=String(f[o][l]||"");E._W(1,k,"sbcs");for(c=0;c<250-k.length;++c){E._W(1,32)}break}}}a.next(1)._W(1,26);return a.end()}return{to_workbook:a,to_sheet:t,from_sheet:i}}();var ef=function(){function e(e,t){switch(t.type){case"base64":return r(m.decode(e),t);case"binary":return r(e,t);case"buffer":return r(e.toString("binary"),t);case"array":return r(se(e),t)}throw new Error("Unrecognized type "+t.type)}function r(e,r){var t=e.split(/[\n\r]+/),a=-1,n=-1,i=0,s=0,f=[];var o=[];var l=null;var c={},h=[],u=[],d=[];var p=0,v;for(;i!==t.length;++i){p=0;var g=t[i].trim();var m=g.replace(/;;/g,"").split(";").map(function(e){return e.replace(/\u0001/g,";")});var b=m[0],w;if(g.length>0){switch(b){case"ID":break;case"E":break;case"B":break;case"O":break;case"P":if(m[1].charAt(0)=="P"){o.push(g.slice(3).replace(/;;/g,";"))}break;case"C":var C=false,E=false;for(s=1;s<m.length;++s){switch(m[s].charAt(0)){case"X":n=parseInt(m[s].slice(1))-1;E=true;break;case"Y":a=parseInt(m[s].slice(1))-1;if(!E){n=0}for(v=f.length;v<=a;++v){f[v]=[]}break;case"K":w=m[s].slice(1);
if(w.charAt(0)==='"'){w=w.slice(1,w.length-1)}else{if(w==="TRUE"){w=true}else{if(w==="FALSE"){w=false}else{if(!isNaN(le(w))){w=le(w);if(l!==null&&D.is_date(l)){w=re(w)}}else{if(!isNaN(ce(w).getDate())){w=ie(w)}}}}}if(typeof cptable!=="undefined"&&typeof w=="string"&&(r||{}).type!="string"&&(r||{}).codepage){w=cptable.utils.decode(r.codepage,w)}C=true;break;case"E":var k=Xl(m[s].slice(1),{r:a,c:n});f[a][n]=[f[a][n],k];break;default:if(r&&r.WTF){throw new Error("SYLK bad record "+g)}}}if(C){f[a][n]=w;l=null}break;case"F":var S=0;for(s=1;s<m.length;++s){switch(m[s].charAt(0)){case"X":n=parseInt(m[s].slice(1))-1;++S;break;case"Y":a=parseInt(m[s].slice(1))-1;for(v=f.length;v<=a;++v){f[v]=[]}break;case"M":p=parseInt(m[s].slice(1))/20;break;case"F":break;case"G":break;case"P":l=o[parseInt(m[s].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":d=m[s].slice(1).split(" ");for(v=parseInt(d[0],10);v<=parseInt(d[1],10);++v){p=parseInt(d[2],10);u[v-1]=p===0?{hidden:true}:{wch:p};fo(u[v-1])}break;case"C":n=parseInt(m[s].slice(1))-1;if(!u[n]){u[n]={}}break;case"R":a=parseInt(m[s].slice(1))-1;if(!h[a]){h[a]={}}if(p>0){h[a].hpt=p;h[a].hpx=ho(p)}else{if(p===0){h[a].hidden=true}}break;default:if(r&&r.WTF){throw new Error("SYLK bad record "+g)}}}if(S<1){l=null}break;default:if(r&&r.WTF){throw new Error("SYLK bad record "+g)}}}}if(h.length>0){c["!rows"]=h}if(u.length>0){c["!cols"]=u}if(r&&r.sheetRows){f=f.slice(0,r.sheetRows)}return[f,c]}function t(r,t){var a=e(r,t);var n=a[0],i=a[1];var s=wt(n,t);j(i).forEach(function(e){s[e]=i[e]});return s}function a(e,r){return mt(t(e,r),r)}function n(e,r,t,a){var n="C;Y"+(t+1)+";X"+(a+1)+";K";switch(e.t){case"n":n+=e.v||0;if(e.f&&!e.F){n+=";E"+jl(e.f,{r:t,c:a})}break;case"b":n+=e.v?"TRUE":"FALSE";break;case"e":n+=e.w||e.v;break;case"d":n+='"'+(e.w||e.v)+'"';break;case"s":n+='"'+e.v.replace(/"/g,"")+'"';break}return n}function i(e,r){r.forEach(function(r,t){var a="F;W"+(t+1)+" "+(t+1)+" ";if(r.hidden){a+="0"}else{if(typeof r.width=="number"){r.wpx=to(r.width)
}if(typeof r.wpx=="number"){r.wch=ao(r.wpx)}if(typeof r.wch=="number"){a+=Math.round(r.wch)}}if(a.charAt(a.length-1)!=" "){e.push(a)}})}function s(e,r){r.forEach(function(r,t){var a="F;";if(r.hidden){a+="M0;"}else{if(r.hpt){a+="M"+20*r.hpt+";"}else{if(r.hpx){a+="M"+20*co(r.hpx)+";"}}}if(a.length>2){e.push(a+"R"+(t+1))}})}function f(e,r){var t=["ID;PWXL;N;E"],a=[];var f=pt(e["!ref"]),o;var l=Array.isArray(e);var c="\r\n";t.push("P;PGeneral");t.push("F;P0;DG0G8;M255");if(e["!cols"]){i(t,e["!cols"])}if(e["!rows"]){s(t,e["!rows"])}t.push("B;Y"+(f.e.r-f.s.r+1)+";X"+(f.e.c-f.s.c+1)+";D"+[f.s.c,f.s.r,f.e.c,f.e.r].join(" "));for(var h=f.s.r;h<=f.e.r;++h){for(var u=f.s.c;u<=f.e.c;++u){var d=ht({r:h,c:u});o=l?(e[h]||[])[u]:e[d];if(!o||o.v==null&&(!o.f||o.F)){continue}a.push(n(o,e,h,u,r))}}return t.join(c)+c+a.join(c)+c+"E"+c}return{to_workbook:a,to_sheet:t,from_sheet:f}}();var rf=function(){function e(e,t){switch(t.type){case"base64":return r(m.decode(e),t);case"binary":return r(e,t);case"buffer":return r(e.toString("binary"),t);case"array":return r(se(e),t)}throw new Error("Unrecognized type "+t.type)}function r(e,r){var t=e.split("\n"),a=-1,n=-1,i=0,s=[];for(;i!==t.length;++i){if(t[i].trim()==="BOT"){s[++a]=[];n=0;continue}if(a<0){continue}var f=t[i].trim().split(",");var o=f[0],l=f[1];++i;var c=t[i].trim();switch(+o){case -1:if(c==="BOT"){s[++a]=[];n=0;continue}else{if(c!=="EOD"){throw new Error("Unrecognized DIF special command "+c)}}break;case 0:if(c==="TRUE"){s[a][n]=true}else{if(c==="FALSE"){s[a][n]=false}else{if(!isNaN(le(l))){s[a][n]=le(l)}else{if(!isNaN(ce(l).getDate())){s[a][n]=ie(l)}else{s[a][n]=l}}}}++n;break;case 1:c=c.slice(1,c.length-1);s[a][n++]=c!==""?c:null;break}if(c==="EOD"){break}}if(r&&r.sheetRows){s=s.slice(0,r.sheetRows)}return s}function t(r,t){return wt(e(r,t),t)}function a(e,r){return mt(t(e,r),r)}var n=function(){var e=function t(e,r,a,n,i){e.push(r);e.push(a+","+n);e.push('"'+i.replace(/"/g,'""')+'"')};var r=function a(e,r,t,n){e.push(r+","+t);e.push(r==1?'"'+n.replace(/"/g,'""')+'"':n)
};return function n(t){var a=[];var n=pt(t["!ref"]),i;var s=Array.isArray(t);e(a,"TABLE",0,1,"sheetjs");e(a,"VECTORS",0,n.e.r-n.s.r+1,"");e(a,"TUPLES",0,n.e.c-n.s.c+1,"");e(a,"DATA",0,0,"");for(var f=n.s.r;f<=n.e.r;++f){r(a,-1,0,"BOT");for(var o=n.s.c;o<=n.e.c;++o){var l=ht({r:f,c:o});i=s?(t[f]||[])[o]:t[l];if(!i){r(a,1,0,"");continue}switch(i.t){case"n":var c=g?i.w:i.v;if(!c&&i.v!=null){c=i.v}if(c==null){if(g&&i.f&&!i.F){r(a,1,0,"="+i.f)}else{r(a,1,0,"")}}else{r(a,0,c,"V")}break;case"b":r(a,0,i.v?1:0,i.v?"TRUE":"FALSE");break;case"s":r(a,1,0,!g||isNaN(i.v)?i.v:'="'+i.v+'"');break;case"d":if(!i.w){i.w=D.format(i.z||D._table[14],ee(ie(i.v)))}if(g){r(a,0,i.w,"V")}else{r(a,1,0,i.w)}break;default:r(a,1,0,"")}}}r(a,-1,0,"EOD");var h="\r\n";var u=a.join(h);return u}}();return{to_workbook:a,to_sheet:t,from_sheet:n}}();var tf=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function r(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(r,t){var a=r.split("\n"),n=-1,i=-1,s=0,f=[];for(;s!==a.length;++s){var o=a[s].trim().split(":");if(o[0]!=="cell"){continue}var l=ct(o[1]);if(f.length<=l.r){for(n=f.length;n<=l.r;++n){if(!f[n]){f[n]=[]}}}n=l.r;i=l.c;switch(o[2]){case"t":f[n][i]=e(o[3]);break;case"v":f[n][i]=+o[3];break;case"vtf":var c=o[o.length-1];case"vtc":switch(o[3]){case"nl":f[n][i]=+o[4]?true:false;break;default:f[n][i]=+o[4];break}if(o[2]=="vtf"){f[n][i]=[f[n][i],c]}}}if(t&&t.sheetRows){f=f.slice(0,t.sheetRows)}return f}function a(e,r){return wt(t(e,r),r)}function n(e,r){return mt(a(e,r),r)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n");var s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n";var f=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n");var o="--SocialCalcSpreadsheetControlSave--";function l(e){if(!e||!e["!ref"]){return""}var t=[],a=[],n,i="";
var s=ut(e["!ref"]);var f=Array.isArray(e);for(var o=s.s.r;o<=s.e.r;++o){for(var l=s.s.c;l<=s.e.c;++l){i=ht({r:o,c:l});n=f?(e[o]||[])[l]:e[i];if(!n||n.v==null||n.t==="z"){continue}a=["cell",i,"t"];switch(n.t){case"s":case"str":a.push(r(n.v));break;case"n":if(!n.f){a[2]="v";a[3]=n.v}else{a[2]="vtf";a[3]="n";a[4]=n.v;a[5]=r(n.f)}break;case"b":a[2]="vt"+(n.f?"f":"c");a[3]="nl";a[4]=n.v?"1":"0";a[5]=r(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var c=ee(ie(n.v));a[2]="vtc";a[3]="nd";a[4]=""+c;a[5]=n.w||D.format(n.z||D._table[14],c);break;case"e":continue}t.push(a.join(":"))}}t.push("sheet:c:"+(s.e.c-s.s.c+1)+":r:"+(s.e.r-s.s.r+1)+":tvf:1");t.push("valueformat:1:text-wiki");return t.join("\n")}function c(e){return[i,s,f,s,l(e),o].join("\n")}return{to_workbook:n,to_sheet:a,from_sheet:c}}();var af=function(){function e(e,r,t,a,n){if(n.raw){r[t][a]=e}else{if(e==="TRUE"){r[t][a]=true}else{if(e==="FALSE"){r[t][a]=false}else{if(e===""){}else{if(!isNaN(le(e))){r[t][a]=le(e)}else{if(!isNaN(ce(e).getDate())){r[t][a]=ie(e)}else{r[t][a]=e}}}}}}}function r(r,t){var a=t||{};var n=[];if(!r||r.length===0){return n}var i=r.split(/[\r\n]/);var s=i.length-1;while(s>=0&&i[s].length===0){--s}var f=10,o=0;var l=0;for(;l<=s;++l){o=i[l].indexOf(" ");if(o==-1){o=i[l].length}else{o++}f=Math.max(f,o)}for(l=0;l<=s;++l){n[l]=[];var c=0;e(i[l].slice(0,f).trim(),n,l,c,a);for(c=1;c<=(i[l].length-f)/10+1;++c){e(i[l].slice(f+(c-1)*10,f+c*10).trim(),n,l,c,a)}}if(a.sheetRows){n=n.slice(0,a.sheetRows)}return n}var t={44:",",9:"\t",59:";"};var a={44:3,9:2,59:1};function n(e){var r={},n=false,i=0,s=0;for(;i<e.length;++i){if((s=e.charCodeAt(i))==34){n=!n}else{if(!n&&s in t){r[s]=(r[s]||0)+1}}}s=[];for(i in r){if(r.hasOwnProperty(i)){s.push([r[i],i])}}if(!s.length){r=a;for(i in r){if(r.hasOwnProperty(i)){s.push([r[i],i])}}}s.sort(function(e,r){return e[0]-r[0]||a[e[1]]-a[r[1]]});return t[s.pop()[1]]}function i(e,r){var t=r||{};var a="";if(v!=null&&t.dense==null){t.dense=v}var i=t.dense?[]:{};var s={s:{c:0,r:0},e:{c:0,r:0}};
if(e.slice(0,4)=="sep="&&e.charCodeAt(5)==10){a=e.charAt(4);e=e.slice(6)}else{a=n(e.slice(0,1024))}var f=0,o=0,l=0;var c=0,h=0,u=a.charCodeAt(0),d=false,p=0;e=e.replace(/\r\n/gm,"\n");var g=t.dateNF!=null?L(t.dateNF):null;function m(){var r=e.slice(c,h);var a={};if(r.charAt(0)=='"'&&r.charAt(r.length-1)=='"'){r=r.slice(1,-1).replace(/""/g,'"')}if(r.length===0){a.t="z"}else{if(t.raw){a.t="s";a.v=r}else{if(r.trim().length===0){a.t="s";a.v=r}else{if(r.charCodeAt(0)==61){if(r.charCodeAt(1)==34&&r.charCodeAt(r.length-1)==34){a.t="s";a.v=r.slice(2,-1).replace(/""/g,'"')}else{if($l(r)){a.t="n";a.f=r.slice(1)}else{a.t="s";a.v=r}}}else{if(r=="TRUE"){a.t="b";a.v=true}else{if(r=="FALSE"){a.t="b";a.v=false}else{if(!isNaN(l=le(r))){a.t="n";if(t.cellText!==false){a.w=r}a.v=l}else{if(!isNaN(ce(r).getDate())||g&&r.match(g)){a.z=t.dateNF||D._table[14];var n=0;if(g&&r.match(g)){r=M(r,t.dateNF,r.match(g)||[]);n=1}if(t.cellDates){a.t="d";a.v=ie(r,n)}else{a.t="n";a.v=ee(ie(r,n))}if(t.cellText!==false){a.w=D.format(a.z,a.v instanceof Date?ee(a.v):a.v)}if(!t.cellNF){delete a.z}}else{a.t="s";a.v=r}}}}}}}}if(a.t=="z"){}else{if(t.dense){if(!i[f]){i[f]=[]}i[f][o]=a}else{i[ht({c:o,r:f})]=a}}c=h+1;if(s.e.c<o){s.e.c=o}if(s.e.r<f){s.e.r=f}if(p==u){++o}else{o=0;++f;if(t.sheetRows&&t.sheetRows<=f){return true}}}e:for(;h<e.length;++h){switch(p=e.charCodeAt(h)){case 34:d=!d;break;case u:case 10:case 13:if(!d&&m()){break e}break;default:break}}if(h-c>0){m()}i["!ref"]=dt(s);return i}function s(e,t){if(e.slice(0,4)=="sep="){return i(e,t)}if(e.indexOf("\t")>=0||e.indexOf(",")>=0||e.indexOf(";")>=0){return i(e,t)}return wt(r(e,t),t)}function f(e,r){var t="",a=r.type=="string"?[0,0,0,0]:cg(e,r);switch(r.type){case"base64":t=m.decode(e);break;case"binary":t=e;break;case"buffer":if(r.codepage==65001){t=e.toString("utf8")}else{if(r.codepage&&typeof cptable!=="undefined"){t=cptable.utils.decode(r.codepage,e)}else{t=e.toString("binary")}}break;case"array":t=se(e);break;case"string":t=e;break;default:throw new Error("Unrecognized type "+r.type)
}if(a[0]==239&&a[1]==187&&a[2]==191){t=ze(t.slice(3))}else{if(r.type=="binary"&&typeof cptable!=="undefined"&&r.codepage){t=cptable.utils.decode(r.codepage,cptable.utils.encode(1252,t))}}if(t.slice(0,19)=="socialcalc:version:"){return tf.to_sheet(r.type=="string"?t:ze(t),r)}return s(t,r)}function o(e,r){return mt(f(e,r),r)}function l(e){var r=[];var t=pt(e["!ref"]),a;var n=Array.isArray(e);for(var i=t.s.r;i<=t.e.r;++i){var s=[];for(var f=t.s.c;f<=t.e.c;++f){var o=ht({r:i,c:f});a=n?(e[i]||[])[f]:e[o];if(!a||a.v==null){s.push("          ");continue}var l=(a.w||(gt(a),a.w)||"").slice(0,10);while(l.length<10){l+=" "}s.push(l+(f===0?" ":""))}r.push(s.join(""))}return r.join("\n")}return{to_workbook:o,to_sheet:f,from_sheet:l}}();function nf(e,r){var t=r||{},a=!!t.WTF;t.WTF=true;try{var n=ef.to_workbook(e,t);t.WTF=a;return n}catch(i){t.WTF=a;if(!i.message.match(/SYLK bad record ID/)&&a){throw i}return af.to_workbook(e,r)}}var sf=function(){function e(e,r,t){if(!e){return}zr(e,e.l||0);var a=t.Enum||w;while(e.l<e.length){var n=e._R(2);var i=a[n]||a[255];var s=e._R(2);var f=e.l+s;var o=(i.f||Xr)(e,s,t);e.l=f;if(r(o,i.n,n)){return}}}function r(e,r){switch(r.type){case"base64":return t(A(m.decode(e)),r);case"binary":return t(A(e),r);case"buffer":case"array":return t(e,r)}throw"Unsupported type "+r.type}function t(r,t){if(!r){return r}var a=t||{};if(v!=null&&a.dense==null){a.dense=v}var n=a.dense?[]:{},i="Sheet1",s=0;var f={},o=[i];var l={s:{r:0,c:0},e:{r:0,c:0}};var c=a.sheetRows||0;if(r[2]==2){a.Enum=w}else{if(r[2]==26){a.Enum=C}else{if(r[2]==14){a.Enum=C;a.qpro=true;r.l=0}else{throw new Error("Unrecognized LOTUS BOF "+r[2])}}}e(r,function(e,t,h){if(r[2]==2){switch(h){case 0:a.vers=e;if(e>=4096){a.qpro=true}break;case 6:l=e;break;case 15:if(!a.qpro){e[1].v=e[1].v.slice(1)}case 13:case 14:case 16:case 51:if(h==14&&(e[2]&112)==112&&(e[2]&15)>1&&(e[2]&15)<15){e[1].z=a.dateNF||D._table[14];if(a.cellDates){e[1].t="d";e[1].v=re(e[1].v)}}if(a.dense){if(!n[e[0].r]){n[e[0].r]=[]}n[e[0].r][e[0].c]=e[1]
}else{n[ht(e[0])]=e[1]}break}}else{switch(h){case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>s){n["!ref"]=dt(l);f[i]=n;n=a.dense?[]:{};l={s:{r:0,c:0},e:{r:0,c:0}};s=e[3];i="Sheet"+(s+1);o.push(i)}if(c>0&&e[0].r>=c){break}if(a.dense){if(!n[e[0].r]){n[e[0].r]=[]}n[e[0].r][e[0].c]=e[1]}else{n[ht(e[0])]=e[1]}if(l.e.c<e[0].c){l.e.c=e[0].c}if(l.e.r<e[0].r){l.e.r=e[0].r}break;default:break}}},a);n["!ref"]=dt(l);f[i]=n;return{SheetNames:o,Sheets:f}}function a(e){var r={s:{c:0,r:0},e:{c:0,r:0}};r.s.c=e._R(2);r.s.r=e._R(2);r.e.c=e._R(2);r.e.r=e._R(2);if(r.s.c==65535){r.s.c=r.e.c=r.s.r=r.e.r=0}return r}function n(e,r,t){var a=[{c:0,r:0},{t:"n",v:0},0];if(t.qpro&&t.vers!=20768){a[0].c=e._R(1);e.l++;a[0].r=e._R(2);e.l+=2}else{a[2]=e._R(1);a[0].c=e._R(2);a[0].r=e._R(2)}return a}function i(e,r,t){var a=e.l+r;var i=n(e,r,t);i[1].t="s";if(t.vers==20768){e.l++;var s=e._R(1);i[1].v=e._R(s,"utf8");return i}if(t.qpro){e.l++}i[1].v=e._R(a-e.l,"cstr");return i}function s(e,r,t){var a=n(e,r,t);a[1].v=e._R(2,"i");return a}function f(e,r,t){var a=n(e,r,t);a[1].v=e._R(8,"f");return a}function o(e,r,t){var a=e.l+r;var i=n(e,r,t);i[1].v=e._R(8,"f");if(t.qpro){e.l=a}else{var s=e._R(2);e.l+=s}return i}function l(e){var r=[{c:0,r:0},{t:"n",v:0},0];r[0].r=e._R(2);r[3]=e[e.l++];r[0].c=e[e.l++];return r}function c(e,r){var t=l(e,r);t[1].t="s";t[1].v=e._R(r-4,"cstr");return t}function h(e,r){var t=l(e,r);t[1].v=e._R(2);var a=t[1].v>>1;if(t[1].v&1){switch(a&7){case 1:a=(a>>3)*500;break;case 2:a=(a>>3)/20;break;case 4:a=(a>>3)/2000;break;case 6:a=(a>>3)/16;break;case 7:a=(a>>3)/64;break;default:throw"unknown NUMBER_18 encoding "+(a&7)}}t[1].v=a;return t}function u(e,r){var t=l(e,r);var a=e._R(4);var n=e._R(4);var i=e._R(2);if(i==65535){t[1].v=0;return t}var s=i&32768;i=(i&32767)-16446;t[1].v=(s*2-1)*((i>0?n<<i:n>>>-i)+(i>-32?a<<i+32:a>>>-(i+32)));return t}function d(e,r){var t=u(e,14);e.l+=r-14;return t}function p(e,r){var t=l(e,r);var a=e._R(4);t[1].v=a>>6;return t
}function g(e,r){var t=l(e,r);var a=e._R(8,"f");t[1].v=a;return t}function b(e,r){var t=g(e,14);e.l+=r-10;return t}var w={0:{n:"BOF",f:Hn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:a},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:s},14:{n:"NUMBER",f:f},15:{n:"LABEL",f:i},16:{n:"FORMULA",f:o},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:i},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},255:{n:"",f:Xr}};var C={0:{n:"BOF"},1:{n:"EOF"},3:{n:"??"},4:{n:"??"},5:{n:"??"},6:{n:"??"},7:{n:"??"},9:{n:"??"},10:{n:"??"},11:{n:"??"},12:{n:"??"},14:{n:"??"},15:{n:"??"},16:{n:"??"},17:{n:"??"},18:{n:"??"},19:{n:"??"},21:{n:"??"},22:{n:"LABEL16",f:c},23:{n:"NUMBER17",f:u},24:{n:"NUMBER18",f:h},25:{n:"FORMULA19",f:d},26:{n:"??"},27:{n:"??"},28:{n:"??"},29:{n:"??"},30:{n:"??"},31:{n:"??"},33:{n:"??"},37:{n:"NUMBER25",f:p},39:{n:"NUMBER27",f:g},40:{n:"FORMULA28",f:b},255:{n:"",f:Xr}};return{to_workbook:r}}();var ff=function im(){var e=Ye("t"),r=Ye("rPr"),t=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/,n=/\r\n/g;var s=function o(e,r,t){var a={},n=65001,s="";var f=false;var o=e.match(_e),l=0;if(o){for(;l!=o.length;++l){var c=ye(o[l]);switch(c[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!c.val){break}case"<shadow>":case"<shadow/>":a.shadow=1;break;case"</shadow>":break;case"<charset":if(c.val=="1"){break
}n=i[parseInt(c.val,10)];break;case"<outline":if(!c.val){break}case"<outline>":case"<outline/>":a.outline=1;break;case"</outline>":break;case"<rFont":a.name=c.val;break;case"<sz":a.sz=c.val;break;case"<strike":if(!c.val){break}case"<strike>":case"<strike/>":a.strike=1;break;case"</strike>":break;case"<u":if(!c.val){break}switch(c.val){case"double":a.uval="double";break;case"singleAccounting":a.uval="single-accounting";break;case"doubleAccounting":a.uval="double-accounting";break}case"<u>":case"<u/>":a.u=1;break;case"</u>":break;case"<b":if(c.val=="0"){break}case"<b>":case"<b/>":a.b=1;break;case"</b>":break;case"<i":if(c.val=="0"){break}case"<i>":case"<i/>":a.i=1;break;case"</i>":break;case"<color":if(c.rgb){a.color=c.rgb.slice(2,8)}break;case"<family":a.family=c.val;break;case"<vertAlign":s=c.val;break;case"<scheme":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":f=true;break;case"</ext>":f=false;break;default:if(c[0].charCodeAt(1)!==47&&!f){throw new Error("Unrecognized rich format "+c[0])}}}}var h=[];if(a.u){h.push("text-decoration: underline;")}if(a.uval){h.push("text-underline-style:"+a.uval+";")}if(a.sz){h.push("font-size:"+a.sz+"pt;")}if(a.outline){h.push("text-effect: outline;")}if(a.shadow){h.push("text-shadow: auto;")}r.push('<span style="'+h.join("")+'">');if(a.b){r.push("<b>");t.push("</b>")}if(a.i){r.push("<i>");t.push("</i>")}if(a.strike){r.push("<s>");t.push("</s>")}if(s=="superscript"){s="sup"}else{if(s=="subscript"){s="sub"}}if(s!=""){r.push("<"+s+">");t.push("</"+s+">")}t.push("</span>");return n};function f(t){var a=[[],"",[]];var i=t.match(e);if(!i){return""}a[1]=i[1];var f=t.match(r);if(f){s(f[1],a[0],a[2])}return a[0].join("")+a[1].replace(n,"<br/>")+a[2].join("")}return function l(e){return e.replace(t,"").split(a).map(f).join("")}}();var of=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,lf=/<(?:\w+:)?r>/;var cf=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function hf(e,r){var t=r?r.cellHTML:true;var a={};if(!e){return null}if(e.match(/^\s*<(?:\w+:)?t[^>]*>/)){a.t=De(ze(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""));
a.r=ze(e);if(t){a.h=Me(a.t)}}else{if(e.match(lf)){a.r=ze(e);a.t=De(ze((e.replace(cf,"").match(of)||[]).join("").replace(_e,"")));if(t){a.h=ff(a.r)}}}return a}var uf=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/;var df=/<(?:\w+:)?(?:si|sstItem)>/g;var pf=/<\/(?:\w+:)?(?:si|sstItem)>/;function vf(e,r){var t=[],a="";if(!e){return t}var n=e.match(uf);if(n){a=n[2].replace(df,"").split(pf);for(var i=0;i!=a.length;++i){var s=hf(a[i].trim(),r);if(s!=null){t[t.length]=s}}n=ye(n[1]);t.Count=n.count;t.Unique=n.uniqueCount}return t}Ra.SST="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings";var gf=/^\s|\s$|[\t\n\r]/;function mf(e,r){if(!r.bookSST){return""}var t=[Se];t[t.length]=ar("sst",null,{xmlns:sr.main[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a){if(e[a]==null){continue}var n=e[a];var i="<si>";if(n.r){i+=n.r}else{i+="<t";if(!n.t){n.t=""}if(n.t.match(gf)){i+=' xml:space="preserve"'}i+=">"+Pe(n.t)+"</t>"}i+="</si>";t[t.length]=i}if(t.length>2){t[t.length]="</sst>";t[1]=t[1].replace("/>",">")}return t.join("")}function bf(e){return[e._R(4),e._R(4)]}function wf(e,r){var t=[];var a=false;jr(e,function n(e,i,s){switch(s){case 159:t.Count=e[0];t.Unique=e[1];break;case 19:t.push(e);break;case 160:return true;case 35:a=true;break;case 36:a=false;break;default:if(i.indexOf("Begin")>0){}else{if(i.indexOf("End")>0){}}if(!a||r.WTF){throw new Error("Unexpected record "+s+" "+i)}}});return t}function Cf(e,r){if(!r){r=Gr(8)}r._W(4,e.Count);r._W(4,e.Unique);return r}var Ef=Bt;function kf(e){var r=Kr();Yr(r,"BrtBeginSst",Cf(e));for(var t=0;t<e.length;++t){Yr(r,"BrtSSTItem",Ef(e[t]))}Yr(r,"BrtEndSst");return r.end()}function Sf(e){if(typeof cptable!=="undefined"){return cptable.utils.encode(t,e)}var r=[],a=e.split("");for(var n=0;n<a.length;++n){r[n]=a[n].charCodeAt(0)}return r}function Af(e,r){var t={};t.Major=e._R(2);t.Minor=e._R(2);if(r>=4){e.l+=r-4}return t}function _f(e){var r={};r.id=e._R(0,"lpp4");r.R=Af(e,4);r.U=Af(e,4);r.W=Af(e,4);
return r}function Bf(e){var r=e._R(4);var t=e.l+r-4;var a={};var n=e._R(4);var i=[];while(n-->0){i.push({t:e._R(4),v:e._R(0,"lpp4")})}a.name=e._R(0,"lpp4");a.comps=i;if(e.l!=t){throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+t)}return a}function Tf(e){var r=[];e.l+=4;var t=e._R(4);while(t-->0){r.push(Bf(e))}return r}function yf(e){var r=[];e.l+=4;var t=e._R(4);while(t-->0){r.push(e._R(0,"lpp4"))}return r}function xf(e){var r={};e._R(4);e.l+=4;r.id=e._R(0,"lpp4");r.name=e._R(0,"lpp4");r.R=Af(e,4);r.U=Af(e,4);r.W=Af(e,4);return r}function If(e){var r=xf(e);r.ename=e._R(0,"8lpp4");r.blksz=e._R(4);r.cmode=e._R(4);if(e._R(4)!=4){throw new Error("Bad !Primary record")}return r}function Rf(e,r){var t=e.l+r;var a={};a.Flags=e._R(4)&63;e.l+=4;a.AlgID=e._R(4);var n=false;switch(a.AlgID){case 26126:case 26127:case 26128:n=a.Flags==36;break;case 26625:n=a.Flags==4;break;case 0:n=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!n){throw new Error("Encryption Flags/AlgID mismatch")}a.AlgIDHash=e._R(4);a.KeySize=e._R(4);a.ProviderType=e._R(4);e.l+=8;a.CSPName=e._R(t-e.l>>1,"utf16le");e.l=t;return a}function Df(e,r){var t={},a=e.l+r;e.l+=4;t.Salt=e.slice(e.l,e.l+16);e.l+=16;t.Verifier=e.slice(e.l,e.l+16);e.l+=16;e._R(4);t.VerifierHash=e.slice(e.l,a);e.l=a;return t}function Of(e){var r=Af(e);switch(r.Minor){case 2:return[r.Minor,Ff(e,r)];case 3:return[r.Minor,Pf(e,r)];case 4:return[r.Minor,Nf(e,r)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+r.Minor)}function Ff(e){var r=e._R(4);if((r&63)!=36){throw new Error("EncryptionInfo mismatch")}var t=e._R(4);var a=Rf(e,t);var n=Df(e,e.length-e.l);return{t:"Std",h:a,v:n}}function Pf(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Nf(e){var r=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var t=e._R(e.length-e.l,"utf8");var a={};t.replace(_e,function n(e){var t=ye(e);
switch(xe(t[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":r.forEach(function(e){a[e]=t[e]});break;case"<dataIntegrity":a.encryptedHmacKey=t.encryptedHmacKey;a.encryptedHmacValue=t.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=t.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(t);break;default:throw t[0]}});return a}function Lf(e,r){var t={};var a=t.EncryptionVersionInfo=Af(e,4);r-=4;if(a.Minor!=2){throw new Error("unrecognized minor version code: "+a.Minor)}if(a.Major>4||a.Major<2){throw new Error("unrecognized major version code: "+a.Major)}t.Flags=e._R(4);r-=4;var n=e._R(4);r-=4;t.EncryptionHeader=Rf(e,n);r-=n;t.EncryptionVerifier=Df(e,r);return t}function Mf(e){var r={};var t=r.EncryptionVersionInfo=Af(e,4);if(t.Major!=1||t.Minor!=1){throw"unrecognized version code "+t.Major+" : "+t.Minor}r.Salt=e._R(16);r.EncryptedVerifier=e._R(16);r.EncryptedVerifierHash=e._R(16);return r}function Uf(e){var r=0,t;var a=Sf(e);var n=a.length+1,i,s;var f,o,l;t=k(n);t[0]=a.length;for(i=1;i!=n;++i){t[i]=a[i-1]}for(i=n-1;i>=0;--i){s=t[i];f=(r&16384)===0?0:1;o=r<<1&32767;l=f|o;r=l^s}return r^52811}var Hf=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0];var r=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163];var t=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628];
var a=function(e){return(e/2|e*128)&255};var n=function(e,r){return a(e^r)};var i=function(e){var a=r[e.length-1];var n=104;for(var i=e.length-1;i>=0;--i){var s=e[i];for(var f=0;f!=7;++f){if(s&64){a^=t[n]}s*=2;--n}}return a};return function(r){var t=Sf(r);var a=i(t);var s=t.length;var f=k(16);for(var o=0;o!=16;++o){f[o]=0}var l,c,h;if((s&1)===1){l=a>>8;f[s]=n(e[0],l);--s;l=a&255;c=t[t.length-1];f[s]=n(c,l)}while(s>0){--s;l=a>>8;f[s]=n(t[s],l);--s;l=a&255;f[s]=n(t[s],l)}s=15;h=15-t.length;while(h>0){l=a>>8;f[s]=n(e[h],l);--s;--h;l=a&255;f[s]=n(t[s],l);--s;--h}return f}}();var Wf=function(e,r,t,a,n){if(!n){n=r}if(!a){a=Hf(e)}var i,s;for(i=0;i!=r.length;++i){s=r[i];s^=a[t];s=(s>>5|s<<3)&255;n[i]=s;++t}return[n,t,a]};var Vf=function(e){var r=0,t=Hf(e);return function(e){var a=Wf("",e,r,t);r=a[1];return a[0]}};function zf(e,r,t,a){var n={key:Hn(e),verificationBytes:Hn(e)};if(t.password){n.verifier=Uf(t.password)}a.valid=n.verificationBytes===n.verifier;if(a.valid){a.insitu=Vf(t.password)}return n}function Xf(e,r,t){var a=t||{};a.Info=e._R(2);e.l-=2;if(a.Info===1){a.Data=Mf(e,r)}else{a.Data=Lf(e,r)}return a}function Gf(e,r,t){var a={Type:t.biff>=8?e._R(2):0};if(a.Type){Xf(e,r-2,a)}else{zf(e,t.biff>=8?r:r-2,t,a)}return a}var jf=function(){function e(e,t){switch(t.type){case"base64":return r(m.decode(e),t);case"binary":return r(e,t);case"buffer":return r(e.toString("binary"),t);case"array":return r(se(e),t)}throw new Error("Unrecognized type "+t.type)}function r(e,r){var t=r||{};var a=t.dense?[]:{};var n={s:{c:0,r:0},e:{c:0,r:0}};if(!e.match(/\\trowd/)){throw new Error("RTF missing table")}a["!ref"]=dt(n);return a}function t(r,t){return mt(e(r,t),t)}function a(e){var r=["{\\rtf1\\ansi"];var t=pt(e["!ref"]),a;var n=Array.isArray(e);for(var i=t.s.r;i<=t.e.r;++i){r.push("\\trowd\\trautofit1");for(var s=t.s.c;s<=t.e.c;++s){r.push("\\cellx"+(s+1))}r.push("\\pard\\intbl");for(s=t.s.c;s<=t.e.c;++s){var f=ht({r:i,c:s});a=n?(e[i]||[])[s]:e[f];if(!a||a.v==null&&(!a.f||a.F)){continue}r.push(" "+(a.w||(gt(a),a.w)));
r.push("\\cell")}r.push("\\pard\\intbl\\row")}return r.join("")+"}"}return{to_workbook:t,to_sheet:e,from_sheet:a}}();function Kf(e){var r=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(r.slice(0,2),16),parseInt(r.slice(2,4),16),parseInt(r.slice(4,6),16)]}function Yf(e){for(var r=0,t=1;r!=3;++r){t=t*256+(e[r]>255?255:e[r]<0?0:e[r])}return t.toString(16).toUpperCase().slice(1)}function $f(e){var r=e[0]/255,t=e[1]/255,a=e[2]/255;var n=Math.max(r,t,a),i=Math.min(r,t,a),s=n-i;if(s===0){return[0,0,r]}var f=0,o=0,l=n+i;o=s/(l>1?2-l:l);switch(n){case r:f=((t-a)/s+6)%6;break;case t:f=(a-r)/s+2;break;case a:f=(r-t)/s+4;break}return[f/6,o,l/2]}function Zf(e){var r=e[0],t=e[1],a=e[2];var n=t*2*(a<0.5?a:1-a),i=a-n/2;var s=[i,i,i],f=6*r;var o;if(t!==0){switch(f|0){case 0:case 6:o=n*f;s[0]+=n;s[1]+=o;break;case 1:o=n*(2-f);s[0]+=o;s[1]+=n;break;case 2:o=n*(f-2);s[1]+=n;s[2]+=o;break;case 3:o=n*(4-f);s[1]+=o;s[2]+=n;break;case 4:o=n*(f-4);s[2]+=n;s[0]+=o;break;case 5:o=n*(6-f);s[2]+=o;s[0]+=n;break}}for(var l=0;l!=3;++l){s[l]=Math.round(s[l]*255)}return s}function Qf(e,r){if(r===0){return e}var t=$f(Kf(e));if(r<0){t[2]=t[2]*(1+r)}else{t[2]=1-(1-t[2])*(1-r)}return Yf(Zf(t))}var Jf=6,qf=15,eo=1,ro=Jf;function to(e){return Math.floor((e+Math.round(128/ro)/256)*ro)}function ao(e){return Math.floor((e-5)/ro*100+0.5)/100}function no(e){return Math.round((e*ro+5)/ro*256)/256}function io(e){return no(ao(to(e)))}function so(e){var r=Math.abs(e-io(e)),t=ro;if(r>0.005){for(ro=eo;ro<qf;++ro){if(Math.abs(e-io(e))<=r){r=Math.abs(e-io(e));t=ro}}}ro=t}function fo(e){if(e.width){e.wpx=to(e.width);e.wch=ao(e.wpx);e.MDW=ro}else{if(e.wpx){e.wch=ao(e.wpx);e.width=no(e.wch);e.MDW=ro}else{if(typeof e.wch=="number"){e.width=no(e.wch);e.wpx=to(e.width);e.MDW=ro}}}if(e.customWidth){delete e.customWidth}}var oo=96,lo=oo;function co(e){return e*96/lo}function ho(e){return e*lo/96}var uo={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};
function po(e,r,t,a){r.Borders=[];var n={};var i=false;e[0].match(_e).forEach(function(e){var t=ye(e);switch(xe(t[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={};if(t.diagonalUp){n.diagonalUp=t.diagonalUp}if(t.diagonalDown){n.diagonalDown=t.diagonalDown}r.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=true;break;case"</ext>":i=false;break;default:if(a&&a.WTF){if(!i){throw new Error("unrecognized "+t[0]+" in borders")}}}})}function vo(e,r,t,a){r.Fills=[];var n={};var i=false;e[0].match(_e).forEach(function(e){var t=ye(e);switch(xe(t[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={};r.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":r.Fills.push(n);n={};break;case"<patternFill":case"<patternFill>":if(t.patternType){n.patternType=t.patternType}break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":if(!n.bgColor){n.bgColor={}}if(t.indexed){n.bgColor.indexed=parseInt(t.indexed,10)}if(t.theme){n.bgColor.theme=parseInt(t.theme,10)}if(t.tint){n.bgColor.tint=parseFloat(t.tint)}if(t.rgb){n.bgColor.rgb=t.rgb.slice(-6)
}break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":if(!n.fgColor){n.fgColor={}}if(t.theme){n.fgColor.theme=parseInt(t.theme,10)}if(t.tint){n.fgColor.tint=parseFloat(t.tint)}if(t.rgb){n.fgColor.rgb=t.rgb.slice(-6)}break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=true;break;case"</ext>":i=false;break;default:if(a&&a.WTF){if(!i){throw new Error("unrecognized "+t[0]+" in fills")}}}})}function go(e,r,t,a){r.Fonts=[];var n={};var s=false;e[0].match(_e).forEach(function(e){var f=ye(e);switch(xe(f[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":r.Fonts.push(n);n={};break;case"<name":if(f.val){n.name=f.val}break;case"<name/>":case"</name>":break;case"<b":n.bold=f.val?Ve(f.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=f.val?Ve(f.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(f.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=f.val?Ve(f.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=f.val?Ve(f.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=f.val?Ve(f.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=f.val?Ve(f.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=f.val?Ve(f.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":if(f.val){n.sz=+f.val}break;case"<sz/>":case"</sz>":break;case"<vertAlign":if(f.val){n.vertAlign=f.val}break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":if(f.val){n.family=parseInt(f.val,10)}break;case"<family/>":case"</family>":break;case"<scheme":if(f.val){n.scheme=f.val}break;case"<scheme/>":case"</scheme>":break;
case"<charset":if(f.val=="1"){break}f.codepage=i[parseInt(f.val,10)];break;case"<color":if(!n.color){n.color={}}if(f.auto){n.color.auto=Ve(f.auto)}if(f.rgb){n.color.rgb=f.rgb.slice(-6)}else{if(f.indexed){n.color.index=parseInt(f.indexed,10);var o=ka[n.color.index];if(n.color.index==81){o=ka[1]}if(!o){throw new Error(e)}n.color.rgb=o[0].toString(16)+o[1].toString(16)+o[2].toString(16)}else{if(f.theme){n.color.theme=parseInt(f.theme,10);if(f.tint){n.color.tint=parseFloat(f.tint)}if(f.theme&&t.themeElements&&t.themeElements.clrScheme){n.color.rgb=Qf(t.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)}}}}break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=true;break;case"</ext>":s=false;break;default:if(a&&a.WTF){if(!s){throw new Error("unrecognized "+f[0]+" in fonts")}}}})}function mo(e,r,t){r.NumberFmt=[];var a=j(D._table);for(var n=0;n<a.length;++n){r.NumberFmt[a[n]]=D._table[a[n]]}var i=e[0].match(_e);if(!i){return}for(n=0;n<i.length;++n){var s=ye(i[n]);switch(xe(s[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":var f=De(ze(s.formatCode)),o=parseInt(s.numFmtId,10);r.NumberFmt[o]=f;if(o>0){if(o>392){for(o=392;o>60;--o){if(r.NumberFmt[o]==null){break}}r.NumberFmt[o]=f}D.load(f,o)}break;case"</numFmt>":break;default:if(t.WTF){throw new Error("unrecognized "+s[0]+" in numFmts")}}}}function bo(e){var r=["<numFmts>"];[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var a=t[0];a<=t[1];++a){if(e[a]!=null){r[r.length]=ar("numFmt",null,{numFmtId:a,formatCode:Pe(e[a])})}}});if(r.length===1){return""}r[r.length]="</numFmts>";r[0]=ar("numFmts",null,{count:r.length-2}).replace("/>",">");return r.join("")}var wo=["numFmtId","fillId","fontId","borderId","xfId"];var Co=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Eo(e,r,t){r.CellXf=[];var a;var n=false;e[0].match(_e).forEach(function(e){var i=ye(e),s=0;
switch(xe(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":a=i;delete a[0];for(s=0;s<wo.length;++s){if(a[wo[s]]){a[wo[s]]=parseInt(a[wo[s]],10)}}for(s=0;s<Co.length;++s){if(a[Co[s]]){a[Co[s]]=Ve(a[Co[s]])}}if(a.numFmtId>392){for(s=392;s>60;--s){if(r.NumberFmt[a.numFmtId]==r.NumberFmt[s]){a.numFmtId=s;break}}}r.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var f={};if(i.vertical){f.vertical=i.vertical}if(i.horizontal){f.horizontal=i.horizontal}if(i.textRotation!=null){f.textRotation=i.textRotation}if(i.indent){f.indent=i.indent}if(i.wrapText){f.wrapText=i.wrapText}a.alignment=f;break;case"</alignment>":break;case"<protection":case"</protection>":case"<protection/>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=true;break;case"</ext>":n=false;break;default:if(t&&t.WTF){if(!n){throw new Error("unrecognized "+i[0]+" in cellXfs")}}}})}function ko(e){var r=[];r[r.length]=ar("cellXfs",null);e.forEach(function(e){r[r.length]=ar("xf",null,e)});r[r.length]="</cellXfs>";if(r.length===2){return""}r[0]=ar("cellXfs",null,{count:r.length-2}).replace("/>",">");return r.join("")}var So=function sm(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/;var r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/;var t=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/;var a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/;var n=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function i(s,f,o){var l={};if(!s){return l}s=s.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var c;if(c=s.match(e)){mo(c,l,o)}if(c=s.match(a)){go(c,l,f,o)}if(c=s.match(t)){vo(c,l,f,o)}if(c=s.match(n)){po(c,l,f,o)}if(c=s.match(r)){Eo(c,l,o)}return l}}();var Ao=ar("styleSheet",null,{xmlns:sr.main[0],"xmlns:vt":sr.vt});Ra.STY="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles";function _o(e,r){var t=[Se,Ao],a;if(e.SSF&&(a=bo(e.SSF))!=null){t[t.length]=a
}t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>';t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>';t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>';t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>';if(a=ko(r.cellXfs)){t[t.length]=a}t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>';t[t.length]='<dxfs count="0"/>';t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>';if(t.length>2){t[t.length]="</styleSheet>";t[1]=t[1].replace("/>",">")}return t.join("")}function Bo(e,r){var t=e._R(2);var a=Et(e,r-2);return[t,a]}function To(e,r,t){if(!t){t=Gr(6+4*r.length)}t._W(2,e);kt(r,t);var a=t.length>t.l?t.slice(0,t.l):t;if(t.l==null){t.l=t.length}return a}function yo(e,r,t){var a={};a.sz=e._R(2)/20;var n=Zt(e,2,t);if(n.fCondense){a.condense=1}if(n.fExtend){a.extend=1}if(n.fShadow){a.shadow=1}if(n.fOutline){a.outline=1}if(n.fStrikeout){a.strike=1}if(n.fItalic){a.italic=1}var i=e._R(2);if(i===700){a.bold=1}switch(e._R(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var s=e._R(1);if(s!=0){a.underline=s}var f=e._R(1);if(f>0){a.family=f}var o=e._R(1);if(o>0){a.charset=o}e.l++;a.color=Yt(e,8);switch(e._R(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}a.name=Et(e,r-21);return a}function xo(e,r){if(!r){r=Gr(25+4*32)}r._W(2,e.sz*20);Qt(e,r);r._W(2,e.bold?700:400);var t=0;if(e.vertAlign=="superscript"){t=1}else{if(e.vertAlign=="subscript"){t=2}}r._W(2,t);r._W(1,e.underline||0);r._W(1,e.family||0);r._W(1,e.charset||0);r._W(1,0);$t(e.color,r);var a=0;if(e.scheme=="major"){a=1}if(e.scheme=="minor"){a=2}r._W(1,a);kt(e.name,r);return r.length>r.l?r.slice(0,r.l):r
}var Io=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];var Ro=Y(Io);var Do=Xr;function Oo(e,r){if(!r){r=Gr(4*3+8*7+16*1)}var t=Ro[e.patternType];if(t==null){t=40}r._W(4,t);var a=0;if(t!=40){$t({auto:1},r);$t({auto:1},r);for(;a<12;++a){r._W(4,0)}}else{for(;a<4;++a){r._W(4,0)}for(;a<12;++a){r._W(4,0)}}return r.length>r.l?r.slice(0,r.l):r}function Fo(e,r){var t=e.l+r;var a=e._R(2);var n=e._R(2);e.l=t;return{ixfe:a,numFmtId:n}}function Po(e,r,t){if(!t){t=Gr(16)}t._W(2,r||0);t._W(2,e.numFmtId||0);t._W(2,0);t._W(2,0);t._W(2,0);t._W(1,0);t._W(1,0);t._W(1,0);t._W(1,0);t._W(1,0);t._W(1,0);return t}function No(e,r){if(!r){r=Gr(10)}r._W(1,0);r._W(1,0);r._W(4,0);r._W(4,0);return r}var Lo=Xr;function Mo(e,r){if(!r){r=Gr(51)}r._W(1,0);No(null,r);No(null,r);No(null,r);No(null,r);No(null,r);return r.length>r.l?r.slice(0,r.l):r}function Uo(e,r){if(!r){r=Gr(12+4*10)}r._W(4,e.xfId);r._W(2,1);r._W(1,+e.builtinId);r._W(1,0);Ft(e.name||"",r);return r.length>r.l?r.slice(0,r.l):r}function Ho(e,r,t){var a=Gr(4+256*2*4);a._W(4,e);Ft(r,a);Ft(t,a);return a.length>a.l?a.slice(0,a.l):a}function Wo(e,r,t){var a={};a.NumberFmt=[];for(var n in D._table){a.NumberFmt[n]=D._table[n]}a.CellXf=[];a.Fonts=[];var i=[];var s=false;jr(e,function f(e,n,o){switch(o){case 44:a.NumberFmt[e[0]]=e[1];D.load(e[1],e[0]);break;case 43:a.Fonts.push(e);if(e.color.theme!=null&&r&&r.themeElements&&r.themeElements.clrScheme){e.color.rgb=Qf(r.themeElements.clrScheme[e.color.theme].rgb,e.color.tint||0)}break;case 1025:break;case 45:break;case 46:break;case 47:if(i[i.length-1]=="BrtBeginCellXFs"){a.CellXf.push(e)}break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:s=true;break;case 36:s=false;break;case 37:i.push(n);break;case 38:i.pop();break;default:if((n||"").indexOf("Begin")>0){i.push(n)
}else{if((n||"").indexOf("End")>0){i.pop()}else{if(!s||t.WTF){throw new Error("Unexpected record "+o+" "+n)}}}}});return a}function Vo(e,r){if(!r){return}var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var a=e[0];a<=e[1];++a){if(r[a]!=null){++t}}});if(t==0){return}Yr(e,"BrtBeginFmts",Ct(t));[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var a=t[0];a<=t[1];++a){if(r[a]!=null){Yr(e,"BrtFmt",To(a,r[a]))}}});Yr(e,"BrtEndFmts")}function zo(e){var r=1;if(r==0){return}Yr(e,"BrtBeginFonts",Ct(r));Yr(e,"BrtFont",xo({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}));Yr(e,"BrtEndFonts")}function Xo(e){var r=2;if(r==0){return}Yr(e,"BrtBeginFills",Ct(r));Yr(e,"BrtFill",Oo({patternType:"none"}));Yr(e,"BrtFill",Oo({patternType:"gray125"}));Yr(e,"BrtEndFills")}function Go(e){var r=1;if(r==0){return}Yr(e,"BrtBeginBorders",Ct(r));Yr(e,"BrtBorder",Mo({}));Yr(e,"BrtEndBorders")}function jo(e){var r=1;Yr(e,"BrtBeginCellStyleXFs",Ct(r));Yr(e,"BrtXF",Po({numFmtId:0,fontId:0,fillId:0,borderId:0},65535));Yr(e,"BrtEndCellStyleXFs")}function Ko(e,r){Yr(e,"BrtBeginCellXFs",Ct(r.length));r.forEach(function(r){Yr(e,"BrtXF",Po(r,0))});Yr(e,"BrtEndCellXFs")}function Yo(e){var r=1;Yr(e,"BrtBeginStyles",Ct(r));Yr(e,"BrtStyle",Uo({xfId:0,builtinId:0,name:"Normal"}));Yr(e,"BrtEndStyles")}function $o(e){var r=0;Yr(e,"BrtBeginDXFs",Ct(r));Yr(e,"BrtEndDXFs")}function Zo(e){var r=0;Yr(e,"BrtBeginTableStyles",Ho(r,"TableStyleMedium9","PivotStyleMedium4"));Yr(e,"BrtEndTableStyles")}function Qo(){return}function Jo(e,r){var t=Kr();Yr(t,"BrtBeginStyleSheet");Vo(t,e.SSF);zo(t,e);Xo(t,e);Go(t,e);jo(t,e);Ko(t,r.cellXfs);Yo(t,e);$o(t,e);Zo(t,e);Qo(t,e);Yr(t,"BrtEndStyleSheet");return t.end()}Ra.THEME="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme";function qo(e,r,t){r.themeElements.clrScheme=[];var a={};(e[0].match(_e)||[]).forEach(function(e){var n=ye(e);switch(n[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=n.val;break;
case"<a:sysClr":a.rgb=n.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":if(n[0].charAt(1)==="/"){r.themeElements.clrScheme.push(a);a={}}else{a.name=n[0].slice(3,n[0].length-1)}break;default:if(t&&t.WTF){throw new Error("Unrecognized "+n[0]+" in clrScheme")}}})}function el(){}function rl(){}var tl=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/;var al=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/;var nl=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function il(e,r,t){r.themeElements={};var a;[["clrScheme",tl,qo],["fontScheme",al,el],["fmtScheme",nl,rl]].forEach(function(n){if(!(a=e.match(n[1]))){throw new Error(n[0]+" not found in themeElements")}n[2](a,r,t)})}var sl=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function fl(e,r){if(!e||e.length===0){return fl(ol())}var t;var a={};if(!(t=e.match(sl))){throw new Error("themeElements not found in theme")}il(t[0],a,r);return a}function ol(e,r){if(r&&r.themeXLSX){return r.themeXLSX}var t=[Se];t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">';t[t.length]="<a:themeElements>";t[t.length]='<a:clrScheme name="Office">';t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>';t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>';t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>';t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>';t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>';t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>';t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>';t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>';
t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>';t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>';t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>';t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>';t[t.length]="</a:clrScheme>";t[t.length]='<a:fontScheme name="Office">';t[t.length]="<a:majorFont>";t[t.length]='<a:latin typeface="Cambria"/>';t[t.length]='<a:ea typeface=""/>';t[t.length]='<a:cs typeface=""/>';t[t.length]='<a:font script="Jpan" typeface=" "/>';t[t.length]='<a:font script="Hang" typeface=" "/>';t[t.length]='<a:font script="Hans" typeface=""/>';t[t.length]='<a:font script="Hant" typeface=""/>';t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>';t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>';t[t.length]='<a:font script="Thai" typeface="Tahoma"/>';t[t.length]='<a:font script="Ethi" typeface="Nyala"/>';t[t.length]='<a:font script="Beng" typeface="Vrinda"/>';t[t.length]='<a:font script="Gujr" typeface="Shruti"/>';t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>';t[t.length]='<a:font script="Knda" typeface="Tunga"/>';t[t.length]='<a:font script="Guru" typeface="Raavi"/>';t[t.length]='<a:font script="Cans" typeface="Euphemia"/>';t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>';t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>';t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>';t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>';t[t.length]='<a:font script="Deva" typeface="Mangal"/>';t[t.length]='<a:font script="Telu" typeface="Gautami"/>';t[t.length]='<a:font script="Taml" typeface="Latha"/>';t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>';t[t.length]='<a:font script="Orya" typeface="Kalinga"/>';t[t.length]='<a:font script="Mlym" typeface="Kartika"/>';t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>';t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>';t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>';
t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>';t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>';t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>';t[t.length]="</a:majorFont>";t[t.length]="<a:minorFont>";t[t.length]='<a:latin typeface="Calibri"/>';t[t.length]='<a:ea typeface=""/>';t[t.length]='<a:cs typeface=""/>';t[t.length]='<a:font script="Jpan" typeface=" "/>';t[t.length]='<a:font script="Hang" typeface=" "/>';t[t.length]='<a:font script="Hans" typeface=""/>';t[t.length]='<a:font script="Hant" typeface=""/>';t[t.length]='<a:font script="Arab" typeface="Arial"/>';t[t.length]='<a:font script="Hebr" typeface="Arial"/>';t[t.length]='<a:font script="Thai" typeface="Tahoma"/>';t[t.length]='<a:font script="Ethi" typeface="Nyala"/>';t[t.length]='<a:font script="Beng" typeface="Vrinda"/>';t[t.length]='<a:font script="Gujr" typeface="Shruti"/>';t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>';t[t.length]='<a:font script="Knda" typeface="Tunga"/>';t[t.length]='<a:font script="Guru" typeface="Raavi"/>';t[t.length]='<a:font script="Cans" typeface="Euphemia"/>';t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>';t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>';t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>';t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>';t[t.length]='<a:font script="Deva" typeface="Mangal"/>';t[t.length]='<a:font script="Telu" typeface="Gautami"/>';t[t.length]='<a:font script="Taml" typeface="Latha"/>';t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>';t[t.length]='<a:font script="Orya" typeface="Kalinga"/>';t[t.length]='<a:font script="Mlym" typeface="Kartika"/>';t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>';t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>';t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>';t[t.length]='<a:font script="Viet" typeface="Arial"/>';t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>';
t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>';t[t.length]="</a:minorFont>";t[t.length]="</a:fontScheme>";t[t.length]='<a:fmtScheme name="Office">';t[t.length]="<a:fillStyleLst>";t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>';t[t.length]='<a:gradFill rotWithShape="1">';t[t.length]="<a:gsLst>";t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>';t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>';t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>';t[t.length]="</a:gsLst>";t[t.length]='<a:lin ang="16200000" scaled="1"/>';t[t.length]="</a:gradFill>";t[t.length]='<a:gradFill rotWithShape="1">';t[t.length]="<a:gsLst>";t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>';t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>';t[t.length]="</a:gsLst>";t[t.length]='<a:lin ang="16200000" scaled="0"/>';t[t.length]="</a:gradFill>";t[t.length]="</a:fillStyleLst>";t[t.length]="<a:lnStyleLst>";t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>';t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>';t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>';t[t.length]="</a:lnStyleLst>";t[t.length]="<a:effectStyleLst>";t[t.length]="<a:effectStyle>";t[t.length]="<a:effectLst>";t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>';
t[t.length]="</a:effectLst>";t[t.length]="</a:effectStyle>";t[t.length]="<a:effectStyle>";t[t.length]="<a:effectLst>";t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>';t[t.length]="</a:effectLst>";t[t.length]="</a:effectStyle>";t[t.length]="<a:effectStyle>";t[t.length]="<a:effectLst>";t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>';t[t.length]="</a:effectLst>";t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>';t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>';t[t.length]="</a:effectStyle>";t[t.length]="</a:effectStyleLst>";t[t.length]="<a:bgFillStyleLst>";t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>';t[t.length]='<a:gradFill rotWithShape="1">';t[t.length]="<a:gsLst>";t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>';t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>';t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>';t[t.length]="</a:gsLst>";t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>';t[t.length]="</a:gradFill>";t[t.length]='<a:gradFill rotWithShape="1">';t[t.length]="<a:gsLst>";t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>';t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>';t[t.length]="</a:gsLst>";t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>';
t[t.length]="</a:gradFill>";t[t.length]="</a:bgFillStyleLst>";t[t.length]="</a:fmtScheme>";t[t.length]="</a:themeElements>";t[t.length]="<a:objectDefaults>";t[t.length]="<a:spDef>";t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>';t[t.length]="</a:spDef>";t[t.length]="<a:lnDef>";t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>';t[t.length]="</a:lnDef>";t[t.length]="</a:objectDefaults>";t[t.length]="<a:extraClrSchemeLst/>";t[t.length]="</a:theme>";return t.join("")}function ll(e,r,t){var a=e.l+r;var n=e._R(4);if(n===124226){return}if(!t.cellStyles||!Ee){e.l=a;return}var i=e.slice(e.l);e.l=a;var s;try{s=new Ee(i)}catch(f){return}var o=we(s,"theme/theme/theme1.xml",true);if(!o){return}return fl(o,t)}function cl(e){return e._R(4)}function hl(e){var r={};r.xclrType=e._R(2);r.nTintShade=e._R(2);switch(r.xclrType){case 0:e.l+=4;break;case 1:r.xclrValue=ul(e,4);break;case 2:r.xclrValue=ni(e,4);break;case 3:r.xclrValue=cl(e,4);break;case 4:e.l+=4;break}e.l+=8;return r}function ul(e,r){return Xr(e,r)}function dl(e,r){return Xr(e,r)}function pl(e){var r=e._R(2);var t=e._R(2)-4;var a=[r];switch(r){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=hl(e,t);break;case 6:a[1]=dl(e,t);break;case 14:case 15:a[1]=e._R(t===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+r+" "+t)}return a}function vl(e,r){var t=e.l+r;e.l+=2;var a=e._R(2);e.l+=2;var n=e._R(2);var i=[];while(n-->0){i.push(pl(e,t-e.l))}return{ixfe:a,ext:i}}function gl(e,r){r.forEach(function(e){switch(e[0]){case 4:break;
case 5:break;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:break;case 13:break;case 14:break;case 15:break}})}function ml(e){var r=[];if(!e){return r}var t=1;(e.match(_e)||[]).forEach(function(e){var a=ye(e);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0];if(a.i){t=a.i}else{a.i=t}r.push(a);break}});return r}function bl(e){var r={};r.i=e._R(4);var t={};t.r=e._R(4);t.c=e._R(4);r.r=ht(t);var a=e._R(1);if(a&2){r.l="1"}if(a&8){r.a="1"}return r}function wl(e,r,t){var a=[];var n=false;jr(e,function i(e,r,s){switch(s){case 63:a.push(e);break;default:if((r||"").indexOf("Begin")>0){}else{if((r||"").indexOf("End")>0){}else{if(!n||t.WTF){throw new Error("Unexpected record "+s+" "+r)}}}}});return a}function Cl(){}function El(e,r,t){if(!e){return e}var a=t||{};var n=false,i=false;jr(e,function s(e,r,t){if(i){return}switch(t){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:n=true;break;case 36:n=false;break;default:if((r||"").indexOf("Begin")>0){}else{if((r||"").indexOf("End")>0){}else{if(!n||a.WTF){throw new Error("Unexpected record "+t.toString(16)+" "+r)}}}}},a)}Ra.IMG="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image";Ra.DRAW="http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing";function kl(e,r){if(!e){return"??"}var t=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return r["!id"][t].Target}var Sl=1024;function Al(e,r){var t=[21600,21600];var a=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(",");var n=[ar("xml",null,{"xmlns:v":fr.v,"xmlns:o":fr.o,"xmlns:x":fr.x,"xmlns:mv":fr.mv}).replace(/\/>/,">"),ar("o:shapelayout",ar("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),ar("v:shapetype",[ar("v:stroke",null,{joinstyle:"miter"}),ar("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:a})];
while(Sl<e*1000){Sl+=1000}r.forEach(function(e){var r=ct(e[0]);n=n.concat(["<v:shape"+tr({id:"_x0000_s"+ ++Sl,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",ar("v:fill",ar("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}),{color2:"#BEFF82",angle:"-180",type:"gradient"}),ar("v:shadow",null,{on:"t",obscured:"t"}),ar("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",rr("x:Anchor",[r.c,0,r.r,0,r.c+3,100,r.r+5,100].join(",")),rr("x:AutoFill","False"),rr("x:Row",String(r.r)),rr("x:Column",String(r.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])});n.push("</xml>");return n.join("")}Ra.CMNT="http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments";function _l(e,r,t,a,n){for(var i=0;i!=r.length;++i){var s=r[i];var f=bp(be(e,s.replace(/^\//,""),true),s,n);if(!f||!f.length){continue}var o=j(t);for(var l=0;l!=o.length;++l){var c=o[l];var h=a[c];if(h){var u=h[s];if(u){Bl(c,t[c],f)}}}}}function Bl(e,r,t){var a=Array.isArray(r);var n,i;t.forEach(function(e){if(a){i=ct(e.ref);if(!r[i.r]){r[i.r]=[]}n=r[i.r][i.c]}else{n=r[e.ref]}if(!n){n={};if(a){r[i.r][i.c]=n}else{r[e.ref]=n}var t=pt(r["!ref"]||"BDWGO1000001:A1");var s=ct(e.ref);if(t.s.r>s.r){t.s.r=s.r}if(t.e.r<s.r){t.e.r=s.r}if(t.s.c>s.c){t.s.c=s.c}if(t.e.c<s.c){t.e.c=s.c}var f=dt(t);if(f!==r["!ref"]){r["!ref"]=f}}if(!n.c){n.c=[]}var o={a:e.author,t:e.t,r:e.r};if(e.h){o.h=e.h}n.c.push(o)})}function Tl(e,r){if(e.match(/<(?:\w+:)?comments *\/>/)){return[]}var t=[];var a=[];var n=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);if(n&&n[1]){n[1].split(/<\/\w*:?author>/).forEach(function(e){if(e===""||e.trim()===""){return}var r=e.match(/<(?:\w+:)?author[^>]*>(.*)/);if(r){t.push(r[1])}})}var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);
if(i&&i[1]){i[1].split(/<\/\w*:?comment>/).forEach(function(e){if(e===""||e.trim()===""){return}var n=e.match(/<(?:\w+:)?comment[^>]*>/);if(!n){return}var i=ye(n[0]);var s={author:i.authorId&&t[i.authorId]||"sheetjsghost",ref:i.ref,guid:i.guid};var f=ct(i.ref);if(r.sheetRows&&r.sheetRows<=f.r){return}var o=e.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/);var l=!!o&&!!o[1]&&hf(o[1])||{r:"",t:"",h:""};s.r=l.r;if(l.r=="<t></t>"){l.t=l.h=""}s.t=l.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n");if(r.cellHTML){s.h=l.h}a.push(s)})}return a}var yl=ar("comments",null,{xmlns:sr.main[0]});function xl(e){var r=[Se,yl];var t=[];r.push("<authors>");e.forEach(function(e){e[1].forEach(function(e){var a=Pe(e.a);if(t.indexOf(a)>-1){return}t.push(a);r.push("<author>"+a+"</author>")})});r.push("</authors>");r.push("<commentList>");e.forEach(function(e){e[1].forEach(function(a){r.push('<comment ref="'+e[0]+'" authorId="'+t.indexOf(Pe(a.a))+'"><text>');r.push(rr("t",a.t==null?"":a.t));r.push("</text></comment>")})});r.push("</commentList>");if(r.length>2){r[r.length]="</comments>";r[1]=r[1].replace("/>",">")}return r.join("")}function Il(e){var r={};r.iauthor=e._R(4);var t=Vt(e,16);r.rfx=t.s;r.ref=ht(t.s);e.l+=16;return r}function Rl(e,r){if(r==null){r=Gr(36)}r._W(4,e[1].iauthor);zt(e[0],r);r._W(4,0);r._W(4,0);r._W(4,0);r._W(4,0);return r}var Dl=Et;function Ol(e){return kt(e.slice(0,54))}function Fl(e,r){var t=[];var a=[];var n={};var i=false;jr(e,function s(e,f,o){switch(o){case 632:a.push(e);break;case 635:n=e;break;case 637:n.t=e.t;n.h=e.h;n.r=e.r;break;case 636:n.author=a[n.iauthor];delete n.iauthor;if(r.sheetRows&&r.sheetRows<=n.rfx.r){break}if(!n.t){n.t=""}delete n.rfx;t.push(n);break;case 3072:break;case 35:i=true;break;case 36:i=false;break;case 37:break;case 38:break;default:if((f||"").indexOf("Begin")>0){}else{if((f||"").indexOf("End")>0){}else{if(!i||r.WTF){throw new Error("Unexpected record "+o+" "+f)}}}}});return t}function Pl(e){var r=Kr();var t=[];Yr(r,"BrtBeginComments");Yr(r,"BrtBeginCommentAuthors");
e.forEach(function(e){e[1].forEach(function(e){if(t.indexOf(e.a)>-1){return}t.push(e.a.slice(0,54));Yr(r,"BrtCommentAuthor",Ol(e.a))})});Yr(r,"BrtEndCommentAuthors");Yr(r,"BrtBeginCommentList");e.forEach(function(e){e[1].forEach(function(a){a.iauthor=t.indexOf(a.a);var n={s:ct(e[0]),e:ct(e[0])};Yr(r,"BrtBeginComment",Rl([n,a]));if(a.t&&a.t.length>0){Yr(r,"BrtCommentText",yt(a))}Yr(r,"BrtEndComment");delete a.iauthor})});Yr(r,"BrtEndCommentList");Yr(r,"BrtEndComments");return r.end()}var Nl="application/vnd.ms-office.vbaProject";function Ll(e){var r=W.utils.cfb_new({root:"R"});e.FullPaths.forEach(function(t,a){if(t.slice(-1)==="/"||!t.match(/_VBA_PROJECT_CUR/)){return}var n=t.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");W.utils.cfb_add(r,n,e.FileIndex[a].content)});return W.write(r)}function Ml(e,r){r.FullPaths.forEach(function(t,a){if(a==0){return}var n=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");if(n.slice(-1)!=="/"){W.utils.cfb_add(e,n,r.FileIndex[a].content)}})}var Ul=["xlsb","xlsm","xlam","biff8","xla"];Ra.DS="http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet";Ra.MS="http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet";function Hl(){return{"!type":"dialog"}}function Wl(){return{"!type":"dialog"}}function Vl(){return{"!type":"macro"}}function zl(){return{"!type":"macro"}}var Xl=function(){var e=/(^|[^A-Za-z])R(\[?)(-?\d+|)\]?C(\[?)(-?\d+|)\]?/g;var r={r:0,c:0};function t(e,t,a,n,i,s){var f=n.length>0?parseInt(n,10)|0:0,o=s.length>0?parseInt(s,10)|0:0;if(o<0&&i.length===0){o=0}var l=false,c=false;if(i.length>0||s.length==0){l=true}if(l){o+=r.c}else{--o}if(a.length>0||n.length==0){c=true}if(c){f+=r.r}else{--f}return t+(l?"":"$")+st(o)+(c?"":"$")+tt(f)}return function a(n,i){r=i;return n.replace(e,t)}}();var Gl=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)([1-9]\d{0,5}|10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6])(?![_.\(A-Za-z0-9])/g;var jl=function(){return function e(r,t){return r.replace(Gl,function(e,r,a,n,i,s){var f=it(n)-(a?0:t.c);
var o=rt(s)-(i?0:t.r);var l=o==0?"":!i?"["+o+"]":o+1;var c=f==0?"":!a?"["+f+"]":f+1;return r+"R"+l+"C"+c})}}();function Kl(e,r){return e.replace(Gl,function(e,t,a,n,i,s){return t+(a=="$"?a+n:st(it(n)+r.c))+(i=="$"?i+s:tt(rt(s)+r.r))})}function Yl(e,r,t){var a=ut(r),n=a.s,i=ct(t);var s={r:i.r-n.r,c:i.c-n.c};return Kl(e,s)}function $l(e){if(e.length==1){return false}return true}function Zl(e){return e.replace(/_xlfn\./g,"")}function Ql(e){e.l+=1;return}function Jl(e,r){var t=e._R(r==1?1:2);return[t&16383,t>>14&1,t>>15&1]}function ql(e,r,t){var a=2;if(t){if(t.biff>=2&&t.biff<=5){return ec(e,r,t)}else{if(t.biff==12){a=4}}}var n=e._R(a),i=e._R(a);var s=Jl(e,2);var f=Jl(e,2);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:f[0],cRel:f[1],rRel:f[2]}}}function ec(e){var r=Jl(e,2),t=Jl(e,2);var a=e._R(1);var n=e._R(1);return{s:{r:r[0],c:a,cRel:r[1],rRel:r[2]},e:{r:t[0],c:n,cRel:t[1],rRel:t[2]}}}function rc(e,r,t){if(t.biff<8){return ec(e,r,t)}var a=e._R(t.biff==12?4:2),n=e._R(t.biff==12?4:2);var i=Jl(e,2);var s=Jl(e,2);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:s[0],cRel:s[1],rRel:s[2]}}}function tc(e,r,t){if(t&&t.biff>=2&&t.biff<=5){return ac(e,r,t)}var a=e._R(t&&t.biff==12?4:2);var n=Jl(e,2);return{r:a,c:n[0],cRel:n[1],rRel:n[2]}}function ac(e){var r=Jl(e,2);var t=e._R(1);return{r:r[0],c:t,cRel:r[1],rRel:r[2]}}function nc(e){var r=e._R(2);var t=e._R(2);return{r:r,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function ic(e,r,t){var a=t&&t.biff?t.biff:8;if(a>=2&&a<=5){return sc(e,r,t)}var n=e._R(a>=12?4:2);var i=e._R(2);var s=(i&16384)>>14,f=(i&32768)>>15;i&=16383;if(f==1){while(n>524287){n-=1048576}}if(s==1){while(i>8191){i=i-16384}}return{r:n,c:i,cRel:s,rRel:f}}function sc(e){var r=e._R(2);var t=e._R(1);var a=(r&32768)>>15,n=(r&16384)>>14;r&=16383;if(a==1&&r>=8192){r=r-16384}if(n==1&&t>=128){t=t-256}return{r:r,c:t,cRel:n,rRel:a}}function fc(e,r,t){var a=(e[e.l++]&96)>>5;var n=ql(e,t.biff>=2&&t.biff<=5?6:8,t);return[a,n]}function oc(e,r,t){var a=(e[e.l++]&96)>>5;
var n=e._R(2,"i");var i=8;if(t){switch(t.biff){case 5:e.l+=12;i=6;break;case 12:i=12;break}}var s=ql(e,i,t);return[a,n,s]}function lc(e,r,t){var a=(e[e.l++]&96)>>5;e.l+=t&&t.biff>8?12:t.biff<8?6:8;return[a]}function cc(e,r,t){var a=(e[e.l++]&96)>>5;var n=e._R(2);var i=8;if(t){switch(t.biff){case 5:e.l+=12;i=6;break;case 12:i=12;break}}e.l+=i;return[a,n]}function hc(e,r,t){var a=(e[e.l++]&96)>>5;var n=rc(e,r-1,t);return[a,n]}function uc(e,r,t){var a=(e[e.l++]&96)>>5;e.l+=t.biff==2?6:t.biff==12?14:7;return[a]}function dc(e){var r=e[e.l+1]&1;var t=1;e.l+=4;return[r,t]}function pc(e,r,t){e.l+=2;var a=e._R(t&&t.biff==2?1:2);var n=[];for(var i=0;i<=a;++i){n.push(e._R(t&&t.biff==2?1:2))}return n}function vc(e,r,t){var a=e[e.l+1]&255?1:0;e.l+=2;return[a,e._R(t&&t.biff==2?1:2)]}function gc(e,r,t){var a=e[e.l+1]&255?1:0;e.l+=2;return[a,e._R(t&&t.biff==2?1:2)]}function mc(e){var r=e[e.l+1]&255?1:0;e.l+=2;return[r,e._R(2)]}function bc(e,r,t){var a=e[e.l+1]&255?1:0;e.l+=t&&t.biff==2?3:4;return[a]}function wc(e){var r=e._R(1),t=e._R(1);return[r,t]}function Cc(e){e._R(2);return wc(e,2)}function Ec(e){e._R(2);return wc(e,2)}function kc(e,r,t){var a=(e[e.l]&96)>>5;e.l+=1;var n=tc(e,0,t);return[a,n]}function Sc(e,r,t){var a=(e[e.l]&96)>>5;e.l+=1;var n=ic(e,0,t);return[a,n]}function Ac(e,r,t){var a=(e[e.l]&96)>>5;e.l+=1;var n=e._R(2);if(t&&t.biff==5){e.l+=12}var i=tc(e,0,t);return[a,n,i]}function _c(e,r,t){var a=(e[e.l]&96)>>5;e.l+=1;var n=e._R(t&&t.biff<=3?1:2);return[Uh[n],Mh[n],a]}function Bc(e,r,t){var a=e[e.l++];var n=e._R(1),i=t&&t.biff<=3?[a==88?-1:0,e._R(1)]:Tc(e);return[n,(i[0]===0?Mh:Lh)[i[1]]]}function Tc(e){return[e[e.l+1]>>7,e._R(2)&32767]}function yc(e,r,t){e.l+=t&&t.biff==2?3:4;return}function xc(e,r,t){e.l++;if(t&&t.biff==12){return[e._R(4,"i"),0]}var a=e._R(2);var n=e._R(t&&t.biff==2?1:2);return[a,n]}function Ic(e){e.l++;return jt[e._R(1)]}function Rc(e){e.l++;return e._R(2)}function Dc(e){e.l++;return e._R(1)!==0}function Oc(e){e.l++;return Xt(e,8)}function Fc(e,r,t){e.l++;
return Gn(e,r-1,t)}function Pc(e,r){var t=[e._R(1)];if(r==12){switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}}switch(t[0]){case 4:t[1]=Mn(e,1)?"TRUE":"FALSE";if(r!=12){e.l+=7}break;case 37:case 16:t[1]=jt[e[e.l]];e.l+=r==12?4:8;break;case 0:e.l+=8;break;case 1:t[1]=Xt(e,8);break;case 2:t[1]=$n(e,0,{biff:r>0&&r<8?2:r});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function Nc(e,r,t){var a=e._R(t.biff==12?4:2);var n=[];for(var i=0;i!=a;++i){n.push((t.biff==12?Vt:di)(e,8))}return n}function Lc(e,r,t){var a=0,n=0;if(t.biff==12){a=e._R(4);n=e._R(4)}else{n=1+e._R(1);a=1+e._R(2)}if(t.biff>=2&&t.biff<8){--a;if(--n==0){n=256}}for(var i=0,s=[];i!=a&&(s[i]=[]);++i){for(var f=0;f!=n;++f){s[i][f]=Pc(e,t.biff)}}return s}function Mc(e,r,t){var a=e._R(1)>>>5&3;var n=!t||t.biff>=8?4:2;var i=e._R(n);switch(t.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function Uc(e,r,t){if(t.biff==5){return Hc(e,r,t)}var a=e._R(1)>>>5&3;var n=e._R(2);var i=e._R(4);return[a,n,i]}function Hc(e){var r=e._R(1)>>>5&3;var t=e._R(2,"i");e.l+=8;var a=e._R(2);e.l+=12;return[r,t,a]}function Wc(e,r,t){var a=e._R(1)>>>5&3;e.l+=t&&t.biff==2?3:4;var n=e._R(t&&t.biff==2?1:2);return[a,n]}function Vc(e,r,t){var a=e._R(1)>>>5&3;var n=e._R(t&&t.biff==2?1:2);return[a,n]}function zc(e,r,t){var a=e._R(1)>>>5&3;e.l+=4;if(t.biff<8){e.l--}if(t.biff==12){e.l+=2}return[a]}function Xc(e,r,t){var a=(e[e.l++]&96)>>5;var n=e._R(2);var i=4;if(t){switch(t.biff){case 5:i=15;break;case 12:i=6;break}}e.l+=i;return[a,n]}var Gc=Xr;var jc=Xr;var Kc=Xr;function Yc(e,r,t){e.l+=2;return[nc(e,4,t)]}function $c(e){e.l+=6;return[]}var Zc=Yc;var Qc=$c;var Jc=$c;var qc=Yc;function eh(e){e.l+=2;return[Hn(e),e._R(2)&1]}var rh=Yc;var th=eh;var ah=$c;var nh=Yc;var ih=Yc;var sh=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function fh(e){e.l+=2;var r=e._R(2);var t=e._R(2);
var a=e._R(4);var n=e._R(2);var i=e._R(2);var s=sh[t>>2&31];return{ixti:r,coltype:t&3,rt:s,idx:a,c:n,C:i}}function oh(e){e.l+=2;return[e._R(4)]}function lh(e,r,t){e.l+=5;e.l+=2;e.l+=t.biff==2?1:4;return["PTGSHEET"]}function ch(e,r,t){e.l+=t.biff==2?4:5;return["PTGENDSHEET"]}function hh(e){var r=e._R(1)>>>5&3;var t=e._R(2);return[r,t]}function uh(e){var r=e._R(1)>>>5&3;var t=e._R(2);return[r,t]}function dh(e){e.l+=4;return[0,0]}var ph={1:{n:"PtgExp",f:xc},2:{n:"PtgTbl",f:Kc},3:{n:"PtgAdd",f:Ql},4:{n:"PtgSub",f:Ql},5:{n:"PtgMul",f:Ql},6:{n:"PtgDiv",f:Ql},7:{n:"PtgPower",f:Ql},8:{n:"PtgConcat",f:Ql},9:{n:"PtgLt",f:Ql},10:{n:"PtgLe",f:Ql},11:{n:"PtgEq",f:Ql},12:{n:"PtgGe",f:Ql},13:{n:"PtgGt",f:Ql},14:{n:"PtgNe",f:Ql},15:{n:"PtgIsect",f:Ql},16:{n:"PtgUnion",f:Ql},17:{n:"PtgRange",f:Ql},18:{n:"PtgUplus",f:Ql},19:{n:"PtgUminus",f:Ql},20:{n:"PtgPercent",f:Ql},21:{n:"PtgParen",f:Ql},22:{n:"PtgMissArg",f:Ql},23:{n:"PtgStr",f:Fc},26:{n:"PtgSheet",f:lh},27:{n:"PtgEndSheet",f:ch},28:{n:"PtgErr",f:Ic},29:{n:"PtgBool",f:Dc},30:{n:"PtgInt",f:Rc},31:{n:"PtgNum",f:Oc},32:{n:"PtgArray",f:uc},33:{n:"PtgFunc",f:_c},34:{n:"PtgFuncVar",f:Bc},35:{n:"PtgName",f:Mc},36:{n:"PtgRef",f:kc},37:{n:"PtgArea",f:fc},38:{n:"PtgMemArea",f:Wc},39:{n:"PtgMemErr",f:Gc},40:{n:"PtgMemNoMem",f:jc},41:{n:"PtgMemFunc",f:Vc},42:{n:"PtgRefErr",f:zc},43:{n:"PtgAreaErr",f:lc},44:{n:"PtgRefN",f:Sc},45:{n:"PtgAreaN",f:hc},46:{n:"PtgMemAreaN",f:hh},47:{n:"PtgMemNoMemN",f:uh},57:{n:"PtgNameX",f:Uc},58:{n:"PtgRef3d",f:Ac},59:{n:"PtgArea3d",f:oc},60:{n:"PtgRefErr3d",f:Xc},61:{n:"PtgAreaErr3d",f:cc},255:{}};var vh={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61};(function(){for(var e in vh){ph[e]=ph[vh[e]]}})();var gh={1:{n:"PtgElfLel",f:eh},2:{n:"PtgElfRw",f:nh},3:{n:"PtgElfCol",f:Zc},6:{n:"PtgElfRwV",f:ih},7:{n:"PtgElfColV",f:qc},10:{n:"PtgElfRadical",f:rh},11:{n:"PtgElfRadicalS",f:ah},13:{n:"PtgElfColS",f:Qc},15:{n:"PtgElfColSV",f:Jc},16:{n:"PtgElfRadicalLel",f:th},25:{n:"PtgList",f:fh},29:{n:"PtgSxName",f:oh},255:{}};
var mh={0:{n:"PtgAttrNoop",f:dh},1:{n:"PtgAttrSemi",f:bc},2:{n:"PtgAttrIf",f:gc},4:{n:"PtgAttrChoose",f:pc},8:{n:"PtgAttrGoto",f:vc},16:{n:"PtgAttrSum",f:yc},32:{n:"PtgAttrBaxcel",f:dc},64:{n:"PtgAttrSpace",f:Cc},65:{n:"PtgAttrSpaceSemi",f:Ec},128:{n:"PtgAttrIfError",f:mc},255:{}};mh[33]=mh[32];function bh(e,r,t,a){if(a.biff<8){return Xr(e,r)}var n=e.l+r;var i=[];for(var s=0;s!==t.length;++s){switch(t[s][0]){case"PtgArray":t[s][1]=Lc(e,0,a);i.push(t[s][1]);break;case"PtgMemArea":t[s][2]=Nc(e,t[s][1],a);i.push(t[s][2]);break;case"PtgExp":if(a&&a.biff==12){t[s][1][1]=e._R(4);i.push(t[s][1])}break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[s][0];default:break}}r=n-e.l;if(r!==0){i.push(Xr(e,r))}return i}function wh(e,r,t){var a=e.l+r;var n,i,s=[];while(a!=e.l){r=a-e.l;i=e[e.l];n=ph[i];if(i===24||i===25){n=(i===24?gh:mh)[e[e.l+1]]}if(!n||!n.f){Xr(e,r)}else{s.push([n.n,n.f(e,r,t)])}}return s}function Ch(e){var r=[];for(var t=0;t<e.length;++t){var a=e[t],n=[];for(var i=0;i<a.length;++i){var s=a[i];if(s){switch(s[0]){case 2:n.push('"'+s[1].replace(/"/g,'""')+'"');break;default:n.push(s[1])}}else{n.push("")}}r.push(n.join(","))}return r.join(";")}var Eh={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function kh(e,r){if(!e&&!(r&&r.biff<=5&&r.biff>=2)){throw new Error("empty sheet name")}if(e.indexOf(" ")>-1){return"'"+e+"'"}return e}function Sh(e,r,t){if(!e){return"SH33TJSERR0"}if(!e.XTI){return"SH33TJSERR6"}var a=e.XTI[r];if(t.biff>8&&!e.XTI[r]){return e.SheetNames[r]}if(t.biff<8){if(r>10000){r-=65536}if(r<0){r=-r}return r==0?"":e.XTI[r-1]}if(!a){return"SH33TJSERR1"}var n="";if(t.biff>8){switch(e[a[0]][0]){case 357:n=a[1]==-1?"#REF":e.SheetNames[a[1]];return a[1]==a[2]?n:n+":"+e.SheetNames[a[2]];case 358:if(t.SID!=null){return e.SheetNames[t.SID]}return"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}}switch(e[a[0]][0][0]){case 1025:n=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3";
return a[1]==a[2]?n:n+":"+e.SheetNames[a[2]];case 14849:return"SH33TJSERR8";default:if(!e[a[0]][0][3]){return"SH33TJSERR2"}n=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4";return a[1]==a[2]?n:n+":"+e[a[0]][0][3][a[2]]}}function Ah(e,r,t){return kh(Sh(e,r,t),t)}function _h(e,r,t,a,n){var i=n&&n.biff||8;var s={s:{c:0,r:0},e:{c:0,r:0}};var f=[],o,l,c,h=0,u=0,d,p="";if(!e[0]||!e[0][0]){return""}var v=-1,g="";for(var m=0,b=e[0].length;m<b;++m){var w=e[0][m];switch(w[0]){case"PtgUminus":f.push("-"+f.pop());break;case"PtgUplus":f.push("+"+f.pop());break;case"PtgPercent":f.push(f.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":o=f.pop();l=f.pop();if(v>=0){switch(e[0][v][1][0]){case 0:g=oe(" ",e[0][v][1][1]);break;case 1:g=oe("\r",e[0][v][1][1]);break;default:g="";if(n.WTF){throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}}l=l+g;v=-1}f.push(l+Eh[w[0]]+o);break;case"PtgIsect":o=f.pop();l=f.pop();f.push(l+" "+o);break;case"PtgUnion":o=f.pop();l=f.pop();f.push(l+","+o);break;case"PtgRange":o=f.pop();l=f.pop();f.push(l+":"+o);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":c=$r(w[1][1],s,n);f.push(Qr(c,i));break;case"PtgRefN":c=t?$r(w[1][1],t,n):w[1][1];f.push(Qr(c,i));break;case"PtgRef3d":h=w[1][1];c=$r(w[1][2],s,n);p=Ah(a,h,n);var C=p;f.push(p+"!"+Qr(c,i));break;case"PtgFunc":case"PtgFuncVar":var E=w[1][0],k=w[1][1];if(!E){E=0}E&=127;var S=E==0?[]:f.slice(-E);f.length-=E;if(k==="User"){k=S.shift()}f.push(k+"("+S.join(",")+")");break;case"PtgBool":f.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":f.push(w[1]);break;case"PtgNum":f.push(String(w[1]));break;case"PtgStr":f.push('"'+w[1]+'"');break;case"PtgErr":f.push(w[1]);break;case"PtgAreaN":d=Zr(w[1][1],t?{s:t}:s,n);f.push(Jr(d,n));break;case"PtgArea":d=Zr(w[1][1],s,n);f.push(Jr(d,n));break;case"PtgArea3d":h=w[1][1];d=w[1][2];
p=Ah(a,h,n);f.push(p+"!"+Jr(d,n));break;case"PtgAttrSum":f.push("SUM("+f.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":u=w[1][2];var A=(a.names||[])[u-1]||(a[0]||[])[u];var _=A?A.Name:"SH33TJSNAME"+String(u);if(_ in Hh){_=Hh[_]}f.push(_);break;case"PtgNameX":var B=w[1][1];u=w[1][2];var T;if(n.biff<=5){if(B<0){B=-B}if(a[B]){T=a[B][u]}}else{var y="";if(((a[B]||[])[0]||[])[0]==14849){}else{if(((a[B]||[])[0]||[])[0]==1025){if(a[B][u]&&a[B][u].itab>0){y=a.SheetNames[a[B][u].itab-1]+"!"}}else{y=a.SheetNames[u-1]+"!"}}if(a[B]&&a[B][u]){y+=a[B][u].Name}else{if(a[0]&&a[0][u]){y+=a[0][u].Name}else{y+="SH33TJSERRX"}}f.push(y);break}if(!T){T={Name:"SH33TJSERRY"}}f.push(T.Name);break;case"PtgParen":var x="(",I=")";if(v>=0){g="";switch(e[0][v][1][0]){case 2:x=oe(" ",e[0][v][1][1])+x;break;case 3:x=oe("\r",e[0][v][1][1])+x;break;case 4:I=oe(" ",e[0][v][1][1])+I;break;case 5:I=oe("\r",e[0][v][1][1])+I;break;default:if(n.WTF){throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}}v=-1}f.push(x+f.pop()+I);break;case"PtgRefErr":f.push("#REF!");break;case"PtgRefErr3d":f.push("#REF!");break;case"PtgExp":c={c:w[1][1],r:w[1][0]};var R={c:t.c,r:t.r};if(a.sharedf[ht(c)]){var D=a.sharedf[ht(c)];f.push(_h(D,s,R,a,n))}else{var O=false;for(o=0;o!=a.arrayf.length;++o){l=a.arrayf[o];if(c.c<l[0].s.c||c.c>l[0].e.c){continue}if(c.r<l[0].s.r||c.r>l[0].e.r){continue}f.push(_h(l[1],s,R,a,n));O=true;break}if(!O){f.push(w[1])}}break;case"PtgArray":f.push("{"+Ch(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=m;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":f.push("");break;case"PtgAreaErr":f.push("#REF!");break;case"PtgAreaErr3d":f.push("#REF!");break;case"PtgList":f.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");
case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var F=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3){if(v>=0&&F.indexOf(e[0][m][0])==-1){w=e[0][v];var P=true;switch(w[1][0]){case 4:P=false;case 0:g=oe(" ",w[1][1]);break;case 5:P=false;case 1:g=oe("\r",w[1][1]);break;default:g="";if(n.WTF){throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}}f.push((P?g:"")+f.pop()+(P?"":g));v=-1}}}if(f.length>1&&n.WTF){throw new Error("bad formula stack")}return f[0]}function Bh(e,r,t){var a=e.l+r,n=t.biff==2?1:2;var i,s=e._R(n);if(s==65535){return[[],Xr(e,r-2)]}var f=wh(e,s,t);if(r!==s+n){i=bh(e,r-s-n,f,t)}e.l=a;return[f,i]}function Th(e,r,t){var a=e.l+r,n=t.biff==2?1:2;var i,s=e._R(n);if(s==65535){return[[],Xr(e,r-2)]}var f=wh(e,s,t);if(r!==s+n){i=bh(e,r-s-n,f,t)}e.l=a;return[f,i]}function yh(e,r,t,a){var n=e.l+r;var i=wh(e,a,t);var s;if(n!==e.l){s=bh(e,n-e.l,i,t)}return[i,s]}function xh(e,r,t){var a=e.l+r;var n,i=e._R(2);var s=wh(e,i,t);if(i==65535){return[[],Xr(e,r-2)]}if(r!==i+2){n=bh(e,a-i-2,s,t)}return[s,n]}function Ih(e){var r;if(Dr(e,e.l+6)!==65535){return[Xt(e),"n"]}switch(e[e.l]){case 0:e.l+=8;return["String","s"];case 1:r=e[e.l+2]===1;e.l+=8;return[r,"b"];case 2:r=e[e.l+2];e.l+=8;return[r,"e"];case 3:e.l+=8;return["","s"]}return[]}function Rh(e,r,t){var a=e.l+r;var n=si(e,6);if(t.biff==2){++e.l}var i=Ih(e,8);var s=e._R(1);if(t.biff!=2){e._R(1);if(t.biff>=5){e._R(4)}}var f=Th(e,a-e.l,t);return{cell:n,val:i[0],formula:f,shared:s>>3&1,tt:i[1]}}function Dh(e,r,t){var a=e._R(4);var n=wh(e,a,t);var i=e._R(4);var s=i>0?bh(e,i,n,t):null;return[n,s]}var Oh=Dh;var Fh=Dh;var Ph=Dh;var Nh=Dh;var Lh={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"};
var Mh={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"};
var Uh={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};var Hh={"_xlfn.ACOT":"ACOT","_xlfn.ACOTH":"ACOTH","_xlfn.AGGREGATE":"AGGREGATE","_xlfn.ARABIC":"ARABIC","_xlfn.AVERAGEIF":"AVERAGEIF","_xlfn.AVERAGEIFS":"AVERAGEIFS","_xlfn.BASE":"BASE","_xlfn.BETA.DIST":"BETA.DIST","_xlfn.BETA.INV":"BETA.INV","_xlfn.BINOM.DIST":"BINOM.DIST","_xlfn.BINOM.DIST.RANGE":"BINOM.DIST.RANGE","_xlfn.BINOM.INV":"BINOM.INV","_xlfn.BITAND":"BITAND","_xlfn.BITLSHIFT":"BITLSHIFT","_xlfn.BITOR":"BITOR","_xlfn.BITRSHIFT":"BITRSHIFT","_xlfn.BITXOR":"BITXOR","_xlfn.CEILING.MATH":"CEILING.MATH","_xlfn.CEILING.PRECISE":"CEILING.PRECISE","_xlfn.CHISQ.DIST":"CHISQ.DIST","_xlfn.CHISQ.DIST.RT":"CHISQ.DIST.RT","_xlfn.CHISQ.INV":"CHISQ.INV","_xlfn.CHISQ.INV.RT":"CHISQ.INV.RT","_xlfn.CHISQ.TEST":"CHISQ.TEST","_xlfn.COMBINA":"COMBINA","_xlfn.CONCAT":"CONCAT","_xlfn.CONFIDENCE.NORM":"CONFIDENCE.NORM","_xlfn.CONFIDENCE.T":"CONFIDENCE.T","_xlfn.COT":"COT","_xlfn.COTH":"COTH","_xlfn.COUNTIFS":"COUNTIFS","_xlfn.COVARIANCE.P":"COVARIANCE.P","_xlfn.COVARIANCE.S":"COVARIANCE.S","_xlfn.CSC":"CSC","_xlfn.CSCH":"CSCH","_xlfn.DAYS":"DAYS","_xlfn.DECIMAL":"DECIMAL","_xlfn.ECMA.CEILING":"ECMA.CEILING","_xlfn.ERF.PRECISE":"ERF.PRECISE","_xlfn.ERFC.PRECISE":"ERFC.PRECISE","_xlfn.EXPON.DIST":"EXPON.DIST","_xlfn.F.DIST":"F.DIST","_xlfn.F.DIST.RT":"F.DIST.RT","_xlfn.F.INV":"F.INV","_xlfn.F.INV.RT":"F.INV.RT","_xlfn.F.TEST":"F.TEST","_xlfn.FILTERXML":"FILTERXML","_xlfn.FLOOR.MATH":"FLOOR.MATH","_xlfn.FLOOR.PRECISE":"FLOOR.PRECISE","_xlfn.FORECAST.ETS":"FORECAST.ETS","_xlfn.FORECAST.ETS.CONFINT":"FORECAST.ETS.CONFINT","_xlfn.FORECAST.ETS.SEASONALITY":"FORECAST.ETS.SEASONALITY","_xlfn.FORECAST.ETS.STAT":"FORECAST.ETS.STAT","_xlfn.FORECAST.LINEAR":"FORECAST.LINEAR","_xlfn.FORMULATEXT":"FORMULATEXT","_xlfn.GAMMA":"GAMMA","_xlfn.GAMMA.DIST":"GAMMA.DIST","_xlfn.GAMMA.INV":"GAMMA.INV","_xlfn.GAMMALN.PRECISE":"GAMMALN.PRECISE","_xlfn.GAUSS":"GAUSS","_xlfn.HYPGEOM.DIST":"HYPGEOM.DIST","_xlfn.IFERROR":"IFERROR","_xlfn.IFNA":"IFNA","_xlfn.IFS":"IFS","_xlfn.IMCOSH":"IMCOSH","_xlfn.IMCOT":"IMCOT","_xlfn.IMCSC":"IMCSC","_xlfn.IMCSCH":"IMCSCH","_xlfn.IMSEC":"IMSEC","_xlfn.IMSECH":"IMSECH","_xlfn.IMSINH":"IMSINH","_xlfn.IMTAN":"IMTAN","_xlfn.ISFORMULA":"ISFORMULA","_xlfn.ISO.CEILING":"ISO.CEILING","_xlfn.ISOWEEKNUM":"ISOWEEKNUM","_xlfn.LOGNORM.DIST":"LOGNORM.DIST","_xlfn.LOGNORM.INV":"LOGNORM.INV","_xlfn.MAXIFS":"MAXIFS","_xlfn.MINIFS":"MINIFS","_xlfn.MODE.MULT":"MODE.MULT","_xlfn.MODE.SNGL":"MODE.SNGL","_xlfn.MUNIT":"MUNIT","_xlfn.NEGBINOM.DIST":"NEGBINOM.DIST","_xlfn.NETWORKDAYS.INTL":"NETWORKDAYS.INTL","_xlfn.NIGBINOM":"NIGBINOM","_xlfn.NORM.DIST":"NORM.DIST","_xlfn.NORM.INV":"NORM.INV","_xlfn.NORM.S.DIST":"NORM.S.DIST","_xlfn.NORM.S.INV":"NORM.S.INV","_xlfn.NUMBERVALUE":"NUMBERVALUE","_xlfn.PDURATION":"PDURATION","_xlfn.PERCENTILE.EXC":"PERCENTILE.EXC","_xlfn.PERCENTILE.INC":"PERCENTILE.INC","_xlfn.PERCENTRANK.EXC":"PERCENTRANK.EXC","_xlfn.PERCENTRANK.INC":"PERCENTRANK.INC","_xlfn.PERMUTATIONA":"PERMUTATIONA","_xlfn.PHI":"PHI","_xlfn.POISSON.DIST":"POISSON.DIST","_xlfn.QUARTILE.EXC":"QUARTILE.EXC","_xlfn.QUARTILE.INC":"QUARTILE.INC","_xlfn.QUERYSTRING":"QUERYSTRING","_xlfn.RANK.AVG":"RANK.AVG","_xlfn.RANK.EQ":"RANK.EQ","_xlfn.RRI":"RRI","_xlfn.SEC":"SEC","_xlfn.SECH":"SECH","_xlfn.SHEET":"SHEET","_xlfn.SHEETS":"SHEETS","_xlfn.SKEW.P":"SKEW.P","_xlfn.STDEV.P":"STDEV.P","_xlfn.STDEV.S":"STDEV.S","_xlfn.SUMIFS":"SUMIFS","_xlfn.SWITCH":"SWITCH","_xlfn.T.DIST":"T.DIST","_xlfn.T.DIST.2T":"T.DIST.2T","_xlfn.T.DIST.RT":"T.DIST.RT","_xlfn.T.INV":"T.INV","_xlfn.T.INV.2T":"T.INV.2T","_xlfn.T.TEST":"T.TEST","_xlfn.TEXTJOIN":"TEXTJOIN","_xlfn.UNICHAR":"UNICHAR","_xlfn.UNICODE":"UNICODE","_xlfn.VAR.P":"VAR.P","_xlfn.VAR.S":"VAR.S","_xlfn.WEBSERVICE":"WEBSERVICE","_xlfn.WEIBULL.DIST":"WEIBULL.DIST","_xlfn.WORKDAY.INTL":"WORKDAY.INTL","_xlfn.XOR":"XOR","_xlfn.Z.TEST":"Z.TEST"};
function Wh(e){if(e.slice(0,3)=="of:"){e=e.slice(3)}if(e.charCodeAt(0)==61){e=e.slice(1);if(e.charCodeAt(0)==61){e=e.slice(1)}}e=e.replace(/COM\.MICROSOFT\./g,"");e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")});e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1");return e.replace(/[;~]/g,",").replace(/\|/g,";")}function Vh(e){var r="of:="+e.replace(Gl,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return r.replace(/;/g,"|").replace(/,/g,";")}function zh(e){var r=e.split(":");var t=r[0].split(".")[0];return[t,r[0].split(".")[1]+(r.length>1?":"+(r[1].split(".")[1]||r[1].split(".")[0]):"")]}function Xh(e){return e.replace(/\./,"!")}var Gh={};var jh={};Ra.WS=["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"];var Kh=typeof Map!=="undefined";function Yh(e,r,t){var a=0,n=e.length;if(t){if(Kh?t.has(r):t.hasOwnProperty(r)){var i=Kh?t.get(r):t[r];for(;a<i.length;++a){if(e[i[a]].t===r){e.Count++;return i[a]}}}}else{for(;a<n;++a){if(e[a].t===r){e.Count++;return a}}}e[n]={t:r};e.Count++;e.Unique++;if(t){if(Kh){if(!t.has(r)){t.set(r,[])}t.get(r).push(n)}else{if(!t.hasOwnProperty(r)){t[r]=[]}t[r].push(n)}}return n}function $h(e,r){var t={min:e+1,max:e+1};var a=-1;if(r.MDW){ro=r.MDW}if(r.width!=null){t.customWidth=1}else{if(r.wpx!=null){a=ao(r.wpx)}else{if(r.wch!=null){a=r.wch}}}if(a>-1){t.width=no(a);t.customWidth=1}else{if(r.width!=null){t.width=r.width}}if(r.hidden){t.hidden=true}return t}function Zh(e,r){if(!e){return}var t=[0.7,0.7,0.75,0.75,0.3,0.3];if(r=="xlml"){t=[1,1,1,1,0.5,0.5]}if(e.left==null){e.left=t[0]}if(e.right==null){e.right=t[1]}if(e.top==null){e.top=t[2]}if(e.bottom==null){e.bottom=t[3]}if(e.header==null){e.header=t[4]}if(e.footer==null){e.footer=t[5]}}function Qh(e,r,t){var a=t.revssf[r.z!=null?r.z:"General"];var n=60,i=e.length;if(a==null&&t.ssf){for(;n<392;++n){if(t.ssf[n]==null){D.load(r.z,n);t.ssf[n]=r.z;t.revssf[r.z]=a=n;break
}}}for(n=0;n!=i;++n){if(e[n].numFmtId===a){return n}}e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1};return i}function Jh(e,r,t,a,n,i){if(e.t==="z"){return}if(e.t==="d"&&typeof e.v==="string"){e.v=ie(e.v)}try{if(a.cellNF){e.z=D._table[r]}}catch(s){if(a.WTF){throw s}}if(!a||a.cellText!==false){try{if(D._table[r]==null){D.load(P[r]||"General",r)}if(e.t==="e"){e.w=e.w||jt[e.v]}else{if(r===0){if(e.t==="n"){if((e.v|0)===e.v){e.w=D._general_int(e.v)}else{e.w=D._general_num(e.v)}}else{if(e.t==="d"){var f=ee(e.v);if((f|0)===f){e.w=D._general_int(f)}else{e.w=D._general_num(f)}}else{if(e.v===undefined){return""}else{e.w=D._general(e.v,jh)}}}}else{if(e.t==="d"){e.w=D.format(r,ee(e.v),jh)}else{e.w=D.format(r,e.v,jh)}}}}catch(s){if(a.WTF){throw s}}}if(!a.cellStyles){return}if(t!=null){try{e.s=i.Fills[t];if(e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb){e.s.fgColor.rgb=Qf(n.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0);if(a.WTF){e.s.fgColor.raw_rgb=n.themeElements.clrScheme[e.s.fgColor.theme].rgb}}if(e.s.bgColor&&e.s.bgColor.theme){e.s.bgColor.rgb=Qf(n.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0);if(a.WTF){e.s.bgColor.raw_rgb=n.themeElements.clrScheme[e.s.bgColor.theme].rgb}}}catch(s){if(a.WTF&&i.Fills){throw s}}}}function qh(e,r,t){if(e&&e["!ref"]){var a=pt(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r){throw new Error("Bad range ("+t+"): "+e["!ref"])}}}function eu(e,r){var t=pt(r);if(t.s.r<=t.e.r&&t.s.c<=t.e.c&&t.s.r>=0&&t.s.c>=0){e["!ref"]=dt(t)}}var ru=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g;var tu=/<(?:\w+:)?sheetData>([\s\S]*)<\/(?:\w+:)?sheetData>/;var au=/<(?:\w:)?hyperlink [^>]*>/gm;var nu=/"(\w*:\w*)"/;var iu=/<(?:\w:)?col[^>]*[\/]?>/g;var su=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g;var fu=/<(?:\w:)?pageMargins[^>]*\/>/g;var ou=/<(?:\w:)?sheetPr(?:[^>a-z][^>]*)?\/>/;var lu=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function cu(e,r,t,a,n,i,s){if(!e){return e
}if(v!=null&&r.dense==null){r.dense=v}var f=r.dense?[]:{};var o={s:{r:2000000,c:2000000},e:{r:0,c:0}};var l="",c="";var h=e.match(tu);if(h){l=e.slice(0,h.index);c=e.slice(h.index+h[0].length)}else{l=c=e}var u=l.match(ou);if(u){uu(u[0],f,n,t)}var d=(l.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(d>0){var p=l.slice(d,d+50).match(nu);if(p){eu(f,p[1])}}var g=l.match(lu);if(g&&g[1]){ku(g[1],n)}var m=[];if(r.cellStyles){var b=l.match(iu);if(b){mu(m,b)}}if(h){_u(h[1],f,r,o,i,s)}var w=c.match(su);if(w){f["!autofilter"]=wu(w[0])}var C=[];var E=c.match(ru);if(E){for(d=0;d!=E.length;++d){C[d]=pt(E[d].slice(E[d].indexOf('"')+1))}}var k=c.match(au);if(k){pu(f,k,a)}var S=c.match(fu);if(S){f["!margins"]=vu(ye(S[0]))}if(!f["!ref"]&&o.e.c>=o.s.c&&o.e.r>=o.s.r){f["!ref"]=dt(o)}if(r.sheetRows>0&&f["!ref"]){var A=pt(f["!ref"]);if(r.sheetRows<=+A.e.r){A.e.r=r.sheetRows-1;if(A.e.r>o.e.r){A.e.r=o.e.r}if(A.e.r<A.s.r){A.s.r=A.e.r}if(A.e.c>o.e.c){A.e.c=o.e.c}if(A.e.c<A.s.c){A.s.c=A.e.c}f["!fullref"]=f["!ref"];f["!ref"]=dt(A)}}if(m.length>0){f["!cols"]=m}if(C.length>0){f["!merges"]=C}return f}function hu(e){if(e.length===0){return""}var r='<mergeCells count="'+e.length+'">';for(var t=0;t!=e.length;++t){r+='<mergeCell ref="'+dt(e[t])+'"/>'}return r+"</mergeCells>"}function uu(e,r,t,a){var n=ye(e);if(!t.Sheets[a]){t.Sheets[a]={}}if(n.codeName){t.Sheets[a].CodeName=n.codeName}}function du(e){var r={sheet:1};var t=["objects","scenarios","selectLockedCells","selectUnlockedCells"];var a=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];t.forEach(function(t){if(e[t]!=null&&e[t]){r[t]="1"}});a.forEach(function(t){if(e[t]!=null&&!e[t]){r[t]="0"}});if(e.password){r.password=Uf(e.password).toString(16).toUpperCase()}return ar("sheetProtection",null,r)}function pu(e,r,t){var a=Array.isArray(e);for(var n=0;n!=r.length;++n){var i=ye(ze(r[n]),true);if(!i.ref){return}var s=((t||{})["!id"]||[])[i.id];
if(s){i.Target=s.Target;if(i.location){i.Target+="#"+i.location}}else{i.Target="#"+i.location;s={Target:i.Target,TargetMode:"Internal"}}i.Rel=s;if(i.tooltip){i.Tooltip=i.tooltip;delete i.tooltip}var f=pt(i.ref);for(var o=f.s.r;o<=f.e.r;++o){for(var l=f.s.c;l<=f.e.c;++l){var c=ht({c:l,r:o});if(a){if(!e[o]){e[o]=[]}if(!e[o][l]){e[o][l]={t:"z",v:undefined}}e[o][l].l=i}else{if(!e[c]){e[c]={t:"z",v:undefined}}e[c].l=i}}}}}function vu(e){var r={};["left","right","top","bottom","header","footer"].forEach(function(t){if(e[t]){r[t]=parseFloat(e[t])}});return r}function gu(e){Zh(e);return ar("pageMargins",null,e)}function mu(e,r){var t=false;for(var a=0;a!=r.length;++a){var n=ye(r[a],true);if(n.hidden){n.hidden=Ve(n.hidden)}var i=parseInt(n.min,10)-1,s=parseInt(n.max,10)-1;delete n.min;delete n.max;n.width=+n.width;if(!t&&n.width){t=true;so(n.width)}fo(n);while(i<=s){e[i++]=fe(n)}}}function bu(e,r){var t=["<cols>"],a;for(var n=0;n!=r.length;++n){if(!(a=r[n])){continue}t[t.length]=ar("col",null,$h(n,a))}t[t.length]="</cols>";return t.join("")}function wu(e){var r={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return r}function Cu(e,r,t,a){var n=typeof e.ref=="string"?e.ref:dt(e.ref);if(!t.Workbook){t.Workbook={}}if(!t.Workbook.Names){t.Workbook.Names=[]}var i=t.Workbook.Names;var s=ut(n);if(s.s.r==s.e.r){s.e.r=ut(r["!ref"]).e.r;n=dt(s)}for(var f=0;f<i.length;++f){var o=i[f];if(o.Name!="_xlnm._FilterDatabase"){continue}if(o.Sheet!=a){continue}o.Ref="'"+t.SheetNames[a]+"'!"+n;break}if(f==i.length){i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+t.SheetNames[a]+"'!"+n})}return ar("autoFilter",null,{ref:n})}var Eu=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/>/;function ku(e,r){(e.match(Eu)||[]).forEach(function(e){var t=ye(e);if(Ve(t.rightToLeft)){if(!r.Views){r.Views=[{}]}if(!r.Views[0]){r.Views[0]={}}r.Views[0].RTL=true}})}function Su(e,r,t,a){var n={workbookViewId:"0"};if((((a||{}).Workbook||{}).Views||[])[0]){n.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"}return ar("sheetViews",ar("sheetView",null,n),{})
}function Au(e,r,t,a){if(e.v===undefined&&e.f===undefined||e.t==="z"){return""}var n="";var i=e.t,s=e.v;switch(e.t){case"b":n=e.v?"1":"0";break;case"n":n=""+e.v;break;case"e":n=jt[e.v];break;case"d":if(a.cellDates){n=ie(e.v,-1).toISOString()}else{e=fe(e);e.t="n";n=""+(e.v=ee(ie(e.v)))}if(typeof e.z==="undefined"){e.z=D._table[14]}break;default:n=e.v;break}var f=rr("v",Pe(n)),o={r:r};var l=Qh(a.cellXfs,e,a);if(l!==0){o.s=l}switch(e.t){case"n":break;case"d":o.t="d";break;case"b":o.t="b";break;case"e":o.t="e";break;default:if(e.v==null){delete e.t;break}if(a.bookSST){f=rr("v",""+Yh(a.Strings,e.v,a.revStrings));o.t="s";break}o.t="str";break}if(e.t!=i){e.t=i;e.v=s}if(e.f){var c=e.F&&e.F.slice(0,r.length)==r?{t:"array",ref:e.F}:null;f=ar("f",Pe(e.f),c)+(e.v!=null?f:"")}if(e.l){t["!links"].push([r,e.l])}if(e.c){t["!comments"].push([r,e.c])}return ar("c",f,o)}var _u=function(){var e=/<(?:\w+:)?c[ >]/,r=/<\/(?:\w+:)?row>/;var t=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/;var n=/ref=["']([^"']*)["']/;var i=Ye("v"),s=Ye("f");return function f(o,l,c,h,u,d){var p=0,v="",g=[],m=[],b=0,w=0,C=0,E="",k;var S,A=0,_=0;var B,T;var y=0,x=0;var I=Array.isArray(d.CellXf),R;var O=[];var F=[];var P=Array.isArray(l);var N=[],L={},M=false;for(var U=o.split(r),H=0,W=U.length;H!=W;++H){v=U[H].trim();var V=v.length;if(V===0){continue}for(p=0;p<V;++p){if(v.charCodeAt(p)===62){break}}++p;S=ye(v.slice(0,p),true);A=S.r!=null?parseInt(S.r,10):A+1;_=-1;if(c.sheetRows&&c.sheetRows<A){continue}if(h.s.r>A-1){h.s.r=A-1}if(h.e.r<A-1){h.e.r=A-1}if(c&&c.cellStyles){L={};M=false;if(S.ht){M=true;L.hpt=parseFloat(S.ht);L.hpx=ho(L.hpt)}if(S.hidden=="1"){M=true;L.hidden=true}if(S.outlineLevel!=null){M=true;L.level=+S.outlineLevel}if(M){N[A-1]=L}}g=v.slice(p).split(e);for(p=0;p!=g.length;++p){v=g[p].trim();if(v.length===0){continue}m=v.match(t);b=p;w=0;C=0;v="<c "+(v.slice(0,1)=="<"?">":"")+v;if(m!=null&&m.length===2){b=0;E=m[1];for(w=0;w!=E.length;++w){if((C=E.charCodeAt(w)-64)<1||C>26){break}b=26*b+C
}--b;_=b}else{++_}for(w=0;w!=v.length;++w){if(v.charCodeAt(w)===62){break}}++w;S=ye(v.slice(0,w),true);if(!S.r){S.r=ht({r:A-1,c:_})}E=v.slice(w);k={t:""};if((m=E.match(i))!=null&&m[1]!==""){k.v=De(m[1])}if(c.cellFormula){if((m=E.match(s))!=null&&m[1]!==""){k.f=Zl(De(ze(m[1])));if(m[0].indexOf('t="array"')>-1){k.F=(E.match(n)||[])[1];if(k.F.indexOf(":")>-1){O.push([pt(k.F),k.F])}}else{if(m[0].indexOf('t="shared"')>-1){T=ye(m[0]);F[parseInt(T.si,10)]=[T,Zl(De(ze(m[1])))]}}}else{if(m=E.match(/<f[^>]*\/>/)){T=ye(m[0]);if(F[T.si]){k.f=Yl(F[T.si][1],F[T.si][0].ref,S.r)}}}var z=ct(S.r);for(w=0;w<O.length;++w){if(z.r>=O[w][0].s.r&&z.r<=O[w][0].e.r){if(z.c>=O[w][0].s.c&&z.c<=O[w][0].e.c){k.F=O[w][1]}}}}if(S.t==null&&k.v===undefined){if(k.f||k.F){k.v=0;k.t="n"}else{if(!c.sheetStubs){continue}else{k.t="z"}}}else{k.t=S.t||"n"}if(h.s.c>_){h.s.c=_}if(h.e.c<_){h.e.c=_}switch(k.t){case"n":if(k.v==""||k.v==null){if(!c.sheetStubs){continue}k.t="z"}else{k.v=parseFloat(k.v)}break;case"s":if(typeof k.v=="undefined"){if(!c.sheetStubs){continue}k.t="z"}else{B=Gh[parseInt(k.v,10)];k.v=B.t;k.r=B.r;if(c.cellHTML){k.h=B.h}}break;case"str":k.t="s";k.v=k.v!=null?ze(k.v):"";if(c.cellHTML){k.h=Me(k.v)}break;case"inlineStr":m=E.match(a);k.t="s";if(m!=null&&(B=hf(m[1]))){k.v=B.t}else{k.v=""}break;case"b":k.v=Ve(k.v);break;case"d":if(c.cellDates){k.v=ie(k.v,1)}else{k.v=ee(ie(k.v,1));k.t="n"}break;case"e":if(!c||c.cellText!==false){k.w=k.v}k.v=Kt[k.v];break}y=x=0;if(I&&S.s!==undefined){R=d.CellXf[S.s];if(R!=null){if(R.numFmtId!=null){y=R.numFmtId}if(c.cellStyles){if(R.fillId!=null){x=R.fillId}}}}Jh(k,y,x,c,u,d);if(c.cellDates&&I&&k.t=="n"&&D.is_date(D._table[y])){k.t="d";k.v=re(k.v)}if(P){var X=ct(S.r);if(!l[X.r]){l[X.r]=[]}l[X.r][X.c]=k}else{l[S.r]=k}}}if(N.length>0){l["!rows"]=N}}}();function Bu(e,r,t,a){var n=[],i=[],s=pt(e["!ref"]),f="",o,l="",c=[],h=0,u=0,d=e["!rows"];var p=Array.isArray(e);var v={r:l},g,m=-1;for(u=s.s.c;u<=s.e.c;++u){c[u]=st(u)}for(h=s.s.r;h<=s.e.r;++h){i=[];l=tt(h);for(u=s.s.c;
u<=s.e.c;++u){o=c[u]+l;var b=p?(e[h]||[])[u]:e[o];if(b===undefined){continue}if((f=Au(b,o,e,r,t,a))!=null){i.push(f)}}if(i.length>0||d&&d[h]){v={r:l};if(d&&d[h]){g=d[h];if(g.hidden){v.hidden=1}m=-1;if(g.hpx){m=co(g.hpx)}else{if(g.hpt){m=g.hpt}}if(m>-1){v.ht=m;v.customHeight=1}if(g.level){v.outlineLevel=g.level}}n[n.length]=ar("row",i.join(""),v)}}if(d){for(;h<d.length;++h){if(d&&d[h]){v={r:h+1};g=d[h];if(g.hidden){v.hidden=1}m=-1;if(g.hpx){m=co(g.hpx)}else{if(g.hpt){m=g.hpt}}if(m>-1){v.ht=m;v.customHeight=1}if(g.level){v.outlineLevel=g.level}n[n.length]=ar("row","",v)}}}return n.join("")}var Tu=ar("worksheet",null,{xmlns:sr.main[0],"xmlns:r":sr.r});function yu(e,r,t,a){var n=[Se,Tu];var i=t.SheetNames[e],s=0,f="";var o=t.Sheets[i];if(o==null){o={}}var l=o["!ref"]||"A1";var c=pt(l);if(c.e.c>16383||c.e.r>1048575){if(r.WTF){throw new Error("Range "+l+" exceeds format limit A1:XFD1048576")}c.e.c=Math.min(c.e.c,16383);c.e.r=Math.min(c.e.c,1048575);l=dt(c)}if(!a){a={}}o["!comments"]=[];o["!drawing"]=[];if(r.bookType!=="xlsx"&&t.vbaraw){var h=t.SheetNames[e];try{if(t.Workbook){h=t.Workbook.Sheets[e].CodeName||h}}catch(u){}n[n.length]=ar("sheetPr",null,{codeName:Pe(h)})}n[n.length]=ar("dimension",null,{ref:l});n[n.length]=Su(o,r,e,t);if(r.sheetFormat){n[n.length]=ar("sheetFormatPr",null,{defaultRowHeight:r.sheetFormat.defaultRowHeight||"16",baseColWidth:r.sheetFormat.baseColWidth||"10",outlineLevelRow:r.sheetFormat.outlineLevelRow||"7"})}if(o["!cols"]!=null&&o["!cols"].length>0){n[n.length]=bu(o,o["!cols"])}n[s=n.length]="<sheetData/>";o["!links"]=[];if(o["!ref"]!=null){f=Bu(o,r,e,t,a);if(f.length>0){n[n.length]=f}}if(n.length>s+1){n[n.length]="</sheetData>";n[s]=n[s].replace("/>",">")}if(o["!protect"]!=null){n[n.length]=du(o["!protect"])}if(o["!autofilter"]!=null){n[n.length]=Cu(o["!autofilter"],o,t,e)}if(o["!merges"]!=null&&o["!merges"].length>0){n[n.length]=hu(o["!merges"])}var d=-1,p,v=-1;if(o["!links"].length>0){n[n.length]="<hyperlinks>";o["!links"].forEach(function(e){if(!e[1].Target){return
}p={ref:e[0]};if(e[1].Target.charAt(0)!="#"){v=Na(a,-1,Pe(e[1].Target).replace(/#.*$/,""),Ra.HLINK);p["r:id"]="rId"+v}if((d=e[1].Target.indexOf("#"))>-1){p.location=Pe(e[1].Target.slice(d+1))}if(e[1].Tooltip){p.tooltip=Pe(e[1].Tooltip)}n[n.length]=ar("hyperlink",null,p)});n[n.length]="</hyperlinks>"}delete o["!links"];if(o["!margins"]!=null){n[n.length]=gu(o["!margins"])}n[n.length]="";if(!r||r.ignoreEC||r.ignoreEC==void 0){n[n.length]=rr("ignoredErrors",ar("ignoredError",null,{numberStoredAsText:1,sqref:l}))}if(o["!drawing"].length>0){v=Na(a,-1,"../drawings/drawing"+(e+1)+".xml",Ra.DRAW);n[n.length]=ar("drawing",null,{"r:id":"rId"+v})}else{delete o["!drawing"]}if(o["!comments"].length>0){v=Na(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Ra.VML);n[n.length]=ar("legacyDrawing",null,{"r:id":"rId"+v});o["!legacy"]=v}if(n.length>2){n[n.length]="</worksheet>";n[1]=n[1].replace("/>",">")}return n.join("")}function xu(e,r){var t={};var a=e.l+r;t.r=e._R(4);e.l+=4;var n=e._R(2);e.l+=1;var i=e._R(1);e.l=a;if(i&7){t.level=i&7}if(i&16){t.hidden=true}if(i&32){t.hpt=n/20}return t}function Iu(e,r,t){var a=Gr(17+8*16);var n=(t["!rows"]||[])[e]||{};a._W(4,e);a._W(4,0);var i=320;if(n.hpx){i=co(n.hpx)*20}else{if(n.hpt){i=n.hpt*20}}a._W(2,i);a._W(1,0);var s=0;if(n.level){s|=n.level}if(n.hidden){s|=16}if(n.hpx||n.hpt){s|=32}a._W(1,s);a._W(1,0);var f=0,o=a.l;a.l+=4;var l={r:e,c:0};for(var c=0;c<16;++c){if(r.s.c>c+1<<10||r.e.c<c<<10){continue}var h=-1,u=-1;for(var d=c<<10;d<c+1<<10;++d){l.c=d;var p=Array.isArray(t)?(t[l.r]||[])[l.c]:t[ht(l)];if(p){if(h<0){h=d}u=d}}if(h<0){continue}++f;a._W(4,h);a._W(4,u)}var v=a.l;a.l=o;a._W(4,f);a.l=v;return a.length>a.l?a.slice(0,a.l):a}function Ru(e,r,t,a){var n=Iu(a,t,r);if(n.length>17||(r["!rows"]||[])[a]){Yr(e,"BrtRowHdr",n)}}var Du=Vt;var Ou=zt;function Fu(){}function Pu(e,r){var t={};e.l+=19;t.name=Rt(e,r-19);return t}function Nu(e,r){if(r==null){r=Gr(84+4*e.length)}for(var t=0;t<3;++t){r._W(1,0)}$t({auto:1},r);r._W(-4,-1);r._W(-4,-1);Dt(e,r);return r.slice(0,r.l)
}function Lu(e){var r=xt(e);return[r]}function Mu(e,r,t){if(t==null){t=Gr(8)}return It(r,t)}function Uu(e){var r=xt(e);var t=e._R(1);return[r,t,"b"]}function Hu(e,r,t){if(t==null){t=Gr(9)}It(r,t);t._W(1,e.v?1:0);return t}function Wu(e){var r=xt(e);var t=e._R(1);return[r,t,"e"]}function Vu(e){var r=xt(e);var t=e._R(4);return[r,t,"s"]}function zu(e,r,t){if(t==null){t=Gr(12)}It(r,t);t._W(4,r.v);return t}function Xu(e){var r=xt(e);var t=Xt(e);return[r,t,"n"]}function Gu(e,r,t){if(t==null){t=Gr(16)}It(r,t);Gt(e.v,t);return t}function ju(e){var r=xt(e);var t=Mt(e);return[r,t,"n"]}function Ku(e,r,t){if(t==null){t=Gr(12)}It(r,t);Ut(e.v,t);return t}function Yu(e){var r=xt(e);var t=Et(e);return[r,t,"str"]}function $u(e,r,t){if(t==null){t=Gr(12+4*e.v.length)}It(r,t);kt(e.v,t);return t.length>t.l?t.slice(0,t.l):t}function Zu(e,r,t){var a=e.l+r;var n=xt(e);n.r=t["!row"];var i=e._R(1);var s=[n,i,"b"];if(t.cellFormula){e.l+=2;var f=Fh(e,a-e.l,t);s[3]=_h(f,null,n,t.supbooks,t)}else{e.l=a}return s}function Qu(e,r,t){var a=e.l+r;var n=xt(e);n.r=t["!row"];var i=e._R(1);var s=[n,i,"e"];if(t.cellFormula){e.l+=2;var f=Fh(e,a-e.l,t);s[3]=_h(f,null,n,t.supbooks,t)}else{e.l=a}return s}function Ju(e,r,t){var a=e.l+r;var n=xt(e);n.r=t["!row"];var i=Xt(e);var s=[n,i,"n"];if(t.cellFormula){e.l+=2;var f=Fh(e,a-e.l,t);s[3]=_h(f,null,n,t.supbooks,t)}else{e.l=a}return s}function qu(e,r,t){var a=e.l+r;var n=xt(e);n.r=t["!row"];var i=Et(e);var s=[n,i,"str"];if(t.cellFormula){e.l+=2;var f=Fh(e,a-e.l,t);s[3]=_h(f,null,n,t.supbooks,t)}else{e.l=a}return s}var ed=Vt;var rd=zt;function td(e,r){if(r==null){r=Gr(4)}r._W(4,e);return r}function ad(e,r){var t=e.l+r;var a=Vt(e,16);var n=Ot(e);var i=Et(e);var s=Et(e);var f=Et(e);e.l=t;var o={rfx:a,relId:n,loc:i,display:f};if(s){o.Tooltip=s}return o}function nd(e,r){var t=Gr(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));zt({s:ct(e[0]),e:ct(e[0])},t);Lt("rId"+r,t);var a=e[1].Target.indexOf("#");var n=a==-1?"":e[1].Target.slice(a+1);kt(n||"",t);kt(e[1].Tooltip||"",t);
kt("",t);return t.slice(0,t.l)}function id(e,r,t){var a=e.l+r;var n=Ht(e,16);var i=e._R(1);var s=[n];s[2]=i;if(t.cellFormula){var f=Oh(e,a-e.l,t);s[1]=f}else{e.l=a}return s}function sd(e,r,t){var a=e.l+r;var n=Vt(e,16);var i=[n];if(t.cellFormula){var s=Nh(e,a-e.l,t);i[1]=s;e.l=a}else{e.l=a}return i}function fd(e,r,t){if(t==null){t=Gr(18)}var a=$h(e,r);t._W(-4,e);t._W(-4,e);t._W(4,(a.width||10)*256);t._W(4,0);var n=0;if(r.hidden){n|=1}if(typeof a.width=="number"){n|=2}t._W(1,n);t._W(1,0);return t}var od=["left","right","top","bottom","header","footer"];function ld(e){var r={};od.forEach(function(t){r[t]=Xt(e,8)});return r}function cd(e,r){if(r==null){r=Gr(6*8)}Zh(e);od.forEach(function(t){Gt(e[t],r)});return r}function hd(e){var r=e._R(2);e.l+=28;return{RTL:r&32}}function ud(e,r,t){if(t==null){t=Gr(30)}var a=924;if((((r||{}).Views||[])[0]||{}).RTL){a|=32}t._W(2,a);t._W(4,0);t._W(4,0);t._W(4,0);t._W(1,0);t._W(1,0);t._W(2,0);t._W(2,100);t._W(2,0);t._W(2,0);t._W(2,0);t._W(4,0);return t}function dd(e){var r=Gr(24);r._W(4,4);r._W(4,1);zt(e,r);return r}function pd(e,r){if(r==null){r=Gr(16*4+2)}r._W(2,e.password?Uf(e.password):0);r._W(4,1);[["objects",false],["scenarios",false],["formatCells",true],["formatColumns",true],["formatRows",true],["insertColumns",true],["insertRows",true],["insertHyperlinks",true],["deleteColumns",true],["deleteRows",true],["selectLockedCells",false],["sort",true],["autoFilter",true],["pivotTables",true],["selectUnlockedCells",false]].forEach(function(t){if(t[1]){r._W(4,e[t[0]]!=null&&!e[t[0]]?1:0)}else{r._W(4,e[t[0]]!=null&&e[t[0]]?0:1)}});return r}function vd(e,r,t,a,n,i,s){if(!e){return e}var f=r||{};if(!a){a={"!id":{}}}if(v!=null&&f.dense==null){f.dense=v}var o=f.dense?[]:{};var l;var c={s:{r:2000000,c:2000000},e:{r:0,c:0}};var h=false,u=false;var d,p,g,m,b,w,C,E,k;var S=[];f.biff=12;f["!row"]=0;var A=0,_=false;var B=[];var T={};var y=f.supbooks||[[]];y.sharedf=T;y.arrayf=B;y.SheetNames=n.SheetNames||n.Sheets.map(function(e){return e.name});if(!f.supbooks){f.supbooks=y;
if(n.Names){for(var x=0;x<n.Names.length;++x){y[0][x+1]=n.Names[x]}}}var I=[],R=[];var O=false;jr(e,function P(e,r,v){if(u){return}switch(v){case 148:l=e;break;case 0:d=e;if(f.sheetRows&&f.sheetRows<=d.r){u=true}E=tt(m=d.r);f["!row"]=d.r;if(e.hidden||e.hpt||e.level!=null){if(e.hpt){e.hpx=ho(e.hpt)}R[e.r]=e}break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:p={t:e[2]};switch(e[2]){case"n":p.v=e[1];break;case"s":C=Gh[e[1]];p.v=C.t;p.r=C.r;break;case"b":p.v=e[1]?true:false;break;case"e":p.v=e[1];if(f.cellText!==false){p.w=jt[p.v]}break;case"str":p.t="s";p.v=e[1];break}if(g=s.CellXf[e[0].iStyleRef]){Jh(p,g.numFmtId,null,f,i,s)}b=e[0].c;if(f.dense){if(!o[m]){o[m]=[]}o[m][b]=p}else{o[st(b)+E]=p}if(f.cellFormula){_=false;for(A=0;A<B.length;++A){var x=B[A];if(d.r>=x[0].s.r&&d.r<=x[0].e.r){if(b>=x[0].s.c&&b<=x[0].e.c){p.F=dt(x[0]);_=true}}}if(!_&&e.length>3){p.f=e[3]}}if(c.s.r>d.r){c.s.r=d.r}if(c.s.c>b){c.s.c=b}if(c.e.r<d.r){c.e.r=d.r}if(c.e.c<b){c.e.c=b}if(f.cellDates&&g&&p.t=="n"&&D.is_date(D._table[g.numFmtId])){var F=D.parse_date_code(p.v);if(F){p.t="d";p.v=new Date(F.y,F.m-1,F.d,F.H,F.M,F.S,F.u)}}break;case 1:if(!f.sheetStubs||h){break}p={t:"z",v:undefined};b=e[0].c;if(f.dense){if(!o[m]){o[m]=[]}o[m][b]=p}else{o[st(b)+E]=p}if(c.s.r>d.r){c.s.r=d.r}if(c.s.c>b){c.s.c=b}if(c.e.r<d.r){c.e.r=d.r}if(c.e.c<b){c.e.c=b}break;case 176:S.push(e);break;case 494:var P=a["!id"][e.relId];if(P){e.Target=P.Target;if(e.loc){e.Target+="#"+e.loc}e.Rel=P}else{if(e.relId==""){e.Target="#"+e.loc}}for(m=e.rfx.s.r;m<=e.rfx.e.r;++m){for(b=e.rfx.s.c;b<=e.rfx.e.c;++b){if(f.dense){if(!o[m]){o[m]=[]}if(!o[m][b]){o[m][b]={t:"z",v:undefined}}o[m][b].l=e}else{w=ht({c:b,r:m});if(!o[w]){o[w]={t:"z",v:undefined}}o[w].l=e}}}break;case 426:if(!f.cellFormula){break}B.push(e);k=f.dense?o[m][b]:o[st(b)+E];k.f=_h(e[1],c,{r:d.r,c:b},y,f);k.F=dt(e[0]);break;case 427:if(!f.cellFormula){break}T[ht(e[0].s)]=e[1];k=f.dense?o[m][b]:o[st(b)+E];k.f=_h(e[1],c,{r:d.r,c:b},y,f);break;case 60:if(!f.cellStyles){break
}while(e.e>=e.s){I[e.e--]={width:e.w/256,hidden:!!(e.flags&1)};if(!O){O=true;so(e.w/256)}fo(I[e.e+1])}break;case 161:o["!autofilter"]={ref:dt(e)};break;case 476:o["!margins"]=e;break;case 147:if(!n.Sheets[t]){n.Sheets[t]={}}if(e.name){n.Sheets[t].CodeName=e.name}break;case 137:if(!n.Views){n.Views=[{}]}if(!n.Views[0]){n.Views[0]={}}if(e.RTL){n.Views[0].RTL=true}break;case 485:break;case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 49:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 64:case 1053:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 151:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 152:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=true;break;case 36:h=false;break;case 37:break;case 38:break;default:if((r||"").indexOf("Begin")>0){}else{if((r||"").indexOf("End")>0){}else{if(!h||f.WTF){throw new Error("Unexpected record "+v+" "+r)}}}}},f);delete f.supbooks;delete f["!row"];if(!o["!ref"]&&(c.s.r<2000000||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))){o["!ref"]=dt(l||c)}if(f.sheetRows&&o["!ref"]){var F=pt(o["!ref"]);if(f.sheetRows<=+F.e.r){F.e.r=f.sheetRows-1;if(F.e.r>c.e.r){F.e.r=c.e.r}if(F.e.r<F.s.r){F.s.r=F.e.r}if(F.e.c>c.e.c){F.e.c=c.e.c}if(F.e.c<F.s.c){F.s.c=F.e.c}o["!fullref"]=o["!ref"];o["!ref"]=dt(F)}}if(S.length>0){o["!merges"]=S}if(I.length>0){o["!cols"]=I}if(R.length>0){o["!rows"]=R}return o}function gd(e,r,t,a,n,i){if(r.v===undefined){return""}var s="";switch(r.t){case"b":s=r.v?"1":"0";break;case"d":r=fe(r);r.z=r.z||D._table[14];r.v=ee(ie(r.v));r.t="n";break;case"n":case"e":s=""+r.v;break;default:s=r.v;break}var f={r:t,c:a};f.s=Qh(n.cellXfs,r,n);if(r.l){i["!links"].push([ht(f),r.l])}if(r.c){i["!comments"].push([ht(f),r.c])}switch(r.t){case"s":case"str":if(n.bookSST){s=Yh(n.Strings,r.v,n.revStrings);f.t="s";f.v=s;Yr(e,"BrtCellIsst",zu(r,f))
}else{f.t="str";Yr(e,"BrtCellSt",$u(r,f))}return;case"n":if(r.v==(r.v|0)&&r.v>-1000&&r.v<1000){Yr(e,"BrtCellRk",Ku(r,f))}else{Yr(e,"BrtCellReal",Gu(r,f))}return;case"b":f.t="b";Yr(e,"BrtCellBool",Hu(r,f));return;case"e":f.t="e";break}Yr(e,"BrtCellBlank",Mu(r,f))}function md(e,r,t,a){var n=pt(r["!ref"]||"A1"),i,s="",f=[];Yr(e,"BrtBeginSheetData");var o=Array.isArray(r);var l=n.e.r;if(r["!rows"]){l=Math.max(n.e.r,r["!rows"].length-1)}for(var c=n.s.r;c<=l;++c){s=tt(c);Ru(e,r,n,c);if(c<=n.e.r){for(var h=n.s.c;h<=n.e.c;++h){if(c===n.s.r){f[h]=st(h)}i=f[h]+s;var u=o?(r[c]||[])[h]:r[i];if(!u){continue}gd(e,u,c,h,a,r)}}}Yr(e,"BrtEndSheetData")}function bd(e,r){if(!r||!r["!merges"]){return}Yr(e,"BrtBeginMergeCells",td(r["!merges"].length));r["!merges"].forEach(function(r){Yr(e,"BrtMergeCell",rd(r))});Yr(e,"BrtEndMergeCells")}function wd(e,r){if(!r||!r["!cols"]){return}Yr(e,"BrtBeginColInfos");r["!cols"].forEach(function(r,t){if(r){Yr(e,"BrtColInfo",fd(t,r))}});Yr(e,"BrtEndColInfos")}function Cd(e,r){if(!r||!r["!ref"]){return}Yr(e,"BrtBeginCellIgnoreECs");Yr(e,"BrtCellIgnoreEC",dd(pt(r["!ref"])));Yr(e,"BrtEndCellIgnoreECs")}function Ed(e,r,t){r["!links"].forEach(function(r){if(!r[1].Target){return}var a=Na(t,-1,r[1].Target.replace(/#.*$/,""),Ra.HLINK);Yr(e,"BrtHLink",nd(r,a))});delete r["!links"]}function kd(e,r,t,a){if(r["!comments"].length>0){var n=Na(a,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Ra.VML);Yr(e,"BrtLegacyDrawing",Lt("rId"+n));r["!legacy"]=n}}function Sd(e,r){if(!r["!autofilter"]){return}Yr(e,"BrtBeginAFilter",zt(pt(r["!autofilter"].ref)));Yr(e,"BrtEndAFilter")}function Ad(e,r,t){Yr(e,"BrtBeginWsViews");Yr(e,"BrtBeginWsView",ud(r,t));Yr(e,"BrtEndWsView");Yr(e,"BrtEndWsViews")}function _d(){}function Bd(e,r){if(!r["!protect"]){return}Yr(e,"BrtSheetProtection",pd(r["!protect"]))}function Td(e,r,t,a){var n=Kr();var i=t.SheetNames[e],s=t.Sheets[i]||{};var f=i;try{if(t&&t.Workbook){f=t.Workbook.Sheets[e].CodeName||f}}catch(o){}var l=pt(s["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(r.WTF){throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576")
}l.e.c=Math.min(l.e.c,16383);l.e.r=Math.min(l.e.c,1048575)}s["!links"]=[];s["!comments"]=[];Yr(n,"BrtBeginSheet");if(t.vbaraw){Yr(n,"BrtWsProp",Nu(f))}Yr(n,"BrtWsDim",Ou(l));Ad(n,s,t.Workbook);_d(n,s);wd(n,s,e,r,t);md(n,s,e,r,t);Bd(n,s);Sd(n,s);bd(n,s);Ed(n,s,a);if(s["!margins"]){Yr(n,"BrtMargins",cd(s["!margins"]))}if(!r||r.ignoreEC||r.ignoreEC==void 0){Cd(n,s)}kd(n,s,e,a);Yr(n,"BrtEndSheet");return n.end()}function yd(e){var r=[];(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach(function(e){var t=e.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);if(!t){return}r[+t[1]]=+t[2]});var t=De((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return[r,t]}function xd(e,r,t,a,n,i){var s=i||{"!type":"chart"};if(!e){return i}var f=0,o=0,l="A";var c={s:{r:2000000,c:2000000},e:{r:0,c:0}};(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(e){var r=yd(e);c.s.r=c.s.c=0;c.e.c=f;l=st(f);r[0].forEach(function(e,t){s[l+tt(t)]={t:"n",v:e,z:r[1]};o=t});if(c.e.r<o){c.e.r=o}++f});if(f>0){s["!ref"]=dt(c)}return s}Ra.CS="http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet";var Id=ar("chartsheet",null,{xmlns:sr.main[0],"xmlns:r":sr.r});function Rd(e,r,t,a,n){if(!e){return e}if(!a){a={"!id":{}}}var i={"!type":"chart","!chart":null,"!rel":""};var s;var f=e.match(ou);if(f){uu(f[0],i,n,t)}if(s=e.match(/drawing r:id="(.*?)"/)){i["!rel"]=s[1]}if(a["!id"][i["!rel"]]){i["!chart"]=a["!id"][i["!rel"]]}return i}function Dd(e,r,t,a){var n=[Se,Id];n[n.length]=ar("drawing",null,{"r:id":"rId1"});Na(a,-1,"../drawings/drawing"+(e+1)+".xml",Ra.DRAW);if(n.length>2){n[n.length]="</chartsheet>";n[1]=n[1].replace("/>",">")}return n.join("")}function Od(e,r){e.l+=10;var t=Et(e,r-10);return{name:t}}function Fd(e,r,t,a,n){if(!e){return e}if(!a){a={"!id":{}}}var i={"!type":"chart","!chart":null,"!rel":""};var s=[];var f=false;jr(e,function o(e,a,l){switch(l){case 550:i["!rel"]=e;break;case 651:if(!n.Sheets[t]){n.Sheets[t]={}}if(e.name){n.Sheets[t].CodeName=e.name
}break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:f=true;break;case 36:f=false;break;case 37:s.push(a);break;case 38:s.pop();break;default:if((a||"").indexOf("Begin")>0){s.push(a)}else{if((a||"").indexOf("End")>0){s.pop()}else{if(!f||r.WTF){throw new Error("Unexpected record "+l+" "+a)}}}}},r);if(a["!id"][i["!rel"]]){i["!chart"]=a["!id"][i["!rel"]]}return i}function Pd(){var e=Kr();Yr(e,"BrtBeginSheet");Yr(e,"BrtEndSheet");return e.end()}var Nd=[["allowRefreshQuery",false,"bool"],["autoCompressPictures",true,"bool"],["backupFile",false,"bool"],["checkCompatibility",false,"bool"],["CodeName",""],["date1904",false,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",false,"bool"],["hidePivotFieldList",false,"bool"],["promptedSolutions",false,"bool"],["publishItems",false,"bool"],["refreshAllConnections",false,"bool"],["saveExternalLinkValues",true,"bool"],["showBorderUnselectedTables",true,"bool"],["showInkAnnotation",true,"bool"],["showObjects","all"],["showPivotChartFilter",false,"bool"],["updateLinks","userSet"]];var Ld=[["activeTab",0,"int"],["autoFilterDateGrouping",true,"bool"],["firstSheet",0,"int"],["minimized",false,"bool"],["showHorizontalScroll",true,"bool"],["showSheetTabs",true,"bool"],["showVerticalScroll",true,"bool"],["tabRatio",600,"int"],["visibility","visible"]];var Md=[];var Ud=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Hd(e,r){for(var t=0;t!=e.length;++t){var a=e[t];for(var n=0;n!=r.length;++n){var i=r[n];if(a[i[0]]==null){a[i[0]]=i[1]}else{switch(i[2]){case"bool":if(typeof a[i[0]]=="string"){a[i[0]]=Ve(a[i[0]])}break;case"int":if(typeof a[i[0]]=="string"){a[i[0]]=parseInt(a[i[0]],10)}break}}}}}function Wd(e,r){for(var t=0;t!=r.length;++t){var a=r[t];if(e[a[0]]==null){e[a[0]]=a[1]}else{switch(a[2]){case"bool":if(typeof e[a[0]]=="string"){e[a[0]]=Ve(e[a[0]])
}break;case"int":if(typeof e[a[0]]=="string"){e[a[0]]=parseInt(e[a[0]],10)}break}}}}function Vd(e){Wd(e.WBProps,Nd);Wd(e.CalcPr,Ud);Hd(e.WBView,Ld);Hd(e.Sheets,Md);jh.date1904=Ve(e.WBProps.date1904)}function zd(e){if(!e.Workbook){return"false"}if(!e.Workbook.WBProps){return"false"}return Ve(e.Workbook.WBProps.date1904)?"true":"false"}var Xd="][*?/\\".split("");function Gd(e,r){if(e.length>31){if(r){return false}throw new Error("Sheet names cannot exceed 31 chars")}var t=true;Xd.forEach(function(a){if(e.indexOf(a)==-1){return}if(!r){throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}t=false});return t}function jd(e,r,t){e.forEach(function(a,n){Gd(a);for(var i=0;i<n;++i){if(a==e[i]){throw new Error("Duplicate Sheet Name: "+a)}}if(t){var s=r&&r[n]&&r[n].CodeName||a;if(s.charCodeAt(0)==95&&s.length>22){throw new Error("Bad Code Name: Worksheet"+s)}}})}function Kd(e){if(!e||!e.SheetNames||!e.Sheets){throw new Error("Invalid Workbook")}if(!e.SheetNames.length){throw new Error("Workbook is empty")}var r=e.Workbook&&e.Workbook.Sheets||[];jd(e.SheetNames,r,!!e.vbaraw);for(var t=0;t<e.SheetNames.length;++t){qh(e.Sheets[e.SheetNames[t]],e.SheetNames[t],t)}}var Yd=/<\w+:workbook/;function $d(e,r){if(!e){throw new Error("Could not find file")}var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""};var a=false,n="xmlns";var i={},s=0;e.replace(_e,function f(o,l){var c=ye(o);switch(xe(c[0])){case"<?xml":break;case"<workbook":if(o.match(Yd)){n="xmlns"+o.match(/<(\w+):/)[1]}t.xmlns=c[n];break;case"</workbook>":break;case"<fileVersion":delete c[0];t.AppVersion=c;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Nd.forEach(function(e){if(c[e[0]]==null){return}switch(e[2]){case"bool":t.WBProps[e[0]]=Ve(c[e[0]]);break;case"int":t.WBProps[e[0]]=parseInt(c[e[0]],10);break;default:t.WBProps[e[0]]=c[e[0]]}});if(c.codeName){t.WBProps.CodeName=c.codeName}break;case"</workbookPr>":break;
case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete c[0];t.WBView.push(c);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(c.state){case"hidden":c.Hidden=1;break;case"veryHidden":c.Hidden=2;break;default:c.Hidden=0}delete c.state;c.name=De(ze(c.name));delete c[0];t.Sheets.push(c);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=true;break;case"</definedNames>":a=false;break;case"<definedName":i={};i.Name=ze(c.name);if(c.comment){i.Comment=c.comment}if(c.localSheetId){i.Sheet=+c.localSheetId}s=l+o.length;break;case"</definedName>":i.Ref=De(ze(e.slice(s,l)));t.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete c[0];t.CalcPr=c;break;case"<calcPr/>":delete c[0];t.CalcPr=c;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=true;break;case"</ext>":a=false;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=true;break;case"</AlternateContent>":a=false;break;
case"<revisionPtr":break;default:if(!a&&r.WTF){throw new Error("unrecognized "+c[0]+" in workbook")}}return o});if(sr.main.indexOf(t.xmlns)===-1){throw new Error("Unknown Namespace: "+t.xmlns)}Vd(t);return t}var Zd=ar("workbook",null,{xmlns:sr.main[0],"xmlns:r":sr.r});function Qd(e){var r=[Se];r[r.length]=Zd;var t=e.Workbook&&(e.Workbook.Names||[]).length>0;var a={codeName:"ThisWorkbook"};if(e.Workbook&&e.Workbook.WBProps){Nd.forEach(function(r){if(e.Workbook.WBProps[r[0]]==null){return}if(e.Workbook.WBProps[r[0]]==r[1]){return}a[r[0]]=e.Workbook.WBProps[r[0]]});if(e.Workbook.WBProps.CodeName){a.codeName=e.Workbook.WBProps.CodeName;delete a.CodeName}}r[r.length]=ar("workbookPr",null,a);r[r.length]="<sheets>";var n=e.Workbook&&e.Workbook.Sheets||[];for(var i=0;i!=e.SheetNames.length;++i){var s={name:Pe(e.SheetNames[i].slice(0,31))};s.sheetId=""+(i+1);s["r:id"]="rId"+(i+1);if(n[i]){switch(n[i].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}}r[r.length]=ar("sheet",null,s)}r[r.length]="</sheets>";if(t){r[r.length]="<definedNames>";if(e.Workbook&&e.Workbook.Names){e.Workbook.Names.forEach(function(e){var t={name:e.Name};if(e.Comment){t.comment=e.Comment}if(e.Sheet!=null){t.localSheetId=""+e.Sheet}if(!e.Ref){return}r[r.length]=ar("definedName",String(e.Ref),t)})}r[r.length]="</definedNames>"}if(r.length>2){r[r.length]="</workbook>";r[1]=r[1].replace("/>",">")}return r.join("")}function Jd(e,r){var t={};t.Hidden=e._R(4);t.iTabID=e._R(4);t.strRelID=Nt(e,r-8);t.name=Et(e);return t}function qd(e,r){if(!r){r=Gr(127)}r._W(4,e.Hidden);r._W(4,e.iTabID);Lt(e.strRelID,r);kt(e.name.slice(0,31),r);return r.length>r.l?r.slice(0,r.l):r}function ep(e,r){var t={};var a=e._R(4);t.defaultThemeVersion=e._R(4);var n=r>8?Et(e):"";if(n.length>0){t.CodeName=n}t.autoCompressPictures=!!(a&65536);t.backupFile=!!(a&64);t.checkCompatibility=!!(a&4096);t.date1904=!!(a&1);t.filterPrivacy=!!(a&8);t.hidePivotFieldList=!!(a&1024);t.promptedSolutions=!!(a&16);t.publishItems=!!(a&2048);
t.refreshAllConnections=!!(a&262144);t.saveExternalLinkValues=!!(a&128);t.showBorderUnselectedTables=!!(a&4);t.showInkAnnotation=!!(a&32);t.showObjects=["all","placeholders","none"][a>>13&3];t.showPivotChartFilter=!!(a&32768);t.updateLinks=["userSet","never","always"][a>>8&3];return t}function rp(e,r){if(!r){r=Gr(72)}var t=0;if(e){if(e.filterPrivacy){t|=8}}r._W(4,t);r._W(4,0);Dt(e&&e.CodeName||"ThisWorkbook",r);return r.slice(0,r.l)}function tp(e,r){var t={};e._R(4);t.ArchID=e._R(4);e.l+=r-8;return t}function ap(e,r,t){var a=e.l+r;e.l+=4;e.l+=1;var n=e._R(4);var i=Pt(e);var s=Ph(e,0,t);var f=Ot(e);e.l=a;var o={Name:i,Ptg:s};if(n<268435455){o.Sheet=n}if(f){o.Comment=f}return o}function np(e,r){var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""};var a=false;if(!r){r={}}r.biff=12;var n=[];var i=[[]];i.SheetNames=[];i.XTI=[];jr(e,function s(e,f,o){switch(o){case 156:i.SheetNames.push(e.name);t.Sheets.push(e);break;case 153:t.WBProps=e;break;case 39:if(e.Sheet!=null){r.SID=e.Sheet}e.Ref=_h(e.Ptg,null,null,i,r);delete r.SID;delete e.Ptg;n.push(e);break;case 1036:break;case 357:case 358:case 355:case 667:if(!i[0].length){i[0]=[o,e]}else{i.push([o,e])}i[i.length-1].XTI=[];break;case 362:if(i.length===0){i[0]=[];i[0].XTI=[]}i[i.length-1].XTI=i[i.length-1].XTI.concat(e);i.XTI=i.XTI.concat(e);break;case 361:break;case 3072:case 3073:case 2071:case 534:case 677:case 158:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a=true;break;case 36:a=false;break;case 37:break;case 38:break;case 16:break;default:if((f||"").indexOf("Begin")>0){}else{if((f||"").indexOf("End")>0){}else{if(!a||r.WTF){throw new Error("Unexpected record "+o+" "+f)}}}}},r);Vd(t);t.Names=n;t.supbooks=i;return t}function ip(e,r){Yr(e,"BrtBeginBundleShs");for(var t=0;t!=r.SheetNames.length;++t){var a=r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t]&&r.Workbook.Sheets[t].Hidden||0;
var n={Hidden:a,iTabID:t+1,strRelID:"rId"+(t+1),name:r.SheetNames[t]};Yr(e,"BrtBundleSh",qd(n))}Yr(e,"BrtEndBundleShs")}function sp(r,t){if(!t){t=Gr(127)}for(var a=0;a!=4;++a){t._W(4,0)}kt("SheetJS",t);kt(e.version,t);kt(e.version,t);kt("7262",t);t.length=t.l;return t.length>t.l?t.slice(0,t.l):t}function fp(e,r){if(!r){r=Gr(29)}r._W(-4,0);r._W(-4,460);r._W(4,28800);r._W(4,17600);r._W(4,500);r._W(4,e);r._W(4,e);var t=120;r._W(1,t);return r.length>r.l?r.slice(0,r.l):r}function op(e,r){if(!r.Workbook||!r.Workbook.Sheets){return}var t=r.Workbook.Sheets;var a=0,n=-1,i=-1;for(;a<t.length;++a){if(!t[a]||!t[a].Hidden&&n==-1){n=a}else{if(t[a].Hidden==1&&i==-1){i=a}}}if(i>n){return}Yr(e,"BrtBeginBookViews");Yr(e,"BrtBookView",fp(n));Yr(e,"BrtEndBookViews")}function lp(e,r){var t=Kr();Yr(t,"BrtBeginBook");Yr(t,"BrtFileVersion",sp());Yr(t,"BrtWbProp",rp(e.Workbook&&e.Workbook.WBProps||null));op(t,e,r);ip(t,e,r);Yr(t,"BrtEndBook");return t.end()}function cp(e,r,t){if(r.slice(-4)===".bin"){return np(e,t)}return $d(e,t)}function hp(e,r,t,a,n,i,s,f){if(r.slice(-4)===".bin"){return vd(e,a,t,n,i,s,f)}return cu(e,a,t,n,i,s,f)}function up(e,r,t,a,n,i,s,f){if(r.slice(-4)===".bin"){return Fd(e,a,t,n,i,s,f)}return Rd(e,a,t,n,i,s,f)}function dp(e,r,t,a,n,i,s,f){if(r.slice(-4)===".bin"){return Vl(e,a,t,n,i,s,f)}return zl(e,a,t,n,i,s,f)}function pp(e,r,t,a,n,i,s,f){if(r.slice(-4)===".bin"){return Hl(e,a,t,n,i,s,f)}return Wl(e,a,t,n,i,s,f)}function vp(e,r,t,a){if(r.slice(-4)===".bin"){return Wo(e,t,a)}return So(e,t,a)}function gp(e,r,t){return fl(e,t)}function mp(e,r,t){if(r.slice(-4)===".bin"){return wf(e,t)}return vf(e,t)}function bp(e,r,t){if(r.slice(-4)===".bin"){return Fl(e,t)}return Tl(e,t)}function wp(e,r,t){if(r.slice(-4)===".bin"){return wl(e,r,t)}return ml(e,r,t)}function Cp(e,r,t){if(r.slice(-4)===".bin"){return El(e,r,t)}return Cl(e,r,t)}function Ep(e,r,t){return(r.slice(-4)===".bin"?lp:Qd)(e,t)}function kp(e,r,t,a,n){return(r.slice(-4)===".bin"?Td:yu)(e,t,a,n)}function Sp(e,r,t,a,n){return(r.slice(-4)===".bin"?Pd:Dd)(e,t,a,n)
}function Ap(e,r,t){return(r.slice(-4)===".bin"?Jo:_o)(e,t)}function _p(e,r,t){return(r.slice(-4)===".bin"?kf:mf)(e,t)}function Bp(e,r,t){return(r.slice(-4)===".bin"?Pl:xl)(e,t)}var Tp=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g;var yp=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;var xp=function(e){return String.fromCharCode(e)};function Ip(e,r){var t=e.split(/\s+/);var a=[];if(!r){a[0]=t[0]}if(t.length===1){return a}var n=e.match(Tp),i,s,f,o;if(n){for(o=0;o!=n.length;++o){i=n[o].match(yp);if((s=i[1].indexOf(":"))===-1){a[i[1]]=i[2].slice(1,i[2].length-1)}else{if(i[1].slice(0,6)==="xmlns:"){f="xmlns"+i[1].slice(6)}else{f=i[1].slice(s+1)}a[f]=i[2].slice(1,i[2].length-1)}}}return a}function Rp(e){var r=e.split(/\s+/);var t={};if(r.length===1){return t}var a=e.match(Tp),n,i,s,f;if(a){for(f=0;f!=a.length;++f){n=a[f].match(yp);if((i=n[1].indexOf(":"))===-1){t[n[1]]=n[2].slice(1,n[2].length-1)}else{if(n[1].slice(0,6)==="xmlns:"){s="xmlns"+n[1].slice(6)}else{s=n[1].slice(i+1)}t[s]=n[2].slice(1,n[2].length-1)}}}return t}function Dp(e,r){var t=F[e]||De(e);if(t==="General"){return D._general(r)}return D.format(t,r)}function Op(e,r,t,a){var n=a;switch((t[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=Ve(a);break;case"i2":case"int":n=parseInt(a,10);break;case"r4":case"float":n=parseFloat(a);break;case"date":case"dateTime.tz":n=ie(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+t[0])}e[De(r)]=n}function Fp(e,r,t){if(e.t==="z"){return}if(!t||t.cellText!==false){try{if(e.t==="e"){e.w=e.w||jt[e.v]}else{if(r==="General"){if(e.t==="n"){if((e.v|0)===e.v){e.w=D._general_int(e.v)}else{e.w=D._general_num(e.v)}}else{e.w=D._general(e.v)}}else{e.w=Dp(r||"General",e.v)}}}catch(a){if(t.WTF){throw a}}}try{var n=F[r]||r||"General";if(t.cellNF){e.z=n}if(t.cellDates&&e.t=="n"&&D.is_date(n)){var i=D.parse_date_code(e.v);if(i){e.t="d";e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u)}}}catch(a){if(t.WTF){throw a
}}}function Pp(e,r,t){if(t.cellStyles){if(r.Interior){var a=r.Interior;if(a.Pattern){a.patternType=uo[a.Pattern]||a.Pattern}}}e[r.ID]=r}function Np(e,r,t,a,n,i,s,f,o,l){var c="General",h=a.StyleID,u={};l=l||{};var d=[];var p=0;if(h===undefined&&f){h=f.StyleID}if(h===undefined&&s){h=s.StyleID}while(i[h]!==undefined){if(i[h].nf){c=i[h].nf}if(i[h].Interior){d.push(i[h].Interior)}if(!i[h].Parent){break}h=i[h].Parent}switch(t.Type){case"Boolean":a.t="b";a.v=Ve(e);break;case"String":a.t="s";a.r=He(De(e));a.v=e.indexOf("<")>-1?De(r):a.r;break;case"DateTime":if(e.slice(-1)!="Z"){e+="Z"}a.v=(ie(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1000);if(a.v!==a.v){a.v=De(e)}else{if(a.v<60){a.v=a.v-1}}if(!c||c=="General"){c="yyyy-mm-dd"}case"Number":if(a.v===undefined){a.v=+e}if(!a.t){a.t="n"}break;case"Error":a.t="e";a.v=Kt[e];if(l.cellText!==false){a.w=e}break;default:a.t="s";a.v=He(r||e);break}Fp(a,c,l);if(l.cellFormula!==false){if(a.Formula){var v=De(a.Formula);if(v.charCodeAt(0)==61){v=v.slice(1)}a.f=Xl(v,n);delete a.Formula;if(a.ArrayRange=="RC"){a.F=Xl("RC:RC",n)}else{if(a.ArrayRange){a.F=Xl(a.ArrayRange,n);o.push([pt(a.F),a.F])}}}else{for(p=0;p<o.length;++p){if(n.r>=o[p][0].s.r&&n.r<=o[p][0].e.r){if(n.c>=o[p][0].s.c&&n.c<=o[p][0].e.c){a.F=o[p][1]}}}}}if(l.cellStyles){d.forEach(function(e){if(!u.patternType&&e.patternType){u.patternType=e.patternType}});a.s=u}if(a.StyleID!==undefined){a.ixfe=a.StyleID}}function Lp(e){e.t=e.v||"";e.t=e.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n");e.v=e.w=e.ixfe=undefined}function Mp(e){if(b&&Buffer.isBuffer(e)){return e.toString("utf8")}if(typeof e==="string"){return e}if(typeof Uint8Array!=="undefined"&&e instanceof Uint8Array){return ze(B(y(e)))}throw new Error("Bad input format: expected Buffer or string")}var Up=/<(\/?)([^\s?>!\/:]*:|)([^\s?>:\/]+)[^>]*>/gm;function Hp(e,r){var t=r||{};O(D);var a=d(Mp(e));if(t.type=="binary"||t.type=="array"||t.type=="base64"){if(typeof cptable!=="undefined"){a=cptable.utils.decode(65001,c(a))}else{a=ze(a)}}var n=a.slice(0,1024).toLowerCase(),i=false;
if(n.indexOf("<?xml")==-1){["html","table","head","meta","script","style","div"].forEach(function(e){if(n.indexOf("<"+e)>=0){i=true}})}if(i){return Dv.to_workbook(a,t)}var s;var f=[],o;if(v!=null&&t.dense==null){t.dense=v}var l={},h=[],u=t.dense?[]:{},p="";var g={},m={},b={};var w=Ip('<Data ss:Type="String">'),C=0;var E=0,k=0;var S={s:{r:2000000,c:2000000},e:{r:0,c:0}};var A={},_={};var B="",T=0;var y=[];var x={},I={},R=0,P=[];var N=[],L={};var M=[],U,H=false;var W=[];var V=[],z={},X=0,G=0;var j={Sheets:[],WBProps:{date1904:false}},K={};Up.lastIndex=0;a=a.replace(/<!--([\s\S]*?)-->/gm,"");while(s=Up.exec(a)){switch(s[3]){case"Data":if(f[f.length-1][1]){break}if(s[1]==="/"){Np(a.slice(C,s.index),B,w,f[f.length-1][0]=="Comment"?L:m,{c:E,r:k},A,M[E],b,W,t)}else{B="";w=Ip(s[0]);C=s.index+s[0].length}break;case"Cell":if(s[1]==="/"){if(N.length>0){m.c=N}if((!t.sheetRows||t.sheetRows>k)&&m.v!==undefined){if(t.dense){if(!u[k]){u[k]=[]}u[k][E]=m}else{u[st(E)+tt(k)]=m}}if(m.HRef){m.l={Target:m.HRef};if(m.HRefScreenTip){m.l.Tooltip=m.HRefScreenTip}delete m.HRef;delete m.HRefScreenTip}if(m.MergeAcross||m.MergeDown){X=E+(parseInt(m.MergeAcross,10)|0);G=k+(parseInt(m.MergeDown,10)|0);y.push({s:{c:E,r:k},e:{c:X,r:G}})}if(!t.sheetStubs){if(m.MergeAcross){E=X+1}else{++E}}else{if(m.MergeAcross||m.MergeDown){for(var Y=E;Y<=X;++Y){for(var $=k;$<=G;++$){if(Y>E||$>k){if(t.dense){if(!u[$]){u[$]=[]}u[$][Y]={t:"z"}}else{u[st(Y)+tt($)]={t:"z"}}}}}E=X+1}else{++E}}}else{m=Rp(s[0]);if(m.Index){E=+m.Index-1}if(E<S.s.c){S.s.c=E}if(E>S.e.c){S.e.c=E}if(s[0].slice(-2)==="/>"){++E}N=[]}break;case"Row":if(s[1]==="/"||s[0].slice(-2)==="/>"){if(k<S.s.r){S.s.r=k}if(k>S.e.r){S.e.r=k}if(s[0].slice(-2)==="/>"){b=Ip(s[0]);if(b.Index){k=+b.Index-1}}E=0;++k}else{b=Ip(s[0]);if(b.Index){k=+b.Index-1}z={};if(b.AutoFitHeight=="0"||b.Height){z.hpx=parseInt(b.Height,10);z.hpt=co(z.hpx);V[k]=z}if(b.Hidden=="1"){z.hidden=true;V[k]=z}}break;case"Worksheet":if(s[1]==="/"){if((o=f.pop())[0]!==s[3]){throw new Error("Bad state: "+o.join("|"))
}h.push(p);if(S.s.r<=S.e.r&&S.s.c<=S.e.c){u["!ref"]=dt(S);if(t.sheetRows&&t.sheetRows<=S.e.r){u["!fullref"]=u["!ref"];S.e.r=t.sheetRows-1;u["!ref"]=dt(S)}}if(y.length){u["!merges"]=y}if(M.length>0){u["!cols"]=M}if(V.length>0){u["!rows"]=V}l[p]=u}else{S={s:{r:2000000,c:2000000},e:{r:0,c:0}};k=E=0;f.push([s[3],false]);o=Ip(s[0]);p=De(o.Name);u=t.dense?[]:{};y=[];W=[];V=[];K={name:p,Hidden:0};j.Sheets.push(K)}break;case"Table":if(s[1]==="/"){if((o=f.pop())[0]!==s[3]){throw new Error("Bad state: "+o.join("|"))}}else{if(s[0].slice(-2)=="/>"){break}else{g=Ip(s[0]);f.push([s[3],false]);M=[];H=false}}break;case"Style":if(s[1]==="/"){Pp(A,_,t)}else{_=Ip(s[0])}break;case"NumberFormat":_.nf=De(Ip(s[0]).Format||"General");if(F[_.nf]){_.nf=F[_.nf]}for(var Z=0;Z!=392;++Z){if(D._table[Z]==_.nf){break}}if(Z==392){for(Z=57;Z!=392;++Z){if(D._table[Z]==null){D.load(_.nf,Z);break}}}break;case"Column":if(f[f.length-1][0]!=="Table"){break}U=Ip(s[0]);if(U.Hidden){U.hidden=true;delete U.Hidden}if(U.Width){U.wpx=parseInt(U.Width,10)}if(!H&&U.wpx>10){H=true;ro=Jf;for(var Q=0;Q<M.length;++Q){if(M[Q]){fo(M[Q])}}}if(H){fo(U)}M[U.Index-1||M.length]=U;for(var J=0;J<+U.Span;++J){M[M.length]=fe(U)}break;case"NamedRange":if(!j.Names){j.Names=[]}var q=ye(s[0]);var ee={Name:q.Name,Ref:Xl(q.RefersTo.slice(1),{r:0,c:0})};if(j.Sheets.length>0){ee.Sheet=j.Sheets.length-1}j.Names.push(ee);break;case"NamedCell":break;case"B":break;case"I":break;case"U":break;case"S":break;case"Sub":break;case"Sup":break;case"Span":break;case"Border":break;case"Alignment":break;case"Borders":break;case"Font":if(s[0].slice(-2)==="/>"){break}else{if(s[1]==="/"){B+=a.slice(T,s.index)}else{T=s.index+s[0].length}}break;case"Interior":if(!t.cellStyles){break}_.Interior=Ip(s[0]);break;case"Protection":break;case"Author":case"Title":case"Description":case"Created":case"Keywords":case"Subject":case"Category":case"Company":case"LastAuthor":case"LastSaved":case"LastPrinted":case"Version":case"Revision":case"TotalTime":case"HyperlinkBase":case"Manager":case"ContentStatus":case"Identifier":case"Language":case"AppName":if(s[0].slice(-2)==="/>"){break
}else{if(s[1]==="/"){ln(x,s[3],a.slice(R,s.index))}else{R=s.index+s[0].length}}break;case"Paragraphs":break;case"Styles":case"Workbook":if(s[1]==="/"){if((o=f.pop())[0]!==s[3]){throw new Error("Bad state: "+o.join("|"))}}else{f.push([s[3],false])}break;case"Comment":if(s[1]==="/"){if((o=f.pop())[0]!==s[3]){throw new Error("Bad state: "+o.join("|"))}Lp(L);N.push(L)}else{f.push([s[3],false]);o=Ip(s[0]);L={a:o.Author}}break;case"AutoFilter":if(s[1]==="/"){if((o=f.pop())[0]!==s[3]){throw new Error("Bad state: "+o.join("|"))}}else{if(s[0].charAt(s[0].length-2)!=="/"){var re=Ip(s[0]);u["!autofilter"]={ref:Xl(re.Range).replace(/\$/g,"")};f.push([s[3],true])}}break;case"Name":break;case"ComponentOptions":case"DocumentProperties":case"CustomDocumentProperties":case"OfficeDocumentSettings":case"PivotTable":case"PivotCache":case"Names":case"MapInfo":case"PageBreaks":case"QueryTable":case"DataValidation":case"Sorting":case"Schema":case"data":case"ConditionalFormatting":case"SmartTagType":case"SmartTags":case"ExcelWorkbook":case"WorkbookOptions":case"WorksheetOptions":if(s[1]==="/"){if((o=f.pop())[0]!==s[3]){throw new Error("Bad state: "+o.join("|"))}}else{if(s[0].charAt(s[0].length-2)!=="/"){f.push([s[3],true])}}break;default:if(f.length==0&&s[3]=="document"){return Uv(a,t)}if(f.length==0&&s[3]=="UOF"){return Uv(a,t)}var te=true;switch(f[f.length-1][0]){case"OfficeDocumentSettings":switch(s[3]){case"AllowPNG":break;case"RemovePersonalInformation":break;case"DownloadComponents":break;case"LocationOfComponents":break;case"Colors":break;case"Color":break;case"Index":break;case"RGB":break;case"PixelsPerInch":break;case"TargetScreenSize":break;case"ReadOnlyRecommended":break;default:te=false}break;case"ComponentOptions":switch(s[3]){case"Toolbar":break;case"HideOfficeLogo":break;case"SpreadsheetAutoFit":break;case"Label":break;case"Caption":break;case"MaxHeight":break;case"MaxWidth":break;case"NextSheetNumber":break;default:te=false}break;case"ExcelWorkbook":switch(s[3]){case"Date1904":j.WBProps.date1904=true;
break;case"WindowHeight":break;case"WindowWidth":break;case"WindowTopX":break;case"WindowTopY":break;case"TabRatio":break;case"ProtectStructure":break;case"ProtectWindows":break;case"ActiveSheet":break;case"DisplayInkNotes":break;case"FirstVisibleSheet":break;case"SupBook":break;case"SheetName":break;case"SheetIndex":break;case"SheetIndexFirst":break;case"SheetIndexLast":break;case"Dll":break;case"AcceptLabelsInFormulas":break;case"DoNotSaveLinkValues":break;case"Iteration":break;case"MaxIterations":break;case"MaxChange":break;case"Path":break;case"Xct":break;case"Count":break;case"SelectedSheets":break;case"Calculation":break;case"Uncalced":break;case"StartupPrompt":break;case"Crn":break;case"ExternName":break;case"Formula":break;case"ColFirst":break;case"ColLast":break;case"WantAdvise":break;case"Boolean":break;case"Error":break;case"Text":break;case"OLE":break;case"NoAutoRecover":break;case"PublishObjects":break;case"DoNotCalculateBeforeSave":break;case"Number":break;case"RefModeR1C1":break;case"EmbedSaveSmartTags":break;default:te=false}break;case"WorkbookOptions":switch(s[3]){case"OWCVersion":break;case"Height":break;case"Width":break;default:te=false}break;case"WorksheetOptions":switch(s[3]){case"Visible":if(s[0].slice(-2)==="/>"){}else{if(s[1]==="/"){switch(a.slice(R,s.index)){case"SheetHidden":K.Hidden=1;break;case"SheetVeryHidden":K.Hidden=2;break}}else{R=s.index+s[0].length}}break;case"Header":if(!u["!margins"]){Zh(u["!margins"]={},"xlml")}u["!margins"].header=ye(s[0]).Margin;break;case"Footer":if(!u["!margins"]){Zh(u["!margins"]={},"xlml")}u["!margins"].footer=ye(s[0]).Margin;break;case"PageMargins":var ae=ye(s[0]);if(!u["!margins"]){Zh(u["!margins"]={},"xlml")}if(ae.Top){u["!margins"].top=ae.Top}if(ae.Left){u["!margins"].left=ae.Left}if(ae.Right){u["!margins"].right=ae.Right}if(ae.Bottom){u["!margins"].bottom=ae.Bottom}break;case"DisplayRightToLeft":if(!j.Views){j.Views=[]}if(!j.Views[0]){j.Views[0]={}}j.Views[0].RTL=true;break;case"Unsynced":break;case"Print":break;
case"Panes":break;case"Scale":break;case"Pane":break;case"Number":break;case"Layout":break;case"PageSetup":break;case"Selected":break;case"ProtectObjects":break;case"EnableSelection":break;case"ProtectScenarios":break;case"ValidPrinterInfo":break;case"HorizontalResolution":break;case"VerticalResolution":break;case"NumberofCopies":break;case"ActiveRow":break;case"ActiveCol":break;case"ActivePane":break;case"TopRowVisible":break;case"TopRowBottomPane":break;case"LeftColumnVisible":break;case"LeftColumnRightPane":break;case"FitToPage":break;case"RangeSelection":break;case"PaperSizeIndex":break;case"PageLayoutZoom":break;case"PageBreakZoom":break;case"FilterOn":break;case"DoNotDisplayGridlines":break;case"SplitHorizontal":break;case"SplitVertical":break;case"FreezePanes":break;case"FrozenNoSplit":break;case"FitWidth":break;case"FitHeight":break;case"CommentsLayout":break;case"Zoom":break;case"LeftToRight":break;case"Gridlines":break;case"AllowSort":break;case"AllowFilter":break;case"AllowInsertRows":break;case"AllowDeleteRows":break;case"AllowInsertCols":break;case"AllowDeleteCols":break;case"AllowInsertHyperlinks":break;case"AllowFormatCells":break;case"AllowSizeCols":break;case"AllowSizeRows":break;case"NoSummaryRowsBelowDetail":break;case"TabColorIndex":break;case"DoNotDisplayHeadings":break;case"ShowPageLayoutZoom":break;case"NoSummaryColumnsRightDetail":break;case"BlackAndWhite":break;case"DoNotDisplayZeros":break;case"DisplayPageBreak":break;case"RowColHeadings":break;case"DoNotDisplayOutline":break;case"NoOrientation":break;case"AllowUsePivotTables":break;case"ZeroHeight":break;case"ViewableRange":break;case"Selection":break;case"ProtectContents":break;default:te=false}break;case"PivotTable":case"PivotCache":switch(s[3]){case"ImmediateItemsOnDrop":break;case"ShowPageMultipleItemLabel":break;case"CompactRowIndent":break;case"Location":break;case"PivotField":break;case"Orientation":break;case"LayoutForm":break;case"LayoutSubtotalLocation":break;case"LayoutCompactRow":break;
case"Position":break;case"PivotItem":break;case"DataType":break;case"DataField":break;case"SourceName":break;case"ParentField":break;case"PTLineItems":break;case"PTLineItem":break;case"CountOfSameItems":break;case"Item":break;case"ItemType":break;case"PTSource":break;case"CacheIndex":break;case"ConsolidationReference":break;case"FileName":break;case"Reference":break;case"NoColumnGrand":break;case"NoRowGrand":break;case"BlankLineAfterItems":break;case"Hidden":break;case"Subtotal":break;case"BaseField":break;case"MapChildItems":break;case"Function":break;case"RefreshOnFileOpen":break;case"PrintSetTitles":break;case"MergeLabels":break;case"DefaultVersion":break;case"RefreshName":break;case"RefreshDate":break;case"RefreshDateCopy":break;case"VersionLastRefresh":break;case"VersionLastUpdate":break;case"VersionUpdateableMin":break;case"VersionRefreshableMin":break;case"Calculation":break;default:te=false}break;case"PageBreaks":switch(s[3]){case"ColBreaks":break;case"ColBreak":break;case"RowBreaks":break;case"RowBreak":break;case"ColStart":break;case"ColEnd":break;case"RowEnd":break;default:te=false}break;case"AutoFilter":switch(s[3]){case"AutoFilterColumn":break;case"AutoFilterCondition":break;case"AutoFilterAnd":break;case"AutoFilterOr":break;default:te=false}break;case"QueryTable":switch(s[3]){case"Id":break;case"AutoFormatFont":break;case"AutoFormatPattern":break;case"QuerySource":break;case"QueryType":break;case"EnableRedirections":break;case"RefreshedInXl9":break;case"URLString":break;case"HTMLTables":break;case"Connection":break;case"CommandText":break;case"RefreshInfo":break;case"NoTitles":break;case"NextId":break;case"ColumnInfo":break;case"OverwriteCells":break;case"DoNotPromptForFile":break;case"TextWizardSettings":break;case"Source":break;case"Number":break;case"Decimal":break;case"ThousandSeparator":break;case"TrailingMinusNumbers":break;case"FormatSettings":break;case"FieldType":break;case"Delimiters":break;case"Tab":break;case"Comma":break;case"AutoFormatName":break;
case"VersionLastEdit":break;case"VersionLastRefresh":break;default:te=false}break;case"Sorting":case"ConditionalFormatting":case"DataValidation":switch(s[3]){case"Range":break;case"Type":break;case"Min":break;case"Max":break;case"Sort":break;case"Descending":break;case"Order":break;case"CaseSensitive":break;case"Value":break;case"ErrorStyle":break;case"ErrorMessage":break;case"ErrorTitle":break;case"CellRangeList":break;case"InputMessage":break;case"InputTitle":break;case"ComboHide":break;case"InputHide":break;case"Condition":break;case"Qualifier":break;case"UseBlank":break;case"Value1":break;case"Value2":break;case"Format":break;default:te=false}break;case"MapInfo":case"Schema":case"data":switch(s[3]){case"Map":break;case"Entry":break;case"Range":break;case"XPath":break;case"Field":break;case"XSDType":break;case"FilterOn":break;case"Aggregate":break;case"ElementType":break;case"AttributeType":break;case"schema":case"element":case"complexType":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:te=false}break;case"SmartTags":break;default:te=false;break}if(te){break}if(!f[f.length-1][1]){throw"Unrecognized tag: "+s[3]+"|"+f.join("|")}if(f[f.length-1][0]==="CustomDocumentProperties"){if(s[0].slice(-2)==="/>"){break}else{if(s[1]==="/"){Op(I,s[3],P,a.slice(R,s.index))}else{P=s;R=s.index+s[0].length}}break}if(t.WTF){throw"Unrecognized tag: "+s[3]+"|"+f.join("|")}}}var ne={};if(!t.bookSheets&&!t.bookProps){ne.Sheets=l}ne.SheetNames=h;ne.Workbook=j;ne.SSF=D.get_table();ne.Props=x;ne.Custprops=I;return ne}function Wp(e,r){rg(r=r||{});switch(r.type||"base64"){case"base64":return Hp(m.decode(e),r);case"binary":case"buffer":case"file":return Hp(e,r);case"array":return Hp(B(e),r)}}function Vp(e,r){var t=[];if(e.Props){t.push(cn(e.Props,r))}if(e.Custprops){t.push(hn(e.Props,e.Custprops,r))}return t.join("")}function zp(){return""}function Xp(e,r){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];r.cellXfs.forEach(function(e,r){var a=[];
a.push(ar("NumberFormat",null,{"ss:Format":Pe(D._table[e.numFmtId])}));t.push(ar("Style",a.join(""),{"ss:ID":"s"+(21+r)}))});return ar("Styles",t.join(""))}function Gp(e){return ar("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+jl(e.Ref,{r:0,c:0})})}function jp(e){if(!((e||{}).Workbook||{}).Names){return""}var r=e.Workbook.Names;var t=[];for(var a=0;a<r.length;++a){var n=r[a];if(n.Sheet!=null){continue}if(n.Name.match(/^_xlfn\./)){continue}t.push(Gp(n))}return ar("Names",t.join(""))}function Kp(e,r,t,a){if(!e){return""}if(!((a||{}).Workbook||{}).Names){return""}var n=a.Workbook.Names;var i=[];for(var s=0;s<n.length;++s){var f=n[s];if(f.Sheet!=t){continue}if(f.Name.match(/^_xlfn\./)){continue}i.push(Gp(f))}return i.join("")}function Yp(e,r,t,a){if(!e){return""}var n=[];if(e["!margins"]){n.push("<PageSetup>");if(e["!margins"].header){n.push(ar("Header",null,{"x:Margin":e["!margins"].header}))}if(e["!margins"].footer){n.push(ar("Footer",null,{"x:Margin":e["!margins"].footer}))}n.push(ar("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"}));n.push("</PageSetup>")}if(a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[t]){if(a.Workbook.Sheets[t].Hidden){n.push(ar("Visible",a.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}))}else{for(var i=0;i<t;++i){if(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden){break}}if(i==t){n.push("<Selected/>")}}}if(((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL){n.push("<DisplayRightToLeft/>")}if(e["!protect"]){n.push(rr("ProtectContents","True"));if(e["!protect"].objects){n.push(rr("ProtectObjects","True"))}if(e["!protect"].scenarios){n.push(rr("ProtectScenarios","True"))}if(e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells){n.push(rr("EnableSelection","NoSelection"))}else{if(e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells){n.push(rr("EnableSelection","UnlockedCells"))
}}[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(r){if(e["!protect"][r[0]]){n.push("<"+r[1]+"/>")}})}if(n.length==0){return""}return ar("WorksheetOptions",n.join(""),{xmlns:fr.x})}function $p(e){return e.map(function(e){var r=We(e.t||"");var t=ar("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return ar("Comment",t,{"ss:Author":e.a})}).join("")}function Zp(e,r,t,a,n,i,s){if(!e||e.v==undefined&&e.f==undefined){return""}var f={};if(e.f){f["ss:Formula"]="="+Pe(jl(e.f,s))}if(e.F&&e.F.slice(0,r.length)==r){var o=ct(e.F.slice(r.length+1));f["ss:ArrayRange"]="RC:R"+(o.r==s.r?"":"["+(o.r-s.r)+"]")+"C"+(o.c==s.c?"":"["+(o.c-s.c)+"]")}if(e.l&&e.l.Target){f["ss:HRef"]=Pe(e.l.Target);if(e.l.Tooltip){f["x:HRefScreenTip"]=Pe(e.l.Tooltip)}}if(t["!merges"]){var l=t["!merges"];for(var c=0;c!=l.length;++c){if(l[c].s.c!=s.c||l[c].s.r!=s.r){continue}if(l[c].e.c>l[c].s.c){f["ss:MergeAcross"]=l[c].e.c-l[c].s.c}if(l[c].e.r>l[c].s.r){f["ss:MergeDown"]=l[c].e.r-l[c].s.r}}}var h="",u="";switch(e.t){case"z":return"";case"n":h="Number";u=String(e.v);break;case"b":h="Boolean";u=e.v?"1":"0";break;case"e":h="Error";u=jt[e.v];break;case"d":h="DateTime";u=new Date(e.v).toISOString();if(e.z==null){e.z=e.z||D._table[14]}break;case"s":h="String";u=Ue(e.v||"");break}var d=Qh(a.cellXfs,e,a);f["ss:StyleID"]="s"+(21+d);f["ss:Index"]=s.c+1;var p=e.v!=null?u:"";var v='<Data ss:Type="'+h+'">'+p+"</Data>";if((e.c||[]).length>0){v+=$p(e.c)}return ar("Cell",v,f)}function Qp(e,r){var t='<Row ss:Index="'+(e+1)+'"';if(r){if(r.hpt&&!r.hpx){r.hpx=ho(r.hpt)}if(r.hpx){t+=' ss:AutoFitHeight="0" ss:Height="'+r.hpx+'"'}if(r.hidden){t+=' ss:Hidden="1"'}}return t+">"}function Jp(e,r,t,a){if(!e["!ref"]){return""
}var n=pt(e["!ref"]);var i=e["!merges"]||[],s=0;var f=[];if(e["!cols"]){e["!cols"].forEach(function(e,r){fo(e);var t=!!e.width;var a=$h(r,e);var n={"ss:Index":r+1};if(t){n["ss:Width"]=to(a.width)}if(e.hidden){n["ss:Hidden"]="1"}f.push(ar("Column",null,n))})}var o=Array.isArray(e);for(var l=n.s.r;l<=n.e.r;++l){var c=[Qp(l,(e["!rows"]||[])[l])];for(var h=n.s.c;h<=n.e.c;++h){var u=false;for(s=0;s!=i.length;++s){if(i[s].s.c>h){continue}if(i[s].s.r>l){continue}if(i[s].e.c<h){continue}if(i[s].e.r<l){continue}if(i[s].s.c!=h||i[s].s.r!=l){u=true}break}if(u){continue}var d={r:l,c:h};var p=ht(d),v=o?(e[l]||[])[h]:e[p];c.push(Zp(v,p,e,r,t,a,d))}c.push("</Row>");if(c.length>2){f.push(c.join(""))}}return f.join("")}function qp(e,r,t){var a=[];var n=t.SheetNames[e];var i=t.Sheets[n];var s=i?Kp(i,r,e,t):"";if(s.length>0){a.push("<Names>"+s+"</Names>")}s=i?Jp(i,r,e,t):"";if(s.length>0){a.push("<Table>"+s+"</Table>")}a.push(Yp(i,r,e,t));return a.join("")}function ev(e,r){if(!r){r={}}if(!e.SSF){e.SSF=D.get_table()}if(e.SSF){O(D);D.load_table(e.SSF);r.revssf=Z(e.SSF);r.revssf[e.SSF[65535]]=0;r.ssf=e.SSF;r.cellXfs=[];Qh(r.cellXfs,{},{revssf:{General:0}})}var t=[];t.push(Vp(e,r));t.push(zp(e,r));t.push("");t.push("");for(var a=0;a<e.SheetNames.length;++a){t.push(ar("Worksheet",qp(a,r,e),{"ss:Name":Pe(e.SheetNames[a])}))}t[2]=Xp(e,r);t[3]=jp(e,r);return Se+ar("Workbook",t.join(""),{xmlns:fr.ss,"xmlns:o":fr.o,"xmlns:x":fr.x,"xmlns:ss":fr.ss,"xmlns:dt":fr.dt,"xmlns:html":fr.html})}function rv(e){var r={};var t=e.content;t.l=28;r.AnsiUserType=t._R(0,"lpstr-ansi");r.AnsiClipboardFormat=qt(t);if(t.length-t.l<=4){return r}var a=t._R(4);if(a==0||a>40){return r}t.l-=4;r.Reserved1=t._R(0,"lpstr-ansi");if(t.length-t.l<=4){return r}a=t._R(4);if(a!==1907505652){return r}r.UnicodeClipboardFormat=ea(t);a=t._R(4);if(a==0||a>40){return r}t.l-=4;r.Reserved2=t._R(0,"lpwstr")}function tv(e,r,t,a){var n=t;var i=[];var s=r.slice(r.l,r.l+n);if(a&&a.enc&&a.enc.insitu){switch(e.n){case"BOF":case"FilePass":case"FileLock":case"InterfaceHdr":case"RRDInfo":case"RRDHead":case"UsrExcl":break;
default:if(s.length===0){break}a.enc.insitu(s)}}i.push(s);r.l+=n;var f=dv[Dr(r,r.l)];var o=0;while(f!=null&&f.n.slice(0,8)==="Continue"){n=Dr(r,r.l+2);o=r.l+4;if(f.n=="ContinueFrt"){o+=4}else{if(f.n.slice(0,11)=="ContinueFrt"){o+=12}}i.push(r.slice(o,r.l+4+n));r.l+=4+n;f=dv[Dr(r,r.l)]}var l=x(i);zr(l,0);var c=0;l.lens=[];for(var h=0;h<i.length;++h){l.lens.push(c);c+=i[h].length}return e.f(l,l.length,a)}function av(e,r,t){if(e.t==="z"){return}if(!e.XF){return}var a=0;try{a=e.z||e.XF.numFmtId||0;if(r.cellNF){e.z=D._table[a]}}catch(n){if(r.WTF){throw n}}if(!r||r.cellText!==false){try{if(e.t==="e"){e.w=e.w||jt[e.v]}else{if(a===0||a=="General"){if(e.t==="n"){if((e.v|0)===e.v){e.w=D._general_int(e.v)}else{e.w=D._general_num(e.v)}}else{e.w=D._general(e.v)}}else{e.w=D.format(a,e.v,{date1904:!!t})}}}catch(n){if(r.WTF){throw n}}}if(r.cellDates&&a&&e.t=="n"&&D.is_date(D._table[a]||String(a))){var i=D.parse_date_code(e.v);if(i){e.t="d";e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u)}}}function nv(e,r,t){return{v:e,ixfe:r,t:t}}function iv(e,r){var t={opts:{}};var a={};if(v!=null&&r.dense==null){r.dense=v}var n=r.dense?[]:{};var i={};var s={};var f=null;var l=[];var c="";var h={};var u,d="",p,g,m,b;var w={};var C=[];var E;var k;var S=true;var A=[];var _=[];var B={Sheets:[],WBProps:{date1904:false},Views:[{}]},T={};var y=function be(e){if(e<8){return ka[e]}if(e<64){return _[e-8]||ka[e]}return ka[e]};var x=function we(e,r,t){var a=r.XF.data;if(!a||!a.patternType||!t||!t.cellStyles){return}r.s={};r.s.patternType=a.patternType;var n;if(n=Yf(y(a.icvFore))){r.s.fgColor={rgb:n}}if(n=Yf(y(a.icvBack))){r.s.bgColor={rgb:n}}};var I=function Ce(e,r,t){if(z>1){return}if(t.sheetRows&&e.r>=t.sheetRows){S=false}if(!S){return}if(t.cellStyles&&r.XF&&r.XF.data){x(e,r,t)}delete r.ixfe;delete r.XF;u=e;d=ht(e);if(!s||!s.s||!s.e){s={s:{r:0,c:0},e:{r:0,c:0}}}if(e.r<s.s.r){s.s.r=e.r}if(e.c<s.s.c){s.s.c=e.c}if(e.r+1>s.e.r){s.e.r=e.r+1}if(e.c+1>s.e.c){s.e.c=e.c+1}if(t.cellFormula&&r.f){for(var a=0;a<C.length;++a){if(C[a][0].s.c>e.c||C[a][0].s.r>e.r){continue
}if(C[a][0].e.c<e.c||C[a][0].e.r<e.r){continue}r.F=dt(C[a][0]);if(C[a][0].s.c!=e.c||C[a][0].s.r!=e.r){delete r.f}if(r.f){r.f=""+_h(C[a][1],s,e,W,R)}break}}if(t.dense){if(!n[e.r]){n[e.r]=[]}n[e.r][e.c]=r}else{n[d]=r}};var R={enc:false,sbcch:0,snames:[],sharedf:w,arrayf:C,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!r&&!!r.cellStyles,WTF:!!r&&!!r.wtf};if(r.password){R.password=r.password}var O;var F=[];var P=[];var N=[],L=[];var M=0,U=0;var H=false;var W=[];W.SheetNames=R.snames;W.sharedf=R.sharedf;W.arrayf=R.arrayf;W.names=[];W.XTI=[];var V="";var z=0;var X=0,G=[];var K=[];var Y;R.codepage=1200;o(1200);var $=false;while(e.l<e.length-1){var Z=e.l;var Q=e._R(2);if(Q===0&&V==="EOF"){break}var J=e.l===e.length?0:e._R(2);var q=dv[Q];if(q&&q.f){if(r.bookSheets){if(V==="BoundSheet8"&&q.n!=="BoundSheet8"){break}}V=q.n;if(q.r===2||q.r==12){var ee=e._R(2);J-=2;if(!R.enc&&ee!==Q&&((ee&255)<<8|ee>>8)!==Q){throw new Error("rt mismatch: "+ee+"!="+Q)}if(q.r==12){e.l+=10;J-=10}}var re;if(q.n==="EOF"){re=q.f(e,J,R)}else{re=tv(q,e,J,R)}var te=q.n;if(z==0&&te!="BOF"){continue}switch(te){case"Date1904":t.opts.Date1904=B.WBProps.date1904=re;break;case"WriteProtect":t.opts.WriteProtect=true;break;case"FilePass":if(!R.enc){e.l=0}R.enc=re;if(!r.password){throw new Error("File is password-protected")}if(re.valid==null){throw new Error("Encryption scheme unsupported")}if(!re.valid){throw new Error("Password is incorrect")}break;case"WriteAccess":R.lastuser=re;break;case"FileSharing":break;case"CodePage":switch(re){case 21010:re=1200;break;case 32768:re=10000;break;case 32769:re=1252;break}o(R.codepage=re);$=true;break;case"RRTabId":R.rrtabid=re;break;case"WinProtect":R.winlocked=re;break;case"Template":break;case"BookBool":break;case"UsesELFs":break;case"MTRSettings":break;case"RefreshAll":case"CalcCount":case"CalcDelta":case"CalcIter":case"CalcMode":case"CalcPrecision":case"CalcSaveRecalc":t.opts[te]=re;break;case"CalcRefMode":R.CalcRefMode=re;break;case"Uncalced":break;case"ForceFullCalculation":t.opts.FullCalc=re;
break;case"WsBool":if(re.fDialog){n["!type"]="dialog"}break;case"XF":A.push(re);break;case"ExtSST":break;case"BookExt":break;case"RichTextStream":break;case"BkHim":break;case"SupBook":W.push([re]);W[W.length-1].XTI=[];break;case"ExternName":W[W.length-1].push(re);break;case"Index":break;case"Lbl":Y={Name:re.Name,Ref:_h(re.rgce,s,null,W,R)};if(re.itab>0){Y.Sheet=re.itab-1}W.names.push(Y);if(!W[0]){W[0]=[];W[0].XTI=[]}W[W.length-1].push(re);if(re.Name=="_xlnm._FilterDatabase"&&re.itab>0){if(re.rgce&&re.rgce[0]&&re.rgce[0][0]&&re.rgce[0][0][0]=="PtgArea3d"){K[re.itab-1]={ref:dt(re.rgce[0][0][1][2])}}}break;case"ExternCount":R.ExternCount=re;break;case"ExternSheet":if(W.length==0){W[0]=[];W[0].XTI=[]}W[W.length-1].XTI=W[W.length-1].XTI.concat(re);W.XTI=W.XTI.concat(re);break;case"NameCmt":if(R.biff<8){break}if(Y!=null){Y.Comment=re[1]}break;case"Protect":n["!protect"]=re;break;case"Password":if(re!==0&&R.WTF){console.error("Password verifier: "+re)}break;case"Prot4Rev":case"Prot4RevPass":break;case"BoundSheet8":i[re.pos]=re;R.snames.push(re.name);break;case"EOF":if(--z){break}if(s.e){if(s.e.r>0&&s.e.c>0){s.e.r--;s.e.c--;n["!ref"]=dt(s);if(r.sheetRows&&r.sheetRows<=s.e.r){var ae=s.e.r;s.e.r=r.sheetRows-1;n["!fullref"]=n["!ref"];n["!ref"]=dt(s);s.e.r=ae}s.e.r++;s.e.c++}if(F.length>0){n["!merges"]=F}if(P.length>0){n["!objects"]=P}if(N.length>0){n["!cols"]=N}if(L.length>0){n["!rows"]=L}B.Sheets.push(T)}if(c===""){h=n}else{a[c]=n}n=r.dense?[]:{};break;case"BOF":if(R.biff===8){R.biff={9:2,521:3,1033:4}[Q]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[re.BIFFVer]||8}if(R.biff==8&&re.BIFFVer==0&&re.dt==16){R.biff=2}if(z++){break}S=true;n=r.dense?[]:{};if(R.biff<8&&!$){$=true;o(R.codepage=r.codepage||1252)}if(R.biff<5){if(c===""){c="Sheet1"}s={s:{r:0,c:0},e:{r:0,c:0}};var ne={pos:e.l-J,name:c};i[ne.pos]=ne;R.snames.push(c)}else{c=(i[Z]||{name:""}).name}if(re.dt==32){n["!type"]="chart"}if(re.dt==64){n["!type"]="macro"}F=[];P=[];R.arrayf=C=[];N=[];L=[];M=U=0;H=false;T={Hidden:(i[Z]||{hs:0}).hs,name:c};
break;case"Number":case"BIFF2NUM":case"BIFF2INT":if(n["!type"]=="chart"){if(r.dense?(n[re.r]||[])[re.c]:n[ht({c:re.c,r:re.r})]){++re.c}}E={ixfe:re.ixfe,XF:A[re.ixfe]||{},v:re.val,t:"n"};if(X>0){E.z=G[E.ixfe>>8&31]}av(E,r,t.opts.Date1904);I({c:re.c,r:re.r},E,r);break;case"BoolErr":E={ixfe:re.ixfe,XF:A[re.ixfe],v:re.val,t:re.t};if(X>0){E.z=G[E.ixfe>>8&31]}av(E,r,t.opts.Date1904);I({c:re.c,r:re.r},E,r);break;case"RK":E={ixfe:re.ixfe,XF:A[re.ixfe],v:re.rknum,t:"n"};if(X>0){E.z=G[E.ixfe>>8&31]}av(E,r,t.opts.Date1904);I({c:re.c,r:re.r},E,r);break;case"MulRk":for(var ie=re.c;ie<=re.C;++ie){var se=re.rkrec[ie-re.c][0];E={ixfe:se,XF:A[se],v:re.rkrec[ie-re.c][1],t:"n"};if(X>0){E.z=G[E.ixfe>>8&31]}av(E,r,t.opts.Date1904);I({c:ie,r:re.r},E,r)}break;case"Formula":if(re.val=="String"){f=re;break}E=nv(re.val,re.cell.ixfe,re.tt);E.XF=A[E.ixfe];if(r.cellFormula){var fe=re.formula;if(fe&&fe[0]&&fe[0][0]&&fe[0][0][0]=="PtgExp"){var oe=fe[0][0][1][0],le=fe[0][0][1][1];var ce=ht({r:oe,c:le});if(w[ce]){E.f=""+_h(re.formula,s,re.cell,W,R)}else{E.F=((r.dense?(n[oe]||[])[le]:n[ce])||{}).F}}else{E.f=""+_h(re.formula,s,re.cell,W,R)}}if(X>0){E.z=G[E.ixfe>>8&31]}av(E,r,t.opts.Date1904);I(re.cell,E,r);f=re;break;case"String":if(f){f.val=re;E=nv(re,f.cell.ixfe,"s");E.XF=A[E.ixfe];if(r.cellFormula){E.f=""+_h(f.formula,s,f.cell,W,R)}if(X>0){E.z=G[E.ixfe>>8&31]}av(E,r,t.opts.Date1904);I(f.cell,E,r);f=null}else{throw new Error("String record expects Formula")}break;case"Array":C.push(re);var he=ht(re[0].s);p=r.dense?(n[re[0].s.r]||[])[re[0].s.c]:n[he];if(r.cellFormula&&p){if(!f){break}if(!he||!p){break}p.f=""+_h(re[1],s,re[0],W,R);p.F=dt(re[0])}break;case"ShrFmla":if(!S){break}if(!r.cellFormula){break}if(d){if(!f){break}w[ht(f.cell)]=re[0];p=r.dense?(n[f.cell.r]||[])[f.cell.c]:n[ht(f.cell)];(p||{}).f=""+_h(re[0],s,u,W,R)}break;case"LabelSst":E=nv(l[re.isst].t,re.ixfe,"s");E.XF=A[E.ixfe];if(X>0){E.z=G[E.ixfe>>8&31]}av(E,r,t.opts.Date1904);I({c:re.c,r:re.r},E,r);break;case"Blank":if(r.sheetStubs){E={ixfe:re.ixfe,XF:A[re.ixfe],t:"z"};
if(X>0){E.z=G[E.ixfe>>8&31]}av(E,r,t.opts.Date1904);I({c:re.c,r:re.r},E,r)}break;case"MulBlank":if(r.sheetStubs){for(var ue=re.c;ue<=re.C;++ue){var de=re.ixfe[ue-re.c];E={ixfe:de,XF:A[de],t:"z"};if(X>0){E.z=G[E.ixfe>>8&31]}av(E,r,t.opts.Date1904);I({c:ue,r:re.r},E,r)}}break;case"RString":case"Label":case"BIFF2STR":E=nv(re.val,re.ixfe,"s");E.XF=A[E.ixfe];if(X>0){E.z=G[E.ixfe>>8&31]}av(E,r,t.opts.Date1904);I({c:re.c,r:re.r},E,r);break;case"Dimensions":if(z===1){s=re}break;case"SST":l=re;break;case"Format":if(R.biff==4){G[X++]=re[1];for(var pe=0;pe<X+163;++pe){if(D._table[pe]==re[1]){break}}if(pe>=163){D.load(re[1],X+163)}}else{D.load(re[1],re[0])}break;case"BIFF2FORMAT":G[X++]=re;for(var ve=0;ve<X+163;++ve){if(D._table[ve]==re){break}}if(ve>=163){D.load(re,X+163)}break;case"MergeCells":F=F.concat(re);break;case"Obj":P[re.cmo[0]]=R.lastobj=re;break;case"TxO":R.lastobj.TxO=re;break;case"ImData":R.lastobj.ImData=re;break;case"HLink":for(b=re[0].s.r;b<=re[0].e.r;++b){for(m=re[0].s.c;m<=re[0].e.c;++m){p=r.dense?(n[b]||[])[m]:n[ht({c:m,r:b})];if(p){p.l=re[1]}}}break;case"HLinkTooltip":for(b=re[0].s.r;b<=re[0].e.r;++b){for(m=re[0].s.c;m<=re[0].e.c;++m){p=r.dense?(n[b]||[])[m]:n[ht({c:m,r:b})];if(p&&p.l){p.l.Tooltip=re[1]}}}break;case"Note":if(R.biff<=5&&R.biff>=2){break}p=r.dense?(n[re[0].r]||[])[re[0].c]:n[ht(re[0])];var ge=P[re[2]];if(!p){break}if(!p.c){p.c=[]}g={a:re[1],t:ge.TxO.t};p.c.push(g);break;default:switch(q.n){case"ClrtClient":break;case"XFExt":gl(A[re.ixfe],re.ext);break;case"DefColWidth":M=re;break;case"DefaultRowHeight":U=re[1];break;case"ColInfo":if(!R.cellStyles){break}while(re.e>=re.s){N[re.e--]={width:re.w/256};if(!H){H=true;so(re.w/256)}fo(N[re.e+1])}break;case"Row":var me={};if(re.level!=null){L[re.r]=me;me.level=re.level}if(re.hidden){L[re.r]=me;me.hidden=true}if(re.hpt){L[re.r]=me;me.hpt=re.hpt;me.hpx=ho(re.hpt)}break;case"LeftMargin":case"RightMargin":case"TopMargin":case"BottomMargin":if(!n["!margins"]){Zh(n["!margins"]={})}n["!margins"][te.slice(0,-6).toLowerCase()]=re;
break;case"Setup":if(!n["!margins"]){Zh(n["!margins"]={})}n["!margins"].header=re.header;n["!margins"].footer=re.footer;break;case"Window2":if(re.RTL){B.Views[0].RTL=true}break;case"Header":break;case"Footer":break;case"HCenter":break;case"VCenter":break;case"Pls":break;case"GCW":break;case"LHRecord":break;case"DBCell":break;case"EntExU2":break;case"SxView":break;case"Sxvd":break;case"SXVI":break;case"SXVDEx":break;case"SxIvd":break;case"SXString":break;case"Sync":break;case"Addin":break;case"SXDI":break;case"SXLI":break;case"SXEx":break;case"QsiSXTag":break;case"Selection":break;case"Feat":break;case"FeatHdr":case"FeatHdr11":break;case"Feature11":case"Feature12":case"List12":break;case"Country":k=re;break;case"RecalcId":break;case"DxGCol":break;case"Fbi":case"Fbi2":case"GelFrame":break;case"Font":break;case"XFCRC":break;case"Style":break;case"StyleExt":break;case"Palette":_=re;break;case"Theme":O=re;break;case"ScenarioProtect":break;case"ObjProtect":break;case"CondFmt12":break;case"Table":break;case"TableStyles":break;case"TableStyle":break;case"TableStyleElement":break;case"SXStreamID":break;case"SXVS":break;case"DConRef":break;case"SXAddl":break;case"DConBin":break;case"DConName":break;case"SXPI":break;case"SxFormat":break;case"SxSelect":break;case"SxRule":break;case"SxFilt":break;case"SxItm":break;case"SxDXF":break;case"ScenMan":break;case"DCon":break;case"CellWatch":break;case"PrintRowCol":break;case"PrintGrid":break;case"PrintSize":break;case"XCT":break;case"CRN":break;case"Scl":break;case"SheetExt":break;case"SheetExtOptional":break;case"ObNoMacros":break;case"ObProj":break;case"CodeName":if(!c){B.WBProps.CodeName=re||"ThisWorkbook"}else{T.CodeName=re||T.name}break;case"GUIDTypeLib":break;case"WOpt":break;case"PhoneticInfo":break;case"OleObjectSize":break;case"DXF":case"DXFN":case"DXFN12":case"DXFN12List":case"DXFN12NoCB":break;case"Dv":case"DVal":break;case"BRAI":case"Series":case"SeriesText":break;case"DConn":break;case"DbOrParamQry":break;case"DBQueryExt":break;
case"OleDbConn":break;case"ExtString":break;case"IFmtRecord":break;case"CondFmt":case"CF":case"CF12":case"CFEx":break;case"Excel9File":break;case"Units":break;case"InterfaceHdr":case"Mms":case"InterfaceEnd":case"DSF":break;case"BuiltInFnGroupCount":break;case"Window1":case"HideObj":case"GridSet":case"Guts":case"UserBView":case"UserSViewBegin":case"UserSViewEnd":case"Pane":break;default:switch(q.n){case"Dat":case"Begin":case"End":case"StartBlock":case"EndBlock":case"Frame":case"Area":case"Axis":case"AxisLine":case"Tick":break;case"AxesUsed":case"CrtLayout12":case"CrtLayout12A":case"CrtLink":case"CrtLine":case"CrtMlFrt":case"CrtMlFrtContinue":break;case"LineFormat":case"AreaFormat":case"Chart":case"Chart3d":case"Chart3DBarShape":case"ChartFormat":case"ChartFrtInfo":break;case"PlotArea":case"PlotGrowth":break;case"SeriesList":case"SerParent":case"SerAuxTrend":break;case"DataFormat":case"SerToCrt":case"FontX":break;case"CatSerRange":case"AxcExt":case"SerFmt":break;case"ShtProps":break;case"DefaultText":case"Text":case"CatLab":break;case"DataLabExtContents":break;case"Legend":case"LegendException":break;case"Pie":case"Scatter":break;case"PieFormat":case"MarkerFormat":break;case"StartObject":case"EndObject":break;case"AlRuns":case"ObjectLink":break;case"SIIndex":break;case"AttachedLabel":case"YMult":break;case"Line":case"Bar":break;case"Surf":break;case"AxisParent":break;case"Pos":break;case"ValueRange":break;case"SXViewEx9":break;case"SXViewLink":break;case"PivotChartBits":break;case"SBaseRef":break;case"TextPropsStream":break;case"LnExt":break;case"MkrExt":break;case"CrtCoopt":break;case"Qsi":case"Qsif":case"Qsir":case"QsiSXTag":break;case"TxtQry":break;case"FilterMode":break;case"AutoFilter":case"AutoFilterInfo":break;case"AutoFilter12":break;case"DropDownObjIds":break;case"Sort":break;case"SortData":break;case"ShapePropsStream":break;case"MsoDrawing":case"MsoDrawingGroup":case"MsoDrawingSelection":break;case"WebPub":case"AutoWebPub":break;case"HeaderFooter":case"HFPicture":case"PLV":case"HorizontalPageBreaks":case"VerticalPageBreaks":break;
case"Backup":case"CompressPictures":case"Compat12":break;case"Continue":case"ContinueFrt12":break;case"FrtFontList":case"FrtWrapper":break;default:switch(q.n){case"TabIdConf":case"Radar":case"RadarArea":case"DropBar":case"Intl":case"CoordList":case"SerAuxErrBar":break;case"BIFF2FONTCLR":case"BIFF2FMTCNT":case"BIFF2FONTXTRA":break;case"BIFF2XF":case"BIFF3XF":case"BIFF4XF":break;case"BIFF4FMTCNT":case"BIFF2ROW":case"BIFF2WINDOW2":break;case"SCENARIO":case"DConBin":case"PicF":case"DataLabExt":case"Lel":case"BopPop":case"BopPopCustom":case"RealTimeData":case"Name":break;case"LHNGraph":case"FnGroupName":case"AddMenu":case"LPr":break;case"ListObj":case"ListField":break;case"RRSort":break;case"BigName":break;case"ToolbarHdr":case"ToolbarEnd":break;case"DDEObjName":break;case"FRTArchId$":break;default:if(r.WTF){throw"Unrecognized Record "+q.n}}}}}}else{e.l+=J}}t.SheetNames=j(i).sort(function(e,r){return Number(e)-Number(r)}).map(function(e){return i[e].name});if(!r.bookSheets){t.Sheets=a}if(t.Sheets){K.forEach(function(e,r){t.Sheets[t.SheetNames[r]]["!autofilter"]=e})}t.Preamble=h;t.Strings=l;t.SSF=D.get_table();if(R.enc){t.Encryption=R.enc}if(O){t.Themes=O}t.Metadata={};if(k!==undefined){t.Metadata.Country=k}if(W.names.length>0){B.Names=W.names}t.Workbook=B;return t}var sv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function fv(e,r,t){var a=W.find(e,"!DocumentSummaryInformation");if(a&&a.size>0){try{var n=On(a,pa,sv.DSI);for(var i in n){r[i]=n[i]}}catch(s){if(t.WTF){throw s}}}var f=W.find(e,"!SummaryInformation");if(f&&f.size>0){try{var o=On(f,va,sv.SI);for(var l in o){if(r[l]==null){r[l]=o[l]}}}catch(s){if(t.WTF){throw s}}}if(r.HeadingPairs&&r.TitlesOfParts){Ja(r.HeadingPairs,r.TitlesOfParts,r,t);delete r.HeadingPairs;delete r.TitlesOfParts}}function ov(e,r){var t=[],a=[],n=[];var i=0,s;if(e.Props){s=j(e.Props);for(i=0;i<s.length;++i){(ma.hasOwnProperty(s[i])?t:ba.hasOwnProperty(s[i])?a:n).push([s[i],e.Props[s[i]]])
}}if(e.Custprops){s=j(e.Custprops);for(i=0;i<s.length;++i){if(!(e.Props||{}).hasOwnProperty(s[i])){(ma.hasOwnProperty(s[i])?t:ba.hasOwnProperty(s[i])?a:n).push([s[i],e.Custprops[s[i]]])}}}var f=[];for(i=0;i<n.length;++i){if(In.indexOf(n[i][0])>-1){continue}if(n[i][1]==null){continue}f.push(n[i])}if(a.length){W.utils.cfb_add(r,"/SummaryInformation",Fn(a,sv.SI,ba,va))}if(t.length||f.length){W.utils.cfb_add(r,"/DocumentSummaryInformation",Fn(t,sv.DSI,ma,pa,f.length?f:null,sv.UDI))}}function lv(e,r){if(!r){r={}}rg(r);l();if(r.codepage){s(r.codepage)}var t,a;if(e.FullPaths){if(W.find(e,"/encryption")){throw new Error("File is password-protected")}t=W.find(e,"!CompObj");a=W.find(e,"/Workbook")||W.find(e,"/Book")}else{switch(r.type){case"base64":e=A(m.decode(e));break;case"binary":e=A(e);break;case"buffer":break;case"array":if(!Array.isArray(e)){e=Array.prototype.slice.call(e)}break}zr(e,0);a={content:e}}var n;var i;if(t){rv(t)}if(r.bookProps&&!r.bookSheets){n={}}else{var f=b?"buffer":"array";if(a&&a.content){n=iv(a.content,r)}else{if((i=W.find(e,"PerfectOffice_MAIN"))&&i.content){n=sf.to_workbook(i.content,(r.type=f,r))}else{if((i=W.find(e,"NativeContent_MAIN"))&&i.content){n=sf.to_workbook(i.content,(r.type=f,r))}else{throw new Error("Cannot find Workbook stream")}}}if(r.bookVBA&&e.FullPaths&&W.find(e,"/_VBA_PROJECT_CUR/VBA/dir")){n.vbaraw=Ll(e)}}var o={};if(e.FullPaths){fv(e,o,r)}n.Props=n.Custprops=o;if(r.bookFiles){n.cfb=e}return n}function cv(e,r){var t=r||{};var a=W.utils.cfb_new({root:"R"});var n="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":if(!t.bookType){t.bookType="xla"}case"biff8":n="/Workbook";t.biff=8;break;case"biff5":n="/Book";t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}W.utils.cfb_add(a,n,Rv(e,t));if(t.biff==8&&(e.Props||e.Custprops)){ov(e,a)}if(t.biff==8&&e.vbaraw){Ml(a,W.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"}))}return a}var hv={0:{n:"BrtRowHdr",f:xu},1:{n:"BrtCellBlank",f:Lu},2:{n:"BrtCellRk",f:ju},3:{n:"BrtCellError",f:Wu},4:{n:"BrtCellBool",f:Uu},5:{n:"BrtCellReal",f:Xu},6:{n:"BrtCellSt",f:Yu},7:{n:"BrtCellIsst",f:Vu},8:{n:"BrtFmlaString",f:qu},9:{n:"BrtFmlaNum",f:Ju},10:{n:"BrtFmlaBool",f:Zu},11:{n:"BrtFmlaError",f:Qu},16:{n:"BrtFRTArchID$",f:tp},19:{n:"BrtSSTItem",f:_t},20:{n:"BrtPCDIMissing"},21:{n:"BrtPCDINumber"},22:{n:"BrtPCDIBoolean"},23:{n:"BrtPCDIError"},24:{n:"BrtPCDIString"},25:{n:"BrtPCDIDatetime"},26:{n:"BrtPCDIIndex"},27:{n:"BrtPCDIAMissing"},28:{n:"BrtPCDIANumber"},29:{n:"BrtPCDIABoolean"},30:{n:"BrtPCDIAError"},31:{n:"BrtPCDIAString"},32:{n:"BrtPCDIADatetime"},33:{n:"BrtPCRRecord"},34:{n:"BrtPCRRecordDt"},35:{n:"BrtFRTBegin"},36:{n:"BrtFRTEnd"},37:{n:"BrtACBegin"},38:{n:"BrtACEnd"},39:{n:"BrtName",f:ap},40:{n:"BrtIndexRowBlock"},42:{n:"BrtIndexBlock"},43:{n:"BrtFont",f:yo},44:{n:"BrtFmt",f:Bo},45:{n:"BrtFill",f:Do},46:{n:"BrtBorder",f:Lo},47:{n:"BrtXF",f:Fo},48:{n:"BrtStyle"},49:{n:"BrtCellMeta"},50:{n:"BrtValueMeta"},51:{n:"BrtMdb"},52:{n:"BrtBeginFmd"},53:{n:"BrtEndFmd"},54:{n:"BrtBeginMdx"},55:{n:"BrtEndMdx"},56:{n:"BrtBeginMdxTuple"},57:{n:"BrtEndMdxTuple"},58:{n:"BrtMdxMbrIstr"},59:{n:"BrtStr"},60:{n:"BrtColInfo",f:Ls},62:{n:"BrtCellRString"},63:{n:"BrtCalcChainItem$",f:bl},64:{n:"BrtDVal"},65:{n:"BrtSxvcellNum"},66:{n:"BrtSxvcellStr"},67:{n:"BrtSxvcellBool"},68:{n:"BrtSxvcellErr"},69:{n:"BrtSxvcellDate"},70:{n:"BrtSxvcellNil"},128:{n:"BrtFileVersion"},129:{n:"BrtBeginSheet"},130:{n:"BrtEndSheet"},131:{n:"BrtBeginBook",f:Xr,p:0},132:{n:"BrtEndBook"},133:{n:"BrtBeginWsViews"},134:{n:"BrtEndWsViews"},135:{n:"BrtBeginBookViews"},136:{n:"BrtEndBookViews"},137:{n:"BrtBeginWsView",f:hd},138:{n:"BrtEndWsView"},139:{n:"BrtBeginCsViews"},140:{n:"BrtEndCsViews"},141:{n:"BrtBeginCsView"},142:{n:"BrtEndCsView"},143:{n:"BrtBeginBundleShs"},144:{n:"BrtEndBundleShs"},145:{n:"BrtBeginSheetData"},146:{n:"BrtEndSheetData"},147:{n:"BrtWsProp",f:Pu},148:{n:"BrtWsDim",f:Du,p:16},151:{n:"BrtPane"},152:{n:"BrtSel"},153:{n:"BrtWbProp",f:ep},154:{n:"BrtWbFactoid"},155:{n:"BrtFileRecover"},156:{n:"BrtBundleSh",f:Jd},157:{n:"BrtCalcProp"},158:{n:"BrtBookView"},159:{n:"BrtBeginSst",f:bf},160:{n:"BrtEndSst"},161:{n:"BrtBeginAFilter",f:Vt},162:{n:"BrtEndAFilter"},163:{n:"BrtBeginFilterColumn"},164:{n:"BrtEndFilterColumn"},165:{n:"BrtBeginFilters"},166:{n:"BrtEndFilters"},167:{n:"BrtFilter"},168:{n:"BrtColorFilter"},169:{n:"BrtIconFilter"},170:{n:"BrtTop10Filter"},171:{n:"BrtDynamicFilter"},172:{n:"BrtBeginCustomFilters"},173:{n:"BrtEndCustomFilters"},174:{n:"BrtCustomFilter"},175:{n:"BrtAFilterDateGroupItem"},176:{n:"BrtMergeCell",f:ed},177:{n:"BrtBeginMergeCells"},178:{n:"BrtEndMergeCells"},179:{n:"BrtBeginPivotCacheDef"},180:{n:"BrtEndPivotCacheDef"},181:{n:"BrtBeginPCDFields"},182:{n:"BrtEndPCDFields"},183:{n:"BrtBeginPCDField"},184:{n:"BrtEndPCDField"},185:{n:"BrtBeginPCDSource"},186:{n:"BrtEndPCDSource"},187:{n:"BrtBeginPCDSRange"},188:{n:"BrtEndPCDSRange"},189:{n:"BrtBeginPCDFAtbl"},190:{n:"BrtEndPCDFAtbl"},191:{n:"BrtBeginPCDIRun"},192:{n:"BrtEndPCDIRun"},193:{n:"BrtBeginPivotCacheRecords"},194:{n:"BrtEndPivotCacheRecords"},195:{n:"BrtBeginPCDHierarchies"},196:{n:"BrtEndPCDHierarchies"},197:{n:"BrtBeginPCDHierarchy"},198:{n:"BrtEndPCDHierarchy"},199:{n:"BrtBeginPCDHFieldsUsage"},200:{n:"BrtEndPCDHFieldsUsage"},201:{n:"BrtBeginExtConnection"},202:{n:"BrtEndExtConnection"},203:{n:"BrtBeginECDbProps"},204:{n:"BrtEndECDbProps"},205:{n:"BrtBeginECOlapProps"},206:{n:"BrtEndECOlapProps"},207:{n:"BrtBeginPCDSConsol"},208:{n:"BrtEndPCDSConsol"},209:{n:"BrtBeginPCDSCPages"},210:{n:"BrtEndPCDSCPages"},211:{n:"BrtBeginPCDSCPage"},212:{n:"BrtEndPCDSCPage"},213:{n:"BrtBeginPCDSCPItem"},214:{n:"BrtEndPCDSCPItem"},215:{n:"BrtBeginPCDSCSets"},216:{n:"BrtEndPCDSCSets"},217:{n:"BrtBeginPCDSCSet"},218:{n:"BrtEndPCDSCSet"},219:{n:"BrtBeginPCDFGroup"},220:{n:"BrtEndPCDFGroup"},221:{n:"BrtBeginPCDFGItems"},222:{n:"BrtEndPCDFGItems"},223:{n:"BrtBeginPCDFGRange"},224:{n:"BrtEndPCDFGRange"},225:{n:"BrtBeginPCDFGDiscrete"},226:{n:"BrtEndPCDFGDiscrete"},227:{n:"BrtBeginPCDSDTupleCache"},228:{n:"BrtEndPCDSDTupleCache"},229:{n:"BrtBeginPCDSDTCEntries"},230:{n:"BrtEndPCDSDTCEntries"},231:{n:"BrtBeginPCDSDTCEMembers"},232:{n:"BrtEndPCDSDTCEMembers"},233:{n:"BrtBeginPCDSDTCEMember"},234:{n:"BrtEndPCDSDTCEMember"},235:{n:"BrtBeginPCDSDTCQueries"},236:{n:"BrtEndPCDSDTCQueries"},237:{n:"BrtBeginPCDSDTCQuery"},238:{n:"BrtEndPCDSDTCQuery"},239:{n:"BrtBeginPCDSDTCSets"},240:{n:"BrtEndPCDSDTCSets"},241:{n:"BrtBeginPCDSDTCSet"},242:{n:"BrtEndPCDSDTCSet"},243:{n:"BrtBeginPCDCalcItems"},244:{n:"BrtEndPCDCalcItems"},245:{n:"BrtBeginPCDCalcItem"},246:{n:"BrtEndPCDCalcItem"},247:{n:"BrtBeginPRule"},248:{n:"BrtEndPRule"},249:{n:"BrtBeginPRFilters"},250:{n:"BrtEndPRFilters"},251:{n:"BrtBeginPRFilter"},252:{n:"BrtEndPRFilter"},253:{n:"BrtBeginPNames"},254:{n:"BrtEndPNames"},255:{n:"BrtBeginPName"},256:{n:"BrtEndPName"},257:{n:"BrtBeginPNPairs"},258:{n:"BrtEndPNPairs"},259:{n:"BrtBeginPNPair"},260:{n:"BrtEndPNPair"},261:{n:"BrtBeginECWebProps"},262:{n:"BrtEndECWebProps"},263:{n:"BrtBeginEcWpTables"},264:{n:"BrtEndECWPTables"},265:{n:"BrtBeginECParams"},266:{n:"BrtEndECParams"},267:{n:"BrtBeginECParam"},268:{n:"BrtEndECParam"},269:{n:"BrtBeginPCDKPIs"},270:{n:"BrtEndPCDKPIs"},271:{n:"BrtBeginPCDKPI"},272:{n:"BrtEndPCDKPI"},273:{n:"BrtBeginDims"},274:{n:"BrtEndDims"},275:{n:"BrtBeginDim"},276:{n:"BrtEndDim"},277:{n:"BrtIndexPartEnd"},278:{n:"BrtBeginStyleSheet"},279:{n:"BrtEndStyleSheet"},280:{n:"BrtBeginSXView"},281:{n:"BrtEndSXVI"},282:{n:"BrtBeginSXVI"},283:{n:"BrtBeginSXVIs"},284:{n:"BrtEndSXVIs"},285:{n:"BrtBeginSXVD"},286:{n:"BrtEndSXVD"},287:{n:"BrtBeginSXVDs"},288:{n:"BrtEndSXVDs"},289:{n:"BrtBeginSXPI"},290:{n:"BrtEndSXPI"},291:{n:"BrtBeginSXPIs"},292:{n:"BrtEndSXPIs"},293:{n:"BrtBeginSXDI"},294:{n:"BrtEndSXDI"},295:{n:"BrtBeginSXDIs"},296:{n:"BrtEndSXDIs"},297:{n:"BrtBeginSXLI"},298:{n:"BrtEndSXLI"},299:{n:"BrtBeginSXLIRws"},300:{n:"BrtEndSXLIRws"},301:{n:"BrtBeginSXLICols"},302:{n:"BrtEndSXLICols"},303:{n:"BrtBeginSXFormat"},304:{n:"BrtEndSXFormat"},305:{n:"BrtBeginSXFormats"},306:{n:"BrtEndSxFormats"},307:{n:"BrtBeginSxSelect"},308:{n:"BrtEndSxSelect"},309:{n:"BrtBeginISXVDRws"},310:{n:"BrtEndISXVDRws"},311:{n:"BrtBeginISXVDCols"},312:{n:"BrtEndISXVDCols"},313:{n:"BrtEndSXLocation"},314:{n:"BrtBeginSXLocation"},315:{n:"BrtEndSXView"},316:{n:"BrtBeginSXTHs"},317:{n:"BrtEndSXTHs"},318:{n:"BrtBeginSXTH"},319:{n:"BrtEndSXTH"},320:{n:"BrtBeginISXTHRws"},321:{n:"BrtEndISXTHRws"},322:{n:"BrtBeginISXTHCols"},323:{n:"BrtEndISXTHCols"},324:{n:"BrtBeginSXTDMPS"},325:{n:"BrtEndSXTDMPs"},326:{n:"BrtBeginSXTDMP"},327:{n:"BrtEndSXTDMP"},328:{n:"BrtBeginSXTHItems"},329:{n:"BrtEndSXTHItems"},330:{n:"BrtBeginSXTHItem"},331:{n:"BrtEndSXTHItem"},332:{n:"BrtBeginMetadata"},333:{n:"BrtEndMetadata"},334:{n:"BrtBeginEsmdtinfo"},335:{n:"BrtMdtinfo"},336:{n:"BrtEndEsmdtinfo"},337:{n:"BrtBeginEsmdb"},338:{n:"BrtEndEsmdb"},339:{n:"BrtBeginEsfmd"},340:{n:"BrtEndEsfmd"},341:{n:"BrtBeginSingleCells"},342:{n:"BrtEndSingleCells"},343:{n:"BrtBeginList"},344:{n:"BrtEndList"},345:{n:"BrtBeginListCols"},346:{n:"BrtEndListCols"},347:{n:"BrtBeginListCol"},348:{n:"BrtEndListCol"},349:{n:"BrtBeginListXmlCPr"},350:{n:"BrtEndListXmlCPr"},351:{n:"BrtListCCFmla"},352:{n:"BrtListTrFmla"},353:{n:"BrtBeginExternals"},354:{n:"BrtEndExternals"},355:{n:"BrtSupBookSrc",f:Nt},357:{n:"BrtSupSelf"},358:{n:"BrtSupSame"},359:{n:"BrtSupTabs"},360:{n:"BrtBeginSupBook"},361:{n:"BrtPlaceholderName"},362:{n:"BrtExternSheet",f:ps},363:{n:"BrtExternTableStart"},364:{n:"BrtExternTableEnd"},366:{n:"BrtExternRowHdr"},367:{n:"BrtExternCellBlank"},368:{n:"BrtExternCellReal"},369:{n:"BrtExternCellBool"},370:{n:"BrtExternCellError"},371:{n:"BrtExternCellString"},372:{n:"BrtBeginEsmdx"},373:{n:"BrtEndEsmdx"},374:{n:"BrtBeginMdxSet"},375:{n:"BrtEndMdxSet"},376:{n:"BrtBeginMdxMbrProp"},377:{n:"BrtEndMdxMbrProp"},378:{n:"BrtBeginMdxKPI"},379:{n:"BrtEndMdxKPI"},380:{n:"BrtBeginEsstr"},381:{n:"BrtEndEsstr"},382:{n:"BrtBeginPRFItem"},383:{n:"BrtEndPRFItem"},384:{n:"BrtBeginPivotCacheIDs"},385:{n:"BrtEndPivotCacheIDs"},386:{n:"BrtBeginPivotCacheID"},387:{n:"BrtEndPivotCacheID"},388:{n:"BrtBeginISXVIs"},389:{n:"BrtEndISXVIs"},390:{n:"BrtBeginColInfos"},391:{n:"BrtEndColInfos"},392:{n:"BrtBeginRwBrk"},393:{n:"BrtEndRwBrk"},394:{n:"BrtBeginColBrk"},395:{n:"BrtEndColBrk"},396:{n:"BrtBrk"},397:{n:"BrtUserBookView"},398:{n:"BrtInfo"},399:{n:"BrtCUsr"},400:{n:"BrtUsr"},401:{n:"BrtBeginUsers"},403:{n:"BrtEOF"},404:{n:"BrtUCR"},405:{n:"BrtRRInsDel"},406:{n:"BrtRREndInsDel"},407:{n:"BrtRRMove"},408:{n:"BrtRREndMove"},409:{n:"BrtRRChgCell"},410:{n:"BrtRREndChgCell"},411:{n:"BrtRRHeader"},412:{n:"BrtRRUserView"},413:{n:"BrtRRRenSheet"},414:{n:"BrtRRInsertSh"},415:{n:"BrtRRDefName"},416:{n:"BrtRRNote"},417:{n:"BrtRRConflict"},418:{n:"BrtRRTQSIF"},419:{n:"BrtRRFormat"},420:{n:"BrtRREndFormat"},421:{n:"BrtRRAutoFmt"},422:{n:"BrtBeginUserShViews"},423:{n:"BrtBeginUserShView"},424:{n:"BrtEndUserShView"},425:{n:"BrtEndUserShViews"},426:{n:"BrtArrFmla",f:id},427:{n:"BrtShrFmla",f:sd},428:{n:"BrtTable"},429:{n:"BrtBeginExtConnections"},430:{n:"BrtEndExtConnections"},431:{n:"BrtBeginPCDCalcMems"},432:{n:"BrtEndPCDCalcMems"},433:{n:"BrtBeginPCDCalcMem"},434:{n:"BrtEndPCDCalcMem"},435:{n:"BrtBeginPCDHGLevels"},436:{n:"BrtEndPCDHGLevels"},437:{n:"BrtBeginPCDHGLevel"},438:{n:"BrtEndPCDHGLevel"},439:{n:"BrtBeginPCDHGLGroups"},440:{n:"BrtEndPCDHGLGroups"},441:{n:"BrtBeginPCDHGLGroup"},442:{n:"BrtEndPCDHGLGroup"},443:{n:"BrtBeginPCDHGLGMembers"},444:{n:"BrtEndPCDHGLGMembers"},445:{n:"BrtBeginPCDHGLGMember"},446:{n:"BrtEndPCDHGLGMember"},447:{n:"BrtBeginQSI"},448:{n:"BrtEndQSI"},449:{n:"BrtBeginQSIR"},450:{n:"BrtEndQSIR"},451:{n:"BrtBeginDeletedNames"},452:{n:"BrtEndDeletedNames"},453:{n:"BrtBeginDeletedName"},454:{n:"BrtEndDeletedName"},455:{n:"BrtBeginQSIFs"},456:{n:"BrtEndQSIFs"},457:{n:"BrtBeginQSIF"},458:{n:"BrtEndQSIF"},459:{n:"BrtBeginAutoSortScope"},460:{n:"BrtEndAutoSortScope"},461:{n:"BrtBeginConditionalFormatting"},462:{n:"BrtEndConditionalFormatting"},463:{n:"BrtBeginCFRule"},464:{n:"BrtEndCFRule"},465:{n:"BrtBeginIconSet"},466:{n:"BrtEndIconSet"},467:{n:"BrtBeginDatabar"},468:{n:"BrtEndDatabar"},469:{n:"BrtBeginColorScale"},470:{n:"BrtEndColorScale"},471:{n:"BrtCFVO"},472:{n:"BrtExternValueMeta"},473:{n:"BrtBeginColorPalette"},474:{n:"BrtEndColorPalette"},475:{n:"BrtIndexedColor"},476:{n:"BrtMargins",f:ld},477:{n:"BrtPrintOptions"},478:{n:"BrtPageSetup"},479:{n:"BrtBeginHeaderFooter"},480:{n:"BrtEndHeaderFooter"},481:{n:"BrtBeginSXCrtFormat"},482:{n:"BrtEndSXCrtFormat"},483:{n:"BrtBeginSXCrtFormats"},484:{n:"BrtEndSXCrtFormats"},485:{n:"BrtWsFmtInfo",f:Fu},486:{n:"BrtBeginMgs"},487:{n:"BrtEndMGs"},488:{n:"BrtBeginMGMaps"},489:{n:"BrtEndMGMaps"},490:{n:"BrtBeginMG"},491:{n:"BrtEndMG"},492:{n:"BrtBeginMap"},493:{n:"BrtEndMap"},494:{n:"BrtHLink",f:ad},495:{n:"BrtBeginDCon"},496:{n:"BrtEndDCon"},497:{n:"BrtBeginDRefs"},498:{n:"BrtEndDRefs"},499:{n:"BrtDRef"},500:{n:"BrtBeginScenMan"},501:{n:"BrtEndScenMan"},502:{n:"BrtBeginSct"},503:{n:"BrtEndSct"},504:{n:"BrtSlc"},505:{n:"BrtBeginDXFs"},506:{n:"BrtEndDXFs"},507:{n:"BrtDXF"},508:{n:"BrtBeginTableStyles"},509:{n:"BrtEndTableStyles"},510:{n:"BrtBeginTableStyle"},511:{n:"BrtEndTableStyle"},512:{n:"BrtTableStyleElement"},513:{n:"BrtTableStyleClient"},514:{n:"BrtBeginVolDeps"},515:{n:"BrtEndVolDeps"},516:{n:"BrtBeginVolType"},517:{n:"BrtEndVolType"},518:{n:"BrtBeginVolMain"},519:{n:"BrtEndVolMain"},520:{n:"BrtBeginVolTopic"},521:{n:"BrtEndVolTopic"},522:{n:"BrtVolSubtopic"},523:{n:"BrtVolRef"},524:{n:"BrtVolNum"},525:{n:"BrtVolErr"},526:{n:"BrtVolStr"},527:{n:"BrtVolBool"},528:{n:"BrtBeginCalcChain$"},529:{n:"BrtEndCalcChain$"},530:{n:"BrtBeginSortState"},531:{n:"BrtEndSortState"},532:{n:"BrtBeginSortCond"},533:{n:"BrtEndSortCond"},534:{n:"BrtBookProtection"},535:{n:"BrtSheetProtection"},536:{n:"BrtRangeProtection"},537:{n:"BrtPhoneticInfo"},538:{n:"BrtBeginECTxtWiz"},539:{n:"BrtEndECTxtWiz"},540:{n:"BrtBeginECTWFldInfoLst"},541:{n:"BrtEndECTWFldInfoLst"},542:{n:"BrtBeginECTwFldInfo"},548:{n:"BrtFileSharing"},549:{n:"BrtOleSize"},550:{n:"BrtDrawing",f:Nt},551:{n:"BrtLegacyDrawing"},552:{n:"BrtLegacyDrawingHF"},553:{n:"BrtWebOpt"},554:{n:"BrtBeginWebPubItems"},555:{n:"BrtEndWebPubItems"},556:{n:"BrtBeginWebPubItem"},557:{n:"BrtEndWebPubItem"},558:{n:"BrtBeginSXCondFmt"},559:{n:"BrtEndSXCondFmt"},560:{n:"BrtBeginSXCondFmts"},561:{n:"BrtEndSXCondFmts"},562:{n:"BrtBkHim"},564:{n:"BrtColor"},565:{n:"BrtBeginIndexedColors"},566:{n:"BrtEndIndexedColors"},569:{n:"BrtBeginMRUColors"},570:{n:"BrtEndMRUColors"},572:{n:"BrtMRUColor"},573:{n:"BrtBeginDVals"},574:{n:"BrtEndDVals"},577:{n:"BrtSupNameStart"},578:{n:"BrtSupNameValueStart"},579:{n:"BrtSupNameValueEnd"},580:{n:"BrtSupNameNum"},581:{n:"BrtSupNameErr"},582:{n:"BrtSupNameSt"},583:{n:"BrtSupNameNil"},584:{n:"BrtSupNameBool"},585:{n:"BrtSupNameFmla"},586:{n:"BrtSupNameBits"},587:{n:"BrtSupNameEnd"},588:{n:"BrtEndSupBook"},589:{n:"BrtCellSmartTagProperty"},590:{n:"BrtBeginCellSmartTag"},591:{n:"BrtEndCellSmartTag"},592:{n:"BrtBeginCellSmartTags"},593:{n:"BrtEndCellSmartTags"},594:{n:"BrtBeginSmartTags"},595:{n:"BrtEndSmartTags"},596:{n:"BrtSmartTagType"},597:{n:"BrtBeginSmartTagTypes"},598:{n:"BrtEndSmartTagTypes"},599:{n:"BrtBeginSXFilters"},600:{n:"BrtEndSXFilters"},601:{n:"BrtBeginSXFILTER"},602:{n:"BrtEndSXFilter"},603:{n:"BrtBeginFills"},604:{n:"BrtEndFills"},605:{n:"BrtBeginCellWatches"},606:{n:"BrtEndCellWatches"},607:{n:"BrtCellWatch"},608:{n:"BrtBeginCRErrs"},609:{n:"BrtEndCRErrs"},610:{n:"BrtCrashRecErr"},611:{n:"BrtBeginFonts"},612:{n:"BrtEndFonts"},613:{n:"BrtBeginBorders"},614:{n:"BrtEndBorders"},615:{n:"BrtBeginFmts"},616:{n:"BrtEndFmts"},617:{n:"BrtBeginCellXFs"},618:{n:"BrtEndCellXFs"},619:{n:"BrtBeginStyles"},620:{n:"BrtEndStyles"},625:{n:"BrtBigName"},626:{n:"BrtBeginCellStyleXFs"},627:{n:"BrtEndCellStyleXFs"},628:{n:"BrtBeginComments"},629:{n:"BrtEndComments"},630:{n:"BrtBeginCommentAuthors"},631:{n:"BrtEndCommentAuthors"},632:{n:"BrtCommentAuthor",f:Dl},633:{n:"BrtBeginCommentList"},634:{n:"BrtEndCommentList"},635:{n:"BrtBeginComment",f:Il},636:{n:"BrtEndComment"},637:{n:"BrtCommentText",f:Tt},638:{n:"BrtBeginOleObjects"},639:{n:"BrtOleObject"},640:{n:"BrtEndOleObjects"},641:{n:"BrtBeginSxrules"},642:{n:"BrtEndSxRules"},643:{n:"BrtBeginActiveXControls"},644:{n:"BrtActiveX"},645:{n:"BrtEndActiveXControls"},646:{n:"BrtBeginPCDSDTCEMembersSortBy"},648:{n:"BrtBeginCellIgnoreECs"},649:{n:"BrtCellIgnoreEC"},650:{n:"BrtEndCellIgnoreECs"},651:{n:"BrtCsProp",f:Od},652:{n:"BrtCsPageSetup"},653:{n:"BrtBeginUserCsViews"},654:{n:"BrtEndUserCsViews"},655:{n:"BrtBeginUserCsView"},656:{n:"BrtEndUserCsView"},657:{n:"BrtBeginPcdSFCIEntries"},658:{n:"BrtEndPCDSFCIEntries"},659:{n:"BrtPCDSFCIEntry"},660:{n:"BrtBeginListParts"},661:{n:"BrtListPart"},662:{n:"BrtEndListParts"},663:{n:"BrtSheetCalcProp"},664:{n:"BrtBeginFnGroup"},665:{n:"BrtFnGroup"},666:{n:"BrtEndFnGroup"},667:{n:"BrtSupAddin"},668:{n:"BrtSXTDMPOrder"},669:{n:"BrtCsProtection"},671:{n:"BrtBeginWsSortMap"},672:{n:"BrtEndWsSortMap"},673:{n:"BrtBeginRRSort"},674:{n:"BrtEndRRSort"},675:{n:"BrtRRSortItem"},676:{n:"BrtFileSharingIso"},677:{n:"BrtBookProtectionIso"},678:{n:"BrtSheetProtectionIso"},679:{n:"BrtCsProtectionIso"},680:{n:"BrtRangeProtectionIso"},1024:{n:"BrtRwDescent"},1025:{n:"BrtKnownFonts"},1026:{n:"BrtBeginSXTupleSet"},1027:{n:"BrtEndSXTupleSet"},1028:{n:"BrtBeginSXTupleSetHeader"},1029:{n:"BrtEndSXTupleSetHeader"},1030:{n:"BrtSXTupleSetHeaderItem"},1031:{n:"BrtBeginSXTupleSetData"},1032:{n:"BrtEndSXTupleSetData"},1033:{n:"BrtBeginSXTupleSetRow"},1034:{n:"BrtEndSXTupleSetRow"},1035:{n:"BrtSXTupleSetRowItem"},1036:{n:"BrtNameExt"},1037:{n:"BrtPCDH14"},1038:{n:"BrtBeginPCDCalcMem14"},1039:{n:"BrtEndPCDCalcMem14"},1040:{n:"BrtSXTH14"},1041:{n:"BrtBeginSparklineGroup"},1042:{n:"BrtEndSparklineGroup"},1043:{n:"BrtSparkline"},1044:{n:"BrtSXDI14"},1045:{n:"BrtWsFmtInfoEx14"},1046:{n:"BrtBeginConditionalFormatting14"},1047:{n:"BrtEndConditionalFormatting14"},1048:{n:"BrtBeginCFRule14"},1049:{n:"BrtEndCFRule14"},1050:{n:"BrtCFVO14"},1051:{n:"BrtBeginDatabar14"},1052:{n:"BrtBeginIconSet14"},1053:{n:"BrtDVal14"},1054:{n:"BrtBeginDVals14"},1055:{n:"BrtColor14"},1056:{n:"BrtBeginSparklines"},1057:{n:"BrtEndSparklines"},1058:{n:"BrtBeginSparklineGroups"},1059:{n:"BrtEndSparklineGroups"},1061:{n:"BrtSXVD14"},1062:{n:"BrtBeginSXView14"},1063:{n:"BrtEndSXView14"},1064:{n:"BrtBeginSXView16"},1065:{n:"BrtEndSXView16"},1066:{n:"BrtBeginPCD14"},1067:{n:"BrtEndPCD14"},1068:{n:"BrtBeginExtConn14"},1069:{n:"BrtEndExtConn14"},1070:{n:"BrtBeginSlicerCacheIDs"},1071:{n:"BrtEndSlicerCacheIDs"},1072:{n:"BrtBeginSlicerCacheID"},1073:{n:"BrtEndSlicerCacheID"},1075:{n:"BrtBeginSlicerCache"},1076:{n:"BrtEndSlicerCache"},1077:{n:"BrtBeginSlicerCacheDef"},1078:{n:"BrtEndSlicerCacheDef"},1079:{n:"BrtBeginSlicersEx"},1080:{n:"BrtEndSlicersEx"},1081:{n:"BrtBeginSlicerEx"},1082:{n:"BrtEndSlicerEx"},1083:{n:"BrtBeginSlicer"},1084:{n:"BrtEndSlicer"},1085:{n:"BrtSlicerCachePivotTables"},1086:{n:"BrtBeginSlicerCacheOlapImpl"},1087:{n:"BrtEndSlicerCacheOlapImpl"},1088:{n:"BrtBeginSlicerCacheLevelsData"},1089:{n:"BrtEndSlicerCacheLevelsData"},1090:{n:"BrtBeginSlicerCacheLevelData"},1091:{n:"BrtEndSlicerCacheLevelData"},1092:{n:"BrtBeginSlicerCacheSiRanges"},1093:{n:"BrtEndSlicerCacheSiRanges"},1094:{n:"BrtBeginSlicerCacheSiRange"},1095:{n:"BrtEndSlicerCacheSiRange"},1096:{n:"BrtSlicerCacheOlapItem"},1097:{n:"BrtBeginSlicerCacheSelections"},1098:{n:"BrtSlicerCacheSelection"},1099:{n:"BrtEndSlicerCacheSelections"},1100:{n:"BrtBeginSlicerCacheNative"},1101:{n:"BrtEndSlicerCacheNative"},1102:{n:"BrtSlicerCacheNativeItem"},1103:{n:"BrtRangeProtection14"},1104:{n:"BrtRangeProtectionIso14"},1105:{n:"BrtCellIgnoreEC14"},1111:{n:"BrtList14"},1112:{n:"BrtCFIcon"},1113:{n:"BrtBeginSlicerCachesPivotCacheIDs"},1114:{n:"BrtEndSlicerCachesPivotCacheIDs"},1115:{n:"BrtBeginSlicers"},1116:{n:"BrtEndSlicers"},1117:{n:"BrtWbProp14"},1118:{n:"BrtBeginSXEdit"},1119:{n:"BrtEndSXEdit"},1120:{n:"BrtBeginSXEdits"},1121:{n:"BrtEndSXEdits"},1122:{n:"BrtBeginSXChange"},1123:{n:"BrtEndSXChange"},1124:{n:"BrtBeginSXChanges"},1125:{n:"BrtEndSXChanges"},1126:{n:"BrtSXTupleItems"},1128:{n:"BrtBeginSlicerStyle"},1129:{n:"BrtEndSlicerStyle"},1130:{n:"BrtSlicerStyleElement"},1131:{n:"BrtBeginStyleSheetExt14"},1132:{n:"BrtEndStyleSheetExt14"},1133:{n:"BrtBeginSlicerCachesPivotCacheID"},1134:{n:"BrtEndSlicerCachesPivotCacheID"},1135:{n:"BrtBeginConditionalFormattings"},1136:{n:"BrtEndConditionalFormattings"},1137:{n:"BrtBeginPCDCalcMemExt"},1138:{n:"BrtEndPCDCalcMemExt"},1139:{n:"BrtBeginPCDCalcMemsExt"},1140:{n:"BrtEndPCDCalcMemsExt"},1141:{n:"BrtPCDField14"},1142:{n:"BrtBeginSlicerStyles"},1143:{n:"BrtEndSlicerStyles"},1144:{n:"BrtBeginSlicerStyleElements"},1145:{n:"BrtEndSlicerStyleElements"},1146:{n:"BrtCFRuleExt"},1147:{n:"BrtBeginSXCondFmt14"},1148:{n:"BrtEndSXCondFmt14"},1149:{n:"BrtBeginSXCondFmts14"},1150:{n:"BrtEndSXCondFmts14"},1152:{n:"BrtBeginSortCond14"},1153:{n:"BrtEndSortCond14"},1154:{n:"BrtEndDVals14"},1155:{n:"BrtEndIconSet14"},1156:{n:"BrtEndDatabar14"},1157:{n:"BrtBeginColorScale14"},1158:{n:"BrtEndColorScale14"},1159:{n:"BrtBeginSxrules14"},1160:{n:"BrtEndSxrules14"},1161:{n:"BrtBeginPRule14"},1162:{n:"BrtEndPRule14"},1163:{n:"BrtBeginPRFilters14"},1164:{n:"BrtEndPRFilters14"},1165:{n:"BrtBeginPRFilter14"},1166:{n:"BrtEndPRFilter14"},1167:{n:"BrtBeginPRFItem14"},1168:{n:"BrtEndPRFItem14"},1169:{n:"BrtBeginCellIgnoreECs14"},1170:{n:"BrtEndCellIgnoreECs14"},1171:{n:"BrtDxf14"},1172:{n:"BrtBeginDxF14s"},1173:{n:"BrtEndDxf14s"},1177:{n:"BrtFilter14"},1178:{n:"BrtBeginCustomFilters14"},1180:{n:"BrtCustomFilter14"},1181:{n:"BrtIconFilter14"},1182:{n:"BrtPivotCacheConnectionName"},2048:{n:"BrtBeginDecoupledPivotCacheIDs"},2049:{n:"BrtEndDecoupledPivotCacheIDs"},2050:{n:"BrtDecoupledPivotCacheID"},2051:{n:"BrtBeginPivotTableRefs"},2052:{n:"BrtEndPivotTableRefs"},2053:{n:"BrtPivotTableRef"},2054:{n:"BrtSlicerCacheBookPivotTables"},2055:{n:"BrtBeginSxvcells"},2056:{n:"BrtEndSxvcells"},2057:{n:"BrtBeginSxRow"},2058:{n:"BrtEndSxRow"},2060:{n:"BrtPcdCalcMem15"},2067:{n:"BrtQsi15"},2068:{n:"BrtBeginWebExtensions"},2069:{n:"BrtEndWebExtensions"},2070:{n:"BrtWebExtension"},2071:{n:"BrtAbsPath15"},2072:{n:"BrtBeginPivotTableUISettings"},2073:{n:"BrtEndPivotTableUISettings"},2075:{n:"BrtTableSlicerCacheIDs"},2076:{n:"BrtTableSlicerCacheID"},2077:{n:"BrtBeginTableSlicerCache"},2078:{n:"BrtEndTableSlicerCache"},2079:{n:"BrtSxFilter15"},2080:{n:"BrtBeginTimelineCachePivotCacheIDs"},2081:{n:"BrtEndTimelineCachePivotCacheIDs"},2082:{n:"BrtTimelineCachePivotCacheID"},2083:{n:"BrtBeginTimelineCacheIDs"},2084:{n:"BrtEndTimelineCacheIDs"},2085:{n:"BrtBeginTimelineCacheID"},2086:{n:"BrtEndTimelineCacheID"},2087:{n:"BrtBeginTimelinesEx"},2088:{n:"BrtEndTimelinesEx"},2089:{n:"BrtBeginTimelineEx"},2090:{n:"BrtEndTimelineEx"},2091:{n:"BrtWorkBookPr15"},2092:{n:"BrtPCDH15"},2093:{n:"BrtBeginTimelineStyle"},2094:{n:"BrtEndTimelineStyle"},2095:{n:"BrtTimelineStyleElement"},2096:{n:"BrtBeginTimelineStylesheetExt15"},2097:{n:"BrtEndTimelineStylesheetExt15"},2098:{n:"BrtBeginTimelineStyles"},2099:{n:"BrtEndTimelineStyles"},2100:{n:"BrtBeginTimelineStyleElements"},2101:{n:"BrtEndTimelineStyleElements"},2102:{n:"BrtDxf15"},2103:{n:"BrtBeginDxfs15"},2104:{n:"brtEndDxfs15"},2105:{n:"BrtSlicerCacheHideItemsWithNoData"},2106:{n:"BrtBeginItemUniqueNames"},2107:{n:"BrtEndItemUniqueNames"},2108:{n:"BrtItemUniqueName"},2109:{n:"BrtBeginExtConn15"},2110:{n:"BrtEndExtConn15"},2111:{n:"BrtBeginOledbPr15"},2112:{n:"BrtEndOledbPr15"},2113:{n:"BrtBeginDataFeedPr15"},2114:{n:"BrtEndDataFeedPr15"},2115:{n:"BrtTextPr15"},2116:{n:"BrtRangePr15"},2117:{n:"BrtDbCommand15"},2118:{n:"BrtBeginDbTables15"},2119:{n:"BrtEndDbTables15"},2120:{n:"BrtDbTable15"},2121:{n:"BrtBeginDataModel"},2122:{n:"BrtEndDataModel"},2123:{n:"BrtBeginModelTables"},2124:{n:"BrtEndModelTables"},2125:{n:"BrtModelTable"},2126:{n:"BrtBeginModelRelationships"},2127:{n:"BrtEndModelRelationships"},2128:{n:"BrtModelRelationship"},2129:{n:"BrtBeginECTxtWiz15"},2130:{n:"BrtEndECTxtWiz15"},2131:{n:"BrtBeginECTWFldInfoLst15"},2132:{n:"BrtEndECTWFldInfoLst15"},2133:{n:"BrtBeginECTWFldInfo15"},2134:{n:"BrtFieldListActiveItem"},2135:{n:"BrtPivotCacheIdVersion"},2136:{n:"BrtSXDI15"},2137:{n:"BrtBeginModelTimeGroupings"},2138:{n:"BrtEndModelTimeGroupings"},2139:{n:"BrtBeginModelTimeGrouping"},2140:{n:"BrtEndModelTimeGrouping"},2141:{n:"BrtModelTimeGroupingCalcCol"},3072:{n:"BrtUid"},3073:{n:"BrtRevisionPtr"},65535:{n:""}};
var uv=K(hv,"n");var dv={3:{n:"BIFF2NUM",f:js},4:{n:"BIFF2STR",f:Gs},6:{n:"Formula",f:Rh},9:{n:"BOF",f:Si},10:{n:"EOF",f:Pn},12:{n:"CalcCount",f:Hn},13:{n:"CalcMode",f:Hn},14:{n:"CalcPrecision",f:Mn},15:{n:"CalcRefMode",f:Mn},16:{n:"CalcDelta",f:Xt},17:{n:"CalcIter",f:Mn},18:{n:"Protect",f:Mn},19:{n:"Password",f:Hn},20:{n:"Header",f:ls},21:{n:"Footer",f:ls},23:{n:"ExternSheet",f:ps},24:{n:"Lbl",f:ds},25:{n:"WinProtect",f:Mn},26:{n:"VerticalPageBreaks"},27:{n:"HorizontalPageBreaks"},28:{n:"Note",f:Es},29:{n:"Selection"},34:{n:"Date1904",f:Mn},35:{n:"ExternName",f:hs},38:{n:"LeftMargin",f:Xt},39:{n:"RightMargin",f:Xt},40:{n:"TopMargin",f:Xt},41:{n:"BottomMargin",f:Xt},42:{n:"PrintRowCol",f:Mn},43:{n:"PrintGrid",f:Mn},47:{n:"FilePass",f:Gf},49:{n:"Font",f:Wi},51:{n:"PrintSize",f:Hn},60:{n:"Continue"},61:{n:"Window1",f:Li},64:{n:"Backup",f:Mn},65:{n:"Pane"},66:{n:"CodePage",f:Hn},77:{n:"Pls"},80:{n:"DCon"},81:{n:"DConRef"},82:{n:"DConName"},85:{n:"DefColWidth",f:Hn},89:{n:"XCT"},90:{n:"CRN"},91:{n:"FileSharing"},92:{n:"WriteAccess",f:Bi},93:{n:"Obj",f:As},94:{n:"Uncalced"},95:{n:"CalcSaveRecalc",f:Mn},96:{n:"Template"},97:{n:"Intl"},99:{n:"ObjProtect",f:Mn},125:{n:"ColInfo",f:Ls},128:{n:"Guts",f:as},129:{n:"WsBool",f:yi},130:{n:"GridSet",f:Hn},131:{n:"HCenter",f:Mn},132:{n:"VCenter",f:Mn},133:{n:"BoundSheet8",f:xi},134:{n:"WriteProtect"},140:{n:"Country",f:Ds},141:{n:"HideObj",f:Hn},144:{n:"Sort"},146:{n:"Palette",f:Ps},151:{n:"Sync"},152:{n:"LPr"},153:{n:"DxGCol"},154:{n:"FnGroupName"},155:{n:"FilterMode"},156:{n:"BuiltInFnGroupCount",f:Hn},157:{n:"AutoFilterInfo"},158:{n:"AutoFilter"},160:{n:"Scl",f:Vs},161:{n:"Setup",f:Ms},174:{n:"ScenMan"},175:{n:"SCENARIO"},176:{n:"SxView"},177:{n:"Sxvd"},178:{n:"SXVI"},180:{n:"SxIvd"},181:{n:"SXLI"},182:{n:"SXPI"},184:{n:"DocRoute"},185:{n:"RecipName"},189:{n:"MulRk",f:Ji},190:{n:"MulBlank",f:qi},193:{n:"Mms",f:Pn},197:{n:"SXDI"},198:{n:"SXDB"},199:{n:"SXFDB"},200:{n:"SXDBB"},201:{n:"SXNum"},202:{n:"SxBool",f:Mn},203:{n:"SxErr"},204:{n:"SXInt"},205:{n:"SXString"},206:{n:"SXDtr"},207:{n:"SxNil"},208:{n:"SXTbl"},209:{n:"SXTBRGIITM"},210:{n:"SxTbpg"},211:{n:"ObProj"},213:{n:"SXStreamID"},215:{n:"DBCell"},216:{n:"SXRng"},217:{n:"SxIsxoper"},218:{n:"BookBool",f:Hn},220:{n:"DbOrParamQry"},221:{n:"ScenarioProtect",f:Mn},222:{n:"OleObjectSize"},224:{n:"XF",f:rs},225:{n:"InterfaceHdr",f:_i},226:{n:"InterfaceEnd",f:Pn},227:{n:"SXVS"},229:{n:"MergeCells",f:ks},233:{n:"BkHim"},235:{n:"MsoDrawingGroup"},236:{n:"MsoDrawing"},237:{n:"MsoDrawingSelection"},239:{n:"PhoneticInfo"},240:{n:"SxRule"},241:{n:"SXEx"},242:{n:"SxFilt"},244:{n:"SxDXF"},245:{n:"SxItm"},246:{n:"SxName"},247:{n:"SxSelect"},248:{n:"SXPair"},249:{n:"SxFmla"},251:{n:"SxFormat"},252:{n:"SST",f:Ri},253:{n:"LabelSst",f:zi},255:{n:"ExtSST",f:Di},256:{n:"SXVDEx"},259:{n:"SXFormula"},290:{n:"SXDBEx"},311:{n:"RRDInsDel"},312:{n:"RRDHead"},315:{n:"RRDChgCell"},317:{n:"RRTabId",f:Vn},318:{n:"RRDRenSheet"},319:{n:"RRSort"},320:{n:"RRDMove"},330:{n:"RRFormat"},331:{n:"RRAutoFmt"},333:{n:"RRInsertSh"},334:{n:"RRDMoveBegin"},335:{n:"RRDMoveEnd"},336:{n:"RRDInsDelBegin"},337:{n:"RRDInsDelEnd"},338:{n:"RRDConflict"},339:{n:"RRDDefName"},340:{n:"RRDRstEtxp"},351:{n:"LRng"},352:{n:"UsesELFs",f:Mn},353:{n:"DSF",f:Pn},401:{n:"CUsr"},402:{n:"CbUsr"},403:{n:"UsrInfo"},404:{n:"UsrExcl"},405:{n:"FileLock"},406:{n:"RRDInfo"},407:{n:"BCUsrs"},408:{n:"UsrChk"},425:{n:"UserBView"},426:{n:"UserSViewBegin"},427:{n:"UserSViewEnd"},428:{n:"RRDUserView"},429:{n:"Qsi"},430:{n:"SupBook",f:cs},431:{n:"Prot4Rev",f:Mn},432:{n:"CondFmt"},433:{n:"CF"},434:{n:"DVal"},437:{n:"DConBin"},438:{n:"TxO",f:Ts},439:{n:"RefreshAll",f:Mn},440:{n:"HLink",f:ys},441:{n:"Lel"},442:{n:"CodeName",f:Yn},443:{n:"SXFDBType"},444:{n:"Prot4RevPass",f:Hn},445:{n:"ObNoMacros"},446:{n:"Dv"},448:{n:"Excel9File",f:Pn},449:{n:"RecalcId",f:Pi,r:2},450:{n:"EntExU2",f:Pn},512:{n:"Dimensions",f:$i},513:{n:"Blank",f:Ws},515:{n:"Number",f:fs},516:{n:"Label",f:Xi},517:{n:"BoolErr",f:is},518:{n:"Formula",f:Rh},519:{n:"String",f:zs},520:{n:"Row",f:Oi},523:{n:"Index"},545:{n:"Array",f:bs},549:{n:"DefaultRowHeight",f:Ni},566:{n:"Table"},574:{n:"Window2",f:Ui},638:{n:"RK",f:Qi},659:{n:"Style"},1030:{n:"Formula",f:Rh},1048:{n:"BigName"},1054:{n:"Format",f:ji},1084:{n:"ContinueBigName"},1212:{n:"ShrFmla",f:ms},2048:{n:"HLinkTooltip",f:Is},2049:{n:"WebPub"},2050:{n:"QsiSXTag"},2051:{n:"DBQueryExt"},2052:{n:"ExtString"},2053:{n:"TxtQry"},2054:{n:"Qsir"},2055:{n:"Qsif"},2056:{n:"RRDTQSIF"},2057:{n:"BOF",f:Si},2058:{n:"OleDbConn"},2059:{n:"WOpt"},2060:{n:"SXViewEx"},2061:{n:"SXTH"},2062:{n:"SXPIEx"},2063:{n:"SXVDTEx"},2064:{n:"SXViewEx9"},2066:{n:"ContinueFrt"},2067:{n:"RealTimeData"},2128:{n:"ChartFrtInfo"},2129:{n:"FrtWrapper"},2130:{n:"StartBlock"},2131:{n:"EndBlock"},2132:{n:"StartObject"},2133:{n:"EndObject"},2134:{n:"CatLab"},2135:{n:"YMult"},2136:{n:"SXViewLink"},2137:{n:"PivotChartBits"},2138:{n:"FrtFontList"},2146:{n:"SheetExt"},2147:{n:"BookExt",r:12},2148:{n:"SXAddl"},2149:{n:"CrErr"},2150:{n:"HFPicture"},2151:{n:"FeatHdr",f:Pn},2152:{n:"Feat"},2154:{n:"DataLabExt"},2155:{n:"DataLabExtContents"},2156:{n:"CellWatch"},2161:{n:"FeatHdr11"},2162:{n:"Feature11"},2164:{n:"DropDownObjIds"},2165:{n:"ContinueFrt11"},2166:{n:"DConn"},2167:{n:"List12"},2168:{n:"Feature12"},2169:{n:"CondFmt12"},2170:{n:"CF12"},2171:{n:"CFEx"},2172:{n:"XFCRC",f:Ns,r:12},2173:{n:"XFExt",f:vl,r:12},2174:{n:"AutoFilter12"},2175:{n:"ContinueFrt12"},2180:{n:"MDTInfo"},2181:{n:"MDXStr"},2182:{n:"MDXTuple"},2183:{n:"MDXSet"},2184:{n:"MDXProp"},2185:{n:"MDXKPI"},2186:{n:"MDB"},2187:{n:"PLV"},2188:{n:"Compat12",f:Mn,r:12},2189:{n:"DXF"},2190:{n:"TableStyles",r:12},2191:{n:"TableStyle"},2192:{n:"TableStyleElement"},2194:{n:"StyleExt"},2195:{n:"NamePublish"},2196:{n:"NameCmt",f:gs,r:12},2197:{n:"SortData"},2198:{n:"Theme",f:ll,r:12},2199:{n:"GUIDTypeLib"},2200:{n:"FnGrp12"},2201:{n:"NameFnGrp12"},2202:{n:"MTRSettings",f:ws,r:12},2203:{n:"CompressPictures",f:Pn},2204:{n:"HeaderFooter"},2205:{n:"CrtLayout12"},2206:{n:"CrtMlFrt"},2207:{n:"CrtMlFrtContinue"},2211:{n:"ForceFullCalculation",f:Fi},2212:{n:"ShapePropsStream"},2213:{n:"TextPropsStream"},2214:{n:"RichTextStream"},2215:{n:"CrtLayout12A"},4097:{n:"Units"},4098:{n:"Chart"},4099:{n:"Series"},4102:{n:"DataFormat"},4103:{n:"LineFormat"},4105:{n:"MarkerFormat"},4106:{n:"AreaFormat"},4107:{n:"PieFormat"},4108:{n:"AttachedLabel"},4109:{n:"SeriesText"},4116:{n:"ChartFormat"},4117:{n:"Legend"},4118:{n:"SeriesList"},4119:{n:"Bar"},4120:{n:"Line"},4121:{n:"Pie"},4122:{n:"Area"},4123:{n:"Scatter"},4124:{n:"CrtLine"},4125:{n:"Axis"},4126:{n:"Tick"},4127:{n:"ValueRange"},4128:{n:"CatSerRange"},4129:{n:"AxisLine"},4130:{n:"CrtLink"},4132:{n:"DefaultText"},4133:{n:"Text"},4134:{n:"FontX",f:Hn},4135:{n:"ObjectLink"},4146:{n:"Frame"},4147:{n:"Begin"},4148:{n:"End"},4149:{n:"PlotArea"},4154:{n:"Chart3d"},4156:{n:"PicF"},4157:{n:"DropBar"},4158:{n:"Radar"},4159:{n:"Surf"},4160:{n:"RadarArea"},4161:{n:"AxisParent"},4163:{n:"LegendException"},4164:{n:"ShtProps",f:Us},4165:{n:"SerToCrt"},4166:{n:"AxesUsed"},4168:{n:"SBaseRef"},4170:{n:"SerParent"},4171:{n:"SerAuxTrend"},4174:{n:"IFmtRecord"},4175:{n:"Pos"},4176:{n:"AlRuns"},4177:{n:"BRAI"},4187:{n:"SerAuxErrBar"},4188:{n:"ClrtClient",f:Fs},4189:{n:"SerFmt"},4191:{n:"Chart3DBarShape"},4192:{n:"Fbi"},4193:{n:"BopPop"},4194:{n:"AxcExt"},4195:{n:"Dat"},4196:{n:"PlotGrowth"},4197:{n:"SIIndex"},4198:{n:"GelFrame"},4199:{n:"BopPopCustom"},4200:{n:"Fbi2"},0:{n:"Dimensions",f:$i},2:{n:"BIFF2INT",f:Ys},5:{n:"BoolErr",f:is},7:{n:"String",f:Zs},8:{n:"BIFF2ROW"},11:{n:"Index"},22:{n:"ExternCount",f:Hn},30:{n:"BIFF2FORMAT",f:Yi},31:{n:"BIFF2FMTCNT"},32:{n:"BIFF2COLINFO"},33:{n:"Array",f:bs},37:{n:"DefaultRowHeight",f:Ni},50:{n:"BIFF2FONTXTRA",f:Qs},52:{n:"DDEObjName"},62:{n:"BIFF2WINDOW2"},67:{n:"BIFF2XF"},69:{n:"BIFF2FONTCLR"},86:{n:"BIFF4FMTCNT"},126:{n:"RK"},127:{n:"ImData",f:Xs},135:{n:"Addin"},136:{n:"Edg"},137:{n:"Pub"},145:{n:"Sub"},148:{n:"LHRecord"},149:{n:"LHNGraph"},150:{n:"Sound"},169:{n:"CoordList"},171:{n:"GCW"},188:{n:"ShrFmla"},191:{n:"ToolbarHdr"},192:{n:"ToolbarEnd"},194:{n:"AddMenu"},195:{n:"DelMenu"},214:{n:"RString",f:Js},223:{n:"UDDesc"},234:{n:"TabIdConf"},354:{n:"XL5Modify"},421:{n:"FileSharing2"},521:{n:"BOF",f:Si},536:{n:"Lbl",f:ds},547:{n:"ExternName",f:hs},561:{n:"Font"},579:{n:"BIFF3XF"},1033:{n:"BOF",f:Si},1091:{n:"BIFF4XF"},2157:{n:"FeatInfo"},2163:{n:"FeatInfo11"},2177:{n:"SXAddl12"},2240:{n:"AutoWebPub"},2241:{n:"ListObj"},2242:{n:"ListField"},2243:{n:"ListDV"},2244:{n:"ListCondFmt"},2245:{n:"ListCF"},2246:{n:"FMQry"},2247:{n:"FMSQry"},2248:{n:"PLV"},2249:{n:"LnExt"},2250:{n:"MkrExt"},2251:{n:"CrtCoopt"},2262:{n:"FRTArchId$",r:12},29282:{}};
var pv=K(dv,"n");function vv(e,r,t,a){var n=+r||+pv[r];if(isNaN(n)){return}var i=a||(t||[]).length||0;var s=e.next(4);s._W(2,n);s._W(2,i);if(i>0&&Ir(t)){e.push(t)}}function gv(e,r,t){if(!e){e=Gr(7)}e._W(2,r);e._W(2,t);e._W(2,0);e._W(1,0);return e}function mv(e,r,t,a){var n=Gr(9);gv(n,e,r);if(a=="e"){n._W(1,t);n._W(1,1)}else{n._W(1,t?1:0);n._W(1,0)}return n}function bv(e,r,t){var a=Gr(8+2*t.length);gv(a,e,r);a._W(1,t.length);a._W(t.length,t,"sbcs");return a.l<a.length?a.slice(0,a.l):a}function wv(e,r,t,a){if(r.v!=null){switch(r.t){case"d":case"n":var n=r.t=="d"?ee(ie(r.v)):r.v;if(n==(n|0)&&n>=0&&n<65536){vv(e,2,$s(t,a,n))}else{vv(e,3,Ks(t,a,n))}return;case"b":case"e":vv(e,5,mv(t,a,r.v,r.t));return;case"s":case"str":vv(e,4,bv(t,a,r.v));return}}vv(e,1,gv(null,t,a))}function Cv(e,r,t,a){var n=Array.isArray(r);var i=pt(r["!ref"]||"A1"),s,f="",o=[];if(i.e.c>255||i.e.r>16383){if(a.WTF){throw new Error("Range "+(r["!ref"]||"A1")+" exceeds format limit A1:IV16384")}i.e.c=Math.min(i.e.c,255);i.e.r=Math.min(i.e.c,16383);s=dt(i)}for(var l=i.s.r;l<=i.e.r;++l){f=tt(l);for(var c=i.s.c;c<=i.e.c;++c){if(l===i.s.r){o[c]=st(c)}s=o[c]+f;var h=n?(r[l]||[])[c]:r[s];if(!h){continue}wv(e,h,l,c,a)}}}function Ev(e,r){var t=r||{};if(v!=null&&t.dense==null){t.dense=v}var a=Kr();var n=0;for(var i=0;i<e.SheetNames.length;++i){if(e.SheetNames[i]==t.sheet){n=i}}if(n==0&&!!t.sheet&&e.SheetNames[0]!=t.sheet){throw new Error("Sheet not found: "+t.sheet)}vv(a,9,Ai(e,16,t));Cv(a,e.Sheets[e.SheetNames[n]],n,t,e);vv(a,10);return a.end()}function kv(e,r,t){vv(e,"Font",Vi({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},t))}function Sv(e,r,t){if(!r){return}[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n){if(r[n]!=null){vv(e,"Format",Ki(n,r[n],t))}}})}function Av(e,r){var t=Gr(19);t._W(4,2151);t._W(4,0);t._W(4,0);t._W(2,3);t._W(1,1);t._W(4,0);vv(e,"FeatHdr",t);t=Gr(39);t._W(4,2152);t._W(4,0);t._W(4,0);t._W(2,3);t._W(1,0);t._W(4,0);t._W(2,1);t._W(4,4);t._W(2,0);pi(pt(r["!ref"]||"A1"),t);
t._W(4,4);vv(e,"Feat",t)}function _v(e,r){for(var t=0;t<16;++t){vv(e,"XF",ts({numFmtId:0,style:true},0,r))}r.cellXfs.forEach(function(t){vv(e,"XF",ts(t,0,r))})}function Bv(e,r){for(var t=0;t<r["!links"].length;++t){var a=r["!links"][t];vv(e,"HLink",xs(a));if(a[1].Tooltip){vv(e,"HLinkTooltip",Rs(a))}}delete r["!links"]}function Tv(e,r,t,a,n){var i=16+Qh(n.cellXfs,r,n);if(r.v!=null){switch(r.t){case"d":case"n":var s=r.t=="d"?ee(ie(r.v)):r.v;vv(e,"Number",os(t,a,s,i,n));return;case"b":case"e":vv(e,517,ss(t,a,r.v,i,n,r.t));return;case"s":case"str":vv(e,"Label",Gi(t,a,r.v,i,n));return}}vv(e,"Blank",fi(t,a,i))}function yv(e,r,t){var a=Kr();var n=t.SheetNames[e],i=t.Sheets[n]||{};var s=(t||{}).Workbook||{};var f=(s.Sheets||[])[e]||{};var o=Array.isArray(i);var l=r.biff==8;var c,h="",u=[];var d=pt(i["!ref"]||"A1");var p=l?65536:16384;if(d.e.c>255||d.e.r>=p){if(r.WTF){throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384")}d.e.c=Math.min(d.e.c,255);d.e.r=Math.min(d.e.c,p-1)}vv(a,2057,Ai(t,16,r));vv(a,"CalcMode",Wn(1));vv(a,"CalcCount",Wn(100));vv(a,"CalcRefMode",Un(true));vv(a,"CalcIter",Un(false));vv(a,"CalcDelta",Gt(0.001));vv(a,"CalcSaveRecalc",Un(true));vv(a,"PrintRowCol",Un(false));vv(a,"PrintGrid",Un(false));vv(a,"GridSet",Wn(1));vv(a,"Guts",ns([0,0]));vv(a,"HCenter",Un(false));vv(a,"VCenter",Un(false));vv(a,512,Zi(d,r));if(l){i["!links"]=[]}for(var v=d.s.r;v<=d.e.r;++v){h=tt(v);for(var g=d.s.c;g<=d.e.c;++g){if(v===d.s.r){u[g]=st(g)}c=u[g]+h;var m=o?(i[v]||[])[g]:i[c];if(!m){continue}Tv(a,m,v,g,r);if(l&&m.l){i["!links"].push([c,m.l])}}}var b=f.CodeName||f.name||n;if(l&&s.Views){vv(a,"Window2",Hi(s.Views[0]))}if(l&&(i["!merges"]||[]).length){vv(a,"MergeCells",Ss(i["!merges"]))}if(l){Bv(a,i)}vv(a,"CodeName",Zn(b,r));if(l){Av(a,i)}vv(a,"EOF");return a.end()}function xv(e,r,t){var a=Kr();var n=(e||{}).Workbook||{};var i=n.Sheets||[];var s=n.WBProps||{};var f=t.biff==8,o=t.biff==5;vv(a,2057,Ai(e,5,t));if(t.bookType=="xla"){vv(a,"Addin")}vv(a,"InterfaceHdr",f?Wn(1200):null);
vv(a,"Mms",Nn(2));if(o){vv(a,"ToolbarHdr")}if(o){vv(a,"ToolbarEnd")}vv(a,"InterfaceEnd");vv(a,"WriteAccess",Ti("SheetJS",t));vv(a,"CodePage",Wn(f?1200:1252));if(f){vv(a,"DSF",Wn(0))}if(f){vv(a,"Excel9File")}vv(a,"RRTabId",Hs(e.SheetNames.length));if(f&&e.vbaraw){vv(a,"ObProj");var l=s.CodeName||"ThisWorkbook";vv(a,"CodeName",Zn(l,t))}vv(a,"BuiltInFnGroupCount",Wn(17));vv(a,"WinProtect",Un(false));vv(a,"Protect",Un(false));vv(a,"Password",Wn(0));if(f){vv(a,"Prot4Rev",Un(false))}if(f){vv(a,"Prot4RevPass",Wn(0))}vv(a,"Window1",Mi(t));vv(a,"Backup",Un(false));vv(a,"HideObj",Wn(0));vv(a,"Date1904",Un(zd(e)=="true"));vv(a,"CalcPrecision",Un(true));if(f){vv(a,"RefreshAll",Un(false))}vv(a,"BookBool",Wn(0));kv(a,e,t);Sv(a,e.SSF,t);_v(a,t);if(f){vv(a,"UsesELFs",Un(false))}var c=a.end();var h=Kr();if(f){vv(h,"Country",Os())}vv(h,"EOF");var u=h.end();var d=Kr();var p=0,v=0;for(v=0;v<e.SheetNames.length;++v){p+=(f?12:11)+(f?2:1)*e.SheetNames[v].length}var g=c.length+p+u.length;for(v=0;v<e.SheetNames.length;++v){var m=i[v]||{};vv(d,"BoundSheet8",Ii({pos:g,hs:m.Hidden||0,dt:0,name:e.SheetNames[v]},t));g+=r[v].length}var b=d.end();if(p!=b.length){throw new Error("BS8 "+p+" != "+b.length)}var w=[];if(c.length){w.push(c)}if(b.length){w.push(b)}if(u.length){w.push(u)}return cr([w])}function Iv(e,r){var t=r||{};var a=[];if(e&&!e.SSF){e.SSF=D.get_table()}if(e&&e.SSF){O(D);D.load_table(e.SSF);t.revssf=Z(e.SSF);t.revssf[e.SSF[65535]]=0;t.ssf=e.SSF}t.cellXfs=[];t.Strings=[];t.Strings.Count=0;t.Strings.Unique=0;Qh(t.cellXfs,{},{revssf:{General:0}});for(var n=0;n<e.SheetNames.length;++n){a[a.length]=yv(n,t,e)}a.unshift(xv(e,a,t));return cr([a])}function Rv(e,r){var t=r||{};switch(t.biff||2){case 8:case 5:return Iv(e,r);case 4:case 3:case 2:return Ev(e,r)}throw new Error("invalid type "+t.bookType+" for BIFF")}var Dv=function(){function e(e,r){var t=r||{};if(v!=null&&t.dense==null){t.dense=v}var a=t.dense?[]:{};var n=e.match(/<table/i);if(!n){throw new Error("Invalid HTML: could not find <table>")
}var i=e.match(/<\/table/i);var s=n.index,f=i&&i.index||e.length;var o=ue(e.slice(s,f),/(:?<tr[^>]*>)/i,"<tr>");var l=-1,c=0,h=0,u=0;var d={s:{r:10000000,c:10000000},e:{r:0,c:0}};var p=[];for(s=0;s<o.length;++s){var g=o[s].trim();var m=g.slice(0,3).toLowerCase();if(m=="<tr"){++l;if(t.sheetRows&&t.sheetRows<=l){--l;break}c=0;continue}if(m!="<td"&&m!="<th"){continue}var b=g.split(/<\/t[dh]>/i);for(f=0;f<b.length;++f){var w=b[f].trim();if(!w.match(/<t[dh]/i)){continue}var C=w,E=0;while(C.charAt(0)=="<"&&(E=C.indexOf(">"))>-1){C=C.slice(E+1)}var k=ye(w.slice(0,w.indexOf(">")));u=k.colspan?+k.colspan:1;if((h=+k.rowspan)>1||u>1){p.push({s:{r:l,c:c},e:{r:l+(h||1)-1,c:c+u-1}})}var S=k.t||"";if(!C.length){c+=u;continue}C=$e(C);if(d.s.r>l){d.s.r=l}if(d.e.r<l){d.e.r=l}if(d.s.c>c){d.s.c=c}if(d.e.c<c){d.e.c=c}if(!C.length){continue}var A={t:"s",v:C};if(t.raw||!C.trim().length||S=="s"){}else{if(C==="TRUE"){A={t:"b",v:true}}else{if(C==="FALSE"){A={t:"b",v:false}}else{if(!isNaN(le(C))){A={t:"n",v:le(C)}}else{if(!isNaN(ce(C).getDate())){A={t:"d",v:ie(C)};if(!t.cellDates){A={t:"n",v:ee(A.v)}}A.z=t.dateNF||D._table[14]}}}}}if(t.dense){if(!a[l]){a[l]=[]}a[l][c]=A}else{a[ht({r:l,c:c})]=A}c+=u}}a["!ref"]=dt(d);return a}function r(r,t){return mt(e(r,t),t)}function t(e,r,t,a){var n=e["!merges"]||[];var i=[];for(var s=r.s.c;s<=r.e.c;++s){var f=0,o=0;for(var l=0;l<n.length;++l){if(n[l].s.r>t||n[l].s.c>s){continue}if(n[l].e.r<t||n[l].e.c<s){continue}if(n[l].s.r<t||n[l].s.c<s){f=-1;break}f=n[l].e.r-n[l].s.r+1;o=n[l].e.c-n[l].s.c+1;break}if(f<0){continue}var c=ht({r:t,c:s});var h=a.dense?(e[t]||[])[s]:e[c];var u={};if(f>1){u.rowspan=f}if(o>1){u.colspan=o}var d=h&&h.v!=null&&(h.h||Me(h.w||(gt(h),h.w)||""))||"";u.t=h&&h.t||"z";if(a.editable){d='<span contenteditable="true">'+d+"</span>"}u.id="sjs-"+c;i.push(ar("td",d,u))}var p="<tr>";return p+i.join("")+"</tr>"}function a(e,r,t){var a=[];return a.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}var n='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>';
var i="</body></html>";function s(e,r){var s=r||{};var f=s.header!=null?s.header:n;var o=s.footer!=null?s.footer:i;var l=[f];var c=ut(e["!ref"]);s.dense=Array.isArray(e);l.push(a(e,c,s));for(var h=c.s.r;h<=c.e.r;++h){l.push(t(e,c,h,s))}l.push("</table>"+o);return l.join("")}return{to_workbook:r,to_sheet:e,_row:t,BEGIN:n,END:i,_preamble:a,from_sheet:s}}();function Ov(e,r){var t=r||{};if(v!=null){t.dense=v}var a=t.dense?[]:{};var n=e.getElementsByTagName("tr");var i=t.sheetRows||10000000;var s={s:{r:0,c:0},e:{r:0,c:0}};var f=[],o=0;var l=[];var c=0,h=0,u,d,p,g;for(;c<n.length&&h<i;++c){var m=n[c];if(Pv(m)){if(t.display){continue}l[h]={hidden:true}}var b=m.children;for(u=d=0;u<b.length;++u){var w=b[u];if(t.display&&Pv(w)){continue}var C=$e(w.innerHTML);for(o=0;o<f.length;++o){var E=f[o];if(E.s.c==d&&E.s.r<=h&&h<=E.e.r){d=E.e.c+1;o=-1}}g=+w.getAttribute("colspan")||1;if((p=+w.getAttribute("rowspan"))>0||g>1){f.push({s:{r:h,c:d},e:{r:h+(p||1)-1,c:d+g-1}})}var k={t:"s",v:C};var S=w.getAttribute("t")||"";if(C!=null){if(C.length==0){k.t=S||"z"}else{if(t.raw||C.trim().length==0||S=="s"){}else{if(C==="TRUE"){k={t:"b",v:true}}else{if(C==="FALSE"){k={t:"b",v:false}}else{if(!isNaN(le(C))){k={t:"n",v:le(C)}}else{if(!isNaN(ce(C).getDate())){k={t:"d",v:ie(C)};if(!t.cellDates){k={t:"n",v:ee(k.v)}}k.z=t.dateNF||D._table[14]}}}}}}}if(t.dense){if(!a[h]){a[h]=[]}a[h][d]=k}else{a[ht({c:d,r:h})]=k}if(s.e.c<d){s.e.c=d}d+=g}++h}if(f.length){a["!merges"]=f}if(l.length){a["!rows"]=l}s.e.r=h-1;a["!ref"]=dt(s);if(h>=i){a["!fullref"]=dt((s.e.r=n.length-c+h-1,s))}return a}function Fv(e,r){return mt(Ov(e,r),r)}function Pv(e){var r="";var t=Nv(e);if(t){r=t(e).getPropertyValue("display")}if(!r){r=e.style.display}return r==="none"}function Nv(e){if(e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle==="function"){return e.ownerDocument.defaultView.getComputedStyle}if(typeof getComputedStyle==="function"){return getComputedStyle}return null}var Lv=function(){var e=function(e){return De(e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(e,r){return Array(parseInt(r,10)+1).join(" ")
}).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n").replace(/<[^>]*>/g,""))};var r={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};return function t(a,n){var i=n||{};if(v!=null&&i.dense==null){i.dense=v}var s=Mp(a);var f=[],o;var l;var c={name:""},h="",u=0;var d;var p;var g={},m=[];var b=i.dense?[]:{};var w,C;var E={value:""};var k="",S=0,A;var _=-1,B=-1,T={s:{r:1000000,c:10000000},e:{r:0,c:0}};var y=0;var x={};var I=[],R={},D=0,O=0;var F=[],P=1,N=1;var L=[];var M={Names:[]};var U={};var H=["",""];var W=[],V={};var z="",X=0;var G=false,j=false;var K=0;Up.lastIndex=0;s=s.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");while(w=Up.exec(s)){switch(w[3]=w[3].replace(/_.*$/,"")){case"table":case"":if(w[1]==="/"){if(T.e.c>=T.s.c&&T.e.r>=T.s.r){b["!ref"]=dt(T)}if(i.sheetRows>0&&i.sheetRows<=T.e.r){b["!fullref"]=b["!ref"];T.e.r=i.sheetRows-1;b["!ref"]=dt(T)}if(I.length){b["!merges"]=I}if(F.length){b["!rows"]=F}d.name=d[""]||d.name;if(typeof JSON!=="undefined"){JSON.stringify(d)}m.push(d.name);g[d.name]=b;j=false}else{if(w[0].charAt(w[0].length-2)!=="/"){d=ye(w[0],false);_=B=-1;T.s.r=T.s.c=10000000;T.e.r=T.e.c=0;b=i.dense?[]:{};I=[];F=[];j=true}}break;case"table-row-group":if(w[1]==="/"){--y}else{++y}break;case"table-row":case"":if(w[1]==="/"){_+=P;P=1;break}p=ye(w[0],false);if(p[""]){_=p[""]-1}else{if(_==-1){_=0}}P=+p["number-rows-repeated"]||1;if(P<10){for(K=0;K<P;++K){if(y>0){F[_+K]={level:y}}}}B=-1;break;case"covered-table-cell":++B;if(i.sheetStubs){if(i.dense){if(!b[_]){b[_]=[]}b[_][B]={t:"z"}}else{b[ht({r:_,c:B})]={t:"z"}}}break;case"table-cell":case"":if(w[0].charAt(w[0].length-2)==="/"){++B;E=ye(w[0],false);N=parseInt(E["number-columns-repeated"]||"1",10);C={t:"z",v:null};if(E.formula&&i.cellFormula!=false){C.f=Wh(De(E.formula))}if((E[""]||E["value-type"])=="string"){C.t="s";
C.v=De(E["string-value"]||"");if(i.dense){if(!b[_]){b[_]=[]}b[_][B]=C}else{b[ht({r:_,c:B})]=C}}B+=N-1}else{if(w[1]!=="/"){++B;N=1;var Y=P?_+P-1:_;if(B>T.e.c){T.e.c=B}if(B<T.s.c){T.s.c=B}if(_<T.s.r){T.s.r=_}if(Y>T.e.r){T.e.r=Y}E=ye(w[0],false);W=[];V={};C={t:E[""]||E["value-type"],v:null};if(i.cellFormula){if(E.formula){E.formula=De(E.formula)}if(E["number-matrix-columns-spanned"]&&E["number-matrix-rows-spanned"]){D=parseInt(E["number-matrix-rows-spanned"],10)||0;O=parseInt(E["number-matrix-columns-spanned"],10)||0;R={s:{r:_,c:B},e:{r:_+D-1,c:B+O-1}};C.F=dt(R);L.push([R,C.F])}if(E.formula){C.f=Wh(E.formula)}else{for(K=0;K<L.length;++K){if(_>=L[K][0].s.r&&_<=L[K][0].e.r){if(B>=L[K][0].s.c&&B<=L[K][0].e.c){C.F=L[K][1]}}}}}if(E["number-columns-spanned"]||E["number-rows-spanned"]){D=parseInt(E["number-rows-spanned"],10)||0;O=parseInt(E["number-columns-spanned"],10)||0;R={s:{r:_,c:B},e:{r:_+D-1,c:B+O-1}};I.push(R)}if(E["number-columns-repeated"]){N=parseInt(E["number-columns-repeated"],10)}switch(C.t){case"boolean":C.t="b";C.v=Ve(E["boolean-value"]);break;case"float":C.t="n";C.v=parseFloat(E.value);break;case"percentage":C.t="n";C.v=parseFloat(E.value);break;case"currency":C.t="n";C.v=parseFloat(E.value);break;case"date":C.t="d";C.v=ie(E["date-value"]);if(!i.cellDates){C.t="n";C.v=ee(C.v)}C.z="m/d/yy";break;case"time":C.t="n";C.v=te(E["time-value"])/86400;break;case"number":C.t="n";C.v=parseFloat(E[""]);break;default:if(C.t==="string"||C.t==="text"||!C.t){C.t="s";if(E["string-value"]!=null){k=De(E["string-value"])}}else{throw new Error("Unsupported value type "+C.t)}}}else{G=false;if(C.t==="s"){C.v=k||"";G=S==0}if(U.Target){C.l=U}if(W.length>0){C.c=W;W=[]}if(k&&i.cellText!==false){C.w=k}if(!G||i.sheetStubs){if(!(i.sheetRows&&i.sheetRows<=_)){for(var $=0;$<P;++$){N=parseInt(E["number-columns-repeated"]||"1",10);if(i.dense){if(!b[_+$]){b[_+$]=[]}b[_+$][B]=$==0?C:fe(C);while(--N>0){b[_+$][B+N]=fe(C)}}else{b[ht({r:_+$,c:B})]=C;while(--N>0){b[ht({r:_+$,c:B+N})]=fe(C)}}if(T.e.c<=B){T.e.c=B
}}}}N=parseInt(E["number-columns-repeated"]||"1",10);B+=N-1;N=0;C={};k=""}}U={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":if(w[1]==="/"){if((o=f.pop())[0]!==w[3]){throw"Bad state: "+o}}else{if(w[0].charAt(w[0].length-2)!=="/"){f.push([w[3],true])}}break;case"annotation":if(w[1]==="/"){if((o=f.pop())[0]!==w[3]){throw"Bad state: "+o}V.t=k;V.a=z;W.push(V)}else{if(w[0].charAt(w[0].length-2)!=="/"){f.push([w[3],false])}}z="";X=0;k="";S=0;break;case"creator":if(w[1]==="/"){z=s.slice(X,w.index)}else{X=w.index+w[0].length}break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(w[1]==="/"){if((o=f.pop())[0]!==w[3]){throw"Bad state: "+o}}else{if(w[0].charAt(w[0].length-2)!=="/"){f.push([w[3],false])}}k="";S=0;break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(w[1]==="/"){x[c.name]=h;if((o=f.pop())[0]!==w[3]){throw"Bad state: "+o}}else{if(w[0].charAt(w[0].length-2)!=="/"){h="";c=ye(w[0],false);f.push([w[3],true])}}break;case"script":break;case"libraries":break;case"automatic-styles":break;case"master-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(f[f.length-1][0]){case"time-style":case"date-style":l=ye(w[0],false);h+=r[w[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(f[f.length-1][0]){case"time-style":case"date-style":l=ye(w[0],false);
h+=r[w[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(w[0].slice(-2)==="/>"){break}else{if(w[1]==="/"){switch(f[f.length-1][0]){case"number-style":case"date-style":case"time-style":h+=s.slice(u,w.index);break}}else{u=w.index+w[0].length}}break;case"named-range":l=ye(w[0],false);H=zh(l["cell-range-address"]);var Z={Name:l.name,Ref:H[0]+"!"+H[1]};if(j){Z.Sheet=m.length}M.Names.push(Z);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(w[1]==="/"&&(!E||!E["string-value"])){k=(k.length>0?k+"\n":"")+e(s.slice(S,w.index),A)}else{A=ye(w[0],false);S=w.index+w[0].length}break;case"s":break;case"database-range":if(w[1]==="/"){break}try{H=zh(ye(w[0])["target-range-address"]);g[H[0]]["!autofilter"]={ref:H[1]}}catch(Q){}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;
case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(w[1]!=="/"){U=ye(w[0],false);if(!U.href){break}U.Target=U.href;delete U.href;if(U.Target.charAt(0)=="#"&&U.Target.indexOf(".")>-1){H=zh(U.Target.slice(1));U.Target="#"+H[0]+"!"+H[1]}}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(w[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(i.WTF){throw new Error(w)}}}}var J={Sheets:g,SheetNames:m,Workbook:M};if(i.bookSheets){delete J.Sheets}return J}}();function Mv(e,r){r=r||{};var t=!!ge(e,"objectdata");if(t){Ma(be(e,"META-INF/manifest.xml"),r)}var a=we(e,"content.xml");if(!a){throw new Error("Missing content.xml in "+(t?"ODS":"UOF")+" file")}var n=Lv(t?a:ze(a),r);if(ge(e,"meta.xml")){n.Props=ja(be(e,"meta.xml"))}return n}function Uv(e,r){return Lv(e,r)}var Hv=function(){var e="<office:document-styles "+tr({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+"></office:document-styles>";
return function r(){return Se+e}}();var Wv=function(){var e=function(e){return Pe(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"<text:line-break/>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")};var r="          <table:table-cell />\n";var t="          <table:covered-table-cell/>\n";var a=function(a,n,i){var s=[];s.push('      <table:table table:name="'+Pe(n.SheetNames[i])+'">\n');var f=0,o=0,l=ut(a["!ref"]);var c=a["!merges"]||[],h=0;var u=Array.isArray(a);for(f=0;f<l.s.r;++f){s.push("        <table:table-row></table:table-row>\n")}for(;f<=l.e.r;++f){s.push("        <table:table-row>\n");for(o=0;o<l.s.c;++o){s.push(r)}for(;o<=l.e.c;++o){var d=false,p={},v="";for(h=0;h!=c.length;++h){if(c[h].s.c>o){continue}if(c[h].s.r>f){continue}if(c[h].e.c<o){continue}if(c[h].e.r<f){continue}if(c[h].s.c!=o||c[h].s.r!=f){d=true}p["table:number-columns-spanned"]=c[h].e.c-c[h].s.c+1;p["table:number-rows-spanned"]=c[h].e.r-c[h].s.r+1;break}if(d){s.push(t);continue}var g=ht({r:f,c:o}),m=u?(a[f]||[])[o]:a[g];if(m&&m.f){p["table:formula"]=Pe(Vh(m.f));if(m.F){if(m.F.slice(0,g.length)==g){var b=ut(m.F);p["table:number-matrix-columns-spanned"]=b.e.c-b.s.c+1;p["table:number-matrix-rows-spanned"]=b.e.r-b.s.r+1}}}if(!m){s.push(r);continue}switch(m.t){case"b":v=m.v?"TRUE":"FALSE";p["office:value-type"]="boolean";p["office:boolean-value"]=m.v?"true":"false";break;case"n":v=m.w||String(m.v||0);p["office:value-type"]="float";p["office:value"]=m.v||0;break;case"s":case"str":v=m.v;p["office:value-type"]="string";break;case"d":v=m.w||ie(m.v).toISOString();p["office:value-type"]="date";p["office:date-value"]=ie(m.v).toISOString();p["table:style-name"]="ce1";break;default:s.push(r);continue}var w=e(v);if(m.l&&m.l.Target){var C=m.l.Target;C=C.charAt(0)=="#"?"#"+Xh(C.slice(1)):C;w=ar("text:a",w,{"xlink:href":C})}s.push("          "+ar("table:table-cell",ar("text:p",w,{}),p)+"\n")}s.push("        </table:table-row>\n")}s.push("      </table:table>\n");
return s.join("")};var n=function(e){e.push(" <office:automatic-styles>\n");e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n');e.push('   <number:month number:style="long"/>\n');e.push("   <number:text>/</number:text>\n");e.push('   <number:day number:style="long"/>\n');e.push("   <number:text>/</number:text>\n");e.push("   <number:year/>\n");e.push("  </number:date-style>\n");e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n');e.push(" </office:automatic-styles>\n")};return function i(e,r){var t=[Se];var i=tr({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"});
var s=tr({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});if(r.bookType=="fods"){t.push("<office:document"+i+s+">\n")}else{t.push("<office:document-content"+i+">\n")}n(t);t.push("  <office:body>\n");t.push("    <office:spreadsheet>\n");for(var f=0;f!=e.SheetNames.length;++f){t.push(a(e.Sheets[e.SheetNames[f]],e,f,r))}t.push("    </office:spreadsheet>\n");t.push("  </office:body>\n");if(r.bookType=="fods"){t.push("</office:document>")}else{t.push("</office:document-content>")}return t.join("")}}();function Vv(e,r){if(r.bookType=="fods"){return Wv(e,r)}var t=new Ee;var a="";var n=[];var i=[];a="mimetype";t.file(a,"application/vnd.oasis.opendocument.spreadsheet");a="content.xml";t.file(a,Wv(e,r));n.push([a,"text/xml"]);i.push([a,"ContentFile"]);a="styles.xml";t.file(a,Hv(e,r));n.push([a,"text/xml"]);i.push([a,"StylesFile"]);a="meta.xml";t.file(a,za());n.push([a,"text/xml"]);i.push([a,"MetadataFile"]);a="manifest.rdf";t.file(a,Va(i));n.push([a,"application/rdf+xml"]);a="META-INF/manifest.xml";t.file(a,Ua(n));return t}function zv(e,r){if(!r){return 0}var t=e.SheetNames.indexOf(r);if(t==-1){throw new Error("Sheet not found: "+r)}return t}function Xv(e){return function r(t,a){var n=zv(t,a.sheet);return e.from_sheet(t.Sheets[t.SheetNames[n]],a,t)}}var Gv=Xv(Dv);var jv=Xv({from_sheet:Fg});var Kv=Xv(ef);var Yv=Xv(rf);var $v=Xv(af);var Zv=Xv(jf);var Qv=Xv({from_sheet:Pg});var Jv=Xv(qs);var qv=Xv(tf);function eg(e){return function r(t){for(var a=0;a!=e.length;++a){var n=e[a];if(t[n[0]]===undefined){t[n[0]]=n[1]}if(n[2]==="n"){t[n[0]]=Number(t[n[0]])}}}}var rg=eg([["cellNF",false],["cellHTML",true],["cellFormula",true],["cellStyles",false],["cellText",true],["cellDates",false],["sheetStubs",false],["sheetRows",0,"n"],["bookDeps",false],["bookSheets",false],["bookProps",false],["bookFiles",false],["bookVBA",false],["password",""],["WTF",false]]);var tg=eg([["cellDates",false],["bookSST",false],["bookType","xlsx"],["compression",false],["WTF",false]]);
function ag(e){if(Ra.WS.indexOf(e)>-1){return"sheet"}if(Ra.CS&&e==Ra.CS){return"chart"}if(Ra.DS&&e==Ra.DS){return"dialog"}if(Ra.MS&&e==Ra.MS){return"macro"}return e&&e.length?e:"sheet"}function ng(e,r){if(!e){return 0}try{e=r.map(function a(r){if(!r.id){r.id=r.strRelID}return[r.name,e["!id"][r.id].Target,ag(e["!id"][r.id].Type)]})}catch(t){return null}return !e||e.length===0?null:e}function ig(e,r,t,a,n,i,s,f,o,l,c,h){try{i[a]=Oa(we(e,t,true),r);var u=be(e,r);var d;switch(f){case"sheet":d=hp(u,r,n,o,i[a],l,c,h);break;case"chart":d=up(u,r,n,o,i[a],l,c,h);if(!d||!d["!chart"]){break}var p=ke(d["!chart"].Target,r);var v=Da(p);var g=kl(we(e,p,true),Oa(we(e,v,true),p));var m=ke(g,p);var b=Da(m);d=xd(we(e,m,true),m,o,Oa(we(e,b,true),m),l,d);break;case"macro":d=dp(u,r,n,o,i[a],l,c,h);break;case"dialog":d=pp(u,r,n,o,i[a],l,c,h);break}s[a]=d}catch(w){if(o.WTF){throw w}}}function sg(e){return e.charAt(0)=="/"?e.slice(1):e}function fg(e,r){O(D);r=r||{};rg(r);if(ge(e,"META-INF/manifest.xml")){return Mv(e,r)}if(ge(e,"objectdata.xml")){return Mv(e,r)}if(ge(e,"Index/Document.iwa")){throw new Error("Unsupported NUMBERS file")}var t=Ce(e);var a=Ta(we(e,"[Content_Types].xml"));var n=false;var i,s;if(a.workbooks.length===0){s="xl/workbook.xml";if(be(e,s,true)){a.workbooks.push(s)}}if(a.workbooks.length===0){s="xl/workbook.bin";if(!be(e,s,true)){throw new Error("Could not find workbook")}a.workbooks.push(s);n=true}if(a.workbooks[0].slice(-3)=="bin"){n=true}var f={};var o={};if(!r.bookSheets&&!r.bookProps){Gh=[];if(a.sst){try{Gh=mp(be(e,sg(a.sst)),a.sst,r)}catch(l){if(r.WTF){throw l}}}if(r.cellStyles&&a.themes.length){f=gp(we(e,a.themes[0].replace(/^\//,""),true)||"",a.themes[0],r)}if(a.style){o=vp(be(e,sg(a.style)),a.style,f,r)}}a.links.map(function(t){return Cp(be(e,sg(t)),t,r)});var c=cp(be(e,sg(a.workbooks[0])),a.workbooks[0],r);var h={},u="";if(a.coreprops.length){u=be(e,sg(a.coreprops[0]),true);if(u){h=ja(u)}if(a.extprops.length!==0){u=be(e,sg(a.extprops[0]),true);if(u){qa(u,h,r)}}}var d={};
if(!r.bookSheets||r.bookProps){if(a.custprops.length!==0){u=we(e,sg(a.custprops[0]),true);if(u){d=an(u,r)}}}var p={};if(r.bookSheets||r.bookProps){if(c.Sheets){i=c.Sheets.map(function y(e){return e.name})}else{if(h.Worksheets&&h.SheetNames.length>0){i=h.SheetNames}}if(r.bookProps){p.Props=h;p.Custprops=d}if(r.bookSheets&&typeof i!=="undefined"){p.SheetNames=i}if(r.bookSheets?p.SheetNames:r.bookProps){return p}}i={};var v={};if(r.bookDeps&&a.calcchain){v=wp(be(e,sg(a.calcchain)),a.calcchain,r)}var g=0;var m={};var b,w;var C=c.Sheets;h.Worksheets=C.length;h.SheetNames=[];for(var E=0;E!=C.length;++E){h.SheetNames[E]=C[E].name}var k=n?"bin":"xml";var S=a.workbooks[0].lastIndexOf("/");var A=(a.workbooks[0].slice(0,S+1)+"_rels/"+a.workbooks[0].slice(S+1)+".rels").replace(/^\//,"");if(!ge(e,A)){A="xl/_rels/workbook."+k+".rels"}var _=Oa(we(e,A,true),A);if(_){_=ng(_,c.Sheets)}var B=be(e,"xl/worksheets/sheet.xml",true)?1:0;for(g=0;g!=h.Worksheets;++g){var T="sheet";if(_&&_[g]){b="xl/"+_[g][1].replace(/[\/]?xl\//,"");if(!ge(e,b)){b=_[g][1]}if(!ge(e,b)){b=A.replace(/_rels\/.*$/,"")+_[g][1]}T=_[g][2]}else{b="xl/worksheets/sheet"+(g+1-B)+"."+k;b=b.replace(/sheet0\./,"sheet.")}w=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels");ig(e,b,w,h.SheetNames[g],g,m,i,T,r,c,f,o)}if(a.comments){_l(e,a.comments,i,m,r)}p={Directory:a,Workbook:c,Props:h,Custprops:d,Deps:v,Sheets:i,SheetNames:h.SheetNames,Strings:Gh,Styles:o,Themes:f,SSF:D.get_table()};if(r.bookFiles){p.keys=t;p.files=e.files}if(r.bookVBA){if(a.vba.length>0){p.vbaraw=be(e,sg(a.vba[0]),true)}else{if(a.defaults&&a.defaults.bin===Nl){p.vbaraw=be(e,"xl/vbaProject.bin",true)}}}return p}function og(e,r){var t=r||{};var a="Workbook",n=W.find(e,a);try{a="/!DataSpaces/Version";n=W.find(e,a);if(!n||!n.content){throw new Error("ECMA-376 Encrypted file missing "+a)}_f(n.content);a="/!DataSpaces/DataSpaceMap";n=W.find(e,a);if(!n||!n.content){throw new Error("ECMA-376 Encrypted file missing "+a)}var i=Tf(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage"){throw new Error("ECMA-376 Encrypted file bad "+a)
}a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace";n=W.find(e,a);if(!n||!n.content){throw new Error("ECMA-376 Encrypted file missing "+a)}var s=yf(n.content);if(s.length!=1||s[0]!="StrongEncryptionTransform"){throw new Error("ECMA-376 Encrypted file bad "+a)}a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary";n=W.find(e,a);if(!n||!n.content){throw new Error("ECMA-376 Encrypted file missing "+a)}If(n.content)}catch(f){}a="/EncryptionInfo";n=W.find(e,a);if(!n||!n.content){throw new Error("ECMA-376 Encrypted file missing "+a)}var o=Of(n.content);a="/EncryptedPackage";n=W.find(e,a);if(!n||!n.content){throw new Error("ECMA-376 Encrypted file missing "+a)}if(o[0]==4&&typeof decrypt_agile!=="undefined"){return decrypt_agile(o[1],n.content,t.password||"",t)}if(o[0]==2&&typeof decrypt_std76!=="undefined"){return decrypt_std76(o[1],n.content,t.password||"",t)}throw new Error("File is password-protected")}function lg(e,r){Sl=1024;if(r.bookType=="ods"){return Vv(e,r)}if(e&&!e.SSF){e.SSF=D.get_table()}if(e&&e.SSF){O(D);D.load_table(e.SSF);r.revssf=Z(e.SSF);r.revssf[e.SSF[65535]]=0;r.ssf=e.SSF}r.rels={};r.wbrels={};r.Strings=[];r.Strings.Count=0;r.Strings.Unique=0;if(Kh){r.revStrings=new Map}else{r.revStrings={};r.revStrings.foo=[];delete r.revStrings.foo}var t=r.bookType=="xlsb"?"bin":"xml";var a=Ul.indexOf(r.bookType)>-1;var n=Ba();tg(r=r||{});var i=new Ee;var s="",f=0;r.cellXfs=[];Qh(r.cellXfs,{},{revssf:{General:0}});if(!e.Props){e.Props={}}s="docProps/core.xml";i.file(s,$a(e.Props,r));n.coreprops.push(s);Na(r.rels,2,s,Ra.CORE_PROPS);s="docProps/app.xml";if(e.Props&&e.Props.SheetNames){}else{if(!e.Workbook||!e.Workbook.Sheets){e.Props.SheetNames=e.SheetNames}else{var o=[];for(var l=0;l<e.SheetNames.length;++l){if((e.Workbook.Sheets[l]||{}).Hidden!=2){o.push(e.SheetNames[l])}}e.Props.SheetNames=o}}e.Props.Worksheets=e.Props.SheetNames.length;i.file(s,rn(e.Props,r));n.extprops.push(s);Na(r.rels,3,s,Ra.EXT_PROPS);if(e.Custprops!==e.Props&&j(e.Custprops||{}).length>0){s="docProps/custom.xml";
i.file(s,sn(e.Custprops,r));n.custprops.push(s);Na(r.rels,4,s,Ra.CUST_PROPS)}for(f=1;f<=e.SheetNames.length;++f){var c={"!id":{}};var h=e.Sheets[e.SheetNames[f-1]];var u=(h||{})["!type"]||"sheet";switch(u){case"chart":default:s="xl/worksheets/sheet"+f+"."+t;i.file(s,kp(f-1,s,r,e,c));n.sheets.push(s);Na(r.wbrels,-1,"worksheets/sheet"+f+"."+t,Ra.WS[0])}if(h){var d=h["!comments"];if(d&&d.length>0){var p="xl/comments"+f+"."+t;i.file(p,Bp(d,p,r));n.comments.push(p);Na(c,-1,"../comments"+f+"."+t,Ra.CMNT)}if(h["!legacy"]){i.file("xl/drawings/vmlDrawing"+f+".vml",Al(f,h["!comments"]))}delete h["!comments"];delete h["!legacy"]}if(c["!id"].rId1){i.file(Da(s),Pa(c))}}if(r.Strings!=null&&r.Strings.length>0){s="xl/sharedStrings."+t;i.file(s,_p(r.Strings,s,r));n.strs.push(s);Na(r.wbrels,-1,"sharedStrings."+t,Ra.SST)}s="xl/workbook."+t;i.file(s,Ep(e,s,r));n.workbooks.push(s);Na(r.rels,1,s,Ra.WB);s="xl/theme/theme1.xml";i.file(s,ol(e.Themes,r));n.themes.push(s);Na(r.wbrels,-1,"theme/theme1.xml",Ra.THEME);s="xl/styles."+t;i.file(s,Ap(e,s,r));n.styles.push(s);Na(r.wbrels,-1,"styles."+t,Ra.STY);if(e.vbaraw&&a){s="xl/vbaProject.bin";i.file(s,e.vbaraw);n.vba.push(s);Na(r.wbrels,-1,"vbaProject.bin",Ra.VBA)}i.file("[Content_Types].xml",Ia(n,r));i.file("_rels/.rels",Pa(r.rels));i.file("xl/_rels/workbook."+t+".rels",Pa(r.wbrels));delete r.revssf;delete r.ssf;return i}function cg(e,r){var t="";switch((r||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3]];case"base64":t=m.decode(e.slice(0,24));break;case"binary":t=e;break;case"array":return[e[0],e[1],e[2],e[3]];default:throw new Error("Unrecognized type "+(r&&r.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]}function hg(e,r){if(W.find(e,"EncryptedPackage")){return og(e,r)}return lv(e,r)}function ug(e,r){var t,a=e;var n=r||{};if(!n.type){n.type=b&&Buffer.isBuffer(e)?"buffer":"base64"}switch(n.type){case"base64":t=new Ee(a,{base64:true});break;case"binary":case"array":t=new Ee(a,{base64:false});
break;case"buffer":t=new Ee(a);break;default:throw new Error("Unrecognized type "+n.type)}return fg(t,n)}function dg(e,r){var t=0;e:while(t<e.length){switch(e.charCodeAt(t)){case 10:case 13:case 32:++t;break;case 60:return Wp(e.slice(t),r);default:break e}}return af.to_workbook(e,r)}function pg(e,r){var t="",a=cg(e,r);switch(r.type){case"base64":t=m.decode(e);break;case"binary":t=e;break;case"buffer":t=e.toString("binary");break;case"array":t=se(e);break;default:throw new Error("Unrecognized type "+r.type)}if(a[0]==239&&a[1]==187&&a[2]==191){t=ze(t)}return dg(t,r)}function vg(e,r){var t=e;if(r.type=="base64"){t=m.decode(t)}t=cptable.utils.decode(1200,t.slice(2),"str");r.type="binary";return dg(t,r)}function gg(e){return !e.match(/[^\x00-\x7F]/)?e:Xe(e)}function mg(e,r,t,a){if(a){t.type="string";return af.to_workbook(e,t)}return af.to_workbook(r,t)}function bg(e,r){l();if(typeof ArrayBuffer!=="undefined"&&e instanceof ArrayBuffer){return bg(new Uint8Array(e),r)}var t=e,a=[0,0,0,0],n=false;var i=r||{};jh={};if(i.dateNF){jh.dateNF=i.dateNF}if(!i.type){i.type=b&&Buffer.isBuffer(e)?"buffer":"base64"}if(i.type=="file"){i.type=b?"buffer":"binary";t=G(e)}if(i.type=="string"){n=true;i.type="binary";i.codepage=65001;t=gg(e)}if(i.type=="array"&&typeof Uint8Array!=="undefined"&&e instanceof Uint8Array&&typeof ArrayBuffer!=="undefined"){var s=new ArrayBuffer(3),f=new Uint8Array(s);f.foo="bar";if(!f.foo){i=fe(i);i.type="array";return bg(y(t),i)}}switch((a=cg(t,i))[0]){case 208:return hg(W.read(t,i),i);case 9:return lv(t,i);case 60:return Wp(t,i);case 73:if(a[1]===68){return nf(t,i)}break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76){return rf.to_workbook(t,i)}break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?ug(t,i):mg(e,t,i,n);case 239:return a[3]===60?Wp(t,i):mg(e,t,i,n);case 255:if(a[1]===254){return vg(t,i)}break;case 0:if(a[1]===0&&a[2]>=2&&a[3]===0){return sf.to_workbook(t,i)}break;case 3:case 131:case 139:case 140:return qs.to_workbook(t,i);case 123:if(a[1]===92&&a[2]===114&&a[3]===116){return jf.to_workbook(t,i)
}break;case 10:case 13:case 32:return pg(t,i)}if(a[2]<=12&&a[3]<=31){return qs.to_workbook(t,i)}return mg(e,t,i,n)}function wg(e,r){var t=r||{};t.type="file";return bg(e,t)}function Cg(e,r){switch(r.type){case"base64":case"binary":break;case"buffer":case"array":r.type="";break;case"file":return X(r.file,W.write(e,{type:b?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");default:throw new Error("Unrecognized type "+r.type)}return W.write(e,r)}function Eg(e,r){var t=r||{};var a=lg(e,t);var n={};if(t.compression){n.compression="DEFLATE"}if(t.password){n.type=b?"nodebuffer":"string"}else{switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=b?"nodebuffer":"string";break;default:throw new Error("Unrecognized type "+t.type)}}var i=a.generate(n);if(t.password&&typeof encrypt_agile!=="undefined"){return Cg(encrypt_agile(i,t.password),t)}if(t.type==="file"){return X(t.file,i)}return t.type=="string"?ze(i):i}function kg(e,r){var t=r||{};var a=cv(e,t);return Cg(a,t)}function Sg(e,r,t){if(!t){t=""}var a=t+e;switch(r.type){case"base64":return m.encode(Xe(a));case"binary":return Xe(a);case"string":return e;case"file":return X(r.file,a,"utf8");case"buffer":if(b){return w(a,"utf8")}else{return Sg(a,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}}throw new Error("Unrecognized type "+r.type)}function Ag(e,r){switch(r.type){case"base64":return m.encode(e);case"binary":return e;case"string":return e;case"file":return X(r.file,e,"binary");case"buffer":if(b){return w(e,"binary")}else{return e.split("").map(function(e){return e.charCodeAt(0)})}}throw new Error("Unrecognized type "+r.type)}function _g(e,r){switch(r.type){case"string":case"base64":case"binary":var t="";for(var a=0;a<e.length;++a){t+=String.fromCharCode(e[a])}return r.type=="base64"?m.encode(t):r.type=="string"?ze(t):t;
case"file":return X(r.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+r.type)}}function Bg(e,r){Kd(e);var t=r||{};if(t.type=="array"){t.type="binary";var a=Bg(e,t);t.type="array";return _(a)}switch(t.bookType||"xlsb"){case"xml":case"xlml":return Sg(ev(e,t),t);case"slk":case"sylk":return Sg(Kv(e,t),t);case"htm":case"html":return Sg(Gv(e,t),t);case"txt":return Ag(Qv(e,t),t);case"csv":return Sg(jv(e,t),t,"\ufeff");case"dif":return Sg(Yv(e,t),t);case"dbf":return _g(Jv(e,t),t);case"prn":return Sg($v(e,t),t);case"rtf":return Sg(Zv(e,t),t);case"eth":return Sg(qv(e,t),t);case"fods":return Sg(Vv(e,t),t);case"biff2":if(!t.biff){t.biff=2}case"biff3":if(!t.biff){t.biff=3}case"biff4":if(!t.biff){t.biff=4}return _g(Rv(e,t),t);case"biff5":if(!t.biff){t.biff=5}case"biff8":case"xla":case"xls":if(!t.biff){t.biff=8}return kg(e,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"ods":return Eg(e,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function Tg(e){if(e.bookType){return}var r={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"};var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();if(t.match(/^\.[a-z]+$/)){e.bookType=t.slice(1)}e.bookType=r[e.bookType]||e.bookType}function yg(e,r,t){var a=t||{};a.type="file";a.file=r;Tg(a);return Bg(e,a)}function xg(e,r,t,a){var n=t||{};n.type="file";n.file=e;Tg(n);n.type="buffer";var i=a;if(!(i instanceof Function)){i=t}return V.writeFile(e,Bg(r,n),i)}function Ig(e,r,t,a,n,i,s,f){var o=tt(t);var l=f.defval,c=f.raw||!f.hasOwnProperty("raw");var h=true;var u=n===1?[]:{};if(n!==1){if(Object.defineProperty){try{Object.defineProperty(u,"__rowNum__",{value:t,enumerable:false})}catch(d){u.__rowNum__=t}}else{u.__rowNum__=t}}if(!s||e[t]){for(var p=r.s.c;p<=r.e.c;++p){var v=s?e[t][p]:e[a[p]+o];if(v===undefined||v.t===undefined){if(l===undefined){continue}if(i[p]!=null){u[i[p]]=l}continue}var g=v.v;switch(v.t){case"z":if(g==null){break}continue;case"e":g=void 0;break;case"s":case"d":case"b":case"n":break;
default:throw new Error("unrecognized type "+v.t)}if(i[p]!=null){if(g==null){if(l!==undefined){u[i[p]]=l}else{if(c&&g===null){u[i[p]]=null}else{continue}}}else{u[i[p]]=c?g:gt(v,g,f)}if(g!=null){h=false}}}}return{row:u,isempty:h}}function Rg(e,r){if(e==null||e["!ref"]==null){return[]}var t={t:"n",v:0},a=0,n=1,i=[],s=0,f="";var o={s:{r:0,c:0},e:{r:0,c:0}};var l=r||{};var c=l.range!=null?l.range:e["!ref"];if(l.header===1){a=1}else{if(l.header==="A"){a=2}else{if(Array.isArray(l.header)){a=3}}}switch(typeof c){case"string":o=pt(c);break;case"number":o=pt(e["!ref"]);o.s.r=c;break;default:o=c}if(a>0){n=0}var h=tt(o.s.r);var u=[];var d=[];var p=0,v=0;var g=Array.isArray(e);var m=o.s.r,b=0,w=0;if(g&&!e[m]){e[m]=[]}for(b=o.s.c;b<=o.e.c;++b){u[b]=st(b);t=g?e[m][b]:e[u[b]+h];switch(a){case 1:i[b]=b-o.s.c;break;case 2:i[b]=u[b];break;case 3:i[b]=l.header[b-o.s.c];break;default:if(t==null){t={w:"__EMPTY",t:"s"}}f=s=gt(t,null,l);v=0;for(w=0;w<i.length;++w){if(i[w]==f){f=s+"_"+ ++v}}i[b]=f}}for(m=o.s.r+n;m<=o.e.r;++m){var C=Ig(e,o,m,u,a,i,g,l);if(C.isempty===false||(a===1?l.blankrows!==false:!!l.blankrows)){d[p++]=C.row}}d.length=p;return d}var Dg=/"/g;function Og(e,r,t,a,n,i,s,f){var o=true;var l=[],c="",h=tt(t);for(var u=r.s.c;u<=r.e.c;++u){if(!a[u]){continue}var d=f.dense?(e[t]||[])[u]:e[a[u]+h];if(d==null){c=""}else{if(d.v!=null){o=false;c=""+gt(d,null,f);for(var p=0,v=0;p!==c.length;++p){if((v=c.charCodeAt(p))===n||v===i||v===34){c='"'+c.replace(Dg,'""')+'"';break}}if(c=="ID"){c='"ID"'}}else{if(d.f!=null&&!d.F){o=false;c="="+d.f;if(c.indexOf(",")>=0){c='"'+c.replace(Dg,'""')+'"'}}else{c=""}}}l.push(c)}if(f.blankrows===false&&o){return null}return l.join(s)}function Fg(e,r){var t=[];var a=r==null?{}:r;if(e==null||e["!ref"]==null){return""}var n=pt(e["!ref"]);var i=a.FS!==undefined?a.FS:",",s=i.charCodeAt(0);var f=a.RS!==undefined?a.RS:"\n",o=f.charCodeAt(0);var l=new RegExp((i=="|"?"\\|":i)+"+$");var c="",h=[];a.dense=Array.isArray(e);var u=a.skipHidden&&e["!cols"]||[];var d=a.skipHidden&&e["!rows"]||[];
for(var p=n.s.c;p<=n.e.c;++p){if(!(u[p]||{}).hidden){h[p]=st(p)}}for(var v=n.s.r;v<=n.e.r;++v){if((d[v]||{}).hidden){continue}c=Og(e,n,v,h,s,o,i,a);if(c==null){continue}if(a.strip){c=c.replace(l,"")}t.push(c+f)}delete a.dense;return t.join("")}function Pg(e,r){if(!r){r={}}r.FS="\t";r.RS="\n";var t=Fg(e,r);if(typeof cptable=="undefined"||r.type=="string"){return t}var a=cptable.utils.encode(1200,t,"str");return String.fromCharCode(255)+String.fromCharCode(254)+a}function Ng(e){var r="",t,a="";if(e==null||e["!ref"]==null){return[]}var n=pt(e["!ref"]),i="",s=[],f;var o=[];var l=Array.isArray(e);for(f=n.s.c;f<=n.e.c;++f){s[f]=st(f)}for(var c=n.s.r;c<=n.e.r;++c){i=tt(c);for(f=n.s.c;f<=n.e.c;++f){r=s[f]+i;t=l?(e[c]||[])[f]:e[r];a="";if(t===undefined){continue}else{if(t.F!=null){r=t.F;if(!t.f){continue}a=t.f;if(r.indexOf(":")==-1){r=r+":"+r}}}if(t.f!=null){a=t.f}else{if(t.t=="z"){continue}else{if(t.t=="n"&&t.v!=null){a=""+t.v}else{if(t.t=="b"){a=t.v?"TRUE":"FALSE"}else{if(t.w!==undefined){a="'"+t.w}else{if(t.v===undefined){continue}else{if(t.t=="s"){a="'"+t.v}else{a=""+t.v}}}}}}}o[o.length]=r+"="+a}}return o}function Lg(e,r,t){var a=t||{};var n=+!a.skipHeader;var i=e||{};var s=0,f=0;if(i&&a.origin!=null){if(typeof a.origin=="number"){s=a.origin}else{var o=typeof a.origin=="string"?ct(a.origin):a.origin;s=o.r;f=o.c}}var l;var c={s:{c:0,r:0},e:{c:f,r:s+r.length-1+n}};if(i["!ref"]){var h=pt(i["!ref"]);c.e.c=Math.max(c.e.c,h.e.c);c.e.r=Math.max(c.e.r,h.e.r);if(s==-1){s=c.e.r+1;c.e.r=s+r.length-1+n}}var u=a.header||[],d=0;r.forEach(function(e,r){j(e).forEach(function(t){if((d=u.indexOf(t))==-1){u[d=u.length]=t}var o=e[t];var c="z";var h="";if(o&&typeof o==="object"&&!(o instanceof Date)){i[ht({c:f+d,r:s+r+n})]=o}else{if(typeof o=="number"){c="n"}else{if(typeof o=="boolean"){c="b"}else{if(typeof o=="string"){c="s"}else{if(o instanceof Date){c="d";if(!a.cellDates){c="n";o=ee(o)}h=a.dateNF||D._table[14]}}}}i[ht({c:f+d,r:s+r+n})]=l={t:c,v:o};if(h){l.z=h}}})});c.e.c=Math.max(c.e.c,f+u.length-1);
var p=tt(s);if(n){for(d=0;d<u.length;++d){i[st(d+f)+p]={t:"s",v:u[d]}}}i["!ref"]=dt(c);return i}function Mg(e,r){return Lg(null,e,r)}var Ug={encode_col:st,encode_row:tt,encode_cell:ht,encode_range:dt,decode_col:it,decode_row:rt,split_cell:lt,decode_cell:ct,decode_range:ut,format_cell:gt,get_formulae:Ng,make_csv:Fg,make_json:Rg,make_formulae:Ng,sheet_add_aoa:bt,sheet_add_json:Lg,aoa_to_sheet:wt,json_to_sheet:Mg,table_to_sheet:Ov,table_to_book:Fv,sheet_to_csv:Fg,sheet_to_txt:Pg,sheet_to_json:Rg,sheet_to_html:Dv.from_sheet,sheet_to_dif:rf.from_sheet,sheet_to_slk:ef.from_sheet,sheet_to_eth:tf.from_sheet,sheet_to_formulae:Ng,sheet_to_row_object_array:Rg};(function(e){e.consts=e.consts||{};function r(r){r.forEach(function(r){e.consts[r[0]]=r[1]})}function t(e,r,t){return e[r]!=null?e[r]:e[r]=t}function a(e,r,t){if(typeof r=="string"){return e[r]||(e[r]={t:"z"})}if(typeof r!="number"){return a(e,ht(r))}return a(e,ht({r:r,c:t||0}))}function n(e,r){if(typeof r=="number"){if(r>=0&&e.SheetNames.length>r){return r}throw new Error("Cannot find sheet # "+r)}else{if(typeof r=="string"){var t=e.SheetNames.indexOf(r);if(t>-1){return t}throw new Error("Cannot find sheet name |"+r+"|")}else{throw new Error("Cannot find sheet |"+r+"|")}}}e.book_new=function(){return{SheetNames:[],Sheets:{}}};e.book_append_sheet=function(e,r,t){if(!t){for(var a=1;a<=65535;++a){if(e.SheetNames.indexOf(t="Sheet"+a)==-1){break}}}if(!t){throw new Error("Too many worksheets")}Gd(t);if(e.SheetNames.indexOf(t)>=0){throw new Error("Worksheet with name |"+t+"| already exists!")}e.SheetNames.push(t);e.Sheets[t]=r};e.book_set_sheet_visibility=function(e,r,a){t(e,"Workbook",{});t(e.Workbook,"Sheets",[]);var i=n(e,r);t(e.Workbook.Sheets,i,{});switch(a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}e.Workbook.Sheets[i].Hidden=a};r([["SHEET_VISIBLE",0],["SHEET_HIDDEN",1],["SHEET_VERY_HIDDEN",2]]);e.cell_set_number_format=function(e,r){e.z=r;return e};e.cell_set_hyperlink=function(e,r,t){if(!r){delete e.l
}else{e.l={Target:r};if(t){e.l.Tooltip=t}}return e};e.cell_set_internal_link=function(r,t,a){return e.cell_set_hyperlink(r,"#"+t,a)};e.cell_add_comment=function(e,r,t){if(!e.c){e.c=[]}e.c.push({t:r,a:t||"SheetJS"})};e.sheet_set_array_formula=function(e,r,t){var n=typeof r!="string"?r:pt(r);var i=typeof r=="string"?r:dt(r);for(var s=n.s.r;s<=n.e.r;++s){for(var f=n.s.c;f<=n.e.c;++f){var o=a(e,s,f);o.t="n";o.F=i;delete o.v;if(s==n.s.r&&f==n.s.c){o.f=t}}}return e};return e})(Ug);if(b&&typeof require!="undefined"){(function(){var r={}.Readable;var t=function(e,t){var a=r();var n=t==null?{}:t;if(e==null||e["!ref"]==null){a.push(null);return a}var i=pt(e["!ref"]);var s=n.FS!==undefined?n.FS:",",f=s.charCodeAt(0);var o=n.RS!==undefined?n.RS:"\n",l=o.charCodeAt(0);var c=new RegExp((s=="|"?"\\|":s)+"+$");var h="",u=[];n.dense=Array.isArray(e);var d=n.skipHidden&&e["!cols"]||[];var p=n.skipHidden&&e["!rows"]||[];for(var v=i.s.c;v<=i.e.c;++v){if(!(d[v]||{}).hidden){u[v]=st(v)}}var g=i.s.r;var m=false;a._read=function(){if(!m){m=true;return a.push("\ufeff")}if(g>i.e.r){return a.push(null)}while(g<=i.e.r){++g;if((p[g-1]||{}).hidden){continue}h=Og(e,i,g-1,u,f,l,s,n);if(h!=null){if(n.strip){h=h.replace(c,"")}a.push(h+o);break}}};return a};var a=function(e,t){var a=r();var n=t||{};var i=n.header!=null?n.header:Dv.BEGIN;var s=n.footer!=null?n.footer:Dv.END;a.push(i);var f=ut(e["!ref"]);n.dense=Array.isArray(e);a.push(Dv._preamble(e,f,n));var o=f.s.r;var l=false;a._read=function(){if(o>f.e.r){if(!l){l=true;a.push("</table>"+s)}return a.push(null)}while(o<=f.e.r){a.push(Dv._row(e,f,o,n));++o;break}};return a};var n=function(e,t){var a=r({objectMode:true});if(e==null||e["!ref"]==null){a.push(null);return a}var n={t:"n",v:0},i=0,s=1,f=[],o=0,l="";var c={s:{r:0,c:0},e:{r:0,c:0}};var h=t||{};var u=h.range!=null?h.range:e["!ref"];if(h.header===1){i=1}else{if(h.header==="A"){i=2}else{if(Array.isArray(h.header)){i=3}}}switch(typeof u){case"string":c=pt(u);break;case"number":c=pt(e["!ref"]);c.s.r=u;
break;default:c=u}if(i>0){s=0}var d=tt(c.s.r);var p=[];var v=0;var g=Array.isArray(e);var m=c.s.r,b=0,w=0;if(g&&!e[m]){e[m]=[]}for(b=c.s.c;b<=c.e.c;++b){p[b]=st(b);n=g?e[m][b]:e[p[b]+d];switch(i){case 1:f[b]=b-c.s.c;break;case 2:f[b]=p[b];break;case 3:f[b]=h.header[b-c.s.c];break;default:if(n==null){n={w:"__EMPTY",t:"s"}}l=o=gt(n,null,h);v=0;for(w=0;w<f.length;++w){if(f[w]==l){l=o+"_"+ ++v}}f[b]=l}}m=c.s.r+s;a._read=function(){if(m>c.e.r){return a.push(null)}while(m<=c.e.r){var r=Ig(e,c,m,p,i,f,g,h);++m;if(r.isempty===false||(i===1?h.blankrows!==false:!!h.blankrows)){a.push(r.row);break}}};return a};e.stream={to_json:n,to_html:a,to_csv:t}})()}e.parse_xlscfb=lv;e.parse_ods=Mv;e.parse_fods=Uv;e.write_ods=Vv;e.parse_zip=fg;e.read=bg;e.readFile=wg;e.readFileSync=wg;e.write=Bg;e.writeFile=yg;e.writeFileSync=yg;e.writeFileAsync=xg;e.utils=Ug;e.SSF=D;e.CFB=W}if(typeof exports!=="undefined"){make_xlsx_lib(exports)}else{if(typeof module!=="undefined"&&module.exports){make_xlsx_lib(module.exports)}else{if(typeof define==="function"&&define.amd){define("xlsx",function(){if(!XLSX.version){make_xlsx_lib(XLSX)}return XLSX})}else{make_xlsx_lib(XLSX)}}}var XLS=XLSX,ODS=XLSX;
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(factory((global.echarts={})))}(this,(function(exports){var dev;if(typeof window!=="undefined"){dev=window.__DEV__}else{if(typeof global!=="undefined"){dev=global.__DEV__}}if(typeof dev==="undefined"){dev=true}var __DEV__=dev;var idStart=2311;var guid=function(){return idStart++};var env={};if(typeof wx==="object"&&typeof wx.getSystemInfoSync==="function"){env={browser:{},os:{},node:false,wxa:true,canvasSupported:true,svgSupported:false,touchEventsSupported:true,domSupported:false}}else{if(typeof document==="undefined"&&typeof self!=="undefined"){env={browser:{},os:{},node:false,worker:true,canvasSupported:true,domSupported:false}}else{if(typeof navigator==="undefined"){env={browser:{},os:{},node:true,worker:false,canvasSupported:true,svgSupported:true,domSupported:false}}else{env=detect(navigator.userAgent)}}}var env$1=env;function detect(ua){var os={};var browser={};var firefox=ua.match(/Firefox\/([\d.]+)/);var ie=ua.match(/MSIE\s([\d.]+)/)||ua.match(/Trident\/.+?rv:(([\d.]+))/);var edge=ua.match(/Edge\/([\d.]+)/);var weChat=(/micromessenger/i).test(ua);if(firefox){browser.firefox=true;browser.version=firefox[1]}if(ie){browser.ie=true;browser.version=ie[1]}if(edge){browser.edge=true;browser.version=edge[1]}if(weChat){browser.weChat=true}return{browser:browser,os:os,node:false,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:typeof SVGRect!=="undefined",touchEventsSupported:"ontouchstart" in window&&!browser.ie&&!browser.edge,pointerEventsSupported:"onpointerdown" in window&&(browser.edge||(browser.ie&&browser.version>=11)),domSupported:typeof document!=="undefined"}}var BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1};var TYPED_ARRAY={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1};
var objToString=Object.prototype.toString;var arrayProto=Array.prototype;var nativeForEach=arrayProto.forEach;var nativeFilter=arrayProto.filter;var nativeSlice=arrayProto.slice;var nativeMap=arrayProto.map;var nativeReduce=arrayProto.reduce;var methods={};function $override(name,fn){if(name==="createCanvas"){_ctx=null}methods[name]=fn}function clone(source){if(source==null||typeof source!=="object"){return source}var result=source;var typeStr=objToString.call(source);if(typeStr==="[object Array]"){if(!isPrimitive(source)){result=[];for(var i=0,len=source.length;i<len;i++){result[i]=clone(source[i])}}}else{if(TYPED_ARRAY[typeStr]){if(!isPrimitive(source)){var Ctor=source.constructor;if(source.constructor.from){result=Ctor.from(source)}else{result=new Ctor(source.length);for(var i=0,len=source.length;i<len;i++){result[i]=clone(source[i])}}}}else{if(!BUILTIN_OBJECT[typeStr]&&!isPrimitive(source)&&!isDom(source)){result={};for(var key in source){if(source.hasOwnProperty(key)){result[key]=clone(source[key])}}}}}return result}function merge(target,source,overwrite){if(!isObject$1(source)||!isObject$1(target)){return overwrite?clone(source):target}for(var key in source){if(source.hasOwnProperty(key)){var targetProp=target[key];var sourceProp=source[key];if(isObject$1(sourceProp)&&isObject$1(targetProp)&&!isArray(sourceProp)&&!isArray(targetProp)&&!isDom(sourceProp)&&!isDom(targetProp)&&!isBuiltInObject(sourceProp)&&!isBuiltInObject(targetProp)&&!isPrimitive(sourceProp)&&!isPrimitive(targetProp)){merge(targetProp,sourceProp,overwrite)}else{if(overwrite||!(key in target)){target[key]=clone(source[key],true)}}}}return target}function mergeAll(targetAndSources,overwrite){var result=targetAndSources[0];for(var i=1,len=targetAndSources.length;i<len;i++){result=merge(result,targetAndSources[i],overwrite)}return result}function extend(target,source){for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}return target}function defaults(target,source,overlay){for(var key in source){if(source.hasOwnProperty(key)&&(overlay?source[key]!=null:target[key]==null)){target[key]=source[key]
}}return target}var createCanvas=function(){return methods.createCanvas()};methods.createCanvas=function(){return document.createElement("canvas")};var _ctx;function getContext(){if(!_ctx){_ctx=createCanvas().getContext("2d")}return _ctx}function indexOf(array,value){if(array){if(array.indexOf){return array.indexOf(value)}for(var i=0,len=array.length;i<len;i++){if(array[i]===value){return i}}}return -1}function inherits(clazz,baseClazz){var clazzPrototype=clazz.prototype;function F(){}F.prototype=baseClazz.prototype;clazz.prototype=new F();for(var prop in clazzPrototype){clazz.prototype[prop]=clazzPrototype[prop]}clazz.prototype.constructor=clazz;clazz.superClass=baseClazz}function mixin(target,source,overlay){target="prototype" in target?target.prototype:target;source="prototype" in source?source.prototype:source;defaults(target,source,overlay)}function isArrayLike(data){if(!data){return}if(typeof data==="string"){return false}return typeof data.length==="number"}function each$1(obj,cb,context){if(!(obj&&cb)){return}if(obj.forEach&&obj.forEach===nativeForEach){obj.forEach(cb,context)}else{if(obj.length===+obj.length){for(var i=0,len=obj.length;i<len;i++){cb.call(context,obj[i],i,obj)}}else{for(var key in obj){if(obj.hasOwnProperty(key)){cb.call(context,obj[key],key,obj)}}}}}function map(obj,cb,context){if(!(obj&&cb)){return}if(obj.map&&obj.map===nativeMap){return obj.map(cb,context)}else{var result=[];for(var i=0,len=obj.length;i<len;i++){result.push(cb.call(context,obj[i],i,obj))}return result}}function reduce(obj,cb,memo,context){if(!(obj&&cb)){return}if(obj.reduce&&obj.reduce===nativeReduce){return obj.reduce(cb,memo,context)}else{for(var i=0,len=obj.length;i<len;i++){memo=cb.call(context,memo,obj[i],i,obj)}return memo}}function filter(obj,cb,context){if(!(obj&&cb)){return}if(obj.filter&&obj.filter===nativeFilter){return obj.filter(cb,context)}else{var result=[];for(var i=0,len=obj.length;i<len;i++){if(cb.call(context,obj[i],i,obj)){result.push(obj[i])}}return result
}}function find(obj,cb,context){if(!(obj&&cb)){return}for(var i=0,len=obj.length;i<len;i++){if(cb.call(context,obj[i],i,obj)){return obj[i]}}}function bind(func,context){var args=nativeSlice.call(arguments,2);return function(){return func.apply(context,args.concat(nativeSlice.call(arguments)))}}function curry(func){var args=nativeSlice.call(arguments,1);return function(){return func.apply(this,args.concat(nativeSlice.call(arguments)))}}function isArray(value){return objToString.call(value)==="[object Array]"}function isFunction$1(value){return typeof value==="function"}function isString(value){return objToString.call(value)==="[object String]"}function isObject$1(value){var type=typeof value;return type==="function"||(!!value&&type==="object")}function isBuiltInObject(value){return !!BUILTIN_OBJECT[objToString.call(value)]}function isTypedArray(value){return !!TYPED_ARRAY[objToString.call(value)]}function isDom(value){return typeof value==="object"&&typeof value.nodeType==="number"&&typeof value.ownerDocument==="object"}function eqNaN(value){return value!==value}function retrieve(values){for(var i=0,len=arguments.length;i<len;i++){if(arguments[i]!=null){return arguments[i]}}}function retrieve2(value0,value1){return value0!=null?value0:value1}function retrieve3(value0,value1,value2){return value0!=null?value0:value1!=null?value1:value2}function slice(){return Function.call.apply(nativeSlice,arguments)}function normalizeCssArray(val){if(typeof(val)==="number"){return[val,val,val,val]}var len=val.length;if(len===2){return[val[0],val[1],val[0],val[1]]}else{if(len===3){return[val[0],val[1],val[2],val[1]]}}return val}function assert$1(condition,message){if(!condition){throw new Error(message)}}function trim(str){if(str==null){return null}else{if(typeof str.trim==="function"){return str.trim()}else{return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}}var primitiveKey="__ec_primitive__";function setAsPrimitive(obj){obj[primitiveKey]=true}function isPrimitive(obj){return obj[primitiveKey]
}function HashMap(obj){var isArr=isArray(obj);this.data={};var thisMap=this;(obj instanceof HashMap)?obj.each(visit):(obj&&each$1(obj,visit));function visit(value,key){isArr?thisMap.set(value,key):thisMap.set(key,value)}}HashMap.prototype={constructor:HashMap,get:function(key){return this.data.hasOwnProperty(key)?this.data[key]:null},set:function(key,value){return(this.data[key]=value)},each:function(cb,context){context!==void 0&&(cb=bind(cb,context));for(var key in this.data){this.data.hasOwnProperty(key)&&cb(this.data[key],key)}},removeKey:function(key){delete this.data[key]}};function createHashMap(obj){return new HashMap(obj)}function concatArray(a,b){var newArray=new a.constructor(a.length+b.length);for(var i=0;i<a.length;i++){newArray[i]=a[i]}var offset=a.length;for(i=0;i<b.length;i++){newArray[i+offset]=b[i]}return newArray}function noop(){}var zrUtil=(Object.freeze||Object)({$override:$override,clone:clone,merge:merge,mergeAll:mergeAll,extend:extend,defaults:defaults,createCanvas:createCanvas,getContext:getContext,indexOf:indexOf,inherits:inherits,mixin:mixin,isArrayLike:isArrayLike,each:each$1,map:map,reduce:reduce,filter:filter,find:find,bind:bind,curry:curry,isArray:isArray,isFunction:isFunction$1,isString:isString,isObject:isObject$1,isBuiltInObject:isBuiltInObject,isTypedArray:isTypedArray,isDom:isDom,eqNaN:eqNaN,retrieve:retrieve,retrieve2:retrieve2,retrieve3:retrieve3,slice:slice,normalizeCssArray:normalizeCssArray,assert:assert$1,trim:trim,setAsPrimitive:setAsPrimitive,isPrimitive:isPrimitive,createHashMap:createHashMap,concatArray:concatArray,noop:noop});var ArrayCtor=typeof Float32Array==="undefined"?Array:Float32Array;function create(x,y){var out=new ArrayCtor(2);if(x==null){x=0}if(y==null){y=0}out[0]=x;out[1]=y;return out}function copy(out,v){out[0]=v[0];out[1]=v[1];return out}function clone$1(v){var out=new ArrayCtor(2);out[0]=v[0];out[1]=v[1];return out}function set(out,a,b){out[0]=a;out[1]=b;return out}function add(out,v1,v2){out[0]=v1[0]+v2[0];
out[1]=v1[1]+v2[1];return out}function scaleAndAdd(out,v1,v2,a){out[0]=v1[0]+v2[0]*a;out[1]=v1[1]+v2[1]*a;return out}function sub(out,v1,v2){out[0]=v1[0]-v2[0];out[1]=v1[1]-v2[1];return out}function len(v){return Math.sqrt(lenSquare(v))}var length=len;function lenSquare(v){return v[0]*v[0]+v[1]*v[1]}var lengthSquare=lenSquare;function mul(out,v1,v2){out[0]=v1[0]*v2[0];out[1]=v1[1]*v2[1];return out}function div(out,v1,v2){out[0]=v1[0]/v2[0];out[1]=v1[1]/v2[1];return out}function dot(v1,v2){return v1[0]*v2[0]+v1[1]*v2[1]}function scale(out,v,s){out[0]=v[0]*s;out[1]=v[1]*s;return out}function normalize(out,v){var d=len(v);if(d===0){out[0]=0;out[1]=0}else{out[0]=v[0]/d;out[1]=v[1]/d}return out}function distance(v1,v2){return Math.sqrt((v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1]))}var dist=distance;function distanceSquare(v1,v2){return(v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1])}var distSquare=distanceSquare;function negate(out,v){out[0]=-v[0];out[1]=-v[1];return out}function lerp(out,v1,v2,t){out[0]=v1[0]+t*(v2[0]-v1[0]);out[1]=v1[1]+t*(v2[1]-v1[1]);return out}function applyTransform(out,v,m){var x=v[0];var y=v[1];out[0]=m[0]*x+m[2]*y+m[4];out[1]=m[1]*x+m[3]*y+m[5];return out}function min(out,v1,v2){out[0]=Math.min(v1[0],v2[0]);out[1]=Math.min(v1[1],v2[1]);return out}function max(out,v1,v2){out[0]=Math.max(v1[0],v2[0]);out[1]=Math.max(v1[1],v2[1]);return out}var vector=(Object.freeze||Object)({create:create,copy:copy,clone:clone$1,set:set,add:add,scaleAndAdd:scaleAndAdd,sub:sub,len:len,length:length,lenSquare:lenSquare,lengthSquare:lengthSquare,mul:mul,div:div,dot:dot,scale:scale,normalize:normalize,distance:distance,dist:dist,distanceSquare:distanceSquare,distSquare:distSquare,negate:negate,lerp:lerp,applyTransform:applyTransform,min:min,max:max});function Draggable(){this.on("mousedown",this._dragStart,this);this.on("mousemove",this._drag,this);this.on("mouseup",this._dragEnd,this);this.on("globalout",this._dragEnd,this)}Draggable.prototype={constructor:Draggable,_dragStart:function(e){var draggingTarget=e.target;
if(draggingTarget&&draggingTarget.draggable){this._draggingTarget=draggingTarget;draggingTarget.dragging=true;this._x=e.offsetX;this._y=e.offsetY;this.dispatchToElement(param(draggingTarget,e),"dragstart",e.event)}},_drag:function(e){var draggingTarget=this._draggingTarget;if(draggingTarget){var x=e.offsetX;var y=e.offsetY;var dx=x-this._x;var dy=y-this._y;this._x=x;this._y=y;draggingTarget.drift(dx,dy,e);this.dispatchToElement(param(draggingTarget,e),"drag",e.event);var dropTarget=this.findHover(x,y,draggingTarget).target;var lastDropTarget=this._dropTarget;this._dropTarget=dropTarget;if(draggingTarget!==dropTarget){if(lastDropTarget&&dropTarget!==lastDropTarget){this.dispatchToElement(param(lastDropTarget,e),"dragleave",e.event)}if(dropTarget&&dropTarget!==lastDropTarget){this.dispatchToElement(param(dropTarget,e),"dragenter",e.event)}}}},_dragEnd:function(e){var draggingTarget=this._draggingTarget;if(draggingTarget){draggingTarget.dragging=false}this.dispatchToElement(param(draggingTarget,e),"dragend",e.event);if(this._dropTarget){this.dispatchToElement(param(this._dropTarget,e),"drop",e.event)}this._draggingTarget=null;this._dropTarget=null}};function param(target,e){return{target:target,topTarget:e&&e.topTarget}}var arrySlice=Array.prototype.slice;var Eventful=function(eventProcessor){this._$handlers={};this._$eventProcessor=eventProcessor};Eventful.prototype={constructor:Eventful,one:function(event,query,handler,context){return on(this,event,query,handler,context,true)},on:function(event,query,handler,context){return on(this,event,query,handler,context,false)},isSilent:function(event){var _h=this._$handlers;return !_h[event]||!_h[event].length},off:function(event,handler){var _h=this._$handlers;if(!event){this._$handlers={};return this}if(handler){if(_h[event]){var newList=[];for(var i=0,l=_h[event].length;i<l;i++){if(_h[event][i].h!==handler){newList.push(_h[event][i])}}_h[event]=newList}if(_h[event]&&_h[event].length===0){delete _h[event]}}else{delete _h[event]
}return this},trigger:function(type){var _h=this._$handlers[type];var eventProcessor=this._$eventProcessor;if(_h){var args=arguments;var argLen=args.length;if(argLen>3){args=arrySlice.call(args,1)}var len=_h.length;for(var i=0;i<len;){var hItem=_h[i];if(eventProcessor&&eventProcessor.filter&&hItem.query!=null&&!eventProcessor.filter(type,hItem.query)){i++;continue}switch(argLen){case 1:hItem.h.call(hItem.ctx);break;case 2:hItem.h.call(hItem.ctx,args[1]);break;case 3:hItem.h.call(hItem.ctx,args[1],args[2]);break;default:hItem.h.apply(hItem.ctx,args);break}if(hItem.one){_h.splice(i,1);len--}else{i++}}}eventProcessor&&eventProcessor.afterTrigger&&eventProcessor.afterTrigger(type);return this},triggerWithContext:function(type){var _h=this._$handlers[type];var eventProcessor=this._$eventProcessor;if(_h){var args=arguments;var argLen=args.length;if(argLen>4){args=arrySlice.call(args,1,args.length-1)}var ctx=args[args.length-1];var len=_h.length;for(var i=0;i<len;){var hItem=_h[i];if(eventProcessor&&eventProcessor.filter&&hItem.query!=null&&!eventProcessor.filter(type,hItem.query)){i++;continue}switch(argLen){case 1:hItem.h.call(ctx);break;case 2:hItem.h.call(ctx,args[1]);break;case 3:hItem.h.call(ctx,args[1],args[2]);break;default:hItem.h.apply(ctx,args);break}if(hItem.one){_h.splice(i,1);len--}else{i++}}}eventProcessor&&eventProcessor.afterTrigger&&eventProcessor.afterTrigger(type);return this}};function normalizeQuery(host,query){var eventProcessor=host._$eventProcessor;if(query!=null&&eventProcessor&&eventProcessor.normalizeQuery){query=eventProcessor.normalizeQuery(query)}return query}function on(eventful,event,query,handler,context,isOnce){var _h=eventful._$handlers;if(typeof query==="function"){context=handler;handler=query;query=null}if(!handler||!event){return eventful}query=normalizeQuery(eventful,query);if(!_h[event]){_h[event]=[]}for(var i=0;i<_h[event].length;i++){if(_h[event][i].h===handler){return eventful}}var wrap={h:handler,one:isOnce,query:query,ctx:context||eventful,callAtLast:handler.zrEventfulCallAtLast};
var lastIndex=_h[event].length-1;var lastWrap=_h[event][lastIndex];(lastWrap&&lastWrap.callAtLast)?_h[event].splice(lastIndex,0,wrap):_h[event].push(wrap);return eventful}var isDomLevel2=(typeof window!=="undefined")&&!!window.addEventListener;var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function getBoundingClientRect(el){return el.getBoundingClientRect?el.getBoundingClientRect():{left:0,top:0}}function clientToLocal(el,e,out,calculate){out=out||{};if(calculate||!env$1.canvasSupported){defaultGetZrXY(el,e,out)}else{if(env$1.browser.firefox&&e.layerX!=null&&e.layerX!==e.offsetX){out.zrX=e.layerX;out.zrY=e.layerY}else{if(e.offsetX!=null){out.zrX=e.offsetX;out.zrY=e.offsetY}else{defaultGetZrXY(el,e,out)}}}return out}function defaultGetZrXY(el,e,out){var box=getBoundingClientRect(el);out.zrX=e.clientX-box.left;out.zrY=e.clientY-box.top}function normalizeEvent(el,e,calculate){e=e||window.event;if(e.zrX!=null){return e}var eventType=e.type;var isTouch=eventType&&eventType.indexOf("touch")>=0;if(!isTouch){clientToLocal(el,e,e,calculate);e.zrDelta=(e.wheelDelta)?e.wheelDelta/120:-(e.detail||0)/3}else{var touch=eventType!=="touchend"?e.targetTouches[0]:e.changedTouches[0];touch&&clientToLocal(el,touch,e,calculate)}var button=e.button;if(e.which==null&&button!==undefined&&MOUSE_EVENT_REG.test(e.type)){e.which=(button&1?1:(button&2?3:(button&4?2:0)))}return e}function addEventListener(el,name,handler){if(isDomLevel2){el.addEventListener(name,handler)}else{el.attachEvent("on"+name,handler)}}function removeEventListener(el,name,handler){if(isDomLevel2){el.removeEventListener(name,handler)}else{el.detachEvent("on"+name,handler)}}var stop=isDomLevel2?function(e){e.preventDefault();e.stopPropagation();e.cancelBubble=true}:function(e){e.returnValue=false;e.cancelBubble=true};function isMiddleOrRightButtonOnMouseUpDown(e){return e.which===2||e.which===3}var GestureMgr=function(){this._track=[]};GestureMgr.prototype={constructor:GestureMgr,recognize:function(event,target,root){this._doTrack(event,target,root);
return this._recognize(event)},clear:function(){this._track.length=0;return this},_doTrack:function(event,target,root){var touches=event.touches;if(!touches){return}var trackItem={points:[],touches:[],target:target,event:event};for(var i=0,len=touches.length;i<len;i++){var touch=touches[i];var pos=clientToLocal(root,touch,{});trackItem.points.push([pos.zrX,pos.zrY]);trackItem.touches.push(touch)}this._track.push(trackItem)},_recognize:function(event){for(var eventName in recognizers){if(recognizers.hasOwnProperty(eventName)){var gestureInfo=recognizers[eventName](this._track,event);if(gestureInfo){return gestureInfo}}}}};function dist$1(pointPair){var dx=pointPair[1][0]-pointPair[0][0];var dy=pointPair[1][1]-pointPair[0][1];return Math.sqrt(dx*dx+dy*dy)}function center(pointPair){return[(pointPair[0][0]+pointPair[1][0])/2,(pointPair[0][1]+pointPair[1][1])/2]}var recognizers={pinch:function(track,event){var trackLen=track.length;if(!trackLen){return}var pinchEnd=(track[trackLen-1]||{}).points;var pinchPre=(track[trackLen-2]||{}).points||pinchEnd;if(pinchPre&&pinchPre.length>1&&pinchEnd&&pinchEnd.length>1){var pinchScale=dist$1(pinchEnd)/dist$1(pinchPre);!isFinite(pinchScale)&&(pinchScale=1);event.pinchScale=pinchScale;var pinchCenter=center(pinchEnd);event.pinchX=pinchCenter[0];event.pinchY=pinchCenter[1];return{type:"pinch",target:track[0].target,event:event}}}};var SILENT="silent";function makeEventPacket(eveType,targetInfo,event){return{type:eveType,event:event,target:targetInfo.target,topTarget:targetInfo.topTarget,cancelBubble:false,offsetX:event.zrX,offsetY:event.zrY,gestureEvent:event.gestureEvent,pinchX:event.pinchX,pinchY:event.pinchY,pinchScale:event.pinchScale,wheelDelta:event.zrDelta,zrByTouch:event.zrByTouch,which:event.which,stop:stopEvent}}function stopEvent(event){stop(this.event)}function EmptyProxy(){}EmptyProxy.prototype.dispose=function(){};var handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];
var Handler=function(storage,painter,proxy,painterRoot){Eventful.call(this);this.storage=storage;this.painter=painter;this.painterRoot=painterRoot;proxy=proxy||new EmptyProxy();this.proxy=null;this._hovered={};this._lastTouchMoment;this._lastX;this._lastY;this._gestureMgr;Draggable.call(this);this.setHandlerProxy(proxy)};Handler.prototype={constructor:Handler,setHandlerProxy:function(proxy){if(this.proxy){this.proxy.dispose()}if(proxy){each$1(handlerNames,function(name){proxy.on&&proxy.on(name,this[name],this)},this);proxy.handler=this}this.proxy=proxy},mousemove:function(event){var x=event.zrX;var y=event.zrY;var lastHovered=this._hovered;var lastHoveredTarget=lastHovered.target;if(lastHoveredTarget&&!lastHoveredTarget.__zr){lastHovered=this.findHover(lastHovered.x,lastHovered.y);lastHoveredTarget=lastHovered.target}var hovered=this._hovered=this.findHover(x,y);var hoveredTarget=hovered.target;var proxy=this.proxy;proxy.setCursor&&proxy.setCursor(hoveredTarget?hoveredTarget.cursor:"default");if(lastHoveredTarget&&hoveredTarget!==lastHoveredTarget){this.dispatchToElement(lastHovered,"mouseout",event)}this.dispatchToElement(hovered,"mousemove",event);if(hoveredTarget&&hoveredTarget!==lastHoveredTarget){this.dispatchToElement(hovered,"mouseover",event)}},mouseout:function(event){this.dispatchToElement(this._hovered,"mouseout",event);var element=event.toElement||event.relatedTarget;var innerDom;do{element=element&&element.parentNode}while(element&&element.nodeType!==9&&!(innerDom=element===this.painterRoot));!innerDom&&this.trigger("globalout",{event:event})},resize:function(event){this._hovered={}},dispatch:function(eventName,eventArgs){var handler=this[eventName];handler&&handler.call(this,eventArgs)},dispose:function(){this.proxy.dispose();this.storage=this.proxy=this.painter=null},setCursorStyle:function(cursorStyle){var proxy=this.proxy;proxy.setCursor&&proxy.setCursor(cursorStyle)},dispatchToElement:function(targetInfo,eventName,event){targetInfo=targetInfo||{};var el=targetInfo.target;
if(el&&el.silent){return}var eventHandler="on"+eventName;var eventPacket=makeEventPacket(eventName,targetInfo,event);while(el){el[eventHandler]&&(eventPacket.cancelBubble=el[eventHandler].call(el,eventPacket));el.trigger(eventName,eventPacket);el=el.parent;if(eventPacket.cancelBubble){break}}if(!eventPacket.cancelBubble){this.trigger(eventName,eventPacket);this.painter&&this.painter.eachOtherLayer(function(layer){if(typeof(layer[eventHandler])==="function"){layer[eventHandler].call(layer,eventPacket)}if(layer.trigger){layer.trigger(eventName,eventPacket)}})}},findHover:function(x,y,exclude){var list=this.storage.getDisplayList();var out={x:x,y:y};for(var i=list.length-1;i>=0;i--){var hoverCheckResult;if(list[i]!==exclude&&!list[i].ignore&&(hoverCheckResult=isHover(list[i],x,y))){!out.topTarget&&(out.topTarget=list[i]);if(hoverCheckResult!==SILENT){out.target=list[i];break}}}return out},processGesture:function(event,stage){if(!this._gestureMgr){this._gestureMgr=new GestureMgr()}var gestureMgr=this._gestureMgr;stage==="start"&&gestureMgr.clear();var gestureInfo=gestureMgr.recognize(event,this.findHover(event.zrX,event.zrY,null).target,this.proxy.dom);stage==="end"&&gestureMgr.clear();if(gestureInfo){var type=gestureInfo.type;event.gestureEvent=type;this.dispatchToElement({target:gestureInfo.target},type,gestureInfo.event)}}};each$1(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(name){Handler.prototype[name]=function(event){var hovered=this.findHover(event.zrX,event.zrY);var hoveredTarget=hovered.target;if(name==="mousedown"){this._downEl=hoveredTarget;this._downPoint=[event.zrX,event.zrY];this._upEl=hoveredTarget}else{if(name==="mouseup"){this._upEl=hoveredTarget}else{if(name==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist(this._downPoint,[event.zrX,event.zrY])>4){return}this._downPoint=null}}}this.dispatchToElement(hovered,name,event)}});function isHover(displayable,x,y){if(displayable[displayable.rectHover?"rectContain":"contain"](x,y)){var el=displayable;
var isSilent;while(el){if(el.clipPath&&!el.clipPath.contain(x,y)){return false}if(el.silent){isSilent=true}el=el.parent}return isSilent?SILENT:true}return false}mixin(Handler,Eventful);mixin(Handler,Draggable);var ArrayCtor$1=typeof Float32Array==="undefined"?Array:Float32Array;function create$1(){var out=new ArrayCtor$1(6);identity(out);return out}function identity(out){out[0]=1;out[1]=0;out[2]=0;out[3]=1;out[4]=0;out[5]=0;return out}function copy$1(out,m){out[0]=m[0];out[1]=m[1];out[2]=m[2];out[3]=m[3];out[4]=m[4];out[5]=m[5];return out}function mul$1(out,m1,m2){var out0=m1[0]*m2[0]+m1[2]*m2[1];var out1=m1[1]*m2[0]+m1[3]*m2[1];var out2=m1[0]*m2[2]+m1[2]*m2[3];var out3=m1[1]*m2[2]+m1[3]*m2[3];var out4=m1[0]*m2[4]+m1[2]*m2[5]+m1[4];var out5=m1[1]*m2[4]+m1[3]*m2[5]+m1[5];out[0]=out0;out[1]=out1;out[2]=out2;out[3]=out3;out[4]=out4;out[5]=out5;return out}function translate(out,a,v){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4]+v[0];out[5]=a[5]+v[1];return out}function rotate(out,a,rad){var aa=a[0];var ac=a[2];var atx=a[4];var ab=a[1];var ad=a[3];var aty=a[5];var st=Math.sin(rad);var ct=Math.cos(rad);out[0]=aa*ct+ab*st;out[1]=-aa*st+ab*ct;out[2]=ac*ct+ad*st;out[3]=-ac*st+ct*ad;out[4]=ct*atx+st*aty;out[5]=ct*aty-st*atx;return out}function scale$1(out,a,v){var vx=v[0];var vy=v[1];out[0]=a[0]*vx;out[1]=a[1]*vy;out[2]=a[2]*vx;out[3]=a[3]*vy;out[4]=a[4]*vx;out[5]=a[5]*vy;return out}function invert(out,a){var aa=a[0];var ac=a[2];var atx=a[4];var ab=a[1];var ad=a[3];var aty=a[5];var det=aa*ad-ab*ac;if(!det){return null}det=1/det;out[0]=ad*det;out[1]=-ab*det;out[2]=-ac*det;out[3]=aa*det;out[4]=(ac*aty-ad*atx)*det;out[5]=(ab*atx-aa*aty)*det;return out}function clone$2(a){var b=create$1();copy$1(b,a);return b}var matrix=(Object.freeze||Object)({create:create$1,identity:identity,copy:copy$1,mul:mul$1,translate:translate,rotate:rotate,scale:scale$1,invert:invert,clone:clone$2});var mIdentity=identity;var EPSILON=0.00005;function isNotAroundZero(val){return val>EPSILON||val<-EPSILON
}var Transformable=function(opts){opts=opts||{};if(!opts.position){this.position=[0,0]}if(opts.rotation==null){this.rotation=0}if(!opts.scale){this.scale=[1,1]}this.origin=this.origin||null};var transformableProto=Transformable.prototype;transformableProto.transform=null;transformableProto.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.position[0])||isNotAroundZero(this.position[1])||isNotAroundZero(this.scale[0]-1)||isNotAroundZero(this.scale[1]-1)};var scaleTmp=[];transformableProto.updateTransform=function(){var parent=this.parent;var parentHasTransform=parent&&parent.transform;var needLocalTransform=this.needLocalTransform();var m=this.transform;if(!(needLocalTransform||parentHasTransform)){m&&mIdentity(m);return}m=m||create$1();if(needLocalTransform){this.getLocalTransform(m)}else{mIdentity(m)}if(parentHasTransform){if(needLocalTransform){mul$1(m,parent.transform,m)}else{copy$1(m,parent.transform)}}this.transform=m;var globalScaleRatio=this.globalScaleRatio;if(globalScaleRatio!=null&&globalScaleRatio!==1){this.getGlobalScale(scaleTmp);var relX=scaleTmp[0]<0?-1:1;var relY=scaleTmp[1]<0?-1:1;var sx=((scaleTmp[0]-relX)*globalScaleRatio+relX)/scaleTmp[0]||0;var sy=((scaleTmp[1]-relY)*globalScaleRatio+relY)/scaleTmp[1]||0;m[0]*=sx;m[1]*=sx;m[2]*=sy;m[3]*=sy}this.invTransform=this.invTransform||create$1();invert(this.invTransform,m)};transformableProto.getLocalTransform=function(m){return Transformable.getLocalTransform(this,m)};transformableProto.setTransform=function(ctx){var m=this.transform;var dpr=ctx.dpr||1;if(m){ctx.setTransform(dpr*m[0],dpr*m[1],dpr*m[2],dpr*m[3],dpr*m[4],dpr*m[5])}else{ctx.setTransform(dpr,0,0,dpr,0,0)}};transformableProto.restoreTransform=function(ctx){var dpr=ctx.dpr||1;ctx.setTransform(dpr,0,0,dpr,0,0)};var tmpTransform=[];var originTransform=create$1();transformableProto.setLocalTransform=function(m){if(!m){return}var sx=m[0]*m[0]+m[1]*m[1];var sy=m[2]*m[2]+m[3]*m[3];var position=this.position;var scale$$1=this.scale;
if(isNotAroundZero(sx-1)){sx=Math.sqrt(sx)}if(isNotAroundZero(sy-1)){sy=Math.sqrt(sy)}if(m[0]<0){sx=-sx}if(m[3]<0){sy=-sy}position[0]=m[4];position[1]=m[5];scale$$1[0]=sx;scale$$1[1]=sy;this.rotation=Math.atan2(-m[1]/sy,m[0]/sx)};transformableProto.decomposeTransform=function(){if(!this.transform){return}var parent=this.parent;var m=this.transform;if(parent&&parent.transform){mul$1(tmpTransform,parent.invTransform,m);m=tmpTransform}var origin=this.origin;if(origin&&(origin[0]||origin[1])){originTransform[4]=origin[0];originTransform[5]=origin[1];mul$1(tmpTransform,m,originTransform);tmpTransform[4]-=origin[0];tmpTransform[5]-=origin[1];m=tmpTransform}this.setLocalTransform(m)};transformableProto.getGlobalScale=function(out){var m=this.transform;out=out||[];if(!m){out[0]=1;out[1]=1;return out}out[0]=Math.sqrt(m[0]*m[0]+m[1]*m[1]);out[1]=Math.sqrt(m[2]*m[2]+m[3]*m[3]);if(m[0]<0){out[0]=-out[0]}if(m[3]<0){out[1]=-out[1]}return out};transformableProto.transformCoordToLocal=function(x,y){var v2=[x,y];var invTransform=this.invTransform;if(invTransform){applyTransform(v2,v2,invTransform)}return v2};transformableProto.transformCoordToGlobal=function(x,y){var v2=[x,y];var transform=this.transform;if(transform){applyTransform(v2,v2,transform)}return v2};Transformable.getLocalTransform=function(target,m){m=m||[];mIdentity(m);var origin=target.origin;var scale$$1=target.scale||[1,1];var rotation=target.rotation||0;var position=target.position||[0,0];if(origin){m[4]-=origin[0];m[5]-=origin[1]}scale$1(m,m,scale$$1);if(rotation){rotate(m,m,rotation)}if(origin){m[4]+=origin[0];m[5]+=origin[1]}m[4]+=position[0];m[5]+=position[1];return m};var easing={linear:function(k){return k},quadraticIn:function(k){return k*k},quadraticOut:function(k){return k*(2-k)},quadraticInOut:function(k){if((k*=2)<1){return 0.5*k*k}return -0.5*(--k*(k-2)-1)},cubicIn:function(k){return k*k*k},cubicOut:function(k){return --k*k*k+1},cubicInOut:function(k){if((k*=2)<1){return 0.5*k*k*k}return 0.5*((k-=2)*k*k+2)
},quarticIn:function(k){return k*k*k*k},quarticOut:function(k){return 1-(--k*k*k*k)},quarticInOut:function(k){if((k*=2)<1){return 0.5*k*k*k*k}return -0.5*((k-=2)*k*k*k-2)},quinticIn:function(k){return k*k*k*k*k},quinticOut:function(k){return --k*k*k*k*k+1},quinticInOut:function(k){if((k*=2)<1){return 0.5*k*k*k*k*k}return 0.5*((k-=2)*k*k*k*k+2)},sinusoidalIn:function(k){return 1-Math.cos(k*Math.PI/2)},sinusoidalOut:function(k){return Math.sin(k*Math.PI/2)},sinusoidalInOut:function(k){return 0.5*(1-Math.cos(Math.PI*k))},exponentialIn:function(k){return k===0?0:Math.pow(1024,k-1)},exponentialOut:function(k){return k===1?1:1-Math.pow(2,-10*k)},exponentialInOut:function(k){if(k===0){return 0}if(k===1){return 1}if((k*=2)<1){return 0.5*Math.pow(1024,k-1)}return 0.5*(-Math.pow(2,-10*(k-1))+2)},circularIn:function(k){return 1-Math.sqrt(1-k*k)},circularOut:function(k){return Math.sqrt(1-(--k*k))},circularInOut:function(k){if((k*=2)<1){return -0.5*(Math.sqrt(1-k*k)-1)}return 0.5*(Math.sqrt(1-(k-=2)*k)+1)},elasticIn:function(k){var s;var a=0.1;var p=0.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}return -(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p))},elasticOut:function(k){var s;var a=0.1;var p=0.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}return(a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1)},elasticInOut:function(k){var s;var a=0.1;var p=0.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}if((k*=2)<1){return -0.5*(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p))}return a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*0.5+1},backIn:function(k){var s=1.70158;return k*k*((s+1)*k-s)},backOut:function(k){var s=1.70158;return --k*k*((s+1)*k+s)+1},backInOut:function(k){var s=1.70158*1.525;if((k*=2)<1){return 0.5*(k*k*((s+1)*k-s))}return 0.5*((k-=2)*k*((s+1)*k+s)+2)},bounceIn:function(k){return 1-easing.bounceOut(1-k)
},bounceOut:function(k){if(k<(1/2.75)){return 7.5625*k*k}else{if(k<(2/2.75)){return 7.5625*(k-=(1.5/2.75))*k+0.75}else{if(k<(2.5/2.75)){return 7.5625*(k-=(2.25/2.75))*k+0.9375}else{return 7.5625*(k-=(2.625/2.75))*k+0.984375}}}},bounceInOut:function(k){if(k<0.5){return easing.bounceIn(k*2)*0.5}return easing.bounceOut(k*2-1)*0.5+0.5}};function Clip(options){this._target=options.target;this._life=options.life||1000;this._delay=options.delay||0;this._initialized=false;this.loop=options.loop==null?false:options.loop;this.gap=options.gap||0;this.easing=options.easing||"Linear";this.onframe=options.onframe;this.ondestroy=options.ondestroy;this.onrestart=options.onrestart;this._pausedTime=0;this._paused=false}Clip.prototype={constructor:Clip,step:function(globalTime,deltaTime){if(!this._initialized){this._startTime=globalTime+this._delay;this._initialized=true}if(this._paused){this._pausedTime+=deltaTime;return}var percent=(globalTime-this._startTime-this._pausedTime)/this._life;if(percent<0){return}percent=Math.min(percent,1);var easing$$1=this.easing;var easingFunc=typeof easing$$1==="string"?easing[easing$$1]:easing$$1;var schedule=typeof easingFunc==="function"?easingFunc(percent):percent;this.fire("frame",schedule);if(percent===1){if(this.loop){this.restart(globalTime);return"restart"}this._needsRemove=true;return"destroy"}return null},restart:function(globalTime){var remainder=(globalTime-this._startTime-this._pausedTime)%this._life;this._startTime=globalTime-remainder+this.gap;this._pausedTime=0;this._needsRemove=false},fire:function(eventType,arg){eventType="on"+eventType;if(this[eventType]){this[eventType](this._target,arg)}},pause:function(){this._paused=true},resume:function(){this._paused=false}};var LinkedList=function(){this.head=null;this.tail=null;this._len=0};var linkedListProto=LinkedList.prototype;linkedListProto.insert=function(val){var entry=new Entry(val);this.insertEntry(entry);return entry};linkedListProto.insertEntry=function(entry){if(!this.head){this.head=this.tail=entry
}else{this.tail.next=entry;entry.prev=this.tail;entry.next=null;this.tail=entry}this._len++};linkedListProto.remove=function(entry){var prev=entry.prev;var next=entry.next;if(prev){prev.next=next}else{this.head=next}if(next){next.prev=prev}else{this.tail=prev}entry.next=entry.prev=null;this._len--};linkedListProto.len=function(){return this._len};linkedListProto.clear=function(){this.head=this.tail=null;this._len=0};var Entry=function(val){this.value=val;this.next;this.prev};var LRU=function(maxSize){this._list=new LinkedList();this._map={};this._maxSize=maxSize||10;this._lastRemovedEntry=null};var LRUProto=LRU.prototype;LRUProto.put=function(key,value){var list=this._list;var map=this._map;var removed=null;if(map[key]==null){var len=list.len();var entry=this._lastRemovedEntry;if(len>=this._maxSize&&len>0){var leastUsedEntry=list.head;list.remove(leastUsedEntry);delete map[leastUsedEntry.key];removed=leastUsedEntry.value;this._lastRemovedEntry=leastUsedEntry}if(entry){entry.value=value}else{entry=new Entry(value)}entry.key=key;list.insertEntry(entry);map[key]=entry}return removed};LRUProto.get=function(key){var entry=this._map[key];var list=this._list;if(entry!=null){if(entry!==list.tail){list.remove(entry);list.insertEntry(entry)}return entry.value}};LRUProto.clear=function(){this._list.clear();this._map={}};var kCSSColorTable={"transparent":[0,0,0,0],"aliceblue":[240,248,255,1],"antiquewhite":[250,235,215,1],"aqua":[0,255,255,1],"aquamarine":[127,255,212,1],"azure":[240,255,255,1],"beige":[245,245,220,1],"bisque":[255,228,196,1],"black":[0,0,0,1],"blanchedalmond":[255,235,205,1],"blue":[0,0,255,1],"blueviolet":[138,43,226,1],"brown":[165,42,42,1],"burlywood":[222,184,135,1],"cadetblue":[95,158,160,1],"chartreuse":[127,255,0,1],"chocolate":[210,105,30,1],"coral":[255,127,80,1],"cornflowerblue":[100,149,237,1],"cornsilk":[255,248,220,1],"crimson":[220,20,60,1],"cyan":[0,255,255,1],"darkblue":[0,0,139,1],"darkcyan":[0,139,139,1],"darkgoldenrod":[184,134,11,1],"darkgray":[169,169,169,1],"darkgreen":[0,100,0,1],"darkgrey":[169,169,169,1],"darkkhaki":[189,183,107,1],"darkmagenta":[139,0,139,1],"darkolivegreen":[85,107,47,1],"darkorange":[255,140,0,1],"darkorchid":[153,50,204,1],"darkred":[139,0,0,1],"darksalmon":[233,150,122,1],"darkseagreen":[143,188,143,1],"darkslateblue":[72,61,139,1],"darkslategray":[47,79,79,1],"darkslategrey":[47,79,79,1],"darkturquoise":[0,206,209,1],"darkviolet":[148,0,211,1],"deeppink":[255,20,147,1],"deepskyblue":[0,191,255,1],"dimgray":[105,105,105,1],"dimgrey":[105,105,105,1],"dodgerblue":[30,144,255,1],"firebrick":[178,34,34,1],"floralwhite":[255,250,240,1],"forestgreen":[34,139,34,1],"fuchsia":[255,0,255,1],"gainsboro":[220,220,220,1],"ghostwhite":[248,248,255,1],"gold":[255,215,0,1],"goldenrod":[218,165,32,1],"gray":[128,128,128,1],"green":[0,128,0,1],"greenyellow":[173,255,47,1],"grey":[128,128,128,1],"honeydew":[240,255,240,1],"hotpink":[255,105,180,1],"indianred":[205,92,92,1],"indigo":[75,0,130,1],"ivory":[255,255,240,1],"khaki":[240,230,140,1],"lavender":[230,230,250,1],"lavenderblush":[255,240,245,1],"lawngreen":[124,252,0,1],"lemonchiffon":[255,250,205,1],"lightblue":[173,216,230,1],"lightcoral":[240,128,128,1],"lightcyan":[224,255,255,1],"lightgoldenrodyellow":[250,250,210,1],"lightgray":[211,211,211,1],"lightgreen":[144,238,144,1],"lightgrey":[211,211,211,1],"lightpink":[255,182,193,1],"lightsalmon":[255,160,122,1],"lightseagreen":[32,178,170,1],"lightskyblue":[135,206,250,1],"lightslategray":[119,136,153,1],"lightslategrey":[119,136,153,1],"lightsteelblue":[176,196,222,1],"lightyellow":[255,255,224,1],"lime":[0,255,0,1],"limegreen":[50,205,50,1],"linen":[250,240,230,1],"magenta":[255,0,255,1],"maroon":[128,0,0,1],"mediumaquamarine":[102,205,170,1],"mediumblue":[0,0,205,1],"mediumorchid":[186,85,211,1],"mediumpurple":[147,112,219,1],"mediumseagreen":[60,179,113,1],"mediumslateblue":[123,104,238,1],"mediumspringgreen":[0,250,154,1],"mediumturquoise":[72,209,204,1],"mediumvioletred":[199,21,133,1],"midnightblue":[25,25,112,1],"mintcream":[245,255,250,1],"mistyrose":[255,228,225,1],"moccasin":[255,228,181,1],"navajowhite":[255,222,173,1],"navy":[0,0,128,1],"oldlace":[253,245,230,1],"olive":[128,128,0,1],"olivedrab":[107,142,35,1],"orange":[255,165,0,1],"orangered":[255,69,0,1],"orchid":[218,112,214,1],"palegoldenrod":[238,232,170,1],"palegreen":[152,251,152,1],"paleturquoise":[175,238,238,1],"palevioletred":[219,112,147,1],"papayawhip":[255,239,213,1],"peachpuff":[255,218,185,1],"peru":[205,133,63,1],"pink":[255,192,203,1],"plum":[221,160,221,1],"powderblue":[176,224,230,1],"purple":[128,0,128,1],"red":[255,0,0,1],"rosybrown":[188,143,143,1],"royalblue":[65,105,225,1],"saddlebrown":[139,69,19,1],"salmon":[250,128,114,1],"sandybrown":[244,164,96,1],"seagreen":[46,139,87,1],"seashell":[255,245,238,1],"sienna":[160,82,45,1],"silver":[192,192,192,1],"skyblue":[135,206,235,1],"slateblue":[106,90,205,1],"slategray":[112,128,144,1],"slategrey":[112,128,144,1],"snow":[255,250,250,1],"springgreen":[0,255,127,1],"steelblue":[70,130,180,1],"tan":[210,180,140,1],"teal":[0,128,128,1],"thistle":[216,191,216,1],"tomato":[255,99,71,1],"turquoise":[64,224,208,1],"violet":[238,130,238,1],"wheat":[245,222,179,1],"white":[255,255,255,1],"whitesmoke":[245,245,245,1],"yellow":[255,255,0,1],"yellowgreen":[154,205,50,1]};
function clampCssByte(i){i=Math.round(i);return i<0?0:i>255?255:i}function clampCssAngle(i){i=Math.round(i);return i<0?0:i>360?360:i}function clampCssFloat(f){return f<0?0:f>1?1:f}function parseCssInt(str){if(str.length&&str.charAt(str.length-1)==="%"){return clampCssByte(parseFloat(str)/100*255)}return clampCssByte(parseInt(str,10))}function parseCssFloat(str){if(str.length&&str.charAt(str.length-1)==="%"){return clampCssFloat(parseFloat(str)/100)}return clampCssFloat(parseFloat(str))}function cssHueToRgb(m1,m2,h){if(h<0){h+=1}else{if(h>1){h-=1}}if(h*6<1){return m1+(m2-m1)*h*6}if(h*2<1){return m2}if(h*3<2){return m1+(m2-m1)*(2/3-h)*6}return m1}function lerpNumber(a,b,p){return a+(b-a)*p}function setRgba(out,r,g,b,a){out[0]=r;out[1]=g;out[2]=b;out[3]=a;return out}function copyRgba(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}var colorCache=new LRU(20);var lastRemovedArr=null;function putToCache(colorStr,rgbaArr){if(lastRemovedArr){copyRgba(lastRemovedArr,rgbaArr)}lastRemovedArr=colorCache.put(colorStr,lastRemovedArr||(rgbaArr.slice()))}function parse(colorStr,rgbaArr){if(!colorStr){return}rgbaArr=rgbaArr||[];var cached=colorCache.get(colorStr);if(cached){return copyRgba(rgbaArr,cached)}colorStr=colorStr+"";var str=colorStr.replace(/ /g,"").toLowerCase();if(str in kCSSColorTable){copyRgba(rgbaArr,kCSSColorTable[str]);putToCache(colorStr,rgbaArr);return rgbaArr}if(str.charAt(0)==="#"){if(str.length===4){var iv=parseInt(str.substr(1),16);if(!(iv>=0&&iv<=4095)){setRgba(rgbaArr,0,0,0,1);return}setRgba(rgbaArr,((iv&3840)>>4)|((iv&3840)>>8),(iv&240)|((iv&240)>>4),(iv&15)|((iv&15)<<4),1);putToCache(colorStr,rgbaArr);return rgbaArr}else{if(str.length===7){var iv=parseInt(str.substr(1),16);if(!(iv>=0&&iv<=16777215)){setRgba(rgbaArr,0,0,0,1);return}setRgba(rgbaArr,(iv&16711680)>>16,(iv&65280)>>8,iv&255,1);putToCache(colorStr,rgbaArr);return rgbaArr}}return}var op=str.indexOf("(");var ep=str.indexOf(")");if(op!==-1&&ep+1===str.length){var fname=str.substr(0,op);
var params=str.substr(op+1,ep-(op+1)).split(",");var alpha=1;switch(fname){case"rgba":if(params.length!==4){setRgba(rgbaArr,0,0,0,1);return}alpha=parseCssFloat(params.pop());case"rgb":if(params.length!==3){setRgba(rgbaArr,0,0,0,1);return}setRgba(rgbaArr,parseCssInt(params[0]),parseCssInt(params[1]),parseCssInt(params[2]),alpha);putToCache(colorStr,rgbaArr);return rgbaArr;case"hsla":if(params.length!==4){setRgba(rgbaArr,0,0,0,1);return}params[3]=parseCssFloat(params[3]);hsla2rgba(params,rgbaArr);putToCache(colorStr,rgbaArr);return rgbaArr;case"hsl":if(params.length!==3){setRgba(rgbaArr,0,0,0,1);return}hsla2rgba(params,rgbaArr);putToCache(colorStr,rgbaArr);return rgbaArr;default:return}}setRgba(rgbaArr,0,0,0,1);return}function hsla2rgba(hsla,rgba){var h=(((parseFloat(hsla[0])%360)+360)%360)/360;var s=parseCssFloat(hsla[1]);var l=parseCssFloat(hsla[2]);var m2=l<=0.5?l*(s+1):l+s-l*s;var m1=l*2-m2;rgba=rgba||[];setRgba(rgba,clampCssByte(cssHueToRgb(m1,m2,h+1/3)*255),clampCssByte(cssHueToRgb(m1,m2,h)*255),clampCssByte(cssHueToRgb(m1,m2,h-1/3)*255),1);if(hsla.length===4){rgba[3]=hsla[3]}return rgba}function rgba2hsla(rgba){if(!rgba){return}var R=rgba[0]/255;var G=rgba[1]/255;var B=rgba[2]/255;var vMin=Math.min(R,G,B);var vMax=Math.max(R,G,B);var delta=vMax-vMin;var L=(vMax+vMin)/2;var H;var S;if(delta===0){H=0;S=0}else{if(L<0.5){S=delta/(vMax+vMin)}else{S=delta/(2-vMax-vMin)}var deltaR=(((vMax-R)/6)+(delta/2))/delta;var deltaG=(((vMax-G)/6)+(delta/2))/delta;var deltaB=(((vMax-B)/6)+(delta/2))/delta;if(R===vMax){H=deltaB-deltaG}else{if(G===vMax){H=(1/3)+deltaR-deltaB}else{if(B===vMax){H=(2/3)+deltaG-deltaR}}}if(H<0){H+=1}if(H>1){H-=1}}var hsla=[H*360,S,L];if(rgba[3]!=null){hsla.push(rgba[3])}return hsla}function lift(color,level){var colorArr=parse(color);if(colorArr){for(var i=0;i<3;i++){if(level<0){colorArr[i]=colorArr[i]*(1-level)|0}else{colorArr[i]=((255-colorArr[i])*level+colorArr[i])|0}if(colorArr[i]>255){colorArr[i]=255}else{if(color[i]<0){colorArr[i]=0}}}return stringify(colorArr,colorArr.length===4?"rgba":"rgb")
}}function toHex(color){var colorArr=parse(color);if(colorArr){return((1<<24)+(colorArr[0]<<16)+(colorArr[1]<<8)+(+colorArr[2])).toString(16).slice(1)}}function fastLerp(normalizedValue,colors,out){if(!(colors&&colors.length)||!(normalizedValue>=0&&normalizedValue<=1)){return}out=out||[];var value=normalizedValue*(colors.length-1);var leftIndex=Math.floor(value);var rightIndex=Math.ceil(value);var leftColor=colors[leftIndex];var rightColor=colors[rightIndex];var dv=value-leftIndex;out[0]=clampCssByte(lerpNumber(leftColor[0],rightColor[0],dv));out[1]=clampCssByte(lerpNumber(leftColor[1],rightColor[1],dv));out[2]=clampCssByte(lerpNumber(leftColor[2],rightColor[2],dv));out[3]=clampCssFloat(lerpNumber(leftColor[3],rightColor[3],dv));return out}var fastMapToColor=fastLerp;function lerp$1(normalizedValue,colors,fullOutput){if(!(colors&&colors.length)||!(normalizedValue>=0&&normalizedValue<=1)){return}var value=normalizedValue*(colors.length-1);var leftIndex=Math.floor(value);var rightIndex=Math.ceil(value);var leftColor=parse(colors[leftIndex]);var rightColor=parse(colors[rightIndex]);var dv=value-leftIndex;var color=stringify([clampCssByte(lerpNumber(leftColor[0],rightColor[0],dv)),clampCssByte(lerpNumber(leftColor[1],rightColor[1],dv)),clampCssByte(lerpNumber(leftColor[2],rightColor[2],dv)),clampCssFloat(lerpNumber(leftColor[3],rightColor[3],dv))],"rgba");return fullOutput?{color:color,leftIndex:leftIndex,rightIndex:rightIndex,value:value}:color}var mapToColor=lerp$1;function modifyHSL(color,h,s,l){color=parse(color);if(color){color=rgba2hsla(color);h!=null&&(color[0]=clampCssAngle(h));s!=null&&(color[1]=parseCssFloat(s));l!=null&&(color[2]=parseCssFloat(l));return stringify(hsla2rgba(color),"rgba")}}function modifyAlpha(color,alpha){color=parse(color);if(color&&alpha!=null){color[3]=clampCssFloat(alpha);return stringify(color,"rgba")}}function stringify(arrColor,type){if(!arrColor||!arrColor.length){return}var colorStr=arrColor[0]+","+arrColor[1]+","+arrColor[2];if(type==="rgba"||type==="hsva"||type==="hsla"){colorStr+=","+arrColor[3]
}return type+"("+colorStr+")"}var color=(Object.freeze||Object)({parse:parse,lift:lift,toHex:toHex,fastLerp:fastLerp,fastMapToColor:fastMapToColor,lerp:lerp$1,mapToColor:mapToColor,modifyHSL:modifyHSL,modifyAlpha:modifyAlpha,stringify:stringify});var arraySlice=Array.prototype.slice;function defaultGetter(target,key){return target[key]}function defaultSetter(target,key,value){target[key]=value}function interpolateNumber(p0,p1,percent){return(p1-p0)*percent+p0}function interpolateString(p0,p1,percent){return percent>0.5?p1:p0}function interpolateArray(p0,p1,percent,out,arrDim){var len=p0.length;if(arrDim===1){for(var i=0;i<len;i++){out[i]=interpolateNumber(p0[i],p1[i],percent)}}else{var len2=len&&p0[0].length;for(var i=0;i<len;i++){for(var j=0;j<len2;j++){out[i][j]=interpolateNumber(p0[i][j],p1[i][j],percent)}}}}function fillArr(arr0,arr1,arrDim){var arr0Len=arr0.length;var arr1Len=arr1.length;if(arr0Len!==arr1Len){var isPreviousLarger=arr0Len>arr1Len;if(isPreviousLarger){arr0.length=arr1Len}else{for(var i=arr0Len;i<arr1Len;i++){arr0.push(arrDim===1?arr1[i]:arraySlice.call(arr1[i]))}}}var len2=arr0[0]&&arr0[0].length;for(var i=0;i<arr0.length;i++){if(arrDim===1){if(isNaN(arr0[i])){arr0[i]=arr1[i]}}else{for(var j=0;j<len2;j++){if(isNaN(arr0[i][j])){arr0[i][j]=arr1[i][j]}}}}}function isArraySame(arr0,arr1,arrDim){if(arr0===arr1){return true}var len=arr0.length;if(len!==arr1.length){return false}if(arrDim===1){for(var i=0;i<len;i++){if(arr0[i]!==arr1[i]){return false}}}else{var len2=arr0[0].length;for(var i=0;i<len;i++){for(var j=0;j<len2;j++){if(arr0[i][j]!==arr1[i][j]){return false}}}}return true}function catmullRomInterpolateArray(p0,p1,p2,p3,t,t2,t3,out,arrDim){var len=p0.length;if(arrDim===1){for(var i=0;i<len;i++){out[i]=catmullRomInterpolate(p0[i],p1[i],p2[i],p3[i],t,t2,t3)}}else{var len2=p0[0].length;for(var i=0;i<len;i++){for(var j=0;j<len2;j++){out[i][j]=catmullRomInterpolate(p0[i][j],p1[i][j],p2[i][j],p3[i][j],t,t2,t3)}}}}function catmullRomInterpolate(p0,p1,p2,p3,t,t2,t3){var v0=(p2-p0)*0.5;
var v1=(p3-p1)*0.5;return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}function cloneValue(value){if(isArrayLike(value)){var len=value.length;if(isArrayLike(value[0])){var ret=[];for(var i=0;i<len;i++){ret.push(arraySlice.call(value[i]))}return ret}return arraySlice.call(value)}return value}function rgba2String(rgba){rgba[0]=Math.floor(rgba[0]);rgba[1]=Math.floor(rgba[1]);rgba[2]=Math.floor(rgba[2]);return"rgba("+rgba.join(",")+")"}function getArrayDim(keyframes){var lastValue=keyframes[keyframes.length-1].value;return isArrayLike(lastValue&&lastValue[0])?2:1}function createTrackClip(animator,easing,oneTrackDone,keyframes,propName,forceAnimate){var getter=animator._getter;var setter=animator._setter;var useSpline=easing==="spline";var trackLen=keyframes.length;if(!trackLen){return}var firstVal=keyframes[0].value;var isValueArray=isArrayLike(firstVal);var isValueColor=false;var isValueString=false;var arrDim=isValueArray?getArrayDim(keyframes):0;var trackMaxTime;keyframes.sort(function(a,b){return a.time-b.time});trackMaxTime=keyframes[trackLen-1].time;var kfPercents=[];var kfValues=[];var prevValue=keyframes[0].value;var isAllValueEqual=true;for(var i=0;i<trackLen;i++){kfPercents.push(keyframes[i].time/trackMaxTime);var value=keyframes[i].value;if(!((isValueArray&&isArraySame(value,prevValue,arrDim))||(!isValueArray&&value===prevValue))){isAllValueEqual=false}prevValue=value;if(typeof value==="string"){var colorArray=parse(value);if(colorArray){value=colorArray;isValueColor=true}else{isValueString=true}}kfValues.push(value)}if(!forceAnimate&&isAllValueEqual){return}var lastValue=kfValues[trackLen-1];for(var i=0;i<trackLen-1;i++){if(isValueArray){fillArr(kfValues[i],lastValue,arrDim)}else{if(isNaN(kfValues[i])&&!isNaN(lastValue)&&!isValueString&&!isValueColor){kfValues[i]=lastValue}}}isValueArray&&fillArr(getter(animator._target,propName),lastValue,arrDim);var lastFrame=0;var lastFramePercent=0;var start;var w;var p0;var p1;var p2;var p3;if(isValueColor){var rgba=[0,0,0,0]
}var onframe=function(target,percent){var frame;if(percent<0){frame=0}else{if(percent<lastFramePercent){start=Math.min(lastFrame+1,trackLen-1);for(frame=start;frame>=0;frame--){if(kfPercents[frame]<=percent){break}}frame=Math.min(frame,trackLen-2)}else{for(frame=lastFrame;frame<trackLen;frame++){if(kfPercents[frame]>percent){break}}frame=Math.min(frame-1,trackLen-2)}}lastFrame=frame;lastFramePercent=percent;var range=(kfPercents[frame+1]-kfPercents[frame]);if(range===0){return}else{w=(percent-kfPercents[frame])/range}if(useSpline){p1=kfValues[frame];p0=kfValues[frame===0?frame:frame-1];p2=kfValues[frame>trackLen-2?trackLen-1:frame+1];p3=kfValues[frame>trackLen-3?trackLen-1:frame+2];if(isValueArray){catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,getter(target,propName),arrDim)}else{var value;if(isValueColor){value=catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,rgba,1);value=rgba2String(rgba)}else{if(isValueString){return interpolateString(p1,p2,w)}else{value=catmullRomInterpolate(p0,p1,p2,p3,w,w*w,w*w*w)}}setter(target,propName,value)}}else{if(isValueArray){interpolateArray(kfValues[frame],kfValues[frame+1],w,getter(target,propName),arrDim)}else{var value;if(isValueColor){interpolateArray(kfValues[frame],kfValues[frame+1],w,rgba,1);value=rgba2String(rgba)}else{if(isValueString){return interpolateString(kfValues[frame],kfValues[frame+1],w)}else{value=interpolateNumber(kfValues[frame],kfValues[frame+1],w)}}setter(target,propName,value)}}};var clip=new Clip({target:animator._target,life:trackMaxTime,loop:animator._loop,delay:animator._delay,onframe:onframe,ondestroy:oneTrackDone});if(easing&&easing!=="spline"){clip.easing=easing}return clip}var Animator=function(target,loop,getter,setter){this._tracks={};this._target=target;this._loop=loop||false;this._getter=getter||defaultGetter;this._setter=setter||defaultSetter;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[]};Animator.prototype={when:function(time,props){var tracks=this._tracks;
for(var propName in props){if(!props.hasOwnProperty(propName)){continue}if(!tracks[propName]){tracks[propName]=[];var value=this._getter(this._target,propName);if(value==null){continue}if(time!==0){tracks[propName].push({time:0,value:cloneValue(value)})}}tracks[propName].push({time:time,value:props[propName]})}return this},during:function(callback){this._onframeList.push(callback);return this},pause:function(){for(var i=0;i<this._clipList.length;i++){this._clipList[i].pause()}this._paused=true},resume:function(){for(var i=0;i<this._clipList.length;i++){this._clipList[i].resume()}this._paused=false},isPaused:function(){return !!this._paused},_doneCallback:function(){this._tracks={};this._clipList.length=0;var doneList=this._doneList;var len=doneList.length;for(var i=0;i<len;i++){doneList[i].call(this)}},start:function(easing,forceAnimate){var self=this;var clipCount=0;var oneTrackDone=function(){clipCount--;if(!clipCount){self._doneCallback()}};var lastClip;for(var propName in this._tracks){if(!this._tracks.hasOwnProperty(propName)){continue}var clip=createTrackClip(this,easing,oneTrackDone,this._tracks[propName],propName,forceAnimate);if(clip){this._clipList.push(clip);clipCount++;if(this.animation){this.animation.addClip(clip)}lastClip=clip}}if(lastClip){var oldOnFrame=lastClip.onframe;lastClip.onframe=function(target,percent){oldOnFrame(target,percent);for(var i=0;i<self._onframeList.length;i++){self._onframeList[i](target,percent)}}}if(!clipCount){this._doneCallback()}return this},stop:function(forwardToLast){var clipList=this._clipList;var animation=this.animation;for(var i=0;i<clipList.length;i++){var clip=clipList[i];if(forwardToLast){clip.onframe(this._target,1)}animation&&animation.removeClip(clip)}clipList.length=0},delay:function(time){this._delay=time;return this},done:function(cb){if(cb){this._doneList.push(cb)}return this},getClips:function(){return this._clipList}};var dpr=1;if(typeof window!=="undefined"){dpr=Math.max(window.devicePixelRatio||1,1)}var debugMode=0;
var devicePixelRatio=dpr;var log=function(){};if(debugMode===1){log=function(){for(var k in arguments){throw new Error(arguments[k])}}}else{if(debugMode>1){log=function(){for(var k in arguments){console.log(arguments[k])}}}}var zrLog=log;var Animatable=function(){this.animators=[]};Animatable.prototype={constructor:Animatable,animate:function(path,loop){var target;var animatingShape=false;var el=this;var zr=this.__zr;if(path){var pathSplitted=path.split(".");var prop=el;animatingShape=pathSplitted[0]==="shape";for(var i=0,l=pathSplitted.length;i<l;i++){if(!prop){continue}prop=prop[pathSplitted[i]]}if(prop){target=prop}}else{target=el}if(!target){zrLog('Property "'+path+'" is not existed in element '+el.id);return}var animators=el.animators;var animator=new Animator(target,loop);animator.during(function(target){el.dirty(animatingShape)}).done(function(){animators.splice(indexOf(animators,animator),1)});animators.push(animator);if(zr){zr.animation.addAnimator(animator)}return animator},stopAnimation:function(forwardToLast){var animators=this.animators;var len=animators.length;for(var i=0;i<len;i++){animators[i].stop(forwardToLast)}animators.length=0;return this},animateTo:function(target,time,delay,easing,callback,forceAnimate){animateTo(this,target,time,delay,easing,callback,forceAnimate)},animateFrom:function(target,time,delay,easing,callback,forceAnimate){animateTo(this,target,time,delay,easing,callback,forceAnimate,true)}};function animateTo(animatable,target,time,delay,easing,callback,forceAnimate,reverse){if(isString(delay)){callback=easing;easing=delay;delay=0}else{if(isFunction$1(easing)){callback=easing;easing="linear";delay=0}else{if(isFunction$1(delay)){callback=delay;delay=0}else{if(isFunction$1(time)){callback=time;time=500}else{if(!time){time=500}}}}}animatable.stopAnimation();animateToShallow(animatable,"",animatable,target,time,delay,reverse);var animators=animatable.animators.slice();var count=animators.length;function done(){count--;if(!count){callback&&callback()
}}if(!count){callback&&callback()}for(var i=0;i<animators.length;i++){animators[i].done(done).start(easing,forceAnimate)}}function animateToShallow(animatable,path,source,target,time,delay,reverse){var objShallow={};var propertyCount=0;for(var name in target){if(!target.hasOwnProperty(name)){continue}if(source[name]!=null){if(isObject$1(target[name])&&!isArrayLike(target[name])){animateToShallow(animatable,path?path+"."+name:name,source[name],target[name],time,delay,reverse)}else{if(reverse){objShallow[name]=source[name];setAttrByPath(animatable,path,name,target[name])}else{objShallow[name]=target[name]}propertyCount++}}else{if(target[name]!=null&&!reverse){setAttrByPath(animatable,path,name,target[name])}}}if(propertyCount>0){animatable.animate(path,false).when(time==null?500:time,objShallow).delay(delay||0)}}function setAttrByPath(el,path,name,value){if(!path){el.attr(name,value)}else{var props={};props[path]={};props[path][name]=value;el.attr(props)}}var Element=function(opts){Transformable.call(this,opts);Eventful.call(this,opts);Animatable.call(this,opts);this.id=opts.id||guid()};Element.prototype={type:"element",name:"",__zr:null,ignore:false,clipPath:null,isGroup:false,drift:function(dx,dy){switch(this.draggable){case"horizontal":dy=0;break;case"vertical":dx=0;break}var m=this.transform;if(!m){m=this.transform=[1,0,0,1,0,0]}m[4]+=dx;m[5]+=dy;this.decomposeTransform();this.dirty(false)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(cb,context){},attrKV:function(key,value){if(key==="position"||key==="scale"||key==="origin"){if(value){var target=this[key];if(!target){target=this[key]=[]}target[0]=value[0];target[1]=value[1]}}else{this[key]=value}},hide:function(){this.ignore=true;this.__zr&&this.__zr.refresh()},show:function(){this.ignore=false;this.__zr&&this.__zr.refresh()},attr:function(key,value){if(typeof key==="string"){this.attrKV(key,value)}else{if(isObject$1(key)){for(var name in key){if(key.hasOwnProperty(name)){this.attrKV(name,key[name])
}}}}this.dirty(false);return this},setClipPath:function(clipPath){var zr=this.__zr;if(zr){clipPath.addSelfToZr(zr)}if(this.clipPath&&this.clipPath!==clipPath){this.removeClipPath()}this.clipPath=clipPath;clipPath.__zr=zr;clipPath.__clipTarget=this;this.dirty(false)},removeClipPath:function(){var clipPath=this.clipPath;if(clipPath){if(clipPath.__zr){clipPath.removeSelfFromZr(clipPath.__zr)}clipPath.__zr=null;clipPath.__clipTarget=null;this.clipPath=null;this.dirty(false)}},addSelfToZr:function(zr){this.__zr=zr;var animators=this.animators;if(animators){for(var i=0;i<animators.length;i++){zr.animation.addAnimator(animators[i])}}if(this.clipPath){this.clipPath.addSelfToZr(zr)}},removeSelfFromZr:function(zr){this.__zr=null;var animators=this.animators;if(animators){for(var i=0;i<animators.length;i++){zr.animation.removeAnimator(animators[i])}}if(this.clipPath){this.clipPath.removeSelfFromZr(zr)}}};mixin(Element,Animatable);mixin(Element,Transformable);mixin(Element,Eventful);var v2ApplyTransform=applyTransform;var mathMin=Math.min;var mathMax=Math.max;function BoundingRect(x,y,width,height){if(width<0){x=x+width;width=-width}if(height<0){y=y+height;height=-height}this.x=x;this.y=y;this.width=width;this.height=height}BoundingRect.prototype={constructor:BoundingRect,union:function(other){var x=mathMin(other.x,this.x);var y=mathMin(other.y,this.y);this.width=mathMax(other.x+other.width,this.x+this.width)-x;this.height=mathMax(other.y+other.height,this.y+this.height)-y;this.x=x;this.y=y},applyTransform:(function(){var lt=[];var rb=[];var lb=[];var rt=[];return function(m){if(!m){return}lt[0]=lb[0]=this.x;lt[1]=rt[1]=this.y;rb[0]=rt[0]=this.x+this.width;rb[1]=lb[1]=this.y+this.height;v2ApplyTransform(lt,lt,m);v2ApplyTransform(rb,rb,m);v2ApplyTransform(lb,lb,m);v2ApplyTransform(rt,rt,m);this.x=mathMin(lt[0],rb[0],lb[0],rt[0]);this.y=mathMin(lt[1],rb[1],lb[1],rt[1]);var maxX=mathMax(lt[0],rb[0],lb[0],rt[0]);var maxY=mathMax(lt[1],rb[1],lb[1],rt[1]);this.width=maxX-this.x;this.height=maxY-this.y
}})(),calculateTransform:function(b){var a=this;var sx=b.width/a.width;var sy=b.height/a.height;var m=create$1();translate(m,m,[-a.x,-a.y]);scale$1(m,m,[sx,sy]);translate(m,m,[b.x,b.y]);return m},intersect:function(b){if(!b){return false}if(!(b instanceof BoundingRect)){b=BoundingRect.create(b)}var a=this;var ax0=a.x;var ax1=a.x+a.width;var ay0=a.y;var ay1=a.y+a.height;var bx0=b.x;var bx1=b.x+b.width;var by0=b.y;var by1=b.y+b.height;return !(ax1<bx0||bx1<ax0||ay1<by0||by1<ay0)},contain:function(x,y){var rect=this;return x>=rect.x&&x<=(rect.x+rect.width)&&y>=rect.y&&y<=(rect.y+rect.height)},clone:function(){return new BoundingRect(this.x,this.y,this.width,this.height)},copy:function(other){this.x=other.x;this.y=other.y;this.width=other.width;this.height=other.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}};BoundingRect.create=function(rect){return new BoundingRect(rect.x,rect.y,rect.width,rect.height)};var Group=function(opts){opts=opts||{};Element.call(this,opts);for(var key in opts){if(opts.hasOwnProperty(key)){this[key]=opts[key]}}this._children=[];this.__storage=null;this.__dirty=true};Group.prototype={constructor:Group,isGroup:true,type:"group",silent:false,children:function(){return this._children.slice()},childAt:function(idx){return this._children[idx]},childOfName:function(name){var children=this._children;for(var i=0;i<children.length;i++){if(children[i].name===name){return children[i]}}},childCount:function(){return this._children.length},add:function(child){if(child&&child!==this&&child.parent!==this){this._children.push(child);this._doAdd(child)}return this},addBefore:function(child,nextSibling){if(child&&child!==this&&child.parent!==this&&nextSibling&&nextSibling.parent===this){var children=this._children;var idx=children.indexOf(nextSibling);if(idx>=0){children.splice(idx,0,child);this._doAdd(child)}}return this},_doAdd:function(child){if(child.parent){child.parent.remove(child)}child.parent=this;var storage=this.__storage;
var zr=this.__zr;if(storage&&storage!==child.__storage){storage.addToStorage(child);if(child instanceof Group){child.addChildrenToStorage(storage)}}zr&&zr.refresh()},remove:function(child){var zr=this.__zr;var storage=this.__storage;var children=this._children;var idx=indexOf(children,child);if(idx<0){return this}children.splice(idx,1);child.parent=null;if(storage){storage.delFromStorage(child);if(child instanceof Group){child.delChildrenFromStorage(storage)}}zr&&zr.refresh();return this},removeAll:function(){var children=this._children;var storage=this.__storage;var child;var i;for(i=0;i<children.length;i++){child=children[i];if(storage){storage.delFromStorage(child);if(child instanceof Group){child.delChildrenFromStorage(storage)}}child.parent=null}children.length=0;return this},eachChild:function(cb,context){var children=this._children;for(var i=0;i<children.length;i++){var child=children[i];cb.call(context,child,i)}return this},traverse:function(cb,context){for(var i=0;i<this._children.length;i++){var child=this._children[i];cb.call(context,child);if(child.type==="group"){child.traverse(cb,context)}}return this},addChildrenToStorage:function(storage){for(var i=0;i<this._children.length;i++){var child=this._children[i];storage.addToStorage(child);if(child instanceof Group){child.addChildrenToStorage(storage)}}},delChildrenFromStorage:function(storage){for(var i=0;i<this._children.length;i++){var child=this._children[i];storage.delFromStorage(child);if(child instanceof Group){child.delChildrenFromStorage(storage)}}},dirty:function(){this.__dirty=true;this.__zr&&this.__zr.refresh();return this},getBoundingRect:function(includeChildren){var rect=null;var tmpRect=new BoundingRect(0,0,0,0);var children=includeChildren||this._children;var tmpMat=[];for(var i=0;i<children.length;i++){var child=children[i];if(child.ignore||child.invisible){continue}var childRect=child.getBoundingRect();var transform=child.getLocalTransform(tmpMat);if(transform){tmpRect.copy(childRect);tmpRect.applyTransform(transform);
rect=rect||tmpRect.clone();rect.union(tmpRect)}else{rect=rect||childRect.clone();rect.union(childRect)}}return rect||tmpRect}};inherits(Group,Element);var DEFAULT_MIN_MERGE=32;var DEFAULT_MIN_GALLOPING=7;function minRunLength(n){var r=0;while(n>=DEFAULT_MIN_MERGE){r|=n&1;n>>=1}return n+r}function makeAscendingRun(array,lo,hi,compare){var runHi=lo+1;if(runHi===hi){return 1}if(compare(array[runHi++],array[lo])<0){while(runHi<hi&&compare(array[runHi],array[runHi-1])<0){runHi++}reverseRun(array,lo,runHi)}else{while(runHi<hi&&compare(array[runHi],array[runHi-1])>=0){runHi++}}return runHi-lo}function reverseRun(array,lo,hi){hi--;while(lo<hi){var t=array[lo];array[lo++]=array[hi];array[hi--]=t}}function binaryInsertionSort(array,lo,hi,start,compare){if(start===lo){start++}for(;start<hi;start++){var pivot=array[start];var left=lo;var right=start;var mid;while(left<right){mid=left+right>>>1;if(compare(pivot,array[mid])<0){right=mid}else{left=mid+1}}var n=start-left;switch(n){case 3:array[left+3]=array[left+2];case 2:array[left+2]=array[left+1];case 1:array[left+1]=array[left];break;default:while(n>0){array[left+n]=array[left+n-1];n--}}array[left]=pivot}}function gallopLeft(value,array,start,length,hint,compare){var lastOffset=0;var maxOffset=0;var offset=1;if(compare(value,array[start+hint])>0){maxOffset=length-hint;while(offset<maxOffset&&compare(value,array[start+hint+offset])>0){lastOffset=offset;offset=(offset<<1)+1;if(offset<=0){offset=maxOffset}}if(offset>maxOffset){offset=maxOffset}lastOffset+=hint;offset+=hint}else{maxOffset=hint+1;while(offset<maxOffset&&compare(value,array[start+hint-offset])<=0){lastOffset=offset;offset=(offset<<1)+1;if(offset<=0){offset=maxOffset}}if(offset>maxOffset){offset=maxOffset}var tmp=lastOffset;lastOffset=hint-offset;offset=hint-tmp}lastOffset++;while(lastOffset<offset){var m=lastOffset+(offset-lastOffset>>>1);if(compare(value,array[start+m])>0){lastOffset=m+1}else{offset=m}}return offset}function gallopRight(value,array,start,length,hint,compare){var lastOffset=0;
var maxOffset=0;var offset=1;if(compare(value,array[start+hint])<0){maxOffset=hint+1;while(offset<maxOffset&&compare(value,array[start+hint-offset])<0){lastOffset=offset;offset=(offset<<1)+1;if(offset<=0){offset=maxOffset}}if(offset>maxOffset){offset=maxOffset}var tmp=lastOffset;lastOffset=hint-offset;offset=hint-tmp}else{maxOffset=length-hint;while(offset<maxOffset&&compare(value,array[start+hint+offset])>=0){lastOffset=offset;offset=(offset<<1)+1;if(offset<=0){offset=maxOffset}}if(offset>maxOffset){offset=maxOffset}lastOffset+=hint;offset+=hint}lastOffset++;while(lastOffset<offset){var m=lastOffset+(offset-lastOffset>>>1);if(compare(value,array[start+m])<0){offset=m}else{lastOffset=m+1}}return offset}function TimSort(array,compare){var minGallop=DEFAULT_MIN_GALLOPING;var runStart;var runLength;var stackSize=0;var tmp=[];runStart=[];runLength=[];function pushRun(_runStart,_runLength){runStart[stackSize]=_runStart;runLength[stackSize]=_runLength;stackSize+=1}function mergeRuns(){while(stackSize>1){var n=stackSize-2;if(n>=1&&runLength[n-1]<=runLength[n]+runLength[n+1]||n>=2&&runLength[n-2]<=runLength[n]+runLength[n-1]){if(runLength[n-1]<runLength[n+1]){n--}}else{if(runLength[n]>runLength[n+1]){break}}mergeAt(n)}}function forceMergeRuns(){while(stackSize>1){var n=stackSize-2;if(n>0&&runLength[n-1]<runLength[n+1]){n--}mergeAt(n)}}function mergeAt(i){var start1=runStart[i];var length1=runLength[i];var start2=runStart[i+1];var length2=runLength[i+1];runLength[i]=length1+length2;if(i===stackSize-3){runStart[i+1]=runStart[i+2];runLength[i+1]=runLength[i+2]}stackSize--;var k=gallopRight(array[start2],array,start1,length1,0,compare);start1+=k;length1-=k;if(length1===0){return}length2=gallopLeft(array[start1+length1-1],array,start2,length2,length2-1,compare);if(length2===0){return}if(length1<=length2){mergeLow(start1,length1,start2,length2)}else{mergeHigh(start1,length1,start2,length2)}}function mergeLow(start1,length1,start2,length2){var i=0;for(i=0;i<length1;i++){tmp[i]=array[start1+i]
}var cursor1=0;var cursor2=start2;var dest=start1;array[dest++]=array[cursor2++];if(--length2===0){for(i=0;i<length1;i++){array[dest+i]=tmp[cursor1+i]}return}if(length1===1){for(i=0;i<length2;i++){array[dest+i]=array[cursor2+i]}array[dest+length2]=tmp[cursor1];return}var _minGallop=minGallop;var count1,count2,exit;while(1){count1=0;count2=0;exit=false;do{if(compare(array[cursor2],tmp[cursor1])<0){array[dest++]=array[cursor2++];count2++;count1=0;if(--length2===0){exit=true;break}}else{array[dest++]=tmp[cursor1++];count1++;count2=0;if(--length1===1){exit=true;break}}}while((count1|count2)<_minGallop);if(exit){break}do{count1=gallopRight(array[cursor2],tmp,cursor1,length1,0,compare);if(count1!==0){for(i=0;i<count1;i++){array[dest+i]=tmp[cursor1+i]}dest+=count1;cursor1+=count1;length1-=count1;if(length1<=1){exit=true;break}}array[dest++]=array[cursor2++];if(--length2===0){exit=true;break}count2=gallopLeft(tmp[cursor1],array,cursor2,length2,0,compare);if(count2!==0){for(i=0;i<count2;i++){array[dest+i]=array[cursor2+i]}dest+=count2;cursor2+=count2;length2-=count2;if(length2===0){exit=true;break}}array[dest++]=tmp[cursor1++];if(--length1===1){exit=true;break}_minGallop--}while(count1>=DEFAULT_MIN_GALLOPING||count2>=DEFAULT_MIN_GALLOPING);if(exit){break}if(_minGallop<0){_minGallop=0}_minGallop+=2}minGallop=_minGallop;minGallop<1&&(minGallop=1);if(length1===1){for(i=0;i<length2;i++){array[dest+i]=array[cursor2+i]}array[dest+length2]=tmp[cursor1]}else{if(length1===0){throw new Error()}else{for(i=0;i<length1;i++){array[dest+i]=tmp[cursor1+i]}}}}function mergeHigh(start1,length1,start2,length2){var i=0;for(i=0;i<length2;i++){tmp[i]=array[start2+i]}var cursor1=start1+length1-1;var cursor2=length2-1;var dest=start2+length2-1;var customCursor=0;var customDest=0;array[dest--]=array[cursor1--];if(--length1===0){customCursor=dest-(length2-1);for(i=0;i<length2;i++){array[customCursor+i]=tmp[i]}return}if(length2===1){dest-=length1;cursor1-=length1;customDest=dest+1;customCursor=cursor1+1;
for(i=length1-1;i>=0;i--){array[customDest+i]=array[customCursor+i]}array[dest]=tmp[cursor2];return}var _minGallop=minGallop;while(true){var count1=0;var count2=0;var exit=false;do{if(compare(tmp[cursor2],array[cursor1])<0){array[dest--]=array[cursor1--];count1++;count2=0;if(--length1===0){exit=true;break}}else{array[dest--]=tmp[cursor2--];count2++;count1=0;if(--length2===1){exit=true;break}}}while((count1|count2)<_minGallop);if(exit){break}do{count1=length1-gallopRight(tmp[cursor2],array,start1,length1,length1-1,compare);if(count1!==0){dest-=count1;cursor1-=count1;length1-=count1;customDest=dest+1;customCursor=cursor1+1;for(i=count1-1;i>=0;i--){array[customDest+i]=array[customCursor+i]}if(length1===0){exit=true;break}}array[dest--]=tmp[cursor2--];if(--length2===1){exit=true;break}count2=length2-gallopLeft(array[cursor1],tmp,0,length2,length2-1,compare);if(count2!==0){dest-=count2;cursor2-=count2;length2-=count2;customDest=dest+1;customCursor=cursor2+1;for(i=0;i<count2;i++){array[customDest+i]=tmp[customCursor+i]}if(length2<=1){exit=true;break}}array[dest--]=array[cursor1--];if(--length1===0){exit=true;break}_minGallop--}while(count1>=DEFAULT_MIN_GALLOPING||count2>=DEFAULT_MIN_GALLOPING);if(exit){break}if(_minGallop<0){_minGallop=0}_minGallop+=2}minGallop=_minGallop;if(minGallop<1){minGallop=1}if(length2===1){dest-=length1;cursor1-=length1;customDest=dest+1;customCursor=cursor1+1;for(i=length1-1;i>=0;i--){array[customDest+i]=array[customCursor+i]}array[dest]=tmp[cursor2]}else{if(length2===0){throw new Error()}else{customCursor=dest-(length2-1);for(i=0;i<length2;i++){array[customCursor+i]=tmp[i]}}}}this.mergeRuns=mergeRuns;this.forceMergeRuns=forceMergeRuns;this.pushRun=pushRun}function sort(array,compare,lo,hi){if(!lo){lo=0}if(!hi){hi=array.length}var remaining=hi-lo;if(remaining<2){return}var runLength=0;if(remaining<DEFAULT_MIN_MERGE){runLength=makeAscendingRun(array,lo,hi,compare);binaryInsertionSort(array,lo,hi,lo+runLength,compare);return}var ts=new TimSort(array,compare);
var minRun=minRunLength(remaining);do{runLength=makeAscendingRun(array,lo,hi,compare);if(runLength<minRun){var force=remaining;if(force>minRun){force=minRun}binaryInsertionSort(array,lo,lo+force,lo+runLength,compare);runLength=force}ts.pushRun(lo,runLength);ts.mergeRuns();remaining-=runLength;lo+=runLength}while(remaining!==0);ts.forceMergeRuns()}function shapeCompareFunc(a,b){if(a.zlevel===b.zlevel){if(a.z===b.z){return a.z2-b.z2}return a.z-b.z}return a.zlevel-b.zlevel}var Storage=function(){this._roots=[];this._displayList=[];this._displayListLen=0};Storage.prototype={constructor:Storage,traverse:function(cb,context){for(var i=0;i<this._roots.length;i++){this._roots[i].traverse(cb,context)}},getDisplayList:function(update,includeIgnore){includeIgnore=includeIgnore||false;if(update){this.updateDisplayList(includeIgnore)}return this._displayList},updateDisplayList:function(includeIgnore){this._displayListLen=0;var roots=this._roots;var displayList=this._displayList;for(var i=0,len=roots.length;i<len;i++){this._updateAndAddDisplayable(roots[i],null,includeIgnore)}displayList.length=this._displayListLen;env$1.canvasSupported&&sort(displayList,shapeCompareFunc)},_updateAndAddDisplayable:function(el,clipPaths,includeIgnore){if(el.ignore&&!includeIgnore){return}el.beforeUpdate();if(el.__dirty){el.update()}el.afterUpdate();var userSetClipPath=el.clipPath;if(userSetClipPath){if(clipPaths){clipPaths=clipPaths.slice()}else{clipPaths=[]}var currentClipPath=userSetClipPath;var parentClipPath=el;while(currentClipPath){currentClipPath.parent=parentClipPath;currentClipPath.updateTransform();clipPaths.push(currentClipPath);parentClipPath=currentClipPath;currentClipPath=currentClipPath.clipPath}}if(el.isGroup){var children=el._children;for(var i=0;i<children.length;i++){var child=children[i];if(el.__dirty){child.__dirty=true}this._updateAndAddDisplayable(child,clipPaths,includeIgnore)}el.__dirty=false}else{el.__clipPaths=clipPaths;this._displayList[this._displayListLen++]=el}},addRoot:function(el){if(el.__storage===this){return
}if(el instanceof Group){el.addChildrenToStorage(this)}this.addToStorage(el);this._roots.push(el)},delRoot:function(el){if(el==null){for(var i=0;i<this._roots.length;i++){var root=this._roots[i];if(root instanceof Group){root.delChildrenFromStorage(this)}}this._roots=[];this._displayList=[];this._displayListLen=0;return}if(el instanceof Array){for(var i=0,l=el.length;i<l;i++){this.delRoot(el[i])}return}var idx=indexOf(this._roots,el);if(idx>=0){this.delFromStorage(el);this._roots.splice(idx,1);if(el instanceof Group){el.delChildrenFromStorage(this)}}},addToStorage:function(el){if(el){el.__storage=this;el.dirty(false)}return this},delFromStorage:function(el){if(el){el.__storage=null}return this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:shapeCompareFunc};var SHADOW_PROPS={"shadowBlur":1,"shadowOffsetX":1,"shadowOffsetY":1,"textShadowBlur":1,"textShadowOffsetX":1,"textShadowOffsetY":1,"textBoxShadowBlur":1,"textBoxShadowOffsetX":1,"textBoxShadowOffsetY":1};var fixShadow=function(ctx,propName,value){if(SHADOW_PROPS.hasOwnProperty(propName)){return value*=ctx.dpr}return value};var ContextCachedBy={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2};var WILL_BE_RESTORED=9;var STYLE_COMMON_PROPS=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];var Style=function(opts){this.extendFrom(opts,false)};function createLinearGradient(ctx,obj,rect){var x=obj.x==null?0:obj.x;var x2=obj.x2==null?1:obj.x2;var y=obj.y==null?0:obj.y;var y2=obj.y2==null?0:obj.y2;if(!obj.global){x=x*rect.width+rect.x;x2=x2*rect.width+rect.x;y=y*rect.height+rect.y;y2=y2*rect.height+rect.y}x=isNaN(x)?0:x;x2=isNaN(x2)?1:x2;y=isNaN(y)?0:y;y2=isNaN(y2)?0:y2;var canvasGradient=ctx.createLinearGradient(x,y,x2,y2);return canvasGradient}function createRadialGradient(ctx,obj,rect){var width=rect.width;var height=rect.height;var min=Math.min(width,height);var x=obj.x==null?0.5:obj.x;var y=obj.y==null?0.5:obj.y;var r=obj.r==null?0.5:obj.r;
if(!obj.global){x=x*width+rect.x;y=y*height+rect.y;r=r*min}var canvasGradient=ctx.createRadialGradient(x,y,0,x,y,r);return canvasGradient}Style.prototype={constructor:Style,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:false,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:false,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(ctx,el,prevEl){var style=this;var prevStyle=prevEl&&prevEl.style;var notCheckCache=!prevStyle||ctx.__attrCachedBy!==ContextCachedBy.STYLE_BIND;ctx.__attrCachedBy=ContextCachedBy.STYLE_BIND;for(var i=0;i<STYLE_COMMON_PROPS.length;i++){var prop=STYLE_COMMON_PROPS[i];var styleName=prop[0];if(notCheckCache||style[styleName]!==prevStyle[styleName]){ctx[styleName]=fixShadow(ctx,styleName,style[styleName]||prop[1])}}if((notCheckCache||style.fill!==prevStyle.fill)){ctx.fillStyle=style.fill}if((notCheckCache||style.stroke!==prevStyle.stroke)){ctx.strokeStyle=style.stroke}if((notCheckCache||style.opacity!==prevStyle.opacity)){ctx.globalAlpha=style.opacity==null?1:style.opacity}if((notCheckCache||style.blend!==prevStyle.blend)){ctx.globalCompositeOperation=style.blend||"source-over"}if(this.hasStroke()){var lineWidth=style.lineWidth;ctx.lineWidth=lineWidth/((this.strokeNoScale&&el&&el.getLineScale)?el.getLineScale():1)}},hasFill:function(){var fill=this.fill;
return fill!=null&&fill!=="none"},hasStroke:function(){var stroke=this.stroke;return stroke!=null&&stroke!=="none"&&this.lineWidth>0},extendFrom:function(otherStyle,overwrite){if(otherStyle){for(var name in otherStyle){if(otherStyle.hasOwnProperty(name)&&(overwrite===true||(overwrite===false?!this.hasOwnProperty(name):otherStyle[name]!=null))){this[name]=otherStyle[name]}}}},set:function(obj,value){if(typeof obj==="string"){this[obj]=value}else{this.extendFrom(obj,true)}},clone:function(){var newStyle=new this.constructor();newStyle.extendFrom(this,true);return newStyle},getGradient:function(ctx,obj,rect){var method=obj.type==="radial"?createRadialGradient:createLinearGradient;var canvasGradient=method(ctx,obj,rect);var colorStops=obj.colorStops;for(var i=0;i<colorStops.length;i++){canvasGradient.addColorStop(colorStops[i].offset,colorStops[i].color)}return canvasGradient}};var styleProto=Style.prototype;for(var i=0;i<STYLE_COMMON_PROPS.length;i++){var prop=STYLE_COMMON_PROPS[i];if(!(prop[0] in styleProto)){styleProto[prop[0]]=prop[1]}}Style.getGradient=styleProto.getGradient;var Pattern=function(image,repeat){this.image=image;this.repeat=repeat;this.type="pattern"};Pattern.prototype.getCanvasPattern=function(ctx){return ctx.createPattern(this.image,this.repeat||"repeat")};function returnFalse(){return false}function createDom(id,painter,dpr){var newDom=createCanvas();var width=painter.getWidth();var height=painter.getHeight();var newDomStyle=newDom.style;if(newDomStyle){newDomStyle.position="absolute";newDomStyle.left=0;newDomStyle.top=0;newDomStyle.width=width+"px";newDomStyle.height=height+"px";newDom.setAttribute("data-zr-dom-id",id)}newDom.width=width*dpr;newDom.height=height*dpr;return newDom}var Layer=function(id,painter,dpr){var dom;dpr=dpr||devicePixelRatio;if(typeof id==="string"){dom=createDom(id,painter,dpr)}else{if(isObject$1(id)){dom=id;id=dom.id}}this.id=id;this.dom=dom;var domStyle=dom.style;if(domStyle){dom.onselectstart=returnFalse;domStyle["-webkit-user-select"]="none";
domStyle["user-select"]="none";domStyle["-webkit-touch-callout"]="none";domStyle["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";domStyle["padding"]=0;domStyle["margin"]=0;domStyle["border-width"]=0}this.domBack=null;this.ctxBack=null;this.painter=painter;this.config=null;this.clearColor=0;this.motionBlur=false;this.lastFrameAlpha=0.7;this.dpr=dpr};Layer.prototype={constructor:Layer,__dirty:true,__used:false,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:false,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d");this.ctx.dpr=this.dpr},createBackBuffer:function(){var dpr=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,dpr);this.ctxBack=this.domBack.getContext("2d");if(dpr!==1){this.ctxBack.scale(dpr,dpr)}},resize:function(width,height){var dpr=this.dpr;var dom=this.dom;var domStyle=dom.style;var domBack=this.domBack;if(domStyle){domStyle.width=width+"px";domStyle.height=height+"px"}dom.width=width*dpr;dom.height=height*dpr;if(domBack){domBack.width=width*dpr;domBack.height=height*dpr;if(dpr!==1){this.ctxBack.scale(dpr,dpr)}}},clear:function(clearAll,clearColor){var dom=this.dom;var ctx=this.ctx;var width=dom.width;var height=dom.height;var clearColor=clearColor||this.clearColor;var haveMotionBLur=this.motionBlur&&!clearAll;var lastFrameAlpha=this.lastFrameAlpha;var dpr=this.dpr;if(haveMotionBLur){if(!this.domBack){this.createBackBuffer()}this.ctxBack.globalCompositeOperation="copy";this.ctxBack.drawImage(dom,0,0,width/dpr,height/dpr)}ctx.clearRect(0,0,width,height);if(clearColor&&clearColor!=="transparent"){var clearColorGradientOrPattern;if(clearColor.colorStops){clearColorGradientOrPattern=clearColor.__canvasGradient||Style.getGradient(ctx,clearColor,{x:0,y:0,width:width,height:height});clearColor.__canvasGradient=clearColorGradientOrPattern}else{if(clearColor.image){clearColorGradientOrPattern=Pattern.prototype.getCanvasPattern.call(clearColor,ctx)}}ctx.save();ctx.fillStyle=clearColorGradientOrPattern||clearColor;
ctx.fillRect(0,0,width,height);ctx.restore()}if(haveMotionBLur){var domBack=this.domBack;ctx.save();ctx.globalAlpha=lastFrameAlpha;ctx.drawImage(domBack,0,0,width,height);ctx.restore()}}};var requestAnimationFrame=(typeof window!=="undefined"&&((window.requestAnimationFrame&&window.requestAnimationFrame.bind(window))||(window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window))||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame))||function(func){setTimeout(func,16)};var globalImageCache=new LRU(50);function findExistImage(newImageOrSrc){if(typeof newImageOrSrc==="string"){var cachedImgObj=globalImageCache.get(newImageOrSrc);return cachedImgObj&&cachedImgObj.image}else{return newImageOrSrc}}function createOrUpdateImage(newImageOrSrc,image,hostEl,cb,cbPayload){if(!newImageOrSrc){return image}else{if(typeof newImageOrSrc==="string"){if((image&&image.__zrImageSrc===newImageOrSrc)||!hostEl){return image}var cachedImgObj=globalImageCache.get(newImageOrSrc);var pendingWrap={hostEl:hostEl,cb:cb,cbPayload:cbPayload};if(cachedImgObj){image=cachedImgObj.image;!isImageReady(image)&&cachedImgObj.pending.push(pendingWrap)}else{image=new Image();image.onload=image.onerror=imageOnLoad;globalImageCache.put(newImageOrSrc,image.__cachedImgObj={image:image,pending:[pendingWrap]});image.src=image.__zrImageSrc=newImageOrSrc}return image}else{return newImageOrSrc}}}function imageOnLoad(){var cachedImgObj=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var i=0;i<cachedImgObj.pending.length;i++){var pendingWrap=cachedImgObj.pending[i];var cb=pendingWrap.cb;cb&&cb(this,pendingWrap.cbPayload);pendingWrap.hostEl.dirty()}cachedImgObj.pending.length=0}function isImageReady(image){return image&&image.width&&image.height}var textWidthCache={};var textWidthCacheCounter=0;var TEXT_CACHE_MAX=5000;var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;var DEFAULT_FONT$1="12px sans-serif";var methods$1={};function $override$1(name,fn){methods$1[name]=fn
}function getWidth(text,font){font=font||DEFAULT_FONT$1;var key=text+":"+font;if(textWidthCache[key]){return textWidthCache[key]}var textLines=(text+"").split("\n");var width=0;for(var i=0,l=textLines.length;i<l;i++){width=Math.max(measureText(textLines[i],font).width,width)}if(textWidthCacheCounter>TEXT_CACHE_MAX){textWidthCacheCounter=0;textWidthCache={}}textWidthCacheCounter++;textWidthCache[key]=width;return width}function getBoundingRect(text,font,textAlign,textVerticalAlign,textPadding,textLineHeight,rich,truncate){return rich?getRichTextRect(text,font,textAlign,textVerticalAlign,textPadding,rich,textLineHeight,truncate):getPlainTextRect(text,font,textAlign,textVerticalAlign,textPadding,textLineHeight,truncate)}function getPlainTextRect(text,font,textAlign,textVerticalAlign,textPadding,textLineHeight,truncate){var contentBlock=parsePlainText(text,font,textPadding,textLineHeight,truncate);var outerWidth=getWidth(text,font);if(textPadding){outerWidth+=textPadding[1]+textPadding[3]}var outerHeight=contentBlock.outerHeight;var x=adjustTextX(0,outerWidth,textAlign);var y=adjustTextY(0,outerHeight,textVerticalAlign);var rect=new BoundingRect(x,y,outerWidth,outerHeight);rect.lineHeight=contentBlock.lineHeight;return rect}function getRichTextRect(text,font,textAlign,textVerticalAlign,textPadding,textLineHeight,rich,truncate){var contentBlock=parseRichText(text,{rich:rich,truncate:truncate,font:font,textAlign:textAlign,textPadding:textPadding,textLineHeight:textLineHeight});var outerWidth=contentBlock.outerWidth;var outerHeight=contentBlock.outerHeight;var x=adjustTextX(0,outerWidth,textAlign);var y=adjustTextY(0,outerHeight,textVerticalAlign);return new BoundingRect(x,y,outerWidth,outerHeight)}function adjustTextX(x,width,textAlign){if(textAlign==="right"){x-=width}else{if(textAlign==="center"){x-=width/2}}return x}function adjustTextY(y,height,textVerticalAlign){if(textVerticalAlign==="middle"){y-=height/2}else{if(textVerticalAlign==="bottom"){y-=height}}return y}function adjustTextPositionOnRect(textPosition,rect,distance){var x=rect.x;
var y=rect.y;var height=rect.height;var width=rect.width;var halfHeight=height/2;var textAlign="left";var textVerticalAlign="top";switch(textPosition){case"left":x-=distance;y+=halfHeight;textAlign="right";textVerticalAlign="middle";break;case"right":x+=distance+width;y+=halfHeight;textVerticalAlign="middle";break;case"top":x+=width/2;y-=distance;textAlign="center";textVerticalAlign="bottom";break;case"bottom":x+=width/2;y+=height+distance;textAlign="center";break;case"inside":x+=width/2;y+=halfHeight;textAlign="center";textVerticalAlign="middle";break;case"insideLeft":x+=distance;y+=halfHeight;textVerticalAlign="middle";break;case"insideRight":x+=width-distance;y+=halfHeight;textAlign="right";textVerticalAlign="middle";break;case"insideTop":x+=width/2;y+=distance;textAlign="center";break;case"insideBottom":x+=width/2;y+=height-distance;textAlign="center";textVerticalAlign="bottom";break;case"insideTopLeft":x+=distance;y+=distance;break;case"insideTopRight":x+=width-distance;y+=distance;textAlign="right";break;case"insideBottomLeft":x+=distance;y+=height-distance;textVerticalAlign="bottom";break;case"insideBottomRight":x+=width-distance;y+=height-distance;textAlign="right";textVerticalAlign="bottom";break}return{x:x,y:y,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}function truncateText(text,containerWidth,font,ellipsis,options){if(!containerWidth){return""}var textLines=(text+"").split("\n");options=prepareTruncateOptions(containerWidth,font,ellipsis,options);for(var i=0,len=textLines.length;i<len;i++){textLines[i]=truncateSingleLine(textLines[i],options)}return textLines.join("\n")}function prepareTruncateOptions(containerWidth,font,ellipsis,options){options=extend({},options);options.font=font;var ellipsis=retrieve2(ellipsis,"...");options.maxIterations=retrieve2(options.maxIterations,2);var minChar=options.minChar=retrieve2(options.minChar,0);options.cnCharWidth=getWidth("",font);var ascCharWidth=options.ascCharWidth=getWidth("a",font);options.placeholder=retrieve2(options.placeholder,"");
var contentWidth=containerWidth=Math.max(0,containerWidth-1);for(var i=0;i<minChar&&contentWidth>=ascCharWidth;i++){contentWidth-=ascCharWidth}var ellipsisWidth=getWidth(ellipsis,font);if(ellipsisWidth>contentWidth){ellipsis="";ellipsisWidth=0}contentWidth=containerWidth-ellipsisWidth;options.ellipsis=ellipsis;options.ellipsisWidth=ellipsisWidth;options.contentWidth=contentWidth;options.containerWidth=containerWidth;return options}function truncateSingleLine(textLine,options){var containerWidth=options.containerWidth;var font=options.font;var contentWidth=options.contentWidth;if(!containerWidth){return""}var lineWidth=getWidth(textLine,font);if(lineWidth<=containerWidth){return textLine}for(var j=0;;j++){if(lineWidth<=contentWidth||j>=options.maxIterations){textLine+=options.ellipsis;break}var subLength=j===0?estimateLength(textLine,contentWidth,options.ascCharWidth,options.cnCharWidth):lineWidth>0?Math.floor(textLine.length*contentWidth/lineWidth):0;textLine=textLine.substr(0,subLength);lineWidth=getWidth(textLine,font)}if(textLine===""){textLine=options.placeholder}return textLine}function estimateLength(text,contentWidth,ascCharWidth,cnCharWidth){var width=0;var i=0;for(var len=text.length;i<len&&width<contentWidth;i++){var charCode=text.charCodeAt(i);width+=(0<=charCode&&charCode<=127)?ascCharWidth:cnCharWidth}return i}function getLineHeight(font){return getWidth("",font)}function measureText(text,font){return methods$1.measureText(text,font)}methods$1.measureText=function(text,font){var ctx=getContext();ctx.font=font||DEFAULT_FONT$1;return ctx.measureText(text)};function parsePlainText(text,font,padding,textLineHeight,truncate){text!=null&&(text+="");var lineHeight=retrieve2(textLineHeight,getLineHeight(font));var lines=text?text.split("\n"):[];var height=lines.length*lineHeight;var outerHeight=height;if(padding){outerHeight+=padding[0]+padding[2]}if(text&&truncate){var truncOuterHeight=truncate.outerHeight;var truncOuterWidth=truncate.outerWidth;if(truncOuterHeight!=null&&outerHeight>truncOuterHeight){text="";
lines=[]}else{if(truncOuterWidth!=null){var options=prepareTruncateOptions(truncOuterWidth-(padding?padding[1]+padding[3]:0),font,truncate.ellipsis,{minChar:truncate.minChar,placeholder:truncate.placeholder});for(var i=0,len=lines.length;i<len;i++){lines[i]=truncateSingleLine(lines[i],options)}}}}return{lines:lines,height:height,outerHeight:outerHeight,lineHeight:lineHeight}}function parseRichText(text,style){var contentBlock={lines:[],width:0,height:0};text!=null&&(text+="");if(!text){return contentBlock}var lastIndex=STYLE_REG.lastIndex=0;var result;while((result=STYLE_REG.exec(text))!=null){var matchedIndex=result.index;if(matchedIndex>lastIndex){pushTokens(contentBlock,text.substring(lastIndex,matchedIndex))}pushTokens(contentBlock,result[2],result[1]);lastIndex=STYLE_REG.lastIndex}if(lastIndex<text.length){pushTokens(contentBlock,text.substring(lastIndex,text.length))}var lines=contentBlock.lines;var contentHeight=0;var contentWidth=0;var pendingList=[];var stlPadding=style.textPadding;var truncate=style.truncate;var truncateWidth=truncate&&truncate.outerWidth;var truncateHeight=truncate&&truncate.outerHeight;if(stlPadding){truncateWidth!=null&&(truncateWidth-=stlPadding[1]+stlPadding[3]);truncateHeight!=null&&(truncateHeight-=stlPadding[0]+stlPadding[2])}for(var i=0;i<lines.length;i++){var line=lines[i];var lineHeight=0;var lineWidth=0;for(var j=0;j<line.tokens.length;j++){var token=line.tokens[j];var tokenStyle=token.styleName&&style.rich[token.styleName]||{};var textPadding=token.textPadding=tokenStyle.textPadding;var font=token.font=tokenStyle.font||style.font;var tokenHeight=token.textHeight=retrieve2(tokenStyle.textHeight,getLineHeight(font));textPadding&&(tokenHeight+=textPadding[0]+textPadding[2]);token.height=tokenHeight;token.lineHeight=retrieve3(tokenStyle.textLineHeight,style.textLineHeight,tokenHeight);token.textAlign=tokenStyle&&tokenStyle.textAlign||style.textAlign;token.textVerticalAlign=tokenStyle&&tokenStyle.textVerticalAlign||"middle";if(truncateHeight!=null&&contentHeight+token.lineHeight>truncateHeight){return{lines:[],width:0,height:0}
}token.textWidth=getWidth(token.text,font);var tokenWidth=tokenStyle.textWidth;var tokenWidthNotSpecified=tokenWidth==null||tokenWidth==="auto";if(typeof tokenWidth==="string"&&tokenWidth.charAt(tokenWidth.length-1)==="%"){token.percentWidth=tokenWidth;pendingList.push(token);tokenWidth=0}else{if(tokenWidthNotSpecified){tokenWidth=token.textWidth;var textBackgroundColor=tokenStyle.textBackgroundColor;var bgImg=textBackgroundColor&&textBackgroundColor.image;if(bgImg){bgImg=findExistImage(bgImg);if(isImageReady(bgImg)){tokenWidth=Math.max(tokenWidth,bgImg.width*tokenHeight/bgImg.height)}}}var paddingW=textPadding?textPadding[1]+textPadding[3]:0;tokenWidth+=paddingW;var remianTruncWidth=truncateWidth!=null?truncateWidth-lineWidth:null;if(remianTruncWidth!=null&&remianTruncWidth<tokenWidth){if(!tokenWidthNotSpecified||remianTruncWidth<paddingW){token.text="";token.textWidth=tokenWidth=0}else{token.text=truncateText(token.text,remianTruncWidth-paddingW,font,truncate.ellipsis,{minChar:truncate.minChar});token.textWidth=getWidth(token.text,font);tokenWidth=token.textWidth+paddingW}}}lineWidth+=(token.width=tokenWidth);tokenStyle&&(lineHeight=Math.max(lineHeight,token.lineHeight))}line.width=lineWidth;line.lineHeight=lineHeight;contentHeight+=lineHeight;contentWidth=Math.max(contentWidth,lineWidth)}contentBlock.outerWidth=contentBlock.width=retrieve2(style.textWidth,contentWidth);contentBlock.outerHeight=contentBlock.height=retrieve2(style.textHeight,contentHeight);if(stlPadding){contentBlock.outerWidth+=stlPadding[1]+stlPadding[3];contentBlock.outerHeight+=stlPadding[0]+stlPadding[2]}for(var i=0;i<pendingList.length;i++){var token=pendingList[i];var percentWidth=token.percentWidth;token.width=parseInt(percentWidth,10)/100*contentWidth}return contentBlock}function pushTokens(block,str,styleName){var isEmptyStr=str==="";var strs=str.split("\n");var lines=block.lines;for(var i=0;i<strs.length;i++){var text=strs[i];var token={styleName:styleName,text:text,isLineHolder:!text&&!isEmptyStr};
if(!i){var tokens=(lines[lines.length-1]||(lines[0]={tokens:[]})).tokens;var tokensLen=tokens.length;(tokensLen===1&&tokens[0].isLineHolder)?(tokens[0]=token):((text||!tokensLen||isEmptyStr)&&tokens.push(token))}else{lines.push({tokens:[token]})}}}function makeFont(style){var font=(style.fontSize||style.fontFamily)&&[style.fontStyle,style.fontWeight,(style.fontSize||12)+"px",style.fontFamily||"sans-serif"].join(" ");return font&&trim(font)||style.textFont||style.font}function buildPath(ctx,shape){var x=shape.x;var y=shape.y;var width=shape.width;var height=shape.height;var r=shape.r;var r1;var r2;var r3;var r4;if(width<0){x=x+width;width=-width}if(height<0){y=y+height;height=-height}if(typeof r==="number"){r1=r2=r3=r4=r}else{if(r instanceof Array){if(r.length===1){r1=r2=r3=r4=r[0]}else{if(r.length===2){r1=r3=r[0];r2=r4=r[1]}else{if(r.length===3){r1=r[0];r2=r4=r[1];r3=r[2]}else{r1=r[0];r2=r[1];r3=r[2];r4=r[3]}}}}else{r1=r2=r3=r4=0}}var total;if(r1+r2>width){total=r1+r2;r1*=width/total;r2*=width/total}if(r3+r4>width){total=r3+r4;r3*=width/total;r4*=width/total}if(r2+r3>height){total=r2+r3;r2*=height/total;r3*=height/total}if(r1+r4>height){total=r1+r4;r1*=height/total;r4*=height/total}ctx.moveTo(x+r1,y);ctx.lineTo(x+width-r2,y);r2!==0&&ctx.arc(x+width-r2,y+r2,r2,-Math.PI/2,0);ctx.lineTo(x+width,y+height-r3);r3!==0&&ctx.arc(x+width-r3,y+height-r3,r3,0,Math.PI/2);ctx.lineTo(x+r4,y+height);r4!==0&&ctx.arc(x+r4,y+height-r4,r4,Math.PI/2,Math.PI);ctx.lineTo(x,y+r1);r1!==0&&ctx.arc(x+r1,y+r1,r1,Math.PI,Math.PI*1.5)}var DEFAULT_FONT=DEFAULT_FONT$1;var VALID_TEXT_ALIGN={left:1,right:1,center:1};var VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1};var SHADOW_STYLE_COMMON_PROPS=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]];function normalizeTextStyle(style){normalizeStyle(style);each$1(style.rich,normalizeStyle);return style}function normalizeStyle(style){if(style){style.font=makeFont(style);
var textAlign=style.textAlign;textAlign==="middle"&&(textAlign="center");style.textAlign=(textAlign==null||VALID_TEXT_ALIGN[textAlign])?textAlign:"left";var textVerticalAlign=style.textVerticalAlign||style.textBaseline;textVerticalAlign==="center"&&(textVerticalAlign="middle");style.textVerticalAlign=(textVerticalAlign==null||VALID_TEXT_VERTICAL_ALIGN[textVerticalAlign])?textVerticalAlign:"top";var textPadding=style.textPadding;if(textPadding){style.textPadding=normalizeCssArray(style.textPadding)}}}function renderText(hostEl,ctx,text,style,rect,prevEl){style.rich?renderRichText(hostEl,ctx,text,style,rect,prevEl):renderPlainText(hostEl,ctx,text,style,rect,prevEl)}function renderPlainText(hostEl,ctx,text,style,rect,prevEl){var needDrawBg=needDrawBackground(style);var prevStyle;var checkCache=false;var cachedByMe=ctx.__attrCachedBy===ContextCachedBy.PLAIN_TEXT;if(prevEl!==WILL_BE_RESTORED){if(prevEl){prevStyle=prevEl.style;checkCache=!needDrawBg&&cachedByMe&&prevStyle}ctx.__attrCachedBy=needDrawBg?ContextCachedBy.NONE:ContextCachedBy.PLAIN_TEXT}else{if(cachedByMe){ctx.__attrCachedBy=ContextCachedBy.NONE}}var styleFont=style.font||DEFAULT_FONT;if(!checkCache||styleFont!==(prevStyle.font||DEFAULT_FONT)){ctx.font=styleFont}var computedFont=hostEl.__computedFont;if(hostEl.__styleFont!==styleFont){hostEl.__styleFont=styleFont;computedFont=hostEl.__computedFont=ctx.font}var textPadding=style.textPadding;var textLineHeight=style.textLineHeight;var contentBlock=hostEl.__textCotentBlock;if(!contentBlock||hostEl.__dirtyText){contentBlock=hostEl.__textCotentBlock=parsePlainText(text,computedFont,textPadding,textLineHeight,style.truncate)}var outerHeight=contentBlock.outerHeight;var textLines=contentBlock.lines;var lineHeight=contentBlock.lineHeight;var boxPos=getBoxPosition(outerHeight,style,rect);var baseX=boxPos.baseX;var baseY=boxPos.baseY;var textAlign=boxPos.textAlign||"left";var textVerticalAlign=boxPos.textVerticalAlign;applyTextRotation(ctx,style,rect,baseX,baseY);var boxY=adjustTextY(baseY,outerHeight,textVerticalAlign);
var textX=baseX;var textY=boxY;if(needDrawBg||textPadding){var textWidth=getWidth(text,computedFont);var outerWidth=textWidth;textPadding&&(outerWidth+=textPadding[1]+textPadding[3]);var boxX=adjustTextX(baseX,outerWidth,textAlign);needDrawBg&&drawBackground(hostEl,ctx,style,boxX,boxY,outerWidth,outerHeight);if(textPadding){textX=getTextXForPadding(baseX,textAlign,textPadding);textY+=textPadding[0]}}ctx.textAlign=textAlign;ctx.textBaseline="middle";ctx.globalAlpha=style.opacity||1;for(var i=0;i<SHADOW_STYLE_COMMON_PROPS.length;i++){var propItem=SHADOW_STYLE_COMMON_PROPS[i];var styleProp=propItem[0];var ctxProp=propItem[1];var val=style[styleProp];if(!checkCache||val!==prevStyle[styleProp]){ctx[ctxProp]=fixShadow(ctx,ctxProp,val||propItem[2])}}textY+=lineHeight/2;var textStrokeWidth=style.textStrokeWidth;var textStrokeWidthPrev=checkCache?prevStyle.textStrokeWidth:null;var strokeWidthChanged=!checkCache||textStrokeWidth!==textStrokeWidthPrev;var strokeChanged=!checkCache||strokeWidthChanged||style.textStroke!==prevStyle.textStroke;var textStroke=getStroke(style.textStroke,textStrokeWidth);var textFill=getFill(style.textFill);if(textStroke){if(strokeWidthChanged){ctx.lineWidth=textStrokeWidth}if(strokeChanged){ctx.strokeStyle=textStroke}}if(textFill){if(!checkCache||style.textFill!==prevStyle.textFill){ctx.fillStyle=textFill}}if(textLines.length===1){textStroke&&ctx.strokeText(textLines[0],textX,textY);textFill&&ctx.fillText(textLines[0],textX,textY)}else{for(var i=0;i<textLines.length;i++){textStroke&&ctx.strokeText(textLines[i],textX,textY);textFill&&ctx.fillText(textLines[i],textX,textY);textY+=lineHeight}}}function renderRichText(hostEl,ctx,text,style,rect,prevEl){if(prevEl!==WILL_BE_RESTORED){ctx.__attrCachedBy=ContextCachedBy.NONE}var contentBlock=hostEl.__textCotentBlock;if(!contentBlock||hostEl.__dirtyText){contentBlock=hostEl.__textCotentBlock=parseRichText(text,style)}drawRichText(hostEl,ctx,contentBlock,style,rect)}function drawRichText(hostEl,ctx,contentBlock,style,rect){var contentWidth=contentBlock.width;
var outerWidth=contentBlock.outerWidth;var outerHeight=contentBlock.outerHeight;var textPadding=style.textPadding;var boxPos=getBoxPosition(outerHeight,style,rect);var baseX=boxPos.baseX;var baseY=boxPos.baseY;var textAlign=boxPos.textAlign;var textVerticalAlign=boxPos.textVerticalAlign;applyTextRotation(ctx,style,rect,baseX,baseY);var boxX=adjustTextX(baseX,outerWidth,textAlign);var boxY=adjustTextY(baseY,outerHeight,textVerticalAlign);var xLeft=boxX;var lineTop=boxY;if(textPadding){xLeft+=textPadding[3];lineTop+=textPadding[0]}var xRight=xLeft+contentWidth;needDrawBackground(style)&&drawBackground(hostEl,ctx,style,boxX,boxY,outerWidth,outerHeight);for(var i=0;i<contentBlock.lines.length;i++){var line=contentBlock.lines[i];var tokens=line.tokens;var tokenCount=tokens.length;var lineHeight=line.lineHeight;var usedWidth=line.width;var leftIndex=0;var lineXLeft=xLeft;var lineXRight=xRight;var rightIndex=tokenCount-1;var token;while(leftIndex<tokenCount&&(token=tokens[leftIndex],!token.textAlign||token.textAlign==="left")){placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXLeft,"left");usedWidth-=token.width;lineXLeft+=token.width;leftIndex++}while(rightIndex>=0&&(token=tokens[rightIndex],token.textAlign==="right")){placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXRight,"right");usedWidth-=token.width;lineXRight-=token.width;rightIndex--}lineXLeft+=(contentWidth-(lineXLeft-xLeft)-(xRight-lineXRight)-usedWidth)/2;while(leftIndex<=rightIndex){token=tokens[leftIndex];placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXLeft+token.width/2,"center");lineXLeft+=token.width;leftIndex++}lineTop+=lineHeight}}function applyTextRotation(ctx,style,rect,x,y){if(rect&&style.textRotation){var origin=style.textOrigin;if(origin==="center"){x=rect.width/2+rect.x;y=rect.height/2+rect.y}else{if(origin){x=origin[0]+rect.x;y=origin[1]+rect.y}}ctx.translate(x,y);ctx.rotate(-style.textRotation);ctx.translate(-x,-y)}}function placeToken(hostEl,ctx,token,style,lineHeight,lineTop,x,textAlign){var tokenStyle=style.rich[token.styleName]||{};
tokenStyle.text=token.text;var textVerticalAlign=token.textVerticalAlign;var y=lineTop+lineHeight/2;if(textVerticalAlign==="top"){y=lineTop+token.height/2}else{if(textVerticalAlign==="bottom"){y=lineTop+lineHeight-token.height/2}}!token.isLineHolder&&needDrawBackground(tokenStyle)&&drawBackground(hostEl,ctx,tokenStyle,textAlign==="right"?x-token.width:textAlign==="center"?x-token.width/2:x,y-token.height/2,token.width,token.height);var textPadding=token.textPadding;if(textPadding){x=getTextXForPadding(x,textAlign,textPadding);y-=token.height/2-textPadding[2]-token.textHeight/2}setCtx(ctx,"shadowBlur",retrieve3(tokenStyle.textShadowBlur,style.textShadowBlur,0));setCtx(ctx,"shadowColor",tokenStyle.textShadowColor||style.textShadowColor||"transparent");setCtx(ctx,"shadowOffsetX",retrieve3(tokenStyle.textShadowOffsetX,style.textShadowOffsetX,0));setCtx(ctx,"shadowOffsetY",retrieve3(tokenStyle.textShadowOffsetY,style.textShadowOffsetY,0));setCtx(ctx,"textAlign",textAlign);setCtx(ctx,"textBaseline","middle");setCtx(ctx,"font",token.font||DEFAULT_FONT);var textStroke=getStroke(tokenStyle.textStroke||style.textStroke,textStrokeWidth);var textFill=getFill(tokenStyle.textFill||style.textFill);var textStrokeWidth=retrieve2(tokenStyle.textStrokeWidth,style.textStrokeWidth);if(textStroke){setCtx(ctx,"lineWidth",textStrokeWidth);setCtx(ctx,"strokeStyle",textStroke);ctx.strokeText(token.text,x,y)}if(textFill){setCtx(ctx,"fillStyle",textFill);ctx.fillText(token.text,x,y)}}function needDrawBackground(style){return !!(style.textBackgroundColor||(style.textBorderWidth&&style.textBorderColor))}function drawBackground(hostEl,ctx,style,x,y,width,height){var textBackgroundColor=style.textBackgroundColor;var textBorderWidth=style.textBorderWidth;var textBorderColor=style.textBorderColor;var isPlainBg=isString(textBackgroundColor);setCtx(ctx,"shadowBlur",style.textBoxShadowBlur||0);setCtx(ctx,"shadowColor",style.textBoxShadowColor||"transparent");setCtx(ctx,"shadowOffsetX",style.textBoxShadowOffsetX||0);
setCtx(ctx,"shadowOffsetY",style.textBoxShadowOffsetY||0);if(isPlainBg||(textBorderWidth&&textBorderColor)){ctx.beginPath();var textBorderRadius=style.textBorderRadius;if(!textBorderRadius){ctx.rect(x,y,width,height)}else{buildPath(ctx,{x:x,y:y,width:width,height:height,r:textBorderRadius})}ctx.closePath()}if(isPlainBg){setCtx(ctx,"fillStyle",textBackgroundColor);if(style.fillOpacity!=null){var originalGlobalAlpha=ctx.globalAlpha;ctx.globalAlpha=style.fillOpacity*style.opacity;ctx.fill();ctx.globalAlpha=originalGlobalAlpha}else{ctx.fill()}}else{if(isObject$1(textBackgroundColor)){var image=textBackgroundColor.image;image=createOrUpdateImage(image,null,hostEl,onBgImageLoaded,textBackgroundColor);if(image&&isImageReady(image)){ctx.drawImage(image,x,y,width,height)}}}if(textBorderWidth&&textBorderColor){setCtx(ctx,"lineWidth",textBorderWidth);setCtx(ctx,"strokeStyle",textBorderColor);if(style.strokeOpacity!=null){var originalGlobalAlpha=ctx.globalAlpha;ctx.globalAlpha=style.strokeOpacity*style.opacity;ctx.stroke();ctx.globalAlpha=originalGlobalAlpha}else{ctx.stroke()}}}function onBgImageLoaded(image,textBackgroundColor){textBackgroundColor.image=image}function getBoxPosition(blockHeiht,style,rect){var baseX=style.x||0;var baseY=style.y||0;var textAlign=style.textAlign;var textVerticalAlign=style.textVerticalAlign;if(rect){var textPosition=style.textPosition;if(textPosition instanceof Array){baseX=rect.x+parsePercent(textPosition[0],rect.width);baseY=rect.y+parsePercent(textPosition[1],rect.height)}else{var res=adjustTextPositionOnRect(textPosition,rect,style.textDistance);baseX=res.x;baseY=res.y;textAlign=textAlign||res.textAlign;textVerticalAlign=textVerticalAlign||res.textVerticalAlign}var textOffset=style.textOffset;if(textOffset){baseX+=textOffset[0];baseY+=textOffset[1]}}return{baseX:baseX,baseY:baseY,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}function setCtx(ctx,prop,value){ctx[prop]=fixShadow(ctx,prop,value);return ctx[prop]}function getStroke(stroke,lineWidth){return(stroke==null||lineWidth<=0||stroke==="transparent"||stroke==="none")?null:(stroke.image||stroke.colorStops)?"#000":stroke
}function getFill(fill){return(fill==null||fill==="none")?null:(fill.image||fill.colorStops)?"#000":fill}function parsePercent(value,maxValue){if(typeof value==="string"){if(value.lastIndexOf("%")>=0){return parseFloat(value)/100*maxValue}return parseFloat(value)}return value}function getTextXForPadding(x,textAlign,textPadding){return textAlign==="right"?(x-textPadding[1]):textAlign==="center"?(x+textPadding[3]/2-textPadding[1]/2):(x+textPadding[3])}function needDrawText(text,style){return text!=null&&(text||style.textBackgroundColor||(style.textBorderWidth&&style.textBorderColor)||style.textPadding)}var tmpRect$1=new BoundingRect();var RectText=function(){};RectText.prototype={constructor:RectText,drawRectText:function(ctx,rect){var style=this.style;rect=style.textRect||rect;this.__dirty&&normalizeTextStyle(style,true);var text=style.text;text!=null&&(text+="");if(!needDrawText(text,style)){return}ctx.save();var transform=this.transform;if(!style.transformText){if(transform){tmpRect$1.copy(rect);tmpRect$1.applyTransform(transform);rect=tmpRect$1}}else{this.setTransform(ctx)}renderText(this,ctx,text,style,rect,WILL_BE_RESTORED);ctx.restore()}};function Displayable(opts){opts=opts||{};Element.call(this,opts);for(var name in opts){if(opts.hasOwnProperty(name)&&name!=="style"){this[name]=opts[name]}}this.style=new Style(opts.style,this);this._rect=null;this.__clipPaths=[]}Displayable.prototype={constructor:Displayable,type:"displayable",__dirty:true,invisible:false,z:0,z2:0,zlevel:0,draggable:false,dragging:false,silent:false,culling:false,cursor:"pointer",rectHover:false,progressive:false,incremental:false,globalScaleRatio:1,beforeBrush:function(ctx){},afterBrush:function(ctx){},brush:function(ctx,prevEl){},getBoundingRect:function(){},contain:function(x,y){return this.rectContain(x,y)},traverse:function(cb,context){cb.call(context,this)},rectContain:function(x,y){var coord=this.transformCoordToLocal(x,y);var rect=this.getBoundingRect();return rect.contain(coord[0],coord[1])
},dirty:function(){this.__dirty=this.__dirtyText=true;this._rect=null;this.__zr&&this.__zr.refresh()},animateStyle:function(loop){return this.animate("style",loop)},attrKV:function(key,value){if(key!=="style"){Element.prototype.attrKV.call(this,key,value)}else{this.style.set(value)}},setStyle:function(key,value){this.style.set(key,value);this.dirty(false);return this},useStyle:function(obj){this.style=new Style(obj,this);this.dirty(false);return this}};inherits(Displayable,Element);mixin(Displayable,RectText);function ZImage(opts){Displayable.call(this,opts)}ZImage.prototype={constructor:ZImage,type:"image",brush:function(ctx,prevEl){var style=this.style;var src=style.image;style.bind(ctx,this,prevEl);var image=this._image=createOrUpdateImage(src,this._image,this,this.onload);if(!image||!isImageReady(image)){return}var x=style.x||0;var y=style.y||0;var width=style.width;var height=style.height;var aspect=image.width/image.height;if(width==null&&height!=null){width=height*aspect}else{if(height==null&&width!=null){height=width/aspect}else{if(width==null&&height==null){width=image.width;height=image.height}}}this.setTransform(ctx);if(style.sWidth&&style.sHeight){var sx=style.sx||0;var sy=style.sy||0;ctx.drawImage(image,sx,sy,style.sWidth,style.sHeight,x,y,width,height)}else{if(style.sx&&style.sy){var sx=style.sx;var sy=style.sy;var sWidth=width-sx;var sHeight=height-sy;ctx.drawImage(image,sx,sy,sWidth,sHeight,x,y,width,height)}else{ctx.drawImage(image,x,y,width,height)}}if(style.text!=null){this.restoreTransform(ctx);this.drawRectText(ctx,this.getBoundingRect())}},getBoundingRect:function(){var style=this.style;if(!this._rect){this._rect=new BoundingRect(style.x||0,style.y||0,style.width||0,style.height||0)}return this._rect}};inherits(ZImage,Displayable);var HOVER_LAYER_ZLEVEL=100000;var CANVAS_ZLEVEL=314159;var EL_AFTER_INCREMENTAL_INC=0.01;var INCREMENTAL_INC=0.001;function parseInt10(val){return parseInt(val,10)}function isLayerValid(layer){if(!layer){return false}if(layer.__builtin__){return true
}if(typeof(layer.resize)!=="function"||typeof(layer.refresh)!=="function"){return false}return true}var tmpRect=new BoundingRect(0,0,0,0);var viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(el,width,height){tmpRect.copy(el.getBoundingRect());if(el.transform){tmpRect.applyTransform(el.transform)}viewRect.width=width;viewRect.height=height;return !tmpRect.intersect(viewRect)}function isClipPathChanged(clipPaths,prevClipPaths){if(clipPaths===prevClipPaths){return false}if(!clipPaths||!prevClipPaths||(clipPaths.length!==prevClipPaths.length)){return true}for(var i=0;i<clipPaths.length;i++){if(clipPaths[i]!==prevClipPaths[i]){return true}}}function doClip(clipPaths,ctx){for(var i=0;i<clipPaths.length;i++){var clipPath=clipPaths[i];clipPath.setTransform(ctx);ctx.beginPath();clipPath.buildPath(ctx,clipPath.shape);ctx.clip();clipPath.restoreTransform(ctx)}}function createRoot(width,height){var domRoot=document.createElement("div");domRoot.style.cssText=["position:relative","overflow:hidden","width:"+width+"px","height:"+height+"px","padding:0","margin:0","border-width:0"].join(";")+";";return domRoot}var Painter=function(root,storage,opts){this.type="canvas";var singleCanvas=!root.nodeName||root.nodeName.toUpperCase()==="CANVAS";this._opts=opts=extend({},opts||{});this.dpr=opts.devicePixelRatio||devicePixelRatio;this._singleCanvas=singleCanvas;this.root=root;var rootStyle=root.style;if(rootStyle){rootStyle["-webkit-tap-highlight-color"]="transparent";rootStyle["-webkit-user-select"]=rootStyle["user-select"]=rootStyle["-webkit-touch-callout"]="none";root.innerHTML=""}this.storage=storage;var zlevelList=this._zlevelList=[];var layers=this._layers={};this._layerConfig={};this._needsManuallyCompositing=false;if(!singleCanvas){this._width=this._getSize(0);this._height=this._getSize(1);var domRoot=this._domRoot=createRoot(this._width,this._height);root.appendChild(domRoot)}else{var width=root.width;var height=root.height;if(opts.width!=null){width=opts.width}if(opts.height!=null){height=opts.height
}this.dpr=opts.devicePixelRatio||1;root.width=width*this.dpr;root.height=height*this.dpr;this._width=width;this._height=height;var mainLayer=new Layer(root,this,this.dpr);mainLayer.__builtin__=true;mainLayer.initContext();layers[CANVAS_ZLEVEL]=mainLayer;mainLayer.zlevel=CANVAS_ZLEVEL;zlevelList.push(CANVAS_ZLEVEL);this._domRoot=root}this._hoverlayer=null;this._hoverElements=[]};Painter.prototype={constructor:Painter,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var viewportRoot=this.getViewportRoot();if(viewportRoot){return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}}},refresh:function(paintAll){var list=this.storage.getDisplayList(true);var zlevelList=this._zlevelList;this._redrawId=Math.random();this._paintList(list,paintAll,this._redrawId);for(var i=0;i<zlevelList.length;i++){var z=zlevelList[i];var layer=this._layers[z];if(!layer.__builtin__&&layer.refresh){var clearColor=i===0?this._backgroundColor:null;layer.refresh(clearColor)}}this.refreshHover();return this},addHover:function(el,hoverStyle){if(el.__hoverMir){return}var elMirror=new el.constructor({style:el.style,shape:el.shape,z:el.z,z2:el.z2,silent:el.silent});elMirror.__from=el;el.__hoverMir=elMirror;hoverStyle&&elMirror.setStyle(hoverStyle);this._hoverElements.push(elMirror);return elMirror},removeHover:function(el){var elMirror=el.__hoverMir;var hoverElements=this._hoverElements;var idx=indexOf(hoverElements,elMirror);if(idx>=0){hoverElements.splice(idx,1)}el.__hoverMir=null},clearHover:function(el){var hoverElements=this._hoverElements;for(var i=0;i<hoverElements.length;i++){var from=hoverElements[i].__from;if(from){from.__hoverMir=null}}hoverElements.length=0},refreshHover:function(){var hoverElements=this._hoverElements;var len=hoverElements.length;var hoverLayer=this._hoverlayer;hoverLayer&&hoverLayer.clear();if(!len){return}sort(hoverElements,this.storage.displayableSortFunc);
if(!hoverLayer){hoverLayer=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)}var scope={};hoverLayer.ctx.save();for(var i=0;i<len;){var el=hoverElements[i];var originalEl=el.__from;if(!(originalEl&&originalEl.__zr)){hoverElements.splice(i,1);originalEl.__hoverMir=null;len--;continue}i++;if(!originalEl.invisible){el.transform=originalEl.transform;el.invTransform=originalEl.invTransform;el.__clipPaths=originalEl.__clipPaths;this._doPaintEl(el,hoverLayer,true,scope)}}hoverLayer.ctx.restore()},getHoverLayer:function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},_paintList:function(list,paintAll,redrawId){if(this._redrawId!==redrawId){return}paintAll=paintAll||false;this._updateLayerStatus(list);var finished=this._doPaintList(list,paintAll);if(this._needsManuallyCompositing){this._compositeManually()}if(!finished){var self=this;requestAnimationFrame(function(){self._paintList(list,paintAll,redrawId)})}},_compositeManually:function(){var ctx=this.getLayer(CANVAS_ZLEVEL).ctx;var width=this._domRoot.width;var height=this._domRoot.height;ctx.clearRect(0,0,width,height);this.eachBuiltinLayer(function(layer){if(layer.virtual){ctx.drawImage(layer.dom,0,0,width,height)}})},_doPaintList:function(list,paintAll){var layerList=[];for(var zi=0;zi<this._zlevelList.length;zi++){var zlevel=this._zlevelList[zi];var layer=this._layers[zlevel];if(layer.__builtin__&&layer!==this._hoverlayer&&(layer.__dirty||paintAll)){layerList.push(layer)}}var finished=true;for(var k=0;k<layerList.length;k++){var layer=layerList[k];var ctx=layer.ctx;var scope={};ctx.save();var start=paintAll?layer.__startIndex:layer.__drawIndex;var useTimer=!paintAll&&layer.incremental&&Date.now;var startTime=useTimer&&Date.now();var clearColor=layer.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(layer.__startIndex===layer.__endIndex){layer.clear(false,clearColor)}else{if(start===layer.__startIndex){var firstEl=list[start];if(!firstEl.incremental||!firstEl.notClear||paintAll){layer.clear(false,clearColor)}}}if(start===-1){console.error("For some unknown reason. drawIndex is -1");
start=layer.__startIndex}for(var i=start;i<layer.__endIndex;i++){var el=list[i];this._doPaintEl(el,layer,paintAll,scope);el.__dirty=el.__dirtyText=false;if(useTimer){var dTime=Date.now()-startTime;if(dTime>15){break}}}layer.__drawIndex=i;if(layer.__drawIndex<layer.__endIndex){finished=false}if(scope.prevElClipPaths){ctx.restore()}ctx.restore()}if(env$1.wxa){each$1(this._layers,function(layer){if(layer&&layer.ctx&&layer.ctx.draw){layer.ctx.draw()}})}return finished},_doPaintEl:function(el,currentLayer,forcePaint,scope){var ctx=currentLayer.ctx;var m=el.transform;if((currentLayer.__dirty||forcePaint)&&!el.invisible&&el.style.opacity!==0&&!(m&&!m[0]&&!m[3])&&!(el.culling&&isDisplayableCulled(el,this._width,this._height))){var clipPaths=el.__clipPaths;if(!scope.prevElClipPaths||isClipPathChanged(clipPaths,scope.prevElClipPaths)){if(scope.prevElClipPaths){currentLayer.ctx.restore();scope.prevElClipPaths=null;scope.prevEl=null}if(clipPaths){ctx.save();doClip(clipPaths,ctx);scope.prevElClipPaths=clipPaths}}el.beforeBrush&&el.beforeBrush(ctx);el.brush(ctx,scope.prevEl||null);scope.prevEl=el;el.afterBrush&&el.afterBrush(ctx)}},getLayer:function(zlevel,virtual){if(this._singleCanvas&&!this._needsManuallyCompositing){zlevel=CANVAS_ZLEVEL}var layer=this._layers[zlevel];if(!layer){layer=new Layer("zr_"+zlevel,this,this.dpr);layer.zlevel=zlevel;layer.__builtin__=true;if(this._layerConfig[zlevel]){merge(layer,this._layerConfig[zlevel],true)}if(virtual){layer.virtual=virtual}this.insertLayer(zlevel,layer);layer.initContext()}return layer},insertLayer:function(zlevel,layer){var layersMap=this._layers;var zlevelList=this._zlevelList;var len=zlevelList.length;var prevLayer=null;var i=-1;var domRoot=this._domRoot;if(layersMap[zlevel]){zrLog("ZLevel "+zlevel+" has been used already");return}if(!isLayerValid(layer)){zrLog("Layer of zlevel "+zlevel+" is not valid");return}if(len>0&&zlevel>zlevelList[0]){for(i=0;i<len-1;i++){if(zlevelList[i]<zlevel&&zlevelList[i+1]>zlevel){break}}prevLayer=layersMap[zlevelList[i]]
}zlevelList.splice(i+1,0,zlevel);layersMap[zlevel]=layer;if(!layer.virtual){if(prevLayer){var prevDom=prevLayer.dom;if(prevDom.nextSibling){domRoot.insertBefore(layer.dom,prevDom.nextSibling)}else{domRoot.appendChild(layer.dom)}}else{if(domRoot.firstChild){domRoot.insertBefore(layer.dom,domRoot.firstChild)}else{domRoot.appendChild(layer.dom)}}}},eachLayer:function(cb,context){var zlevelList=this._zlevelList;var z;var i;for(i=0;i<zlevelList.length;i++){z=zlevelList[i];cb.call(context,this._layers[z],z)}},eachBuiltinLayer:function(cb,context){var zlevelList=this._zlevelList;var layer;var z;var i;for(i=0;i<zlevelList.length;i++){z=zlevelList[i];layer=this._layers[z];if(layer.__builtin__){cb.call(context,layer,z)}}},eachOtherLayer:function(cb,context){var zlevelList=this._zlevelList;var layer;var z;var i;for(i=0;i<zlevelList.length;i++){z=zlevelList[i];layer=this._layers[z];if(!layer.__builtin__){cb.call(context,layer,z)}}},getLayers:function(){return this._layers},_updateLayerStatus:function(list){this.eachBuiltinLayer(function(layer,z){layer.__dirty=layer.__used=false});function updatePrevLayer(idx){if(prevLayer){if(prevLayer.__endIndex!==idx){prevLayer.__dirty=true}prevLayer.__endIndex=idx}}if(this._singleCanvas){for(var i=1;i<list.length;i++){var el=list[i];if(el.zlevel!==list[i-1].zlevel||el.incremental){this._needsManuallyCompositing=true;break}}}var prevLayer=null;var incrementalLayerCount=0;for(var i=0;i<list.length;i++){var el=list[i];var zlevel=el.zlevel;var layer;if(el.incremental){layer=this.getLayer(zlevel+INCREMENTAL_INC,this._needsManuallyCompositing);layer.incremental=true;incrementalLayerCount=1}else{layer=this.getLayer(zlevel+(incrementalLayerCount>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing)}if(!layer.__builtin__){zrLog("ZLevel "+zlevel+" has been used by unkown layer "+layer.id)}if(layer!==prevLayer){layer.__used=true;if(layer.__startIndex!==i){layer.__dirty=true}layer.__startIndex=i;if(!layer.incremental){layer.__drawIndex=i}else{layer.__drawIndex=-1
}updatePrevLayer(i);prevLayer=layer}if(el.__dirty){layer.__dirty=true;if(layer.incremental&&layer.__drawIndex<0){layer.__drawIndex=i}}}updatePrevLayer(i);this.eachBuiltinLayer(function(layer,z){if(!layer.__used&&layer.getElementCount()>0){layer.__dirty=true;layer.__startIndex=layer.__endIndex=layer.__drawIndex=0}if(layer.__dirty&&layer.__drawIndex<0){layer.__drawIndex=layer.__startIndex}})},clear:function(){this.eachBuiltinLayer(this._clearLayer);return this},_clearLayer:function(layer){layer.clear()},setBackgroundColor:function(backgroundColor){this._backgroundColor=backgroundColor},configLayer:function(zlevel,config){if(config){var layerConfig=this._layerConfig;if(!layerConfig[zlevel]){layerConfig[zlevel]=config}else{merge(layerConfig[zlevel],config,true)}for(var i=0;i<this._zlevelList.length;i++){var _zlevel=this._zlevelList[i];if(_zlevel===zlevel||_zlevel===zlevel+EL_AFTER_INCREMENTAL_INC){var layer=this._layers[_zlevel];merge(layer,layerConfig[zlevel],true)}}}},delLayer:function(zlevel){var layers=this._layers;var zlevelList=this._zlevelList;var layer=layers[zlevel];if(!layer){return}layer.dom.parentNode.removeChild(layer.dom);delete layers[zlevel];zlevelList.splice(indexOf(zlevelList,zlevel),1)},resize:function(width,height){if(!this._domRoot.style){if(width==null||height==null){return}this._width=width;this._height=height;this.getLayer(CANVAS_ZLEVEL).resize(width,height)}else{var domRoot=this._domRoot;domRoot.style.display="none";var opts=this._opts;width!=null&&(opts.width=width);height!=null&&(opts.height=height);width=this._getSize(0);height=this._getSize(1);domRoot.style.display="";if(this._width!==width||height!==this._height){domRoot.style.width=width+"px";domRoot.style.height=height+"px";for(var id in this._layers){if(this._layers.hasOwnProperty(id)){this._layers[id].resize(width,height)}}each$1(this._progressiveLayers,function(layer){layer.resize(width,height)});this.refresh(true)}this._width=width;this._height=height}return this},clearLayer:function(zlevel){var layer=this._layers[zlevel];
if(layer){layer.clear()}},dispose:function(){this.root.innerHTML="";this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(opts){opts=opts||{};if(this._singleCanvas&&!this._compositeManually){return this._layers[CANVAS_ZLEVEL].dom}var imageLayer=new Layer("image",this,opts.pixelRatio||this.dpr);imageLayer.initContext();imageLayer.clear(false,opts.backgroundColor||this._backgroundColor);if(opts.pixelRatio<=this.dpr){this.refresh();var width=imageLayer.dom.width;var height=imageLayer.dom.height;var ctx=imageLayer.ctx;this.eachLayer(function(layer){if(layer.__builtin__){ctx.drawImage(layer.dom,0,0,width,height)}else{if(layer.renderToCanvas){imageLayer.ctx.save();layer.renderToCanvas(imageLayer.ctx);imageLayer.ctx.restore()}}})}else{var scope={};var displayList=this.storage.getDisplayList(true);for(var i=0;i<displayList.length;i++){var el=displayList[i];this._doPaintEl(el,imageLayer,true,scope)}}return imageLayer.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(whIdx){var opts=this._opts;var wh=["width","height"][whIdx];var cwh=["clientWidth","clientHeight"][whIdx];var plt=["paddingLeft","paddingTop"][whIdx];var prb=["paddingRight","paddingBottom"][whIdx];if(opts[wh]!=null&&opts[wh]!=="auto"){return parseFloat(opts[wh])}var root=this.root;var stl=document.defaultView.getComputedStyle(root);return((root[cwh]||parseInt10(stl[wh])||parseInt10(root.style[wh]))-(parseInt10(stl[plt])||0)-(parseInt10(stl[prb])||0))|0},pathToImage:function(path,dpr){dpr=dpr||this.dpr;var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");var rect=path.getBoundingRect();var style=path.style;var shadowBlurSize=style.shadowBlur*dpr;var shadowOffsetX=style.shadowOffsetX*dpr;var shadowOffsetY=style.shadowOffsetY*dpr;var lineWidth=style.hasStroke()?style.lineWidth:0;var leftMargin=Math.max(lineWidth/2,-shadowOffsetX+shadowBlurSize);var rightMargin=Math.max(lineWidth/2,shadowOffsetX+shadowBlurSize);
var topMargin=Math.max(lineWidth/2,-shadowOffsetY+shadowBlurSize);var bottomMargin=Math.max(lineWidth/2,shadowOffsetY+shadowBlurSize);var width=rect.width+leftMargin+rightMargin;var height=rect.height+topMargin+bottomMargin;canvas.width=width*dpr;canvas.height=height*dpr;ctx.scale(dpr,dpr);ctx.clearRect(0,0,width,height);ctx.dpr=dpr;var pathTransform={position:path.position,rotation:path.rotation,scale:path.scale};path.position=[leftMargin-rect.x,topMargin-rect.y];path.rotation=0;path.scale=[1,1];path.updateTransform();if(path){path.brush(ctx)}var ImageShape=ZImage;var imgShape=new ImageShape({style:{x:0,y:0,image:canvas}});if(pathTransform.position!=null){imgShape.position=path.position=pathTransform.position}if(pathTransform.rotation!=null){imgShape.rotation=path.rotation=pathTransform.rotation}if(pathTransform.scale!=null){imgShape.scale=path.scale=pathTransform.scale}return imgShape}};var Animation=function(options){options=options||{};this.stage=options.stage||{};this.onframe=options.onframe||function(){};this._clips=[];this._running=false;this._time;this._pausedTime;this._pauseStart;this._paused=false;Eventful.call(this)};Animation.prototype={constructor:Animation,addClip:function(clip){this._clips.push(clip)},addAnimator:function(animator){animator.animation=this;var clips=animator.getClips();for(var i=0;i<clips.length;i++){this.addClip(clips[i])}},removeClip:function(clip){var idx=indexOf(this._clips,clip);if(idx>=0){this._clips.splice(idx,1)}},removeAnimator:function(animator){var clips=animator.getClips();for(var i=0;i<clips.length;i++){this.removeClip(clips[i])}animator.animation=null},_update:function(){var time=new Date().getTime()-this._pausedTime;var delta=time-this._time;var clips=this._clips;var len=clips.length;var deferredEvents=[];var deferredClips=[];for(var i=0;i<len;i++){var clip=clips[i];var e=clip.step(time,delta);if(e){deferredEvents.push(e);deferredClips.push(clip)}}for(var i=0;i<len;){if(clips[i]._needsRemove){clips[i]=clips[len-1];clips.pop();
len--}else{i++}}len=deferredEvents.length;for(var i=0;i<len;i++){deferredClips[i].fire(deferredEvents[i])}this._time=time;this.onframe(delta);this.trigger("frame",delta);if(this.stage.update){this.stage.update()}},_startLoop:function(){var self=this;this._running=true;function step(){if(self._running){requestAnimationFrame(step);!self._paused&&self._update()}}requestAnimationFrame(step)},start:function(){this._time=new Date().getTime();this._pausedTime=0;this._startLoop()},stop:function(){this._running=false},pause:function(){if(!this._paused){this._pauseStart=new Date().getTime();this._paused=true}},resume:function(){if(this._paused){this._pausedTime+=(new Date().getTime())-this._pauseStart;this._paused=false}},clear:function(){this._clips=[]},isFinished:function(){return !this._clips.length},animate:function(target,options){options=options||{};var animator=new Animator(target,options.loop,options.getter,options.setter);this.addAnimator(animator);return animator}};mixin(Animation,Eventful);var TOUCH_CLICK_DELAY=300;var mouseHandlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];var touchHandlerNames=["touchstart","touchend","touchmove"];var pointerEventNames={pointerdown:1,pointerup:1,pointermove:1,pointerout:1};var pointerHandlerNames=map(mouseHandlerNames,function(name){var nm=name.replace("mouse","pointer");return pointerEventNames[nm]?nm:name});function eventNameFix(name){return(name==="mousewheel"&&env$1.browser.firefox)?"DOMMouseScroll":name}function setTouchTimer(instance){instance._touching=true;clearTimeout(instance._touchTimer);instance._touchTimer=setTimeout(function(){instance._touching=false},700)}var domHandlers={mousemove:function(event){event=normalizeEvent(this.dom,event);this.trigger("mousemove",event)},mouseout:function(event){event=normalizeEvent(this.dom,event);var element=event.toElement||event.relatedTarget;if(element!==this.dom){while(element&&element.nodeType!==9){if(element===this.dom){return
}element=element.parentNode}}this.trigger("mouseout",event)},touchstart:function(event){event=normalizeEvent(this.dom,event);event.zrByTouch=true;this._lastTouchMoment=new Date();this.handler.processGesture(this,event,"start");domHandlers.mousemove.call(this,event);domHandlers.mousedown.call(this,event);setTouchTimer(this)},touchmove:function(event){event=normalizeEvent(this.dom,event);event.zrByTouch=true;this.handler.processGesture(this,event,"change");domHandlers.mousemove.call(this,event);setTouchTimer(this)},touchend:function(event){event=normalizeEvent(this.dom,event);event.zrByTouch=true;this.handler.processGesture(this,event,"end");domHandlers.mouseup.call(this,event);if(+new Date()-this._lastTouchMoment<TOUCH_CLICK_DELAY){domHandlers.click.call(this,event)}setTouchTimer(this)},pointerdown:function(event){domHandlers.mousedown.call(this,event)},pointermove:function(event){if(!isPointerFromTouch(event)){domHandlers.mousemove.call(this,event)}},pointerup:function(event){domHandlers.mouseup.call(this,event)},pointerout:function(event){if(!isPointerFromTouch(event)){domHandlers.mouseout.call(this,event)}}};function isPointerFromTouch(event){var pointerType=event.pointerType;return pointerType==="pen"||pointerType==="touch"}each$1(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(name){domHandlers[name]=function(event){event=normalizeEvent(this.dom,event);this.trigger(name,event)}});function initDomHandler(instance){each$1(touchHandlerNames,function(name){instance._handlers[name]=bind(domHandlers[name],instance)});each$1(pointerHandlerNames,function(name){instance._handlers[name]=bind(domHandlers[name],instance)});each$1(mouseHandlerNames,function(name){instance._handlers[name]=makeMouseHandler(domHandlers[name],instance)});function makeMouseHandler(fn,instance){return function(){if(instance._touching){return}return fn.apply(instance,arguments)}}}function HandlerDomProxy(dom){Eventful.call(this);this.dom=dom;this._touching=false;this._touchTimer;
this._handlers={};initDomHandler(this);if(env$1.pointerEventsSupported){mountHandlers(pointerHandlerNames,this)}else{if(env$1.touchEventsSupported){mountHandlers(touchHandlerNames,this)}mountHandlers(mouseHandlerNames,this)}function mountHandlers(handlerNames,instance){each$1(handlerNames,function(name){addEventListener(dom,eventNameFix(name),instance._handlers[name])},instance)}}var handlerDomProxyProto=HandlerDomProxy.prototype;handlerDomProxyProto.dispose=function(){var handlerNames=mouseHandlerNames.concat(touchHandlerNames);for(var i=0;i<handlerNames.length;i++){var name=handlerNames[i];removeEventListener(this.dom,eventNameFix(name),this._handlers[name])}};handlerDomProxyProto.setCursor=function(cursorStyle){this.dom.style&&(this.dom.style.cursor=cursorStyle||"default")};mixin(HandlerDomProxy,Eventful);
/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/
var useVML=!env$1.canvasSupported;var painterCtors={canvas:Painter};var instances$1={};var version$1="4.0.6";function init$1(dom,opts){var zr=new ZRender(guid(),dom,opts);instances$1[zr.id]=zr;return zr}function dispose$1(zr){if(zr){zr.dispose()}else{for(var key in instances$1){if(instances$1.hasOwnProperty(key)){instances$1[key].dispose()}}instances$1={}}return this}function getInstance(id){return instances$1[id]}function registerPainter(name,Ctor){painterCtors[name]=Ctor}function delInstance(id){delete instances$1[id]}var ZRender=function(id,dom,opts){opts=opts||{};this.dom=dom;this.id=id;var self=this;var storage=new Storage();var rendererType=opts.renderer;if(useVML){if(!painterCtors.vml){throw new Error("You need to require 'zrender/vml/vml' to support IE8")}rendererType="vml"}else{if(!rendererType||!painterCtors[rendererType]){rendererType="canvas"}}var painter=new painterCtors[rendererType](dom,storage,opts,id);this.storage=storage;this.painter=painter;var handerProxy=(!env$1.node&&!env$1.worker)?new HandlerDomProxy(painter.getViewportRoot()):null;
this.handler=new Handler(storage,painter,handerProxy,painter.root);this.animation=new Animation({stage:{update:bind(this.flush,this)}});this.animation.start();this._needsRefresh;var oldDelFromStorage=storage.delFromStorage;var oldAddToStorage=storage.addToStorage;storage.delFromStorage=function(el){oldDelFromStorage.call(storage,el);el&&el.removeSelfFromZr(self)};storage.addToStorage=function(el){oldAddToStorage.call(storage,el);el.addSelfToZr(self)}};ZRender.prototype={constructor:ZRender,getId:function(){return this.id},add:function(el){this.storage.addRoot(el);this._needsRefresh=true},remove:function(el){this.storage.delRoot(el);this._needsRefresh=true},configLayer:function(zLevel,config){if(this.painter.configLayer){this.painter.configLayer(zLevel,config)}this._needsRefresh=true},setBackgroundColor:function(backgroundColor){if(this.painter.setBackgroundColor){this.painter.setBackgroundColor(backgroundColor)}this._needsRefresh=true},refreshImmediately:function(){this._needsRefresh=false;this.painter.refresh();this._needsRefresh=false},refresh:function(){this._needsRefresh=true},flush:function(){var triggerRendered;if(this._needsRefresh){triggerRendered=true;this.refreshImmediately()}if(this._needsRefreshHover){triggerRendered=true;this.refreshHoverImmediately()}triggerRendered&&this.trigger("rendered")},addHover:function(el,style){if(this.painter.addHover){var elMirror=this.painter.addHover(el,style);this.refreshHover();return elMirror}},removeHover:function(el){if(this.painter.removeHover){this.painter.removeHover(el);this.refreshHover()}},clearHover:function(){if(this.painter.clearHover){this.painter.clearHover();this.refreshHover()}},refreshHover:function(){this._needsRefreshHover=true},refreshHoverImmediately:function(){this._needsRefreshHover=false;this.painter.refreshHover&&this.painter.refreshHover()},resize:function(opts){opts=opts||{};this.painter.resize(opts.width,opts.height);this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()
},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,dpr){return this.painter.pathToImage(e,dpr)},setCursorStyle:function(cursorStyle){this.handler.setCursorStyle(cursorStyle)},findHover:function(x,y){return this.handler.findHover(x,y)},on:function(eventName,eventHandler,context){this.handler.on(eventName,eventHandler,context)},off:function(eventName,eventHandler){this.handler.off(eventName,eventHandler)},trigger:function(eventName,event){this.handler.trigger(eventName,event)},clear:function(){this.storage.delRoot();this.painter.clear()},dispose:function(){this.animation.stop();this.clear();this.storage.dispose();this.painter.dispose();this.handler.dispose();this.animation=this.storage=this.painter=this.handler=null;delInstance(this.id)}};var zrender=(Object.freeze||Object)({version:version$1,init:init$1,dispose:dispose$1,getInstance:getInstance,registerPainter:registerPainter});var each$2=each$1;var isObject$2=isObject$1;var isArray$1=isArray;var DUMMY_COMPONENT_NAME_PREFIX="series\0";function normalizeToArray(value){return value instanceof Array?value:value==null?[]:[value]}function defaultEmphasis(opt,key,subOpts){if(opt){opt[key]=opt[key]||{};opt.emphasis=opt.emphasis||{};opt.emphasis[key]=opt.emphasis[key]||{};for(var i=0,len=subOpts.length;i<len;i++){var subOptName=subOpts[i];if(!opt.emphasis[key].hasOwnProperty(subOptName)&&opt[key].hasOwnProperty(subOptName)){opt.emphasis[key][subOptName]=opt[key][subOptName]}}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(dataItem){return(isObject$2(dataItem)&&!isArray$1(dataItem)&&!(dataItem instanceof Date))?dataItem.value:dataItem
}function isDataItemOption(dataItem){return isObject$2(dataItem)&&!(dataItem instanceof Array)}function mappingToExists(exists,newCptOptions){newCptOptions=(newCptOptions||[]).slice();var result=map(exists||[],function(obj,index){return{exist:obj}});each$2(newCptOptions,function(cptOption,index){if(!isObject$2(cptOption)){return}for(var i=0;i<result.length;i++){if(!result[i].option&&cptOption.id!=null&&result[i].exist.id===cptOption.id+""){result[i].option=cptOption;newCptOptions[index]=null;return}}for(var i=0;i<result.length;i++){var exist=result[i].exist;if(!result[i].option&&(exist.id==null||cptOption.id==null)&&cptOption.name!=null&&!isIdInner(cptOption)&&!isIdInner(exist)&&exist.name===cptOption.name+""){result[i].option=cptOption;newCptOptions[index]=null;return}}});each$2(newCptOptions,function(cptOption,index){if(!isObject$2(cptOption)){return}var i=0;for(;i<result.length;i++){var exist=result[i].exist;if(!result[i].option&&!isIdInner(exist)&&cptOption.id==null){result[i].option=cptOption;break}}if(i>=result.length){result.push({option:cptOption})}});return result}function makeIdAndName(mapResult){var idMap=createHashMap();each$2(mapResult,function(item,index){var existCpt=item.exist;existCpt&&idMap.set(existCpt.id,item)});each$2(mapResult,function(item,index){var opt=item.option;assert$1(!opt||opt.id==null||!idMap.get(opt.id)||idMap.get(opt.id)===item,"id duplicates: "+(opt&&opt.id));opt&&opt.id!=null&&idMap.set(opt.id,item);!item.keyInfo&&(item.keyInfo={})});each$2(mapResult,function(item,index){var existCpt=item.exist;var opt=item.option;var keyInfo=item.keyInfo;if(!isObject$2(opt)){return}keyInfo.name=opt.name!=null?opt.name+"":existCpt?existCpt.name:DUMMY_COMPONENT_NAME_PREFIX+index;if(existCpt){keyInfo.id=existCpt.id}else{if(opt.id!=null){keyInfo.id=opt.id+""}else{var idNum=0;do{keyInfo.id="\0"+keyInfo.name+"\0"+idNum++}while(idMap.get(keyInfo.id))}}idMap.set(keyInfo.id,item)})}function isNameSpecified(componentModel){var name=componentModel.name;return !!(name&&name.indexOf(DUMMY_COMPONENT_NAME_PREFIX))
}function isIdInner(cptOption){return isObject$2(cptOption)&&cptOption.id&&(cptOption.id+"").indexOf("\0_ec_\0")===0}function compressBatches(batchA,batchB){var mapA={};var mapB={};makeMap(batchA||[],mapA);makeMap(batchB||[],mapB,mapA);return[mapToArray(mapA),mapToArray(mapB)];function makeMap(sourceBatch,map$$1,otherMap){for(var i=0,len=sourceBatch.length;i<len;i++){var seriesId=sourceBatch[i].seriesId;var dataIndices=normalizeToArray(sourceBatch[i].dataIndex);var otherDataIndices=otherMap&&otherMap[seriesId];for(var j=0,lenj=dataIndices.length;j<lenj;j++){var dataIndex=dataIndices[j];if(otherDataIndices&&otherDataIndices[dataIndex]){otherDataIndices[dataIndex]=null}else{(map$$1[seriesId]||(map$$1[seriesId]={}))[dataIndex]=1}}}}function mapToArray(map$$1,isData){var result=[];for(var i in map$$1){if(map$$1.hasOwnProperty(i)&&map$$1[i]!=null){if(isData){result.push(+i)}else{var dataIndices=mapToArray(map$$1[i],true);dataIndices.length&&result.push({seriesId:i,dataIndex:dataIndices})}}}return result}}function queryDataIndex(data,payload){if(payload.dataIndexInside!=null){return payload.dataIndexInside}else{if(payload.dataIndex!=null){return isArray(payload.dataIndex)?map(payload.dataIndex,function(value){return data.indexOfRawIndex(value)}):data.indexOfRawIndex(payload.dataIndex)}else{if(payload.name!=null){return isArray(payload.name)?map(payload.name,function(value){return data.indexOfName(value)}):data.indexOfName(payload.name)}}}}function makeInner(){var key="__\0ec_inner_"+innerUniqueIndex+++"_"+Math.random().toFixed(5);return function(hostObj){return hostObj[key]||(hostObj[key]={})}}var innerUniqueIndex=0;function parseFinder(ecModel,finder,opt){if(isString(finder)){var obj={};obj[finder+"Index"]=0;finder=obj}var defaultMainType=opt&&opt.defaultMainType;if(defaultMainType&&!has(finder,defaultMainType+"Index")&&!has(finder,defaultMainType+"Id")&&!has(finder,defaultMainType+"Name")){finder[defaultMainType+"Index"]=0}var result={};each$2(finder,function(value,key){var value=finder[key];
if(key==="dataIndex"||key==="dataIndexInside"){result[key]=value;return}var parsedKey=key.match(/^(\w+)(Index|Id|Name)$/)||[];var mainType=parsedKey[1];var queryType=(parsedKey[2]||"").toLowerCase();if(!mainType||!queryType||value==null||(queryType==="index"&&value==="none")||(opt&&opt.includeMainTypes&&indexOf(opt.includeMainTypes,mainType)<0)){return}var queryParam={mainType:mainType};if(queryType!=="index"||value!=="all"){queryParam[queryType]=value}var models=ecModel.queryComponents(queryParam);result[mainType+"Models"]=models;result[mainType+"Model"]=models[0]});return result}function has(obj,prop){return obj&&obj.hasOwnProperty(prop)}function setAttribute(dom,key,value){dom.setAttribute?dom.setAttribute(key,value):(dom[key]=value)}function getAttribute(dom,key){return dom.getAttribute?dom.getAttribute(key):dom[key]}function getTooltipRenderMode(renderModeOption){if(renderModeOption==="auto"){return env$1.domSupported?"html":"richText"}else{return renderModeOption||"html"}}var TYPE_DELIMITER=".";var IS_CONTAINER="___EC__COMPONENT__CONTAINER___";function parseClassType$1(componentType){var ret={main:"",sub:""};if(componentType){componentType=componentType.split(TYPE_DELIMITER);ret.main=componentType[0]||"";ret.sub=componentType[1]||""}return ret}function checkClassType(componentType){assert$1(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType),'componentType "'+componentType+'" illegal')}function enableClassExtend(RootClass,mandatoryMethods){RootClass.$constructor=RootClass;RootClass.extend=function(proto){if(__DEV__){each$1(mandatoryMethods,function(method){if(!proto[method]){console.warn("Method `"+method+"` should be implemented"+(proto.type?" in "+proto.type:"")+".")}})}var superClass=this;var ExtendedClass=function(){if(!proto.$constructor){superClass.apply(this,arguments)}else{proto.$constructor.apply(this,arguments)}};extend(ExtendedClass.prototype,proto);ExtendedClass.extend=this.extend;ExtendedClass.superCall=superCall;ExtendedClass.superApply=superApply;
inherits(ExtendedClass,this);ExtendedClass.superClass=superClass;return ExtendedClass}}var classBase=0;function enableClassCheck(Clz){var classAttr=["__\0is_clz",classBase++,Math.random().toFixed(3)].join("_");Clz.prototype[classAttr]=true;if(__DEV__){assert$1(!Clz.isInstance,'The method "is" can not be defined.')}Clz.isInstance=function(obj){return !!(obj&&obj[classAttr])}}function superCall(context,methodName){var args=slice(arguments,2);return this.superClass.prototype[methodName].apply(context,args)}function superApply(context,methodName,args){return this.superClass.prototype[methodName].apply(context,args)}function enableClassManagement(entity,options){options=options||{};var storage={};entity.registerClass=function(Clazz,componentType){if(componentType){checkClassType(componentType);componentType=parseClassType$1(componentType);if(!componentType.sub){if(__DEV__){if(storage[componentType.main]){console.warn(componentType.main+" exists.")}}storage[componentType.main]=Clazz}else{if(componentType.sub!==IS_CONTAINER){var container=makeContainer(componentType);container[componentType.sub]=Clazz}}}return Clazz};entity.getClass=function(componentMainType,subType,throwWhenNotFound){var Clazz=storage[componentMainType];if(Clazz&&Clazz[IS_CONTAINER]){Clazz=subType?Clazz[subType]:null}if(throwWhenNotFound&&!Clazz){throw new Error(!subType?componentMainType+"."+"type should be specified.":"Component "+componentMainType+"."+(subType||"")+" not exists. Load it first.")}return Clazz};entity.getClassesByMainType=function(componentType){componentType=parseClassType$1(componentType);var result=[];var obj=storage[componentType.main];if(obj&&obj[IS_CONTAINER]){each$1(obj,function(o,type){type!==IS_CONTAINER&&result.push(o)})}else{result.push(obj)}return result};entity.hasClass=function(componentType){componentType=parseClassType$1(componentType);return !!storage[componentType.main]};entity.getAllClassMainTypes=function(){var types=[];each$1(storage,function(obj,type){types.push(type)
});return types};entity.hasSubTypes=function(componentType){componentType=parseClassType$1(componentType);var obj=storage[componentType.main];return obj&&obj[IS_CONTAINER]};entity.parseClassType=parseClassType$1;function makeContainer(componentType){var container=storage[componentType.main];if(!container||!container[IS_CONTAINER]){container=storage[componentType.main]={};container[IS_CONTAINER]=true}return container}if(options.registerWhenExtend){var originalExtend=entity.extend;if(originalExtend){entity.extend=function(proto){var ExtendedClass=originalExtend.call(this,proto);return entity.registerClass(ExtendedClass,proto.type)}}}return entity}var makeStyleMapper=function(properties){for(var i=0;i<properties.length;i++){if(!properties[i][1]){properties[i][1]=properties[i][0]}}return function(model,excludes,includes){var style={};for(var i=0;i<properties.length;i++){var propName=properties[i][1];if((excludes&&indexOf(excludes,propName)>=0)||(includes&&indexOf(includes,propName)<0)){continue}var val=model.getShallow(propName);if(val!=null){style[properties[i][0]]=val}}return style}};var getLineStyle=makeStyleMapper([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);var lineStyleMixin={getLineStyle:function(excludes){var style=getLineStyle(this,excludes);var lineDash=this.getLineDash(style.lineWidth);lineDash&&(style.lineDash=lineDash);return style},getLineDash:function(lineWidth){if(lineWidth==null){lineWidth=1}var lineType=this.get("type");var dotSize=Math.max(lineWidth,2);var dashSize=lineWidth*4;return(lineType==="solid"||lineType==null)?null:(lineType==="dashed"?[dashSize,dashSize]:[dotSize,dotSize])}};var getAreaStyle=makeStyleMapper([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]);var areaStyleMixin={getAreaStyle:function(excludes,includes){return getAreaStyle(this,excludes,includes)}};var mathPow=Math.pow;var mathSqrt$2=Math.sqrt;var EPSILON$1=1e-8;
var EPSILON_NUMERIC=0.0001;var THREE_SQRT=mathSqrt$2(3);var ONE_THIRD=1/3;var _v0=create();var _v1=create();var _v2=create();function isAroundZero(val){return val>-EPSILON$1&&val<EPSILON$1}function isNotAroundZero$1(val){return val>EPSILON$1||val<-EPSILON$1}function cubicAt(p0,p1,p2,p3,t){var onet=1-t;return onet*onet*(onet*p0+3*t*p1)+t*t*(t*p3+3*onet*p2)}function cubicDerivativeAt(p0,p1,p2,p3,t){var onet=1-t;return 3*(((p1-p0)*onet+2*(p2-p1)*t)*onet+(p3-p2)*t*t)}function cubicRootAt(p0,p1,p2,p3,val,roots){var a=p3+3*(p1-p2)-p0;var b=3*(p2-p1*2+p0);var c=3*(p1-p0);var d=p0-val;var A=b*b-3*a*c;var B=b*c-9*a*d;var C=c*c-3*b*d;var n=0;if(isAroundZero(A)&&isAroundZero(B)){if(isAroundZero(b)){roots[0]=0}else{var t1=-c/b;if(t1>=0&&t1<=1){roots[n++]=t1}}}else{var disc=B*B-4*A*C;if(isAroundZero(disc)){var K=B/A;var t1=-b/a+K;var t2=-K/2;if(t1>=0&&t1<=1){roots[n++]=t1}if(t2>=0&&t2<=1){roots[n++]=t2}}else{if(disc>0){var discSqrt=mathSqrt$2(disc);var Y1=A*b+1.5*a*(-B+discSqrt);var Y2=A*b+1.5*a*(-B-discSqrt);if(Y1<0){Y1=-mathPow(-Y1,ONE_THIRD)}else{Y1=mathPow(Y1,ONE_THIRD)}if(Y2<0){Y2=-mathPow(-Y2,ONE_THIRD)}else{Y2=mathPow(Y2,ONE_THIRD)}var t1=(-b-(Y1+Y2))/(3*a);if(t1>=0&&t1<=1){roots[n++]=t1}}else{var T=(2*A*b-3*a*B)/(2*mathSqrt$2(A*A*A));var theta=Math.acos(T)/3;var ASqrt=mathSqrt$2(A);var tmp=Math.cos(theta);var t1=(-b-2*ASqrt*tmp)/(3*a);var t2=(-b+ASqrt*(tmp+THREE_SQRT*Math.sin(theta)))/(3*a);var t3=(-b+ASqrt*(tmp-THREE_SQRT*Math.sin(theta)))/(3*a);if(t1>=0&&t1<=1){roots[n++]=t1}if(t2>=0&&t2<=1){roots[n++]=t2}if(t3>=0&&t3<=1){roots[n++]=t3}}}}return n}function cubicExtrema(p0,p1,p2,p3,extrema){var b=6*p2-12*p1+6*p0;var a=9*p1+3*p3-3*p0-9*p2;var c=3*p1-3*p0;var n=0;if(isAroundZero(a)){if(isNotAroundZero$1(b)){var t1=-c/b;if(t1>=0&&t1<=1){extrema[n++]=t1}}}else{var disc=b*b-4*a*c;if(isAroundZero(disc)){extrema[0]=-b/(2*a)}else{if(disc>0){var discSqrt=mathSqrt$2(disc);var t1=(-b+discSqrt)/(2*a);var t2=(-b-discSqrt)/(2*a);if(t1>=0&&t1<=1){extrema[n++]=t1}if(t2>=0&&t2<=1){extrema[n++]=t2
}}}}return n}function cubicSubdivide(p0,p1,p2,p3,t,out){var p01=(p1-p0)*t+p0;var p12=(p2-p1)*t+p1;var p23=(p3-p2)*t+p2;var p012=(p12-p01)*t+p01;var p123=(p23-p12)*t+p12;var p0123=(p123-p012)*t+p012;out[0]=p0;out[1]=p01;out[2]=p012;out[3]=p0123;out[4]=p0123;out[5]=p123;out[6]=p23;out[7]=p3}function cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,out){var t;var interval=0.005;var d=Infinity;var prev;var next;var d1;var d2;_v0[0]=x;_v0[1]=y;for(var _t=0;_t<1;_t+=0.05){_v1[0]=cubicAt(x0,x1,x2,x3,_t);_v1[1]=cubicAt(y0,y1,y2,y3,_t);d1=distSquare(_v0,_v1);if(d1<d){t=_t;d=d1}}d=Infinity;for(var i=0;i<32;i++){if(interval<EPSILON_NUMERIC){break}prev=t-interval;next=t+interval;_v1[0]=cubicAt(x0,x1,x2,x3,prev);_v1[1]=cubicAt(y0,y1,y2,y3,prev);d1=distSquare(_v1,_v0);if(prev>=0&&d1<d){t=prev;d=d1}else{_v2[0]=cubicAt(x0,x1,x2,x3,next);_v2[1]=cubicAt(y0,y1,y2,y3,next);d2=distSquare(_v2,_v0);if(next<=1&&d2<d){t=next;d=d2}else{interval*=0.5}}}if(out){out[0]=cubicAt(x0,x1,x2,x3,t);out[1]=cubicAt(y0,y1,y2,y3,t)}return mathSqrt$2(d)}function quadraticAt(p0,p1,p2,t){var onet=1-t;return onet*(onet*p0+2*t*p1)+t*t*p2}function quadraticDerivativeAt(p0,p1,p2,t){return 2*((1-t)*(p1-p0)+t*(p2-p1))}function quadraticRootAt(p0,p1,p2,val,roots){var a=p0-2*p1+p2;var b=2*(p1-p0);var c=p0-val;var n=0;if(isAroundZero(a)){if(isNotAroundZero$1(b)){var t1=-c/b;if(t1>=0&&t1<=1){roots[n++]=t1}}}else{var disc=b*b-4*a*c;if(isAroundZero(disc)){var t1=-b/(2*a);if(t1>=0&&t1<=1){roots[n++]=t1}}else{if(disc>0){var discSqrt=mathSqrt$2(disc);var t1=(-b+discSqrt)/(2*a);var t2=(-b-discSqrt)/(2*a);if(t1>=0&&t1<=1){roots[n++]=t1}if(t2>=0&&t2<=1){roots[n++]=t2}}}}return n}function quadraticExtremum(p0,p1,p2){var divider=p0+p2-2*p1;if(divider===0){return 0.5}else{return(p0-p1)/divider}}function quadraticSubdivide(p0,p1,p2,t,out){var p01=(p1-p0)*t+p0;var p12=(p2-p1)*t+p1;var p012=(p12-p01)*t+p01;out[0]=p0;out[1]=p01;out[2]=p012;out[3]=p012;out[4]=p12;out[5]=p2}function quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,out){var t;var interval=0.005;
var d=Infinity;_v0[0]=x;_v0[1]=y;for(var _t=0;_t<1;_t+=0.05){_v1[0]=quadraticAt(x0,x1,x2,_t);_v1[1]=quadraticAt(y0,y1,y2,_t);var d1=distSquare(_v0,_v1);if(d1<d){t=_t;d=d1}}d=Infinity;for(var i=0;i<32;i++){if(interval<EPSILON_NUMERIC){break}var prev=t-interval;var next=t+interval;_v1[0]=quadraticAt(x0,x1,x2,prev);_v1[1]=quadraticAt(y0,y1,y2,prev);var d1=distSquare(_v1,_v0);if(prev>=0&&d1<d){t=prev;d=d1}else{_v2[0]=quadraticAt(x0,x1,x2,next);_v2[1]=quadraticAt(y0,y1,y2,next);var d2=distSquare(_v2,_v0);if(next<=1&&d2<d){t=next;d=d2}else{interval*=0.5}}}if(out){out[0]=quadraticAt(x0,x1,x2,t);out[1]=quadraticAt(y0,y1,y2,t)}return mathSqrt$2(d)}var mathMin$3=Math.min;var mathMax$3=Math.max;var mathSin$2=Math.sin;var mathCos$2=Math.cos;var PI2=Math.PI*2;var start=create();var end=create();var extremity=create();function fromPoints(points,min$$1,max$$1){if(points.length===0){return}var p=points[0];var left=p[0];var right=p[0];var top=p[1];var bottom=p[1];var i;for(i=1;i<points.length;i++){p=points[i];left=mathMin$3(left,p[0]);right=mathMax$3(right,p[0]);top=mathMin$3(top,p[1]);bottom=mathMax$3(bottom,p[1])}min$$1[0]=left;min$$1[1]=top;max$$1[0]=right;max$$1[1]=bottom}function fromLine(x0,y0,x1,y1,min$$1,max$$1){min$$1[0]=mathMin$3(x0,x1);min$$1[1]=mathMin$3(y0,y1);max$$1[0]=mathMax$3(x0,x1);max$$1[1]=mathMax$3(y0,y1)}var xDim=[];var yDim=[];function fromCubic(x0,y0,x1,y1,x2,y2,x3,y3,min$$1,max$$1){var cubicExtrema$$1=cubicExtrema;var cubicAt$$1=cubicAt;var i;var n=cubicExtrema$$1(x0,x1,x2,x3,xDim);min$$1[0]=Infinity;min$$1[1]=Infinity;max$$1[0]=-Infinity;max$$1[1]=-Infinity;for(i=0;i<n;i++){var x=cubicAt$$1(x0,x1,x2,x3,xDim[i]);min$$1[0]=mathMin$3(x,min$$1[0]);max$$1[0]=mathMax$3(x,max$$1[0])}n=cubicExtrema$$1(y0,y1,y2,y3,yDim);for(i=0;i<n;i++){var y=cubicAt$$1(y0,y1,y2,y3,yDim[i]);min$$1[1]=mathMin$3(y,min$$1[1]);max$$1[1]=mathMax$3(y,max$$1[1])}min$$1[0]=mathMin$3(x0,min$$1[0]);max$$1[0]=mathMax$3(x0,max$$1[0]);min$$1[0]=mathMin$3(x3,min$$1[0]);max$$1[0]=mathMax$3(x3,max$$1[0]);
min$$1[1]=mathMin$3(y0,min$$1[1]);max$$1[1]=mathMax$3(y0,max$$1[1]);min$$1[1]=mathMin$3(y3,min$$1[1]);max$$1[1]=mathMax$3(y3,max$$1[1])}function fromQuadratic(x0,y0,x1,y1,x2,y2,min$$1,max$$1){var quadraticExtremum$$1=quadraticExtremum;var quadraticAt$$1=quadraticAt;var tx=mathMax$3(mathMin$3(quadraticExtremum$$1(x0,x1,x2),1),0);var ty=mathMax$3(mathMin$3(quadraticExtremum$$1(y0,y1,y2),1),0);var x=quadraticAt$$1(x0,x1,x2,tx);var y=quadraticAt$$1(y0,y1,y2,ty);min$$1[0]=mathMin$3(x0,x2,x);min$$1[1]=mathMin$3(y0,y2,y);max$$1[0]=mathMax$3(x0,x2,x);max$$1[1]=mathMax$3(y0,y2,y)}function fromArc(x,y,rx,ry,startAngle,endAngle,anticlockwise,min$$1,max$$1){var vec2Min=min;var vec2Max=max;var diff=Math.abs(startAngle-endAngle);if(diff%PI2<0.0001&&diff>0.0001){min$$1[0]=x-rx;min$$1[1]=y-ry;max$$1[0]=x+rx;max$$1[1]=y+ry;return}start[0]=mathCos$2(startAngle)*rx+x;start[1]=mathSin$2(startAngle)*ry+y;end[0]=mathCos$2(endAngle)*rx+x;end[1]=mathSin$2(endAngle)*ry+y;vec2Min(min$$1,start,end);vec2Max(max$$1,start,end);startAngle=startAngle%(PI2);if(startAngle<0){startAngle=startAngle+PI2}endAngle=endAngle%(PI2);if(endAngle<0){endAngle=endAngle+PI2}if(startAngle>endAngle&&!anticlockwise){endAngle+=PI2}else{if(startAngle<endAngle&&anticlockwise){startAngle+=PI2}}if(anticlockwise){var tmp=endAngle;endAngle=startAngle;startAngle=tmp}for(var angle=0;angle<endAngle;angle+=Math.PI/2){if(angle>startAngle){extremity[0]=mathCos$2(angle)*rx+x;extremity[1]=mathSin$2(angle)*ry+y;vec2Min(min$$1,extremity,min$$1);vec2Max(max$$1,extremity,max$$1)}}}var CMD={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7};var min$1=[];var max$1=[];var min2=[];var max2=[];var mathMin$2=Math.min;var mathMax$2=Math.max;var mathCos$1=Math.cos;var mathSin$1=Math.sin;var mathSqrt$1=Math.sqrt;var mathAbs=Math.abs;var hasTypedArray=typeof Float32Array!=="undefined";var PathProxy=function(notSaveData){this._saveData=!(notSaveData||false);if(this._saveData){this.data=[]}this._ctx=null};PathProxy.prototype={constructor:PathProxy,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(sx,sy){this._ux=mathAbs(1/devicePixelRatio/sx)||0;
this._uy=mathAbs(1/devicePixelRatio/sy)||0},getContext:function(){return this._ctx},beginPath:function(ctx){this._ctx=ctx;ctx&&ctx.beginPath();ctx&&(this.dpr=ctx.dpr);if(this._saveData){this._len=0}if(this._lineDash){this._lineDash=null;this._dashOffset=0}return this},moveTo:function(x,y){this.addData(CMD.M,x,y);this._ctx&&this._ctx.moveTo(x,y);this._x0=x;this._y0=y;this._xi=x;this._yi=y;return this},lineTo:function(x,y){var exceedUnit=mathAbs(x-this._xi)>this._ux||mathAbs(y-this._yi)>this._uy||this._len<5;this.addData(CMD.L,x,y);if(this._ctx&&exceedUnit){this._needsDash()?this._dashedLineTo(x,y):this._ctx.lineTo(x,y)}if(exceedUnit){this._xi=x;this._yi=y}return this},bezierCurveTo:function(x1,y1,x2,y2,x3,y3){this.addData(CMD.C,x1,y1,x2,y2,x3,y3);if(this._ctx){this._needsDash()?this._dashedBezierTo(x1,y1,x2,y2,x3,y3):this._ctx.bezierCurveTo(x1,y1,x2,y2,x3,y3)}this._xi=x3;this._yi=y3;return this},quadraticCurveTo:function(x1,y1,x2,y2){this.addData(CMD.Q,x1,y1,x2,y2);if(this._ctx){this._needsDash()?this._dashedQuadraticTo(x1,y1,x2,y2):this._ctx.quadraticCurveTo(x1,y1,x2,y2)}this._xi=x2;this._yi=y2;return this},arc:function(cx,cy,r,startAngle,endAngle,anticlockwise){this.addData(CMD.A,cx,cy,r,r,startAngle,endAngle-startAngle,0,anticlockwise?0:1);this._ctx&&this._ctx.arc(cx,cy,r,startAngle,endAngle,anticlockwise);this._xi=mathCos$1(endAngle)*r+cx;this._yi=mathSin$1(endAngle)*r+cy;return this},arcTo:function(x1,y1,x2,y2,radius){if(this._ctx){this._ctx.arcTo(x1,y1,x2,y2,radius)}return this},rect:function(x,y,w,h){this._ctx&&this._ctx.rect(x,y,w,h);this.addData(CMD.R,x,y,w,h);return this},closePath:function(){this.addData(CMD.Z);var ctx=this._ctx;var x0=this._x0;var y0=this._y0;if(ctx){this._needsDash()&&this._dashedLineTo(x0,y0);ctx.closePath()}this._xi=x0;this._yi=y0;return this},fill:function(ctx){ctx&&ctx.fill();this.toStatic()},stroke:function(ctx){ctx&&ctx.stroke();this.toStatic()},setLineDash:function(lineDash){if(lineDash instanceof Array){this._lineDash=lineDash;this._dashIdx=0;
var lineDashSum=0;for(var i=0;i<lineDash.length;i++){lineDashSum+=lineDash[i]}this._dashSum=lineDashSum}return this},setLineDashOffset:function(offset){this._dashOffset=offset;return this},len:function(){return this._len},setData:function(data){var len$$1=data.length;if(!(this.data&&this.data.length===len$$1)&&hasTypedArray){this.data=new Float32Array(len$$1)}for(var i=0;i<len$$1;i++){this.data[i]=data[i]}this._len=len$$1},appendPath:function(path){if(!(path instanceof Array)){path=[path]}var len$$1=path.length;var appendSize=0;var offset=this._len;for(var i=0;i<len$$1;i++){appendSize+=path[i].len()}if(hasTypedArray&&(this.data instanceof Float32Array)){this.data=new Float32Array(offset+appendSize)}for(var i=0;i<len$$1;i++){var appendPathData=path[i].data;for(var k=0;k<appendPathData.length;k++){this.data[offset++]=appendPathData[k]}}this._len=offset},addData:function(cmd){if(!this._saveData){return}var data=this.data;if(this._len+arguments.length>data.length){this._expandData();data=this.data}for(var i=0;i<arguments.length;i++){data[this._len++]=arguments[i]}this._prevCmd=cmd},_expandData:function(){if(!(this.data instanceof Array)){var newData=[];for(var i=0;i<this._len;i++){newData[i]=this.data[i]}this.data=newData}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(x1,y1){var dashSum=this._dashSum;var offset=this._dashOffset;var lineDash=this._lineDash;var ctx=this._ctx;var x0=this._xi;var y0=this._yi;var dx=x1-x0;var dy=y1-y0;var dist$$1=mathSqrt$1(dx*dx+dy*dy);var x=x0;var y=y0;var dash;var nDash=lineDash.length;var idx;dx/=dist$$1;dy/=dist$$1;if(offset<0){offset=dashSum+offset}offset%=dashSum;x-=offset*dx;y-=offset*dy;while((dx>0&&x<=x1)||(dx<0&&x>=x1)||(dx===0&&((dy>0&&y<=y1)||(dy<0&&y>=y1)))){idx=this._dashIdx;dash=lineDash[idx];x+=dx*dash;y+=dy*dash;this._dashIdx=(idx+1)%nDash;if((dx>0&&x<x0)||(dx<0&&x>x0)||(dy>0&&y<y0)||(dy<0&&y>y0)){continue}ctx[idx%2?"moveTo":"lineTo"](dx>=0?mathMin$2(x,x1):mathMax$2(x,x1),dy>=0?mathMin$2(y,y1):mathMax$2(y,y1))
}dx=x-x1;dy=y-y1;this._dashOffset=-mathSqrt$1(dx*dx+dy*dy)},_dashedBezierTo:function(x1,y1,x2,y2,x3,y3){var dashSum=this._dashSum;var offset=this._dashOffset;var lineDash=this._lineDash;var ctx=this._ctx;var x0=this._xi;var y0=this._yi;var t;var dx;var dy;var cubicAt$$1=cubicAt;var bezierLen=0;var idx=this._dashIdx;var nDash=lineDash.length;var x;var y;var tmpLen=0;if(offset<0){offset=dashSum+offset}offset%=dashSum;for(t=0;t<1;t+=0.1){dx=cubicAt$$1(x0,x1,x2,x3,t+0.1)-cubicAt$$1(x0,x1,x2,x3,t);dy=cubicAt$$1(y0,y1,y2,y3,t+0.1)-cubicAt$$1(y0,y1,y2,y3,t);bezierLen+=mathSqrt$1(dx*dx+dy*dy)}for(;idx<nDash;idx++){tmpLen+=lineDash[idx];if(tmpLen>offset){break}}t=(tmpLen-offset)/bezierLen;while(t<=1){x=cubicAt$$1(x0,x1,x2,x3,t);y=cubicAt$$1(y0,y1,y2,y3,t);idx%2?ctx.moveTo(x,y):ctx.lineTo(x,y);t+=lineDash[idx]/bezierLen;idx=(idx+1)%nDash}(idx%2!==0)&&ctx.lineTo(x3,y3);dx=x3-x;dy=y3-y;this._dashOffset=-mathSqrt$1(dx*dx+dy*dy)},_dashedQuadraticTo:function(x1,y1,x2,y2){var x3=x2;var y3=y2;x2=(x2+2*x1)/3;y2=(y2+2*y1)/3;x1=(this._xi+2*x1)/3;y1=(this._yi+2*y1)/3;this._dashedBezierTo(x1,y1,x2,y2,x3,y3)},toStatic:function(){var data=this.data;if(data instanceof Array){data.length=this._len;if(hasTypedArray){this.data=new Float32Array(data)}}},getBoundingRect:function(){min$1[0]=min$1[1]=min2[0]=min2[1]=Number.MAX_VALUE;max$1[0]=max$1[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var data=this.data;var xi=0;var yi=0;var x0=0;var y0=0;for(var i=0;i<data.length;){var cmd=data[i++];if(i===1){xi=data[i];yi=data[i+1];x0=xi;y0=yi}switch(cmd){case CMD.M:x0=data[i++];y0=data[i++];xi=x0;yi=y0;min2[0]=x0;min2[1]=y0;max2[0]=x0;max2[1]=y0;break;case CMD.L:fromLine(xi,yi,data[i],data[i+1],min2,max2);xi=data[i++];yi=data[i++];break;case CMD.C:fromCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],min2,max2);xi=data[i++];yi=data[i++];break;case CMD.Q:fromQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],min2,max2);xi=data[i++];yi=data[i++];break;case CMD.A:var cx=data[i++];var cy=data[i++];
var rx=data[i++];var ry=data[i++];var startAngle=data[i++];var endAngle=data[i++]+startAngle;i+=1;var anticlockwise=1-data[i++];if(i===1){x0=mathCos$1(startAngle)*rx+cx;y0=mathSin$1(startAngle)*ry+cy}fromArc(cx,cy,rx,ry,startAngle,endAngle,anticlockwise,min2,max2);xi=mathCos$1(endAngle)*rx+cx;yi=mathSin$1(endAngle)*ry+cy;break;case CMD.R:x0=xi=data[i++];y0=yi=data[i++];var width=data[i++];var height=data[i++];fromLine(x0,y0,x0+width,y0+height,min2,max2);break;case CMD.Z:xi=x0;yi=y0;break}min(min$1,min$1,min2);max(max$1,max$1,max2)}if(i===0){min$1[0]=min$1[1]=max$1[0]=max$1[1]=0}return new BoundingRect(min$1[0],min$1[1],max$1[0]-min$1[0],max$1[1]-min$1[1])},rebuildPath:function(ctx){var d=this.data;var x0,y0;var xi,yi;var x,y;var ux=this._ux;var uy=this._uy;var len$$1=this._len;for(var i=0;i<len$$1;){var cmd=d[i++];if(i===1){xi=d[i];yi=d[i+1];x0=xi;y0=yi}switch(cmd){case CMD.M:x0=xi=d[i++];y0=yi=d[i++];ctx.moveTo(xi,yi);break;case CMD.L:x=d[i++];y=d[i++];if(mathAbs(x-xi)>ux||mathAbs(y-yi)>uy||i===len$$1-1){ctx.lineTo(x,y);xi=x;yi=y}break;case CMD.C:ctx.bezierCurveTo(d[i++],d[i++],d[i++],d[i++],d[i++],d[i++]);xi=d[i-2];yi=d[i-1];break;case CMD.Q:ctx.quadraticCurveTo(d[i++],d[i++],d[i++],d[i++]);xi=d[i-2];yi=d[i-1];break;case CMD.A:var cx=d[i++];var cy=d[i++];var rx=d[i++];var ry=d[i++];var theta=d[i++];var dTheta=d[i++];var psi=d[i++];var fs=d[i++];var r=(rx>ry)?rx:ry;var scaleX=(rx>ry)?1:rx/ry;var scaleY=(rx>ry)?ry/rx:1;var isEllipse=Math.abs(rx-ry)>0.001;var endAngle=theta+dTheta;if(isEllipse){ctx.translate(cx,cy);ctx.rotate(psi);ctx.scale(scaleX,scaleY);ctx.arc(0,0,r,theta,endAngle,1-fs);ctx.scale(1/scaleX,1/scaleY);ctx.rotate(-psi);ctx.translate(-cx,-cy)}else{ctx.arc(cx,cy,r,theta,endAngle,1-fs)}if(i===1){x0=mathCos$1(theta)*rx+cx;y0=mathSin$1(theta)*ry+cy}xi=mathCos$1(endAngle)*rx+cx;yi=mathSin$1(endAngle)*ry+cy;break;case CMD.R:x0=xi=d[i];y0=yi=d[i+1];ctx.rect(d[i++],d[i++],d[i++],d[i++]);break;case CMD.Z:ctx.closePath();xi=x0;yi=y0}}}};PathProxy.CMD=CMD;function containStroke$1(x0,y0,x1,y1,lineWidth,x,y){if(lineWidth===0){return false
}var _l=lineWidth;var _a=0;var _b=x0;if((y>y0+_l&&y>y1+_l)||(y<y0-_l&&y<y1-_l)||(x>x0+_l&&x>x1+_l)||(x<x0-_l&&x<x1-_l)){return false}if(x0!==x1){_a=(y0-y1)/(x0-x1);_b=(x0*y1-x1*y0)/(x0-x1)}else{return Math.abs(x-x0)<=_l/2}var tmp=_a*x-y+_b;var _s=tmp*tmp/(_a*_a+1);return _s<=_l/2*_l/2}function containStroke$2(x0,y0,x1,y1,x2,y2,x3,y3,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;if((y>y0+_l&&y>y1+_l&&y>y2+_l&&y>y3+_l)||(y<y0-_l&&y<y1-_l&&y<y2-_l&&y<y3-_l)||(x>x0+_l&&x>x1+_l&&x>x2+_l&&x>x3+_l)||(x<x0-_l&&x<x1-_l&&x<x2-_l&&x<x3-_l)){return false}var d=cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,null);return d<=_l/2}function containStroke$3(x0,y0,x1,y1,x2,y2,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;if((y>y0+_l&&y>y1+_l&&y>y2+_l)||(y<y0-_l&&y<y1-_l&&y<y2-_l)||(x>x0+_l&&x>x1+_l&&x>x2+_l)||(x<x0-_l&&x<x1-_l&&x<x2-_l)){return false}var d=quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,null);return d<=_l/2}var PI2$3=Math.PI*2;function normalizeRadian(angle){angle%=PI2$3;if(angle<0){angle+=PI2$3}return angle}var PI2$2=Math.PI*2;function containStroke$4(cx,cy,r,startAngle,endAngle,anticlockwise,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;x-=cx;y-=cy;var d=Math.sqrt(x*x+y*y);if((d-_l>r)||(d+_l<r)){return false}if(Math.abs(startAngle-endAngle)%PI2$2<0.0001){return true}if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle);endAngle=normalizeRadian(tmp)}else{startAngle=normalizeRadian(startAngle);endAngle=normalizeRadian(endAngle)}if(startAngle>endAngle){endAngle+=PI2$2}var angle=Math.atan2(y,x);if(angle<0){angle+=PI2$2}return(angle>=startAngle&&angle<=endAngle)||(angle+PI2$2>=startAngle&&angle+PI2$2<=endAngle)}function windingLine(x0,y0,x1,y1,x,y){if((y>y0&&y>y1)||(y<y0&&y<y1)){return 0}if(y1===y0){return 0}var dir=y1<y0?1:-1;var t=(y-y0)/(y1-y0);if(t===1||t===0){dir=y1<y0?0.5:-0.5}var x_=t*(x1-x0)+x0;return x_===x?Infinity:x_>x?dir:0}var CMD$1=PathProxy.CMD;var PI2$1=Math.PI*2;var EPSILON$2=0.0001;function isAroundEqual(a,b){return Math.abs(a-b)<EPSILON$2
}var roots=[-1,-1,-1];var extrema=[-1,-1];function swapExtrema(){var tmp=extrema[0];extrema[0]=extrema[1];extrema[1]=tmp}function windingCubic(x0,y0,x1,y1,x2,y2,x3,y3,x,y){if((y>y0&&y>y1&&y>y2&&y>y3)||(y<y0&&y<y1&&y<y2&&y<y3)){return 0}var nRoots=cubicRootAt(y0,y1,y2,y3,y,roots);if(nRoots===0){return 0}else{var w=0;var nExtrema=-1;var y0_;var y1_;for(var i=0;i<nRoots;i++){var t=roots[i];var unit=(t===0||t===1)?0.5:1;var x_=cubicAt(x0,x1,x2,x3,t);if(x_<x){continue}if(nExtrema<0){nExtrema=cubicExtrema(y0,y1,y2,y3,extrema);if(extrema[1]<extrema[0]&&nExtrema>1){swapExtrema()}y0_=cubicAt(y0,y1,y2,y3,extrema[0]);if(nExtrema>1){y1_=cubicAt(y0,y1,y2,y3,extrema[1])}}if(nExtrema===2){if(t<extrema[0]){w+=y0_<y0?unit:-unit}else{if(t<extrema[1]){w+=y1_<y0_?unit:-unit}else{w+=y3<y1_?unit:-unit}}}else{if(t<extrema[0]){w+=y0_<y0?unit:-unit}else{w+=y3<y0_?unit:-unit}}}return w}}function windingQuadratic(x0,y0,x1,y1,x2,y2,x,y){if((y>y0&&y>y1&&y>y2)||(y<y0&&y<y1&&y<y2)){return 0}var nRoots=quadraticRootAt(y0,y1,y2,y,roots);if(nRoots===0){return 0}else{var t=quadraticExtremum(y0,y1,y2);if(t>=0&&t<=1){var w=0;var y_=quadraticAt(y0,y1,y2,t);for(var i=0;i<nRoots;i++){var unit=(roots[i]===0||roots[i]===1)?0.5:1;var x_=quadraticAt(x0,x1,x2,roots[i]);if(x_<x){continue}if(roots[i]<t){w+=y_<y0?unit:-unit}else{w+=y2<y_?unit:-unit}}return w}else{var unit=(roots[0]===0||roots[0]===1)?0.5:1;var x_=quadraticAt(x0,x1,x2,roots[0]);if(x_<x){return 0}return y2<y0?unit:-unit}}}function windingArc(cx,cy,r,startAngle,endAngle,anticlockwise,x,y){y-=cy;if(y>r||y<-r){return 0}var tmp=Math.sqrt(r*r-y*y);roots[0]=-tmp;roots[1]=tmp;var diff=Math.abs(startAngle-endAngle);if(diff<0.0001){return 0}if(diff%PI2$1<0.0001){startAngle=0;endAngle=PI2$1;var dir=anticlockwise?1:-1;if(x>=roots[0]+cx&&x<=roots[1]+cx){return dir}else{return 0}}if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle);endAngle=normalizeRadian(tmp)}else{startAngle=normalizeRadian(startAngle);endAngle=normalizeRadian(endAngle)}if(startAngle>endAngle){endAngle+=PI2$1
}var w=0;for(var i=0;i<2;i++){var x_=roots[i];if(x_+cx>x){var angle=Math.atan2(y,x_);var dir=anticlockwise?1:-1;if(angle<0){angle=PI2$1+angle}if((angle>=startAngle&&angle<=endAngle)||(angle+PI2$1>=startAngle&&angle+PI2$1<=endAngle)){if(angle>Math.PI/2&&angle<Math.PI*1.5){dir=-dir}w+=dir}}}return w}function containPath(data,lineWidth,isStroke,x,y){var w=0;var xi=0;var yi=0;var x0=0;var y0=0;for(var i=0;i<data.length;){var cmd=data[i++];if(cmd===CMD$1.M&&i>1){if(!isStroke){w+=windingLine(xi,yi,x0,y0,x,y)}}if(i===1){xi=data[i];yi=data[i+1];x0=xi;y0=yi}switch(cmd){case CMD$1.M:x0=data[i++];y0=data[i++];xi=x0;yi=y0;break;case CMD$1.L:if(isStroke){if(containStroke$1(xi,yi,data[i],data[i+1],lineWidth,x,y)){return true}}else{w+=windingLine(xi,yi,data[i],data[i+1],x,y)||0}xi=data[i++];yi=data[i++];break;case CMD$1.C:if(isStroke){if(containStroke$2(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],lineWidth,x,y)){return true}}else{w+=windingCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],x,y)||0}xi=data[i++];yi=data[i++];break;case CMD$1.Q:if(isStroke){if(containStroke$3(xi,yi,data[i++],data[i++],data[i],data[i+1],lineWidth,x,y)){return true}}else{w+=windingQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],x,y)||0}xi=data[i++];yi=data[i++];break;case CMD$1.A:var cx=data[i++];var cy=data[i++];var rx=data[i++];var ry=data[i++];var theta=data[i++];var dTheta=data[i++];i+=1;var anticlockwise=1-data[i++];var x1=Math.cos(theta)*rx+cx;var y1=Math.sin(theta)*ry+cy;if(i>1){w+=windingLine(xi,yi,x1,y1,x,y)}else{x0=x1;y0=y1}var _x=(x-cx)*ry/rx+cx;if(isStroke){if(containStroke$4(cx,cy,ry,theta,theta+dTheta,anticlockwise,lineWidth,_x,y)){return true}}else{w+=windingArc(cx,cy,ry,theta,theta+dTheta,anticlockwise,_x,y)}xi=Math.cos(theta+dTheta)*rx+cx;yi=Math.sin(theta+dTheta)*ry+cy;break;case CMD$1.R:x0=xi=data[i++];y0=yi=data[i++];var width=data[i++];var height=data[i++];var x1=x0+width;var y1=y0+height;if(isStroke){if(containStroke$1(x0,y0,x1,y0,lineWidth,x,y)||containStroke$1(x1,y0,x1,y1,lineWidth,x,y)||containStroke$1(x1,y1,x0,y1,lineWidth,x,y)||containStroke$1(x0,y1,x0,y0,lineWidth,x,y)){return true
}}else{w+=windingLine(x1,y0,x1,y1,x,y);w+=windingLine(x0,y1,x0,y0,x,y)}break;case CMD$1.Z:if(isStroke){if(containStroke$1(xi,yi,x0,y0,lineWidth,x,y)){return true}}else{w+=windingLine(xi,yi,x0,y0,x,y)}xi=x0;yi=y0;break}}if(!isStroke&&!isAroundEqual(yi,y0)){w+=windingLine(xi,yi,x0,y0,x,y)||0}return w!==0}function contain(pathData,x,y){return containPath(pathData,0,false,x,y)}function containStroke(pathData,lineWidth,x,y){return containPath(pathData,lineWidth,true,x,y)}var getCanvasPattern=Pattern.prototype.getCanvasPattern;var abs=Math.abs;var pathProxyForDraw=new PathProxy(true);function Path(opts){Displayable.call(this,opts);this.path=null}Path.prototype={constructor:Path,type:"path",__dirtyPath:true,strokeContainThreshold:5,subPixelOptimize:false,brush:function(ctx,prevEl){var style=this.style;var path=this.path||pathProxyForDraw;var hasStroke=style.hasStroke();var hasFill=style.hasFill();var fill=style.fill;var stroke=style.stroke;var hasFillGradient=hasFill&&!!(fill.colorStops);var hasStrokeGradient=hasStroke&&!!(stroke.colorStops);var hasFillPattern=hasFill&&!!(fill.image);var hasStrokePattern=hasStroke&&!!(stroke.image);style.bind(ctx,this,prevEl);this.setTransform(ctx);if(this.__dirty){var rect;if(hasFillGradient){rect=rect||this.getBoundingRect();this._fillGradient=style.getGradient(ctx,fill,rect)}if(hasStrokeGradient){rect=rect||this.getBoundingRect();this._strokeGradient=style.getGradient(ctx,stroke,rect)}}if(hasFillGradient){ctx.fillStyle=this._fillGradient}else{if(hasFillPattern){ctx.fillStyle=getCanvasPattern.call(fill,ctx)}}if(hasStrokeGradient){ctx.strokeStyle=this._strokeGradient}else{if(hasStrokePattern){ctx.strokeStyle=getCanvasPattern.call(stroke,ctx)}}var lineDash=style.lineDash;var lineDashOffset=style.lineDashOffset;var ctxLineDash=!!ctx.setLineDash;var scale=this.getGlobalScale();path.setScale(scale[0],scale[1]);if(this.__dirtyPath||(lineDash&&!ctxLineDash&&hasStroke)){path.beginPath(ctx);if(lineDash&&!ctxLineDash){path.setLineDash(lineDash);path.setLineDashOffset(lineDashOffset)
}this.buildPath(path,this.shape,false);if(this.path){this.__dirtyPath=false}}else{ctx.beginPath();this.path.rebuildPath(ctx)}if(hasFill){if(style.fillOpacity!=null){var originalGlobalAlpha=ctx.globalAlpha;ctx.globalAlpha=style.fillOpacity*style.opacity;path.fill(ctx);ctx.globalAlpha=originalGlobalAlpha}else{path.fill(ctx)}}if(lineDash&&ctxLineDash){ctx.setLineDash(lineDash);ctx.lineDashOffset=lineDashOffset}if(hasStroke){if(style.strokeOpacity!=null){var originalGlobalAlpha=ctx.globalAlpha;ctx.globalAlpha=style.strokeOpacity*style.opacity;path.stroke(ctx);ctx.globalAlpha=originalGlobalAlpha}else{path.stroke(ctx)}}if(lineDash&&ctxLineDash){ctx.setLineDash([])}if(style.text!=null){this.restoreTransform(ctx);this.drawRectText(ctx,this.getBoundingRect())}},buildPath:function(ctx,shapeCfg,inBundle){},createPathProxy:function(){this.path=new PathProxy()},getBoundingRect:function(){var rect=this._rect;var style=this.style;var needsUpdateRect=!rect;if(needsUpdateRect){var path=this.path;if(!path){path=this.path=new PathProxy()}if(this.__dirtyPath){path.beginPath();this.buildPath(path,this.shape,false)}rect=path.getBoundingRect()}this._rect=rect;if(style.hasStroke()){var rectWithStroke=this._rectWithStroke||(this._rectWithStroke=rect.clone());if(this.__dirty||needsUpdateRect){rectWithStroke.copy(rect);var w=style.lineWidth;var lineScale=style.strokeNoScale?this.getLineScale():1;if(!style.hasFill()){w=Math.max(w,this.strokeContainThreshold||4)}if(lineScale>1e-10){rectWithStroke.width+=w/lineScale;rectWithStroke.height+=w/lineScale;rectWithStroke.x-=w/lineScale/2;rectWithStroke.y-=w/lineScale/2}}return rectWithStroke}return rect},contain:function(x,y){var localPos=this.transformCoordToLocal(x,y);var rect=this.getBoundingRect();var style=this.style;x=localPos[0];y=localPos[1];if(rect.contain(x,y)){var pathData=this.path.data;if(style.hasStroke()){var lineWidth=style.lineWidth;var lineScale=style.strokeNoScale?this.getLineScale():1;if(lineScale>1e-10){if(!style.hasFill()){lineWidth=Math.max(lineWidth,this.strokeContainThreshold)
}if(containStroke(pathData,lineWidth/lineScale,x,y)){return true}}}if(style.hasFill()){return contain(pathData,x,y)}}return false},dirty:function(dirtyPath){if(dirtyPath==null){dirtyPath=true}if(dirtyPath){this.__dirtyPath=dirtyPath;this._rect=null}this.__dirty=this.__dirtyText=true;this.__zr&&this.__zr.refresh();if(this.__clipTarget){this.__clipTarget.dirty()}},animateShape:function(loop){return this.animate("shape",loop)},attrKV:function(key,value){if(key==="shape"){this.setShape(value);this.__dirtyPath=true;this._rect=null}else{Displayable.prototype.attrKV.call(this,key,value)}},setShape:function(key,value){var shape=this.shape;if(shape){if(isObject$1(key)){for(var name in key){if(key.hasOwnProperty(name)){shape[name]=key[name]}}}else{shape[key]=value}this.dirty(true)}return this},getLineScale:function(){var m=this.transform;return m&&abs(m[0]-1)>1e-10&&abs(m[3]-1)>1e-10?Math.sqrt(abs(m[0]*m[3]-m[2]*m[1])):1}};Path.extend=function(defaults$$1){var Sub=function(opts){Path.call(this,opts);if(defaults$$1.style){this.style.extendFrom(defaults$$1.style,false)}var defaultShape=defaults$$1.shape;if(defaultShape){this.shape=this.shape||{};var thisShape=this.shape;for(var name in defaultShape){if(!thisShape.hasOwnProperty(name)&&defaultShape.hasOwnProperty(name)){thisShape[name]=defaultShape[name]}}}defaults$$1.init&&defaults$$1.init.call(this,opts)};inherits(Sub,Path);for(var name in defaults$$1){if(name!=="style"&&name!=="shape"){Sub.prototype[name]=defaults$$1[name]}}return Sub};inherits(Path,Displayable);var CMD$2=PathProxy.CMD;var points=[[],[],[]];var mathSqrt$3=Math.sqrt;var mathAtan2=Math.atan2;var transformPath=function(path,m){var data=path.data;var cmd;var nPoint;var i;var j;var k;var p;var M=CMD$2.M;var C=CMD$2.C;var L=CMD$2.L;var R=CMD$2.R;var A=CMD$2.A;var Q=CMD$2.Q;for(i=0,j=0;i<data.length;){cmd=data[i++];j=i;nPoint=0;switch(cmd){case M:nPoint=1;break;case L:nPoint=1;break;case C:nPoint=3;break;case Q:nPoint=2;break;case A:var x=m[4];var y=m[5];var sx=mathSqrt$3(m[0]*m[0]+m[1]*m[1]);
var sy=mathSqrt$3(m[2]*m[2]+m[3]*m[3]);var angle=mathAtan2(-m[1]/sy,m[0]/sx);data[i]*=sx;data[i++]+=x;data[i]*=sy;data[i++]+=y;data[i++]*=sx;data[i++]*=sy;data[i++]+=angle;data[i++]+=angle;i+=2;j=i;break;case R:p[0]=data[i++];p[1]=data[i++];applyTransform(p,p,m);data[j++]=p[0];data[j++]=p[1];p[0]+=data[i++];p[1]+=data[i++];applyTransform(p,p,m);data[j++]=p[0];data[j++]=p[1]}for(k=0;k<nPoint;k++){var p=points[k];p[0]=data[i++];p[1]=data[i++];applyTransform(p,p,m);data[j++]=p[0];data[j++]=p[1]}}};var mathSqrt=Math.sqrt;var mathSin=Math.sin;var mathCos=Math.cos;var PI=Math.PI;var vMag=function(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1])};var vRatio=function(u,v){return(u[0]*v[0]+u[1]*v[1])/(vMag(u)*vMag(v))};var vAngle=function(u,v){return(u[0]*v[1]<u[1]*v[0]?-1:1)*Math.acos(vRatio(u,v))};function processArc(x1,y1,x2,y2,fa,fs,rx,ry,psiDeg,cmd,path){var psi=psiDeg*(PI/180);var xp=mathCos(psi)*(x1-x2)/2+mathSin(psi)*(y1-y2)/2;var yp=-1*mathSin(psi)*(x1-x2)/2+mathCos(psi)*(y1-y2)/2;var lambda=(xp*xp)/(rx*rx)+(yp*yp)/(ry*ry);if(lambda>1){rx*=mathSqrt(lambda);ry*=mathSqrt(lambda)}var f=(fa===fs?-1:1)*mathSqrt((((rx*rx)*(ry*ry))-((rx*rx)*(yp*yp))-((ry*ry)*(xp*xp)))/((rx*rx)*(yp*yp)+(ry*ry)*(xp*xp)))||0;var cxp=f*rx*yp/ry;var cyp=f*-ry*xp/rx;var cx=(x1+x2)/2+mathCos(psi)*cxp-mathSin(psi)*cyp;var cy=(y1+y2)/2+mathSin(psi)*cxp+mathCos(psi)*cyp;var theta=vAngle([1,0],[(xp-cxp)/rx,(yp-cyp)/ry]);var u=[(xp-cxp)/rx,(yp-cyp)/ry];var v=[(-1*xp-cxp)/rx,(-1*yp-cyp)/ry];var dTheta=vAngle(u,v);if(vRatio(u,v)<=-1){dTheta=PI}if(vRatio(u,v)>=1){dTheta=0}if(fs===0&&dTheta>0){dTheta=dTheta-2*PI}if(fs===1&&dTheta<0){dTheta=dTheta+2*PI}path.addData(cmd,cx,cy,rx,ry,theta,dTheta,psi,fs)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(data){if(!data){return new PathProxy()}var cpx=0;var cpy=0;var subpathX=cpx;var subpathY=cpy;var prevCmd;var path=new PathProxy();var CMD=PathProxy.CMD;var cmdList=data.match(commandReg);
for(var l=0;l<cmdList.length;l++){var cmdText=cmdList[l];var cmdStr=cmdText.charAt(0);var cmd;var p=cmdText.match(numberReg)||[];var pLen=p.length;for(var i=0;i<pLen;i++){p[i]=parseFloat(p[i])}var off=0;while(off<pLen){var ctlPtx;var ctlPty;var rx;var ry;var psi;var fa;var fs;var x1=cpx;var y1=cpy;switch(cmdStr){case"l":cpx+=p[off++];cpy+=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"L":cpx=p[off++];cpy=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"m":cpx+=p[off++];cpy+=p[off++];cmd=CMD.M;path.addData(cmd,cpx,cpy);subpathX=cpx;subpathY=cpy;cmdStr="l";break;case"M":cpx=p[off++];cpy=p[off++];cmd=CMD.M;path.addData(cmd,cpx,cpy);subpathX=cpx;subpathY=cpy;cmdStr="L";break;case"h":cpx+=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"H":cpx=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"v":cpy+=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"V":cpy=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"C":cmd=CMD.C;path.addData(cmd,p[off++],p[off++],p[off++],p[off++],p[off++],p[off++]);cpx=p[off-2];cpy=p[off-1];break;case"c":cmd=CMD.C;path.addData(cmd,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy);cpx+=p[off-2];cpy+=p[off-1];break;case"S":ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.C){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cmd=CMD.C;x1=p[off++];y1=p[off++];cpx=p[off++];cpy=p[off++];path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"s":ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.C){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cmd=CMD.C;x1=cpx+p[off++];y1=cpy+p[off++];cpx+=p[off++];cpy+=p[off++];path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"Q":x1=p[off++];y1=p[off++];cpx=p[off++];cpy=p[off++];cmd=CMD.Q;path.addData(cmd,x1,y1,cpx,cpy);break;case"q":x1=p[off++]+cpx;y1=p[off++]+cpy;cpx+=p[off++];cpy+=p[off++];cmd=CMD.Q;path.addData(cmd,x1,y1,cpx,cpy);break;case"T":ctlPtx=cpx;ctlPty=cpy;
var len=path.len();var pathData=path.data;if(prevCmd===CMD.Q){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cpx=p[off++];cpy=p[off++];cmd=CMD.Q;path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"t":ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.Q){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cpx+=p[off++];cpy+=p[off++];cmd=CMD.Q;path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"A":rx=p[off++];ry=p[off++];psi=p[off++];fa=p[off++];fs=p[off++];x1=cpx,y1=cpy;cpx=p[off++];cpy=p[off++];cmd=CMD.A;processArc(x1,y1,cpx,cpy,fa,fs,rx,ry,psi,cmd,path);break;case"a":rx=p[off++];ry=p[off++];psi=p[off++];fa=p[off++];fs=p[off++];x1=cpx,y1=cpy;cpx+=p[off++];cpy+=p[off++];cmd=CMD.A;processArc(x1,y1,cpx,cpy,fa,fs,rx,ry,psi,cmd,path);break}}if(cmdStr==="z"||cmdStr==="Z"){cmd=CMD.Z;path.addData(cmd);cpx=subpathX;cpy=subpathY}prevCmd=cmd}path.toStatic();return path}function createPathOptions(str,opts){var pathProxy=createPathProxyFromString(str);opts=opts||{};opts.buildPath=function(path){if(path.setData){path.setData(pathProxy.data);var ctx=path.getContext();if(ctx){path.rebuildPath(ctx)}}else{var ctx=path;pathProxy.rebuildPath(ctx)}};opts.applyTransform=function(m){transformPath(pathProxy,m);this.dirty(true)};return opts}function createFromString(str,opts){return new Path(createPathOptions(str,opts))}function extendFromString(str,opts){return Path.extend(createPathOptions(str,opts))}function mergePath$1(pathEls,opts){var pathList=[];var len=pathEls.length;for(var i=0;i<len;i++){var pathEl=pathEls[i];if(!pathEl.path){pathEl.createPathProxy()}if(pathEl.__dirtyPath){pathEl.buildPath(pathEl.path,pathEl.shape,true)}pathList.push(pathEl.path)}var pathBundle=new Path(opts);pathBundle.createPathProxy();pathBundle.buildPath=function(path){path.appendPath(pathList);var ctx=path.getContext();if(ctx){path.rebuildPath(ctx)}};return pathBundle}var Text=function(opts){Displayable.call(this,opts)};Text.prototype={constructor:Text,type:"text",brush:function(ctx,prevEl){var style=this.style;
this.__dirty&&normalizeTextStyle(style,true);style.fill=style.stroke=style.shadowBlur=style.shadowColor=style.shadowOffsetX=style.shadowOffsetY=null;var text=style.text;text!=null&&(text+="");if(!needDrawText(text,style)){ctx.__attrCachedBy=ContextCachedBy.NONE;return}this.setTransform(ctx);renderText(this,ctx,text,style,null,prevEl);this.restoreTransform(ctx)},getBoundingRect:function(){var style=this.style;this.__dirty&&normalizeTextStyle(style,true);if(!this._rect){var text=style.text;text!=null?(text+=""):(text="");var rect=getBoundingRect(style.text+"",style.font,style.textAlign,style.textVerticalAlign,style.textPadding,style.rich);rect.x+=style.x||0;rect.y+=style.y||0;if(getStroke(style.textStroke,style.textStrokeWidth)){var w=style.textStrokeWidth;rect.x-=w/2;rect.y-=w/2;rect.width+=w;rect.height+=w}this._rect=rect}return this._rect}};inherits(Text,Displayable);var Circle=Path.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(ctx,shape,inBundle){if(inBundle){ctx.moveTo(shape.cx+shape.r,shape.cy)}ctx.arc(shape.cx,shape.cy,shape.r,0,Math.PI*2,true)}});var shadowTemp=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];var fixClipWithShadow=function(orignalBrush){return(env$1.browser.ie&&env$1.browser.version>=11)?function(){var clipPaths=this.__clipPaths;var style=this.style;var modified;if(clipPaths){for(var i=0;i<clipPaths.length;i++){var clipPath=clipPaths[i];var shape=clipPath&&clipPath.shape;var type=clipPath&&clipPath.type;if(shape&&((type==="sector"&&shape.startAngle===shape.endAngle)||(type==="rect"&&(!shape.width||!shape.height)))){for(var j=0;j<shadowTemp.length;j++){shadowTemp[j][2]=style[shadowTemp[j][0]];style[shadowTemp[j][0]]=shadowTemp[j][1]}modified=true;break}}}orignalBrush.apply(this,arguments);if(modified){for(var j=0;j<shadowTemp.length;j++){style[shadowTemp[j][0]]=shadowTemp[j][2]}}}:orignalBrush};var Sector=Path.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:true},brush:fixClipWithShadow(Path.prototype.brush),buildPath:function(ctx,shape){var x=shape.cx;
var y=shape.cy;var r0=Math.max(shape.r0||0,0);var r=Math.max(shape.r,0);var startAngle=shape.startAngle;var endAngle=shape.endAngle;var clockwise=shape.clockwise;var unitX=Math.cos(startAngle);var unitY=Math.sin(startAngle);ctx.moveTo(unitX*r0+x,unitY*r0+y);ctx.lineTo(unitX*r+x,unitY*r+y);ctx.arc(x,y,r,startAngle,endAngle,!clockwise);ctx.lineTo(Math.cos(endAngle)*r0+x,Math.sin(endAngle)*r0+y);if(r0!==0){ctx.arc(x,y,r0,endAngle,startAngle,clockwise)}ctx.closePath()}});var Ring=Path.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(ctx,shape){var x=shape.cx;var y=shape.cy;var PI2=Math.PI*2;ctx.moveTo(x+shape.r,y);ctx.arc(x,y,shape.r,0,PI2,false);ctx.moveTo(x+shape.r0,y);ctx.arc(x,y,shape.r0,0,PI2,true)}});function interpolate(p0,p1,p2,p3,t,t2,t3){var v0=(p2-p0)*0.5;var v1=(p3-p1)*0.5;return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}var smoothSpline=function(points,isLoop){var len$$1=points.length;var ret=[];var distance$$1=0;for(var i=1;i<len$$1;i++){distance$$1+=distance(points[i-1],points[i])}var segs=distance$$1/2;segs=segs<len$$1?len$$1:segs;for(var i=0;i<segs;i++){var pos=i/(segs-1)*(isLoop?len$$1:len$$1-1);var idx=Math.floor(pos);var w=pos-idx;var p0;var p1=points[idx%len$$1];var p2;var p3;if(!isLoop){p0=points[idx===0?idx:idx-1];p2=points[idx>len$$1-2?len$$1-1:idx+1];p3=points[idx>len$$1-3?len$$1-1:idx+2]}else{p0=points[(idx-1+len$$1)%len$$1];p2=points[(idx+1)%len$$1];p3=points[(idx+2)%len$$1]}var w2=w*w;var w3=w*w2;ret.push([interpolate(p0[0],p1[0],p2[0],p3[0],w,w2,w3),interpolate(p0[1],p1[1],p2[1],p3[1],w,w2,w3)])}return ret};var smoothBezier=function(points,smooth,isLoop,constraint){var cps=[];var v=[];var v1=[];var v2=[];var prevPoint;var nextPoint;var min$$1;var max$$1;if(constraint){min$$1=[Infinity,Infinity];max$$1=[-Infinity,-Infinity];for(var i=0,len$$1=points.length;i<len$$1;i++){min(min$$1,min$$1,points[i]);max(max$$1,max$$1,points[i])}min(min$$1,min$$1,constraint[0]);max(max$$1,max$$1,constraint[1])}for(var i=0,len$$1=points.length;
i<len$$1;i++){var point=points[i];if(isLoop){prevPoint=points[i?i-1:len$$1-1];nextPoint=points[(i+1)%len$$1]}else{if(i===0||i===len$$1-1){cps.push(clone$1(points[i]));continue}else{prevPoint=points[i-1];nextPoint=points[i+1]}}sub(v,nextPoint,prevPoint);scale(v,v,smooth);var d0=distance(point,prevPoint);var d1=distance(point,nextPoint);var sum=d0+d1;if(sum!==0){d0/=sum;d1/=sum}scale(v1,v,-d0);scale(v2,v,d1);var cp0=add([],point,v1);var cp1=add([],point,v2);if(constraint){max(cp0,cp0,min$$1);min(cp0,cp0,max$$1);max(cp1,cp1,min$$1);min(cp1,cp1,max$$1)}cps.push(cp0);cps.push(cp1)}if(isLoop){cps.push(cps.shift())}return cps};function buildPath$1(ctx,shape,closePath){var points=shape.points;var smooth=shape.smooth;if(points&&points.length>=2){if(smooth&&smooth!=="spline"){var controlPoints=smoothBezier(points,smooth,closePath,shape.smoothConstraint);ctx.moveTo(points[0][0],points[0][1]);var len=points.length;for(var i=0;i<(closePath?len:len-1);i++){var cp1=controlPoints[i*2];var cp2=controlPoints[i*2+1];var p=points[(i+1)%len];ctx.bezierCurveTo(cp1[0],cp1[1],cp2[0],cp2[1],p[0],p[1])}}else{if(smooth==="spline"){points=smoothSpline(points,closePath)}ctx.moveTo(points[0][0],points[0][1]);for(var i=1,l=points.length;i<l;i++){ctx.lineTo(points[i][0],points[i][1])}}closePath&&ctx.closePath()}}var Polygon=Path.extend({type:"polygon",shape:{points:null,smooth:false,smoothConstraint:null},buildPath:function(ctx,shape){buildPath$1(ctx,shape,true)}});var Polyline=Path.extend({type:"polyline",shape:{points:null,smooth:false,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){buildPath$1(ctx,shape,false)}});var round$1=Math.round;function subPixelOptimizeLine$1(outputShape,inputShape,style){var lineWidth=style&&style.lineWidth;if(!inputShape||!lineWidth){return}var x1=inputShape.x1;var x2=inputShape.x2;var y1=inputShape.y1;var y2=inputShape.y2;if(round$1(x1*2)===round$1(x2*2)){outputShape.x1=outputShape.x2=subPixelOptimize$1(x1,lineWidth,true)}else{outputShape.x1=x1;
outputShape.x2=x2}if(round$1(y1*2)===round$1(y2*2)){outputShape.y1=outputShape.y2=subPixelOptimize$1(y1,lineWidth,true)}else{outputShape.y1=y1;outputShape.y2=y2}}function subPixelOptimizeRect$1(outputShape,inputShape,style){var lineWidth=style&&style.lineWidth;if(!inputShape||!lineWidth){return}var originX=inputShape.x;var originY=inputShape.y;var originWidth=inputShape.width;var originHeight=inputShape.height;outputShape.x=subPixelOptimize$1(originX,lineWidth,true);outputShape.y=subPixelOptimize$1(originY,lineWidth,true);outputShape.width=Math.max(subPixelOptimize$1(originX+originWidth,lineWidth,false)-outputShape.x,originWidth===0?0:1);outputShape.height=Math.max(subPixelOptimize$1(originY+originHeight,lineWidth,false)-outputShape.y,originHeight===0?0:1)}function subPixelOptimize$1(position,lineWidth,positiveOrNegative){var doubledPosition=round$1(position*2);return(doubledPosition+round$1(lineWidth))%2===0?doubledPosition/2:(doubledPosition+(positiveOrNegative?1:-1))/2}var subPixelOptimizeOutputShape={};var Rect=Path.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){var x;var y;var width;var height;if(this.subPixelOptimize){subPixelOptimizeRect$1(subPixelOptimizeOutputShape,shape,this.style);x=subPixelOptimizeOutputShape.x;y=subPixelOptimizeOutputShape.y;width=subPixelOptimizeOutputShape.width;height=subPixelOptimizeOutputShape.height;subPixelOptimizeOutputShape.r=shape.r;shape=subPixelOptimizeOutputShape}else{x=shape.x;y=shape.y;width=shape.width;height=shape.height}if(!shape.r){ctx.rect(x,y,width,height)}else{buildPath(ctx,shape)}ctx.closePath();return}});var subPixelOptimizeOutputShape$1={};var Line=Path.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x1;var y1;var x2;var y2;if(this.subPixelOptimize){subPixelOptimizeLine$1(subPixelOptimizeOutputShape$1,shape,this.style);x1=subPixelOptimizeOutputShape$1.x1;y1=subPixelOptimizeOutputShape$1.y1;x2=subPixelOptimizeOutputShape$1.x2;
y2=subPixelOptimizeOutputShape$1.y2}else{x1=shape.x1;y1=shape.y1;x2=shape.x2;y2=shape.y2}var percent=shape.percent;if(percent===0){return}ctx.moveTo(x1,y1);if(percent<1){x2=x1*(1-percent)+x2*percent;y2=y1*(1-percent)+y2*percent}ctx.lineTo(x2,y2)},pointAt:function(p){var shape=this.shape;return[shape.x1*(1-p)+shape.x2*p,shape.y1*(1-p)+shape.y2*p]}});var out=[];function someVectorAt(shape,t,isTangent){var cpx2=shape.cpx2;var cpy2=shape.cpy2;if(cpx2===null||cpy2===null){return[(isTangent?cubicDerivativeAt:cubicAt)(shape.x1,shape.cpx1,shape.cpx2,shape.x2,t),(isTangent?cubicDerivativeAt:cubicAt)(shape.y1,shape.cpy1,shape.cpy2,shape.y2,t)]}else{return[(isTangent?quadraticDerivativeAt:quadraticAt)(shape.x1,shape.cpx1,shape.x2,t),(isTangent?quadraticDerivativeAt:quadraticAt)(shape.y1,shape.cpy1,shape.y2,t)]}}var BezierCurve=Path.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x1=shape.x1;var y1=shape.y1;var x2=shape.x2;var y2=shape.y2;var cpx1=shape.cpx1;var cpy1=shape.cpy1;var cpx2=shape.cpx2;var cpy2=shape.cpy2;var percent=shape.percent;if(percent===0){return}ctx.moveTo(x1,y1);if(cpx2==null||cpy2==null){if(percent<1){quadraticSubdivide(x1,cpx1,x2,percent,out);cpx1=out[1];x2=out[2];quadraticSubdivide(y1,cpy1,y2,percent,out);cpy1=out[1];y2=out[2]}ctx.quadraticCurveTo(cpx1,cpy1,x2,y2)}else{if(percent<1){cubicSubdivide(x1,cpx1,cpx2,x2,percent,out);cpx1=out[1];cpx2=out[2];x2=out[3];cubicSubdivide(y1,cpy1,cpy2,y2,percent,out);cpy1=out[1];cpy2=out[2];y2=out[3]}ctx.bezierCurveTo(cpx1,cpy1,cpx2,cpy2,x2,y2)}},pointAt:function(t){return someVectorAt(this.shape,t,false)},tangentAt:function(t){var p=someVectorAt(this.shape,t,true);return normalize(p,p)}});var Arc=Path.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:true},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x=shape.cx;var y=shape.cy;var r=Math.max(shape.r,0);var startAngle=shape.startAngle;
var endAngle=shape.endAngle;var clockwise=shape.clockwise;var unitX=Math.cos(startAngle);var unitY=Math.sin(startAngle);ctx.moveTo(unitX*r+x,unitY*r+y);ctx.arc(x,y,r,startAngle,endAngle,!clockwise)}});var CompoundPath=Path.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){var dirtyPath=this.__dirtyPath;var paths=this.shape.paths;for(var i=0;i<paths.length;i++){dirtyPath=dirtyPath||paths[i].__dirtyPath}this.__dirtyPath=dirtyPath;this.__dirty=this.__dirty||dirtyPath},beforeBrush:function(){this._updatePathDirty();var paths=this.shape.paths||[];var scale=this.getGlobalScale();for(var i=0;i<paths.length;i++){if(!paths[i].path){paths[i].createPathProxy()}paths[i].path.setScale(scale[0],scale[1])}},buildPath:function(ctx,shape){var paths=shape.paths||[];for(var i=0;i<paths.length;i++){paths[i].buildPath(ctx,paths[i].shape,true)}},afterBrush:function(){var paths=this.shape.paths||[];for(var i=0;i<paths.length;i++){paths[i].__dirtyPath=false}},getBoundingRect:function(){this._updatePathDirty();return Path.prototype.getBoundingRect.call(this)}});var Gradient=function(colorStops){this.colorStops=colorStops||[]};Gradient.prototype={constructor:Gradient,addColorStop:function(offset,color){this.colorStops.push({offset:offset,color:color})}};var LinearGradient=function(x,y,x2,y2,colorStops,globalCoord){this.x=x==null?0:x;this.y=y==null?0:y;this.x2=x2==null?1:x2;this.y2=y2==null?0:y2;this.type="linear";this.global=globalCoord||false;Gradient.call(this,colorStops)};LinearGradient.prototype={constructor:LinearGradient};inherits(LinearGradient,Gradient);var RadialGradient=function(x,y,r,colorStops,globalCoord){this.x=x==null?0.5:x;this.y=y==null?0.5:y;this.r=r==null?0.5:r;this.type="radial";this.global=globalCoord||false;Gradient.call(this,colorStops)};RadialGradient.prototype={constructor:RadialGradient};inherits(RadialGradient,Gradient);function IncrementalDisplayble(opts){Displayable.call(this,opts);this._displayables=[];this._temporaryDisplayables=[];this._cursor=0;
this.notClear=true}IncrementalDisplayble.prototype.incremental=true;IncrementalDisplayble.prototype.clearDisplaybles=function(){this._displayables=[];this._temporaryDisplayables=[];this._cursor=0;this.dirty();this.notClear=false};IncrementalDisplayble.prototype.addDisplayable=function(displayable,notPersistent){if(notPersistent){this._temporaryDisplayables.push(displayable)}else{this._displayables.push(displayable)}this.dirty()};IncrementalDisplayble.prototype.addDisplayables=function(displayables,notPersistent){notPersistent=notPersistent||false;for(var i=0;i<displayables.length;i++){this.addDisplayable(displayables[i],notPersistent)}};IncrementalDisplayble.prototype.eachPendingDisplayable=function(cb){for(var i=this._cursor;i<this._displayables.length;i++){cb&&cb(this._displayables[i])}for(var i=0;i<this._temporaryDisplayables.length;i++){cb&&cb(this._temporaryDisplayables[i])}};IncrementalDisplayble.prototype.update=function(){this.updateTransform();for(var i=this._cursor;i<this._displayables.length;i++){var displayable=this._displayables[i];displayable.parent=this;displayable.update();displayable.parent=null}for(var i=0;i<this._temporaryDisplayables.length;i++){var displayable=this._temporaryDisplayables[i];displayable.parent=this;displayable.update();displayable.parent=null}};IncrementalDisplayble.prototype.brush=function(ctx,prevEl){for(var i=this._cursor;i<this._displayables.length;i++){var displayable=this._displayables[i];displayable.beforeBrush&&displayable.beforeBrush(ctx);displayable.brush(ctx,i===this._cursor?null:this._displayables[i-1]);displayable.afterBrush&&displayable.afterBrush(ctx)}this._cursor=i;for(var i=0;i<this._temporaryDisplayables.length;i++){var displayable=this._temporaryDisplayables[i];displayable.beforeBrush&&displayable.beforeBrush(ctx);displayable.brush(ctx,i===0?null:this._temporaryDisplayables[i-1]);displayable.afterBrush&&displayable.afterBrush(ctx)}this._temporaryDisplayables=[];this.notClear=true};var m=[];IncrementalDisplayble.prototype.getBoundingRect=function(){if(!this._rect){var rect=new BoundingRect(Infinity,Infinity,-Infinity,-Infinity);
for(var i=0;i<this._displayables.length;i++){var displayable=this._displayables[i];var childRect=displayable.getBoundingRect().clone();if(displayable.needLocalTransform()){childRect.applyTransform(displayable.getLocalTransform(m))}rect.union(childRect)}this._rect=rect}return this._rect};IncrementalDisplayble.prototype.contain=function(x,y){var localPos=this.transformCoordToLocal(x,y);var rect=this.getBoundingRect();if(rect.contain(localPos[0],localPos[1])){for(var i=0;i<this._displayables.length;i++){var displayable=this._displayables[i];if(displayable.contain(x,y)){return true}}}return false};inherits(IncrementalDisplayble,Displayable);var round=Math.round;var mathMax$1=Math.max;var mathMin$1=Math.min;var EMPTY_OBJ={};var Z2_EMPHASIS_LIFT=1;function extendShape(opts){return Path.extend(opts)}function extendPath(pathData,opts){return extendFromString(pathData,opts)}function makePath(pathData,opts,rect,layout){var path=createFromString(pathData,opts);if(rect){if(layout==="center"){rect=centerGraphic(rect,path.getBoundingRect())}resizePath(path,rect)}return path}function makeImage(imageUrl,rect,layout){var path=new ZImage({style:{image:imageUrl,x:rect.x,y:rect.y,width:rect.width,height:rect.height},onload:function(img){if(layout==="center"){var boundingRect={width:img.width,height:img.height};path.setStyle(centerGraphic(rect,boundingRect))}}});return path}function centerGraphic(rect,boundingRect){var aspect=boundingRect.width/boundingRect.height;var width=rect.height*aspect;var height;if(width<=rect.width){height=rect.height}else{width=rect.width;height=width/aspect}var cx=rect.x+rect.width/2;var cy=rect.y+rect.height/2;return{x:cx-width/2,y:cy-height/2,width:width,height:height}}var mergePath=mergePath$1;function resizePath(path,rect){if(!path.applyTransform){return}var pathRect=path.getBoundingRect();var m=pathRect.calculateTransform(rect);path.applyTransform(m)}function subPixelOptimizeLine(param){var shape=param.shape;var lineWidth=param.style.lineWidth;if(round(shape.x1*2)===round(shape.x2*2)){shape.x1=shape.x2=subPixelOptimize(shape.x1,lineWidth,true)
}if(round(shape.y1*2)===round(shape.y2*2)){shape.y1=shape.y2=subPixelOptimize(shape.y1,lineWidth,true)}return param}function subPixelOptimizeRect(param){var shape=param.shape;var lineWidth=param.style.lineWidth;var originX=shape.x;var originY=shape.y;var originWidth=shape.width;var originHeight=shape.height;shape.x=subPixelOptimize(shape.x,lineWidth,true);shape.y=subPixelOptimize(shape.y,lineWidth,true);shape.width=Math.max(subPixelOptimize(originX+originWidth,lineWidth,false)-shape.x,originWidth===0?0:1);shape.height=Math.max(subPixelOptimize(originY+originHeight,lineWidth,false)-shape.y,originHeight===0?0:1);return param}function subPixelOptimize(position,lineWidth,positiveOrNegative){var doubledPosition=round(position*2);return(doubledPosition+round(lineWidth))%2===0?doubledPosition/2:(doubledPosition+(positiveOrNegative?1:-1))/2}function hasFillOrStroke(fillOrStroke){return fillOrStroke!=null&&fillOrStroke!=="none"}var liftedColorMap=createHashMap();var liftedColorCount=0;function liftColor(color){if(typeof color!=="string"){return color}var liftedColor=liftedColorMap.get(color);if(!liftedColor){liftedColor=lift(color,-0.1);if(liftedColorCount<10000){liftedColorMap.set(color,liftedColor);liftedColorCount++}}return liftedColor}function cacheElementStl(el){if(!el.__hoverStlDirty){return}el.__hoverStlDirty=false;var hoverStyle=el.__hoverStl;if(!hoverStyle){el.__cachedNormalStl=el.__cachedNormalZ2=null;return}var normalStyle=el.__cachedNormalStl={};el.__cachedNormalZ2=el.z2;var elStyle=el.style;for(var name in hoverStyle){if(hoverStyle[name]!=null){normalStyle[name]=elStyle[name]}}normalStyle.fill=elStyle.fill;normalStyle.stroke=elStyle.stroke}function doSingleEnterHover(el){var hoverStl=el.__hoverStl;if(!hoverStl||el.__highlighted){return}var useHoverLayer=el.useHoverLayer;el.__highlighted=useHoverLayer?"layer":"plain";var zr=el.__zr;if(!zr&&useHoverLayer){return}var elTarget=el;var targetStyle=el.style;if(useHoverLayer){elTarget=zr.addHover(el);targetStyle=elTarget.style
}rollbackDefaultTextStyle(targetStyle);if(!useHoverLayer){cacheElementStl(elTarget)}targetStyle.extendFrom(hoverStl);setDefaultHoverFillStroke(targetStyle,hoverStl,"fill");setDefaultHoverFillStroke(targetStyle,hoverStl,"stroke");applyDefaultTextStyle(targetStyle);if(!useHoverLayer){el.dirty(false);el.z2+=Z2_EMPHASIS_LIFT}}function setDefaultHoverFillStroke(targetStyle,hoverStyle,prop){if(!hasFillOrStroke(hoverStyle[prop])&&hasFillOrStroke(targetStyle[prop])){targetStyle[prop]=liftColor(targetStyle[prop])}}function doSingleLeaveHover(el){var highlighted=el.__highlighted;if(!highlighted){return}el.__highlighted=false;if(highlighted==="layer"){el.__zr&&el.__zr.removeHover(el)}else{if(highlighted){var style=el.style;var normalStl=el.__cachedNormalStl;if(normalStl){rollbackDefaultTextStyle(style);el.setStyle(normalStl);applyDefaultTextStyle(style)}var normalZ2=el.__cachedNormalZ2;if(normalZ2!=null&&el.z2-normalZ2===Z2_EMPHASIS_LIFT){el.z2=normalZ2}}}}function traverseCall(el,method){el.isGroup?el.traverse(function(child){!child.isGroup&&method(child)}):method(el)}function setElementHoverStyle(el,hoverStl){hoverStl=el.__hoverStl=hoverStl!==false&&(hoverStl||{});el.__hoverStlDirty=true;if(el.__highlighted){el.__cachedNormalStl=null;doSingleLeaveHover(el);doSingleEnterHover(el)}}function isInEmphasis(el){return el&&el.__isEmphasisEntered}function onElementMouseOver(e){if(this.__hoverSilentOnTouch&&e.zrByTouch){return}!this.__isEmphasisEntered&&traverseCall(this,doSingleEnterHover)}function onElementMouseOut(e){if(this.__hoverSilentOnTouch&&e.zrByTouch){return}!this.__isEmphasisEntered&&traverseCall(this,doSingleLeaveHover)}function enterEmphasis(){this.__isEmphasisEntered=true;traverseCall(this,doSingleEnterHover)}function leaveEmphasis(){this.__isEmphasisEntered=false;traverseCall(this,doSingleLeaveHover)}function setHoverStyle(el,hoverStyle,opt){el.isGroup?el.traverse(function(child){!child.isGroup&&setElementHoverStyle(child,child.hoverStyle||hoverStyle)}):setElementHoverStyle(el,el.hoverStyle||hoverStyle);
setAsHoverStyleTrigger(el,opt)}function setAsHoverStyleTrigger(el,opt){var disable=opt===false;el.__hoverSilentOnTouch=opt!=null&&opt.hoverSilentOnTouch;if(!disable||el.__hoverStyleTrigger){var method=disable?"off":"on";el[method]("mouseover",onElementMouseOver)[method]("mouseout",onElementMouseOut);el[method]("emphasis",enterEmphasis)[method]("normal",leaveEmphasis);el.__hoverStyleTrigger=!disable}}function setLabelStyle(normalStyle,emphasisStyle,normalModel,emphasisModel,opt,normalSpecified,emphasisSpecified){opt=opt||EMPTY_OBJ;var labelFetcher=opt.labelFetcher;var labelDataIndex=opt.labelDataIndex;var labelDimIndex=opt.labelDimIndex;var showNormal=normalModel.getShallow("show");var showEmphasis=emphasisModel.getShallow("show");var baseText;if(showNormal||showEmphasis){if(labelFetcher){baseText=labelFetcher.getFormattedLabel(labelDataIndex,"normal",null,labelDimIndex)}if(baseText==null){baseText=isFunction$1(opt.defaultText)?opt.defaultText(labelDataIndex,opt):opt.defaultText}}var normalStyleText=showNormal?baseText:null;var emphasisStyleText=showEmphasis?retrieve2(labelFetcher?labelFetcher.getFormattedLabel(labelDataIndex,"emphasis",null,labelDimIndex):null,baseText):null;if(normalStyleText!=null||emphasisStyleText!=null){setTextStyle(normalStyle,normalModel,normalSpecified,opt);setTextStyle(emphasisStyle,emphasisModel,emphasisSpecified,opt,true)}normalStyle.text=normalStyleText;emphasisStyle.text=emphasisStyleText}function setTextStyle(textStyle,textStyleModel,specifiedTextStyle,opt,isEmphasis){setTextStyleCommon(textStyle,textStyleModel,opt,isEmphasis);specifiedTextStyle&&extend(textStyle,specifiedTextStyle);return textStyle}function setText(textStyle,labelModel,defaultColor){var opt={isRectText:true};var isEmphasis;if(defaultColor===false){isEmphasis=true}else{opt.autoColor=defaultColor}setTextStyleCommon(textStyle,labelModel,opt,isEmphasis)}function setTextStyleCommon(textStyle,textStyleModel,opt,isEmphasis){opt=opt||EMPTY_OBJ;if(opt.isRectText){var textPosition=textStyleModel.getShallow("position")||(isEmphasis?null:"inside");
textPosition==="outside"&&(textPosition="top");textStyle.textPosition=textPosition;textStyle.textOffset=textStyleModel.getShallow("offset");var labelRotate=textStyleModel.getShallow("rotate");labelRotate!=null&&(labelRotate*=Math.PI/180);textStyle.textRotation=labelRotate;textStyle.textDistance=retrieve2(textStyleModel.getShallow("distance"),isEmphasis?null:5)}var ecModel=textStyleModel.ecModel;var globalTextStyle=ecModel&&ecModel.option.textStyle;var richItemNames=getRichItemNames(textStyleModel);var richResult;if(richItemNames){richResult={};for(var name in richItemNames){if(richItemNames.hasOwnProperty(name)){var richTextStyle=textStyleModel.getModel(["rich",name]);setTokenTextStyle(richResult[name]={},richTextStyle,globalTextStyle,opt,isEmphasis)}}}textStyle.rich=richResult;setTokenTextStyle(textStyle,textStyleModel,globalTextStyle,opt,isEmphasis,true);if(opt.forceRich&&!opt.textStyle){opt.textStyle={}}return textStyle}function getRichItemNames(textStyleModel){var richItemNameMap;while(textStyleModel&&textStyleModel!==textStyleModel.ecModel){var rich=(textStyleModel.option||EMPTY_OBJ).rich;if(rich){richItemNameMap=richItemNameMap||{};for(var name in rich){if(rich.hasOwnProperty(name)){richItemNameMap[name]=1}}}textStyleModel=textStyleModel.parentModel}return richItemNameMap}function setTokenTextStyle(textStyle,textStyleModel,globalTextStyle,opt,isEmphasis,isBlock){globalTextStyle=!isEmphasis&&globalTextStyle||EMPTY_OBJ;textStyle.textFill=getAutoColor(textStyleModel.getShallow("color"),opt)||globalTextStyle.color;textStyle.textStroke=getAutoColor(textStyleModel.getShallow("textBorderColor"),opt)||globalTextStyle.textBorderColor;textStyle.textStrokeWidth=retrieve2(textStyleModel.getShallow("textBorderWidth"),globalTextStyle.textBorderWidth);textStyle.insideRawTextPosition=textStyle.textPosition;if(!isEmphasis){if(isBlock){textStyle.insideRollbackOpt=opt;applyDefaultTextStyle(textStyle)}if(textStyle.textFill==null){textStyle.textFill=opt.autoColor}}textStyle.fontStyle=textStyleModel.getShallow("fontStyle")||globalTextStyle.fontStyle;
textStyle.fontWeight=textStyleModel.getShallow("fontWeight")||globalTextStyle.fontWeight;textStyle.fontSize=textStyleModel.getShallow("fontSize")||globalTextStyle.fontSize;textStyle.fontFamily=textStyleModel.getShallow("fontFamily")||globalTextStyle.fontFamily;textStyle.textAlign=textStyleModel.getShallow("align");textStyle.textVerticalAlign=textStyleModel.getShallow("verticalAlign")||textStyleModel.getShallow("baseline");textStyle.textLineHeight=textStyleModel.getShallow("lineHeight");textStyle.textWidth=textStyleModel.getShallow("width");textStyle.textHeight=textStyleModel.getShallow("height");textStyle.textTag=textStyleModel.getShallow("tag");if(!isBlock||!opt.disableBox){textStyle.textBackgroundColor=getAutoColor(textStyleModel.getShallow("backgroundColor"),opt);textStyle.textPadding=textStyleModel.getShallow("padding");textStyle.textBorderColor=getAutoColor(textStyleModel.getShallow("borderColor"),opt);textStyle.textBorderWidth=textStyleModel.getShallow("borderWidth");textStyle.textBorderRadius=textStyleModel.getShallow("borderRadius");textStyle.textBoxShadowColor=textStyleModel.getShallow("shadowColor");textStyle.textBoxShadowBlur=textStyleModel.getShallow("shadowBlur");textStyle.textBoxShadowOffsetX=textStyleModel.getShallow("shadowOffsetX");textStyle.textBoxShadowOffsetY=textStyleModel.getShallow("shadowOffsetY")}textStyle.textShadowColor=textStyleModel.getShallow("textShadowColor")||globalTextStyle.textShadowColor;textStyle.textShadowBlur=textStyleModel.getShallow("textShadowBlur")||globalTextStyle.textShadowBlur;textStyle.textShadowOffsetX=textStyleModel.getShallow("textShadowOffsetX")||globalTextStyle.textShadowOffsetX;textStyle.textShadowOffsetY=textStyleModel.getShallow("textShadowOffsetY")||globalTextStyle.textShadowOffsetY}function getAutoColor(color,opt){return color!=="auto"?color:(opt&&opt.autoColor)?opt.autoColor:null}function applyDefaultTextStyle(textStyle){var opt=textStyle.insideRollbackOpt;if(!opt||textStyle.textFill!=null){return}var useInsideStyle=opt.useInsideStyle;
var textPosition=textStyle.insideRawTextPosition;var insideRollback;var autoColor=opt.autoColor;if(useInsideStyle!==false&&(useInsideStyle===true||(opt.isRectText&&textPosition&&typeof textPosition==="string"&&textPosition.indexOf("inside")>=0))){insideRollback={textFill:null,textStroke:textStyle.textStroke,textStrokeWidth:textStyle.textStrokeWidth};textStyle.textFill="#fff";if(textStyle.textStroke==null){textStyle.textStroke=autoColor;textStyle.textStrokeWidth==null&&(textStyle.textStrokeWidth=2)}}else{if(autoColor!=null){insideRollback={textFill:null};textStyle.textFill=autoColor}}if(insideRollback){textStyle.insideRollback=insideRollback}}function rollbackDefaultTextStyle(style){var insideRollback=style.insideRollback;if(insideRollback){style.textFill=insideRollback.textFill;style.textStroke=insideRollback.textStroke;style.textStrokeWidth=insideRollback.textStrokeWidth;style.insideRollback=null}}function getFont(opt,ecModel){var gTextStyleModel=ecModel||ecModel.getModel("textStyle");return trim([opt.fontStyle||gTextStyleModel&&gTextStyleModel.getShallow("fontStyle")||"",opt.fontWeight||gTextStyleModel&&gTextStyleModel.getShallow("fontWeight")||"",(opt.fontSize||gTextStyleModel&&gTextStyleModel.getShallow("fontSize")||12)+"px",opt.fontFamily||gTextStyleModel&&gTextStyleModel.getShallow("fontFamily")||"sans-serif"].join(" "))}function animateOrSetProps(isUpdate,el,props,animatableModel,dataIndex,cb){if(typeof dataIndex==="function"){cb=dataIndex;dataIndex=null}var animationEnabled=animatableModel&&animatableModel.isAnimationEnabled();if(animationEnabled){var postfix=isUpdate?"Update":"";var duration=animatableModel.getShallow("animationDuration"+postfix);var animationEasing=animatableModel.getShallow("animationEasing"+postfix);var animationDelay=animatableModel.getShallow("animationDelay"+postfix);if(typeof animationDelay==="function"){animationDelay=animationDelay(dataIndex,animatableModel.getAnimationDelayParams?animatableModel.getAnimationDelayParams(el,dataIndex):null)
}if(typeof duration==="function"){duration=duration(dataIndex)}duration>0?el.animateTo(props,duration,animationDelay||0,animationEasing,cb,!!cb):(el.stopAnimation(),el.attr(props),cb&&cb())}else{el.stopAnimation();el.attr(props);cb&&cb()}}function updateProps(el,props,animatableModel,dataIndex,cb){animateOrSetProps(true,el,props,animatableModel,dataIndex,cb)}function initProps(el,props,animatableModel,dataIndex,cb){animateOrSetProps(false,el,props,animatableModel,dataIndex,cb)}function getTransform(target,ancestor){var mat=identity([]);while(target&&target!==ancestor){mul$1(mat,target.getLocalTransform(),mat);target=target.parent}return mat}function applyTransform$1(target,transform,invert$$1){if(transform&&!isArrayLike(transform)){transform=Transformable.getLocalTransform(transform)}if(invert$$1){transform=invert([],transform)}return applyTransform([],target,transform)}function transformDirection(direction,transform,invert$$1){var hBase=(transform[4]===0||transform[5]===0||transform[0]===0)?1:Math.abs(2*transform[4]/transform[0]);var vBase=(transform[4]===0||transform[5]===0||transform[2]===0)?1:Math.abs(2*transform[4]/transform[2]);var vertex=[direction==="left"?-hBase:direction==="right"?hBase:0,direction==="top"?-vBase:direction==="bottom"?vBase:0];vertex=applyTransform$1(vertex,transform,invert$$1);return Math.abs(vertex[0])>Math.abs(vertex[1])?(vertex[0]>0?"right":"left"):(vertex[1]>0?"bottom":"top")}function groupTransition(g1,g2,animatableModel,cb){if(!g1||!g2){return}function getElMap(g){var elMap={};g.traverse(function(el){if(!el.isGroup&&el.anid){elMap[el.anid]=el}});return elMap}function getAnimatableProps(el){var obj={position:clone$1(el.position),rotation:el.rotation};if(el.shape){obj.shape=extend({},el.shape)}return obj}var elMap1=getElMap(g1);g2.traverse(function(el){if(!el.isGroup&&el.anid){var oldEl=elMap1[el.anid];if(oldEl){var newProp=getAnimatableProps(el);el.attr(getAnimatableProps(oldEl));updateProps(el,newProp,animatableModel,el.dataIndex)}}})
}function clipPointsByRect(points,rect){return map(points,function(point){var x=point[0];x=mathMax$1(x,rect.x);x=mathMin$1(x,rect.x+rect.width);var y=point[1];y=mathMax$1(y,rect.y);y=mathMin$1(y,rect.y+rect.height);return[x,y]})}function clipRectByRect(targetRect,rect){var x=mathMax$1(targetRect.x,rect.x);var x2=mathMin$1(targetRect.x+targetRect.width,rect.x+rect.width);var y=mathMax$1(targetRect.y,rect.y);var y2=mathMin$1(targetRect.y+targetRect.height,rect.y+rect.height);if(x2>=x&&y2>=y){return{x:x,y:y,width:x2-x,height:y2-y}}}function createIcon(iconStr,opt,rect){opt=extend({rectHover:true},opt);var style=opt.style={strokeNoScale:true};rect=rect||{x:-1,y:-1,width:2,height:2};if(iconStr){return iconStr.indexOf("image://")===0?(style.image=iconStr.slice(8),defaults(style,rect),new ZImage(opt)):(makePath(iconStr.replace("path://",""),opt,rect,"center"))}}var graphic=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:Z2_EMPHASIS_LIFT,extendShape:extendShape,extendPath:extendPath,makePath:makePath,makeImage:makeImage,mergePath:mergePath,resizePath:resizePath,subPixelOptimizeLine:subPixelOptimizeLine,subPixelOptimizeRect:subPixelOptimizeRect,subPixelOptimize:subPixelOptimize,setElementHoverStyle:setElementHoverStyle,isInEmphasis:isInEmphasis,setHoverStyle:setHoverStyle,setAsHoverStyleTrigger:setAsHoverStyleTrigger,setLabelStyle:setLabelStyle,setTextStyle:setTextStyle,setText:setText,getFont:getFont,updateProps:updateProps,initProps:initProps,getTransform:getTransform,applyTransform:applyTransform$1,transformDirection:transformDirection,groupTransition:groupTransition,clipPointsByRect:clipPointsByRect,clipRectByRect:clipRectByRect,createIcon:createIcon,Group:Group,Image:ZImage,Text:Text,Circle:Circle,Sector:Sector,Ring:Ring,Polygon:Polygon,Polyline:Polyline,Rect:Rect,Line:Line,BezierCurve:BezierCurve,Arc:Arc,IncrementalDisplayable:IncrementalDisplayble,CompoundPath:CompoundPath,LinearGradient:LinearGradient,RadialGradient:RadialGradient,BoundingRect:BoundingRect});var PATH_COLOR=["textStyle","color"];
var textStyleMixin={getTextColor:function(isEmphasis){var ecModel=this.ecModel;return this.getShallow("color")||((!isEmphasis&&ecModel)?ecModel.get(PATH_COLOR):null)},getFont:function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(text){return getBoundingRect(text,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("rich"),this.getShallow("truncateText"))}};var getItemStyle=makeStyleMapper([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]);var itemStyleMixin={getItemStyle:function(excludes,includes){var style=getItemStyle(this,excludes,includes);var lineDash=this.getBorderLineDash();lineDash&&(style.lineDash=lineDash);return style},getBorderLineDash:function(){var lineType=this.get("borderType");return(lineType==="solid"||lineType==null)?null:(lineType==="dashed"?[5,5]:[1,1])}};var mixin$1=mixin;var inner=makeInner();function Model(option,parentModel,ecModel){this.parentModel=parentModel;this.ecModel=ecModel;this.option=option}Model.prototype={constructor:Model,init:null,mergeOption:function(option){merge(this.option,option,true)},get:function(path,ignoreParent){if(path==null){return this.option}return doGet(this.option,this.parsePath(path),!ignoreParent&&getParent(this,path))},getShallow:function(key,ignoreParent){var option=this.option;var val=option==null?option:option[key];var parentModel=!ignoreParent&&getParent(this,key);if(val==null&&parentModel){val=parentModel.getShallow(key)}return val},getModel:function(path,parentModel){var obj=path==null?this.option:doGet(this.option,path=this.parsePath(path));var thisParentModel;parentModel=parentModel||((thisParentModel=getParent(this,path))&&thisParentModel.getModel(path));
return new Model(obj,parentModel,this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){var Ctor=this.constructor;return new Ctor(clone(this.option))},setReadOnly:function(properties){},parsePath:function(path){if(typeof path==="string"){path=path.split(".")}return path},customizeGetParent:function(getParentMethod){inner(this).getParent=getParentMethod},isAnimationEnabled:function(){if(!env$1.node){if(this.option.animation!=null){return !!this.option.animation}else{if(this.parentModel){return this.parentModel.isAnimationEnabled()}}}}};function doGet(obj,pathArr,parentModel){for(var i=0;i<pathArr.length;i++){if(!pathArr[i]){continue}obj=(obj&&typeof obj==="object")?obj[pathArr[i]]:null;if(obj==null){break}}if(obj==null&&parentModel){obj=parentModel.get(pathArr)}return obj}function getParent(model,path){var getParentMethod=inner(model).getParent;return getParentMethod?getParentMethod.call(model,path):model.parentModel}enableClassExtend(Model);enableClassCheck(Model);mixin$1(Model,lineStyleMixin);mixin$1(Model,areaStyleMixin);mixin$1(Model,textStyleMixin);mixin$1(Model,itemStyleMixin);var base=0;function getUID(type){return[(type||""),base++,Math.random().toFixed(5)].join("_")}function enableSubTypeDefaulter(entity){var subTypeDefaulters={};entity.registerSubTypeDefaulter=function(componentType,defaulter){componentType=parseClassType$1(componentType);subTypeDefaulters[componentType.main]=defaulter};entity.determineSubType=function(componentType,option){var type=option.type;if(!type){var componentTypeMain=parseClassType$1(componentType).main;if(entity.hasSubTypes(componentType)&&subTypeDefaulters[componentTypeMain]){type=subTypeDefaulters[componentTypeMain](option)}}return type};return entity}function enableTopologicalTravel(entity,dependencyGetter){entity.topologicalTravel=function(targetNameList,fullNameList,callback,context){if(!targetNameList.length){return}var result=makeDepndencyGraph(fullNameList);var graph=result.graph;
var stack=result.noEntryList;var targetNameSet={};each$1(targetNameList,function(name){targetNameSet[name]=true});while(stack.length){var currComponentType=stack.pop();var currVertex=graph[currComponentType];var isInTargetNameSet=!!targetNameSet[currComponentType];if(isInTargetNameSet){callback.call(context,currComponentType,currVertex.originalDeps.slice());delete targetNameSet[currComponentType]}each$1(currVertex.successor,isInTargetNameSet?removeEdgeAndAdd:removeEdge)}each$1(targetNameSet,function(){throw new Error("Circle dependency may exists")});function removeEdge(succComponentType){graph[succComponentType].entryCount--;if(graph[succComponentType].entryCount===0){stack.push(succComponentType)}}function removeEdgeAndAdd(succComponentType){targetNameSet[succComponentType]=true;removeEdge(succComponentType)}};function makeDepndencyGraph(fullNameList){var graph={};var noEntryList=[];each$1(fullNameList,function(name){var thisItem=createDependencyGraphItem(graph,name);var originalDeps=thisItem.originalDeps=dependencyGetter(name);var availableDeps=getAvailableDependencies(originalDeps,fullNameList);thisItem.entryCount=availableDeps.length;if(thisItem.entryCount===0){noEntryList.push(name)}each$1(availableDeps,function(dependentName){if(indexOf(thisItem.predecessor,dependentName)<0){thisItem.predecessor.push(dependentName)}var thatItem=createDependencyGraphItem(graph,dependentName);if(indexOf(thatItem.successor,dependentName)<0){thatItem.successor.push(name)}})});return{graph:graph,noEntryList:noEntryList}}function createDependencyGraphItem(graph,name){if(!graph[name]){graph[name]={predecessor:[],successor:[]}}return graph[name]}function getAvailableDependencies(originalDeps,fullNameList){var availableDeps=[];each$1(originalDeps,function(dep){indexOf(fullNameList,dep)>=0&&availableDeps.push(dep)});return availableDeps}}var RADIAN_EPSILON=0.0001;function _trim(str){return str.replace(/^\s+/,"").replace(/\s+$/,"")}function linearMap(val,domain,range,clamp){var subDomain=domain[1]-domain[0];
var subRange=range[1]-range[0];if(subDomain===0){return subRange===0?range[0]:(range[0]+range[1])/2}if(clamp){if(subDomain>0){if(val<=domain[0]){return range[0]}else{if(val>=domain[1]){return range[1]}}}else{if(val>=domain[0]){return range[0]}else{if(val<=domain[1]){return range[1]}}}}else{if(val===domain[0]){return range[0]}if(val===domain[1]){return range[1]}}return(val-domain[0])/subDomain*subRange+range[0]}function parsePercent$1(percent,all){switch(percent){case"center":case"middle":percent="50%";break;case"left":case"top":percent="0%";break;case"right":case"bottom":percent="100%";break}if(typeof percent==="string"){if(_trim(percent).match(/%$/)){return parseFloat(percent)/100*all}return parseFloat(percent)}return percent==null?NaN:+percent}function round$2(x,precision,returnStr){if(precision==null){precision=10}precision=Math.min(Math.max(0,precision),20);x=(+x).toFixed(precision);return returnStr?x:+x}function asc(arr){arr.sort(function(a,b){return a-b});return arr}function getPrecision(val){val=+val;if(isNaN(val)){return 0}var e=1;var count=0;while(Math.round(val*e)/e!==val){e*=10;count++}return count}function getPrecisionSafe(val){var str=val.toString();var eIndex=str.indexOf("e");if(eIndex>0){var precision=+str.slice(eIndex+1);return precision<0?-precision:0}else{var dotIndex=str.indexOf(".");return dotIndex<0?0:str.length-1-dotIndex}}function getPixelPrecision(dataExtent,pixelExtent){var log=Math.log;var LN10=Math.LN10;var dataQuantity=Math.floor(log(dataExtent[1]-dataExtent[0])/LN10);var sizeQuantity=Math.round(log(Math.abs(pixelExtent[1]-pixelExtent[0]))/LN10);var precision=Math.min(Math.max(-dataQuantity+sizeQuantity,0),20);return !isFinite(precision)?20:precision}function getPercentWithPrecision(valueList,idx,precision){if(!valueList[idx]){return 0}var sum=reduce(valueList,function(acc,val){return acc+(isNaN(val)?0:val)},0);if(sum===0){return 0}var digits=Math.pow(10,precision);var votesPerQuota=map(valueList,function(val){return(isNaN(val)?0:val)/sum*digits*100
});var targetSeats=digits*100;var seats=map(votesPerQuota,function(votes){return Math.floor(votes)});var currentSum=reduce(seats,function(acc,val){return acc+val},0);var remainder=map(votesPerQuota,function(votes,idx){return votes-seats[idx]});while(currentSum<targetSeats){var max=Number.NEGATIVE_INFINITY;var maxId=null;for(var i=0,len=remainder.length;i<len;++i){if(remainder[i]>max){max=remainder[i];maxId=i}}++seats[maxId];remainder[maxId]=0;++currentSum}return seats[idx]/digits}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(radian){var pi2=Math.PI*2;return(radian%pi2+pi2)%pi2}function isRadianAroundZero(val){return val>-RADIAN_EPSILON&&val<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(value){if(value instanceof Date){return value}else{if(typeof value==="string"){var match=TIME_REG.exec(value);if(!match){return new Date(NaN)}if(!match[8]){return new Date(+match[1],+(match[2]||1)-1,+match[3]||1,+match[4]||0,+(match[5]||0),+match[6]||0,+match[7]||0)}else{var hour=+match[4]||0;if(match[8].toUpperCase()!=="Z"){hour-=match[8].slice(0,3)}return new Date(Date.UTC(+match[1],+(match[2]||1)-1,+match[3]||1,hour,+(match[5]||0),+match[6]||0,+match[7]||0))}}else{if(value==null){return new Date(NaN)}}}return new Date(Math.round(value))}function quantity(val){return Math.pow(10,quantityExponent(val))}function quantityExponent(val){return Math.floor(Math.log(val)/Math.LN10)}function nice(val,round){var exponent=quantityExponent(val);var exp10=Math.pow(10,exponent);var f=val/exp10;var nf;if(round){if(f<1.5){nf=1}else{if(f<2.5){nf=2}else{if(f<4){nf=3}else{if(f<7){nf=5}else{nf=10}}}}}else{if(f<1){nf=1}else{if(f<2){nf=2}else{if(f<3){nf=3}else{if(f<5){nf=5}else{nf=10}}}}}val=nf*exp10;return exponent>=-20?+val.toFixed(exponent<0?-exponent:0):val}function quantile(ascArr,p){var H=(ascArr.length-1)*p+1;var h=Math.floor(H);var v=+ascArr[h-1];var e=H-h;
return e?v+e*(ascArr[h]-v):v}function reformIntervals(list){list.sort(function(a,b){return littleThan(a,b,0)?-1:1});var curr=-Infinity;var currClose=1;for(var i=0;i<list.length;){var interval=list[i].interval;var close=list[i].close;for(var lg=0;lg<2;lg++){if(interval[lg]<=curr){interval[lg]=curr;close[lg]=!lg?1-currClose:1}curr=interval[lg];currClose=close[lg]}if(interval[0]===interval[1]&&close[0]*close[1]!==1){list.splice(i,1)}else{i++}}return list;function littleThan(a,b,lg){return a.interval[lg]<b.interval[lg]||(a.interval[lg]===b.interval[lg]&&((a.close[lg]-b.close[lg]===(!lg?1:-1))||(!lg&&littleThan(a,b,1))))}}function isNumeric(v){return v-parseFloat(v)>=0}var number=(Object.freeze||Object)({linearMap:linearMap,parsePercent:parsePercent$1,round:round$2,asc:asc,getPrecision:getPrecision,getPrecisionSafe:getPrecisionSafe,getPixelPrecision:getPixelPrecision,getPercentWithPrecision:getPercentWithPrecision,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,remRadian:remRadian,isRadianAroundZero:isRadianAroundZero,parseDate:parseDate,quantity:quantity,nice:nice,quantile:quantile,reformIntervals:reformIntervals,isNumeric:isNumeric});function addCommas(x){if(isNaN(x)){return"-"}x=(x+"").split(".");return x[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(x.length>1?("."+x[1]):"")}function toCamelCase(str,upperCaseFirst){str=(str||"").toLowerCase().replace(/-(.)/g,function(match,group1){return group1.toUpperCase()});if(upperCaseFirst&&str){str=str.charAt(0).toUpperCase()+str.slice(1)}return str}var normalizeCssArray$1=normalizeCssArray;var replaceReg=/([&<>"'])/g;var replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(source){return source==null?"":(source+"").replace(replaceReg,function(str,c){return replaceMap[c]})}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"];var wrapVar=function(varName,seriesIdx){return"{"+varName+(seriesIdx==null?"":seriesIdx)+"}"};function formatTpl(tpl,paramsList,encode){if(!isArray(paramsList)){paramsList=[paramsList]
}var seriesLen=paramsList.length;if(!seriesLen){return""}var $vars=paramsList[0].$vars||[];for(var i=0;i<$vars.length;i++){var alias=TPL_VAR_ALIAS[i];tpl=tpl.replace(wrapVar(alias),wrapVar(alias,0))}for(var seriesIdx=0;seriesIdx<seriesLen;seriesIdx++){for(var k=0;k<$vars.length;k++){var val=paramsList[seriesIdx][$vars[k]];tpl=tpl.replace(wrapVar(TPL_VAR_ALIAS[k],seriesIdx),encode?encodeHTML(val):val)}}return tpl}function formatTplSimple(tpl,param,encode){each$1(param,function(value,key){tpl=tpl.replace("{"+key+"}",encode?encodeHTML(value):value)});return tpl}function getTooltipMarker(opt,extraCssText){opt=isString(opt)?{color:opt,extraCssText:extraCssText}:(opt||{});var color=opt.color;var type=opt.type;var extraCssText=opt.extraCssText;var renderMode=opt.renderMode||"html";var markerId=opt.markerId||"X";if(!color){return""}if(renderMode==="html"){return type==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;'+"border-radius:4px;width:4px;height:4px;background-color:"+encodeHTML(color)+";"+(extraCssText||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;'+"border-radius:10px;width:10px;height:10px;background-color:"+encodeHTML(color)+";"+(extraCssText||"")+'"></span>'}else{return{renderMode:renderMode,content:"{marker"+markerId+"|}  ",style:{color:color}}}}function pad(str,len){str+="";return"0000".substr(0,len-str.length)+str}function formatTime(tpl,value,isUTC){if(tpl==="week"||tpl==="month"||tpl==="quarter"||tpl==="half-year"||tpl==="year"){tpl="MM-dd\nyyyy"}var date=parseDate(value);var utc=isUTC?"UTC":"";var y=date["get"+utc+"FullYear"]();var M=date["get"+utc+"Month"]()+1;var d=date["get"+utc+"Date"]();var h=date["get"+utc+"Hours"]();var m=date["get"+utc+"Minutes"]();var s=date["get"+utc+"Seconds"]();var S=date["get"+utc+"Milliseconds"]();tpl=tpl.replace("MM",pad(M,2)).replace("M",M).replace("yyyy",y).replace("yy",y%100).replace("dd",pad(d,2)).replace("d",d).replace("hh",pad(h,2)).replace("h",h).replace("mm",pad(m,2)).replace("m",m).replace("ss",pad(s,2)).replace("s",s).replace("SSS",pad(S,3));
return tpl}function capitalFirst(str){return str?str.charAt(0).toUpperCase()+str.substr(1):str}var truncateText$1=truncateText;var getTextRect=getBoundingRect;var format=(Object.freeze||Object)({addCommas:addCommas,toCamelCase:toCamelCase,normalizeCssArray:normalizeCssArray$1,encodeHTML:encodeHTML,formatTpl:formatTpl,formatTplSimple:formatTplSimple,getTooltipMarker:getTooltipMarker,formatTime:formatTime,capitalFirst:capitalFirst,truncateText:truncateText$1,getTextRect:getTextRect});var each$3=each$1;var LOCATION_PARAMS=["left","right","top","bottom","width","height"];var HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(orient,group,gap,maxWidth,maxHeight){var x=0;var y=0;if(maxWidth==null){maxWidth=Infinity}if(maxHeight==null){maxHeight=Infinity}var currentLineMaxSize=0;group.eachChild(function(child,idx){var position=child.position;var rect=child.getBoundingRect();var nextChild=group.childAt(idx+1);var nextChildRect=nextChild&&nextChild.getBoundingRect();var nextX;var nextY;if(orient==="horizontal"){var moveX=rect.width+(nextChildRect?(-nextChildRect.x+rect.x):0);nextX=x+moveX;if(nextX>maxWidth||child.newline){x=0;nextX=moveX;y+=currentLineMaxSize+gap;currentLineMaxSize=rect.height}else{currentLineMaxSize=Math.max(currentLineMaxSize,rect.height)}}else{var moveY=rect.height+(nextChildRect?(-nextChildRect.y+rect.y):0);nextY=y+moveY;if(nextY>maxHeight||child.newline){x+=currentLineMaxSize+gap;y=0;nextY=moveY;currentLineMaxSize=rect.width}else{currentLineMaxSize=Math.max(currentLineMaxSize,rect.width)}}if(child.newline){return}position[0]=x;position[1]=y;orient==="horizontal"?(x=nextX+gap):(y=nextY+gap)})}var box=boxLayout;var vbox=curry(boxLayout,"vertical");var hbox=curry(boxLayout,"horizontal");function getAvailableSize(positionInfo,containerRect,margin){var containerWidth=containerRect.width;var containerHeight=containerRect.height;var x=parsePercent$1(positionInfo.x,containerWidth);var y=parsePercent$1(positionInfo.y,containerHeight);
var x2=parsePercent$1(positionInfo.x2,containerWidth);var y2=parsePercent$1(positionInfo.y2,containerHeight);(isNaN(x)||isNaN(parseFloat(positionInfo.x)))&&(x=0);(isNaN(x2)||isNaN(parseFloat(positionInfo.x2)))&&(x2=containerWidth);(isNaN(y)||isNaN(parseFloat(positionInfo.y)))&&(y=0);(isNaN(y2)||isNaN(parseFloat(positionInfo.y2)))&&(y2=containerHeight);margin=normalizeCssArray$1(margin||0);return{width:Math.max(x2-x-margin[1]-margin[3],0),height:Math.max(y2-y-margin[0]-margin[2],0)}}function getLayoutRect(positionInfo,containerRect,margin){margin=normalizeCssArray$1(margin||0);var containerWidth=containerRect.width;var containerHeight=containerRect.height;var left=parsePercent$1(positionInfo.left,containerWidth);var top=parsePercent$1(positionInfo.top,containerHeight);var right=parsePercent$1(positionInfo.right,containerWidth);var bottom=parsePercent$1(positionInfo.bottom,containerHeight);var width=parsePercent$1(positionInfo.width,containerWidth);var height=parsePercent$1(positionInfo.height,containerHeight);var verticalMargin=margin[2]+margin[0];var horizontalMargin=margin[1]+margin[3];var aspect=positionInfo.aspect;if(isNaN(width)){width=containerWidth-right-horizontalMargin-left}if(isNaN(height)){height=containerHeight-bottom-verticalMargin-top}if(aspect!=null){if(isNaN(width)&&isNaN(height)){if(aspect>containerWidth/containerHeight){width=containerWidth*0.8}else{height=containerHeight*0.8}}if(isNaN(width)){width=aspect*height}if(isNaN(height)){height=width/aspect}}if(isNaN(left)){left=containerWidth-right-width-horizontalMargin}if(isNaN(top)){top=containerHeight-bottom-height-verticalMargin}switch(positionInfo.left||positionInfo.right){case"center":left=containerWidth/2-width/2-margin[3];break;case"right":left=containerWidth-width-horizontalMargin;break}switch(positionInfo.top||positionInfo.bottom){case"middle":case"center":top=containerHeight/2-height/2-margin[0];break;case"bottom":top=containerHeight-height-verticalMargin;break}left=left||0;top=top||0;if(isNaN(width)){width=containerWidth-horizontalMargin-left-(right||0)
}if(isNaN(height)){height=containerHeight-verticalMargin-top-(bottom||0)}var rect=new BoundingRect(left+margin[3],top+margin[0],width,height);rect.margin=margin;return rect}function positionElement(el,positionInfo,containerRect,margin,opt){var h=!opt||!opt.hv||opt.hv[0];var v=!opt||!opt.hv||opt.hv[1];var boundingMode=opt&&opt.boundingMode||"all";if(!h&&!v){return}var rect;if(boundingMode==="raw"){rect=el.type==="group"?new BoundingRect(0,0,+positionInfo.width||0,+positionInfo.height||0):el.getBoundingRect()}else{rect=el.getBoundingRect();if(el.needLocalTransform()){var transform=el.getLocalTransform();rect=rect.clone();rect.applyTransform(transform)}}positionInfo=getLayoutRect(defaults({width:rect.width,height:rect.height},positionInfo),containerRect,margin);var elPos=el.position;var dx=h?positionInfo.x-rect.x:0;var dy=v?positionInfo.y-rect.y:0;el.attr("position",boundingMode==="raw"?[dx,dy]:[elPos[0]+dx,elPos[1]+dy])}function sizeCalculable(option,hvIdx){return option[HV_NAMES[hvIdx][0]]!=null||(option[HV_NAMES[hvIdx][1]]!=null&&option[HV_NAMES[hvIdx][2]]!=null)}function mergeLayoutParam(targetOption,newOption,opt){!isObject$1(opt)&&(opt={});var ignoreSize=opt.ignoreSize;!isArray(ignoreSize)&&(ignoreSize=[ignoreSize,ignoreSize]);var hResult=merge$$1(HV_NAMES[0],0);var vResult=merge$$1(HV_NAMES[1],1);copy(HV_NAMES[0],targetOption,hResult);copy(HV_NAMES[1],targetOption,vResult);function merge$$1(names,hvIdx){var newParams={};var newValueCount=0;var merged={};var mergedValueCount=0;var enoughParamNumber=2;each$3(names,function(name){merged[name]=targetOption[name]});each$3(names,function(name){hasProp(newOption,name)&&(newParams[name]=merged[name]=newOption[name]);hasValue(newParams,name)&&newValueCount++;hasValue(merged,name)&&mergedValueCount++});if(ignoreSize[hvIdx]){if(hasValue(newOption,names[1])){merged[names[2]]=null}else{if(hasValue(newOption,names[2])){merged[names[1]]=null}}return merged}if(mergedValueCount===enoughParamNumber||!newValueCount){return merged}else{if(newValueCount>=enoughParamNumber){return newParams
}else{for(var i=0;i<names.length;i++){var name=names[i];if(!hasProp(newParams,name)&&hasProp(targetOption,name)){newParams[name]=targetOption[name];break}}return newParams}}}function hasProp(obj,name){return obj.hasOwnProperty(name)}function hasValue(obj,name){return obj[name]!=null&&obj[name]!=="auto"}function copy(names,target,source){each$3(names,function(name){target[name]=source[name]})}}function getLayoutParams(source){return copyLayoutParams({},source)}function copyLayoutParams(target,source){source&&target&&each$3(LOCATION_PARAMS,function(name){source.hasOwnProperty(name)&&(target[name]=source[name])});return target}var boxLayoutMixin={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}};var inner$1=makeInner();var ComponentModel=Model.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(option,parentModel,ecModel,extraOpt){Model.call(this,option,parentModel,ecModel,extraOpt);this.uid=getUID("ec_cpt_model")},init:function(option,parentModel,ecModel,extraOpt){this.mergeDefaultAndTheme(option,ecModel)},mergeDefaultAndTheme:function(option,ecModel){var layoutMode=this.layoutMode;var inputPositionParams=layoutMode?getLayoutParams(option):{};var themeModel=ecModel.getTheme();merge(option,themeModel.get(this.mainType));merge(option,this.getDefaultOption());if(layoutMode){mergeLayoutParam(option,inputPositionParams,layoutMode)}},mergeOption:function(option,extraOpt){merge(this.option,option,true);var layoutMode=this.layoutMode;if(layoutMode){mergeLayoutParam(this.option,option,layoutMode)}},optionUpdated:function(newCptOption,isInit){},getDefaultOption:function(){var fields=inner$1(this);if(!fields.defaultOption){var optList=[];var Class=this.constructor;while(Class){var opt=Class.prototype.defaultOption;opt&&optList.push(opt);
Class=Class.superClass}var defaultOption={};for(var i=optList.length-1;i>=0;i--){defaultOption=merge(defaultOption,optList[i],true)}fields.defaultOption=defaultOption}return fields.defaultOption},getReferringComponents:function(mainType){return this.ecModel.queryComponents({mainType:mainType,index:this.get(mainType+"Index",true),id:this.get(mainType+"Id",true)})}});enableClassManagement(ComponentModel,{registerWhenExtend:true});enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(componentType){var deps=[];each$1(ComponentModel.getClassesByMainType(componentType),function(Clazz){deps=deps.concat(Clazz.prototype.dependencies||[])});deps=map(deps,function(type){return parseClassType$1(type).main});if(componentType!=="dataset"&&indexOf(deps,"dataset")<=0){deps.unshift("dataset")}return deps}mixin(ComponentModel,boxLayoutMixin);var platform="";if(typeof navigator!=="undefined"){platform=navigator.platform||""}var globalDefault={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1000,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2000,progressiveThreshold:3000,progressive:400,hoverLayerThreshold:3000,useUTC:false};var inner$2=makeInner();function getNearestColorPalette(colors,requestColorNum){var paletteNum=colors.length;for(var i=0;i<paletteNum;i++){if(colors[i].length>requestColorNum){return colors[i]}}return colors[paletteNum-1]}var colorPaletteMixin={clearColorPalette:function(){inner$2(this).colorIdx=0;inner$2(this).colorNameMap={}},getColorFromPalette:function(name,scope,requestColorNum){scope=scope||this;var scopeFields=inner$2(scope);var colorIdx=scopeFields.colorIdx||0;
var colorNameMap=scopeFields.colorNameMap=scopeFields.colorNameMap||{};if(colorNameMap.hasOwnProperty(name)){return colorNameMap[name]}var defaultColorPalette=normalizeToArray(this.get("color",true));var layeredColorPalette=this.get("colorLayer",true);var colorPalette=((requestColorNum==null||!layeredColorPalette)?defaultColorPalette:getNearestColorPalette(layeredColorPalette,requestColorNum));colorPalette=colorPalette||defaultColorPalette;if(!colorPalette||!colorPalette.length){return}var color=colorPalette[colorIdx];if(name){colorNameMap[name]=color}scopeFields.colorIdx=(colorIdx+1)%colorPalette.length;return color}};function getCoordSysDefineBySeries(seriesModel){var coordSysName=seriesModel.get("coordinateSystem");var result={coordSysName:coordSysName,coordSysDims:[],axisMap:createHashMap(),categoryAxisMap:createHashMap()};var fetch=fetchers[coordSysName];if(fetch){fetch(seriesModel,result,result.axisMap,result.categoryAxisMap);return result}}var fetchers={cartesian2d:function(seriesModel,result,axisMap,categoryAxisMap){var xAxisModel=seriesModel.getReferringComponents("xAxis")[0];var yAxisModel=seriesModel.getReferringComponents("yAxis")[0];if(__DEV__){if(!xAxisModel){throw new Error('xAxis "'+retrieve(seriesModel.get("xAxisIndex"),seriesModel.get("xAxisId"),0)+'" not found')}if(!yAxisModel){throw new Error('yAxis "'+retrieve(seriesModel.get("xAxisIndex"),seriesModel.get("yAxisId"),0)+'" not found')}}result.coordSysDims=["x","y"];axisMap.set("x",xAxisModel);axisMap.set("y",yAxisModel);if(isCategory(xAxisModel)){categoryAxisMap.set("x",xAxisModel);result.firstCategoryDimIndex=0}if(isCategory(yAxisModel)){categoryAxisMap.set("y",yAxisModel);result.firstCategoryDimIndex=1}},singleAxis:function(seriesModel,result,axisMap,categoryAxisMap){var singleAxisModel=seriesModel.getReferringComponents("singleAxis")[0];if(__DEV__){if(!singleAxisModel){throw new Error("singleAxis should be specified.")}}result.coordSysDims=["single"];axisMap.set("single",singleAxisModel);if(isCategory(singleAxisModel)){categoryAxisMap.set("single",singleAxisModel);
result.firstCategoryDimIndex=0}},polar:function(seriesModel,result,axisMap,categoryAxisMap){var polarModel=seriesModel.getReferringComponents("polar")[0];var radiusAxisModel=polarModel.findAxisModel("radiusAxis");var angleAxisModel=polarModel.findAxisModel("angleAxis");if(__DEV__){if(!angleAxisModel){throw new Error("angleAxis option not found")}if(!radiusAxisModel){throw new Error("radiusAxis option not found")}}result.coordSysDims=["radius","angle"];axisMap.set("radius",radiusAxisModel);axisMap.set("angle",angleAxisModel);if(isCategory(radiusAxisModel)){categoryAxisMap.set("radius",radiusAxisModel);result.firstCategoryDimIndex=0}if(isCategory(angleAxisModel)){categoryAxisMap.set("angle",angleAxisModel);result.firstCategoryDimIndex=1}},geo:function(seriesModel,result,axisMap,categoryAxisMap){result.coordSysDims=["lng","lat"]},parallel:function(seriesModel,result,axisMap,categoryAxisMap){var ecModel=seriesModel.ecModel;var parallelModel=ecModel.getComponent("parallel",seriesModel.get("parallelIndex"));var coordSysDims=result.coordSysDims=parallelModel.dimensions.slice();each$1(parallelModel.parallelAxisIndex,function(axisIndex,index){var axisModel=ecModel.getComponent("parallelAxis",axisIndex);var axisDim=coordSysDims[index];axisMap.set(axisDim,axisModel);if(isCategory(axisModel)&&result.firstCategoryDimIndex==null){categoryAxisMap.set(axisDim,axisModel);result.firstCategoryDimIndex=index}})}};function isCategory(axisModel){return axisModel.get("type")==="category"}var SOURCE_FORMAT_ORIGINAL="original";var SOURCE_FORMAT_ARRAY_ROWS="arrayRows";var SOURCE_FORMAT_OBJECT_ROWS="objectRows";var SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns";var SOURCE_FORMAT_UNKNOWN="unknown";var SOURCE_FORMAT_TYPED_ARRAY="typedArray";var SERIES_LAYOUT_BY_COLUMN="column";var SERIES_LAYOUT_BY_ROW="row";function Source(fields){this.fromDataset=fields.fromDataset;this.data=fields.data||(fields.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]);this.sourceFormat=fields.sourceFormat||SOURCE_FORMAT_UNKNOWN;
this.seriesLayoutBy=fields.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN;this.dimensionsDefine=fields.dimensionsDefine;this.encodeDefine=fields.encodeDefine&&createHashMap(fields.encodeDefine);this.startIndex=fields.startIndex||0;this.dimensionsDetectCount=fields.dimensionsDetectCount}Source.seriesDataToSource=function(data){return new Source({data:data,sourceFormat:isTypedArray(data)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,fromDataset:false})};enableClassCheck(Source);var inner$3=makeInner();function detectSourceFormat(datasetModel){var data=datasetModel.option.source;var sourceFormat=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(data)){sourceFormat=SOURCE_FORMAT_TYPED_ARRAY}else{if(isArray(data)){if(data.length===0){sourceFormat=SOURCE_FORMAT_ARRAY_ROWS}for(var i=0,len=data.length;i<len;i++){var item=data[i];if(item==null){continue}else{if(isArray(item)){sourceFormat=SOURCE_FORMAT_ARRAY_ROWS;break}else{if(isObject$1(item)){sourceFormat=SOURCE_FORMAT_OBJECT_ROWS;break}}}}}else{if(isObject$1(data)){for(var key in data){if(data.hasOwnProperty(key)&&isArrayLike(data[key])){sourceFormat=SOURCE_FORMAT_KEYED_COLUMNS;break}}}else{if(data!=null){throw new Error("Invalid data")}}}}inner$3(datasetModel).sourceFormat=sourceFormat}function getSource(seriesModel){return inner$3(seriesModel).source}function resetSourceDefaulter(ecModel){inner$3(ecModel).datasetMap=createHashMap()}function prepareSource(seriesModel){var seriesOption=seriesModel.option;var data=seriesOption.data;var sourceFormat=isTypedArray(data)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL;var fromDataset=false;var seriesLayoutBy=seriesOption.seriesLayoutBy;var sourceHeader=seriesOption.sourceHeader;var dimensionsDefine=seriesOption.dimensions;var datasetModel=getDatasetModel(seriesModel);if(datasetModel){var datasetOption=datasetModel.option;data=datasetOption.source;sourceFormat=inner$3(datasetModel).sourceFormat;fromDataset=true;seriesLayoutBy=seriesLayoutBy||datasetOption.seriesLayoutBy;sourceHeader==null&&(sourceHeader=datasetOption.sourceHeader);
dimensionsDefine=dimensionsDefine||datasetOption.dimensions}var completeResult=completeBySourceData(data,sourceFormat,seriesLayoutBy,sourceHeader,dimensionsDefine);var encodeDefine=seriesOption.encode;if(!encodeDefine&&datasetModel){encodeDefine=makeDefaultEncode(seriesModel,datasetModel,data,sourceFormat,seriesLayoutBy,completeResult)}inner$3(seriesModel).source=new Source({data:data,fromDataset:fromDataset,seriesLayoutBy:seriesLayoutBy,sourceFormat:sourceFormat,dimensionsDefine:completeResult.dimensionsDefine,startIndex:completeResult.startIndex,dimensionsDetectCount:completeResult.dimensionsDetectCount,encodeDefine:encodeDefine})}function completeBySourceData(data,sourceFormat,seriesLayoutBy,sourceHeader,dimensionsDefine){if(!data){return{dimensionsDefine:normalizeDimensionsDefine(dimensionsDefine)}}var dimensionsDetectCount;var startIndex;var findPotentialName;if(sourceFormat===SOURCE_FORMAT_ARRAY_ROWS){if(sourceHeader==="auto"||sourceHeader==null){arrayRowsTravelFirst(function(val){if(val!=null&&val!=="-"){if(isString(val)){startIndex==null&&(startIndex=1)}else{startIndex=0}}},seriesLayoutBy,data,10)}else{startIndex=sourceHeader?1:0}if(!dimensionsDefine&&startIndex===1){dimensionsDefine=[];arrayRowsTravelFirst(function(val,index){dimensionsDefine[index]=val!=null?val:""},seriesLayoutBy,data)}dimensionsDetectCount=dimensionsDefine?dimensionsDefine.length:seriesLayoutBy===SERIES_LAYOUT_BY_ROW?data.length:data[0]?data[0].length:null}else{if(sourceFormat===SOURCE_FORMAT_OBJECT_ROWS){if(!dimensionsDefine){dimensionsDefine=objectRowsCollectDimensions(data);findPotentialName=true}}else{if(sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS){if(!dimensionsDefine){dimensionsDefine=[];findPotentialName=true;each$1(data,function(colArr,key){dimensionsDefine.push(key)})}}else{if(sourceFormat===SOURCE_FORMAT_ORIGINAL){var value0=getDataItemValue(data[0]);dimensionsDetectCount=isArray(value0)&&value0.length||1}else{if(sourceFormat===SOURCE_FORMAT_TYPED_ARRAY){if(__DEV__){assert$1(!!dimensionsDefine,"dimensions must be given if data is TypedArray.")
}}}}}}var potentialNameDimIndex;if(findPotentialName){each$1(dimensionsDefine,function(dim,idx){if((isObject$1(dim)?dim.name:dim)==="name"){potentialNameDimIndex=idx}})}return{startIndex:startIndex,dimensionsDefine:normalizeDimensionsDefine(dimensionsDefine),dimensionsDetectCount:dimensionsDetectCount,potentialNameDimIndex:potentialNameDimIndex}}function normalizeDimensionsDefine(dimensionsDefine){if(!dimensionsDefine){return}var nameMap=createHashMap();return map(dimensionsDefine,function(item,index){item=extend({},isObject$1(item)?item:{name:item});if(item.name==null){return item}item.name+="";if(item.displayName==null){item.displayName=item.name}var exist=nameMap.get(item.name);if(!exist){nameMap.set(item.name,{count:1})}else{item.name+="-"+exist.count++}return item})}function arrayRowsTravelFirst(cb,seriesLayoutBy,data,maxLoop){maxLoop==null&&(maxLoop=Infinity);if(seriesLayoutBy===SERIES_LAYOUT_BY_ROW){for(var i=0;i<data.length&&i<maxLoop;i++){cb(data[i]?data[i][0]:null,i)}}else{var value0=data[0]||[];for(var i=0;i<value0.length&&i<maxLoop;i++){cb(value0[i],i)}}}function objectRowsCollectDimensions(data){var firstIndex=0;var obj;while(firstIndex<data.length&&!(obj=data[firstIndex++])){}if(obj){var dimensions=[];each$1(obj,function(value,key){dimensions.push(key)});return dimensions}}function makeDefaultEncode(seriesModel,datasetModel,data,sourceFormat,seriesLayoutBy,completeResult){var coordSysDefine=getCoordSysDefineBySeries(seriesModel);var encode={};var encodeItemName=[];var encodeSeriesName=[];var seriesType=seriesModel.subType;var nSeriesMap=createHashMap(["pie","map","funnel"]);var cSeriesMap=createHashMap(["line","bar","pictorialBar","scatter","effectScatter","candlestick","boxplot"]);if(coordSysDefine&&cSeriesMap.get(seriesType)!=null){var ecModel=seriesModel.ecModel;var datasetMap=inner$3(ecModel).datasetMap;var key=datasetModel.uid+"_"+seriesLayoutBy;var datasetRecord=datasetMap.get(key)||datasetMap.set(key,{categoryWayDim:1,valueWayDim:0});each$1(coordSysDefine.coordSysDims,function(coordDim){if(coordSysDefine.firstCategoryDimIndex==null){var dataDim=datasetRecord.valueWayDim++;
encode[coordDim]=dataDim;encodeSeriesName.push(dataDim)}else{if(coordSysDefine.categoryAxisMap.get(coordDim)){encode[coordDim]=0;encodeItemName.push(0)}else{var dataDim=datasetRecord.categoryWayDim++;encode[coordDim]=dataDim;encodeSeriesName.push(dataDim)}}})}else{if(nSeriesMap.get(seriesType)!=null){var firstNotOrdinal;for(var i=0;i<5&&firstNotOrdinal==null;i++){if(!doGuessOrdinal(data,sourceFormat,seriesLayoutBy,completeResult.dimensionsDefine,completeResult.startIndex,i)){firstNotOrdinal=i}}if(firstNotOrdinal!=null){encode.value=firstNotOrdinal;var nameDimIndex=completeResult.potentialNameDimIndex||Math.max(firstNotOrdinal-1,0);encodeSeriesName.push(nameDimIndex);encodeItemName.push(nameDimIndex)}}}encodeItemName.length&&(encode.itemName=encodeItemName);encodeSeriesName.length&&(encode.seriesName=encodeSeriesName);return encode}function getDatasetModel(seriesModel){var option=seriesModel.option;var thisData=option.data;if(!thisData){return seriesModel.ecModel.getComponent("dataset",option.datasetIndex||0)}}function guessOrdinal(source,dimIndex){return doGuessOrdinal(source.data,source.sourceFormat,source.seriesLayoutBy,source.dimensionsDefine,source.startIndex,dimIndex)}function doGuessOrdinal(data,sourceFormat,seriesLayoutBy,dimensionsDefine,startIndex,dimIndex){var result;var maxLoop=5;if(isTypedArray(data)){return false}var dimName;if(dimensionsDefine){dimName=dimensionsDefine[dimIndex];dimName=isObject$1(dimName)?dimName.name:dimName}if(sourceFormat===SOURCE_FORMAT_ARRAY_ROWS){if(seriesLayoutBy===SERIES_LAYOUT_BY_ROW){var sample=data[dimIndex];for(var i=0;i<(sample||[]).length&&i<maxLoop;i++){if((result=detectValue(sample[startIndex+i]))!=null){return result}}}else{for(var i=0;i<data.length&&i<maxLoop;i++){var row=data[startIndex+i];if(row&&(result=detectValue(row[dimIndex]))!=null){return result}}}}else{if(sourceFormat===SOURCE_FORMAT_OBJECT_ROWS){if(!dimName){return}for(var i=0;i<data.length&&i<maxLoop;i++){var item=data[i];if(item&&(result=detectValue(item[dimName]))!=null){return result
}}}else{if(sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS){if(!dimName){return}var sample=data[dimName];if(!sample||isTypedArray(sample)){return false}for(var i=0;i<sample.length&&i<maxLoop;i++){if((result=detectValue(sample[i]))!=null){return result}}}else{if(sourceFormat===SOURCE_FORMAT_ORIGINAL){for(var i=0;i<data.length&&i<maxLoop;i++){var item=data[i];var val=getDataItemValue(item);if(!isArray(val)){return false}if((result=detectValue(val[dimIndex]))!=null){return result}}}}}}function detectValue(val){if(val!=null&&isFinite(val)&&val!==""){return false}else{if(isString(val)&&val!=="-"){return true}}}return false}var OPTION_INNER_KEY="\0_ec_inner";var GlobalModel=Model.extend({init:function(option,parentModel,theme,optionManager){theme=theme||{};this.option=null;this._theme=new Model(theme);this._optionManager=optionManager},setOption:function(option,optionPreprocessorFuncs){assert$1(!(OPTION_INNER_KEY in option),"please use chart.getOption()");this._optionManager.setOption(option,optionPreprocessorFuncs);this.resetOption(null)},resetOption:function(type){var optionChanged=false;var optionManager=this._optionManager;if(!type||type==="recreate"){var baseOption=optionManager.mountOption(type==="recreate");if(!this.option||type==="recreate"){initBase.call(this,baseOption)}else{this.restoreData();this.mergeOption(baseOption)}optionChanged=true}if(type==="timeline"||type==="media"){this.restoreData()}if(!type||type==="recreate"||type==="timeline"){var timelineOption=optionManager.getTimelineOption(this);timelineOption&&(this.mergeOption(timelineOption),optionChanged=true)}if(!type||type==="recreate"||type==="media"){var mediaOptions=optionManager.getMediaOption(this,this._api);if(mediaOptions.length){each$1(mediaOptions,function(mediaOption){this.mergeOption(mediaOption,optionChanged=true)},this)}}return optionChanged},mergeOption:function(newOption){var option=this.option;var componentsMap=this._componentsMap;var newCptTypes=[];resetSourceDefaulter(this);each$1(newOption,function(componentOption,mainType){if(componentOption==null){return
}if(!ComponentModel.hasClass(mainType)){option[mainType]=option[mainType]==null?clone(componentOption):merge(option[mainType],componentOption,true)}else{if(mainType){newCptTypes.push(mainType)}}});ComponentModel.topologicalTravel(newCptTypes,ComponentModel.getAllClassMainTypes(),visitComponent,this);function visitComponent(mainType,dependencies){var newCptOptionList=normalizeToArray(newOption[mainType]);var mapResult=mappingToExists(componentsMap.get(mainType),newCptOptionList);makeIdAndName(mapResult);each$1(mapResult,function(item,index){var opt=item.option;if(isObject$1(opt)){item.keyInfo.mainType=mainType;item.keyInfo.subType=determineSubType(mainType,opt,item.exist)}});var dependentModels=getComponentsByTypes(componentsMap,dependencies);option[mainType]=[];componentsMap.set(mainType,[]);each$1(mapResult,function(resultItem,index){var componentModel=resultItem.exist;var newCptOption=resultItem.option;assert$1(isObject$1(newCptOption)||componentModel,"Empty component definition");if(!newCptOption){componentModel.mergeOption({},this);componentModel.optionUpdated({},false)}else{var ComponentModelClass=ComponentModel.getClass(mainType,resultItem.keyInfo.subType,true);if(componentModel&&componentModel instanceof ComponentModelClass){componentModel.name=resultItem.keyInfo.name;componentModel.mergeOption(newCptOption,this);componentModel.optionUpdated(newCptOption,false)}else{var extraOpt=extend({dependentModels:dependentModels,componentIndex:index},resultItem.keyInfo);componentModel=new ComponentModelClass(newCptOption,this,this,extraOpt);extend(componentModel,extraOpt);componentModel.init(newCptOption,this,this,extraOpt);componentModel.optionUpdated(null,true)}}componentsMap.get(mainType)[index]=componentModel;option[mainType][index]=componentModel.option},this);if(mainType==="series"){createSeriesIndices(this,componentsMap.get("series"))}}this._seriesIndicesMap=createHashMap(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var option=clone(this.option);
each$1(option,function(opts,mainType){if(ComponentModel.hasClass(mainType)){var opts=normalizeToArray(opts);for(var i=opts.length-1;i>=0;i--){if(isIdInner(opts[i])){opts.splice(i,1)}}option[mainType]=opts}});delete option[OPTION_INNER_KEY];return option},getTheme:function(){return this._theme},getComponent:function(mainType,idx){var list=this._componentsMap.get(mainType);if(list){return list[idx||0]}},queryComponents:function(condition){var mainType=condition.mainType;if(!mainType){return[]}var index=condition.index;var id=condition.id;var name=condition.name;var cpts=this._componentsMap.get(mainType);if(!cpts||!cpts.length){return[]}var result;if(index!=null){if(!isArray(index)){index=[index]}result=filter(map(index,function(idx){return cpts[idx]}),function(val){return !!val})}else{if(id!=null){var isIdArray=isArray(id);result=filter(cpts,function(cpt){return(isIdArray&&indexOf(id,cpt.id)>=0)||(!isIdArray&&cpt.id===id)})}else{if(name!=null){var isNameArray=isArray(name);result=filter(cpts,function(cpt){return(isNameArray&&indexOf(name,cpt.name)>=0)||(!isNameArray&&cpt.name===name)})}else{result=cpts.slice()}}}return filterBySubType(result,condition)},findComponents:function(condition){var query=condition.query;var mainType=condition.mainType;var queryCond=getQueryCond(query);var result=queryCond?this.queryComponents(queryCond):this._componentsMap.get(mainType);return doFilter(filterBySubType(result,condition));function getQueryCond(q){var indexAttr=mainType+"Index";var idAttr=mainType+"Id";var nameAttr=mainType+"Name";return q&&(q[indexAttr]!=null||q[idAttr]!=null||q[nameAttr]!=null)?{mainType:mainType,index:q[indexAttr],id:q[idAttr],name:q[nameAttr]}:null}function doFilter(res){return condition.filter?filter(res,condition.filter):res}},eachComponent:function(mainType,cb,context){var componentsMap=this._componentsMap;if(typeof mainType==="function"){context=cb;cb=mainType;componentsMap.each(function(components,componentType){each$1(components,function(component,index){cb.call(context,componentType,component,index)
})})}else{if(isString(mainType)){each$1(componentsMap.get(mainType),cb,context)}else{if(isObject$1(mainType)){var queryResult=this.findComponents(mainType);each$1(queryResult,cb,context)}}}},getSeriesByName:function(name){var series=this._componentsMap.get("series");return filter(series,function(oneSeries){return oneSeries.name===name})},getSeriesByIndex:function(seriesIndex){return this._componentsMap.get("series")[seriesIndex]},getSeriesByType:function(subType){var series=this._componentsMap.get("series");return filter(series,function(oneSeries){return oneSeries.subType===subType})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(cb,context){assertSeriesInitialized(this);each$1(this._seriesIndices,function(rawSeriesIndex){var series=this._componentsMap.get("series")[rawSeriesIndex];cb.call(context,series,rawSeriesIndex)},this)},eachRawSeries:function(cb,context){each$1(this._componentsMap.get("series"),cb,context)},eachSeriesByType:function(subType,cb,context){assertSeriesInitialized(this);each$1(this._seriesIndices,function(rawSeriesIndex){var series=this._componentsMap.get("series")[rawSeriesIndex];if(series.subType===subType){cb.call(context,series,rawSeriesIndex)}},this)},eachRawSeriesByType:function(subType,cb,context){return each$1(this.getSeriesByType(subType),cb,context)},isSeriesFiltered:function(seriesModel){assertSeriesInitialized(this);return this._seriesIndicesMap.get(seriesModel.componentIndex)==null},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(cb,context){assertSeriesInitialized(this);var filteredSeries=filter(this._componentsMap.get("series"),cb,context);createSeriesIndices(this,filteredSeries)},restoreData:function(payload){var componentsMap=this._componentsMap;createSeriesIndices(this,componentsMap.get("series"));var componentTypes=[];componentsMap.each(function(components,componentType){componentTypes.push(componentType)
});ComponentModel.topologicalTravel(componentTypes,ComponentModel.getAllClassMainTypes(),function(componentType,dependencies){each$1(componentsMap.get(componentType),function(component){(componentType!=="series"||!isNotTargetSeries(component,payload))&&component.restoreData()})})}});function isNotTargetSeries(seriesModel,payload){if(payload){var index=payload.seiresIndex;var id=payload.seriesId;var name=payload.seriesName;return(index!=null&&seriesModel.componentIndex!==index)||(id!=null&&seriesModel.id!==id)||(name!=null&&seriesModel.name!==name)}}function mergeTheme(option,theme){var notMergeColorLayer=option.color&&!option.colorLayer;each$1(theme,function(themeItem,name){if(name==="colorLayer"&&notMergeColorLayer){return}if(!ComponentModel.hasClass(name)){if(typeof themeItem==="object"){option[name]=!option[name]?clone(themeItem):merge(option[name],themeItem,false)}else{if(option[name]==null){option[name]=themeItem}}}})}function initBase(baseOption){baseOption=baseOption;this.option={};this.option[OPTION_INNER_KEY]=1;this._componentsMap=createHashMap({series:[]});this._seriesIndices;this._seriesIndicesMap;mergeTheme(baseOption,this._theme.option);merge(baseOption,globalDefault,false);this.mergeOption(baseOption)}function getComponentsByTypes(componentsMap,types){if(!isArray(types)){types=types?[types]:[]}var ret={};each$1(types,function(type){ret[type]=(componentsMap.get(type)||[]).slice()});return ret}function determineSubType(mainType,newCptOption,existComponent){var subType=newCptOption.type?newCptOption.type:existComponent?existComponent.subType:ComponentModel.determineSubType(mainType,newCptOption);return subType}function createSeriesIndices(ecModel,seriesModels){ecModel._seriesIndicesMap=createHashMap(ecModel._seriesIndices=map(seriesModels,function(series){return series.componentIndex})||[])}function filterBySubType(components,condition){return condition.hasOwnProperty("subType")?filter(components,function(cpt){return cpt.subType===condition.subType}):components
}function assertSeriesInitialized(ecModel){if(__DEV__){if(!ecModel._seriesIndices){throw new Error("Option should contains series.")}}}mixin(GlobalModel,colorPaletteMixin);var echartsAPIList=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function ExtensionAPI(chartInstance){each$1(echartsAPIList,function(name){this[name]=bind(chartInstance[name],chartInstance)},this)}var coordinateSystemCreators={};function CoordinateSystemManager(){this._coordinateSystems=[]}CoordinateSystemManager.prototype={constructor:CoordinateSystemManager,create:function(ecModel,api){var coordinateSystems=[];each$1(coordinateSystemCreators,function(creater,type){var list=creater.create(ecModel,api);coordinateSystems=coordinateSystems.concat(list||[])});this._coordinateSystems=coordinateSystems},update:function(ecModel,api){each$1(this._coordinateSystems,function(coordSys){coordSys.update&&coordSys.update(ecModel,api)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}};CoordinateSystemManager.register=function(type,coordinateSystemCreator){coordinateSystemCreators[type]=coordinateSystemCreator};CoordinateSystemManager.get=function(type){return coordinateSystemCreators[type]};var each$4=each$1;var clone$3=clone;var map$1=map;var merge$1=merge;var QUERY_REG=/^(min|max)?(.+)$/;function OptionManager(api){this._api=api;this._timelineOptions=[];this._mediaList=[];this._mediaDefault;this._currentMediaIndices=[];this._optionBackup;this._newBaseOption}OptionManager.prototype={constructor:OptionManager,setOption:function(rawOption,optionPreprocessorFuncs){if(rawOption){each$1(normalizeToArray(rawOption.series),function(series){series&&series.data&&isTypedArray(series.data)&&setAsPrimitive(series.data)})}rawOption=clone$3(rawOption,true);var oldOptionBackup=this._optionBackup;var newParsedOption=parseRawOption.call(this,rawOption,optionPreprocessorFuncs,!oldOptionBackup);
this._newBaseOption=newParsedOption.baseOption;if(oldOptionBackup){mergeOption(oldOptionBackup.baseOption,newParsedOption.baseOption);if(newParsedOption.timelineOptions.length){oldOptionBackup.timelineOptions=newParsedOption.timelineOptions}if(newParsedOption.mediaList.length){oldOptionBackup.mediaList=newParsedOption.mediaList}if(newParsedOption.mediaDefault){oldOptionBackup.mediaDefault=newParsedOption.mediaDefault}}else{this._optionBackup=newParsedOption}},mountOption:function(isRecreate){var optionBackup=this._optionBackup;this._timelineOptions=map$1(optionBackup.timelineOptions,clone$3);this._mediaList=map$1(optionBackup.mediaList,clone$3);this._mediaDefault=clone$3(optionBackup.mediaDefault);this._currentMediaIndices=[];return clone$3(isRecreate?optionBackup.baseOption:this._newBaseOption)},getTimelineOption:function(ecModel){var option;var timelineOptions=this._timelineOptions;if(timelineOptions.length){var timelineModel=ecModel.getComponent("timeline");if(timelineModel){option=clone$3(timelineOptions[timelineModel.getCurrentIndex()],true)}}return option},getMediaOption:function(ecModel){var ecWidth=this._api.getWidth();var ecHeight=this._api.getHeight();var mediaList=this._mediaList;var mediaDefault=this._mediaDefault;var indices=[];var result=[];if(!mediaList.length&&!mediaDefault){return result}for(var i=0,len=mediaList.length;i<len;i++){if(applyMediaQuery(mediaList[i].query,ecWidth,ecHeight)){indices.push(i)}}if(!indices.length&&mediaDefault){indices=[-1]}if(indices.length&&!indicesEquals(indices,this._currentMediaIndices)){result=map$1(indices,function(index){return clone$3(index===-1?mediaDefault.option:mediaList[index].option)})}this._currentMediaIndices=indices;return result}};function parseRawOption(rawOption,optionPreprocessorFuncs,isNew){var timelineOptions=[];var mediaList=[];var mediaDefault;var baseOption;var timelineOpt=rawOption.timeline;if(rawOption.baseOption){baseOption=rawOption.baseOption}if(timelineOpt||rawOption.options){baseOption=baseOption||{};
timelineOptions=(rawOption.options||[]).slice()}if(rawOption.media){baseOption=baseOption||{};var media=rawOption.media;each$4(media,function(singleMedia){if(singleMedia&&singleMedia.option){if(singleMedia.query){mediaList.push(singleMedia)}else{if(!mediaDefault){mediaDefault=singleMedia}}}})}if(!baseOption){baseOption=rawOption}if(!baseOption.timeline){baseOption.timeline=timelineOpt}each$4([baseOption].concat(timelineOptions).concat(map(mediaList,function(media){return media.option})),function(option){each$4(optionPreprocessorFuncs,function(preProcess){preProcess(option,isNew)})});return{baseOption:baseOption,timelineOptions:timelineOptions,mediaDefault:mediaDefault,mediaList:mediaList}}function applyMediaQuery(query,ecWidth,ecHeight){var realMap={width:ecWidth,height:ecHeight,aspectratio:ecWidth/ecHeight};var applicatable=true;each$1(query,function(value,attr){var matched=attr.match(QUERY_REG);if(!matched||!matched[1]||!matched[2]){return}var operator=matched[1];var realAttr=matched[2].toLowerCase();if(!compare(realMap[realAttr],value,operator)){applicatable=false}});return applicatable}function compare(real,expect,operator){if(operator==="min"){return real>=expect}else{if(operator==="max"){return real<=expect}else{return real===expect}}}function indicesEquals(indices1,indices2){return indices1.join(",")===indices2.join(",")}function mergeOption(oldOption,newOption){newOption=newOption||{};each$4(newOption,function(newCptOpt,mainType){if(newCptOpt==null){return}var oldCptOpt=oldOption[mainType];if(!ComponentModel.hasClass(mainType)){oldOption[mainType]=merge$1(oldCptOpt,newCptOpt,true)}else{newCptOpt=normalizeToArray(newCptOpt);oldCptOpt=normalizeToArray(oldCptOpt);var mapResult=mappingToExists(oldCptOpt,newCptOpt);oldOption[mainType]=map$1(mapResult,function(item){return(item.option&&item.exist)?merge$1(item.exist,item.option,true):(item.exist||item.option)})}})}var each$5=each$1;var isObject$3=isObject$1;var POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];
function compatEC2ItemStyle(opt){var itemStyleOpt=opt&&opt.itemStyle;if(!itemStyleOpt){return}for(var i=0,len=POSSIBLE_STYLES.length;i<len;i++){var styleName=POSSIBLE_STYLES[i];var normalItemStyleOpt=itemStyleOpt.normal;var emphasisItemStyleOpt=itemStyleOpt.emphasis;if(normalItemStyleOpt&&normalItemStyleOpt[styleName]){opt[styleName]=opt[styleName]||{};if(!opt[styleName].normal){opt[styleName].normal=normalItemStyleOpt[styleName]}else{merge(opt[styleName].normal,normalItemStyleOpt[styleName])}normalItemStyleOpt[styleName]=null}if(emphasisItemStyleOpt&&emphasisItemStyleOpt[styleName]){opt[styleName]=opt[styleName]||{};if(!opt[styleName].emphasis){opt[styleName].emphasis=emphasisItemStyleOpt[styleName]}else{merge(opt[styleName].emphasis,emphasisItemStyleOpt[styleName])}emphasisItemStyleOpt[styleName]=null}}}function convertNormalEmphasis(opt,optType,useExtend){if(opt&&opt[optType]&&(opt[optType].normal||opt[optType].emphasis)){var normalOpt=opt[optType].normal;var emphasisOpt=opt[optType].emphasis;if(normalOpt){if(useExtend){opt[optType].normal=opt[optType].emphasis=null;defaults(opt[optType],normalOpt)}else{opt[optType]=normalOpt}}if(emphasisOpt){opt.emphasis=opt.emphasis||{};opt.emphasis[optType]=emphasisOpt}}}function removeEC3NormalStatus(opt){convertNormalEmphasis(opt,"itemStyle");convertNormalEmphasis(opt,"lineStyle");convertNormalEmphasis(opt,"areaStyle");convertNormalEmphasis(opt,"label");convertNormalEmphasis(opt,"labelLine");convertNormalEmphasis(opt,"upperLabel");convertNormalEmphasis(opt,"edgeLabel")}function compatTextStyle(opt,propName){var labelOptSingle=isObject$3(opt)&&opt[propName];var textStyle=isObject$3(labelOptSingle)&&labelOptSingle.textStyle;if(textStyle){for(var i=0,len=TEXT_STYLE_OPTIONS.length;i<len;i++){var propName=TEXT_STYLE_OPTIONS[i];if(textStyle.hasOwnProperty(propName)){labelOptSingle[propName]=textStyle[propName]}}}}function compatEC3CommonStyles(opt){if(opt){removeEC3NormalStatus(opt);compatTextStyle(opt,"label");opt.emphasis&&compatTextStyle(opt.emphasis,"label")
}}function processSeries(seriesOpt){if(!isObject$3(seriesOpt)){return}compatEC2ItemStyle(seriesOpt);removeEC3NormalStatus(seriesOpt);compatTextStyle(seriesOpt,"label");compatTextStyle(seriesOpt,"upperLabel");compatTextStyle(seriesOpt,"edgeLabel");if(seriesOpt.emphasis){compatTextStyle(seriesOpt.emphasis,"label");compatTextStyle(seriesOpt.emphasis,"upperLabel");compatTextStyle(seriesOpt.emphasis,"edgeLabel")}var markPoint=seriesOpt.markPoint;if(markPoint){compatEC2ItemStyle(markPoint);compatEC3CommonStyles(markPoint)}var markLine=seriesOpt.markLine;if(markLine){compatEC2ItemStyle(markLine);compatEC3CommonStyles(markLine)}var markArea=seriesOpt.markArea;if(markArea){compatEC3CommonStyles(markArea)}var data=seriesOpt.data;if(seriesOpt.type==="graph"){data=data||seriesOpt.nodes;var edgeData=seriesOpt.links||seriesOpt.edges;if(edgeData&&!isTypedArray(edgeData)){for(var i=0;i<edgeData.length;i++){compatEC3CommonStyles(edgeData[i])}}each$1(seriesOpt.categories,function(opt){removeEC3NormalStatus(opt)})}if(data&&!isTypedArray(data)){for(var i=0;i<data.length;i++){compatEC3CommonStyles(data[i])}}var markPoint=seriesOpt.markPoint;if(markPoint&&markPoint.data){var mpData=markPoint.data;for(var i=0;i<mpData.length;i++){compatEC3CommonStyles(mpData[i])}}var markLine=seriesOpt.markLine;if(markLine&&markLine.data){var mlData=markLine.data;for(var i=0;i<mlData.length;i++){if(isArray(mlData[i])){compatEC3CommonStyles(mlData[i][0]);compatEC3CommonStyles(mlData[i][1])}else{compatEC3CommonStyles(mlData[i])}}}if(seriesOpt.type==="gauge"){compatTextStyle(seriesOpt,"axisLabel");compatTextStyle(seriesOpt,"title");compatTextStyle(seriesOpt,"detail")}else{if(seriesOpt.type==="treemap"){convertNormalEmphasis(seriesOpt.breadcrumb,"itemStyle");each$1(seriesOpt.levels,function(opt){removeEC3NormalStatus(opt)})}else{if(seriesOpt.type==="tree"){removeEC3NormalStatus(seriesOpt.leaves)}}}}function toArr(o){return isArray(o)?o:o?[o]:[]}function toObj(o){return(isArray(o)?o[0]:o)||{}}var compatStyle=function(option,isTheme){each$5(toArr(option.series),function(seriesOpt){isObject$3(seriesOpt)&&processSeries(seriesOpt)
});var axes=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];isTheme&&axes.push("valueAxis","categoryAxis","logAxis","timeAxis");each$5(axes,function(axisName){each$5(toArr(option[axisName]),function(axisOpt){if(axisOpt){compatTextStyle(axisOpt,"axisLabel");compatTextStyle(axisOpt.axisPointer,"label")}})});each$5(toArr(option.parallel),function(parallelOpt){var parallelAxisDefault=parallelOpt&&parallelOpt.parallelAxisDefault;compatTextStyle(parallelAxisDefault,"axisLabel");compatTextStyle(parallelAxisDefault&&parallelAxisDefault.axisPointer,"label")});each$5(toArr(option.calendar),function(calendarOpt){convertNormalEmphasis(calendarOpt,"itemStyle");compatTextStyle(calendarOpt,"dayLabel");compatTextStyle(calendarOpt,"monthLabel");compatTextStyle(calendarOpt,"yearLabel")});each$5(toArr(option.radar),function(radarOpt){compatTextStyle(radarOpt,"name")});each$5(toArr(option.geo),function(geoOpt){if(isObject$3(geoOpt)){compatEC3CommonStyles(geoOpt);each$5(toArr(geoOpt.regions),function(regionObj){compatEC3CommonStyles(regionObj)})}});each$5(toArr(option.timeline),function(timelineOpt){compatEC3CommonStyles(timelineOpt);convertNormalEmphasis(timelineOpt,"label");convertNormalEmphasis(timelineOpt,"itemStyle");convertNormalEmphasis(timelineOpt,"controlStyle",true);var data=timelineOpt.data;isArray(data)&&each$1(data,function(item){if(isObject$1(item)){convertNormalEmphasis(item,"label");convertNormalEmphasis(item,"itemStyle")}})});each$5(toArr(option.toolbox),function(toolboxOpt){convertNormalEmphasis(toolboxOpt,"iconStyle");each$5(toolboxOpt.feature,function(featureOpt){convertNormalEmphasis(featureOpt,"iconStyle")})});compatTextStyle(toObj(option.axisPointer),"label");compatTextStyle(toObj(option.tooltip).axisPointer,"label")};function get(opt,path){path=path.split(",");var obj=opt;for(var i=0;i<path.length;i++){obj=obj&&obj[path[i]];if(obj==null){break}}return obj}function set$1(opt,path,val,overwrite){path=path.split(",");var obj=opt;var key;
for(var i=0;i<path.length-1;i++){key=path[i];if(obj[key]==null){obj[key]={}}obj=obj[key]}if(overwrite||obj[path[i]]==null){obj[path[i]]=val}}function compatLayoutProperties(option){each$1(LAYOUT_PROPERTIES,function(prop){if(prop[0] in option&&!(prop[1] in option)){option[prop[1]]=option[prop[0]]}})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]];var COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];var backwardCompat=function(option,isTheme){compatStyle(option,isTheme);option.series=normalizeToArray(option.series);each$1(option.series,function(seriesOpt){if(!isObject$1(seriesOpt)){return}var seriesType=seriesOpt.type;if(seriesType==="pie"||seriesType==="gauge"){if(seriesOpt.clockWise!=null){seriesOpt.clockwise=seriesOpt.clockWise}}if(seriesType==="gauge"){var pointerColor=get(seriesOpt,"pointer.color");pointerColor!=null&&set$1(seriesOpt,"itemStyle.normal.color",pointerColor)}compatLayoutProperties(seriesOpt)});if(option.dataRange){option.visualMap=option.dataRange}each$1(COMPATITABLE_COMPONENTS,function(componentName){var options=option[componentName];if(options){if(!isArray(options)){options=[options]}each$1(options,function(option){compatLayoutProperties(option)})}})};var dataStack=function(ecModel){var stackInfoMap=createHashMap();ecModel.eachSeries(function(seriesModel){var stack=seriesModel.get("stack");if(stack){var stackInfoList=stackInfoMap.get(stack)||stackInfoMap.set(stack,[]);var data=seriesModel.getData();var stackInfo={stackResultDimension:data.getCalculationInfo("stackResultDimension"),stackedOverDimension:data.getCalculationInfo("stackedOverDimension"),stackedDimension:data.getCalculationInfo("stackedDimension"),stackedByDimension:data.getCalculationInfo("stackedByDimension"),isStackedByIndex:data.getCalculationInfo("isStackedByIndex"),data:data,seriesModel:seriesModel};if(!stackInfo.stackedDimension||!(stackInfo.isStackedByIndex||stackInfo.stackedByDimension)){return
}stackInfoList.length&&data.setCalculationInfo("stackedOnSeries",stackInfoList[stackInfoList.length-1].seriesModel);stackInfoList.push(stackInfo)}});stackInfoMap.each(calculateStack)};function calculateStack(stackInfoList){each$1(stackInfoList,function(targetStackInfo,idxInStack){var resultVal=[];var resultNaN=[NaN,NaN];var dims=[targetStackInfo.stackResultDimension,targetStackInfo.stackedOverDimension];var targetData=targetStackInfo.data;var isStackedByIndex=targetStackInfo.isStackedByIndex;var newData=targetData.map(dims,function(v0,v1,dataIndex){var sum=targetData.get(targetStackInfo.stackedDimension,dataIndex);if(isNaN(sum)){return resultNaN}var byValue;var stackedDataRawIndex;if(isStackedByIndex){stackedDataRawIndex=targetData.getRawIndex(dataIndex)}else{byValue=targetData.get(targetStackInfo.stackedByDimension,dataIndex)}var stackedOver=NaN;for(var j=idxInStack-1;j>=0;j--){var stackInfo=stackInfoList[j];if(!isStackedByIndex){stackedDataRawIndex=stackInfo.data.rawIndexOf(stackInfo.stackedByDimension,byValue)}if(stackedDataRawIndex>=0){var val=stackInfo.data.getByRawIndex(stackInfo.stackResultDimension,stackedDataRawIndex);if((sum>=0&&val>0)||(sum<=0&&val<0)){sum+=val;stackedOver=val;break}}}resultVal[0]=sum;resultVal[1]=stackedOver;return resultVal});targetData.hostModel.setData(newData);targetStackInfo.data=newData})}function DefaultDataProvider(source,dimSize){if(!Source.isInstance(source)){source=Source.seriesDataToSource(source)}this._source=source;var data=this._data=source.data;var sourceFormat=source.sourceFormat;if(sourceFormat===SOURCE_FORMAT_TYPED_ARRAY){if(__DEV__){if(dimSize==null){throw new Error("Typed array data must specify dimension size")}}this._offset=0;this._dimSize=dimSize;this._data=data}var methods=providerMethods[sourceFormat===SOURCE_FORMAT_ARRAY_ROWS?sourceFormat+"_"+source.seriesLayoutBy:sourceFormat];if(__DEV__){assert$1(methods,"Invalide sourceFormat: "+sourceFormat)}extend(this,methods)}var providerProto=DefaultDataProvider.prototype;
providerProto.pure=false;providerProto.persistent=true;providerProto.getSource=function(){return this._source};var providerMethods={"arrayRows_column":{pure:true,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(idx){return this._data[idx+this._source.startIndex]},appendData:appendDataSimply},"arrayRows_row":{pure:true,count:function(){var row=this._data[0];return row?Math.max(0,row.length-this._source.startIndex):0},getItem:function(idx){idx+=this._source.startIndex;var item=[];var data=this._data;for(var i=0;i<data.length;i++){var row=data[i];item.push(row?row[idx]:null)}return item},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},"objectRows":{pure:true,count:countSimply,getItem:getItemSimply,appendData:appendDataSimply},"keyedColumns":{pure:true,count:function(){var dimName=this._source.dimensionsDefine[0].name;var col=this._data[dimName];return col?col.length:0},getItem:function(idx){var item=[];var dims=this._source.dimensionsDefine;for(var i=0;i<dims.length;i++){var col=this._data[dims[i].name];item.push(col?col[idx]:null)}return item},appendData:function(newData){var data=this._data;each$1(newData,function(newCol,key){var oldCol=data[key]||(data[key]=[]);for(var i=0;i<(newCol||[]).length;i++){oldCol.push(newCol[i])}})}},"original":{count:countSimply,getItem:getItemSimply,appendData:appendDataSimply},"typedArray":{persistent:false,pure:true,count:function(){return this._data?(this._data.length/this._dimSize):0},getItem:function(idx,out){idx=idx-this._offset;out=out||[];var offset=this._dimSize*idx;for(var i=0;i<this._dimSize;i++){out[i]=this._data[offset+i]}return out},appendData:function(newData){if(__DEV__){assert$1(isTypedArray(newData),"Added data must be TypedArray if data in initialization is TypedArray")}this._data=newData},clean:function(){this._offset+=this.count();this._data=null}}};function countSimply(){return this._data.length}function getItemSimply(idx){return this._data[idx]
}function appendDataSimply(newData){for(var i=0;i<newData.length;i++){this._data.push(newData[i])}}var rawValueGetters={arrayRows:getRawValueSimply,objectRows:function(dataItem,dataIndex,dimIndex,dimName){return dimIndex!=null?dataItem[dimName]:dataItem},keyedColumns:getRawValueSimply,original:function(dataItem,dataIndex,dimIndex,dimName){var value=getDataItemValue(dataItem);return(dimIndex==null||!(value instanceof Array))?value:value[dimIndex]},typedArray:getRawValueSimply};function getRawValueSimply(dataItem,dataIndex,dimIndex,dimName){return dimIndex!=null?dataItem[dimIndex]:dataItem}var defaultDimValueGetters={arrayRows:getDimValueSimply,objectRows:function(dataItem,dimName,dataIndex,dimIndex){return converDataValue(dataItem[dimName],this._dimensionInfos[dimName])},keyedColumns:getDimValueSimply,original:function(dataItem,dimName,dataIndex,dimIndex){var value=dataItem&&(dataItem.value==null?dataItem:dataItem.value);if(!this._rawData.pure&&isDataItemOption(dataItem)){this.hasItemOption=true}return converDataValue((value instanceof Array)?value[dimIndex]:value,this._dimensionInfos[dimName])},typedArray:function(dataItem,dimName,dataIndex,dimIndex){return dataItem[dimIndex]}};function getDimValueSimply(dataItem,dimName,dataIndex,dimIndex){return converDataValue(dataItem[dimIndex],this._dimensionInfos[dimName])}function converDataValue(value,dimInfo){var dimType=dimInfo&&dimInfo.type;if(dimType==="ordinal"){var ordinalMeta=dimInfo&&dimInfo.ordinalMeta;return ordinalMeta?ordinalMeta.parseAndCollect(value):value}if(dimType==="time"&&typeof value!=="number"&&value!=null&&value!=="-"){value=+parseDate(value)}return(value==null||value==="")?NaN:+value}function retrieveRawValue(data,dataIndex,dim){if(!data){return}var dataItem=data.getRawDataItem(dataIndex);if(dataItem==null){return}var sourceFormat=data.getProvider().getSource().sourceFormat;var dimName;var dimIndex;var dimInfo=data.getDimensionInfo(dim);if(dimInfo){dimName=dimInfo.name;dimIndex=dimInfo.index}return rawValueGetters[sourceFormat](dataItem,dataIndex,dimIndex,dimName)
}function retrieveRawAttr(data,dataIndex,attr){if(!data){return}var sourceFormat=data.getProvider().getSource().sourceFormat;if(sourceFormat!==SOURCE_FORMAT_ORIGINAL&&sourceFormat!==SOURCE_FORMAT_OBJECT_ROWS){return}var dataItem=data.getRawDataItem(dataIndex);if(sourceFormat===SOURCE_FORMAT_ORIGINAL&&!isObject$1(dataItem)){dataItem=null}if(dataItem){return dataItem[attr]}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g;var dataFormatMixin={getDataParams:function(dataIndex,dataType){var data=this.getData(dataType);var rawValue=this.getRawValue(dataIndex,dataType);var rawDataIndex=data.getRawIndex(dataIndex);var name=data.getName(dataIndex);var itemOpt=data.getRawDataItem(dataIndex);var color=data.getItemVisual(dataIndex,"color");var tooltipModel=this.ecModel.getComponent("tooltip");var renderModeOption=tooltipModel&&tooltipModel.get("renderMode");var renderMode=getTooltipRenderMode(renderModeOption);var mainType=this.mainType;var isSeries=mainType==="series";return{componentType:mainType,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:isSeries?this.subType:null,seriesIndex:this.seriesIndex,seriesId:isSeries?this.id:null,seriesName:isSeries?this.name:null,name:name,dataIndex:rawDataIndex,data:itemOpt,dataType:dataType,value:rawValue,color:color,marker:getTooltipMarker({color:color,renderMode:renderMode}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(dataIndex,status,dataType,dimIndex,labelProp){status=status||"normal";var data=this.getData(dataType);var itemModel=data.getItemModel(dataIndex);var params=this.getDataParams(dataIndex,dataType);if(dimIndex!=null&&(params.value instanceof Array)){params.value=params.value[dimIndex]}var formatter=itemModel.get(status==="normal"?[labelProp||"label","formatter"]:[status,labelProp||"label","formatter"]);if(typeof formatter==="function"){params.status=status;return formatter(params)}else{if(typeof formatter==="string"){var str=formatTpl(formatter,params);return str.replace(DIMENSION_LABEL_REG,function(origin,dim){var len=dim.length;
if(dim.charAt(0)==="["&&dim.charAt(len-1)==="]"){dim=+dim.slice(1,len-1)}return retrieveRawValue(data,dataIndex,dim)})}}},getRawValue:function(idx,dataType){return retrieveRawValue(this.getData(dataType),idx)},formatTooltip:function(){}};function createTask(define){return new Task(define)}function Task(define){define=define||{};this._reset=define.reset;this._plan=define.plan;this._count=define.count;this._onDirty=define.onDirty;this._dirty=true;this.context}var taskProto=Task.prototype;taskProto.perform=function(performArgs){var upTask=this._upstream;var skip=performArgs&&performArgs.skip;if(this._dirty&&upTask){var context=this.context;context.data=context.outputData=upTask.context.outputData}if(this.__pipeline){this.__pipeline.currentTask=this}var planResult;if(this._plan&&!skip){planResult=this._plan(this.context)}var lastModBy=normalizeModBy(this._modBy);var lastModDataCount=this._modDataCount||0;var modBy=normalizeModBy(performArgs&&performArgs.modBy);var modDataCount=performArgs&&performArgs.modDataCount||0;if(lastModBy!==modBy||lastModDataCount!==modDataCount){planResult="reset"}function normalizeModBy(val){!(val>=1)&&(val=1);return val}var forceFirstProgress;if(this._dirty||planResult==="reset"){this._dirty=false;forceFirstProgress=reset(this,skip)}this._modBy=modBy;this._modDataCount=modDataCount;var step=performArgs&&performArgs.step;if(upTask){if(__DEV__){assert$1(upTask._outputDueEnd!=null)}this._dueEnd=upTask._outputDueEnd}else{if(__DEV__){assert$1(!this._progress||this._count)}this._dueEnd=this._count?this._count(this.context):Infinity}if(this._progress){var start=this._dueIndex;var end=Math.min(step!=null?this._dueIndex+step:Infinity,this._dueEnd);if(!skip&&(forceFirstProgress||start<end)){var progress=this._progress;if(isArray(progress)){for(var i=0;i<progress.length;i++){doProgress(this,progress[i],start,end,modBy,modDataCount)}}else{doProgress(this,progress,start,end,modBy,modDataCount)}}this._dueIndex=end;var outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:end;
if(__DEV__){assert$1(outputDueEnd>=this._outputDueEnd)}this._outputDueEnd=outputDueEnd}else{this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd}return this.unfinished()};var iterator=(function(){var end;var current;var modBy;var modDataCount;var winCount;var it={reset:function(s,e,sStep,sCount){current=s;end=e;modBy=sStep;modDataCount=sCount;winCount=Math.ceil(modDataCount/modBy);it.next=(modBy>1&&modDataCount>0)?modNext:sequentialNext}};return it;function sequentialNext(){return current<end?current++:null}function modNext(){var dataIndex=(current%winCount)*modBy+Math.ceil(current/winCount);var result=current>=end?null:dataIndex<modDataCount?dataIndex:current;current++;return result}})();taskProto.dirty=function(){this._dirty=true;this._onDirty&&this._onDirty(this.context)};function doProgress(taskIns,progress,start,end,modBy,modDataCount){iterator.reset(start,end,modBy,modDataCount);taskIns._callingProgress=progress;taskIns._callingProgress({start:start,end:end,count:end-start,next:iterator.next},taskIns.context)}function reset(taskIns,skip){taskIns._dueIndex=taskIns._outputDueEnd=taskIns._dueEnd=0;taskIns._settedOutputEnd=null;var progress;var forceFirstProgress;if(!skip&&taskIns._reset){progress=taskIns._reset(taskIns.context);if(progress&&progress.progress){forceFirstProgress=progress.forceFirstProgress;progress=progress.progress}if(isArray(progress)&&!progress.length){progress=null}}taskIns._progress=progress;taskIns._modBy=taskIns._modDataCount=null;var downstream=taskIns._downstream;downstream&&downstream.dirty();return forceFirstProgress}taskProto.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd};taskProto.pipe=function(downTask){if(__DEV__){assert$1(downTask&&!downTask._disposed&&downTask!==this)}if(this._downstream!==downTask||this._dirty){this._downstream=downTask;downTask._upstream=this;downTask.dirty()}};taskProto.dispose=function(){if(this._disposed){return}this._upstream&&(this._upstream._downstream=null);
this._downstream&&(this._downstream._upstream=null);this._dirty=false;this._disposed=true};taskProto.getUpstream=function(){return this._upstream};taskProto.getDownstream=function(){return this._downstream};taskProto.setOutputEnd=function(end){this._outputDueEnd=this._settedOutputEnd=end};var inner$4=makeInner();var SeriesModel=ComponentModel.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",layoutMode:null,init:function(option,parentModel,ecModel,extraOpt){this.seriesIndex=this.componentIndex;this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset});this.dataTask.context={model:this};this.mergeDefaultAndTheme(option,ecModel);prepareSource(this);var data=this.getInitialData(option,ecModel);wrapData(data,this);this.dataTask.context.data=data;if(__DEV__){assert$1(data,"getInitialData returned invalid data.")}inner$4(this).dataBeforeProcessed=data;autoSeriesName(this)},mergeDefaultAndTheme:function(option,ecModel){var layoutMode=this.layoutMode;var inputPositionParams=layoutMode?getLayoutParams(option):{};var themeSubType=this.subType;if(ComponentModel.hasClass(themeSubType)){themeSubType+="Series"}merge(option,ecModel.getTheme().get(this.subType));merge(option,this.getDefaultOption());defaultEmphasis(option,"label",["show"]);this.fillDataTextStyle(option.data);if(layoutMode){mergeLayoutParam(option,inputPositionParams,layoutMode)}},mergeOption:function(newSeriesOption,ecModel){newSeriesOption=merge(this.option,newSeriesOption,true);this.fillDataTextStyle(newSeriesOption.data);var layoutMode=this.layoutMode;if(layoutMode){mergeLayoutParam(this.option,newSeriesOption,layoutMode)}prepareSource(this);var data=this.getInitialData(newSeriesOption,ecModel);wrapData(data,this);this.dataTask.dirty();this.dataTask.context.data=data;inner$4(this).dataBeforeProcessed=data;autoSeriesName(this)},fillDataTextStyle:function(data){if(data&&!isTypedArray(data)){var props=["show"];
for(var i=0;i<data.length;i++){if(data[i]&&data[i].label){defaultEmphasis(data[i],"label",props)}}}},getInitialData:function(){},appendData:function(params){var data=this.getRawData();data.appendData(params.data)},getData:function(dataType){var task=getCurrentTask(this);if(task){var data=task.context.data;return dataType==null?data:data.getLinkedData(dataType)}else{return inner$4(this).data}},setData:function(data){var task=getCurrentTask(this);if(task){var context=task.context;if(context.data!==data&&task.modifyOutputEnd){task.setOutputEnd(data.count())}context.outputData=data;if(task!==this.dataTask){context.data=data}}inner$4(this).data=data},getSource:function(){return getSource(this)},getRawData:function(){return inner$4(this).dataBeforeProcessed},getBaseAxis:function(){var coordSys=this.coordinateSystem;return coordSys&&coordSys.getBaseAxis&&coordSys.getBaseAxis()},formatTooltip:function(dataIndex,multipleSeries,dataType,renderMode){var series=this;renderMode=renderMode||"html";var newLine=renderMode==="html"?"<br/>":"\n";var isRichText=renderMode==="richText";var markers={};var markerId=0;function formatArrayValue(value){var vertially=reduce(value,function(vertially,val,idx){var dimItem=data.getDimensionInfo(idx);return vertially|=dimItem&&dimItem.tooltip!==false&&dimItem.displayName!=null},0);var result=[];tooltipDims.length?each$1(tooltipDims,function(dim){setEachItem(retrieveRawValue(data,dataIndex,dim),dim)}):each$1(value,setEachItem);function setEachItem(val,dim){var dimInfo=data.getDimensionInfo(dim);if(!dimInfo||dimInfo.otherDims.tooltip===false){return}var dimType=dimInfo.type;var markName="sub"+series.seriesIndex+"at"+markerId;var dimHead=getTooltipMarker({color:color,type:"subItem",renderMode:renderMode,markerId:markName});var dimHeadStr=typeof dimHead==="string"?dimHead:dimHead.content;var valStr=(vertially?dimHeadStr+encodeHTML(dimInfo.displayName||"-")+": ":"")+encodeHTML(dimType==="ordinal"?val+"":dimType==="time"?(multipleSeries?"":formatTime("yyyy/MM/dd hh:mm:ss",val)):addCommas(val));
valStr&&result.push(valStr);if(isRichText){markers[markName]=color;++markerId}}var newLine=vertially?(isRichText?"\n":"<br/>"):"";var content=newLine+result.join(newLine||", ");return{renderMode:renderMode,content:content,style:markers}}function formatSingleValue(val){return{renderMode:renderMode,content:encodeHTML(addCommas(val)),style:markers}}var data=this.getData();var tooltipDims=data.mapDimension("defaultedTooltip",true);var tooltipDimLen=tooltipDims.length;var value=this.getRawValue(dataIndex);var isValueArr=isArray(value);var color=data.getItemVisual(dataIndex,"color");if(isObject$1(color)&&color.colorStops){color=(color.colorStops[0]||{}).color}color=color||"transparent";var formattedValue=(tooltipDimLen>1||(isValueArr&&!tooltipDimLen))?formatArrayValue(value):tooltipDimLen?formatSingleValue(retrieveRawValue(data,dataIndex,tooltipDims[0])):formatSingleValue(isValueArr?value[0]:value);var content=formattedValue.content;var markName=series.seriesIndex+"at"+markerId;var colorEl=getTooltipMarker({color:color,type:"item",renderMode:renderMode,markerId:markName});markers[markName]=color;++markerId;var name=data.getName(dataIndex);var seriesName=this.name;if(!isNameSpecified(this)){seriesName=""}seriesName=seriesName?encodeHTML(seriesName)+(!multipleSeries?newLine:": "):"";var colorStr=typeof colorEl==="string"?colorEl:colorEl.content;var html=!multipleSeries?seriesName+colorStr+(name?encodeHTML(name)+": "+content:content):colorStr+seriesName+content;return{html:html,markers:markers}},isAnimationEnabled:function(){if(env$1.node){return false}var animationEnabled=this.getShallow("animation");if(animationEnabled){if(this.getData().count()>this.getShallow("animationThreshold")){animationEnabled=false}}return animationEnabled},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(name,scope,requestColorNum){var ecModel=this.ecModel;var color=colorPaletteMixin.getColorFromPalette.call(this,name,scope,requestColorNum);if(!color){color=ecModel.getColorFromPalette(name,scope,requestColorNum)
}return color},coordDimToDataDim:function(coordDim){return this.getRawData().mapDimension(coordDim,true)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});mixin(SeriesModel,dataFormatMixin);mixin(SeriesModel,colorPaletteMixin);function autoSeriesName(seriesModel){var name=seriesModel.name;if(!isNameSpecified(seriesModel)){seriesModel.name=getSeriesAutoName(seriesModel)||name}}function getSeriesAutoName(seriesModel){var data=seriesModel.getRawData();var dataDims=data.mapDimension("seriesName",true);var nameArr=[];each$1(dataDims,function(dataDim){var dimInfo=data.getDimensionInfo(dataDim);dimInfo.displayName&&nameArr.push(dimInfo.displayName)});return nameArr.join(" ")}function dataTaskCount(context){return context.model.getRawData().count()}function dataTaskReset(context){var seriesModel=context.model;seriesModel.setData(seriesModel.getRawData().cloneShallow());return dataTaskProgress}function dataTaskProgress(param,context){if(param.end>context.outputData.count()){context.model.getRawData().cloneShallow(context.outputData)}}function wrapData(data,seriesModel){each$1(data.CHANGABLE_METHODS,function(methodName){data.wrapMethod(methodName,curry(onDataSelfChange,seriesModel))})}function onDataSelfChange(seriesModel){var task=getCurrentTask(seriesModel);if(task){task.setOutputEnd(this.count())}}function getCurrentTask(seriesModel){var scheduler=(seriesModel.ecModel||{}).scheduler;var pipeline=scheduler&&scheduler.getPipeline(seriesModel.uid);if(pipeline){var task=pipeline.currentTask;if(task){var agentStubMap=task.agentStubMap;if(agentStubMap){task=agentStubMap.get(seriesModel.uid)}}return task}}var Component=function(){this.group=new Group();this.uid=getUID("viewComponent")};Component.prototype={constructor:Component,init:function(ecModel,api){},render:function(componentModel,ecModel,api,payload){},dispose:function(){},filterForExposedEvent:null};
var componentProto=Component.prototype;componentProto.updateView=componentProto.updateLayout=componentProto.updateVisual=function(seriesModel,ecModel,api,payload){};enableClassExtend(Component);enableClassManagement(Component,{registerWhenExtend:true});var createRenderPlanner=function(){var inner=makeInner();return function(seriesModel){var fields=inner(seriesModel);var pipelineContext=seriesModel.pipelineContext;var originalLarge=fields.large;var originalProgressive=fields.progressiveRender;var large=fields.large=pipelineContext.large;var progressive=fields.progressiveRender=pipelineContext.progressiveRender;return !!((originalLarge^large)||(originalProgressive^progressive))&&"reset"}};var inner$5=makeInner();var renderPlanner=createRenderPlanner();function Chart(){this.group=new Group();this.uid=getUID("viewChart");this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset});this.renderTask.context={view:this}}Chart.prototype={type:"chart",init:function(ecModel,api){},render:function(seriesModel,ecModel,api,payload){},highlight:function(seriesModel,ecModel,api,payload){toggleHighlight(seriesModel.getData(),payload,"emphasis")},downplay:function(seriesModel,ecModel,api,payload){toggleHighlight(seriesModel.getData(),payload,"normal")},remove:function(ecModel,api){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var chartProto=Chart.prototype;chartProto.updateView=chartProto.updateLayout=chartProto.updateVisual=function(seriesModel,ecModel,api,payload){this.render(seriesModel,ecModel,api,payload)};function elSetState(el,state){if(el){el.trigger(state);if(el.type==="group"){for(var i=0;i<el.childCount();i++){elSetState(el.childAt(i),state)}}}}function toggleHighlight(data,payload,state){var dataIndex=queryDataIndex(data,payload);if(dataIndex!=null){each$1(normalizeToArray(dataIndex),function(dataIdx){elSetState(data.getItemGraphicEl(dataIdx),state)})}else{data.eachItemGraphicEl(function(el){elSetState(el,state)
})}}enableClassExtend(Chart,["dispose"]);enableClassManagement(Chart,{registerWhenExtend:true});Chart.markUpdateMethod=function(payload,methodName){inner$5(payload).updateMethod=methodName};function renderTaskPlan(context){return renderPlanner(context.model)}function renderTaskReset(context){var seriesModel=context.model;var ecModel=context.ecModel;var api=context.api;var payload=context.payload;var progressiveRender=seriesModel.pipelineContext.progressiveRender;var view=context.view;var updateMethod=payload&&inner$5(payload).updateMethod;var methodName=progressiveRender?"incrementalPrepareRender":(updateMethod&&view[updateMethod])?updateMethod:"render";if(methodName!=="render"){view[methodName](seriesModel,ecModel,api,payload)}return progressMethodMap[methodName]}var progressMethodMap={incrementalPrepareRender:{progress:function(params,context){context.view.incrementalRender(params,context.model,context.ecModel,context.api,context.payload)}},render:{forceFirstProgress:true,progress:function(params,context){context.view.render(context.model,context.ecModel,context.api,context.payload)}}};var ORIGIN_METHOD="\0__throttleOriginMethod";var RATE="\0__throttleRate";var THROTTLE_TYPE="\0__throttleType";function throttle(fn,delay,debounce){var currCall;var lastCall=0;var lastExec=0;var timer=null;var diff;var scope;var args;var debounceNextCall;delay=delay||0;function exec(){lastExec=(new Date()).getTime();timer=null;fn.apply(scope,args||[])}var cb=function(){currCall=(new Date()).getTime();scope=this;args=arguments;var thisDelay=debounceNextCall||delay;var thisDebounce=debounceNextCall||debounce;debounceNextCall=null;diff=currCall-(thisDebounce?lastCall:lastExec)-thisDelay;clearTimeout(timer);if(thisDebounce){timer=setTimeout(exec,thisDelay)}else{if(diff>=0){exec()}else{timer=setTimeout(exec,-diff)}}lastCall=currCall};cb.clear=function(){if(timer){clearTimeout(timer);timer=null}};cb.debounceNextCall=function(debounceDelay){debounceNextCall=debounceDelay};return cb}function createOrUpdate(obj,fnAttr,rate,throttleType){var fn=obj[fnAttr];
if(!fn){return}var originFn=fn[ORIGIN_METHOD]||fn;var lastThrottleType=fn[THROTTLE_TYPE];var lastRate=fn[RATE];if(lastRate!==rate||lastThrottleType!==throttleType){if(rate==null||!throttleType){return(obj[fnAttr]=originFn)}fn=obj[fnAttr]=throttle(originFn,rate,throttleType==="debounce");fn[ORIGIN_METHOD]=originFn;fn[THROTTLE_TYPE]=throttleType;fn[RATE]=rate}return fn}function clear(obj,fnAttr){var fn=obj[fnAttr];if(fn&&fn[ORIGIN_METHOD]){obj[fnAttr]=fn[ORIGIN_METHOD]}}var seriesColor={createOnAllSeries:true,performRawSeries:true,reset:function(seriesModel,ecModel){var data=seriesModel.getData();var colorAccessPath=(seriesModel.visualColorAccessPath||"itemStyle.color").split(".");var color=seriesModel.get(colorAccessPath)||seriesModel.getColorFromPalette(seriesModel.name,null,ecModel.getSeriesCount());data.setVisual("color",color);if(!ecModel.isSeriesFiltered(seriesModel)){if(typeof color==="function"&&!(color instanceof Gradient)){data.each(function(idx){data.setItemVisual(idx,"color",color(seriesModel.getDataParams(idx)))})}var dataEach=function(data,idx){var itemModel=data.getItemModel(idx);var color=itemModel.get(colorAccessPath,true);if(color!=null){data.setItemVisual(idx,"color",color)}};return{dataEach:data.hasItemOption?dataEach:null}}}};var lang={toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};
var aria=function(dom,ecModel){var ariaModel=ecModel.getModel("aria");if(!ariaModel.get("show")){return}else{if(ariaModel.get("description")){dom.setAttribute("aria-label",ariaModel.get("description"));return}}var seriesCnt=0;ecModel.eachSeries(function(seriesModel,idx){++seriesCnt},this);var maxDataCnt=ariaModel.get("data.maxCount")||10;var maxSeriesCnt=ariaModel.get("series.maxCount")||10;var displaySeriesCnt=Math.min(seriesCnt,maxSeriesCnt);var ariaLabel;if(seriesCnt<1){return}else{var title=getTitle();if(title){ariaLabel=replace(getConfig("general.withTitle"),{title:title})}else{ariaLabel=getConfig("general.withoutTitle")}var seriesLabels=[];var prefix=seriesCnt>1?"series.multiple.prefix":"series.single.prefix";ariaLabel+=replace(getConfig(prefix),{seriesCount:seriesCnt});ecModel.eachSeries(function(seriesModel,idx){if(idx<displaySeriesCnt){var seriesLabel;var seriesName=seriesModel.get("name");var seriesTpl="series."+(seriesCnt>1?"multiple":"single")+".";seriesLabel=getConfig(seriesName?seriesTpl+"withName":seriesTpl+"withoutName");seriesLabel=replace(seriesLabel,{seriesId:seriesModel.seriesIndex,seriesName:seriesModel.get("name"),seriesType:getSeriesTypeName(seriesModel.subType)});var data=seriesModel.getData();window.data=data;if(data.count()>maxDataCnt){seriesLabel+=replace(getConfig("data.partialData"),{displayCnt:maxDataCnt})}else{seriesLabel+=getConfig("data.allData")}var dataLabels=[];for(var i=0;i<data.count();i++){if(i<maxDataCnt){var name=data.getName(i);var value=retrieveRawValue(data,i);dataLabels.push(replace(name?getConfig("data.withName"):getConfig("data.withoutName"),{name:name,value:value}))}}seriesLabel+=dataLabels.join(getConfig("data.separator.middle"))+getConfig("data.separator.end");seriesLabels.push(seriesLabel)}});ariaLabel+=seriesLabels.join(getConfig("series.multiple.separator.middle"))+getConfig("series.multiple.separator.end");dom.setAttribute("aria-label",ariaLabel)}function replace(str,keyValues){if(typeof str!=="string"){return str
}var result=str;each$1(keyValues,function(value,key){result=result.replace(new RegExp("\\{\\s*"+key+"\\s*\\}","g"),value)});return result}function getConfig(path){var userConfig=ariaModel.get(path);if(userConfig==null){var pathArr=path.split(".");var result=lang.aria;for(var i=0;i<pathArr.length;++i){result=result[pathArr[i]]}return result}else{return userConfig}}function getTitle(){var title=ecModel.getModel("title").option;if(title&&title.length){title=title[0]}return title&&title.text}function getSeriesTypeName(type){return lang.series.typeNames[type]||""}};var PI$1=Math.PI;var loadingDefault=function(api,opts){opts=opts||{};defaults(opts,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var mask=new Rect({style:{fill:opts.maskColor},zlevel:opts.zlevel,z:10000});var arc=new Arc({shape:{startAngle:-PI$1/2,endAngle:-PI$1/2+0.1,r:10},style:{stroke:opts.color,lineCap:"round",lineWidth:5},zlevel:opts.zlevel,z:10001});var labelRect=new Rect({style:{fill:"none",text:opts.text,textPosition:"right",textDistance:10,textFill:opts.textColor},zlevel:opts.zlevel,z:10001});arc.animateShape(true).when(1000,{endAngle:PI$1*3/2}).start("circularInOut");arc.animateShape(true).when(1000,{startAngle:PI$1*3/2}).delay(300).start("circularInOut");var group=new Group();group.add(arc);group.add(labelRect);group.add(mask);group.resize=function(){var cx=api.getWidth()/2;var cy=api.getHeight()/2;arc.setShape({cx:cx,cy:cy});var r=arc.shape.r;labelRect.setShape({x:cx-r,y:cy-r,width:r*2,height:r*2});mask.setShape({x:0,y:0,width:api.getWidth(),height:api.getHeight()})};group.resize();return group};function Scheduler(ecInstance,api,dataProcessorHandlers,visualHandlers){this.ecInstance=ecInstance;this.api=api;this.unfinished;var dataProcessorHandlers=this._dataProcessorHandlers=dataProcessorHandlers.slice();var visualHandlers=this._visualHandlers=visualHandlers.slice();this._allHandlers=dataProcessorHandlers.concat(visualHandlers);this._stageTaskMap=createHashMap()
}var proto=Scheduler.prototype;proto.restoreData=function(ecModel,payload){ecModel.restoreData(payload);this._stageTaskMap.each(function(taskRecord){var overallTask=taskRecord.overallTask;overallTask&&overallTask.dirty()})};proto.getPerformArgs=function(task,isBlock){if(!task.__pipeline){return}var pipeline=this._pipelineMap.get(task.__pipeline.id);var pCtx=pipeline.context;var incremental=!isBlock&&pipeline.progressiveEnabled&&(!pCtx||pCtx.progressiveRender)&&task.__idxInPipeline>pipeline.blockIndex;var step=incremental?pipeline.step:null;var modDataCount=pCtx&&pCtx.modDataCount;var modBy=modDataCount!=null?Math.ceil(modDataCount/step):null;return{step:step,modBy:modBy,modDataCount:modDataCount}};proto.getPipeline=function(pipelineId){return this._pipelineMap.get(pipelineId)};proto.updateStreamModes=function(seriesModel,view){var pipeline=this._pipelineMap.get(seriesModel.uid);var data=seriesModel.getData();var dataLen=data.count();var progressiveRender=pipeline.progressiveEnabled&&view.incrementalPrepareRender&&dataLen>=pipeline.threshold;var large=seriesModel.get("large")&&dataLen>=seriesModel.get("largeThreshold");var modDataCount=seriesModel.get("progressiveChunkMode")==="mod"?dataLen:null;seriesModel.pipelineContext=pipeline.context={progressiveRender:progressiveRender,modDataCount:modDataCount,large:large}};proto.restorePipelines=function(ecModel){var scheduler=this;var pipelineMap=scheduler._pipelineMap=createHashMap();ecModel.eachSeries(function(seriesModel){var progressive=seriesModel.getProgressive();var pipelineId=seriesModel.uid;pipelineMap.set(pipelineId,{id:pipelineId,head:null,tail:null,threshold:seriesModel.getProgressiveThreshold(),progressiveEnabled:progressive&&!(seriesModel.preventIncremental&&seriesModel.preventIncremental()),blockIndex:-1,step:Math.round(progressive||700),count:0});pipe(scheduler,seriesModel,seriesModel.dataTask)})};proto.prepareStageTasks=function(){var stageTaskMap=this._stageTaskMap;var ecModel=this.ecInstance.getModel();var api=this.api;
each$1(this._allHandlers,function(handler){var record=stageTaskMap.get(handler.uid)||stageTaskMap.set(handler.uid,[]);handler.reset&&createSeriesStageTask(this,handler,record,ecModel,api);handler.overallReset&&createOverallStageTask(this,handler,record,ecModel,api)},this)};proto.prepareView=function(view,model,ecModel,api){var renderTask=view.renderTask;var context=renderTask.context;context.model=model;context.ecModel=ecModel;context.api=api;renderTask.__block=!view.incrementalPrepareRender;pipe(this,model,renderTask)};proto.performDataProcessorTasks=function(ecModel,payload){performStageTasks(this,this._dataProcessorHandlers,ecModel,payload,{block:true})};proto.performVisualTasks=function(ecModel,payload,opt){performStageTasks(this,this._visualHandlers,ecModel,payload,opt)};function performStageTasks(scheduler,stageHandlers,ecModel,payload,opt){opt=opt||{};var unfinished;each$1(stageHandlers,function(stageHandler,idx){if(opt.visualType&&opt.visualType!==stageHandler.visualType){return}var stageHandlerRecord=scheduler._stageTaskMap.get(stageHandler.uid);var seriesTaskMap=stageHandlerRecord.seriesTaskMap;var overallTask=stageHandlerRecord.overallTask;if(overallTask){var overallNeedDirty;var agentStubMap=overallTask.agentStubMap;agentStubMap.each(function(stub){if(needSetDirty(opt,stub)){stub.dirty();overallNeedDirty=true}});overallNeedDirty&&overallTask.dirty();updatePayload(overallTask,payload);var performArgs=scheduler.getPerformArgs(overallTask,opt.block);agentStubMap.each(function(stub){stub.perform(performArgs)});unfinished|=overallTask.perform(performArgs)}else{if(seriesTaskMap){seriesTaskMap.each(function(task,pipelineId){if(needSetDirty(opt,task)){task.dirty()}var performArgs=scheduler.getPerformArgs(task,opt.block);performArgs.skip=!stageHandler.performRawSeries&&ecModel.isSeriesFiltered(task.context.model);updatePayload(task,payload);unfinished|=task.perform(performArgs)})}}});function needSetDirty(opt,task){return opt.setDirty&&(!opt.dirtyMap||opt.dirtyMap.get(task.__pipeline.id))
}scheduler.unfinished|=unfinished}proto.performSeriesTasks=function(ecModel){var unfinished;ecModel.eachSeries(function(seriesModel){unfinished|=seriesModel.dataTask.perform()});this.unfinished|=unfinished};proto.plan=function(){this._pipelineMap.each(function(pipeline){var task=pipeline.tail;do{if(task.__block){pipeline.blockIndex=task.__idxInPipeline;break}task=task.getUpstream()}while(task)})};var updatePayload=proto.updatePayload=function(task,payload){payload!=="remain"&&(task.context.payload=payload)};function createSeriesStageTask(scheduler,stageHandler,stageHandlerRecord,ecModel,api){var seriesTaskMap=stageHandlerRecord.seriesTaskMap||(stageHandlerRecord.seriesTaskMap=createHashMap());var seriesType=stageHandler.seriesType;var getTargetSeries=stageHandler.getTargetSeries;if(stageHandler.createOnAllSeries){ecModel.eachRawSeries(create)}else{if(seriesType){ecModel.eachRawSeriesByType(seriesType,create)}else{if(getTargetSeries){getTargetSeries(ecModel,api).each(create)}}}function create(seriesModel){var pipelineId=seriesModel.uid;var task=seriesTaskMap.get(pipelineId)||seriesTaskMap.set(pipelineId,createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));task.context={model:seriesModel,ecModel:ecModel,api:api,useClearVisual:stageHandler.isVisual&&!stageHandler.isLayout,plan:stageHandler.plan,reset:stageHandler.reset,scheduler:scheduler};pipe(scheduler,seriesModel,task)}var pipelineMap=scheduler._pipelineMap;seriesTaskMap.each(function(task,pipelineId){if(!pipelineMap.get(pipelineId)){task.dispose();seriesTaskMap.removeKey(pipelineId)}})}function createOverallStageTask(scheduler,stageHandler,stageHandlerRecord,ecModel,api){var overallTask=stageHandlerRecord.overallTask=stageHandlerRecord.overallTask||createTask({reset:overallTaskReset});overallTask.context={ecModel:ecModel,api:api,overallReset:stageHandler.overallReset,scheduler:scheduler};var agentStubMap=overallTask.agentStubMap=overallTask.agentStubMap||createHashMap();var seriesType=stageHandler.seriesType;
var getTargetSeries=stageHandler.getTargetSeries;var overallProgress=true;var modifyOutputEnd=stageHandler.modifyOutputEnd;if(seriesType){ecModel.eachRawSeriesByType(seriesType,createStub)}else{if(getTargetSeries){getTargetSeries(ecModel,api).each(createStub)}else{overallProgress=false;each$1(ecModel.getSeries(),createStub)}}function createStub(seriesModel){var pipelineId=seriesModel.uid;var stub=agentStubMap.get(pipelineId);if(!stub){stub=agentStubMap.set(pipelineId,createTask({reset:stubReset,onDirty:stubOnDirty}));overallTask.dirty()}stub.context={model:seriesModel,overallProgress:overallProgress,modifyOutputEnd:modifyOutputEnd};stub.agent=overallTask;stub.__block=overallProgress;pipe(scheduler,seriesModel,stub)}var pipelineMap=scheduler._pipelineMap;agentStubMap.each(function(stub,pipelineId){if(!pipelineMap.get(pipelineId)){stub.dispose();overallTask.dirty();agentStubMap.removeKey(pipelineId)}})}function overallTaskReset(context){context.overallReset(context.ecModel,context.api,context.payload)}function stubReset(context,upstreamContext){return context.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty();this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(context){return context.plan&&context.plan(context.model,context.ecModel,context.api,context.payload)}function seriesTaskReset(context){if(context.useClearVisual){context.data.clearAllVisual()}var resetDefines=context.resetDefines=normalizeToArray(context.reset(context.model,context.ecModel,context.api,context.payload));return resetDefines.length>1?map(resetDefines,function(v,idx){return makeSeriesTaskProgress(idx)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(resetDefineIdx){return function(params,context){var data=context.data;var resetDefine=context.resetDefines[resetDefineIdx];if(resetDefine&&resetDefine.dataEach){for(var i=params.start;i<params.end;i++){resetDefine.dataEach(data,i)
}}else{if(resetDefine&&resetDefine.progress){resetDefine.progress(params,data)}}}}function seriesTaskCount(context){return context.data.count()}function pipe(scheduler,seriesModel,task){var pipelineId=seriesModel.uid;var pipeline=scheduler._pipelineMap.get(pipelineId);!pipeline.head&&(pipeline.head=task);pipeline.tail&&pipeline.tail.pipe(task);pipeline.tail=task;task.__idxInPipeline=pipeline.count++;task.__pipeline=pipeline}Scheduler.wrapStageHandler=function(stageHandler,visualType){if(isFunction$1(stageHandler)){stageHandler={overallReset:stageHandler,seriesType:detectSeriseType(stageHandler)}}stageHandler.uid=getUID("stageHandler");visualType&&(stageHandler.visualType=visualType);return stageHandler};function detectSeriseType(legacyFunc){seriesType=null;try{legacyFunc(ecModelMock,apiMock)}catch(e){}return seriesType}var ecModelMock={};var apiMock={};var seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(type){seriesType=type};ecModelMock.eachComponent=function(cond){if(cond.mainType==="series"&&cond.subType){seriesType=cond.subType}};function mockMethods(target,Clz){for(var name in Clz.prototype){target[name]=noop}}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];var lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#eee";var axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},axisTick:{lineStyle:{color:contrastColor}},axisLabel:{textStyle:{color:contrastColor}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:contrastColor}}}};var colorPalette=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"];
var theme={color:colorPalette,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:contrastColor},crossStyle:{color:contrastColor}}},legend:{textStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:contrastColor}},toolbox:{iconStyle:{normal:{borderColor:contrastColor}}},dataZoom:{textStyle:{color:contrastColor}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},itemStyle:{normal:{color:colorPalette[1]}},label:{normal:{textStyle:{color:contrastColor}}},controlStyle:{normal:{color:contrastColor,borderColor:contrastColor}}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{textStyle:{color:contrastColor}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};theme.categoryAxis.splitLine.show=false;ComponentModel.extend({type:"dataset",defaultOption:{seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){detectSourceFormat(this)}});Component.extend({type:"dataset"});var Ellipse=Path.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(ctx,shape){var k=0.5522848;var x=shape.cx;var y=shape.cy;var a=shape.rx;var b=shape.ry;var ox=a*k;var oy=b*k;ctx.moveTo(x-a,y);ctx.bezierCurveTo(x-a,y-oy,x-ox,y-b,x,y-b);ctx.bezierCurveTo(x+ox,y-b,x+a,y-oy,x+a,y);ctx.bezierCurveTo(x+a,y+oy,x+ox,y+b,x,y+b);ctx.bezierCurveTo(x-ox,y+b,x-a,y+oy,x-a,y);ctx.closePath()}});var DILIMITER_REG=/[\s,]+/;function parseXML(svg){if(isString(svg)){var parser=new DOMParser();svg=parser.parseFromString(svg,"text/xml")}if(svg.nodeType===9){svg=svg.firstChild}while(svg.nodeName.toLowerCase()!=="svg"||svg.nodeType!==1){svg=svg.nextSibling}return svg}function SVGParser(){this._defs={};this._root=null;this._isDefine=false;this._isText=false}SVGParser.prototype.parse=function(xml,opt){opt=opt||{};var svg=parseXML(xml);
if(!svg){throw new Error("Illegal svg")}var root=new Group();this._root=root;var viewBox=svg.getAttribute("viewBox")||"";var width=parseFloat(svg.getAttribute("width")||opt.width);var height=parseFloat(svg.getAttribute("height")||opt.height);isNaN(width)&&(width=null);isNaN(height)&&(height=null);parseAttributes(svg,root,null,true);var child=svg.firstChild;while(child){this._parseNode(child,root);child=child.nextSibling}var viewBoxRect;var viewBoxTransform;if(viewBox){var viewBoxArr=trim(viewBox).split(DILIMITER_REG);if(viewBoxArr.length>=4){viewBoxRect={x:parseFloat(viewBoxArr[0]||0),y:parseFloat(viewBoxArr[1]||0),width:parseFloat(viewBoxArr[2]),height:parseFloat(viewBoxArr[3])}}}if(viewBoxRect&&width!=null&&height!=null){viewBoxTransform=makeViewBoxTransform(viewBoxRect,width,height);if(!opt.ignoreViewBox){var elRoot=root;root=new Group();root.add(elRoot);elRoot.scale=viewBoxTransform.scale.slice();elRoot.position=viewBoxTransform.position.slice()}}if(!opt.ignoreRootClip&&width!=null&&height!=null){root.setClipPath(new Rect({shape:{x:0,y:0,width:width,height:height}}))}return{root:root,width:width,height:height,viewBoxRect:viewBoxRect,viewBoxTransform:viewBoxTransform}};SVGParser.prototype._parseNode=function(xmlNode,parentGroup){var nodeName=xmlNode.nodeName.toLowerCase();if(nodeName==="defs"){this._isDefine=true}else{if(nodeName==="text"){this._isText=true}}var el;if(this._isDefine){var parser=defineParsers[nodeName];if(parser){var def=parser.call(this,xmlNode);var id=xmlNode.getAttribute("id");if(id){this._defs[id]=def}}}else{var parser=nodeParsers[nodeName];if(parser){el=parser.call(this,xmlNode,parentGroup);parentGroup.add(el)}}var child=xmlNode.firstChild;while(child){if(child.nodeType===1){this._parseNode(child,el)}if(child.nodeType===3&&this._isText){this._parseText(child,el)}child=child.nextSibling}if(nodeName==="defs"){this._isDefine=false}else{if(nodeName==="text"){this._isText=false}}};SVGParser.prototype._parseText=function(xmlNode,parentGroup){if(xmlNode.nodeType===1){var dx=xmlNode.getAttribute("dx")||0;
var dy=xmlNode.getAttribute("dy")||0;this._textX+=parseFloat(dx);this._textY+=parseFloat(dy)}var text=new Text({style:{text:xmlNode.textContent,transformText:true},position:[this._textX||0,this._textY||0]});inheritStyle(parentGroup,text);parseAttributes(xmlNode,text,this._defs);var fontSize=text.style.fontSize;if(fontSize&&fontSize<9){text.style.fontSize=9;text.scale=text.scale||[1,1];text.scale[0]*=fontSize/9;text.scale[1]*=fontSize/9}var rect=text.getBoundingRect();this._textX+=rect.width;parentGroup.add(text);return text};var nodeParsers={"g":function(xmlNode,parentGroup){var g=new Group();inheritStyle(parentGroup,g);parseAttributes(xmlNode,g,this._defs);return g},"rect":function(xmlNode,parentGroup){var rect=new Rect();inheritStyle(parentGroup,rect);parseAttributes(xmlNode,rect,this._defs);rect.setShape({x:parseFloat(xmlNode.getAttribute("x")||0),y:parseFloat(xmlNode.getAttribute("y")||0),width:parseFloat(xmlNode.getAttribute("width")||0),height:parseFloat(xmlNode.getAttribute("height")||0)});return rect},"circle":function(xmlNode,parentGroup){var circle=new Circle();inheritStyle(parentGroup,circle);parseAttributes(xmlNode,circle,this._defs);circle.setShape({cx:parseFloat(xmlNode.getAttribute("cx")||0),cy:parseFloat(xmlNode.getAttribute("cy")||0),r:parseFloat(xmlNode.getAttribute("r")||0)});return circle},"line":function(xmlNode,parentGroup){var line=new Line();inheritStyle(parentGroup,line);parseAttributes(xmlNode,line,this._defs);line.setShape({x1:parseFloat(xmlNode.getAttribute("x1")||0),y1:parseFloat(xmlNode.getAttribute("y1")||0),x2:parseFloat(xmlNode.getAttribute("x2")||0),y2:parseFloat(xmlNode.getAttribute("y2")||0)});return line},"ellipse":function(xmlNode,parentGroup){var ellipse=new Ellipse();inheritStyle(parentGroup,ellipse);parseAttributes(xmlNode,ellipse,this._defs);ellipse.setShape({cx:parseFloat(xmlNode.getAttribute("cx")||0),cy:parseFloat(xmlNode.getAttribute("cy")||0),rx:parseFloat(xmlNode.getAttribute("rx")||0),ry:parseFloat(xmlNode.getAttribute("ry")||0)});
return ellipse},"polygon":function(xmlNode,parentGroup){var points=xmlNode.getAttribute("points");if(points){points=parsePoints(points)}var polygon=new Polygon({shape:{points:points||[]}});inheritStyle(parentGroup,polygon);parseAttributes(xmlNode,polygon,this._defs);return polygon},"polyline":function(xmlNode,parentGroup){var path=new Path();inheritStyle(parentGroup,path);parseAttributes(xmlNode,path,this._defs);var points=xmlNode.getAttribute("points");if(points){points=parsePoints(points)}var polyline=new Polyline({shape:{points:points||[]}});return polyline},"image":function(xmlNode,parentGroup){var img=new ZImage();inheritStyle(parentGroup,img);parseAttributes(xmlNode,img,this._defs);img.setStyle({image:xmlNode.getAttribute("xlink:href"),x:xmlNode.getAttribute("x"),y:xmlNode.getAttribute("y"),width:xmlNode.getAttribute("width"),height:xmlNode.getAttribute("height")});return img},"text":function(xmlNode,parentGroup){var x=xmlNode.getAttribute("x")||0;var y=xmlNode.getAttribute("y")||0;var dx=xmlNode.getAttribute("dx")||0;var dy=xmlNode.getAttribute("dy")||0;this._textX=parseFloat(x)+parseFloat(dx);this._textY=parseFloat(y)+parseFloat(dy);var g=new Group();inheritStyle(parentGroup,g);parseAttributes(xmlNode,g,this._defs);return g},"tspan":function(xmlNode,parentGroup){var x=xmlNode.getAttribute("x");var y=xmlNode.getAttribute("y");if(x!=null){this._textX=parseFloat(x)}if(y!=null){this._textY=parseFloat(y)}var dx=xmlNode.getAttribute("dx")||0;var dy=xmlNode.getAttribute("dy")||0;var g=new Group();inheritStyle(parentGroup,g);parseAttributes(xmlNode,g,this._defs);this._textX+=dx;this._textY+=dy;return g},"path":function(xmlNode,parentGroup){var d=xmlNode.getAttribute("d")||"";var path=createFromString(d);inheritStyle(parentGroup,path);parseAttributes(xmlNode,path,this._defs);return path}};var defineParsers={"lineargradient":function(xmlNode){var x1=parseInt(xmlNode.getAttribute("x1")||0,10);var y1=parseInt(xmlNode.getAttribute("y1")||0,10);var x2=parseInt(xmlNode.getAttribute("x2")||10,10);
var y2=parseInt(xmlNode.getAttribute("y2")||0,10);var gradient=new LinearGradient(x1,y1,x2,y2);_parseGradientColorStops(xmlNode,gradient);return gradient},"radialgradient":function(xmlNode){}};function _parseGradientColorStops(xmlNode,gradient){var stop=xmlNode.firstChild;while(stop){if(stop.nodeType===1){var offset=stop.getAttribute("offset");if(offset.indexOf("%")>0){offset=parseInt(offset,10)/100}else{if(offset){offset=parseFloat(offset)}else{offset=0}}var stopColor=stop.getAttribute("stop-color")||"#000000";gradient.addColorStop(offset,stopColor)}stop=stop.nextSibling}}function inheritStyle(parent,child){if(parent&&parent.__inheritedStyle){if(!child.__inheritedStyle){child.__inheritedStyle={}}defaults(child.__inheritedStyle,parent.__inheritedStyle)}}function parsePoints(pointsString){var list=trim(pointsString).split(DILIMITER_REG);var points=[];for(var i=0;i<list.length;i+=2){var x=parseFloat(list[i]);var y=parseFloat(list[i+1]);points.push([x,y])}return points}var attributesMap={"fill":"fill","stroke":"stroke","stroke-width":"lineWidth","opacity":"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function parseAttributes(xmlNode,el,defs,onlyInlineStyle){var zrStyle=el.__inheritedStyle||{};var isTextEl=el.type==="text";if(xmlNode.nodeType===1){parseTransformAttribute(xmlNode,el);extend(zrStyle,parseStyleAttribute(xmlNode));if(!onlyInlineStyle){for(var svgAttrName in attributesMap){if(attributesMap.hasOwnProperty(svgAttrName)){var attrValue=xmlNode.getAttribute(svgAttrName);if(attrValue!=null){zrStyle[attributesMap[svgAttrName]]=attrValue}}}}}var elFillProp=isTextEl?"textFill":"fill";var elStrokeProp=isTextEl?"textStroke":"stroke";
el.style=el.style||new Style();var elStyle=el.style;zrStyle.fill!=null&&elStyle.set(elFillProp,getPaint(zrStyle.fill,defs));zrStyle.stroke!=null&&elStyle.set(elStrokeProp,getPaint(zrStyle.stroke,defs));each$1(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(propName){var elPropName=(propName==="lineWidth"&&isTextEl)?"textStrokeWidth":propName;zrStyle[propName]!=null&&elStyle.set(elPropName,parseFloat(zrStyle[propName]))});if(!zrStyle.textBaseline||zrStyle.textBaseline==="auto"){zrStyle.textBaseline="alphabetic"}if(zrStyle.textBaseline==="alphabetic"){zrStyle.textBaseline="bottom"}if(zrStyle.textAlign==="start"){zrStyle.textAlign="left"}if(zrStyle.textAlign==="end"){zrStyle.textAlign="right"}each$1(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(propName){zrStyle[propName]!=null&&elStyle.set(propName,zrStyle[propName])});if(zrStyle.lineDash){el.style.lineDash=trim(zrStyle.lineDash).split(DILIMITER_REG)}if(elStyle[elStrokeProp]&&elStyle[elStrokeProp]!=="none"){el[elStrokeProp]=true}el.__inheritedStyle=zrStyle}var urlRegex=/url\(\s*#(.*?)\)/;function getPaint(str,defs){var urlMatch=defs&&str&&str.match(urlRegex);if(urlMatch){var url=trim(urlMatch[1]);var def=defs[url];return def}return str}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;function parseTransformAttribute(xmlNode,node){var transform=xmlNode.getAttribute("transform");if(transform){transform=transform.replace(/,/g," ");var m=null;var transformOps=[];transform.replace(transformRegex,function(str,type,value){transformOps.push(type,value)});for(var i=transformOps.length-1;i>0;i-=2){var value=transformOps[i];var type=transformOps[i-1];m=m||create$1();switch(type){case"translate":value=trim(value).split(DILIMITER_REG);translate(m,m,[parseFloat(value[0]),parseFloat(value[1]||0)]);break;case"scale":value=trim(value).split(DILIMITER_REG);scale$1(m,m,[parseFloat(value[0]),parseFloat(value[1]||value[0])]);
break;case"rotate":value=trim(value).split(DILIMITER_REG);rotate(m,m,parseFloat(value[0]));break;case"skew":value=trim(value).split(DILIMITER_REG);console.warn("Skew transform is not supported yet");break;case"matrix":var value=trim(value).split(DILIMITER_REG);m[0]=parseFloat(value[0]);m[1]=parseFloat(value[1]);m[2]=parseFloat(value[2]);m[3]=parseFloat(value[3]);m[4]=parseFloat(value[4]);m[5]=parseFloat(value[5]);break}}node.setLocalTransform(m)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseStyleAttribute(xmlNode){var style=xmlNode.getAttribute("style");var result={};if(!style){return result}var styleList={};styleRegex.lastIndex=0;var styleRegResult;while((styleRegResult=styleRegex.exec(style))!=null){styleList[styleRegResult[1]]=styleRegResult[2]}for(var svgAttrName in attributesMap){if(attributesMap.hasOwnProperty(svgAttrName)&&styleList[svgAttrName]!=null){result[attributesMap[svgAttrName]]=styleList[svgAttrName]}}return result}function makeViewBoxTransform(viewBoxRect,width,height){var scaleX=width/viewBoxRect.width;var scaleY=height/viewBoxRect.height;var scale=Math.min(scaleX,scaleY);var viewBoxScale=[scale,scale];var viewBoxPosition=[-(viewBoxRect.x+viewBoxRect.width/2)*scale+width/2,-(viewBoxRect.y+viewBoxRect.height/2)*scale+height/2];return{scale:viewBoxScale,position:viewBoxPosition}}function parseSVG(xml,opt){var parser=new SVGParser();return parser.parse(xml,opt)}var storage=createHashMap();var mapDataStorage={registerMap:function(mapName,rawGeoJson,rawSpecialAreas){var records;if(isArray(rawGeoJson)){records=rawGeoJson}else{if(rawGeoJson.svg){records=[{type:"svg",source:rawGeoJson.svg,specialAreas:rawGeoJson.specialAreas}]}else{if(rawGeoJson.geoJson&&!rawGeoJson.features){rawSpecialAreas=rawGeoJson.specialAreas;rawGeoJson=rawGeoJson.geoJson}records=[{type:"geoJSON",source:rawGeoJson,specialAreas:rawSpecialAreas}]}}each$1(records,function(record){var type=record.type;type==="geoJson"&&(type=record.type="geoJSON");var parse=parsers[type];if(__DEV__){assert$1(parse,"Illegal map type: "+type)
}parse(record)});return storage.set(mapName,records)},retrieveMap:function(mapName){return storage.get(mapName)}};var parsers={geoJSON:function(record){var source=record.source;record.geoJSON=!isString(source)?source:(typeof JSON!=="undefined"&&JSON.parse)?JSON.parse(source):(new Function("return ("+source+");"))()},svg:function(record){record.svgXML=parseXML(record.source)}};var assert=assert$1;var each=each$1;var isFunction=isFunction$1;var isObject=isObject$1;var parseClassType=ComponentModel.parseClassType;var version="4.2.1";var dependencies={zrender:"4.0.6"};var TEST_FRAME_REMAIN_TIME=1;var PRIORITY_PROCESSOR_FILTER=1000;var PRIORITY_PROCESSOR_STATISTIC=5000;var PRIORITY_VISUAL_LAYOUT=1000;var PRIORITY_VISUAL_GLOBAL=2000;var PRIORITY_VISUAL_CHART=3000;var PRIORITY_VISUAL_COMPONENT=4000;var PRIORITY_VISUAL_BRUSH=5000;var PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH}};var IN_MAIN_PROCESS="__flagInMainProcess";var OPTION_UPDATED="__optionUpdated";var ACTION_REG=/^[a-zA-Z0-9_]+$/;function createRegisterEventWithLowercaseName(method){return function(eventName,handler,context){eventName=eventName&&eventName.toLowerCase();Eventful.prototype[method].call(this,eventName,handler,context)}}function MessageCenter(){Eventful.call(this)}MessageCenter.prototype.on=createRegisterEventWithLowercaseName("on");MessageCenter.prototype.off=createRegisterEventWithLowercaseName("off");MessageCenter.prototype.one=createRegisterEventWithLowercaseName("one");mixin(MessageCenter,Eventful);function ECharts(dom,theme$$1,opts){opts=opts||{};if(typeof theme$$1==="string"){theme$$1=themeStorage[theme$$1]}this.id;this.group;this._dom=dom;var defaultRenderer="canvas";if(__DEV__){defaultRenderer=(typeof window==="undefined"?global:window).__ECHARTS__DEFAULT__RENDERER__||defaultRenderer}var zr=this._zr=init$1(dom,{renderer:opts.renderer||defaultRenderer,devicePixelRatio:opts.devicePixelRatio,width:opts.width,height:opts.height});
this._throttledZrFlush=throttle(bind(zr.flush,zr),17);var theme$$1=clone(theme$$1);theme$$1&&backwardCompat(theme$$1,true);this._theme=theme$$1;this._chartsViews=[];this._chartsMap={};this._componentsViews=[];this._componentsMap={};this._coordSysMgr=new CoordinateSystemManager();var api=this._api=createExtensionAPI(this);function prioritySortFunc(a,b){return a.__prio-b.__prio}sort(visualFuncs,prioritySortFunc);sort(dataProcessorFuncs,prioritySortFunc);this._scheduler=new Scheduler(this,api,dataProcessorFuncs,visualFuncs);Eventful.call(this,this._ecEventProcessor=new EventProcessor());this._messageCenter=new MessageCenter();this._initEvents();this.resize=bind(this.resize,this);this._pendingActions=[];zr.animation.on("frame",this._onframe,this);bindRenderedEvent(zr,this);setAsPrimitive(this)}var echartsProto=ECharts.prototype;echartsProto._onframe=function(){if(this._disposed){return}var scheduler=this._scheduler;if(this[OPTION_UPDATED]){var silent=this[OPTION_UPDATED].silent;this[IN_MAIN_PROCESS]=true;prepare(this);updateMethods.update.call(this);this[IN_MAIN_PROCESS]=false;this[OPTION_UPDATED]=false;flushPendingActions.call(this,silent);triggerUpdatedEvent.call(this,silent)}else{if(scheduler.unfinished){var remainTime=TEST_FRAME_REMAIN_TIME;var ecModel=this._model;var api=this._api;scheduler.unfinished=false;do{var startTime=+new Date();scheduler.performSeriesTasks(ecModel);scheduler.performDataProcessorTasks(ecModel);updateStreamModes(this,ecModel);scheduler.performVisualTasks(ecModel);renderSeries(this,this._model,api,"remain");remainTime-=(+new Date()-startTime)}while(remainTime>0&&scheduler.unfinished);if(!scheduler.unfinished){this._zr.flush()}}}};echartsProto.getDom=function(){return this._dom};echartsProto.getZr=function(){return this._zr};echartsProto.setOption=function(option,notMerge,lazyUpdate){if(__DEV__){assert(!this[IN_MAIN_PROCESS],"`setOption` should not be called during main process.")}var silent;if(isObject(notMerge)){lazyUpdate=notMerge.lazyUpdate;
silent=notMerge.silent;notMerge=notMerge.notMerge}this[IN_MAIN_PROCESS]=true;if(!this._model||notMerge){var optionManager=new OptionManager(this._api);var theme$$1=this._theme;var ecModel=this._model=new GlobalModel(null,null,theme$$1,optionManager);ecModel.scheduler=this._scheduler;ecModel.init(null,null,theme$$1,optionManager)}this._model.setOption(option,optionPreprocessorFuncs);if(lazyUpdate){this[OPTION_UPDATED]={silent:silent};this[IN_MAIN_PROCESS]=false}else{prepare(this);updateMethods.update.call(this);this._zr.flush();this[OPTION_UPDATED]=false;this[IN_MAIN_PROCESS]=false;flushPendingActions.call(this,silent);triggerUpdatedEvent.call(this,silent)}};echartsProto.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")};echartsProto.getModel=function(){return this._model};echartsProto.getOption=function(){return this._model&&this._model.getOption()};echartsProto.getWidth=function(){return this._zr.getWidth()};echartsProto.getHeight=function(){return this._zr.getHeight()};echartsProto.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1};echartsProto.getRenderedCanvas=function(opts){if(!env$1.canvasSupported){return}opts=opts||{};opts.pixelRatio=opts.pixelRatio||1;opts.backgroundColor=opts.backgroundColor||this._model.get("backgroundColor");var zr=this._zr;return zr.painter.getRenderedCanvas(opts)};echartsProto.getSvgDataUrl=function(){if(!env$1.svgSupported){return}var zr=this._zr;var list=zr.storage.getDisplayList();each$1(list,function(el){el.stopAnimation(true)});return zr.painter.pathToDataUrl()};echartsProto.getDataURL=function(opts){opts=opts||{};var excludeComponents=opts.excludeComponents;var ecModel=this._model;var excludesComponentViews=[];var self=this;each(excludeComponents,function(componentType){ecModel.eachComponent({mainType:componentType},function(component){var view=self._componentsMap[component.__viewId];if(!view.group.ignore){excludesComponentViews.push(view);view.group.ignore=true
}})});var url=this._zr.painter.getType()==="svg"?this.getSvgDataUrl():this.getRenderedCanvas(opts).toDataURL("image/"+(opts&&opts.type||"png"));each(excludesComponentViews,function(view){view.group.ignore=false});return url};echartsProto.getConnectedDataURL=function(opts){if(!env$1.canvasSupported){return}var groupId=this.group;var mathMin=Math.min;var mathMax=Math.max;var MAX_NUMBER=Infinity;if(connectedGroups[groupId]){var left=MAX_NUMBER;var top=MAX_NUMBER;var right=-MAX_NUMBER;var bottom=-MAX_NUMBER;var canvasList=[];var dpr=(opts&&opts.pixelRatio)||1;each$1(instances,function(chart,id){if(chart.group===groupId){var canvas=chart.getRenderedCanvas(clone(opts));var boundingRect=chart.getDom().getBoundingClientRect();left=mathMin(boundingRect.left,left);top=mathMin(boundingRect.top,top);right=mathMax(boundingRect.right,right);bottom=mathMax(boundingRect.bottom,bottom);canvasList.push({dom:canvas,left:boundingRect.left,top:boundingRect.top})}});left*=dpr;top*=dpr;right*=dpr;bottom*=dpr;var width=right-left;var height=bottom-top;var targetCanvas=createCanvas();targetCanvas.width=width;targetCanvas.height=height;var zr=init$1(targetCanvas);each(canvasList,function(item){var img=new ZImage({style:{x:item.left*dpr-left,y:item.top*dpr-top,image:item.dom}});zr.add(img)});zr.refreshImmediately();return targetCanvas.toDataURL("image/"+(opts&&opts.type||"png"))}else{return this.getDataURL(opts)}};echartsProto.convertToPixel=curry(doConvertPixel,"convertToPixel");echartsProto.convertFromPixel=curry(doConvertPixel,"convertFromPixel");function doConvertPixel(methodName,finder,value){var ecModel=this._model;var coordSysList=this._coordSysMgr.getCoordinateSystems();var result;finder=parseFinder(ecModel,finder);for(var i=0;i<coordSysList.length;i++){var coordSys=coordSysList[i];if(coordSys[methodName]&&(result=coordSys[methodName](ecModel,finder,value))!=null){return result}}if(__DEV__){console.warn("No coordinate system that supports "+methodName+" found by the given finder.")}}echartsProto.containPixel=function(finder,value){var ecModel=this._model;
var result;finder=parseFinder(ecModel,finder);each$1(finder,function(models,key){key.indexOf("Models")>=0&&each$1(models,function(model){var coordSys=model.coordinateSystem;if(coordSys&&coordSys.containPoint){result|=!!coordSys.containPoint(value)}else{if(key==="seriesModels"){var view=this._chartsMap[model.__viewId];if(view&&view.containPoint){result|=view.containPoint(value,model)}else{if(__DEV__){console.warn(key+": "+(view?"The found component do not support containPoint.":"No view mapping to the found component."))}}}else{if(__DEV__){console.warn(key+": containPoint is not supported")}}}},this)},this);return !!result};echartsProto.getVisual=function(finder,visualType){var ecModel=this._model;finder=parseFinder(ecModel,finder,{defaultMainType:"series"});var seriesModel=finder.seriesModel;if(__DEV__){if(!seriesModel){console.warn("There is no specified seires model")}}var data=seriesModel.getData();var dataIndexInside=finder.hasOwnProperty("dataIndexInside")?finder.dataIndexInside:finder.hasOwnProperty("dataIndex")?data.indexOfRawIndex(finder.dataIndex):null;return dataIndexInside!=null?data.getItemVisual(dataIndexInside,visualType):data.getVisual(visualType)};echartsProto.getViewOfComponentModel=function(componentModel){return this._componentsMap[componentModel.__viewId]};echartsProto.getViewOfSeriesModel=function(seriesModel){return this._chartsMap[seriesModel.__viewId]};var updateMethods={prepareAndUpdate:function(payload){prepare(this);updateMethods.update.call(this,payload)},update:function(payload){var ecModel=this._model;var api=this._api;var zr=this._zr;var coordSysMgr=this._coordSysMgr;var scheduler=this._scheduler;if(!ecModel){return}scheduler.restoreData(ecModel,payload);scheduler.performSeriesTasks(ecModel);coordSysMgr.create(ecModel,api);scheduler.performDataProcessorTasks(ecModel,payload);updateStreamModes(this,ecModel);coordSysMgr.update(ecModel,api);clearColorPalette(ecModel);scheduler.performVisualTasks(ecModel,payload);render(this,ecModel,api,payload);
var backgroundColor=ecModel.get("backgroundColor")||"transparent";if(!env$1.canvasSupported){var colorArr=parse(backgroundColor);backgroundColor=stringify(colorArr,"rgb");if(colorArr[3]===0){backgroundColor="transparent"}}else{zr.setBackgroundColor(backgroundColor)}performPostUpdateFuncs(ecModel,api)},updateTransform:function(payload){var ecModel=this._model;var ecIns=this;var api=this._api;if(!ecModel){return}var componentDirtyList=[];ecModel.eachComponent(function(componentType,componentModel){var componentView=ecIns.getViewOfComponentModel(componentModel);if(componentView&&componentView.__alive){if(componentView.updateTransform){var result=componentView.updateTransform(componentModel,ecModel,api,payload);result&&result.update&&componentDirtyList.push(componentView)}else{componentDirtyList.push(componentView)}}});var seriesDirtyMap=createHashMap();ecModel.eachSeries(function(seriesModel){var chartView=ecIns._chartsMap[seriesModel.__viewId];if(chartView.updateTransform){var result=chartView.updateTransform(seriesModel,ecModel,api,payload);result&&result.update&&seriesDirtyMap.set(seriesModel.uid,1)}else{seriesDirtyMap.set(seriesModel.uid,1)}});clearColorPalette(ecModel);this._scheduler.performVisualTasks(ecModel,payload,{setDirty:true,dirtyMap:seriesDirtyMap});renderSeries(ecIns,ecModel,api,payload,seriesDirtyMap);performPostUpdateFuncs(ecModel,this._api)},updateView:function(payload){var ecModel=this._model;if(!ecModel){return}Chart.markUpdateMethod(payload,"updateView");clearColorPalette(ecModel);this._scheduler.performVisualTasks(ecModel,payload,{setDirty:true});render(this,this._model,this._api,payload);performPostUpdateFuncs(ecModel,this._api)},updateVisual:function(payload){updateMethods.update.call(this,payload)},updateLayout:function(payload){updateMethods.update.call(this,payload)}};function prepare(ecIns){var ecModel=ecIns._model;var scheduler=ecIns._scheduler;scheduler.restorePipelines(ecModel);scheduler.prepareStageTasks();prepareView(ecIns,"component",ecModel,scheduler);
prepareView(ecIns,"chart",ecModel,scheduler);scheduler.plan()}function updateDirectly(ecIns,method,payload,mainType,subType){var ecModel=ecIns._model;if(!mainType){each(ecIns._componentsViews.concat(ecIns._chartsViews),callView);return}var query={};query[mainType+"Id"]=payload[mainType+"Id"];query[mainType+"Index"]=payload[mainType+"Index"];query[mainType+"Name"]=payload[mainType+"Name"];var condition={mainType:mainType,query:query};subType&&(condition.subType=subType);var excludeSeriesId=payload.excludeSeriesId;if(excludeSeriesId!=null){excludeSeriesId=createHashMap(normalizeToArray(excludeSeriesId))}ecModel&&ecModel.eachComponent(condition,function(model){if(!excludeSeriesId||excludeSeriesId.get(model.id)==null){callView(ecIns[mainType==="series"?"_chartsMap":"_componentsMap"][model.__viewId])}},ecIns);function callView(view){view&&view.__alive&&view[method]&&view[method](view.__model,ecModel,ecIns._api,payload)}}echartsProto.resize=function(opts){if(__DEV__){assert(!this[IN_MAIN_PROCESS],"`resize` should not be called during main process.")}this._zr.resize(opts);var ecModel=this._model;this._loadingFX&&this._loadingFX.resize();if(!ecModel){return}var optionChanged=ecModel.resetOption("media");var silent=opts&&opts.silent;this[IN_MAIN_PROCESS]=true;optionChanged&&prepare(this);updateMethods.update.call(this);this[IN_MAIN_PROCESS]=false;flushPendingActions.call(this,silent);triggerUpdatedEvent.call(this,silent)};function updateStreamModes(ecIns,ecModel){var chartsMap=ecIns._chartsMap;var scheduler=ecIns._scheduler;ecModel.eachSeries(function(seriesModel){scheduler.updateStreamModes(seriesModel,chartsMap[seriesModel.__viewId])})}echartsProto.showLoading=function(name,cfg){if(isObject(name)){cfg=name;name=""}name=name||"default";this.hideLoading();if(!loadingEffects[name]){if(__DEV__){console.warn("Loading effects "+name+" not exists.")}return}var el=loadingEffects[name](this._api,cfg);var zr=this._zr;this._loadingFX=el;zr.add(el)};echartsProto.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX);
this._loadingFX=null};echartsProto.makeActionFromEvent=function(eventObj){var payload=extend({},eventObj);payload.type=eventActionMap[eventObj.type];return payload};echartsProto.dispatchAction=function(payload,opt){if(!isObject(opt)){opt={silent:!!opt}}if(!actions[payload.type]){return}if(!this._model){return}if(this[IN_MAIN_PROCESS]){this._pendingActions.push(payload);return}doDispatchAction.call(this,payload,opt.silent);if(opt.flush){this._zr.flush(true)}else{if(opt.flush!==false&&env$1.browser.weChat){this._throttledZrFlush()}}flushPendingActions.call(this,opt.silent);triggerUpdatedEvent.call(this,opt.silent)};function doDispatchAction(payload,silent){var payloadType=payload.type;var escapeConnect=payload.escapeConnect;var actionWrap=actions[payloadType];var actionInfo=actionWrap.actionInfo;var cptType=(actionInfo.update||"update").split(":");var updateMethod=cptType.pop();cptType=cptType[0]!=null&&parseClassType(cptType[0]);this[IN_MAIN_PROCESS]=true;var payloads=[payload];var batched=false;if(payload.batch){batched=true;payloads=map(payload.batch,function(item){item=defaults(extend({},item),payload);item.batch=null;return item})}var eventObjBatch=[];var eventObj;var isHighDown=payloadType==="highlight"||payloadType==="downplay";each(payloads,function(batchItem){eventObj=actionWrap.action(batchItem,this._model,this._api);eventObj=eventObj||extend({},batchItem);eventObj.type=actionInfo.event||eventObj.type;eventObjBatch.push(eventObj);if(isHighDown){updateDirectly(this,updateMethod,batchItem,"series")}else{if(cptType){updateDirectly(this,updateMethod,batchItem,cptType.main,cptType.sub)}}},this);if(updateMethod!=="none"&&!isHighDown&&!cptType){if(this[OPTION_UPDATED]){prepare(this);updateMethods.update.call(this,payload);this[OPTION_UPDATED]=false}else{updateMethods[updateMethod].call(this,payload)}}if(batched){eventObj={type:actionInfo.event||payloadType,escapeConnect:escapeConnect,batch:eventObjBatch}}else{eventObj=eventObjBatch[0]}this[IN_MAIN_PROCESS]=false;!silent&&this._messageCenter.trigger(eventObj.type,eventObj)
}function flushPendingActions(silent){var pendingActions=this._pendingActions;while(pendingActions.length){var payload=pendingActions.shift();doDispatchAction.call(this,payload,silent)}}function triggerUpdatedEvent(silent){!silent&&this.trigger("updated")}function bindRenderedEvent(zr,ecIns){zr.on("rendered",function(){ecIns.trigger("rendered");if(zr.animation.isFinished()&&!ecIns[OPTION_UPDATED]&&!ecIns._scheduler.unfinished&&!ecIns._pendingActions.length){ecIns.trigger("finished")}})}echartsProto.appendData=function(params){var seriesIndex=params.seriesIndex;var ecModel=this.getModel();var seriesModel=ecModel.getSeriesByIndex(seriesIndex);if(__DEV__){assert(params.data&&seriesModel)}seriesModel.appendData(params);this._scheduler.unfinished=true};echartsProto.on=createRegisterEventWithLowercaseName("on");echartsProto.off=createRegisterEventWithLowercaseName("off");echartsProto.one=createRegisterEventWithLowercaseName("one");function prepareView(ecIns,type,ecModel,scheduler){var isComponent=type==="component";var viewList=isComponent?ecIns._componentsViews:ecIns._chartsViews;var viewMap=isComponent?ecIns._componentsMap:ecIns._chartsMap;var zr=ecIns._zr;var api=ecIns._api;for(var i=0;i<viewList.length;i++){viewList[i].__alive=false}isComponent?ecModel.eachComponent(function(componentType,model){componentType!=="series"&&doPrepare(model)}):ecModel.eachSeries(doPrepare);function doPrepare(model){var viewId="_ec_"+model.id+"_"+model.type;var view=viewMap[viewId];if(!view){var classType=parseClassType(model.type);var Clazz=isComponent?Component.getClass(classType.main,classType.sub):Chart.getClass(classType.sub);if(__DEV__){assert(Clazz,classType.sub+" does not exist.")}view=new Clazz();view.init(ecModel,api);viewMap[viewId]=view;viewList.push(view);zr.add(view.group)}model.__viewId=view.__id=viewId;view.__alive=true;view.__model=model;view.group.__ecComponentInfo={mainType:model.mainType,index:model.componentIndex};!isComponent&&scheduler.prepareView(view,model,ecModel,api)
}for(var i=0;i<viewList.length;){var view=viewList[i];if(!view.__alive){!isComponent&&view.renderTask.dispose();zr.remove(view.group);view.dispose(ecModel,api);viewList.splice(i,1);delete viewMap[view.__id];view.__id=view.group.__ecComponentInfo=null}else{i++}}}function clearColorPalette(ecModel){ecModel.clearColorPalette();ecModel.eachSeries(function(seriesModel){seriesModel.clearColorPalette()})}function render(ecIns,ecModel,api,payload){renderComponents(ecIns,ecModel,api,payload);each(ecIns._chartsViews,function(chart){chart.__alive=false});renderSeries(ecIns,ecModel,api,payload);each(ecIns._chartsViews,function(chart){if(!chart.__alive){chart.remove(ecModel,api)}})}function renderComponents(ecIns,ecModel,api,payload,dirtyList){each(dirtyList||ecIns._componentsViews,function(componentView){var componentModel=componentView.__model;componentView.render(componentModel,ecModel,api,payload);updateZ(componentModel,componentView)})}function renderSeries(ecIns,ecModel,api,payload,dirtyMap){var scheduler=ecIns._scheduler;var unfinished;ecModel.eachSeries(function(seriesModel){var chartView=ecIns._chartsMap[seriesModel.__viewId];chartView.__alive=true;var renderTask=chartView.renderTask;scheduler.updatePayload(renderTask,payload);if(dirtyMap&&dirtyMap.get(seriesModel.uid)){renderTask.dirty()}unfinished|=renderTask.perform(scheduler.getPerformArgs(renderTask));chartView.group.silent=!!seriesModel.get("silent");updateZ(seriesModel,chartView);updateBlend(seriesModel,chartView)});scheduler.unfinished|=unfinished;updateHoverLayerStatus(ecIns._zr,ecModel);aria(ecIns._zr.dom,ecModel)}function performPostUpdateFuncs(ecModel,api){each(postUpdateFuncs,function(func){func(ecModel,api)})}var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];echartsProto._initEvents=function(){each(MOUSE_EVENT_NAMES,function(eveName){var handler=function(e){var ecModel=this.getModel();var el=e.target;var params;var isGlobalOut=eveName==="globalout";
if(isGlobalOut){params={}}else{if(el&&el.dataIndex!=null){var dataModel=el.dataModel||ecModel.getSeriesByIndex(el.seriesIndex);params=dataModel&&dataModel.getDataParams(el.dataIndex,el.dataType,el)||{}}else{if(el&&el.eventData){params=extend({},el.eventData)}}}if(params){var componentType=params.componentType;var componentIndex=params.componentIndex;if(componentType==="markLine"||componentType==="markPoint"||componentType==="markArea"){componentType="series";componentIndex=params.seriesIndex}var model=componentType&&componentIndex!=null&&ecModel.getComponent(componentType,componentIndex);var view=model&&this[model.mainType==="series"?"_chartsMap":"_componentsMap"][model.__viewId];if(__DEV__){if(!isGlobalOut&&!(model&&view)){console.warn("model or view can not be found by params")}}params.event=e;params.type=eveName;this._ecEventProcessor.eventInfo={targetEl:el,packedEvent:params,model:model,view:view};this.trigger(eveName,params)}};handler.zrEventfulCallAtLast=true;this._zr.on(eveName,handler,this)},this);each(eventActionMap,function(actionType,eventType){this._messageCenter.on(eventType,function(event){this.trigger(eventType,event)},this)},this)};echartsProto.isDisposed=function(){return this._disposed};echartsProto.clear=function(){this.setOption({series:[]},true)};echartsProto.dispose=function(){if(this._disposed){if(__DEV__){console.warn("Instance "+this.id+" has been disposed")}return}this._disposed=true;setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var api=this._api;var ecModel=this._model;each(this._componentsViews,function(component){component.dispose(ecModel,api)});each(this._chartsViews,function(chart){chart.dispose(ecModel,api)});this._zr.dispose();delete instances[this.id]};mixin(ECharts,Eventful);function updateHoverLayerStatus(zr,ecModel){var storage=zr.storage;var elCount=0;storage.traverse(function(el){if(!el.isGroup){elCount++}});if(elCount>ecModel.get("hoverLayerThreshold")&&!env$1.node){storage.traverse(function(el){if(!el.isGroup){el.useHoverLayer=true
}})}}function updateBlend(seriesModel,chartView){var blendMode=seriesModel.get("blendMode")||null;if(__DEV__){if(!env$1.canvasSupported&&blendMode&&blendMode!=="source-over"){console.warn("Only canvas support blendMode")}}chartView.group.traverse(function(el){if(!el.isGroup){if(el.style.blend!==blendMode){el.setStyle("blend",blendMode)}}if(el.eachPendingDisplayable){el.eachPendingDisplayable(function(displayable){displayable.setStyle("blend",blendMode)})}})}function updateZ(model,view){var z=model.get("z");var zlevel=model.get("zlevel");view.group.traverse(function(el){if(el.type!=="group"){z!=null&&(el.z=z);zlevel!=null&&(el.zlevel=zlevel)}})}function createExtensionAPI(ecInstance){var coordSysMgr=ecInstance._coordSysMgr;return extend(new ExtensionAPI(ecInstance),{getCoordinateSystems:bind(coordSysMgr.getCoordinateSystems,coordSysMgr),getComponentByElement:function(el){while(el){var modelInfo=el.__ecComponentInfo;if(modelInfo!=null){return ecInstance._model.getComponent(modelInfo.mainType,modelInfo.index)}el=el.parent}}})}function EventProcessor(){this.eventInfo}EventProcessor.prototype={constructor:EventProcessor,normalizeQuery:function(query){var cptQuery={};var dataQuery={};var otherQuery={};if(isString(query)){var condCptType=parseClassType(query);cptQuery.mainType=condCptType.main||null;cptQuery.subType=condCptType.sub||null}else{var suffixes=["Index","Name","Id"];var dataKeys={name:1,dataIndex:1,dataType:1};each$1(query,function(val,key){var reserved=false;for(var i=0;i<suffixes.length;i++){var propSuffix=suffixes[i];var suffixPos=key.lastIndexOf(propSuffix);if(suffixPos>0&&suffixPos===key.length-propSuffix.length){var mainType=key.slice(0,suffixPos);if(mainType!=="data"){cptQuery.mainType=mainType;cptQuery[propSuffix.toLowerCase()]=val;reserved=true}}}if(dataKeys.hasOwnProperty(key)){dataQuery[key]=val;reserved=true}if(!reserved){otherQuery[key]=val}})}return{cptQuery:cptQuery,dataQuery:dataQuery,otherQuery:otherQuery}},filter:function(eventType,query,args){var eventInfo=this.eventInfo;
if(!eventInfo){return true}var targetEl=eventInfo.targetEl;var packedEvent=eventInfo.packedEvent;var model=eventInfo.model;var view=eventInfo.view;if(!model||!view){return true}var cptQuery=query.cptQuery;var dataQuery=query.dataQuery;return check(cptQuery,model,"mainType")&&check(cptQuery,model,"subType")&&check(cptQuery,model,"index","componentIndex")&&check(cptQuery,model,"name")&&check(cptQuery,model,"id")&&check(dataQuery,packedEvent,"name")&&check(dataQuery,packedEvent,"dataIndex")&&check(dataQuery,packedEvent,"dataType")&&(!view.filterForExposedEvent||view.filterForExposedEvent(eventType,query.otherQuery,targetEl,packedEvent));function check(query,host,prop,propOnHost){return query[prop]==null||host[propOnHost||prop]===query[prop]}},afterTrigger:function(){this.eventInfo=null}};var actions={};var eventActionMap={};var dataProcessorFuncs=[];var optionPreprocessorFuncs=[];var postUpdateFuncs=[];var visualFuncs=[];var themeStorage={};var loadingEffects={};var instances={};var connectedGroups={};var idBase=new Date()-0;var groupIdBase=new Date()-0;var DOM_ATTRIBUTE_KEY="_echarts_instance_";function enableConnect(chart){var STATUS_PENDING=0;var STATUS_UPDATING=1;var STATUS_UPDATED=2;var STATUS_KEY="__connectUpdateStatus";function updateConnectedChartsStatus(charts,status){for(var i=0;i<charts.length;i++){var otherChart=charts[i];otherChart[STATUS_KEY]=status}}each(eventActionMap,function(actionType,eventType){chart._messageCenter.on(eventType,function(event){if(connectedGroups[chart.group]&&chart[STATUS_KEY]!==STATUS_PENDING){if(event&&event.escapeConnect){return}var action=chart.makeActionFromEvent(event);var otherCharts=[];each(instances,function(otherChart){if(otherChart!==chart&&otherChart.group===chart.group){otherCharts.push(otherChart)}});updateConnectedChartsStatus(otherCharts,STATUS_PENDING);each(otherCharts,function(otherChart){if(otherChart[STATUS_KEY]!==STATUS_UPDATING){otherChart.dispatchAction(action)}});updateConnectedChartsStatus(otherCharts,STATUS_UPDATED)
}})})}function init(dom,theme$$1,opts){if(__DEV__){if((version$1.replace(".","")-0)<(dependencies.zrender.replace(".","")-0)){throw new Error("zrender/src "+version$1+" is too old for ECharts "+version+". Current version need ZRender "+dependencies.zrender+"+")}if(!dom){throw new Error("Initialize failed: invalid dom.")}}var existInstance=getInstanceByDom(dom);if(existInstance){if(__DEV__){console.warn("There is a chart instance already initialized on the dom.")}return existInstance}if(__DEV__){if(isDom(dom)&&dom.nodeName.toUpperCase()!=="CANVAS"&&((!dom.clientWidth&&(!opts||opts.width==null))||(!dom.clientHeight&&(!opts||opts.height==null)))){console.warn("Can't get dom width or height")}}var chart=new ECharts(dom,theme$$1,opts);chart.id="ec_"+idBase++;instances[chart.id]=chart;setAttribute(dom,DOM_ATTRIBUTE_KEY,chart.id);enableConnect(chart);return chart}function connect(groupId){if(isArray(groupId)){var charts=groupId;groupId=null;each(charts,function(chart){if(chart.group!=null){groupId=chart.group}});groupId=groupId||("g_"+groupIdBase++);each(charts,function(chart){chart.group=groupId})}connectedGroups[groupId]=true;return groupId}function disConnect(groupId){connectedGroups[groupId]=false}var disconnect=disConnect;function dispose(chart){if(typeof chart==="string"){chart=instances[chart]}else{if(!(chart instanceof ECharts)){chart=getInstanceByDom(chart)}}if((chart instanceof ECharts)&&!chart.isDisposed()){chart.dispose()}}function getInstanceByDom(dom){return instances[getAttribute(dom,DOM_ATTRIBUTE_KEY)]}function getInstanceById(key){return instances[key]}function registerTheme(name,theme$$1){themeStorage[name]=theme$$1}function registerPreprocessor(preprocessorFunc){optionPreprocessorFuncs.push(preprocessorFunc)}function registerProcessor(priority,processor){normalizeRegister(dataProcessorFuncs,priority,processor,PRIORITY_PROCESSOR_FILTER)}function registerPostUpdate(postUpdateFunc){postUpdateFuncs.push(postUpdateFunc)}function registerAction(actionInfo,eventName,action){if(typeof eventName==="function"){action=eventName;
eventName=""}var actionType=isObject(actionInfo)?actionInfo.type:([actionInfo,actionInfo={event:eventName}][0]);actionInfo.event=(actionInfo.event||actionType).toLowerCase();eventName=actionInfo.event;assert(ACTION_REG.test(actionType)&&ACTION_REG.test(eventName));if(!actions[actionType]){actions[actionType]={action:action,actionInfo:actionInfo}}eventActionMap[eventName]=actionType}function registerCoordinateSystem(type,CoordinateSystem$$1){CoordinateSystemManager.register(type,CoordinateSystem$$1)}function getCoordinateSystemDimensions(type){var coordSysCreator=CoordinateSystemManager.get(type);if(coordSysCreator){return coordSysCreator.getDimensionsInfo?coordSysCreator.getDimensionsInfo():coordSysCreator.dimensions.slice()}}function registerLayout(priority,layoutTask){normalizeRegister(visualFuncs,priority,layoutTask,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(priority,visualTask){normalizeRegister(visualFuncs,priority,visualTask,PRIORITY_VISUAL_CHART,"visual")}function normalizeRegister(targetList,priority,fn,defaultPriority,visualType){if(isFunction(priority)||isObject(priority)){fn=priority;priority=defaultPriority}if(__DEV__){if(isNaN(priority)||priority==null){throw new Error("Illegal priority")}each(targetList,function(wrap){assert(wrap.__raw!==fn)})}var stageHandler=Scheduler.wrapStageHandler(fn,visualType);stageHandler.__prio=priority;stageHandler.__raw=fn;targetList.push(stageHandler);return stageHandler}function registerLoading(name,loadingFx){loadingEffects[name]=loadingFx}function extendComponentModel(opts){return ComponentModel.extend(opts)}function extendComponentView(opts){return Component.extend(opts)}function extendSeriesModel(opts){return SeriesModel.extend(opts)}function extendChartView(opts){return Chart.extend(opts)}function setCanvasCreator(creator){$override("createCanvas",creator)}function registerMap(mapName,geoJson,specialAreas){mapDataStorage.registerMap(mapName,geoJson,specialAreas)}function getMap(mapName){var records=mapDataStorage.retrieveMap(mapName);
return records&&records[0]&&{geoJson:records[0].geoJSON,specialAreas:records[0].specialAreas}}registerVisual(PRIORITY_VISUAL_GLOBAL,seriesColor);registerPreprocessor(backwardCompat);registerProcessor(PRIORITY_PROCESSOR_STATISTIC,dataStack);registerLoading("default",loadingDefault);registerAction({type:"highlight",event:"highlight",update:"highlight"},noop);registerAction({type:"downplay",event:"downplay",update:"downplay"},noop);registerTheme("light",lightTheme);registerTheme("dark",theme);var dataTool={};function defaultKeyGetter(item){return item}function DataDiffer(oldArr,newArr,oldKeyGetter,newKeyGetter,context){this._old=oldArr;this._new=newArr;this._oldKeyGetter=oldKeyGetter||defaultKeyGetter;this._newKeyGetter=newKeyGetter||defaultKeyGetter;this.context=context}DataDiffer.prototype={constructor:DataDiffer,add:function(func){this._add=func;return this},update:function(func){this._update=func;return this},remove:function(func){this._remove=func;return this},execute:function(){var oldArr=this._old;var newArr=this._new;var oldDataIndexMap={};var newDataIndexMap={};var oldDataKeyArr=[];var newDataKeyArr=[];var i;initIndexMap(oldArr,oldDataIndexMap,oldDataKeyArr,"_oldKeyGetter",this);initIndexMap(newArr,newDataIndexMap,newDataKeyArr,"_newKeyGetter",this);for(i=0;i<oldArr.length;i++){var key=oldDataKeyArr[i];var idx=newDataIndexMap[key];if(idx!=null){var len=idx.length;if(len){len===1&&(newDataIndexMap[key]=null);idx=idx.unshift()}else{newDataIndexMap[key]=null}this._update&&this._update(idx,i)}else{this._remove&&this._remove(i)}}for(var i=0;i<newDataKeyArr.length;i++){var key=newDataKeyArr[i];if(newDataIndexMap.hasOwnProperty(key)){var idx=newDataIndexMap[key];if(idx==null){continue}if(!idx.length){this._add&&this._add(idx)}else{for(var j=0,len=idx.length;j<len;j++){this._add&&this._add(idx[j])}}}}}};function initIndexMap(arr,map,keyArr,keyGetterName,dataDiffer){for(var i=0;i<arr.length;i++){var key="_ec_"+dataDiffer[keyGetterName](arr[i],i);var existence=map[key];if(existence==null){keyArr.push(key);
map[key]=i}else{if(!existence.length){map[key]=existence=[existence]}existence.push(i)}}}var OTHER_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","seriesName"]);function summarizeDimensions(data){var summary={};var encode=summary.encode={};var notExtraCoordDimMap=createHashMap();var defaultedLabel=[];var defaultedTooltip=[];each$1(data.dimensions,function(dimName){var dimItem=data.getDimensionInfo(dimName);var coordDim=dimItem.coordDim;if(coordDim){if(__DEV__){assert$1(OTHER_DIMENSIONS.get(coordDim)==null)}var coordDimArr=encode[coordDim];if(!encode.hasOwnProperty(coordDim)){coordDimArr=encode[coordDim]=[]}coordDimArr[dimItem.coordDimIndex]=dimName;if(!dimItem.isExtraCoord){notExtraCoordDimMap.set(coordDim,1);if(mayLabelDimType(dimItem.type)){defaultedLabel[0]=dimName}}if(dimItem.defaultTooltip){defaultedTooltip.push(dimName)}}OTHER_DIMENSIONS.each(function(v,otherDim){var otherDimArr=encode[otherDim];if(!encode.hasOwnProperty(otherDim)){otherDimArr=encode[otherDim]=[]}var dimIndex=dimItem.otherDims[otherDim];if(dimIndex!=null&&dimIndex!==false){otherDimArr[dimIndex]=dimItem.name}})});var dataDimsOnCoord=[];var encodeFirstDimNotExtra={};notExtraCoordDimMap.each(function(v,coordDim){var dimArr=encode[coordDim];encodeFirstDimNotExtra[coordDim]=dimArr[0];dataDimsOnCoord=dataDimsOnCoord.concat(dimArr)});summary.dataDimsOnCoord=dataDimsOnCoord;summary.encodeFirstDimNotExtra=encodeFirstDimNotExtra;var encodeLabel=encode.label;if(encodeLabel&&encodeLabel.length){defaultedLabel=encodeLabel.slice()}var encodeTooltip=encode.tooltip;if(encodeTooltip&&encodeTooltip.length){defaultedTooltip=encodeTooltip.slice()}else{if(!defaultedTooltip.length){defaultedTooltip=defaultedLabel.slice()}}encode.defaultedLabel=defaultedLabel;encode.defaultedTooltip=defaultedTooltip;return summary}function getDimensionTypeByAxis(axisType){return axisType==="category"?"ordinal":axisType==="time"?"time":"float"}function mayLabelDimType(dimType){return !(dimType==="ordinal"||dimType==="time")
}var isObject$4=isObject$1;var UNDEFINED="undefined";var INDEX_NOT_FOUND=-1;var ID_PREFIX="e\0\0";var dataCtors={"float":typeof Float64Array===UNDEFINED?Array:Float64Array,"int":typeof Int32Array===UNDEFINED?Array:Int32Array,"ordinal":Array,"number":Array,"time":Array};var CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array;var CtorInt32Array=typeof Int32Array===UNDEFINED?Array:Int32Array;var CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array;function getIndicesCtor(list){return list._rawCount>65535?CtorUint32Array:CtorUint16Array}function cloneChunk(originalChunk){var Ctor=originalChunk.constructor;return Ctor===Array?originalChunk.slice():new Ctor(originalChunk)}var TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"];var CLONE_PROPERTIES=["_extent","_approximateExtent","_rawExtent"];function transferProperties(target,source){each$1(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods||[]),function(propName){if(source.hasOwnProperty(propName)){target[propName]=source[propName]}});target.__wrappedMethods=source.__wrappedMethods;each$1(CLONE_PROPERTIES,function(propName){target[propName]=clone(source[propName])});target._calculationInfo=extend(source._calculationInfo)}var List=function(dimensions,hostModel){dimensions=dimensions||["x","y"];var dimensionInfos={};var dimensionNames=[];var invertedIndicesMap={};for(var i=0;i<dimensions.length;i++){var dimensionInfo=dimensions[i];if(isString(dimensionInfo)){dimensionInfo={name:dimensionInfo}}var dimensionName=dimensionInfo.name;dimensionInfo.type=dimensionInfo.type||"float";if(!dimensionInfo.coordDim){dimensionInfo.coordDim=dimensionName;dimensionInfo.coordDimIndex=0}dimensionInfo.otherDims=dimensionInfo.otherDims||{};dimensionNames.push(dimensionName);dimensionInfos[dimensionName]=dimensionInfo;dimensionInfo.index=i;if(dimensionInfo.createInvertedIndices){invertedIndicesMap[dimensionName]=[]
}}this.dimensions=dimensionNames;this._dimensionInfos=dimensionInfos;this.hostModel=hostModel;this.dataType;this._indices=null;this._count=0;this._rawCount=0;this._storage={};this._nameList=[];this._idList=[];this._optionModels=[];this._visual={};this._layout={};this._itemVisuals=[];this.hasItemVisual={};this._itemLayouts=[];this._graphicEls=[];this._chunkSize=100000;this._chunkCount=0;this._rawData;this._rawExtent={};this._extent={};this._approximateExtent={};this._dimensionsSummary=summarizeDimensions(this);this._invertedIndicesMap=invertedIndicesMap;this._calculationInfo={}};var listProto=List.prototype;listProto.type="list";listProto.hasItemOption=true;listProto.getDimension=function(dim){if(!isNaN(dim)){dim=this.dimensions[dim]||dim}return dim};listProto.getDimensionInfo=function(dim){return this._dimensionInfos[this.getDimension(dim)]};listProto.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()};listProto.mapDimension=function(coordDim,idx){var dimensionsSummary=this._dimensionsSummary;if(idx==null){return dimensionsSummary.encodeFirstDimNotExtra[coordDim]}var dims=dimensionsSummary.encode[coordDim];return idx===true?(dims||[]).slice():(dims&&dims[idx])};listProto.initData=function(data,nameList,dimValueGetter){var notProvider=Source.isInstance(data)||isArrayLike(data);if(notProvider){data=new DefaultDataProvider(data,this.dimensions.length)}if(__DEV__){if(!notProvider&&(typeof data.getItem!=="function"||typeof data.count!=="function")){throw new Error("Inavlid data provider.")}}this._rawData=data;this._storage={};this._indices=null;this._nameList=nameList||[];this._idList=[];this._nameRepeatCount={};if(!dimValueGetter){this.hasItemOption=false}this.defaultDimValueGetter=defaultDimValueGetters[this._rawData.getSource().sourceFormat];this._dimValueGetter=dimValueGetter=dimValueGetter||this.defaultDimValueGetter;this._dimValueGetterArrayRows=defaultDimValueGetters.arrayRows;this._rawExtent={};this._initDataFromProvider(0,data.count());
if(data.pure){this.hasItemOption=false}};listProto.getProvider=function(){return this._rawData};listProto.appendData=function(data){if(__DEV__){assert$1(!this._indices,"appendData can only be called on raw data.")}var rawData=this._rawData;var start=this.count();rawData.appendData(data);var end=rawData.count();if(!rawData.persistent){end+=start}this._initDataFromProvider(start,end)};listProto.appendValues=function(values,names){var chunkSize=this._chunkSize;var storage=this._storage;var dimensions=this.dimensions;var dimLen=dimensions.length;var rawExtent=this._rawExtent;var start=this.count();var end=start+Math.max(values.length,names?names.length:0);var originalChunkCount=this._chunkCount;for(var i=0;i<dimLen;i++){var dim=dimensions[i];if(!rawExtent[dim]){rawExtent[dim]=getInitialExtent()}if(!storage[dim]){storage[dim]=[]}prepareChunks(storage,this._dimensionInfos[dim],chunkSize,originalChunkCount,end);this._chunkCount=storage[dim].length}var emptyDataItem=new Array(dimLen);for(var idx=start;idx<end;idx++){var sourceIdx=idx-start;var chunkIndex=Math.floor(idx/chunkSize);var chunkOffset=idx%chunkSize;for(var k=0;k<dimLen;k++){var dim=dimensions[k];var val=this._dimValueGetterArrayRows(values[sourceIdx]||emptyDataItem,dim,sourceIdx,k);storage[dim][chunkIndex][chunkOffset]=val;var dimRawExtent=rawExtent[dim];val<dimRawExtent[0]&&(dimRawExtent[0]=val);val>dimRawExtent[1]&&(dimRawExtent[1]=val)}if(names){this._nameList[idx]=names[sourceIdx]}}this._rawCount=this._count=end;this._extent={};prepareInvertedIndex(this)};listProto._initDataFromProvider=function(start,end){if(start>=end){return}var chunkSize=this._chunkSize;var rawData=this._rawData;var storage=this._storage;var dimensions=this.dimensions;var dimLen=dimensions.length;var dimensionInfoMap=this._dimensionInfos;var nameList=this._nameList;var idList=this._idList;var rawExtent=this._rawExtent;var nameRepeatCount=this._nameRepeatCount={};var nameDimIdx;var originalChunkCount=this._chunkCount;for(var i=0;i<dimLen;i++){var dim=dimensions[i];
if(!rawExtent[dim]){rawExtent[dim]=getInitialExtent()}var dimInfo=dimensionInfoMap[dim];if(dimInfo.otherDims.itemName===0){nameDimIdx=this._nameDimIdx=i}if(dimInfo.otherDims.itemId===0){this._idDimIdx=i}if(!storage[dim]){storage[dim]=[]}prepareChunks(storage,dimInfo,chunkSize,originalChunkCount,end);this._chunkCount=storage[dim].length}var dataItem=new Array(dimLen);for(var idx=start;idx<end;idx++){dataItem=rawData.getItem(idx,dataItem);var chunkIndex=Math.floor(idx/chunkSize);var chunkOffset=idx%chunkSize;for(var k=0;k<dimLen;k++){var dim=dimensions[k];var dimStorage=storage[dim][chunkIndex];var val=this._dimValueGetter(dataItem,dim,idx,k);dimStorage[chunkOffset]=val;var dimRawExtent=rawExtent[dim];val<dimRawExtent[0]&&(dimRawExtent[0]=val);val>dimRawExtent[1]&&(dimRawExtent[1]=val)}if(!rawData.pure){var name=nameList[idx];if(dataItem&&name==null){if(dataItem.name!=null){nameList[idx]=name=dataItem.name}else{if(nameDimIdx!=null){var nameDim=dimensions[nameDimIdx];var nameDimChunk=storage[nameDim][chunkIndex];if(nameDimChunk){name=nameDimChunk[chunkOffset];var ordinalMeta=dimensionInfoMap[nameDim].ordinalMeta;if(ordinalMeta&&ordinalMeta.categories.length){name=ordinalMeta.categories[name]}}}}}var id=dataItem==null?null:dataItem.id;if(id==null&&name!=null){nameRepeatCount[name]=nameRepeatCount[name]||0;id=name;if(nameRepeatCount[name]>0){id+="__ec__"+nameRepeatCount[name]}nameRepeatCount[name]++}id!=null&&(idList[idx]=id)}}if(!rawData.persistent&&rawData.clean){rawData.clean()}this._rawCount=this._count=end;this._extent={};prepareInvertedIndex(this)};function prepareChunks(storage,dimInfo,chunkSize,chunkCount,end){var DataCtor=dataCtors[dimInfo.type];var lastChunkIndex=chunkCount-1;var dim=dimInfo.name;var resizeChunkArray=storage[dim][lastChunkIndex];if(resizeChunkArray&&resizeChunkArray.length<chunkSize){var newStore=new DataCtor(Math.min(end-lastChunkIndex*chunkSize,chunkSize));for(var j=0;j<resizeChunkArray.length;j++){newStore[j]=resizeChunkArray[j]}storage[dim][lastChunkIndex]=newStore
}for(var k=chunkCount*chunkSize;k<end;k+=chunkSize){storage[dim].push(new DataCtor(Math.min(end-k,chunkSize)))}}function prepareInvertedIndex(list){var invertedIndicesMap=list._invertedIndicesMap;each$1(invertedIndicesMap,function(invertedIndices,dim){var dimInfo=list._dimensionInfos[dim];var ordinalMeta=dimInfo.ordinalMeta;if(ordinalMeta){invertedIndices=invertedIndicesMap[dim]=new CtorInt32Array(ordinalMeta.categories.length);for(var i=0;i<invertedIndices.length;i++){invertedIndices[i]=INDEX_NOT_FOUND}for(var i=0;i<list._count;i++){invertedIndices[list.get(dim,i)]=i}}})}function getRawValueFromStore(list,dimIndex,rawIndex){var val;if(dimIndex!=null){var chunkSize=list._chunkSize;var chunkIndex=Math.floor(rawIndex/chunkSize);var chunkOffset=rawIndex%chunkSize;var dim=list.dimensions[dimIndex];var chunk=list._storage[dim][chunkIndex];if(chunk){val=chunk[chunkOffset];var ordinalMeta=list._dimensionInfos[dim].ordinalMeta;if(ordinalMeta&&ordinalMeta.categories.length){val=ordinalMeta.categories[val]}}}return val}listProto.count=function(){return this._count};listProto.getIndices=function(){var newIndices;var indices=this._indices;if(indices){var Ctor=indices.constructor;var thisCount=this._count;if(Ctor===Array){newIndices=new Ctor(thisCount);for(var i=0;i<thisCount;i++){newIndices[i]=indices[i]}}else{newIndices=new Ctor(indices.buffer,0,thisCount)}}else{var Ctor=getIndicesCtor(this);var newIndices=new Ctor(this.count());for(var i=0;i<newIndices.length;i++){newIndices[i]=i}}return newIndices};listProto.get=function(dim,idx){if(!(idx>=0&&idx<this._count)){return NaN}var storage=this._storage;if(!storage[dim]){return NaN}idx=this.getRawIndex(idx);var chunkIndex=Math.floor(idx/this._chunkSize);var chunkOffset=idx%this._chunkSize;var chunkStore=storage[dim][chunkIndex];var value=chunkStore[chunkOffset];return value};listProto.getByRawIndex=function(dim,rawIdx){if(!(rawIdx>=0&&rawIdx<this._rawCount)){return NaN}var dimStore=this._storage[dim];if(!dimStore){return NaN}var chunkIndex=Math.floor(rawIdx/this._chunkSize);
var chunkOffset=rawIdx%this._chunkSize;var chunkStore=dimStore[chunkIndex];return chunkStore[chunkOffset]};listProto._getFast=function(dim,rawIdx){var chunkIndex=Math.floor(rawIdx/this._chunkSize);var chunkOffset=rawIdx%this._chunkSize;var chunkStore=this._storage[dim][chunkIndex];return chunkStore[chunkOffset]};listProto.getValues=function(dimensions,idx){var values=[];if(!isArray(dimensions)){idx=dimensions;dimensions=this.dimensions}for(var i=0,len=dimensions.length;i<len;i++){values.push(this.get(dimensions[i],idx))}return values};listProto.hasValue=function(idx){var dataDimsOnCoord=this._dimensionsSummary.dataDimsOnCoord;var dimensionInfos=this._dimensionInfos;for(var i=0,len=dataDimsOnCoord.length;i<len;i++){if(dimensionInfos[dataDimsOnCoord[i]].type!=="ordinal"&&isNaN(this.get(dataDimsOnCoord[i],idx))){return false}}return true};listProto.getDataExtent=function(dim){dim=this.getDimension(dim);var dimData=this._storage[dim];var initialExtent=getInitialExtent();if(!dimData){return initialExtent}var currEnd=this.count();var useRaw=!this._indices;var dimExtent;if(useRaw){return this._rawExtent[dim].slice()}dimExtent=this._extent[dim];if(dimExtent){return dimExtent.slice()}dimExtent=initialExtent;var min=dimExtent[0];var max=dimExtent[1];for(var i=0;i<currEnd;i++){var value=this._getFast(dim,this.getRawIndex(i));value<min&&(min=value);value>max&&(max=value)}dimExtent=[min,max];this._extent[dim]=dimExtent;return dimExtent};listProto.getApproximateExtent=function(dim){dim=this.getDimension(dim);return this._approximateExtent[dim]||this.getDataExtent(dim)};listProto.setApproximateExtent=function(extent,dim){dim=this.getDimension(dim);this._approximateExtent[dim]=extent.slice()};listProto.getCalculationInfo=function(key){return this._calculationInfo[key]};listProto.setCalculationInfo=function(key,value){isObject$4(key)?extend(this._calculationInfo,key):(this._calculationInfo[key]=value)};listProto.getSum=function(dim){var dimData=this._storage[dim];var sum=0;if(dimData){for(var i=0,len=this.count();
i<len;i++){var value=this.get(dim,i);if(!isNaN(value)){sum+=value}}}return sum};listProto.getMedian=function(dim){var dimDataArray=[];this.each(dim,function(val,idx){if(!isNaN(val)){dimDataArray.push(val)}});var sortedDimDataArray=[].concat(dimDataArray).sort(function(a,b){return a-b});var len=this.count();return len===0?0:len%2===1?sortedDimDataArray[(len-1)/2]:(sortedDimDataArray[len/2]+sortedDimDataArray[len/2-1])/2};listProto.rawIndexOf=function(dim,value){var invertedIndices=dim&&this._invertedIndicesMap[dim];if(__DEV__){if(!invertedIndices){throw new Error("Do not supported yet")}}var rawIndex=invertedIndices[value];if(rawIndex==null||isNaN(rawIndex)){return INDEX_NOT_FOUND}return rawIndex};listProto.indexOfName=function(name){for(var i=0,len=this.count();i<len;i++){if(this.getName(i)===name){return i}}return -1};listProto.indexOfRawIndex=function(rawIndex){if(!this._indices){return rawIndex}if(rawIndex>=this._rawCount||rawIndex<0){return -1}var indices=this._indices;var rawDataIndex=indices[rawIndex];if(rawDataIndex!=null&&rawDataIndex<this._count&&rawDataIndex===rawIndex){return rawIndex}var left=0;var right=this._count-1;while(left<=right){var mid=(left+right)/2|0;if(indices[mid]<rawIndex){left=mid+1}else{if(indices[mid]>rawIndex){right=mid-1}else{return mid}}}return -1};listProto.indicesOfNearest=function(dim,value,maxDistance){var storage=this._storage;var dimData=storage[dim];var nearestIndices=[];if(!dimData){return nearestIndices}if(maxDistance==null){maxDistance=Infinity}var minDist=Number.MAX_VALUE;var minDiff=-1;for(var i=0,len=this.count();i<len;i++){var diff=value-this.get(dim,i);var dist=Math.abs(diff);if(diff<=maxDistance&&dist<=minDist){if(dist<minDist||(diff>=0&&minDiff<0)){minDist=dist;minDiff=diff;nearestIndices.length=0}nearestIndices.push(i)}}return nearestIndices};listProto.getRawIndex=getRawIndexWithoutIndices;function getRawIndexWithoutIndices(idx){return idx}function getRawIndexWithIndices(idx){if(idx<this._count&&idx>=0){return this._indices[idx]
}return -1}listProto.getRawDataItem=function(idx){if(!this._rawData.persistent){var val=[];for(var i=0;i<this.dimensions.length;i++){var dim=this.dimensions[i];val.push(this.get(dim,idx))}return val}else{return this._rawData.getItem(this.getRawIndex(idx))}};listProto.getName=function(idx){var rawIndex=this.getRawIndex(idx);return this._nameList[rawIndex]||getRawValueFromStore(this,this._nameDimIdx,rawIndex)||""};listProto.getId=function(idx){return getId(this,this.getRawIndex(idx))};function getId(list,rawIndex){var id=list._idList[rawIndex];if(id==null){id=getRawValueFromStore(list,list._idDimIdx,rawIndex)}if(id==null){id=ID_PREFIX+rawIndex}return id}function normalizeDimensions(dimensions){if(!isArray(dimensions)){dimensions=[dimensions]}return dimensions}function validateDimensions(list,dims){for(var i=0;i<dims.length;i++){if(!list._dimensionInfos[dims[i]]){console.error("Unkown dimension "+dims[i])}}}listProto.each=function(dims,cb,context,contextCompat){if(!this._count){return}if(typeof dims==="function"){contextCompat=context;context=cb;cb=dims;dims=[]}context=context||contextCompat||this;dims=map(normalizeDimensions(dims),this.getDimension,this);if(__DEV__){validateDimensions(this,dims)}var dimSize=dims.length;for(var i=0;i<this.count();i++){switch(dimSize){case 0:cb.call(context,i);break;case 1:cb.call(context,this.get(dims[0],i),i);break;case 2:cb.call(context,this.get(dims[0],i),this.get(dims[1],i),i);break;default:var k=0;var value=[];for(;k<dimSize;k++){value[k]=this.get(dims[k],i)}value[k]=i;cb.apply(context,value)}}};listProto.filterSelf=function(dimensions,cb,context,contextCompat){if(!this._count){return}if(typeof dimensions==="function"){contextCompat=context;context=cb;cb=dimensions;dimensions=[]}context=context||contextCompat||this;dimensions=map(normalizeDimensions(dimensions),this.getDimension,this);if(__DEV__){validateDimensions(this,dimensions)}var count=this.count();var Ctor=getIndicesCtor(this);var newIndices=new Ctor(count);var value=[];var dimSize=dimensions.length;
var offset=0;var dim0=dimensions[0];for(var i=0;i<count;i++){var keep;var rawIdx=this.getRawIndex(i);if(dimSize===0){keep=cb.call(context,i)}else{if(dimSize===1){var val=this._getFast(dim0,rawIdx);keep=cb.call(context,val,i)}else{for(var k=0;k<dimSize;k++){value[k]=this._getFast(dim0,rawIdx)}value[k]=i;keep=cb.apply(context,value)}}if(keep){newIndices[offset++]=rawIdx}}if(offset<count){this._indices=newIndices}this._count=offset;this._extent={};this.getRawIndex=this._indices?getRawIndexWithIndices:getRawIndexWithoutIndices;return this};listProto.selectRange=function(range){if(!this._count){return}var dimensions=[];for(var dim in range){if(range.hasOwnProperty(dim)){dimensions.push(dim)}}if(__DEV__){validateDimensions(this,dimensions)}var dimSize=dimensions.length;if(!dimSize){return}var originalCount=this.count();var Ctor=getIndicesCtor(this);var newIndices=new Ctor(originalCount);var offset=0;var dim0=dimensions[0];var min=range[dim0][0];var max=range[dim0][1];var quickFinished=false;if(!this._indices){var idx=0;if(dimSize===1){var dimStorage=this._storage[dimensions[0]];for(var k=0;k<this._chunkCount;k++){var chunkStorage=dimStorage[k];var len=Math.min(this._count-k*this._chunkSize,this._chunkSize);for(var i=0;i<len;i++){var val=chunkStorage[i];if((val>=min&&val<=max)||isNaN(val)){newIndices[offset++]=idx}idx++}}quickFinished=true}else{if(dimSize===2){var dimStorage=this._storage[dim0];var dimStorage2=this._storage[dimensions[1]];var min2=range[dimensions[1]][0];var max2=range[dimensions[1]][1];for(var k=0;k<this._chunkCount;k++){var chunkStorage=dimStorage[k];var chunkStorage2=dimStorage2[k];var len=Math.min(this._count-k*this._chunkSize,this._chunkSize);for(var i=0;i<len;i++){var val=chunkStorage[i];var val2=chunkStorage2[i];if(((val>=min&&val<=max)||isNaN(val))&&((val2>=min2&&val2<=max2)||isNaN(val2))){newIndices[offset++]=idx}idx++}}quickFinished=true}}}if(!quickFinished){if(dimSize===1){for(var i=0;i<originalCount;i++){var rawIndex=this.getRawIndex(i);var val=this._getFast(dim0,rawIndex);
if((val>=min&&val<=max)||isNaN(val)){newIndices[offset++]=rawIndex}}}else{for(var i=0;i<originalCount;i++){var keep=true;var rawIndex=this.getRawIndex(i);for(var k=0;k<dimSize;k++){var dimk=dimensions[k];var val=this._getFast(dim,rawIndex);if(val<range[dimk][0]||val>range[dimk][1]){keep=false}}if(keep){newIndices[offset++]=this.getRawIndex(i)}}}}if(offset<originalCount){this._indices=newIndices}this._count=offset;this._extent={};this.getRawIndex=this._indices?getRawIndexWithIndices:getRawIndexWithoutIndices;return this};listProto.mapArray=function(dimensions,cb,context,contextCompat){if(typeof dimensions==="function"){contextCompat=context;context=cb;cb=dimensions;dimensions=[]}context=context||contextCompat||this;var result=[];this.each(dimensions,function(){result.push(cb&&cb.apply(this,arguments))},context);return result};function cloneListForMapAndSample(original,excludeDimensions){var allDimensions=original.dimensions;var list=new List(map(allDimensions,original.getDimensionInfo,original),original.hostModel);transferProperties(list,original);var storage=list._storage={};var originalStorage=original._storage;for(var i=0;i<allDimensions.length;i++){var dim=allDimensions[i];if(originalStorage[dim]){if(indexOf(excludeDimensions,dim)>=0){storage[dim]=cloneDimStore(originalStorage[dim]);list._rawExtent[dim]=getInitialExtent();list._extent[dim]=null}else{storage[dim]=originalStorage[dim]}}}return list}function cloneDimStore(originalDimStore){var newDimStore=new Array(originalDimStore.length);for(var j=0;j<originalDimStore.length;j++){newDimStore[j]=cloneChunk(originalDimStore[j])}return newDimStore}function getInitialExtent(){return[Infinity,-Infinity]}listProto.map=function(dimensions,cb,context,contextCompat){context=context||contextCompat||this;dimensions=map(normalizeDimensions(dimensions),this.getDimension,this);if(__DEV__){validateDimensions(this,dimensions)}var list=cloneListForMapAndSample(this,dimensions);list._indices=this._indices;list.getRawIndex=list._indices?getRawIndexWithIndices:getRawIndexWithoutIndices;
var storage=list._storage;var tmpRetValue=[];var chunkSize=this._chunkSize;var dimSize=dimensions.length;var dataCount=this.count();var values=[];var rawExtent=list._rawExtent;for(var dataIndex=0;dataIndex<dataCount;dataIndex++){for(var dimIndex=0;dimIndex<dimSize;dimIndex++){values[dimIndex]=this.get(dimensions[dimIndex],dataIndex)}values[dimSize]=dataIndex;var retValue=cb&&cb.apply(context,values);if(retValue!=null){if(typeof retValue!=="object"){tmpRetValue[0]=retValue;retValue=tmpRetValue}var rawIndex=this.getRawIndex(dataIndex);var chunkIndex=Math.floor(rawIndex/chunkSize);var chunkOffset=rawIndex%chunkSize;for(var i=0;i<retValue.length;i++){var dim=dimensions[i];var val=retValue[i];var rawExtentOnDim=rawExtent[dim];var dimStore=storage[dim];if(dimStore){dimStore[chunkIndex][chunkOffset]=val}if(val<rawExtentOnDim[0]){rawExtentOnDim[0]=val}if(val>rawExtentOnDim[1]){rawExtentOnDim[1]=val}}}}return list};listProto.downSample=function(dimension,rate,sampleValue,sampleIndex){var list=cloneListForMapAndSample(this,[dimension]);var targetStorage=list._storage;var frameValues=[];var frameSize=Math.floor(1/rate);var dimStore=targetStorage[dimension];var len=this.count();var chunkSize=this._chunkSize;var rawExtentOnDim=list._rawExtent[dimension];var newIndices=new (getIndicesCtor(this))(len);var offset=0;for(var i=0;i<len;i+=frameSize){if(frameSize>len-i){frameSize=len-i;frameValues.length=frameSize}for(var k=0;k<frameSize;k++){var dataIdx=this.getRawIndex(i+k);var originalChunkIndex=Math.floor(dataIdx/chunkSize);var originalChunkOffset=dataIdx%chunkSize;frameValues[k]=dimStore[originalChunkIndex][originalChunkOffset]}var value=sampleValue(frameValues);var sampleFrameIdx=this.getRawIndex(Math.min(i+sampleIndex(frameValues,value)||0,len-1));var sampleChunkIndex=Math.floor(sampleFrameIdx/chunkSize);var sampleChunkOffset=sampleFrameIdx%chunkSize;dimStore[sampleChunkIndex][sampleChunkOffset]=value;if(value<rawExtentOnDim[0]){rawExtentOnDim[0]=value}if(value>rawExtentOnDim[1]){rawExtentOnDim[1]=value
}newIndices[offset++]=sampleFrameIdx}list._count=offset;list._indices=newIndices;list.getRawIndex=getRawIndexWithIndices;return list};listProto.getItemModel=function(idx){var hostModel=this.hostModel;return new Model(this.getRawDataItem(idx),hostModel,hostModel&&hostModel.ecModel)};listProto.diff=function(otherList){var thisList=this;return new DataDiffer(otherList?otherList.getIndices():[],this.getIndices(),function(idx){return getId(otherList,idx)},function(idx){return getId(thisList,idx)})};listProto.getVisual=function(key){var visual=this._visual;return visual&&visual[key]};listProto.setVisual=function(key,val){if(isObject$4(key)){for(var name in key){if(key.hasOwnProperty(name)){this.setVisual(name,key[name])}}return}this._visual=this._visual||{};this._visual[key]=val};listProto.setLayout=function(key,val){if(isObject$4(key)){for(var name in key){if(key.hasOwnProperty(name)){this.setLayout(name,key[name])}}return}this._layout[key]=val};listProto.getLayout=function(key){return this._layout[key]};listProto.getItemLayout=function(idx){return this._itemLayouts[idx]};listProto.setItemLayout=function(idx,layout,merge$$1){this._itemLayouts[idx]=merge$$1?extend(this._itemLayouts[idx]||{},layout):layout};listProto.clearItemLayouts=function(){this._itemLayouts.length=0};listProto.getItemVisual=function(idx,key,ignoreParent){var itemVisual=this._itemVisuals[idx];var val=itemVisual&&itemVisual[key];if(val==null&&!ignoreParent){return this.getVisual(key)}return val};listProto.setItemVisual=function(idx,key,value){var itemVisual=this._itemVisuals[idx]||{};var hasItemVisual=this.hasItemVisual;this._itemVisuals[idx]=itemVisual;if(isObject$4(key)){for(var name in key){if(key.hasOwnProperty(name)){itemVisual[name]=key[name];hasItemVisual[name]=true}}return}itemVisual[key]=value;hasItemVisual[key]=true};listProto.clearAllVisual=function(){this._visual={};this._itemVisuals=[];this.hasItemVisual={}};var setItemDataAndSeriesIndex=function(child){child.seriesIndex=this.seriesIndex;child.dataIndex=this.dataIndex;
child.dataType=this.dataType};listProto.setItemGraphicEl=function(idx,el){var hostModel=this.hostModel;if(el){el.dataIndex=idx;el.dataType=this.dataType;el.seriesIndex=hostModel&&hostModel.seriesIndex;if(el.type==="group"){el.traverse(setItemDataAndSeriesIndex,el)}}this._graphicEls[idx]=el};listProto.getItemGraphicEl=function(idx){return this._graphicEls[idx]};listProto.eachItemGraphicEl=function(cb,context){each$1(this._graphicEls,function(el,idx){if(el){cb&&cb.call(context,el,idx)}})};listProto.cloneShallow=function(list){if(!list){var dimensionInfoList=map(this.dimensions,this.getDimensionInfo,this);list=new List(dimensionInfoList,this.hostModel)}list._storage=this._storage;transferProperties(list,this);if(this._indices){var Ctor=this._indices.constructor;list._indices=new Ctor(this._indices)}else{list._indices=null}list.getRawIndex=list._indices?getRawIndexWithIndices:getRawIndexWithoutIndices;return list};listProto.wrapMethod=function(methodName,injectFunction){var originalMethod=this[methodName];if(typeof originalMethod!=="function"){return}this.__wrappedMethods=this.__wrappedMethods||[];this.__wrappedMethods.push(methodName);this[methodName]=function(){var res=originalMethod.apply(this,arguments);return injectFunction.apply(this,[res].concat(slice(arguments)))}};listProto.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"];listProto.CHANGABLE_METHODS=["filterSelf","selectRange"];function completeDimensions(sysDims,source,opt){if(!Source.isInstance(source)){source=Source.seriesDataToSource(source)}opt=opt||{};sysDims=(sysDims||[]).slice();var dimsDef=(opt.dimsDef||[]).slice();var encodeDef=createHashMap(opt.encodeDef);var dataDimNameMap=createHashMap();var coordDimNameMap=createHashMap();var result=[];var dimCount=getDimCount(source,sysDims,dimsDef,opt.dimCount);for(var i=0;i<dimCount;i++){var dimDefItem=dimsDef[i]=extend({},isObject$1(dimsDef[i])?dimsDef[i]:{name:dimsDef[i]});var userDimName=dimDefItem.name;var resultItem=result[i]={otherDims:{}};if(userDimName!=null&&dataDimNameMap.get(userDimName)==null){resultItem.name=resultItem.displayName=userDimName;
dataDimNameMap.set(userDimName,i)}dimDefItem.type!=null&&(resultItem.type=dimDefItem.type);dimDefItem.displayName!=null&&(resultItem.displayName=dimDefItem.displayName)}encodeDef.each(function(dataDims,coordDim){dataDims=normalizeToArray(dataDims).slice();if(dataDims.length===1&&dataDims[0]<0){encodeDef.set(coordDim,false);return}var validDataDims=encodeDef.set(coordDim,[]);each$1(dataDims,function(resultDimIdx,idx){isString(resultDimIdx)&&(resultDimIdx=dataDimNameMap.get(resultDimIdx));if(resultDimIdx!=null&&resultDimIdx<dimCount){validDataDims[idx]=resultDimIdx;applyDim(result[resultDimIdx],coordDim,idx)}})});var availDimIdx=0;each$1(sysDims,function(sysDimItem,sysDimIndex){var coordDim;var sysDimItem;var sysDimItemDimsDef;var sysDimItemOtherDims;if(isString(sysDimItem)){coordDim=sysDimItem;sysDimItem={}}else{coordDim=sysDimItem.name;var ordinalMeta=sysDimItem.ordinalMeta;sysDimItem.ordinalMeta=null;sysDimItem=clone(sysDimItem);sysDimItem.ordinalMeta=ordinalMeta;sysDimItemDimsDef=sysDimItem.dimsDef;sysDimItemOtherDims=sysDimItem.otherDims;sysDimItem.name=sysDimItem.coordDim=sysDimItem.coordDimIndex=sysDimItem.dimsDef=sysDimItem.otherDims=null}var dataDims=encodeDef.get(coordDim);if(dataDims===false){return}var dataDims=normalizeToArray(dataDims);if(!dataDims.length){for(var i=0;i<(sysDimItemDimsDef&&sysDimItemDimsDef.length||1);i++){while(availDimIdx<result.length&&result[availDimIdx].coordDim!=null){availDimIdx++}availDimIdx<result.length&&dataDims.push(availDimIdx++)}}each$1(dataDims,function(resultDimIdx,coordDimIndex){var resultItem=result[resultDimIdx];applyDim(defaults(resultItem,sysDimItem),coordDim,coordDimIndex);if(resultItem.name==null&&sysDimItemDimsDef){var sysDimItemDimsDefItem=sysDimItemDimsDef[coordDimIndex];!isObject$1(sysDimItemDimsDefItem)&&(sysDimItemDimsDefItem={name:sysDimItemDimsDefItem});resultItem.name=resultItem.displayName=sysDimItemDimsDefItem.name;resultItem.defaultTooltip=sysDimItemDimsDefItem.defaultTooltip}sysDimItemOtherDims&&defaults(resultItem.otherDims,sysDimItemOtherDims)
})});function applyDim(resultItem,coordDim,coordDimIndex){if(OTHER_DIMENSIONS.get(coordDim)!=null){resultItem.otherDims[coordDim]=coordDimIndex}else{resultItem.coordDim=coordDim;resultItem.coordDimIndex=coordDimIndex;coordDimNameMap.set(coordDim,true)}}var generateCoord=opt.generateCoord;var generateCoordCount=opt.generateCoordCount;var fromZero=generateCoordCount!=null;generateCoordCount=generateCoord?(generateCoordCount||1):0;var extra=generateCoord||"value";for(var resultDimIdx=0;resultDimIdx<dimCount;resultDimIdx++){var resultItem=result[resultDimIdx]=result[resultDimIdx]||{};var coordDim=resultItem.coordDim;if(coordDim==null){resultItem.coordDim=genName(extra,coordDimNameMap,fromZero);resultItem.coordDimIndex=0;if(!generateCoord||generateCoordCount<=0){resultItem.isExtraCoord=true}generateCoordCount--}resultItem.name==null&&(resultItem.name=genName(resultItem.coordDim,dataDimNameMap));if(resultItem.type==null&&guessOrdinal(source,resultDimIdx,resultItem.name)){resultItem.type="ordinal"}}return result}function getDimCount(source,sysDims,dimsDef,optDimCount){var dimCount=Math.max(source.dimensionsDetectCount||1,sysDims.length,dimsDef.length,optDimCount||0);each$1(sysDims,function(sysDimItem){var sysDimItemDimsDef=sysDimItem.dimsDef;sysDimItemDimsDef&&(dimCount=Math.max(dimCount,sysDimItemDimsDef.length))});return dimCount}function genName(name,map$$1,fromZero){if(fromZero||map$$1.get(name)!=null){var i=0;while(map$$1.get(name+i)!=null){i++}name+=i}map$$1.set(name,true);return name}var createDimensions=function(source,opt){opt=opt||{};return completeDimensions(opt.coordDimensions||[],source,{dimsDef:opt.dimensionsDefine||source.dimensionsDefine,encodeDef:opt.encodeDefine||source.encodeDefine,dimCount:opt.dimensionsCount,generateCoord:opt.generateCoord,generateCoordCount:opt.generateCoordCount})};function enableDataStack(seriesModel,dimensionInfoList,opt){opt=opt||{};var byIndex=opt.byIndex;var stackedCoordDimension=opt.stackedCoordDimension;var mayStack=!!(seriesModel&&seriesModel.get("stack"));
var stackedByDimInfo;var stackedDimInfo;var stackResultDimension;var stackedOverDimension;each$1(dimensionInfoList,function(dimensionInfo,index){if(isString(dimensionInfo)){dimensionInfoList[index]=dimensionInfo={name:dimensionInfo}}if(mayStack&&!dimensionInfo.isExtraCoord){if(!byIndex&&!stackedByDimInfo&&dimensionInfo.ordinalMeta){stackedByDimInfo=dimensionInfo}if(!stackedDimInfo&&dimensionInfo.type!=="ordinal"&&dimensionInfo.type!=="time"&&(!stackedCoordDimension||stackedCoordDimension===dimensionInfo.coordDim)){stackedDimInfo=dimensionInfo}}});if(stackedDimInfo&&!byIndex&&!stackedByDimInfo){byIndex=true}if(stackedDimInfo){stackResultDimension="__\0ecstackresult";stackedOverDimension="__\0ecstackedover";if(stackedByDimInfo){stackedByDimInfo.createInvertedIndices=true}var stackedDimCoordDim=stackedDimInfo.coordDim;var stackedDimType=stackedDimInfo.type;var stackedDimCoordIndex=0;each$1(dimensionInfoList,function(dimensionInfo){if(dimensionInfo.coordDim===stackedDimCoordDim){stackedDimCoordIndex++}});dimensionInfoList.push({name:stackResultDimension,coordDim:stackedDimCoordDim,coordDimIndex:stackedDimCoordIndex,type:stackedDimType,isExtraCoord:true,isCalculationCoord:true});stackedDimCoordIndex++;dimensionInfoList.push({name:stackedOverDimension,coordDim:stackedOverDimension,coordDimIndex:stackedDimCoordIndex,type:stackedDimType,isExtraCoord:true,isCalculationCoord:true})}return{stackedDimension:stackedDimInfo&&stackedDimInfo.name,stackedByDimension:stackedByDimInfo&&stackedByDimInfo.name,isStackedByIndex:byIndex,stackedOverDimension:stackedOverDimension,stackResultDimension:stackResultDimension}}function isDimensionStacked(data,stackedDim){return !!stackedDim&&stackedDim===data.getCalculationInfo("stackedDimension")}function getStackedDimension(data,targetDim){return isDimensionStacked(data,targetDim)?data.getCalculationInfo("stackResultDimension"):targetDim}function createListFromArray(source,seriesModel,opt){opt=opt||{};if(!Source.isInstance(source)){source=Source.seriesDataToSource(source)
}var coordSysName=seriesModel.get("coordinateSystem");var registeredCoordSys=CoordinateSystemManager.get(coordSysName);var coordSysDefine=getCoordSysDefineBySeries(seriesModel);var coordSysDimDefs;if(coordSysDefine){coordSysDimDefs=map(coordSysDefine.coordSysDims,function(dim){var dimInfo={name:dim};var axisModel=coordSysDefine.axisMap.get(dim);if(axisModel){var axisType=axisModel.get("type");dimInfo.type=getDimensionTypeByAxis(axisType)}return dimInfo})}if(!coordSysDimDefs){coordSysDimDefs=(registeredCoordSys&&(registeredCoordSys.getDimensionsInfo?registeredCoordSys.getDimensionsInfo():registeredCoordSys.dimensions.slice()))||["x","y"]}var dimInfoList=createDimensions(source,{coordDimensions:coordSysDimDefs,generateCoord:opt.generateCoord});var firstCategoryDimIndex;var hasNameEncode;coordSysDefine&&each$1(dimInfoList,function(dimInfo,dimIndex){var coordDim=dimInfo.coordDim;var categoryAxisModel=coordSysDefine.categoryAxisMap.get(coordDim);if(categoryAxisModel){if(firstCategoryDimIndex==null){firstCategoryDimIndex=dimIndex}dimInfo.ordinalMeta=categoryAxisModel.getOrdinalMeta()}if(dimInfo.otherDims.itemName!=null){hasNameEncode=true}});if(!hasNameEncode&&firstCategoryDimIndex!=null){dimInfoList[firstCategoryDimIndex].otherDims.itemName=0}var stackCalculationInfo=enableDataStack(seriesModel,dimInfoList);var list=new List(dimInfoList,seriesModel);list.setCalculationInfo(stackCalculationInfo);var dimValueGetter=(firstCategoryDimIndex!=null&&isNeedCompleteOrdinalData(source))?function(itemOpt,dimName,dataIndex,dimIndex){return dimIndex===firstCategoryDimIndex?dataIndex:this.defaultDimValueGetter(itemOpt,dimName,dataIndex,dimIndex)}:null;list.hasItemOption=false;list.initData(source,null,dimValueGetter);return list}function isNeedCompleteOrdinalData(source){if(source.sourceFormat===SOURCE_FORMAT_ORIGINAL){var sampleItem=firstDataNotNull(source.data||[]);return sampleItem!=null&&!isArray(getDataItemValue(sampleItem))}}function firstDataNotNull(data){var i=0;while(i<data.length&&data[i]==null){i++
}return data[i]}function Scale(setting){this._setting=setting||{};this._extent=[Infinity,-Infinity];this._interval=0;this.init&&this.init.apply(this,arguments)}Scale.prototype.parse=function(val){return val};Scale.prototype.getSetting=function(name){return this._setting[name]};Scale.prototype.contain=function(val){var extent=this._extent;return val>=extent[0]&&val<=extent[1]};Scale.prototype.normalize=function(val){var extent=this._extent;if(extent[1]===extent[0]){return 0.5}return(val-extent[0])/(extent[1]-extent[0])};Scale.prototype.scale=function(val){var extent=this._extent;return val*(extent[1]-extent[0])+extent[0]};Scale.prototype.unionExtent=function(other){var extent=this._extent;other[0]<extent[0]&&(extent[0]=other[0]);other[1]>extent[1]&&(extent[1]=other[1])};Scale.prototype.unionExtentFromData=function(data,dim){this.unionExtent(data.getApproximateExtent(dim))};Scale.prototype.getExtent=function(){return this._extent.slice()};Scale.prototype.setExtent=function(start,end){var thisExtent=this._extent;if(!isNaN(start)){thisExtent[0]=start}if(!isNaN(end)){thisExtent[1]=end}};Scale.prototype.isBlank=function(){return this._isBlank},Scale.prototype.setBlank=function(isBlank){this._isBlank=isBlank};Scale.prototype.getLabel=null;enableClassExtend(Scale);enableClassManagement(Scale,{registerWhenExtend:true});function OrdinalMeta(opt){this.categories=opt.categories||[];this._needCollect=opt.needCollect;this._deduplication=opt.deduplication;this._map}OrdinalMeta.createByAxisModel=function(axisModel){var option=axisModel.option;var data=option.data;var categories=data&&map(data,getName);return new OrdinalMeta({categories:categories,needCollect:!categories,deduplication:option.dedplication!==false})};var proto$1=OrdinalMeta.prototype;proto$1.getOrdinal=function(category){return getOrCreateMap(this).get(category)};proto$1.parseAndCollect=function(category){var index;var needCollect=this._needCollect;if(typeof category!=="string"&&!needCollect){return category}if(needCollect&&!this._deduplication){index=this.categories.length;
this.categories[index]=category;return index}var map$$1=getOrCreateMap(this);index=map$$1.get(category);if(index==null){if(needCollect){index=this.categories.length;this.categories[index]=category;map$$1.set(category,index)}else{index=NaN}}return index};function getOrCreateMap(ordinalMeta){return ordinalMeta._map||(ordinalMeta._map=createHashMap(ordinalMeta.categories))}function getName(obj){if(isObject$1(obj)&&obj.value!=null){return obj.value}else{return obj+""}}var scaleProto=Scale.prototype;var OrdinalScale=Scale.extend({type:"ordinal",init:function(ordinalMeta,extent){if(!ordinalMeta||isArray(ordinalMeta)){ordinalMeta=new OrdinalMeta({categories:ordinalMeta})}this._ordinalMeta=ordinalMeta;this._extent=extent||[0,ordinalMeta.categories.length-1]},parse:function(val){return typeof val==="string"?this._ordinalMeta.getOrdinal(val):Math.round(val)},contain:function(rank){rank=this.parse(rank);return scaleProto.contain.call(this,rank)&&this._ordinalMeta.categories[rank]!=null},normalize:function(val){return scaleProto.normalize.call(this,this.parse(val))},scale:function(val){return Math.round(scaleProto.scale.call(this,val))},getTicks:function(){var ticks=[];var extent=this._extent;var rank=extent[0];while(rank<=extent[1]){ticks.push(rank);rank++}return ticks},getLabel:function(n){if(!this.isBlank()){return this._ordinalMeta.categories[n]}},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(data,dim){this.unionExtent(data.getApproximateExtent(dim))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:noop,niceExtent:noop});OrdinalScale.create=function(){return new OrdinalScale()};var roundNumber$1=round$2;function intervalScaleNiceTicks(extent,splitNumber,minInterval,maxInterval){var result={};var span=extent[1]-extent[0];var interval=result.interval=nice(span/splitNumber,true);if(minInterval!=null&&interval<minInterval){interval=result.interval=minInterval}if(maxInterval!=null&&interval>maxInterval){interval=result.interval=maxInterval
}var precision=result.intervalPrecision=getIntervalPrecision(interval);var niceTickExtent=result.niceTickExtent=[roundNumber$1(Math.ceil(extent[0]/interval)*interval,precision),roundNumber$1(Math.floor(extent[1]/interval)*interval,precision)];fixExtent(niceTickExtent,extent);return result}function getIntervalPrecision(interval){return getPrecisionSafe(interval)+2}function clamp(niceTickExtent,idx,extent){niceTickExtent[idx]=Math.max(Math.min(niceTickExtent[idx],extent[1]),extent[0])}function fixExtent(niceTickExtent,extent){!isFinite(niceTickExtent[0])&&(niceTickExtent[0]=extent[0]);!isFinite(niceTickExtent[1])&&(niceTickExtent[1]=extent[1]);clamp(niceTickExtent,0,extent);clamp(niceTickExtent,1,extent);if(niceTickExtent[0]>niceTickExtent[1]){niceTickExtent[0]=niceTickExtent[1]}}function intervalScaleGetTicks(interval,extent,niceTickExtent,intervalPrecision){var ticks=[];if(!interval){return ticks}var safeLimit=10000;if(extent[0]<niceTickExtent[0]){ticks.push(extent[0])}var tick=niceTickExtent[0];while(tick<=niceTickExtent[1]){ticks.push(tick);tick=roundNumber$1(tick+interval,intervalPrecision);if(tick===ticks[ticks.length-1]){break}if(ticks.length>safeLimit){return[]}}if(extent[1]>(ticks.length?ticks[ticks.length-1]:niceTickExtent[1])){ticks.push(extent[1])}return ticks}var roundNumber=round$2;var IntervalScale=Scale.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(start,end){var thisExtent=this._extent;if(!isNaN(start)){thisExtent[0]=parseFloat(start)}if(!isNaN(end)){thisExtent[1]=parseFloat(end)}},unionExtent:function(other){var extent=this._extent;other[0]<extent[0]&&(extent[0]=other[0]);other[1]>extent[1]&&(extent[1]=other[1]);IntervalScale.prototype.setExtent.call(this,extent[0],extent[1])},getInterval:function(){return this._interval},setInterval:function(interval){this._interval=interval;this._niceExtent=this._extent.slice();this._intervalPrecision=getIntervalPrecision(interval)},getTicks:function(){return intervalScaleGetTicks(this._interval,this._extent,this._niceExtent,this._intervalPrecision)
},getLabel:function(data,opt){if(data==null){return""}var precision=opt&&opt.precision;if(precision==null){precision=getPrecisionSafe(data)||0}else{if(precision==="auto"){precision=this._intervalPrecision}}data=roundNumber(data,precision,true);return addCommas(data)},niceTicks:function(splitNumber,minInterval,maxInterval){splitNumber=splitNumber||5;var extent=this._extent;var span=extent[1]-extent[0];if(!isFinite(span)){return}if(span<0){span=-span;extent.reverse()}var result=intervalScaleNiceTicks(extent,splitNumber,minInterval,maxInterval);this._intervalPrecision=result.intervalPrecision;this._interval=result.interval;this._niceExtent=result.niceTickExtent},niceExtent:function(opt){var extent=this._extent;if(extent[0]===extent[1]){if(extent[0]!==0){var expandSize=extent[0];if(!opt.fixMax){extent[1]+=expandSize/2;extent[0]-=expandSize/2}else{extent[0]-=expandSize/2}}else{extent[1]=1}}var span=extent[1]-extent[0];if(!isFinite(span)){extent[0]=0;extent[1]=1}this.niceTicks(opt.splitNumber,opt.minInterval,opt.maxInterval);var interval=this._interval;if(!opt.fixMin){extent[0]=roundNumber(Math.floor(extent[0]/interval)*interval)}if(!opt.fixMax){extent[1]=roundNumber(Math.ceil(extent[1]/interval)*interval)}}});IntervalScale.create=function(){return new IntervalScale()};var STACK_PREFIX="__ec_stack_";var LARGE_BAR_MIN_WIDTH=0.5;var LargeArr=typeof Float32Array!=="undefined"?Float32Array:Array;function getSeriesStackId(seriesModel){return seriesModel.get("stack")||STACK_PREFIX+seriesModel.seriesIndex}function getAxisKey(axis){return axis.dim+axis.index}function getLayoutOnAxis(opt){var params=[];var baseAxis=opt.axis;var axisKey="axis0";if(baseAxis.type!=="category"){return}var bandWidth=baseAxis.getBandWidth();for(var i=0;i<opt.count||0;i++){params.push(defaults({bandWidth:bandWidth,axisKey:axisKey,stackId:STACK_PREFIX+i},opt))}var widthAndOffsets=doCalBarWidthAndOffset(params);var result=[];for(var i=0;i<opt.count;i++){var item=widthAndOffsets[axisKey][STACK_PREFIX+i];item.offsetCenter=item.offset+item.width/2;
result.push(item)}return result}function prepareLayoutBarSeries(seriesType,ecModel){var seriesModels=[];ecModel.eachSeriesByType(seriesType,function(seriesModel){if(isOnCartesian(seriesModel)&&!isInLargeMode(seriesModel)){seriesModels.push(seriesModel)}});return seriesModels}function makeColumnLayout(barSeries){var seriesInfoList=[];each$1(barSeries,function(seriesModel){var data=seriesModel.getData();var cartesian=seriesModel.coordinateSystem;var baseAxis=cartesian.getBaseAxis();var axisExtent=baseAxis.getExtent();var bandWidth=baseAxis.type==="category"?baseAxis.getBandWidth():(Math.abs(axisExtent[1]-axisExtent[0])/data.count());var barWidth=parsePercent$1(seriesModel.get("barWidth"),bandWidth);var barMaxWidth=parsePercent$1(seriesModel.get("barMaxWidth"),bandWidth);var barGap=seriesModel.get("barGap");var barCategoryGap=seriesModel.get("barCategoryGap");seriesInfoList.push({bandWidth:bandWidth,barWidth:barWidth,barMaxWidth:barMaxWidth,barGap:barGap,barCategoryGap:barCategoryGap,axisKey:getAxisKey(baseAxis),stackId:getSeriesStackId(seriesModel)})});return doCalBarWidthAndOffset(seriesInfoList)}function doCalBarWidthAndOffset(seriesInfoList){var columnsMap={};each$1(seriesInfoList,function(seriesInfo,idx){var axisKey=seriesInfo.axisKey;var bandWidth=seriesInfo.bandWidth;var columnsOnAxis=columnsMap[axisKey]||{bandWidth:bandWidth,remainedWidth:bandWidth,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}};var stacks=columnsOnAxis.stacks;columnsMap[axisKey]=columnsOnAxis;var stackId=seriesInfo.stackId;if(!stacks[stackId]){columnsOnAxis.autoWidthCount++}stacks[stackId]=stacks[stackId]||{width:0,maxWidth:0};var barWidth=seriesInfo.barWidth;if(barWidth&&!stacks[stackId].width){stacks[stackId].width=barWidth;barWidth=Math.min(columnsOnAxis.remainedWidth,barWidth);columnsOnAxis.remainedWidth-=barWidth}var barMaxWidth=seriesInfo.barMaxWidth;barMaxWidth&&(stacks[stackId].maxWidth=barMaxWidth);var barGap=seriesInfo.barGap;(barGap!=null)&&(columnsOnAxis.gap=barGap);var barCategoryGap=seriesInfo.barCategoryGap;
(barCategoryGap!=null)&&(columnsOnAxis.categoryGap=barCategoryGap)});var result={};each$1(columnsMap,function(columnsOnAxis,coordSysName){result[coordSysName]={};var stacks=columnsOnAxis.stacks;var bandWidth=columnsOnAxis.bandWidth;var categoryGap=parsePercent$1(columnsOnAxis.categoryGap,bandWidth);var barGapPercent=parsePercent$1(columnsOnAxis.gap,1);var remainedWidth=columnsOnAxis.remainedWidth;var autoWidthCount=columnsOnAxis.autoWidthCount;var autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0);each$1(stacks,function(column,stack){var maxWidth=column.maxWidth;if(maxWidth&&maxWidth<autoWidth){maxWidth=Math.min(maxWidth,remainedWidth);if(column.width){maxWidth=Math.min(maxWidth,column.width)}remainedWidth-=maxWidth;column.width=maxWidth;autoWidthCount--}});autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0);var widthSum=0;var lastColumn;each$1(stacks,function(column,idx){if(!column.width){column.width=autoWidth}lastColumn=column;widthSum+=column.width*(1+barGapPercent)});if(lastColumn){widthSum-=lastColumn.width*barGapPercent}var offset=-widthSum/2;each$1(stacks,function(column,stackId){result[coordSysName][stackId]=result[coordSysName][stackId]||{offset:offset,width:column.width};offset+=column.width*(1+barGapPercent)})});return result}function retrieveColumnLayout(barWidthAndOffset,axis,seriesModel){if(barWidthAndOffset&&axis){var result=barWidthAndOffset[getAxisKey(axis)];if(result!=null&&seriesModel!=null){result=result[getSeriesStackId(seriesModel)]}return result}}function layout(seriesType,ecModel){var seriesModels=prepareLayoutBarSeries(seriesType,ecModel);var barWidthAndOffset=makeColumnLayout(seriesModels);var lastStackCoords={};each$1(seriesModels,function(seriesModel){var data=seriesModel.getData();var cartesian=seriesModel.coordinateSystem;var baseAxis=cartesian.getBaseAxis();var stackId=getSeriesStackId(seriesModel);var columnLayoutInfo=barWidthAndOffset[getAxisKey(baseAxis)][stackId];
var columnOffset=columnLayoutInfo.offset;var columnWidth=columnLayoutInfo.width;var valueAxis=cartesian.getOtherAxis(baseAxis);var barMinHeight=seriesModel.get("barMinHeight")||0;lastStackCoords[stackId]=lastStackCoords[stackId]||[];data.setLayout({offset:columnOffset,size:columnWidth});var valueDim=data.mapDimension(valueAxis.dim);var baseDim=data.mapDimension(baseAxis.dim);var stacked=isDimensionStacked(data,valueDim);var isValueAxisH=valueAxis.isHorizontal();var valueAxisStart=getValueAxisStart(baseAxis,valueAxis,stacked);for(var idx=0,len=data.count();idx<len;idx++){var value=data.get(valueDim,idx);var baseValue=data.get(baseDim,idx);if(isNaN(value)){continue}var sign=value>=0?"p":"n";var baseCoord=valueAxisStart;if(stacked){if(!lastStackCoords[stackId][baseValue]){lastStackCoords[stackId][baseValue]={p:valueAxisStart,n:valueAxisStart}}baseCoord=lastStackCoords[stackId][baseValue][sign]}var x;var y;var width;var height;if(isValueAxisH){var coord=cartesian.dataToPoint([value,baseValue]);x=baseCoord;y=coord[1]+columnOffset;width=coord[0]-valueAxisStart;height=columnWidth;if(Math.abs(width)<barMinHeight){width=(width<0?-1:1)*barMinHeight}stacked&&(lastStackCoords[stackId][baseValue][sign]+=width)}else{var coord=cartesian.dataToPoint([baseValue,value]);x=coord[0]+columnOffset;y=baseCoord;width=columnWidth;height=coord[1]-valueAxisStart;if(Math.abs(height)<barMinHeight){height=(height<=0?-1:1)*barMinHeight}stacked&&(lastStackCoords[stackId][baseValue][sign]+=height)}data.setItemLayout(idx,{x:x,y:y,width:width,height:height})}},this)}var largeLayout={seriesType:"bar",plan:createRenderPlanner(),reset:function(seriesModel){if(!isOnCartesian(seriesModel)||!isInLargeMode(seriesModel)){return}var data=seriesModel.getData();var cartesian=seriesModel.coordinateSystem;var baseAxis=cartesian.getBaseAxis();var valueAxis=cartesian.getOtherAxis(baseAxis);var valueDim=data.mapDimension(valueAxis.dim);var baseDim=data.mapDimension(baseAxis.dim);var valueAxisHorizontal=valueAxis.isHorizontal();
var valueDimIdx=valueAxisHorizontal?0:1;var barWidth=retrieveColumnLayout(makeColumnLayout([seriesModel]),baseAxis,seriesModel).width;if(!(barWidth>LARGE_BAR_MIN_WIDTH)){barWidth=LARGE_BAR_MIN_WIDTH}return{progress:progress};function progress(params,data){var largePoints=new LargeArr(params.count*2);var dataIndex;var coord=[];var valuePair=[];var offset=0;while((dataIndex=params.next())!=null){valuePair[valueDimIdx]=data.get(valueDim,dataIndex);valuePair[1-valueDimIdx]=data.get(baseDim,dataIndex);coord=cartesian.dataToPoint(valuePair,null,coord);largePoints[offset++]=coord[0];largePoints[offset++]=coord[1]}data.setLayout({largePoints:largePoints,barWidth:barWidth,valueAxisStart:getValueAxisStart(baseAxis,valueAxis,false),valueAxisHorizontal:valueAxisHorizontal})}}};function isOnCartesian(seriesModel){return seriesModel.coordinateSystem&&seriesModel.coordinateSystem.type==="cartesian2d"}function isInLargeMode(seriesModel){return seriesModel.pipelineContext&&seriesModel.pipelineContext.large}function getValueAxisStart(baseAxis,valueAxis,stacked){var extent=valueAxis.getGlobalExtent();var min;var max;if(extent[0]>extent[1]){min=extent[1];max=extent[0]}else{min=extent[0];max=extent[1]}var valueStart=valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));valueStart<min&&(valueStart=min);valueStart>max&&(valueStart=max);return valueStart}var intervalScaleProto=IntervalScale.prototype;var mathCeil=Math.ceil;var mathFloor=Math.floor;var ONE_SECOND=1000;var ONE_MINUTE=ONE_SECOND*60;var ONE_HOUR=ONE_MINUTE*60;var ONE_DAY=ONE_HOUR*24;var bisect=function(a,x,lo,hi){while(lo<hi){var mid=lo+hi>>>1;if(a[mid][1]<x){lo=mid+1}else{hi=mid}}return lo};var TimeScale=IntervalScale.extend({type:"time",getLabel:function(val){var stepLvl=this._stepLvl;var date=new Date(val);return formatTime(stepLvl[0],date,this.getSetting("useUTC"))},niceExtent:function(opt){var extent=this._extent;if(extent[0]===extent[1]){extent[0]-=ONE_DAY;extent[1]+=ONE_DAY}if(extent[1]===-Infinity&&extent[0]===Infinity){var d=new Date();
extent[1]=+new Date(d.getFullYear(),d.getMonth(),d.getDate());extent[0]=extent[1]-ONE_DAY}this.niceTicks(opt.splitNumber,opt.minInterval,opt.maxInterval);var interval=this._interval;if(!opt.fixMin){extent[0]=round$2(mathFloor(extent[0]/interval)*interval)}if(!opt.fixMax){extent[1]=round$2(mathCeil(extent[1]/interval)*interval)}},niceTicks:function(approxTickNum,minInterval,maxInterval){approxTickNum=approxTickNum||10;var extent=this._extent;var span=extent[1]-extent[0];var approxInterval=span/approxTickNum;if(minInterval!=null&&approxInterval<minInterval){approxInterval=minInterval}if(maxInterval!=null&&approxInterval>maxInterval){approxInterval=maxInterval}var scaleLevelsLen=scaleLevels.length;var idx=bisect(scaleLevels,approxInterval,0,scaleLevelsLen);var level=scaleLevels[Math.min(idx,scaleLevelsLen-1)];var interval=level[1];if(level[0]==="year"){var yearSpan=span/interval;var yearStep=nice(yearSpan/approxTickNum,true);interval*=yearStep}var timezoneOffset=this.getSetting("useUTC")?0:(new Date(+extent[0]||+extent[1])).getTimezoneOffset()*60*1000;var niceExtent=[Math.round(mathCeil((extent[0]-timezoneOffset)/interval)*interval+timezoneOffset),Math.round(mathFloor((extent[1]-timezoneOffset)/interval)*interval+timezoneOffset)];fixExtent(niceExtent,extent);this._stepLvl=level;this._interval=interval;this._niceExtent=niceExtent},parse:function(val){return +parseDate(val)}});each$1(["contain","normalize"],function(methodName){TimeScale.prototype[methodName]=function(val){return intervalScaleProto[methodName].call(this,this.parse(val))}});var scaleLevels=[["hh:mm:ss",ONE_SECOND],["hh:mm:ss",ONE_SECOND*5],["hh:mm:ss",ONE_SECOND*10],["hh:mm:ss",ONE_SECOND*15],["hh:mm:ss",ONE_SECOND*30],["hh:mm\nMM-dd",ONE_MINUTE],["hh:mm\nMM-dd",ONE_MINUTE*5],["hh:mm\nMM-dd",ONE_MINUTE*10],["hh:mm\nMM-dd",ONE_MINUTE*15],["hh:mm\nMM-dd",ONE_MINUTE*30],["hh:mm\nMM-dd",ONE_HOUR],["hh:mm\nMM-dd",ONE_HOUR*2],["hh:mm\nMM-dd",ONE_HOUR*6],["hh:mm\nMM-dd",ONE_HOUR*12],["MM-dd\nyyyy",ONE_DAY],["MM-dd\nyyyy",ONE_DAY*2],["MM-dd\nyyyy",ONE_DAY*3],["MM-dd\nyyyy",ONE_DAY*4],["MM-dd\nyyyy",ONE_DAY*5],["MM-dd\nyyyy",ONE_DAY*6],["week",ONE_DAY*7],["MM-dd\nyyyy",ONE_DAY*10],["week",ONE_DAY*14],["week",ONE_DAY*21],["month",ONE_DAY*31],["week",ONE_DAY*42],["month",ONE_DAY*62],["week",ONE_DAY*70],["quarter",ONE_DAY*95],["month",ONE_DAY*31*4],["month",ONE_DAY*31*5],["half-year",ONE_DAY*380/2],["month",ONE_DAY*31*8],["month",ONE_DAY*31*10],["year",ONE_DAY*380]];
TimeScale.create=function(model){return new TimeScale({useUTC:model.ecModel.get("useUTC")})};var scaleProto$1=Scale.prototype;var intervalScaleProto$1=IntervalScale.prototype;var getPrecisionSafe$1=getPrecisionSafe;var roundingErrorFix=round$2;var mathFloor$1=Math.floor;var mathCeil$1=Math.ceil;var mathPow$1=Math.pow;var mathLog=Math.log;var LogScale=Scale.extend({type:"log",base:10,$constructor:function(){Scale.apply(this,arguments);this._originalScale=new IntervalScale()},getTicks:function(){var originalScale=this._originalScale;var extent=this._extent;var originalExtent=originalScale.getExtent();return map(intervalScaleProto$1.getTicks.call(this),function(val){var powVal=round$2(mathPow$1(this.base,val));powVal=(val===extent[0]&&originalScale.__fixMin)?fixRoundingError(powVal,originalExtent[0]):powVal;powVal=(val===extent[1]&&originalScale.__fixMax)?fixRoundingError(powVal,originalExtent[1]):powVal;return powVal},this)},getLabel:intervalScaleProto$1.getLabel,scale:function(val){val=scaleProto$1.scale.call(this,val);return mathPow$1(this.base,val)},setExtent:function(start,end){var base=this.base;start=mathLog(start)/mathLog(base);end=mathLog(end)/mathLog(base);intervalScaleProto$1.setExtent.call(this,start,end)},getExtent:function(){var base=this.base;var extent=scaleProto$1.getExtent.call(this);extent[0]=mathPow$1(base,extent[0]);extent[1]=mathPow$1(base,extent[1]);var originalScale=this._originalScale;var originalExtent=originalScale.getExtent();originalScale.__fixMin&&(extent[0]=fixRoundingError(extent[0],originalExtent[0]));originalScale.__fixMax&&(extent[1]=fixRoundingError(extent[1],originalExtent[1]));return extent},unionExtent:function(extent){this._originalScale.unionExtent(extent);var base=this.base;extent[0]=mathLog(extent[0])/mathLog(base);extent[1]=mathLog(extent[1])/mathLog(base);scaleProto$1.unionExtent.call(this,extent)},unionExtentFromData:function(data,dim){this.unionExtent(data.getApproximateExtent(dim))},niceTicks:function(approxTickNum){approxTickNum=approxTickNum||10;
var extent=this._extent;var span=extent[1]-extent[0];if(span===Infinity||span<=0){return}var interval=quantity(span);var err=approxTickNum/span*interval;if(err<=0.5){interval*=10}while(!isNaN(interval)&&Math.abs(interval)<1&&Math.abs(interval)>0){interval*=10}var niceExtent=[round$2(mathCeil$1(extent[0]/interval)*interval),round$2(mathFloor$1(extent[1]/interval)*interval)];this._interval=interval;this._niceExtent=niceExtent},niceExtent:function(opt){intervalScaleProto$1.niceExtent.call(this,opt);var originalScale=this._originalScale;originalScale.__fixMin=opt.fixMin;originalScale.__fixMax=opt.fixMax}});each$1(["contain","normalize"],function(methodName){LogScale.prototype[methodName]=function(val){val=mathLog(val)/mathLog(this.base);return scaleProto$1[methodName].call(this,val)}});LogScale.create=function(){return new LogScale()};function fixRoundingError(val,originalVal){return roundingErrorFix(val,getPrecisionSafe$1(originalVal))}function getScaleExtent(scale,model){var scaleType=scale.type;var min=model.getMin();var max=model.getMax();var fixMin=min!=null;var fixMax=max!=null;var originalExtent=scale.getExtent();var axisDataLen;var boundaryGap;var span;if(scaleType==="ordinal"){axisDataLen=model.getCategories().length}else{boundaryGap=model.get("boundaryGap");if(!isArray(boundaryGap)){boundaryGap=[boundaryGap||0,boundaryGap||0]}if(typeof boundaryGap[0]==="boolean"){if(__DEV__){console.warn("Boolean type for boundaryGap is only "+"allowed for ordinal axis. Please use string in "+'percentage instead, e.g., "20%". Currently, '+"boundaryGap is set to be 0.")}boundaryGap=[0,0]}boundaryGap[0]=parsePercent$1(boundaryGap[0],1);boundaryGap[1]=parsePercent$1(boundaryGap[1],1);span=(originalExtent[1]-originalExtent[0])||Math.abs(originalExtent[0])}if(min==null){min=scaleType==="ordinal"?(axisDataLen?0:NaN):originalExtent[0]-boundaryGap[0]*span}if(max==null){max=scaleType==="ordinal"?(axisDataLen?axisDataLen-1:NaN):originalExtent[1]+boundaryGap[1]*span}if(min==="dataMin"){min=originalExtent[0]
}else{if(typeof min==="function"){min=min({min:originalExtent[0],max:originalExtent[1]})}}if(max==="dataMax"){max=originalExtent[1]}else{if(typeof max==="function"){max=max({min:originalExtent[0],max:originalExtent[1]})}}(min==null||!isFinite(min))&&(min=NaN);(max==null||!isFinite(max))&&(max=NaN);scale.setBlank(eqNaN(min)||eqNaN(max)||(scaleType==="ordinal"&&!scale.getOrdinalMeta().categories.length));if(model.getNeedCrossZero()){if(min>0&&max>0&&!fixMin){min=0}if(min<0&&max<0&&!fixMax){max=0}}var ecModel=model.ecModel;if(ecModel&&(scaleType==="time")){var barSeriesModels=prepareLayoutBarSeries("bar",ecModel);var isBaseAxisAndHasBarSeries;each$1(barSeriesModels,function(seriesModel){isBaseAxisAndHasBarSeries|=seriesModel.getBaseAxis()===model.axis});if(isBaseAxisAndHasBarSeries){var barWidthAndOffset=makeColumnLayout(barSeriesModels);var adjustedScale=adjustScaleForOverflow(min,max,model,barWidthAndOffset);min=adjustedScale.min;max=adjustedScale.max}}return[min,max]}function adjustScaleForOverflow(min,max,model,barWidthAndOffset){var axisExtent=model.axis.getExtent();var axisLength=axisExtent[1]-axisExtent[0];var barsOnCurrentAxis=retrieveColumnLayout(barWidthAndOffset,model.axis);if(barsOnCurrentAxis===undefined){return{min:min,max:max}}var minOverflow=Infinity;each$1(barsOnCurrentAxis,function(item){minOverflow=Math.min(item.offset,minOverflow)});var maxOverflow=-Infinity;each$1(barsOnCurrentAxis,function(item){maxOverflow=Math.max(item.offset+item.width,maxOverflow)});minOverflow=Math.abs(minOverflow);maxOverflow=Math.abs(maxOverflow);var totalOverFlow=minOverflow+maxOverflow;var oldRange=max-min;var oldRangePercentOfNew=(1-(minOverflow+maxOverflow)/axisLength);var overflowBuffer=((oldRange/oldRangePercentOfNew)-oldRange);max+=overflowBuffer*(maxOverflow/totalOverFlow);min-=overflowBuffer*(minOverflow/totalOverFlow);return{min:min,max:max}}function niceScaleExtent(scale,model){var extent=getScaleExtent(scale,model);var fixMin=model.getMin()!=null;var fixMax=model.getMax()!=null;
var splitNumber=model.get("splitNumber");if(scale.type==="log"){scale.base=model.get("logBase")}var scaleType=scale.type;scale.setExtent(extent[0],extent[1]);scale.niceExtent({splitNumber:splitNumber,fixMin:fixMin,fixMax:fixMax,minInterval:(scaleType==="interval"||scaleType==="time")?model.get("minInterval"):null,maxInterval:(scaleType==="interval"||scaleType==="time")?model.get("maxInterval"):null});var interval=model.get("interval");if(interval!=null){scale.setInterval&&scale.setInterval(interval)}}function createScaleByModel(model,axisType){axisType=axisType||model.get("type");if(axisType){switch(axisType){case"category":return new OrdinalScale(model.getOrdinalMeta?model.getOrdinalMeta():model.getCategories(),[Infinity,-Infinity]);case"value":return new IntervalScale();default:return(Scale.getClass(axisType)||IntervalScale).create(model)}}}function ifAxisCrossZero(axis){var dataExtent=axis.scale.getExtent();var min=dataExtent[0];var max=dataExtent[1];return !((min>0&&max>0)||(min<0&&max<0))}function makeLabelFormatter(axis){var labelFormatter=axis.getLabelModel().get("formatter");var categoryTickStart=axis.type==="category"?axis.scale.getExtent()[0]:null;if(typeof labelFormatter==="string"){labelFormatter=(function(tpl){return function(val){val=axis.scale.getLabel(val);return tpl.replace("{value}",val!=null?val:"")}})(labelFormatter);return labelFormatter}else{if(typeof labelFormatter==="function"){return function(tickValue,idx){if(categoryTickStart!=null){idx=tickValue-categoryTickStart}return labelFormatter(getAxisRawValue(axis,tickValue),idx)}}else{return function(tick){return axis.scale.getLabel(tick)}}}}function getAxisRawValue(axis,value){return axis.type==="category"?axis.scale.getLabel(value):value}function estimateLabelUnionRect(axis){var axisModel=axis.model;var scale=axis.scale;if(!axisModel.get("axisLabel.show")||scale.isBlank()){return}var isCategory=axis.type==="category";var realNumberScaleTicks;var tickCount;var categoryScaleExtent=scale.getExtent();
if(isCategory){tickCount=scale.count()}else{realNumberScaleTicks=scale.getTicks();tickCount=realNumberScaleTicks.length}var axisLabelModel=axis.getLabelModel();var labelFormatter=makeLabelFormatter(axis);var rect;var step=1;if(tickCount>40){step=Math.ceil(tickCount/40)}for(var i=0;i<tickCount;i+=step){var tickValue=realNumberScaleTicks?realNumberScaleTicks[i]:categoryScaleExtent[0]+i;var label=labelFormatter(tickValue);var unrotatedSingleRect=axisLabelModel.getTextRect(label);var singleRect=rotateTextRect(unrotatedSingleRect,axisLabelModel.get("rotate")||0);rect?rect.union(singleRect):(rect=singleRect)}return rect}function rotateTextRect(textRect,rotate){var rotateRadians=rotate*Math.PI/180;var boundingBox=textRect.plain();var beforeWidth=boundingBox.width;var beforeHeight=boundingBox.height;var afterWidth=beforeWidth*Math.cos(rotateRadians)+beforeHeight*Math.sin(rotateRadians);var afterHeight=beforeWidth*Math.sin(rotateRadians)+beforeHeight*Math.cos(rotateRadians);var rotatedRect=new BoundingRect(boundingBox.x,boundingBox.y,afterWidth,afterHeight);return rotatedRect}function getOptionCategoryInterval(model){var interval=model.get("interval");return interval==null?"auto":interval}function shouldShowAllLabels(axis){return axis.type==="category"&&getOptionCategoryInterval(axis.getLabelModel())===0}var axisModelCommonMixin={getMin:function(origin){var option=this.option;var min=(!origin&&option.rangeStart!=null)?option.rangeStart:option.min;if(this.axis&&min!=null&&min!=="dataMin"&&typeof min!=="function"&&!eqNaN(min)){min=this.axis.scale.parse(min)}return min},getMax:function(origin){var option=this.option;var max=(!origin&&option.rangeEnd!=null)?option.rangeEnd:option.max;if(this.axis&&max!=null&&max!=="dataMax"&&typeof max!=="function"&&!eqNaN(max)){max=this.axis.scale.parse(max)}return max},getNeedCrossZero:function(){var option=this.option;return(option.rangeStart!=null||option.rangeEnd!=null)?false:!option.scale},getCoordSysModel:noop,setRange:function(rangeStart,rangeEnd){this.option.rangeStart=rangeStart;
this.option.rangeEnd=rangeEnd},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};var Triangle=extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(path,shape){var cx=shape.cx;var cy=shape.cy;var width=shape.width/2;var height=shape.height/2;path.moveTo(cx,cy-height);path.lineTo(cx+width,cy+height);path.lineTo(cx-width,cy+height);path.closePath()}});var Diamond=extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(path,shape){var cx=shape.cx;var cy=shape.cy;var width=shape.width/2;var height=shape.height/2;path.moveTo(cx,cy-height);path.lineTo(cx+width,cy);path.lineTo(cx,cy+height);path.lineTo(cx-width,cy);path.closePath()}});var Pin=extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(path,shape){var x=shape.x;var y=shape.y;var w=shape.width/5*3;var h=Math.max(w,shape.height);var r=w/2;var dy=r*r/(h-r);var cy=y-h+r+dy;var angle=Math.asin(dy/r);var dx=Math.cos(angle)*r;var tanX=Math.sin(angle);var tanY=Math.cos(angle);var cpLen=r*0.6;var cpLen2=r*0.7;path.moveTo(x-dx,cy+dy);path.arc(x,cy,r,Math.PI-angle,Math.PI*2+angle);path.bezierCurveTo(x+dx-tanX*cpLen,cy+dy+tanY*cpLen,x,y-cpLen2,x,y);path.bezierCurveTo(x,y-cpLen2,x-dx+tanX*cpLen,cy+dy+tanY*cpLen,x-dx,cy+dy);path.closePath()}});var Arrow=extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){var height=shape.height;var width=shape.width;var x=shape.x;var y=shape.y;var dx=width/3*2;ctx.moveTo(x,y);ctx.lineTo(x+dx,y+height);ctx.lineTo(x,y+height/4*3);ctx.lineTo(x-dx,y+height);ctx.lineTo(x,y);ctx.closePath()}});var symbolCtors={line:Line,rect:Rect,roundRect:Rect,square:Rect,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle};var symbolShapeMakers={line:function(x,y,w,h,shape){shape.x1=x;shape.y1=y+h/2;shape.x2=x+w;shape.y2=y+h/2},rect:function(x,y,w,h,shape){shape.x=x;shape.y=y;shape.width=w;shape.height=h},roundRect:function(x,y,w,h,shape){shape.x=x;shape.y=y;shape.width=w;
shape.height=h;shape.r=Math.min(w,h)/4},square:function(x,y,w,h,shape){var size=Math.min(w,h);shape.x=x;shape.y=y;shape.width=size;shape.height=size},circle:function(x,y,w,h,shape){shape.cx=x+w/2;shape.cy=y+h/2;shape.r=Math.min(w,h)/2},diamond:function(x,y,w,h,shape){shape.cx=x+w/2;shape.cy=y+h/2;shape.width=w;shape.height=h},pin:function(x,y,w,h,shape){shape.x=x+w/2;shape.y=y+h/2;shape.width=w;shape.height=h},arrow:function(x,y,w,h,shape){shape.x=x+w/2;shape.y=y+h/2;shape.width=w;shape.height=h},triangle:function(x,y,w,h,shape){shape.cx=x+w/2;shape.cy=y+h/2;shape.width=w;shape.height=h}};var symbolBuildProxies={};each$1(symbolCtors,function(Ctor,name){symbolBuildProxies[name]=new Ctor()});var SymbolClz=extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var style=this.style;var shape=this.shape;if(shape.symbolType==="pin"&&style.textPosition==="inside"){style.textPosition=["50%","40%"];style.textAlign="center";style.textVerticalAlign="middle"}},buildPath:function(ctx,shape,inBundle){var symbolType=shape.symbolType;var proxySymbol=symbolBuildProxies[symbolType];if(shape.symbolType!=="none"){if(!proxySymbol){symbolType="rect";proxySymbol=symbolBuildProxies[symbolType]}symbolShapeMakers[symbolType](shape.x,shape.y,shape.width,shape.height,proxySymbol.shape);proxySymbol.buildPath(ctx,proxySymbol.shape,inBundle)}}});function symbolPathSetColor(color,innerColor){if(this.type!=="image"){var symbolStyle=this.style;var symbolShape=this.shape;if(symbolShape&&symbolShape.symbolType==="line"){symbolStyle.stroke=color}else{if(this.__isEmptyBrush){symbolStyle.stroke=color;symbolStyle.fill=innerColor||"#fff"}else{symbolStyle.fill&&(symbolStyle.fill=color);symbolStyle.stroke&&(symbolStyle.stroke=color)}}this.dirty(false)}}function createSymbol(symbolType,x,y,w,h,color,keepAspect){var isEmpty=symbolType.indexOf("empty")===0;if(isEmpty){symbolType=symbolType.substr(5,1).toLowerCase()+symbolType.substr(6)}var symbolPath;if(symbolType.indexOf("image://")===0){symbolPath=makeImage(symbolType.slice(8),new BoundingRect(x,y,w,h),keepAspect?"center":"cover")
}else{if(symbolType.indexOf("path://")===0){symbolPath=makePath(symbolType.slice(7),{},new BoundingRect(x,y,w,h),keepAspect?"center":"cover")}else{symbolPath=new SymbolClz({shape:{symbolType:symbolType,x:x,y:y,width:w,height:h}})}}symbolPath.__isEmptyBrush=isEmpty;symbolPath.setColor=symbolPathSetColor;symbolPath.setColor(color);return symbolPath}function createList(seriesModel){return createListFromArray(seriesModel.getSource(),seriesModel)}var dataStack$1={isDimensionStacked:isDimensionStacked,enableDataStack:enableDataStack,getStackedDimension:getStackedDimension};function createScale(dataExtent,option){var axisModel=option;if(!Model.isInstance(option)){axisModel=new Model(option);mixin(axisModel,axisModelCommonMixin)}var scale=createScaleByModel(axisModel);scale.setExtent(dataExtent[0],dataExtent[1]);niceScaleExtent(scale,axisModel);return scale}function mixinAxisModelCommonMethods(Model$$1){mixin(Model$$1,axisModelCommonMixin)}var helper=(Object.freeze||Object)({createList:createList,getLayoutRect:getLayoutRect,dataStack:dataStack$1,createScale:createScale,mixinAxisModelCommonMethods:mixinAxisModelCommonMethods,completeDimensions:completeDimensions,createDimensions:createDimensions,createSymbol:createSymbol});var EPSILON$3=1e-8;function isAroundEqual$1(a,b){return Math.abs(a-b)<EPSILON$3}function contain$1(points,x,y){var w=0;var p=points[0];if(!p){return false}for(var i=1;i<points.length;i++){var p2=points[i];w+=windingLine(p[0],p[1],p2[0],p2[1],x,y);p=p2}var p0=points[0];if(!isAroundEqual$1(p[0],p0[0])||!isAroundEqual$1(p[1],p0[1])){w+=windingLine(p[0],p[1],p0[0],p0[1],x,y)}return w!==0}function Region(name,geometries,cp){this.name=name;this.geometries=geometries;if(!cp){var rect=this.getBoundingRect();cp=[rect.x+rect.width/2,rect.y+rect.height/2]}else{cp=[cp[0],cp[1]]}this.center=cp}Region.prototype={constructor:Region,properties:null,getBoundingRect:function(){var rect=this._rect;if(rect){return rect}var MAX_NUMBER=Number.MAX_VALUE;var min$$1=[MAX_NUMBER,MAX_NUMBER];
var max$$1=[-MAX_NUMBER,-MAX_NUMBER];var min2=[];var max2=[];var geometries=this.geometries;for(var i=0;i<geometries.length;i++){if(geometries[i].type!=="polygon"){continue}var exterior=geometries[i].exterior;fromPoints(exterior,min2,max2);min(min$$1,min$$1,min2);max(max$$1,max$$1,max2)}if(i===0){min$$1[0]=min$$1[1]=max$$1[0]=max$$1[1]=0}return(this._rect=new BoundingRect(min$$1[0],min$$1[1],max$$1[0]-min$$1[0],max$$1[1]-min$$1[1]))},contain:function(coord){var rect=this.getBoundingRect();var geometries=this.geometries;if(!rect.contain(coord[0],coord[1])){return false}loopGeo:for(var i=0,len$$1=geometries.length;i<len$$1;i++){if(geometries[i].type!=="polygon"){continue}var exterior=geometries[i].exterior;var interiors=geometries[i].interiors;if(contain$1(exterior,coord[0],coord[1])){for(var k=0;k<(interiors?interiors.length:0);k++){if(contain$1(interiors[k])){continue loopGeo}}return true}}return false},transformTo:function(x,y,width,height){var rect=this.getBoundingRect();var aspect=rect.width/rect.height;if(!width){width=aspect*height}else{if(!height){height=width/aspect}}var target=new BoundingRect(x,y,width,height);var transform=rect.calculateTransform(target);var geometries=this.geometries;for(var i=0;i<geometries.length;i++){if(geometries[i].type!=="polygon"){continue}var exterior=geometries[i].exterior;var interiors=geometries[i].interiors;for(var p=0;p<exterior.length;p++){applyTransform(exterior[p],exterior[p],transform)}for(var h=0;h<(interiors?interiors.length:0);h++){for(var p=0;p<interiors[h].length;p++){applyTransform(interiors[h][p],interiors[h][p],transform)}}}rect=this._rect;rect.copy(target);this.center=[rect.x+rect.width/2,rect.y+rect.height/2]},cloneShallow:function(name){name==null&&(name=this.name);var newRegion=new Region(name,this.geometries,this.center);newRegion._rect=this._rect;newRegion.transformTo=null;return newRegion}};function decode(json){if(!json.UTF8Encoding){return json}var encodeScale=json.UTF8Scale;if(encodeScale==null){encodeScale=1024
}var features=json.features;for(var f=0;f<features.length;f++){var feature=features[f];var geometry=feature.geometry;var coordinates=geometry.coordinates;var encodeOffsets=geometry.encodeOffsets;for(var c=0;c<coordinates.length;c++){var coordinate=coordinates[c];if(geometry.type==="Polygon"){coordinates[c]=decodePolygon(coordinate,encodeOffsets[c],encodeScale)}else{if(geometry.type==="MultiPolygon"){for(var c2=0;c2<coordinate.length;c2++){var polygon=coordinate[c2];coordinate[c2]=decodePolygon(polygon,encodeOffsets[c][c2],encodeScale)}}}}}json.UTF8Encoding=false;return json}function decodePolygon(coordinate,encodeOffsets,encodeScale){var result=[];var prevX=encodeOffsets[0];var prevY=encodeOffsets[1];for(var i=0;i<coordinate.length;i+=2){var x=coordinate.charCodeAt(i)-64;var y=coordinate.charCodeAt(i+1)-64;x=(x>>1)^(-(x&1));y=(y>>1)^(-(y&1));x+=prevX;y+=prevY;prevX=x;prevY=y;result.push([x/encodeScale,y/encodeScale])}return result}var parseGeoJson$1=function(geoJson){decode(geoJson);return map(filter(geoJson.features,function(featureObj){return featureObj.geometry&&featureObj.properties&&featureObj.geometry.coordinates.length>0}),function(featureObj){var properties=featureObj.properties;var geo=featureObj.geometry;var coordinates=geo.coordinates;var geometries=[];if(geo.type==="Polygon"){geometries.push({type:"polygon",exterior:coordinates[0],interiors:coordinates.slice(1)})}if(geo.type==="MultiPolygon"){each$1(coordinates,function(item){if(item[0]){geometries.push({type:"polygon",exterior:item[0],interiors:item.slice(1)})}})}var region=new Region(properties.name,geometries,properties.cp);region.properties=properties;return region})};var inner$6=makeInner();function createAxisLabels(axis){return axis.type==="category"?makeCategoryLabels(axis):makeRealNumberLabels(axis)}function createAxisTicks(axis,tickModel){return axis.type==="category"?makeCategoryTicks(axis,tickModel):{ticks:axis.scale.getTicks()}}function makeCategoryLabels(axis){var labelModel=axis.getLabelModel();
var result=makeCategoryLabelsActually(axis,labelModel);return(!labelModel.get("show")||axis.scale.isBlank())?{labels:[],labelCategoryInterval:result.labelCategoryInterval}:result}function makeCategoryLabelsActually(axis,labelModel){var labelsCache=getListCache(axis,"labels");var optionLabelInterval=getOptionCategoryInterval(labelModel);var result=listCacheGet(labelsCache,optionLabelInterval);if(result){return result}var labels;var numericLabelInterval;if(isFunction$1(optionLabelInterval)){labels=makeLabelsByCustomizedCategoryInterval(axis,optionLabelInterval)}else{numericLabelInterval=optionLabelInterval==="auto"?makeAutoCategoryInterval(axis):optionLabelInterval;labels=makeLabelsByNumericCategoryInterval(axis,numericLabelInterval)}return listCacheSet(labelsCache,optionLabelInterval,{labels:labels,labelCategoryInterval:numericLabelInterval})}function makeCategoryTicks(axis,tickModel){var ticksCache=getListCache(axis,"ticks");var optionTickInterval=getOptionCategoryInterval(tickModel);var result=listCacheGet(ticksCache,optionTickInterval);if(result){return result}var ticks;var tickCategoryInterval;if(!tickModel.get("show")||axis.scale.isBlank()){ticks=[]}if(isFunction$1(optionTickInterval)){ticks=makeLabelsByCustomizedCategoryInterval(axis,optionTickInterval,true)}else{if(optionTickInterval==="auto"){var labelsResult=makeCategoryLabelsActually(axis,axis.getLabelModel());tickCategoryInterval=labelsResult.labelCategoryInterval;ticks=map(labelsResult.labels,function(labelItem){return labelItem.tickValue})}else{tickCategoryInterval=optionTickInterval;ticks=makeLabelsByNumericCategoryInterval(axis,tickCategoryInterval,true)}}return listCacheSet(ticksCache,optionTickInterval,{ticks:ticks,tickCategoryInterval:tickCategoryInterval})}function makeRealNumberLabels(axis){var ticks=axis.scale.getTicks();var labelFormatter=makeLabelFormatter(axis);return{labels:map(ticks,function(tickValue,idx){return{formattedLabel:labelFormatter(tickValue,idx),rawLabel:axis.scale.getLabel(tickValue),tickValue:tickValue}
})}}function getListCache(axis,prop){return inner$6(axis)[prop]||(inner$6(axis)[prop]=[])}function listCacheGet(cache,key){for(var i=0;i<cache.length;i++){if(cache[i].key===key){return cache[i].value}}}function listCacheSet(cache,key,value){cache.push({key:key,value:value});return value}function makeAutoCategoryInterval(axis){var result=inner$6(axis).autoInterval;return result!=null?result:(inner$6(axis).autoInterval=axis.calculateCategoryInterval())}function calculateCategoryInterval(axis){var params=fetchAutoCategoryIntervalCalculationParams(axis);var labelFormatter=makeLabelFormatter(axis);var rotation=(params.axisRotate-params.labelRotate)/180*Math.PI;var ordinalScale=axis.scale;var ordinalExtent=ordinalScale.getExtent();var tickCount=ordinalScale.count();if(ordinalExtent[1]-ordinalExtent[0]<1){return 0}var step=1;if(tickCount>40){step=Math.max(1,Math.floor(tickCount/40))}var tickValue=ordinalExtent[0];var unitSpan=axis.dataToCoord(tickValue+1)-axis.dataToCoord(tickValue);var unitW=Math.abs(unitSpan*Math.cos(rotation));var unitH=Math.abs(unitSpan*Math.sin(rotation));var maxW=0;var maxH=0;for(;tickValue<=ordinalExtent[1];tickValue+=step){var width=0;var height=0;var rect=getBoundingRect(labelFormatter(tickValue),params.font,"center","top");width=rect.width*1.3;height=rect.height*1.3;maxW=Math.max(maxW,width,7);maxH=Math.max(maxH,height,7)}var dw=maxW/unitW;var dh=maxH/unitH;isNaN(dw)&&(dw=Infinity);isNaN(dh)&&(dh=Infinity);var interval=Math.max(0,Math.floor(Math.min(dw,dh)));var cache=inner$6(axis.model);var lastAutoInterval=cache.lastAutoInterval;var lastTickCount=cache.lastTickCount;if(lastAutoInterval!=null&&lastTickCount!=null&&Math.abs(lastAutoInterval-interval)<=1&&Math.abs(lastTickCount-tickCount)<=1&&lastAutoInterval>interval){interval=lastAutoInterval}else{cache.lastTickCount=tickCount;cache.lastAutoInterval=interval}return interval}function fetchAutoCategoryIntervalCalculationParams(axis){var labelModel=axis.getLabelModel();return{axisRotate:axis.getRotate?axis.getRotate():(axis.isHorizontal&&!axis.isHorizontal())?90:0,labelRotate:labelModel.get("rotate")||0,font:labelModel.getFont()}
}function makeLabelsByNumericCategoryInterval(axis,categoryInterval,onlyTick){var labelFormatter=makeLabelFormatter(axis);var ordinalScale=axis.scale;var ordinalExtent=ordinalScale.getExtent();var labelModel=axis.getLabelModel();var result=[];var step=Math.max((categoryInterval||0)+1,1);var startTick=ordinalExtent[0];var tickCount=ordinalScale.count();if(startTick!==0&&step>1&&tickCount/step>2){startTick=Math.round(Math.ceil(startTick/step)*step)}var showAllLabel=shouldShowAllLabels(axis);var includeMinLabel=labelModel.get("showMinLabel")||showAllLabel;var includeMaxLabel=labelModel.get("showMaxLabel")||showAllLabel;if(includeMinLabel&&startTick!==ordinalExtent[0]){addItem(ordinalExtent[0])}var tickValue=startTick;for(;tickValue<=ordinalExtent[1];tickValue+=step){addItem(tickValue)}if(includeMaxLabel&&tickValue!==ordinalExtent[1]){addItem(ordinalExtent[1])}function addItem(tVal){result.push(onlyTick?tVal:{formattedLabel:labelFormatter(tVal),rawLabel:ordinalScale.getLabel(tVal),tickValue:tVal})}return result}function makeLabelsByCustomizedCategoryInterval(axis,categoryInterval,onlyTick){var ordinalScale=axis.scale;var labelFormatter=makeLabelFormatter(axis);var result=[];each$1(ordinalScale.getTicks(),function(tickValue){var rawLabel=ordinalScale.getLabel(tickValue);if(categoryInterval(tickValue,rawLabel)){result.push(onlyTick?tickValue:{formattedLabel:labelFormatter(tickValue),rawLabel:rawLabel,tickValue:tickValue})}});return result}var NORMALIZED_EXTENT=[0,1];var Axis=function(dim,scale,extent){this.dim=dim;this.scale=scale;this._extent=extent||[0,0];this.inverse=false;this.onBand=false};Axis.prototype={constructor:Axis,contain:function(coord){var extent=this._extent;var min=Math.min(extent[0],extent[1]);var max=Math.max(extent[0],extent[1]);return coord>=min&&coord<=max},containData:function(data){return this.contain(this.dataToCoord(data))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(dataExtent){return getPixelPrecision(dataExtent||this.scale.getExtent(),this._extent)
},setExtent:function(start,end){var extent=this._extent;extent[0]=start;extent[1]=end},dataToCoord:function(data,clamp){var extent=this._extent;var scale=this.scale;data=scale.normalize(data);if(this.onBand&&scale.type==="ordinal"){extent=extent.slice();fixExtentWithBands(extent,scale.count())}return linearMap(data,NORMALIZED_EXTENT,extent,clamp)},coordToData:function(coord,clamp){var extent=this._extent;var scale=this.scale;if(this.onBand&&scale.type==="ordinal"){extent=extent.slice();fixExtentWithBands(extent,scale.count())}var t=linearMap(coord,extent,NORMALIZED_EXTENT,clamp);return this.scale.scale(t)},pointToData:function(point,clamp){},getTicksCoords:function(opt){opt=opt||{};var tickModel=opt.tickModel||this.getTickModel();var result=createAxisTicks(this,tickModel);var ticks=result.ticks;var ticksCoords=map(ticks,function(tickValue){return{coord:this.dataToCoord(tickValue),tickValue:tickValue}},this);var alignWithLabel=tickModel.get("alignWithLabel");fixOnBandTicksCoords(this,ticksCoords,result.tickCategoryInterval,alignWithLabel,opt.clamp);return ticksCoords},getViewLabels:function(){return createAxisLabels(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var axisExtent=this._extent;var dataExtent=this.scale.getExtent();var len=dataExtent[1]-dataExtent[0]+(this.onBand?1:0);len===0&&(len=1);var size=Math.abs(axisExtent[1]-axisExtent[0]);return Math.abs(size)/len},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return calculateCategoryInterval(this)}};function fixExtentWithBands(extent,nTick){var size=extent[1]-extent[0];var len=nTick;var margin=size/len/2;extent[0]+=margin;extent[1]-=margin}function fixOnBandTicksCoords(axis,ticksCoords,tickCategoryInterval,alignWithLabel,clamp){var ticksLen=ticksCoords.length;if(!axis.onBand||alignWithLabel||!ticksLen){return}var axisExtent=axis.getExtent();var last;if(ticksLen===1){ticksCoords[0].coord=axisExtent[0];
last=ticksCoords[1]={coord:axisExtent[0]}}else{var shift=(ticksCoords[1].coord-ticksCoords[0].coord);each$1(ticksCoords,function(ticksItem){ticksItem.coord-=shift/2;var tickCategoryInterval=tickCategoryInterval||0;if(tickCategoryInterval%2>0){ticksItem.coord-=shift/((tickCategoryInterval+1)*2)}});last={coord:ticksCoords[ticksLen-1].coord+shift};ticksCoords.push(last)}var inverse=axisExtent[0]>axisExtent[1];if(littleThan(ticksCoords[0].coord,axisExtent[0])){clamp?(ticksCoords[0].coord=axisExtent[0]):ticksCoords.shift()}if(clamp&&littleThan(axisExtent[0],ticksCoords[0].coord)){ticksCoords.unshift({coord:axisExtent[0]})}if(littleThan(axisExtent[1],last.coord)){clamp?(last.coord=axisExtent[1]):ticksCoords.pop()}if(clamp&&littleThan(last.coord,axisExtent[1])){ticksCoords.push({coord:axisExtent[1]})}function littleThan(a,b){return inverse?a>b:a<b}}var parseGeoJson=parseGeoJson$1;var ecUtil={};each$1(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(name){ecUtil[name]=zrUtil[name]});var graphic$1={};each$1(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(name){graphic$1[name]=graphic[name]});SeriesModel.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(option,ecModel){if(__DEV__){var coordSys=option.coordinateSystem;if(coordSys!=="polar"&&coordSys!=="cartesian2d"){throw new Error("Line not support coordinateSystem besides cartesian and polar")}}return createListFromArray(this.getSource(),this)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,clipOverflow:true,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:false,smooth:false,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:true,showAllSymbol:"auto",connectNulls:false,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:Infinity}});
function getDefaultLabel(data,dataIndex){var labelDims=data.mapDimension("defaultedLabel",true);var len=labelDims.length;if(len===1){return retrieveRawValue(data,dataIndex,labelDims[0])}else{if(len){var vals=[];for(var i=0;i<labelDims.length;i++){var val=retrieveRawValue(data,dataIndex,labelDims[i]);vals.push(val)}return vals.join(" ")}}}function SymbolClz$1(data,idx,seriesScope){Group.call(this);this.updateData(data,idx,seriesScope)}var symbolProto=SymbolClz$1.prototype;var getSymbolSize=SymbolClz$1.getSymbolSize=function(data,idx){var symbolSize=data.getItemVisual(idx,"symbolSize");return symbolSize instanceof Array?symbolSize.slice():[+symbolSize,+symbolSize]};function getScale(symbolSize){return[symbolSize[0]/2,symbolSize[1]/2]}function driftSymbol(dx,dy){this.parent.drift(dx,dy)}symbolProto._createSymbol=function(symbolType,data,idx,symbolSize,keepAspect){this.removeAll();var color=data.getItemVisual(idx,"color");var symbolPath=createSymbol(symbolType,-1,-1,2,2,color,keepAspect);symbolPath.attr({z2:100,culling:true,scale:getScale(symbolSize)});symbolPath.drift=driftSymbol;this._symbolType=symbolType;this.add(symbolPath)};symbolProto.stopSymbolAnimation=function(toLastFrame){this.childAt(0).stopAnimation(toLastFrame)};symbolProto.getSymbolPath=function(){return this.childAt(0)};symbolProto.getScale=function(){return this.childAt(0).scale};symbolProto.highlight=function(){this.childAt(0).trigger("emphasis")};symbolProto.downplay=function(){this.childAt(0).trigger("normal")};symbolProto.setZ=function(zlevel,z){var symbolPath=this.childAt(0);symbolPath.zlevel=zlevel;symbolPath.z=z};symbolProto.setDraggable=function(draggable){var symbolPath=this.childAt(0);symbolPath.draggable=draggable;symbolPath.cursor=draggable?"move":"pointer"};symbolProto.updateData=function(data,idx,seriesScope){this.silent=false;var symbolType=data.getItemVisual(idx,"symbol")||"circle";var seriesModel=data.hostModel;var symbolSize=getSymbolSize(data,idx);var isInit=symbolType!==this._symbolType;
if(isInit){var keepAspect=data.getItemVisual(idx,"symbolKeepAspect");this._createSymbol(symbolType,data,idx,symbolSize,keepAspect)}else{var symbolPath=this.childAt(0);symbolPath.silent=false;updateProps(symbolPath,{scale:getScale(symbolSize)},seriesModel,idx)}this._updateCommon(data,idx,symbolSize,seriesScope);if(isInit){var symbolPath=this.childAt(0);var fadeIn=seriesScope&&seriesScope.fadeIn;var target={scale:symbolPath.scale.slice()};fadeIn&&(target.style={opacity:symbolPath.style.opacity});symbolPath.scale=[0,0];fadeIn&&(symbolPath.style.opacity=0);initProps(symbolPath,target,seriesModel,idx)}this._seriesModel=seriesModel};var normalStyleAccessPath=["itemStyle"];var emphasisStyleAccessPath=["emphasis","itemStyle"];var normalLabelAccessPath=["label"];var emphasisLabelAccessPath=["emphasis","label"];symbolProto._updateCommon=function(data,idx,symbolSize,seriesScope){var symbolPath=this.childAt(0);var seriesModel=data.hostModel;var color=data.getItemVisual(idx,"color");if(symbolPath.type!=="image"){symbolPath.useStyle({strokeNoScale:true})}var itemStyle=seriesScope&&seriesScope.itemStyle;var hoverItemStyle=seriesScope&&seriesScope.hoverItemStyle;var symbolRotate=seriesScope&&seriesScope.symbolRotate;var symbolOffset=seriesScope&&seriesScope.symbolOffset;var labelModel=seriesScope&&seriesScope.labelModel;var hoverLabelModel=seriesScope&&seriesScope.hoverLabelModel;var hoverAnimation=seriesScope&&seriesScope.hoverAnimation;var cursorStyle=seriesScope&&seriesScope.cursorStyle;if(!seriesScope||data.hasItemOption){var itemModel=(seriesScope&&seriesScope.itemModel)?seriesScope.itemModel:data.getItemModel(idx);itemStyle=itemModel.getModel(normalStyleAccessPath).getItemStyle(["color"]);hoverItemStyle=itemModel.getModel(emphasisStyleAccessPath).getItemStyle();symbolRotate=itemModel.getShallow("symbolRotate");symbolOffset=itemModel.getShallow("symbolOffset");labelModel=itemModel.getModel(normalLabelAccessPath);hoverLabelModel=itemModel.getModel(emphasisLabelAccessPath);hoverAnimation=itemModel.getShallow("hoverAnimation");
cursorStyle=itemModel.getShallow("cursor")}else{hoverItemStyle=extend({},hoverItemStyle)}var elStyle=symbolPath.style;symbolPath.attr("rotation",(symbolRotate||0)*Math.PI/180||0);if(symbolOffset){symbolPath.attr("position",[parsePercent$1(symbolOffset[0],symbolSize[0]),parsePercent$1(symbolOffset[1],symbolSize[1])])}cursorStyle&&symbolPath.attr("cursor",cursorStyle);symbolPath.setColor(color,seriesScope&&seriesScope.symbolInnerColor);symbolPath.setStyle(itemStyle);var opacity=data.getItemVisual(idx,"opacity");if(opacity!=null){elStyle.opacity=opacity}var liftZ=data.getItemVisual(idx,"liftZ");var z2Origin=symbolPath.__z2Origin;if(liftZ!=null){if(z2Origin==null){symbolPath.__z2Origin=symbolPath.z2;symbolPath.z2+=liftZ}}else{if(z2Origin!=null){symbolPath.z2=z2Origin;symbolPath.__z2Origin=null}}var useNameLabel=seriesScope&&seriesScope.useNameLabel;setLabelStyle(elStyle,hoverItemStyle,labelModel,hoverLabelModel,{labelFetcher:seriesModel,labelDataIndex:idx,defaultText:getLabelDefaultText,isRectText:true,autoColor:color});function getLabelDefaultText(idx,opt){return useNameLabel?data.getName(idx):getDefaultLabel(data,idx)}symbolPath.off("mouseover").off("mouseout").off("emphasis").off("normal");symbolPath.hoverStyle=hoverItemStyle;setHoverStyle(symbolPath);symbolPath.__symbolOriginalScale=getScale(symbolSize);if(hoverAnimation&&seriesModel.isAnimationEnabled()){symbolPath.on("mouseover",onMouseOver).on("mouseout",onMouseOut).on("emphasis",onEmphasis).on("normal",onNormal)}};function onMouseOver(){!isInEmphasis(this)&&onEmphasis.call(this)}function onMouseOut(){!isInEmphasis(this)&&onNormal.call(this)}function onEmphasis(){if(this.incremental||this.useHoverLayer){return}var scale=this.__symbolOriginalScale;var ratio=scale[1]/scale[0];this.animateTo({scale:[Math.max(scale[0]*1.1,scale[0]+3),Math.max(scale[1]*1.1,scale[1]+3*ratio)]},400,"elasticOut")}function onNormal(){if(this.incremental||this.useHoverLayer){return}this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")
}symbolProto.fadeOut=function(cb,opt){var symbolPath=this.childAt(0);this.silent=symbolPath.silent=true;!(opt&&opt.keepLabel)&&(symbolPath.style.text=null);updateProps(symbolPath,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,cb)};inherits(SymbolClz$1,Group);function SymbolDraw(symbolCtor){this.group=new Group();this._symbolCtor=symbolCtor||SymbolClz$1}var symbolDrawProto=SymbolDraw.prototype;function symbolNeedsDraw(data,point,idx,opt){return point&&!isNaN(point[0])&&!isNaN(point[1])&&!(opt.isIgnore&&opt.isIgnore(idx))&&!(opt.clipShape&&!opt.clipShape.contain(point[0],point[1]))&&data.getItemVisual(idx,"symbol")!=="none"}symbolDrawProto.updateData=function(data,opt){opt=normalizeUpdateOpt(opt);var group=this.group;var seriesModel=data.hostModel;var oldData=this._data;var SymbolCtor=this._symbolCtor;var seriesScope=makeSeriesScope(data);if(!oldData){group.removeAll()}data.diff(oldData).add(function(newIdx){var point=data.getItemLayout(newIdx);if(symbolNeedsDraw(data,point,newIdx,opt)){var symbolEl=new SymbolCtor(data,newIdx,seriesScope);symbolEl.attr("position",point);data.setItemGraphicEl(newIdx,symbolEl);group.add(symbolEl)}}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);var point=data.getItemLayout(newIdx);if(!symbolNeedsDraw(data,point,newIdx,opt)){group.remove(symbolEl);return}if(!symbolEl){symbolEl=new SymbolCtor(data,newIdx);symbolEl.attr("position",point)}else{symbolEl.updateData(data,newIdx,seriesScope);updateProps(symbolEl,{position:point},seriesModel)}group.add(symbolEl);data.setItemGraphicEl(newIdx,symbolEl)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&el.fadeOut(function(){group.remove(el)})}).execute();this._data=data};symbolDrawProto.isPersistent=function(){return true};symbolDrawProto.updateLayout=function(){var data=this._data;if(data){data.eachItemGraphicEl(function(el,idx){var point=data.getItemLayout(idx);el.attr("position",point)})}};symbolDrawProto.incrementalPrepareUpdate=function(data){this._seriesScope=makeSeriesScope(data);
this._data=null;this.group.removeAll()};symbolDrawProto.incrementalUpdate=function(taskParams,data,opt){opt=normalizeUpdateOpt(opt);function updateIncrementalAndHover(el){if(!el.isGroup){el.incremental=el.useHoverLayer=true}}for(var idx=taskParams.start;idx<taskParams.end;idx++){var point=data.getItemLayout(idx);if(symbolNeedsDraw(data,point,idx,opt)){var el=new this._symbolCtor(data,idx,this._seriesScope);el.traverse(updateIncrementalAndHover);el.attr("position",point);this.group.add(el);data.setItemGraphicEl(idx,el)}}};function normalizeUpdateOpt(opt){if(opt!=null&&!isObject$1(opt)){opt={isIgnore:opt}}return opt||{}}symbolDrawProto.remove=function(enableAnimation){var group=this.group;var data=this._data;if(data&&enableAnimation){data.eachItemGraphicEl(function(el){el.fadeOut(function(){group.remove(el)})})}else{group.removeAll()}};function makeSeriesScope(data){var seriesModel=data.hostModel;return{itemStyle:seriesModel.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:seriesModel.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:seriesModel.get("symbolRotate"),symbolOffset:seriesModel.get("symbolOffset"),hoverAnimation:seriesModel.get("hoverAnimation"),labelModel:seriesModel.getModel("label"),hoverLabelModel:seriesModel.getModel("emphasis.label"),cursorStyle:seriesModel.get("cursor")}}function prepareDataCoordInfo(coordSys,data,valueOrigin){var baseAxis=coordSys.getBaseAxis();var valueAxis=coordSys.getOtherAxis(baseAxis);var valueStart=getValueStart(valueAxis,valueOrigin);var baseAxisDim=baseAxis.dim;var valueAxisDim=valueAxis.dim;var valueDim=data.mapDimension(valueAxisDim);var baseDim=data.mapDimension(baseAxisDim);var baseDataOffset=valueAxisDim==="x"||valueAxisDim==="radius"?1:0;var dims=map(coordSys.dimensions,function(coordDim){return data.mapDimension(coordDim)});var stacked;var stackResultDim=data.getCalculationInfo("stackResultDimension");if(stacked|=isDimensionStacked(data,dims[0])){dims[0]=stackResultDim}if(stacked|=isDimensionStacked(data,dims[1])){dims[1]=stackResultDim
}return{dataDimsForPoint:dims,valueStart:valueStart,valueAxisDim:valueAxisDim,baseAxisDim:baseAxisDim,stacked:!!stacked,valueDim:valueDim,baseDim:baseDim,baseDataOffset:baseDataOffset,stackedOverDimension:data.getCalculationInfo("stackedOverDimension")}}function getValueStart(valueAxis,valueOrigin){var valueStart=0;var extent=valueAxis.scale.getExtent();if(valueOrigin==="start"){valueStart=extent[0]}else{if(valueOrigin==="end"){valueStart=extent[1]}else{if(extent[0]>0){valueStart=extent[0]}else{if(extent[1]<0){valueStart=extent[1]}}}}return valueStart}function getStackedOnPoint(dataCoordInfo,coordSys,data,idx){var value=NaN;if(dataCoordInfo.stacked){value=data.get(data.getCalculationInfo("stackedOverDimension"),idx)}if(isNaN(value)){value=dataCoordInfo.valueStart}var baseDataOffset=dataCoordInfo.baseDataOffset;var stackedData=[];stackedData[baseDataOffset]=data.get(dataCoordInfo.baseDim,idx);stackedData[1-baseDataOffset]=value;return coordSys.dataToPoint(stackedData)}function diffData(oldData,newData){var diffResult=[];newData.diff(oldData).add(function(idx){diffResult.push({cmd:"+",idx:idx})}).update(function(newIdx,oldIdx){diffResult.push({cmd:"=",idx:oldIdx,idx1:newIdx})}).remove(function(idx){diffResult.push({cmd:"-",idx:idx})}).execute();return diffResult}var lineAnimationDiff=function(oldData,newData,oldStackedOnPoints,newStackedOnPoints,oldCoordSys,newCoordSys,oldValueOrigin,newValueOrigin){var diff=diffData(oldData,newData);var currPoints=[];var nextPoints=[];var currStackedPoints=[];var nextStackedPoints=[];var status=[];var sortedIndices=[];var rawIndices=[];var newDataOldCoordInfo=prepareDataCoordInfo(oldCoordSys,newData,oldValueOrigin);var oldDataNewCoordInfo=prepareDataCoordInfo(newCoordSys,oldData,newValueOrigin);for(var i=0;i<diff.length;i++){var diffItem=diff[i];var pointAdded=true;switch(diffItem.cmd){case"=":var currentPt=oldData.getItemLayout(diffItem.idx);var nextPt=newData.getItemLayout(diffItem.idx1);if(isNaN(currentPt[0])||isNaN(currentPt[1])){currentPt=nextPt.slice()
}currPoints.push(currentPt);nextPoints.push(nextPt);currStackedPoints.push(oldStackedOnPoints[diffItem.idx]);nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]);rawIndices.push(newData.getRawIndex(diffItem.idx1));break;case"+":var idx=diffItem.idx;currPoints.push(oldCoordSys.dataToPoint([newData.get(newDataOldCoordInfo.dataDimsForPoint[0],idx),newData.get(newDataOldCoordInfo.dataDimsForPoint[1],idx)]));nextPoints.push(newData.getItemLayout(idx).slice());currStackedPoints.push(getStackedOnPoint(newDataOldCoordInfo,oldCoordSys,newData,idx));nextStackedPoints.push(newStackedOnPoints[idx]);rawIndices.push(newData.getRawIndex(idx));break;case"-":var idx=diffItem.idx;var rawIndex=oldData.getRawIndex(idx);if(rawIndex!==idx){currPoints.push(oldData.getItemLayout(idx));nextPoints.push(newCoordSys.dataToPoint([oldData.get(oldDataNewCoordInfo.dataDimsForPoint[0],idx),oldData.get(oldDataNewCoordInfo.dataDimsForPoint[1],idx)]));currStackedPoints.push(oldStackedOnPoints[idx]);nextStackedPoints.push(getStackedOnPoint(oldDataNewCoordInfo,newCoordSys,oldData,idx));rawIndices.push(rawIndex)}else{pointAdded=false}}if(pointAdded){status.push(diffItem);sortedIndices.push(sortedIndices.length)}}sortedIndices.sort(function(a,b){return rawIndices[a]-rawIndices[b]});var sortedCurrPoints=[];var sortedNextPoints=[];var sortedCurrStackedPoints=[];var sortedNextStackedPoints=[];var sortedStatus=[];for(var i=0;i<sortedIndices.length;i++){var idx=sortedIndices[i];sortedCurrPoints[i]=currPoints[idx];sortedNextPoints[i]=nextPoints[idx];sortedCurrStackedPoints[i]=currStackedPoints[idx];sortedNextStackedPoints[i]=nextStackedPoints[idx];sortedStatus[i]=status[idx]}return{current:sortedCurrPoints,next:sortedNextPoints,stackedOnCurrent:sortedCurrStackedPoints,stackedOnNext:sortedNextStackedPoints,status:sortedStatus}};var vec2Min=min;var vec2Max=max;var scaleAndAdd$1=scaleAndAdd;var v2Copy=copy;var v=[];var cp0=[];var cp1=[];function isPointNull(p){return isNaN(p[0])||isNaN(p[1])}function drawSegment(ctx,points,start,segLen,allLen,dir,smoothMin,smoothMax,smooth,smoothMonotone,connectNulls){if(smoothMonotone==="none"||!smoothMonotone){return drawNonMono.apply(this,arguments)
}else{return drawMono.apply(this,arguments)}}function drawMono(ctx,points,start,segLen,allLen,dir,smoothMin,smoothMax,smooth,smoothMonotone,connectNulls){var prevIdx=0;var idx=start;for(var k=0;k<segLen;k++){var p=points[idx];if(idx>=allLen||idx<0){break}if(isPointNull(p)){if(connectNulls){idx+=dir;continue}break}if(idx===start){ctx[dir>0?"moveTo":"lineTo"](p[0],p[1])}else{if(smooth>0){var prevP=points[prevIdx];var dim=smoothMonotone==="y"?1:0;var ctrlLen=(p[dim]-prevP[dim])*smooth;v2Copy(cp0,prevP);cp0[dim]=prevP[dim]+ctrlLen;v2Copy(cp1,p);cp1[dim]=p[dim]-ctrlLen;ctx.bezierCurveTo(cp0[0],cp0[1],cp1[0],cp1[1],p[0],p[1])}else{ctx.lineTo(p[0],p[1])}}prevIdx=idx;idx+=dir}return k}function drawNonMono(ctx,points,start,segLen,allLen,dir,smoothMin,smoothMax,smooth,smoothMonotone,connectNulls){var prevIdx=0;var idx=start;for(var k=0;k<segLen;k++){var p=points[idx];if(idx>=allLen||idx<0){break}if(isPointNull(p)){if(connectNulls){idx+=dir;continue}break}if(idx===start){ctx[dir>0?"moveTo":"lineTo"](p[0],p[1]);v2Copy(cp0,p)}else{if(smooth>0){var nextIdx=idx+dir;var nextP=points[nextIdx];if(connectNulls){while(nextP&&isPointNull(points[nextIdx])){nextIdx+=dir;nextP=points[nextIdx]}}var ratioNextSeg=0.5;var prevP=points[prevIdx];var nextP=points[nextIdx];if(!nextP||isPointNull(nextP)){v2Copy(cp1,p)}else{if(isPointNull(nextP)&&!connectNulls){nextP=p}sub(v,nextP,prevP);var lenPrevSeg;var lenNextSeg;if(smoothMonotone==="x"||smoothMonotone==="y"){var dim=smoothMonotone==="x"?0:1;lenPrevSeg=Math.abs(p[dim]-prevP[dim]);lenNextSeg=Math.abs(p[dim]-nextP[dim])}else{lenPrevSeg=dist(p,prevP);lenNextSeg=dist(p,nextP)}ratioNextSeg=lenNextSeg/(lenNextSeg+lenPrevSeg);scaleAndAdd$1(cp1,p,v,-smooth*(1-ratioNextSeg))}vec2Min(cp0,cp0,smoothMax);vec2Max(cp0,cp0,smoothMin);vec2Min(cp1,cp1,smoothMax);vec2Max(cp1,cp1,smoothMin);ctx.bezierCurveTo(cp0[0],cp0[1],cp1[0],cp1[1],p[0],p[1]);scaleAndAdd$1(cp0,p,v,smooth*ratioNextSeg)}else{ctx.lineTo(p[0],p[1])}}prevIdx=idx;idx+=dir}return k}function getBoundingBox(points,smoothConstraint){var ptMin=[Infinity,Infinity];
var ptMax=[-Infinity,-Infinity];if(smoothConstraint){for(var i=0;i<points.length;i++){var pt=points[i];if(pt[0]<ptMin[0]){ptMin[0]=pt[0]}if(pt[1]<ptMin[1]){ptMin[1]=pt[1]}if(pt[0]>ptMax[0]){ptMax[0]=pt[0]}if(pt[1]>ptMax[1]){ptMax[1]=pt[1]}}}return{min:smoothConstraint?ptMin:ptMax,max:smoothConstraint?ptMax:ptMin}}var Polyline$1=Path.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:true,smoothMonotone:null,connectNulls:false},style:{fill:null,stroke:"#000"},brush:fixClipWithShadow(Path.prototype.brush),buildPath:function(ctx,shape){var points=shape.points;var i=0;var len$$1=points.length;var result=getBoundingBox(points,shape.smoothConstraint);if(shape.connectNulls){for(;len$$1>0;len$$1--){if(!isPointNull(points[len$$1-1])){break}}for(;i<len$$1;i++){if(!isPointNull(points[i])){break}}}while(i<len$$1){i+=drawSegment(ctx,points,i,len$$1,len$$1,1,result.min,result.max,shape.smooth,shape.smoothMonotone,shape.connectNulls)+1}}});var Polygon$1=Path.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:true,smoothMonotone:null,connectNulls:false},brush:fixClipWithShadow(Path.prototype.brush),buildPath:function(ctx,shape){var points=shape.points;var stackedOnPoints=shape.stackedOnPoints;var i=0;var len$$1=points.length;var smoothMonotone=shape.smoothMonotone;var bbox=getBoundingBox(points,shape.smoothConstraint);var stackedOnBBox=getBoundingBox(stackedOnPoints,shape.smoothConstraint);if(shape.connectNulls){for(;len$$1>0;len$$1--){if(!isPointNull(points[len$$1-1])){break}}for(;i<len$$1;i++){if(!isPointNull(points[i])){break}}}while(i<len$$1){var k=drawSegment(ctx,points,i,len$$1,len$$1,1,bbox.min,bbox.max,shape.smooth,smoothMonotone,shape.connectNulls);drawSegment(ctx,stackedOnPoints,i+k-1,k,len$$1,-1,stackedOnBBox.min,stackedOnBBox.max,shape.stackedOnSmooth,smoothMonotone,shape.connectNulls);i+=k+1;ctx.closePath()}}});function isPointsSame(points1,points2){if(points1.length!==points2.length){return}for(var i=0;
i<points1.length;i++){var p1=points1[i];var p2=points2[i];if(p1[0]!==p2[0]||p1[1]!==p2[1]){return}}return true}function getSmooth(smooth){return typeof(smooth)==="number"?smooth:(smooth?0.5:0)}function getAxisExtentWithGap(axis){var extent=axis.getGlobalExtent();if(axis.onBand){var halfBandWidth=axis.getBandWidth()/2-1;var dir=extent[1]>extent[0]?1:-1;extent[0]+=dir*halfBandWidth;extent[1]-=dir*halfBandWidth}return extent}function getStackedOnPoints(coordSys,data,dataCoordInfo){if(!dataCoordInfo.valueDim){return[]}var points=[];for(var idx=0,len=data.count();idx<len;idx++){points.push(getStackedOnPoint(dataCoordInfo,coordSys,data,idx))}return points}function createGridClipShape(cartesian,hasAnimation,forSymbol,seriesModel){var xExtent=getAxisExtentWithGap(cartesian.getAxis("x"));var yExtent=getAxisExtentWithGap(cartesian.getAxis("y"));var isHorizontal=cartesian.getBaseAxis().isHorizontal();var x=Math.min(xExtent[0],xExtent[1]);var y=Math.min(yExtent[0],yExtent[1]);var width=Math.max(xExtent[0],xExtent[1])-x;var height=Math.max(yExtent[0],yExtent[1])-y;if(forSymbol){x-=0.5;width+=0.5;y-=0.5;height+=0.5}else{var lineWidth=seriesModel.get("lineStyle.width")||2;var expandSize=seriesModel.get("clipOverflow")?lineWidth/2:Math.max(width,height);if(isHorizontal){y-=expandSize;height+=expandSize*2}else{x-=expandSize;width+=expandSize*2}}var clipPath=new Rect({shape:{x:x,y:y,width:width,height:height}});if(hasAnimation){clipPath.shape[isHorizontal?"width":"height"]=0;initProps(clipPath,{shape:{width:width,height:height}},seriesModel)}return clipPath}function createPolarClipShape(polar,hasAnimation,forSymbol,seriesModel){var angleAxis=polar.getAngleAxis();var radiusAxis=polar.getRadiusAxis();var radiusExtent=radiusAxis.getExtent().slice();radiusExtent[0]>radiusExtent[1]&&radiusExtent.reverse();var angleExtent=angleAxis.getExtent();var RADIAN=Math.PI/180;if(forSymbol){radiusExtent[0]-=0.5;radiusExtent[1]+=0.5}var clipPath=new Sector({shape:{cx:round$2(polar.cx,1),cy:round$2(polar.cy,1),r0:round$2(radiusExtent[0],1),r:round$2(radiusExtent[1],1),startAngle:-angleExtent[0]*RADIAN,endAngle:-angleExtent[1]*RADIAN,clockwise:angleAxis.inverse}});
if(hasAnimation){clipPath.shape.endAngle=-angleExtent[0]*RADIAN;initProps(clipPath,{shape:{endAngle:-angleExtent[1]*RADIAN}},seriesModel)}return clipPath}function createClipShape(coordSys,hasAnimation,forSymbol,seriesModel){return coordSys.type==="polar"?createPolarClipShape(coordSys,hasAnimation,forSymbol,seriesModel):createGridClipShape(coordSys,hasAnimation,forSymbol,seriesModel)}function turnPointsIntoStep(points,coordSys,stepTurnAt){var baseAxis=coordSys.getBaseAxis();var baseIndex=baseAxis.dim==="x"||baseAxis.dim==="radius"?0:1;var stepPoints=[];for(var i=0;i<points.length-1;i++){var nextPt=points[i+1];var pt=points[i];stepPoints.push(pt);var stepPt=[];switch(stepTurnAt){case"end":stepPt[baseIndex]=nextPt[baseIndex];stepPt[1-baseIndex]=pt[1-baseIndex];stepPoints.push(stepPt);break;case"middle":var middle=(pt[baseIndex]+nextPt[baseIndex])/2;var stepPt2=[];stepPt[baseIndex]=stepPt2[baseIndex]=middle;stepPt[1-baseIndex]=pt[1-baseIndex];stepPt2[1-baseIndex]=nextPt[1-baseIndex];stepPoints.push(stepPt);stepPoints.push(stepPt2);break;default:stepPt[baseIndex]=pt[baseIndex];stepPt[1-baseIndex]=nextPt[1-baseIndex];stepPoints.push(stepPt)}}points[i]&&stepPoints.push(points[i]);return stepPoints}function getVisualGradient(data,coordSys){var visualMetaList=data.getVisual("visualMeta");if(!visualMetaList||!visualMetaList.length||!data.count()){return}if(coordSys.type!=="cartesian2d"){if(__DEV__){console.warn("Visual map on line style is only supported on cartesian2d.")}return}var coordDim;var visualMeta;for(var i=visualMetaList.length-1;i>=0;i--){var dimIndex=visualMetaList[i].dimension;var dimName=data.dimensions[dimIndex];var dimInfo=data.getDimensionInfo(dimName);coordDim=dimInfo&&dimInfo.coordDim;if(coordDim==="x"||coordDim==="y"){visualMeta=visualMetaList[i];break}}if(!visualMeta){if(__DEV__){console.warn("Visual map on line style only support x or y dimension.")}return}var axis=coordSys.getAxis(coordDim);var colorStops=map(visualMeta.stops,function(stop){return{coord:axis.toGlobalCoord(axis.dataToCoord(stop.value)),color:stop.color}
});var stopLen=colorStops.length;var outerColors=visualMeta.outerColors.slice();if(stopLen&&colorStops[0].coord>colorStops[stopLen-1].coord){colorStops.reverse();outerColors.reverse()}var tinyExtent=10;var minCoord=colorStops[0].coord-tinyExtent;var maxCoord=colorStops[stopLen-1].coord+tinyExtent;var coordSpan=maxCoord-minCoord;if(coordSpan<0.001){return"transparent"}each$1(colorStops,function(stop){stop.offset=(stop.coord-minCoord)/coordSpan});colorStops.push({offset:stopLen?colorStops[stopLen-1].offset:0.5,color:outerColors[1]||"transparent"});colorStops.unshift({offset:stopLen?colorStops[0].offset:0.5,color:outerColors[0]||"transparent"});var gradient=new LinearGradient(0,0,0,0,colorStops,true);gradient[coordDim]=minCoord;gradient[coordDim+"2"]=maxCoord;return gradient}function getIsIgnoreFunc(seriesModel,data,coordSys){var showAllSymbol=seriesModel.get("showAllSymbol");var isAuto=showAllSymbol==="auto";if(showAllSymbol&&!isAuto){return}var categoryAxis=coordSys.getAxesByScale("ordinal")[0];if(!categoryAxis){return}if(isAuto&&canShowAllSymbolForCategory(categoryAxis,data)){return}var categoryDataDim=data.mapDimension(categoryAxis.dim);var labelMap={};each$1(categoryAxis.getViewLabels(),function(labelItem){labelMap[labelItem.tickValue]=1});return function(dataIndex){return !labelMap.hasOwnProperty(data.get(categoryDataDim,dataIndex))}}function canShowAllSymbolForCategory(categoryAxis,data){var axisExtent=categoryAxis.getExtent();var availSize=Math.abs(axisExtent[1]-axisExtent[0])/categoryAxis.scale.count();isNaN(availSize)&&(availSize=0);var dataLen=data.count();var step=Math.max(1,Math.round(dataLen/5));for(var dataIndex=0;dataIndex<dataLen;dataIndex+=step){if(SymbolClz$1.getSymbolSize(data,dataIndex)[categoryAxis.isHorizontal()?1:0]*1.5>availSize){return false}}return true}Chart.extend({type:"line",init:function(){var lineGroup=new Group();var symbolDraw=new SymbolDraw();this.group.add(symbolDraw.group);this._symbolDraw=symbolDraw;this._lineGroup=lineGroup},render:function(seriesModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;
var group=this.group;var data=seriesModel.getData();var lineStyleModel=seriesModel.getModel("lineStyle");var areaStyleModel=seriesModel.getModel("areaStyle");var points=data.mapArray(data.getItemLayout);var isCoordSysPolar=coordSys.type==="polar";var prevCoordSys=this._coordSys;var symbolDraw=this._symbolDraw;var polyline=this._polyline;var polygon=this._polygon;var lineGroup=this._lineGroup;var hasAnimation=seriesModel.get("animation");var isAreaChart=!areaStyleModel.isEmpty();var valueOrigin=areaStyleModel.get("origin");var dataCoordInfo=prepareDataCoordInfo(coordSys,data,valueOrigin);var stackedOnPoints=getStackedOnPoints(coordSys,data,dataCoordInfo);var showSymbol=seriesModel.get("showSymbol");var isIgnoreFunc=showSymbol&&!isCoordSysPolar&&getIsIgnoreFunc(seriesModel,data,coordSys);var oldData=this._data;oldData&&oldData.eachItemGraphicEl(function(el,idx){if(el.__temp){group.remove(el);oldData.setItemGraphicEl(idx,null)}});if(!showSymbol){symbolDraw.remove()}group.add(lineGroup);var step=!isCoordSysPolar&&seriesModel.get("step");if(!(polyline&&prevCoordSys.type===coordSys.type&&step===this._step)){showSymbol&&symbolDraw.updateData(data,{isIgnore:isIgnoreFunc,clipShape:createClipShape(coordSys,false,true,seriesModel)});if(step){points=turnPointsIntoStep(points,coordSys,step);stackedOnPoints=turnPointsIntoStep(stackedOnPoints,coordSys,step)}polyline=this._newPolyline(points,coordSys,hasAnimation);if(isAreaChart){polygon=this._newPolygon(points,stackedOnPoints,coordSys,hasAnimation)}lineGroup.setClipPath(createClipShape(coordSys,true,false,seriesModel))}else{if(isAreaChart&&!polygon){polygon=this._newPolygon(points,stackedOnPoints,coordSys,hasAnimation)}else{if(polygon&&!isAreaChart){lineGroup.remove(polygon);polygon=this._polygon=null}}lineGroup.setClipPath(createClipShape(coordSys,false,false,seriesModel));showSymbol&&symbolDraw.updateData(data,{isIgnore:isIgnoreFunc,clipShape:createClipShape(coordSys,false,true,seriesModel)});data.eachItemGraphicEl(function(el){el.stopAnimation(true)
});if(!isPointsSame(this._stackedOnPoints,stackedOnPoints)||!isPointsSame(this._points,points)){if(hasAnimation){this._updateAnimation(data,stackedOnPoints,coordSys,api,step,valueOrigin)}else{if(step){points=turnPointsIntoStep(points,coordSys,step);stackedOnPoints=turnPointsIntoStep(stackedOnPoints,coordSys,step)}polyline.setShape({points:points});polygon&&polygon.setShape({points:points,stackedOnPoints:stackedOnPoints})}}}var visualColor=getVisualGradient(data,coordSys)||data.getVisual("color");polyline.useStyle(defaults(lineStyleModel.getLineStyle(),{fill:"none",stroke:visualColor,lineJoin:"bevel"}));var smooth=seriesModel.get("smooth");smooth=getSmooth(seriesModel.get("smooth"));polyline.setShape({smooth:smooth,smoothMonotone:seriesModel.get("smoothMonotone"),connectNulls:seriesModel.get("connectNulls")});if(polygon){var stackedOnSeries=data.getCalculationInfo("stackedOnSeries");var stackedOnSmooth=0;polygon.useStyle(defaults(areaStyleModel.getAreaStyle(),{fill:visualColor,opacity:0.7,lineJoin:"bevel"}));if(stackedOnSeries){stackedOnSmooth=getSmooth(stackedOnSeries.get("smooth"))}polygon.setShape({smooth:smooth,stackedOnSmooth:stackedOnSmooth,smoothMonotone:seriesModel.get("smoothMonotone"),connectNulls:seriesModel.get("connectNulls")})}this._data=data;this._coordSys=coordSys;this._stackedOnPoints=stackedOnPoints;this._points=points;this._step=step;this._valueOrigin=valueOrigin},dispose:function(){},highlight:function(seriesModel,ecModel,api,payload){var data=seriesModel.getData();var dataIndex=queryDataIndex(data,payload);if(!(dataIndex instanceof Array)&&dataIndex!=null&&dataIndex>=0){var symbol=data.getItemGraphicEl(dataIndex);if(!symbol){var pt=data.getItemLayout(dataIndex);if(!pt){return}symbol=new SymbolClz$1(data,dataIndex);symbol.position=pt;symbol.setZ(seriesModel.get("zlevel"),seriesModel.get("z"));symbol.ignore=isNaN(pt[0])||isNaN(pt[1]);symbol.__temp=true;data.setItemGraphicEl(dataIndex,symbol);symbol.stopSymbolAnimation(true);this.group.add(symbol)}symbol.highlight()
}else{Chart.prototype.highlight.call(this,seriesModel,ecModel,api,payload)}},downplay:function(seriesModel,ecModel,api,payload){var data=seriesModel.getData();var dataIndex=queryDataIndex(data,payload);if(dataIndex!=null&&dataIndex>=0){var symbol=data.getItemGraphicEl(dataIndex);if(symbol){if(symbol.__temp){data.setItemGraphicEl(dataIndex,null);this.group.remove(symbol)}else{symbol.downplay()}}}else{Chart.prototype.downplay.call(this,seriesModel,ecModel,api,payload)}},_newPolyline:function(points){var polyline=this._polyline;if(polyline){this._lineGroup.remove(polyline)}polyline=new Polyline$1({shape:{points:points},silent:true,z2:10});this._lineGroup.add(polyline);this._polyline=polyline;return polyline},_newPolygon:function(points,stackedOnPoints){var polygon=this._polygon;if(polygon){this._lineGroup.remove(polygon)}polygon=new Polygon$1({shape:{points:points,stackedOnPoints:stackedOnPoints},silent:true});this._lineGroup.add(polygon);this._polygon=polygon;return polygon},_updateAnimation:function(data,stackedOnPoints,coordSys,api,step,valueOrigin){var polyline=this._polyline;var polygon=this._polygon;var seriesModel=data.hostModel;var diff=lineAnimationDiff(this._data,data,this._stackedOnPoints,stackedOnPoints,this._coordSys,coordSys,this._valueOrigin,valueOrigin);var current=diff.current;var stackedOnCurrent=diff.stackedOnCurrent;var next=diff.next;var stackedOnNext=diff.stackedOnNext;if(step){current=turnPointsIntoStep(diff.current,coordSys,step);stackedOnCurrent=turnPointsIntoStep(diff.stackedOnCurrent,coordSys,step);next=turnPointsIntoStep(diff.next,coordSys,step);stackedOnNext=turnPointsIntoStep(diff.stackedOnNext,coordSys,step)}polyline.shape.__points=diff.current;polyline.shape.points=current;updateProps(polyline,{shape:{points:next}},seriesModel);if(polygon){polygon.setShape({points:current,stackedOnPoints:stackedOnCurrent});updateProps(polygon,{shape:{points:next,stackedOnPoints:stackedOnNext}},seriesModel)}var updatedDataInfo=[];var diffStatus=diff.status;
for(var i=0;i<diffStatus.length;i++){var cmd=diffStatus[i].cmd;if(cmd==="="){var el=data.getItemGraphicEl(diffStatus[i].idx1);if(el){updatedDataInfo.push({el:el,ptIdx:i})}}}if(polyline.animators&&polyline.animators.length){polyline.animators[0].during(function(){for(var i=0;i<updatedDataInfo.length;i++){var el=updatedDataInfo[i].el;el.attr("position",polyline.shape.__points[updatedDataInfo[i].ptIdx])}})}},remove:function(ecModel){var group=this.group;var oldData=this._data;this._lineGroup.removeAll();this._symbolDraw.remove(true);oldData&&oldData.eachItemGraphicEl(function(el,idx){if(el.__temp){group.remove(el);oldData.setItemGraphicEl(idx,null)}});this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var visualSymbol=function(seriesType,defaultSymbolType,legendSymbol){return{seriesType:seriesType,performRawSeries:true,reset:function(seriesModel,ecModel,api){var data=seriesModel.getData();var symbolType=seriesModel.get("symbol")||defaultSymbolType;var symbolSize=seriesModel.get("symbolSize");var keepAspect=seriesModel.get("symbolKeepAspect");data.setVisual({legendSymbol:legendSymbol||symbolType,symbol:symbolType,symbolSize:symbolSize,symbolKeepAspect:keepAspect});if(ecModel.isSeriesFiltered(seriesModel)){return}var hasCallback=typeof symbolSize==="function";function dataEach(data,idx){if(typeof symbolSize==="function"){var rawValue=seriesModel.getRawValue(idx);var params=seriesModel.getDataParams(idx);data.setItemVisual(idx,"symbolSize",symbolSize(rawValue,params))}if(data.hasItemOption){var itemModel=data.getItemModel(idx);var itemSymbolType=itemModel.getShallow("symbol",true);var itemSymbolSize=itemModel.getShallow("symbolSize",true);var itemSymbolKeepAspect=itemModel.getShallow("symbolKeepAspect",true);if(itemSymbolType!=null){data.setItemVisual(idx,"symbol",itemSymbolType)}if(itemSymbolSize!=null){data.setItemVisual(idx,"symbolSize",itemSymbolSize)}if(itemSymbolKeepAspect!=null){data.setItemVisual(idx,"symbolKeepAspect",itemSymbolKeepAspect)
}}}return{dataEach:(data.hasItemOption||hasCallback)?dataEach:null}}}};var pointsLayout=function(seriesType){return{seriesType:seriesType,plan:createRenderPlanner(),reset:function(seriesModel){var data=seriesModel.getData();var coordSys=seriesModel.coordinateSystem;var pipelineContext=seriesModel.pipelineContext;var isLargeRender=pipelineContext.large;if(!coordSys){return}var dims=map(coordSys.dimensions,function(dim){return data.mapDimension(dim)}).slice(0,2);var dimLen=dims.length;var stackResultDim=data.getCalculationInfo("stackResultDimension");if(isDimensionStacked(data,dims[0])){dims[0]=stackResultDim}if(isDimensionStacked(data,dims[1])){dims[1]=stackResultDim}function progress(params,data){var segCount=params.end-params.start;var points=isLargeRender&&new Float32Array(segCount*dimLen);for(var i=params.start,offset=0,tmpIn=[],tmpOut=[];i<params.end;i++){var point;if(dimLen===1){var x=data.get(dims[0],i);point=!isNaN(x)&&coordSys.dataToPoint(x,null,tmpOut)}else{var x=tmpIn[0]=data.get(dims[0],i);var y=tmpIn[1]=data.get(dims[1],i);point=!isNaN(x)&&!isNaN(y)&&coordSys.dataToPoint(tmpIn,null,tmpOut)}if(isLargeRender){points[offset++]=point?point[0]:NaN;points[offset++]=point?point[1]:NaN}else{data.setItemLayout(i,(point&&point.slice())||[NaN,NaN])}}isLargeRender&&data.setLayout("symbolPoints",points)}return dimLen&&{progress:progress}}}};var samplers={average:function(frame){var sum=0;var count=0;for(var i=0;i<frame.length;i++){if(!isNaN(frame[i])){sum+=frame[i];count++}}return count===0?NaN:sum/count},sum:function(frame){var sum=0;for(var i=0;i<frame.length;i++){sum+=frame[i]||0}return sum},max:function(frame){var max=-Infinity;for(var i=0;i<frame.length;i++){frame[i]>max&&(max=frame[i])}return isFinite(max)?max:NaN},min:function(frame){var min=Infinity;for(var i=0;i<frame.length;i++){frame[i]<min&&(min=frame[i])}return isFinite(min)?min:NaN},nearest:function(frame){return frame[0]}};var indexSampler=function(frame,value){return Math.round(frame.length/2)};var dataSample=function(seriesType){return{seriesType:seriesType,modifyOutputEnd:true,reset:function(seriesModel,ecModel,api){var data=seriesModel.getData();
var sampling=seriesModel.get("sampling");var coordSys=seriesModel.coordinateSystem;if(coordSys.type==="cartesian2d"&&sampling){var baseAxis=coordSys.getBaseAxis();var valueAxis=coordSys.getOtherAxis(baseAxis);var extent=baseAxis.getExtent();var size=extent[1]-extent[0];var rate=Math.round(data.count()/size);if(rate>1){var sampler;if(typeof sampling==="string"){sampler=samplers[sampling]}else{if(typeof sampling==="function"){sampler=sampling}}if(sampler){seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim),1/rate,sampler,indexSampler))}}}}}};function dimAxisMapper(dim){return this._axes[dim]}var Cartesian=function(name){this._axes={};this._dimList=[];this.name=name||""};Cartesian.prototype={constructor:Cartesian,type:"cartesian",getAxis:function(dim){return this._axes[dim]},getAxes:function(){return map(this._dimList,dimAxisMapper,this)},getAxesByScale:function(scaleType){scaleType=scaleType.toLowerCase();return filter(this.getAxes(),function(axis){return axis.scale.type===scaleType})},addAxis:function(axis){var dim=axis.dim;this._axes[dim]=axis;this._dimList.push(dim)},dataToCoord:function(val){return this._dataCoordConvert(val,"dataToCoord")},coordToData:function(val){return this._dataCoordConvert(val,"coordToData")},_dataCoordConvert:function(input,method){var dimList=this._dimList;var output=input instanceof Array?[]:{};for(var i=0;i<dimList.length;i++){var dim=dimList[i];var axis=this._axes[dim];output[dim]=axis[method](input[dim])}return output}};function Cartesian2D(name){Cartesian.call(this,name)}Cartesian2D.prototype={constructor:Cartesian2D,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(point){var axisX=this.getAxis("x");var axisY=this.getAxis("y");return axisX.contain(axisX.toLocalCoord(point[0]))&&axisY.contain(axisY.toLocalCoord(point[1]))},containData:function(data){return this.getAxis("x").containData(data[0])&&this.getAxis("y").containData(data[1])
},dataToPoint:function(data,reserved,out){var xAxis=this.getAxis("x");var yAxis=this.getAxis("y");out=out||[];out[0]=xAxis.toGlobalCoord(xAxis.dataToCoord(data[0]));out[1]=yAxis.toGlobalCoord(yAxis.dataToCoord(data[1]));return out},clampData:function(data,out){var xScale=this.getAxis("x").scale;var yScale=this.getAxis("y").scale;var xAxisExtent=xScale.getExtent();var yAxisExtent=yScale.getExtent();var x=xScale.parse(data[0]);var y=yScale.parse(data[1]);out=out||[];out[0]=Math.min(Math.max(Math.min(xAxisExtent[0],xAxisExtent[1]),x),Math.max(xAxisExtent[0],xAxisExtent[1]));out[1]=Math.min(Math.max(Math.min(yAxisExtent[0],yAxisExtent[1]),y),Math.max(yAxisExtent[0],yAxisExtent[1]));return out},pointToData:function(point,out){var xAxis=this.getAxis("x");var yAxis=this.getAxis("y");out=out||[];out[0]=xAxis.coordToData(xAxis.toLocalCoord(point[0]));out[1]=yAxis.coordToData(yAxis.toLocalCoord(point[1]));return out},getOtherAxis:function(axis){return this.getAxis(axis.dim==="x"?"y":"x")}};inherits(Cartesian2D,Cartesian);var Axis2D=function(dim,scale,coordExtent,axisType,position){Axis.call(this,dim,scale,coordExtent);this.type=axisType||"value";this.position=position||"bottom"};Axis2D.prototype={constructor:Axis2D,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var position=this.position;return position==="top"||position==="bottom"},getGlobalExtent:function(asc){var ret=this.getExtent();ret[0]=this.toGlobalCoord(ret[0]);ret[1]=this.toGlobalCoord(ret[1]);asc&&ret[0]>ret[1]&&ret.reverse();return ret},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(point,clamp){return this.coordToData(this.toLocalCoord(point[this.dim==="x"?0:1]),clamp)},toLocalCoord:null,toGlobalCoord:null};inherits(Axis2D,Axis);var defaultOption={show:true,zlevel:0,z:0,inverse:false,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:false,triggerEvent:false,tooltip:{show:false},axisPointer:{},axisLine:{show:true,onZero:true,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:true,inside:false,length:5,lineStyle:{width:1}},axisLabel:{show:true,inside:false,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:true,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:false,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}};
var axisDefault={};axisDefault.categoryAxis=merge({boundaryGap:true,deduplication:null,splitLine:{show:false},axisTick:{alignWithLabel:false,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption);axisDefault.valueAxis=merge({boundaryGap:[0,0],splitNumber:5},defaultOption);axisDefault.timeAxis=defaults({scale:true,min:"dataMin",max:"dataMax"},axisDefault.valueAxis);axisDefault.logAxis=defaults({scale:true,logBase:10},axisDefault.valueAxis);var AXIS_TYPES=["value","category","time","log"];var axisModelCreator=function(axisName,BaseAxisModelClass,axisTypeDefaulter,extraDefaultOption){each$1(AXIS_TYPES,function(axisType){BaseAxisModelClass.extend({type:axisName+"Axis."+axisType,mergeDefaultAndTheme:function(option,ecModel){var layoutMode=this.layoutMode;var inputPositionParams=layoutMode?getLayoutParams(option):{};var themeModel=ecModel.getTheme();merge(option,themeModel.get(axisType+"Axis"));merge(option,this.getDefaultOption());option.type=axisTypeDefaulter(axisName,option);if(layoutMode){mergeLayoutParam(option,inputPositionParams,layoutMode)}},optionUpdated:function(){var thisOption=this.option;if(thisOption.type==="category"){this.__ordinalMeta=OrdinalMeta.createByAxisModel(this)}},getCategories:function(rawData){var option=this.option;if(option.type==="category"){if(rawData){return option.data}return this.__ordinalMeta.categories}},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:mergeAll([{},axisDefault[axisType+"Axis"],extraDefaultOption],true)})});ComponentModel.registerSubTypeDefaulter(axisName+"Axis",curry(axisTypeDefaulter,axisName))};var AxisModel=ComponentModel.extend({type:"cartesian2dAxis",axis:null,init:function(){AxisModel.superApply(this,"init",arguments);this.resetRange()},mergeOption:function(){AxisModel.superApply(this,"mergeOption",arguments);this.resetRange()},restoreData:function(){AxisModel.superApply(this,"restoreData",arguments);this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]
}});function getAxisType(axisDim,option){return option.type||(option.data?"category":"value")}merge(AxisModel.prototype,axisModelCommonMixin);var extraOption={offset:0};axisModelCreator("x",AxisModel,getAxisType,extraOption);axisModelCreator("y",AxisModel,getAxisType,extraOption);ComponentModel.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:false,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:false,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});function isAxisUsedInTheGrid(axisModel,gridModel,ecModel){return axisModel.getCoordSysModel()===gridModel}function Grid(gridModel,ecModel,api){this._coordsMap={};this._coordsList=[];this._axesMap={};this._axesList=[];this._initCartesian(gridModel,ecModel,api);this.model=gridModel}var gridProto=Grid.prototype;gridProto.type="grid";gridProto.axisPointerEnabled=true;gridProto.getRect=function(){return this._rect};gridProto.update=function(ecModel,api){var axesMap=this._axesMap;this._updateScale(ecModel,this.model);each$1(axesMap.x,function(xAxis){niceScaleExtent(xAxis.scale,xAxis.model)});each$1(axesMap.y,function(yAxis){niceScaleExtent(yAxis.scale,yAxis.model)});var onZeroRecords={};each$1(axesMap.x,function(xAxis){fixAxisOnZero(axesMap,"y",xAxis,onZeroRecords)});each$1(axesMap.y,function(yAxis){fixAxisOnZero(axesMap,"x",yAxis,onZeroRecords)});this.resize(this.model,api)};function fixAxisOnZero(axesMap,otherAxisDim,axis,onZeroRecords){axis.getAxesOnZeroOf=function(){return otherAxisOnZeroOf?[otherAxisOnZeroOf]:[]};var otherAxes=axesMap[otherAxisDim];var otherAxisOnZeroOf;var axisModel=axis.model;var onZero=axisModel.get("axisLine.onZero");var onZeroAxisIndex=axisModel.get("axisLine.onZeroAxisIndex");if(!onZero){return}if(onZeroAxisIndex!=null){if(canOnZeroToAxis(otherAxes[onZeroAxisIndex])){otherAxisOnZeroOf=otherAxes[onZeroAxisIndex]}}else{for(var idx in otherAxes){if(otherAxes.hasOwnProperty(idx)&&canOnZeroToAxis(otherAxes[idx])&&!onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]){otherAxisOnZeroOf=otherAxes[idx];
break}}}if(otherAxisOnZeroOf){onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)]=true}function getOnZeroRecordKey(axis){return axis.dim+"_"+axis.index}}function canOnZeroToAxis(axis){return axis&&axis.type!=="category"&&axis.type!=="time"&&ifAxisCrossZero(axis)}gridProto.resize=function(gridModel,api,ignoreContainLabel){var gridRect=getLayoutRect(gridModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()});this._rect=gridRect;var axesList=this._axesList;adjustAxes();if(!ignoreContainLabel&&gridModel.get("containLabel")){each$1(axesList,function(axis){if(!axis.model.get("axisLabel.inside")){var labelUnionRect=estimateLabelUnionRect(axis);if(labelUnionRect){var dim=axis.isHorizontal()?"height":"width";var margin=axis.model.get("axisLabel.margin");gridRect[dim]-=labelUnionRect[dim]+margin;if(axis.position==="top"){gridRect.y+=labelUnionRect.height+margin}else{if(axis.position==="left"){gridRect.x+=labelUnionRect.width+margin}}}}});adjustAxes()}function adjustAxes(){each$1(axesList,function(axis){var isHorizontal=axis.isHorizontal();var extent=isHorizontal?[0,gridRect.width]:[0,gridRect.height];var idx=axis.inverse?1:0;axis.setExtent(extent[idx],extent[1-idx]);updateAxisTransform(axis,isHorizontal?gridRect.x:gridRect.y)})}};gridProto.getAxis=function(axisType,axisIndex){var axesMapOnDim=this._axesMap[axisType];if(axesMapOnDim!=null){if(axisIndex==null){for(var name in axesMapOnDim){if(axesMapOnDim.hasOwnProperty(name)){return axesMapOnDim[name]}}}return axesMapOnDim[axisIndex]}};gridProto.getAxes=function(){return this._axesList.slice()};gridProto.getCartesian=function(xAxisIndex,yAxisIndex){if(xAxisIndex!=null&&yAxisIndex!=null){var key="x"+xAxisIndex+"y"+yAxisIndex;return this._coordsMap[key]}if(isObject$1(xAxisIndex)){yAxisIndex=xAxisIndex.yAxisIndex;xAxisIndex=xAxisIndex.xAxisIndex}for(var i=0,coordList=this._coordsList;i<coordList.length;i++){if(coordList[i].getAxis("x").index===xAxisIndex||coordList[i].getAxis("y").index===yAxisIndex){return coordList[i]
}}};gridProto.getCartesians=function(){return this._coordsList.slice()};gridProto.convertToPixel=function(ecModel,finder,value){var target=this._findConvertTarget(ecModel,finder);return target.cartesian?target.cartesian.dataToPoint(value):target.axis?target.axis.toGlobalCoord(target.axis.dataToCoord(value)):null};gridProto.convertFromPixel=function(ecModel,finder,value){var target=this._findConvertTarget(ecModel,finder);return target.cartesian?target.cartesian.pointToData(value):target.axis?target.axis.coordToData(target.axis.toLocalCoord(value)):null};gridProto._findConvertTarget=function(ecModel,finder){var seriesModel=finder.seriesModel;var xAxisModel=finder.xAxisModel||(seriesModel&&seriesModel.getReferringComponents("xAxis")[0]);var yAxisModel=finder.yAxisModel||(seriesModel&&seriesModel.getReferringComponents("yAxis")[0]);var gridModel=finder.gridModel;var coordsList=this._coordsList;var cartesian;var axis;if(seriesModel){cartesian=seriesModel.coordinateSystem;indexOf(coordsList,cartesian)<0&&(cartesian=null)}else{if(xAxisModel&&yAxisModel){cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex)}else{if(xAxisModel){axis=this.getAxis("x",xAxisModel.componentIndex)}else{if(yAxisModel){axis=this.getAxis("y",yAxisModel.componentIndex)}else{if(gridModel){var grid=gridModel.coordinateSystem;if(grid===this){cartesian=this._coordsList[0]}}}}}}return{cartesian:cartesian,axis:axis}};gridProto.containPoint=function(point){var coord=this._coordsList[0];if(coord){return coord.containPoint(point)}};gridProto._initCartesian=function(gridModel,ecModel,api){var axisPositionUsed={left:false,right:false,top:false,bottom:false};var axesMap={x:{},y:{}};var axesCount={x:0,y:0};ecModel.eachComponent("xAxis",createAxisCreator("x"),this);ecModel.eachComponent("yAxis",createAxisCreator("y"),this);if(!axesCount.x||!axesCount.y){this._axesMap={};this._axesList=[];return}this._axesMap=axesMap;each$1(axesMap.x,function(xAxis,xAxisIndex){each$1(axesMap.y,function(yAxis,yAxisIndex){var key="x"+xAxisIndex+"y"+yAxisIndex;
var cartesian=new Cartesian2D(key);cartesian.grid=this;cartesian.model=gridModel;this._coordsMap[key]=cartesian;this._coordsList.push(cartesian);cartesian.addAxis(xAxis);cartesian.addAxis(yAxis)},this)},this);function createAxisCreator(axisType){return function(axisModel,idx){if(!isAxisUsedInTheGrid(axisModel,gridModel,ecModel)){return}var axisPosition=axisModel.get("position");if(axisType==="x"){if(axisPosition!=="top"&&axisPosition!=="bottom"){axisPosition="bottom";if(axisPositionUsed[axisPosition]){axisPosition=axisPosition==="top"?"bottom":"top"}}}else{if(axisPosition!=="left"&&axisPosition!=="right"){axisPosition="left";if(axisPositionUsed[axisPosition]){axisPosition=axisPosition==="left"?"right":"left"}}}axisPositionUsed[axisPosition]=true;var axis=new Axis2D(axisType,createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisPosition);var isCategory=axis.type==="category";axis.onBand=isCategory&&axisModel.get("boundaryGap");axis.inverse=axisModel.get("inverse");axisModel.axis=axis;axis.model=axisModel;axis.grid=this;axis.index=idx;this._axesList.push(axis);axesMap[axisType][idx]=axis;axesCount[axisType]++}}};gridProto._updateScale=function(ecModel,gridModel){each$1(this._axesList,function(axis){axis.scale.setExtent(Infinity,-Infinity)});ecModel.eachSeries(function(seriesModel){if(isCartesian2D(seriesModel)){var axesModels=findAxesModels(seriesModel,ecModel);var xAxisModel=axesModels[0];var yAxisModel=axesModels[1];if(!isAxisUsedInTheGrid(xAxisModel,gridModel,ecModel)||!isAxisUsedInTheGrid(yAxisModel,gridModel,ecModel)){return}var cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex);var data=seriesModel.getData();var xAxis=cartesian.getAxis("x");var yAxis=cartesian.getAxis("y");if(data.type==="list"){unionExtent(data,xAxis,seriesModel);unionExtent(data,yAxis,seriesModel)}}},this);function unionExtent(data,axis,seriesModel){each$1(data.mapDimension(axis.dim,true),function(dim){axis.scale.unionExtentFromData(data,getStackedDimension(data,dim))
})}};gridProto.getTooltipAxes=function(dim){var baseAxes=[];var otherAxes=[];each$1(this.getCartesians(),function(cartesian){var baseAxis=(dim!=null&&dim!=="auto")?cartesian.getAxis(dim):cartesian.getBaseAxis();var otherAxis=cartesian.getOtherAxis(baseAxis);indexOf(baseAxes,baseAxis)<0&&baseAxes.push(baseAxis);indexOf(otherAxes,otherAxis)<0&&otherAxes.push(otherAxis)});return{baseAxes:baseAxes,otherAxes:otherAxes}};function updateAxisTransform(axis,coordBase){var axisExtent=axis.getExtent();var axisExtentSum=axisExtent[0]+axisExtent[1];axis.toGlobalCoord=axis.dim==="x"?function(coord){return coord+coordBase}:function(coord){return axisExtentSum-coord+coordBase};axis.toLocalCoord=axis.dim==="x"?function(coord){return coord-coordBase}:function(coord){return axisExtentSum-coord+coordBase}}var axesTypes=["xAxis","yAxis"];function findAxesModels(seriesModel,ecModel){return map(axesTypes,function(axisType){var axisModel=seriesModel.getReferringComponents(axisType)[0];if(__DEV__){if(!axisModel){throw new Error(axisType+' "'+retrieve(seriesModel.get(axisType+"Index"),seriesModel.get(axisType+"Id"),0)+'" not found')}}return axisModel})}function isCartesian2D(seriesModel){return seriesModel.get("coordinateSystem")==="cartesian2d"}Grid.create=function(ecModel,api){var grids=[];ecModel.eachComponent("grid",function(gridModel,idx){var grid=new Grid(gridModel,ecModel,api);grid.name="grid_"+idx;grid.resize(gridModel,api,true);gridModel.coordinateSystem=grid;grids.push(grid)});ecModel.eachSeries(function(seriesModel){if(!isCartesian2D(seriesModel)){return}var axesModels=findAxesModels(seriesModel,ecModel);var xAxisModel=axesModels[0];var yAxisModel=axesModels[1];var gridModel=xAxisModel.getCoordSysModel();if(__DEV__){if(!gridModel){throw new Error('Grid "'+retrieve(xAxisModel.get("gridIndex"),xAxisModel.get("gridId"),0)+'" not found')}if(xAxisModel.getCoordSysModel()!==yAxisModel.getCoordSysModel()){throw new Error("xAxis and yAxis must use the same grid")}}var grid=gridModel.coordinateSystem;
seriesModel.coordinateSystem=grid.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex)});return grids};Grid.dimensions=Grid.prototype.dimensions=Cartesian2D.prototype.dimensions;CoordinateSystemManager.register("cartesian2d",Grid);var PI$2=Math.PI;function makeAxisEventDataBase(axisModel){var eventData={componentType:axisModel.mainType,componentIndex:axisModel.componentIndex};eventData[axisModel.mainType+"Index"]=axisModel.componentIndex;return eventData}var AxisBuilder=function(axisModel,opt){this.opt=opt;this.axisModel=axisModel;defaults(opt,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:true});this.group=new Group();var dumbGroup=new Group({position:opt.position.slice(),rotation:opt.rotation});dumbGroup.updateTransform();this._transform=dumbGroup.transform;this._dumbGroup=dumbGroup};AxisBuilder.prototype={constructor:AxisBuilder,hasBuilder:function(name){return !!builders[name]},add:function(name){builders[name].call(this)},getGroup:function(){return this.group}};var builders={axisLine:function(){var opt=this.opt;var axisModel=this.axisModel;if(!axisModel.get("axisLine.show")){return}var extent=this.axisModel.axis.getExtent();var matrix=this._transform;var pt1=[extent[0],0];var pt2=[extent[1],0];if(matrix){applyTransform(pt1,pt1,matrix);applyTransform(pt2,pt2,matrix)}var lineStyle=extend({lineCap:"round"},axisModel.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new Line(subPixelOptimizeLine({anid:"line",shape:{x1:pt1[0],y1:pt1[1],x2:pt2[0],y2:pt2[1]},style:lineStyle,strokeContainThreshold:opt.strokeContainThreshold||5,silent:true,z2:1})));var arrows=axisModel.get("axisLine.symbol");var arrowSize=axisModel.get("axisLine.symbolSize");var arrowOffset=axisModel.get("axisLine.symbolOffset")||0;if(typeof arrowOffset==="number"){arrowOffset=[arrowOffset,arrowOffset]}if(arrows!=null){if(typeof arrows==="string"){arrows=[arrows,arrows]}if(typeof arrowSize==="string"||typeof arrowSize==="number"){arrowSize=[arrowSize,arrowSize]
}var symbolWidth=arrowSize[0];var symbolHeight=arrowSize[1];each$1([{rotate:opt.rotation+Math.PI/2,offset:arrowOffset[0],r:0},{rotate:opt.rotation-Math.PI/2,offset:arrowOffset[1],r:Math.sqrt((pt1[0]-pt2[0])*(pt1[0]-pt2[0])+(pt1[1]-pt2[1])*(pt1[1]-pt2[1]))}],function(point,index){if(arrows[index]!=="none"&&arrows[index]!=null){var symbol=createSymbol(arrows[index],-symbolWidth/2,-symbolHeight/2,symbolWidth,symbolHeight,lineStyle.stroke,true);var r=point.r+point.offset;var pos=[pt1[0]+r*Math.cos(opt.rotation),pt1[1]-r*Math.sin(opt.rotation)];symbol.attr({rotation:point.rotate,position:pos,silent:true,z2:11});this.group.add(symbol)}},this)}},axisTickLabel:function(){var axisModel=this.axisModel;var opt=this.opt;var tickEls=buildAxisTick(this,axisModel,opt);var labelEls=buildAxisLabel(this,axisModel,opt);fixMinMaxLabelShow(axisModel,labelEls,tickEls)},axisName:function(){var opt=this.opt;var axisModel=this.axisModel;var name=retrieve(opt.axisName,axisModel.get("name"));if(!name){return}var nameLocation=axisModel.get("nameLocation");var nameDirection=opt.nameDirection;var textStyleModel=axisModel.getModel("nameTextStyle");var gap=axisModel.get("nameGap")||0;var extent=this.axisModel.axis.getExtent();var gapSignal=extent[0]>extent[1]?-1:1;var pos=[nameLocation==="start"?extent[0]-gapSignal*gap:nameLocation==="end"?extent[1]+gapSignal*gap:(extent[0]+extent[1])/2,isNameLocationCenter(nameLocation)?opt.labelOffset+nameDirection*gap:0];var labelLayout;var nameRotation=axisModel.get("nameRotate");if(nameRotation!=null){nameRotation=nameRotation*PI$2/180}var axisNameAvailableWidth;if(isNameLocationCenter(nameLocation)){labelLayout=innerTextLayout(opt.rotation,nameRotation!=null?nameRotation:opt.rotation,nameDirection)}else{labelLayout=endTextLayout(opt,nameLocation,nameRotation||0,extent);axisNameAvailableWidth=opt.axisNameAvailableWidth;if(axisNameAvailableWidth!=null){axisNameAvailableWidth=Math.abs(axisNameAvailableWidth/Math.sin(labelLayout.rotation));!isFinite(axisNameAvailableWidth)&&(axisNameAvailableWidth=null)
}}var textFont=textStyleModel.getFont();var truncateOpt=axisModel.get("nameTruncate",true)||{};var ellipsis=truncateOpt.ellipsis;var maxWidth=retrieve(opt.nameTruncateMaxWidth,truncateOpt.maxWidth,axisNameAvailableWidth);var truncatedText=(ellipsis!=null&&maxWidth!=null)?truncateText$1(name,maxWidth,textFont,ellipsis,{minChar:2,placeholder:truncateOpt.placeholder}):name;var tooltipOpt=axisModel.get("tooltip",true);var mainType=axisModel.mainType;var formatterParams={componentType:mainType,name:name,$vars:["name"]};formatterParams[mainType+"Index"]=axisModel.componentIndex;var textEl=new Text({anid:"name",__fullText:name,__truncatedText:truncatedText,position:pos,rotation:labelLayout.rotation,silent:isSilent(axisModel),z2:1,tooltip:(tooltipOpt&&tooltipOpt.show)?extend({content:name,formatter:function(){return name},formatterParams:formatterParams},tooltipOpt):null});setTextStyle(textEl.style,textStyleModel,{text:truncatedText,textFont:textFont,textFill:textStyleModel.getTextColor()||axisModel.get("axisLine.lineStyle.color"),textAlign:labelLayout.textAlign,textVerticalAlign:labelLayout.textVerticalAlign});if(axisModel.get("triggerEvent")){textEl.eventData=makeAxisEventDataBase(axisModel);textEl.eventData.targetType="axisName";textEl.eventData.name=name}this._dumbGroup.add(textEl);textEl.updateTransform();this.group.add(textEl);textEl.decomposeTransform()}};var innerTextLayout=AxisBuilder.innerTextLayout=function(axisRotation,textRotation,direction){var rotationDiff=remRadian(textRotation-axisRotation);var textAlign;var textVerticalAlign;if(isRadianAroundZero(rotationDiff)){textVerticalAlign=direction>0?"top":"bottom";textAlign="center"}else{if(isRadianAroundZero(rotationDiff-PI$2)){textVerticalAlign=direction>0?"bottom":"top";textAlign="center"}else{textVerticalAlign="middle";if(rotationDiff>0&&rotationDiff<PI$2){textAlign=direction>0?"right":"left"}else{textAlign=direction>0?"left":"right"}}}return{rotation:rotationDiff,textAlign:textAlign,textVerticalAlign:textVerticalAlign}
};function endTextLayout(opt,textPosition,textRotate,extent){var rotationDiff=remRadian(textRotate-opt.rotation);var textAlign;var textVerticalAlign;var inverse=extent[0]>extent[1];var onLeft=(textPosition==="start"&&!inverse)||(textPosition!=="start"&&inverse);if(isRadianAroundZero(rotationDiff-PI$2/2)){textVerticalAlign=onLeft?"bottom":"top";textAlign="center"}else{if(isRadianAroundZero(rotationDiff-PI$2*1.5)){textVerticalAlign=onLeft?"top":"bottom";textAlign="center"}else{textVerticalAlign="middle";if(rotationDiff<PI$2*1.5&&rotationDiff>PI$2/2){textAlign=onLeft?"left":"right"}else{textAlign=onLeft?"right":"left"}}}return{rotation:rotationDiff,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}function isSilent(axisModel){var tooltipOpt=axisModel.get("tooltip");return axisModel.get("silent")||!(axisModel.get("triggerEvent")||(tooltipOpt&&tooltipOpt.show))}function fixMinMaxLabelShow(axisModel,labelEls,tickEls){if(shouldShowAllLabels(axisModel.axis)){return}var showMinLabel=axisModel.get("axisLabel.showMinLabel");var showMaxLabel=axisModel.get("axisLabel.showMaxLabel");labelEls=labelEls||[];tickEls=tickEls||[];var firstLabel=labelEls[0];var nextLabel=labelEls[1];var lastLabel=labelEls[labelEls.length-1];var prevLabel=labelEls[labelEls.length-2];var firstTick=tickEls[0];var nextTick=tickEls[1];var lastTick=tickEls[tickEls.length-1];var prevTick=tickEls[tickEls.length-2];if(showMinLabel===false){ignoreEl(firstLabel);ignoreEl(firstTick)}else{if(isTwoLabelOverlapped(firstLabel,nextLabel)){if(showMinLabel){ignoreEl(nextLabel);ignoreEl(nextTick)}else{ignoreEl(firstLabel);ignoreEl(firstTick)}}}if(showMaxLabel===false){ignoreEl(lastLabel);ignoreEl(lastTick)}else{if(isTwoLabelOverlapped(prevLabel,lastLabel)){if(showMaxLabel){ignoreEl(prevLabel);ignoreEl(prevTick)}else{ignoreEl(lastLabel);ignoreEl(lastTick)}}}}function ignoreEl(el){el&&(el.ignore=true)}function isTwoLabelOverlapped(current,next,labelLayout){var firstRect=current&&current.getBoundingRect().clone();var nextRect=next&&next.getBoundingRect().clone();
if(!firstRect||!nextRect){return}var mRotationBack=identity([]);rotate(mRotationBack,mRotationBack,-current.rotation);firstRect.applyTransform(mul$1([],mRotationBack,current.getLocalTransform()));nextRect.applyTransform(mul$1([],mRotationBack,next.getLocalTransform()));return firstRect.intersect(nextRect)}function isNameLocationCenter(nameLocation){return nameLocation==="middle"||nameLocation==="center"}function buildAxisTick(axisBuilder,axisModel,opt){var axis=axisModel.axis;if(!axisModel.get("axisTick.show")||axis.scale.isBlank()){return}var tickModel=axisModel.getModel("axisTick");var lineStyleModel=tickModel.getModel("lineStyle");var tickLen=tickModel.get("length");var ticksCoords=axis.getTicksCoords();var pt1=[];var pt2=[];var matrix=axisBuilder._transform;var tickEls=[];for(var i=0;i<ticksCoords.length;i++){var tickCoord=ticksCoords[i].coord;pt1[0]=tickCoord;pt1[1]=0;pt2[0]=tickCoord;pt2[1]=opt.tickDirection*tickLen;if(matrix){applyTransform(pt1,pt1,matrix);applyTransform(pt2,pt2,matrix)}var tickEl=new Line(subPixelOptimizeLine({anid:"tick_"+ticksCoords[i].tickValue,shape:{x1:pt1[0],y1:pt1[1],x2:pt2[0],y2:pt2[1]},style:defaults(lineStyleModel.getLineStyle(),{stroke:axisModel.get("axisLine.lineStyle.color")}),z2:2,silent:true}));axisBuilder.group.add(tickEl);tickEls.push(tickEl)}return tickEls}function buildAxisLabel(axisBuilder,axisModel,opt){var axis=axisModel.axis;var show=retrieve(opt.axisLabelShow,axisModel.get("axisLabel.show"));if(!show||axis.scale.isBlank()){return}var labelModel=axisModel.getModel("axisLabel");var labelMargin=labelModel.get("margin");var labels=axis.getViewLabels();var labelRotation=(retrieve(opt.labelRotate,labelModel.get("rotate"))||0)*PI$2/180;var labelLayout=innerTextLayout(opt.rotation,labelRotation,opt.labelDirection);var rawCategoryData=axisModel.getCategories(true);var labelEls=[];var silent=isSilent(axisModel);var triggerEvent=axisModel.get("triggerEvent");each$1(labels,function(labelItem,index){var tickValue=labelItem.tickValue;
var formattedLabel=labelItem.formattedLabel;var rawLabel=labelItem.rawLabel;var itemLabelModel=labelModel;if(rawCategoryData&&rawCategoryData[tickValue]&&rawCategoryData[tickValue].textStyle){itemLabelModel=new Model(rawCategoryData[tickValue].textStyle,labelModel,axisModel.ecModel)}var textColor=itemLabelModel.getTextColor()||axisModel.get("axisLine.lineStyle.color");var tickCoord=axis.dataToCoord(tickValue);var pos=[tickCoord,opt.labelOffset+opt.labelDirection*labelMargin];var textEl=new Text({anid:"label_"+tickValue,position:pos,rotation:labelLayout.rotation,silent:silent,z2:10});setTextStyle(textEl.style,itemLabelModel,{text:formattedLabel,textAlign:itemLabelModel.getShallow("align",true)||labelLayout.textAlign,textVerticalAlign:itemLabelModel.getShallow("verticalAlign",true)||itemLabelModel.getShallow("baseline",true)||labelLayout.textVerticalAlign,textFill:typeof textColor==="function"?textColor(axis.type==="category"?rawLabel:axis.type==="value"?tickValue+"":tickValue,index):textColor});if(triggerEvent){textEl.eventData=makeAxisEventDataBase(axisModel);textEl.eventData.targetType="axisLabel";textEl.eventData.value=rawLabel}axisBuilder._dumbGroup.add(textEl);textEl.updateTransform();labelEls.push(textEl);axisBuilder.group.add(textEl);textEl.decomposeTransform()});return labelEls}var each$6=each$1;var curry$1=curry;function collect(ecModel,api){var result={axesInfo:{},seriesInvolved:false,coordSysAxesInfo:{},coordSysMap:{}};collectAxesInfo(result,ecModel,api);result.seriesInvolved&&collectSeriesInfo(result,ecModel);return result}function collectAxesInfo(result,ecModel,api){var globalTooltipModel=ecModel.getComponent("tooltip");var globalAxisPointerModel=ecModel.getComponent("axisPointer");var linksOption=globalAxisPointerModel.get("link",true)||[];var linkGroups=[];each$6(api.getCoordinateSystems(),function(coordSys){if(!coordSys.axisPointerEnabled){return}var coordSysKey=makeKey(coordSys.model);var axesInfoInCoordSys=result.coordSysAxesInfo[coordSysKey]={};result.coordSysMap[coordSysKey]=coordSys;
var coordSysModel=coordSys.model;var baseTooltipModel=coordSysModel.getModel("tooltip",globalTooltipModel);each$6(coordSys.getAxes(),curry$1(saveTooltipAxisInfo,false,null));if(coordSys.getTooltipAxes&&globalTooltipModel&&baseTooltipModel.get("show")){var triggerAxis=baseTooltipModel.get("trigger")==="axis";var cross=baseTooltipModel.get("axisPointer.type")==="cross";var tooltipAxes=coordSys.getTooltipAxes(baseTooltipModel.get("axisPointer.axis"));if(triggerAxis||cross){each$6(tooltipAxes.baseAxes,curry$1(saveTooltipAxisInfo,cross?"cross":true,triggerAxis))}if(cross){each$6(tooltipAxes.otherAxes,curry$1(saveTooltipAxisInfo,"cross",false))}}function saveTooltipAxisInfo(fromTooltip,triggerTooltip,axis){var axisPointerModel=axis.model.getModel("axisPointer",globalAxisPointerModel);var axisPointerShow=axisPointerModel.get("show");if(!axisPointerShow||(axisPointerShow==="auto"&&!fromTooltip&&!isHandleTrigger(axisPointerModel))){return}if(triggerTooltip==null){triggerTooltip=axisPointerModel.get("triggerTooltip")}axisPointerModel=fromTooltip?makeAxisPointerModel(axis,baseTooltipModel,globalAxisPointerModel,ecModel,fromTooltip,triggerTooltip):axisPointerModel;var snap=axisPointerModel.get("snap");var key=makeKey(axis.model);var involveSeries=triggerTooltip||snap||axis.type==="category";var axisInfo=result.axesInfo[key]={key:key,axis:axis,coordSys:coordSys,axisPointerModel:axisPointerModel,triggerTooltip:triggerTooltip,involveSeries:involveSeries,snap:snap,useHandle:isHandleTrigger(axisPointerModel),seriesModels:[]};axesInfoInCoordSys[key]=axisInfo;result.seriesInvolved|=involveSeries;var groupIndex=getLinkGroupIndex(linksOption,axis);if(groupIndex!=null){var linkGroup=linkGroups[groupIndex]||(linkGroups[groupIndex]={axesInfo:{}});linkGroup.axesInfo[key]=axisInfo;linkGroup.mapper=linksOption[groupIndex].mapper;axisInfo.linkGroup=linkGroup}}})}function makeAxisPointerModel(axis,baseTooltipModel,globalAxisPointerModel,ecModel,fromTooltip,triggerTooltip){var tooltipAxisPointerModel=baseTooltipModel.getModel("axisPointer");
var volatileOption={};each$6(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(field){volatileOption[field]=clone(tooltipAxisPointerModel.get(field))});volatileOption.snap=axis.type!=="category"&&!!triggerTooltip;if(tooltipAxisPointerModel.get("type")==="cross"){volatileOption.type="line"}var labelOption=volatileOption.label||(volatileOption.label={});labelOption.show==null&&(labelOption.show=false);if(fromTooltip==="cross"){var tooltipAxisPointerLabelShow=tooltipAxisPointerModel.get("label.show");labelOption.show=tooltipAxisPointerLabelShow!=null?tooltipAxisPointerLabelShow:true;if(!triggerTooltip){var crossStyle=volatileOption.lineStyle=tooltipAxisPointerModel.get("crossStyle");crossStyle&&defaults(labelOption,crossStyle.textStyle)}}return axis.model.getModel("axisPointer",new Model(volatileOption,globalAxisPointerModel,ecModel))}function collectSeriesInfo(result,ecModel){ecModel.eachSeries(function(seriesModel){var coordSys=seriesModel.coordinateSystem;var seriesTooltipTrigger=seriesModel.get("tooltip.trigger",true);var seriesTooltipShow=seriesModel.get("tooltip.show",true);if(!coordSys||seriesTooltipTrigger==="none"||seriesTooltipTrigger===false||seriesTooltipTrigger==="item"||seriesTooltipShow===false||seriesModel.get("axisPointer.show",true)===false){return}each$6(result.coordSysAxesInfo[makeKey(coordSys.model)],function(axisInfo){var axis=axisInfo.axis;if(coordSys.getAxis(axis.dim)===axis){axisInfo.seriesModels.push(seriesModel);axisInfo.seriesDataCount==null&&(axisInfo.seriesDataCount=0);axisInfo.seriesDataCount+=seriesModel.getData().count()}})},this)}function getLinkGroupIndex(linksOption,axis){var axisModel=axis.model;var dim=axis.dim;for(var i=0;i<linksOption.length;i++){var linkOption=linksOption[i]||{};if(checkPropInLink(linkOption[dim+"AxisId"],axisModel.id)||checkPropInLink(linkOption[dim+"AxisIndex"],axisModel.componentIndex)||checkPropInLink(linkOption[dim+"AxisName"],axisModel.name)){return i
}}}function checkPropInLink(linkPropValue,axisPropValue){return linkPropValue==="all"||(isArray(linkPropValue)&&indexOf(linkPropValue,axisPropValue)>=0)||linkPropValue===axisPropValue}function fixValue(axisModel){var axisInfo=getAxisInfo(axisModel);if(!axisInfo){return}var axisPointerModel=axisInfo.axisPointerModel;var scale=axisInfo.axis.scale;var option=axisPointerModel.option;var status=axisPointerModel.get("status");var value=axisPointerModel.get("value");if(value!=null){value=scale.parse(value)}var useHandle=isHandleTrigger(axisPointerModel);if(status==null){option.status=useHandle?"show":"hide"}var extent=scale.getExtent().slice();extent[0]>extent[1]&&extent.reverse();if(value==null||value>extent[1]){value=extent[1]}if(value<extent[0]){value=extent[0]}option.value=value;if(useHandle){option.status=axisInfo.axis.scale.isBlank()?"hide":"show"}}function getAxisInfo(axisModel){var coordSysAxesInfo=(axisModel.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return coordSysAxesInfo&&coordSysAxesInfo.axesInfo[makeKey(axisModel)]}function getAxisPointerModel(axisModel){var axisInfo=getAxisInfo(axisModel);return axisInfo&&axisInfo.axisPointerModel}function isHandleTrigger(axisPointerModel){return !!axisPointerModel.get("handle.show")}function makeKey(model){return model.type+"||"+model.id}var AxisView=extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(axisModel,ecModel,api,payload){this.axisPointerClass&&fixValue(axisModel);AxisView.superApply(this,"render",arguments);updateAxisPointer(this,axisModel,ecModel,api,payload,true)},updateAxisPointer:function(axisModel,ecModel,api,payload,force){updateAxisPointer(this,axisModel,ecModel,api,payload,false)},remove:function(ecModel,api){var axisPointer=this._axisPointer;axisPointer&&axisPointer.remove(api);AxisView.superApply(this,"remove",arguments)},dispose:function(ecModel,api){disposeAxisPointer(this,api);AxisView.superApply(this,"dispose",arguments)}});function updateAxisPointer(axisView,axisModel,ecModel,api,payload,forceRender){var Clazz=AxisView.getAxisPointerClass(axisView.axisPointerClass);
if(!Clazz){return}var axisPointerModel=getAxisPointerModel(axisModel);axisPointerModel?(axisView._axisPointer||(axisView._axisPointer=new Clazz())).render(axisModel,axisPointerModel,api,forceRender):disposeAxisPointer(axisView,api)}function disposeAxisPointer(axisView,ecModel,api){var axisPointer=axisView._axisPointer;axisPointer&&axisPointer.dispose(ecModel,api);axisView._axisPointer=null}var axisPointerClazz=[];AxisView.registerAxisPointerClass=function(type,clazz){if(__DEV__){if(axisPointerClazz[type]){throw new Error("axisPointer "+type+" exists")}}axisPointerClazz[type]=clazz};AxisView.getAxisPointerClass=function(type){return type&&axisPointerClazz[type]};function layout$1(gridModel,axisModel,opt){opt=opt||{};var grid=gridModel.coordinateSystem;var axis=axisModel.axis;var layout={};var otherAxisOnZeroOf=axis.getAxesOnZeroOf()[0];var rawAxisPosition=axis.position;var axisPosition=otherAxisOnZeroOf?"onZero":rawAxisPosition;var axisDim=axis.dim;var rect=grid.getRect();var rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height];var idx={left:0,right:1,top:0,bottom:1,onZero:2};var axisOffset=axisModel.get("offset")||0;var posBound=axisDim==="x"?[rectBound[2]-axisOffset,rectBound[3]+axisOffset]:[rectBound[0]-axisOffset,rectBound[1]+axisOffset];if(otherAxisOnZeroOf){var onZeroCoord=otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));posBound[idx.onZero]=Math.max(Math.min(onZeroCoord,posBound[1]),posBound[0])}layout.position=[axisDim==="y"?posBound[idx[axisPosition]]:rectBound[0],axisDim==="x"?posBound[idx[axisPosition]]:rectBound[3]];layout.rotation=Math.PI/2*(axisDim==="x"?0:1);var dirMap={top:-1,bottom:1,left:-1,right:1};layout.labelDirection=layout.tickDirection=layout.nameDirection=dirMap[rawAxisPosition];layout.labelOffset=otherAxisOnZeroOf?posBound[idx[rawAxisPosition]]-posBound[idx.onZero]:0;if(axisModel.get("axisTick.inside")){layout.tickDirection=-layout.tickDirection}if(retrieve(opt.labelInside,axisModel.get("axisLabel.inside"))){layout.labelDirection=-layout.labelDirection
}var labelRotate=axisModel.get("axisLabel.rotate");layout.labelRotate=axisPosition==="top"?-labelRotate:labelRotate;layout.z2=1;return layout}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"];var selfBuilderAttrs=["splitArea","splitLine"];var CartesianAxisView=AxisView.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(axisModel,ecModel,api,payload){this.group.removeAll();var oldAxisGroup=this._axisGroup;this._axisGroup=new Group();this.group.add(this._axisGroup);if(!axisModel.get("show")){return}var gridModel=axisModel.getCoordSysModel();var layout=layout$1(gridModel,axisModel);var axisBuilder=new AxisBuilder(axisModel,layout);each$1(axisBuilderAttrs,axisBuilder.add,axisBuilder);this._axisGroup.add(axisBuilder.getGroup());each$1(selfBuilderAttrs,function(name){if(axisModel.get(name+".show")){this["_"+name](axisModel,gridModel)}},this);groupTransition(oldAxisGroup,this._axisGroup,axisModel);CartesianAxisView.superCall(this,"render",axisModel,ecModel,api,payload)},remove:function(){this._splitAreaColors=null},_splitLine:function(axisModel,gridModel){var axis=axisModel.axis;if(axis.scale.isBlank()){return}var splitLineModel=axisModel.getModel("splitLine");var lineStyleModel=splitLineModel.getModel("lineStyle");var lineColors=lineStyleModel.get("color");lineColors=isArray(lineColors)?lineColors:[lineColors];var gridRect=gridModel.coordinateSystem.getRect();var isHorizontal=axis.isHorizontal();var lineCount=0;var ticksCoords=axis.getTicksCoords({tickModel:splitLineModel});var p1=[];var p2=[];var lineStyle=lineStyleModel.getLineStyle();for(var i=0;i<ticksCoords.length;i++){var tickCoord=axis.toGlobalCoord(ticksCoords[i].coord);if(isHorizontal){p1[0]=tickCoord;p1[1]=gridRect.y;p2[0]=tickCoord;p2[1]=gridRect.y+gridRect.height}else{p1[0]=gridRect.x;p1[1]=tickCoord;p2[0]=gridRect.x+gridRect.width;p2[1]=tickCoord}var colorIndex=(lineCount++)%lineColors.length;var tickValue=ticksCoords[i].tickValue;this._axisGroup.add(new Line(subPixelOptimizeLine({anid:tickValue!=null?"line_"+ticksCoords[i].tickValue:null,shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:defaults({stroke:lineColors[colorIndex]},lineStyle),silent:true})))
}},_splitArea:function(axisModel,gridModel){var axis=axisModel.axis;if(axis.scale.isBlank()){return}var splitAreaModel=axisModel.getModel("splitArea");var areaStyleModel=splitAreaModel.getModel("areaStyle");var areaColors=areaStyleModel.get("color");var gridRect=gridModel.coordinateSystem.getRect();var ticksCoords=axis.getTicksCoords({tickModel:splitAreaModel,clamp:true});if(!ticksCoords.length){return}var areaColorsLen=areaColors.length;var lastSplitAreaColors=this._splitAreaColors;var newSplitAreaColors=createHashMap();var colorIndex=0;if(lastSplitAreaColors){for(var i=0;i<ticksCoords.length;i++){var cIndex=lastSplitAreaColors.get(ticksCoords[i].tickValue);if(cIndex!=null){colorIndex=(cIndex+(areaColorsLen-1)*i)%areaColorsLen;break}}}var prev=axis.toGlobalCoord(ticksCoords[0].coord);var areaStyle=areaStyleModel.getAreaStyle();areaColors=isArray(areaColors)?areaColors:[areaColors];for(var i=1;i<ticksCoords.length;i++){var tickCoord=axis.toGlobalCoord(ticksCoords[i].coord);var x;var y;var width;var height;if(axis.isHorizontal()){x=prev;y=gridRect.y;width=tickCoord-x;height=gridRect.height;prev=x+width}else{x=gridRect.x;y=prev;width=gridRect.width;height=tickCoord-y;prev=y+height}var tickValue=ticksCoords[i-1].tickValue;tickValue!=null&&newSplitAreaColors.set(tickValue,colorIndex);this._axisGroup.add(new Rect({anid:tickValue!=null?"area_"+tickValue:null,shape:{x:x,y:y,width:width,height:height},style:defaults({fill:areaColors[colorIndex]},areaStyle),silent:true}));colorIndex=(colorIndex+1)%areaColorsLen}this._splitAreaColors=newSplitAreaColors}});CartesianAxisView.extend({type:"xAxis"});CartesianAxisView.extend({type:"yAxis"});extendComponentView({type:"grid",render:function(gridModel,ecModel){this.group.removeAll();if(gridModel.get("show")){this.group.add(new Rect({shape:gridModel.coordinateSystem.getRect(),style:defaults({fill:gridModel.get("backgroundColor")},gridModel.getItemStyle()),silent:true,z2:-1}))}}});registerPreprocessor(function(option){if(option.xAxis&&option.yAxis&&!option.grid){option.grid={}
}});registerVisual(visualSymbol("line","circle","line"));registerLayout(pointsLayout("line"));registerProcessor(PRIORITY.PROCESSOR.STATISTIC,dataSample("line"));var BaseBarSeries=SeriesModel.extend({type:"series.__base_bar__",getInitialData:function(option,ecModel){return createListFromArray(this.getSource(),this)},getMarkerPosition:function(value){var coordSys=this.coordinateSystem;if(coordSys){var pt=coordSys.dataToPoint(coordSys.clampData(value));var data=this.getData();var offset=data.getLayout("offset");var size=data.getLayout("size");var offsetIndex=coordSys.getBaseAxis().isHorizontal()?0:1;pt[offsetIndex]+=offset+size/2;return pt}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,barMinHeight:0,barMinAngle:0,large:false,largeThreshold:400,progressive:3000,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});BaseBarSeries.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return this.get("large")?this.get("progressive"):false},getProgressiveThreshold:function(){var progressiveThreshold=this.get("progressiveThreshold");var largeThreshold=this.get("largeThreshold");if(largeThreshold>progressiveThreshold){progressiveThreshold=largeThreshold}return progressiveThreshold}});function setLabel(normalStyle,hoverStyle,itemModel,color,seriesModel,dataIndex,labelPositionOutside){var labelModel=itemModel.getModel("label");var hoverLabelModel=itemModel.getModel("emphasis.label");setLabelStyle(normalStyle,hoverStyle,labelModel,hoverLabelModel,{labelFetcher:seriesModel,labelDataIndex:dataIndex,defaultText:getDefaultLabel(seriesModel.getData(),dataIndex),isRectText:true,autoColor:color});fixPosition(normalStyle);fixPosition(hoverStyle)}function fixPosition(style,labelPositionOutside){if(style.textPosition==="outside"){style.textPosition=labelPositionOutside}}var getBarItemStyle=makeStyleMapper([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);
var barItemStyle={getBarItemStyle:function(excludes){var style=getBarItemStyle(this,excludes);if(this.getBorderLineDash){var lineDash=this.getBorderLineDash();lineDash&&(style.lineDash=lineDash)}return style}};var BAR_BORDER_WIDTH_QUERY=["itemStyle","barBorderWidth"];extend(Model.prototype,barItemStyle);extendChartView({type:"bar",render:function(seriesModel,ecModel,api){this._updateDrawMode(seriesModel);var coordinateSystemType=seriesModel.get("coordinateSystem");if(coordinateSystemType==="cartesian2d"||coordinateSystemType==="polar"){this._isLargeDraw?this._renderLarge(seriesModel,ecModel,api):this._renderNormal(seriesModel,ecModel,api)}else{if(__DEV__){console.warn("Only cartesian2d and polar supported for bar.")}}return this.group},incrementalPrepareRender:function(seriesModel,ecModel,api){this._clear();this._updateDrawMode(seriesModel)},incrementalRender:function(params,seriesModel,ecModel,api){this._incrementalRenderLarge(params,seriesModel)},_updateDrawMode:function(seriesModel){var isLargeDraw=seriesModel.pipelineContext.large;if(this._isLargeDraw==null||isLargeDraw^this._isLargeDraw){this._isLargeDraw=isLargeDraw;this._clear()}},_renderNormal:function(seriesModel,ecModel,api){var group=this.group;var data=seriesModel.getData();var oldData=this._data;var coord=seriesModel.coordinateSystem;var baseAxis=coord.getBaseAxis();var isHorizontalOrRadial;if(coord.type==="cartesian2d"){isHorizontalOrRadial=baseAxis.isHorizontal()}else{if(coord.type==="polar"){isHorizontalOrRadial=baseAxis.dim==="angle"}}var animationModel=seriesModel.isAnimationEnabled()?seriesModel:null;data.diff(oldData).add(function(dataIndex){if(!data.hasValue(dataIndex)){return}var itemModel=data.getItemModel(dataIndex);var layout=getLayout[coord.type](data,dataIndex,itemModel);var el=elementCreator[coord.type](data,dataIndex,itemModel,layout,isHorizontalOrRadial,animationModel);data.setItemGraphicEl(dataIndex,el);group.add(el);updateStyle(el,data,dataIndex,itemModel,layout,seriesModel,isHorizontalOrRadial,coord.type==="polar")
}).update(function(newIndex,oldIndex){var el=oldData.getItemGraphicEl(oldIndex);if(!data.hasValue(newIndex)){group.remove(el);return}var itemModel=data.getItemModel(newIndex);var layout=getLayout[coord.type](data,newIndex,itemModel);if(el){updateProps(el,{shape:layout},animationModel,newIndex)}else{el=elementCreator[coord.type](data,newIndex,itemModel,layout,isHorizontalOrRadial,animationModel,true)}data.setItemGraphicEl(newIndex,el);group.add(el);updateStyle(el,data,newIndex,itemModel,layout,seriesModel,isHorizontalOrRadial,coord.type==="polar")}).remove(function(dataIndex){var el=oldData.getItemGraphicEl(dataIndex);if(coord.type==="cartesian2d"){el&&removeRect(dataIndex,animationModel,el)}else{el&&removeSector(dataIndex,animationModel,el)}}).execute();this._data=data},_renderLarge:function(seriesModel,ecModel,api){this._clear();createLarge(seriesModel,this.group)},_incrementalRenderLarge:function(params,seriesModel){createLarge(seriesModel,this.group,true)},dispose:noop,remove:function(ecModel){this._clear(ecModel)},_clear:function(ecModel){var group=this.group;var data=this._data;if(ecModel&&ecModel.get("animation")&&data&&!this._isLargeDraw){data.eachItemGraphicEl(function(el){if(el.type==="sector"){removeSector(el.dataIndex,ecModel,el)}else{removeRect(el.dataIndex,ecModel,el)}})}else{group.removeAll()}this._data=null}});var elementCreator={cartesian2d:function(data,dataIndex,itemModel,layout,isHorizontal,animationModel,isUpdate){var rect=new Rect({shape:extend({},layout)});if(animationModel){var rectShape=rect.shape;var animateProperty=isHorizontal?"height":"width";var animateTarget={};rectShape[animateProperty]=0;animateTarget[animateProperty]=layout[animateProperty];graphic[isUpdate?"updateProps":"initProps"](rect,{shape:animateTarget},animationModel,dataIndex)}return rect},polar:function(data,dataIndex,itemModel,layout,isRadial,animationModel,isUpdate){var clockwise=layout.startAngle<layout.endAngle;var sector=new Sector({shape:defaults({clockwise:clockwise},layout)});
if(animationModel){var sectorShape=sector.shape;var animateProperty=isRadial?"r":"endAngle";var animateTarget={};sectorShape[animateProperty]=isRadial?0:layout.startAngle;animateTarget[animateProperty]=layout[animateProperty];graphic[isUpdate?"updateProps":"initProps"](sector,{shape:animateTarget},animationModel,dataIndex)}return sector}};function removeRect(dataIndex,animationModel,el){el.style.text=null;updateProps(el,{shape:{width:0}},animationModel,dataIndex,function(){el.parent&&el.parent.remove(el)})}function removeSector(dataIndex,animationModel,el){el.style.text=null;updateProps(el,{shape:{r:el.shape.r0}},animationModel,dataIndex,function(){el.parent&&el.parent.remove(el)})}var getLayout={cartesian2d:function(data,dataIndex,itemModel){var layout=data.getItemLayout(dataIndex);var fixedLineWidth=getLineWidth(itemModel,layout);var signX=layout.width>0?1:-1;var signY=layout.height>0?1:-1;return{x:layout.x+signX*fixedLineWidth/2,y:layout.y+signY*fixedLineWidth/2,width:layout.width-signX*fixedLineWidth,height:layout.height-signY*fixedLineWidth}},polar:function(data,dataIndex,itemModel){var layout=data.getItemLayout(dataIndex);return{cx:layout.cx,cy:layout.cy,r0:layout.r0,r:layout.r,startAngle:layout.startAngle,endAngle:layout.endAngle}}};function updateStyle(el,data,dataIndex,itemModel,layout,seriesModel,isHorizontal,isPolar){var color=data.getItemVisual(dataIndex,"color");var opacity=data.getItemVisual(dataIndex,"opacity");var itemStyleModel=itemModel.getModel("itemStyle");var hoverStyle=itemModel.getModel("emphasis.itemStyle").getBarItemStyle();if(!isPolar){el.setShape("r",itemStyleModel.get("barBorderRadius")||0)}el.useStyle(defaults({fill:color,opacity:opacity},itemStyleModel.getBarItemStyle()));var cursorStyle=itemModel.getShallow("cursor");cursorStyle&&el.attr("cursor",cursorStyle);var labelPositionOutside=isHorizontal?(layout.height>0?"bottom":"top"):(layout.width>0?"left":"right");if(!isPolar){setLabel(el.style,hoverStyle,itemModel,color,seriesModel,dataIndex,labelPositionOutside)
}setHoverStyle(el,hoverStyle)}function getLineWidth(itemModel,rawLayout){var lineWidth=itemModel.get(BAR_BORDER_WIDTH_QUERY)||0;return Math.min(lineWidth,Math.abs(rawLayout.width),Math.abs(rawLayout.height))}var LargePath=Path.extend({type:"largeBar",shape:{points:[]},buildPath:function(ctx,shape){var points=shape.points;var startPoint=this.__startPoint;var valueIdx=this.__valueIdx;for(var i=0;i<points.length;i+=2){startPoint[this.__valueIdx]=points[i+valueIdx];ctx.moveTo(startPoint[0],startPoint[1]);ctx.lineTo(points[i],points[i+1])}}});function createLarge(seriesModel,group,incremental){var data=seriesModel.getData();var startPoint=[];var valueIdx=data.getLayout("valueAxisHorizontal")?1:0;startPoint[1-valueIdx]=data.getLayout("valueAxisStart");var el=new LargePath({shape:{points:data.getLayout("largePoints")},incremental:!!incremental,__startPoint:startPoint,__valueIdx:valueIdx});group.add(el);setLargeStyle(el,seriesModel,data)}function setLargeStyle(el,seriesModel,data){var borderColor=data.getVisual("borderColor")||data.getVisual("color");var itemStyle=seriesModel.getModel("itemStyle").getItemStyle(["color","borderColor"]);el.useStyle(itemStyle);el.style.fill=null;el.style.stroke=borderColor;el.style.lineWidth=data.getLayout("barWidth")}registerLayout(curry(layout,"bar"));registerLayout(largeLayout);registerVisual({seriesType:"bar",reset:function(seriesModel){seriesModel.getData().setVisual("legendSymbol","roundRect")}});var createListSimply=function(seriesModel,opt,nameList){opt=isArray(opt)&&{coordDimensions:opt}||extend({},opt);var source=seriesModel.getSource();var dimensionsInfo=createDimensions(source,opt);var list=new List(dimensionsInfo,seriesModel);list.initData(source,nameList);return list};var selectableMixin={updateSelectedMap:function(targetList){this._targetList=isArray(targetList)?targetList.slice():[];this._selectTargetMap=reduce(targetList||[],function(targetMap,target){targetMap.set(target.name,target);return targetMap},createHashMap())},select:function(name,id){var target=id!=null?this._targetList[id]:this._selectTargetMap.get(name);
var selectedMode=this.get("selectedMode");if(selectedMode==="single"){this._selectTargetMap.each(function(target){target.selected=false})}target&&(target.selected=true)},unSelect:function(name,id){var target=id!=null?this._targetList[id]:this._selectTargetMap.get(name);target&&(target.selected=false)},toggleSelected:function(name,id){var target=id!=null?this._targetList[id]:this._selectTargetMap.get(name);if(target!=null){this[target.selected?"unSelect":"select"](name,id);return target.selected}},isSelected:function(name,id){var target=id!=null?this._targetList[id]:this._selectTargetMap.get(name);return target&&target.selected}};var PieSeries=extendSeriesModel({type:"series.pie",init:function(option){PieSeries.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()};this.updateSelectedMap(this._createSelectableList());this._defaultLabelLine(option)},mergeOption:function(newOption){PieSeries.superCall(this,"mergeOption",newOption);this.updateSelectedMap(this._createSelectableList())},getInitialData:function(option,ecModel){return createListSimply(this,["value"])},_createSelectableList:function(){var data=this.getRawData();var valueDim=data.mapDimension("value");var targetList=[];for(var i=0,len=data.count();i<len;i++){targetList.push({name:data.getName(i),value:data.get(valueDim,i),selected:retrieveRawAttr(data,i,"selected")})}return targetList},getDataParams:function(dataIndex){var data=this.getData();var params=PieSeries.superCall(this,"getDataParams",dataIndex);var valueList=[];data.each(data.mapDimension("value"),function(value){valueList.push(value)});params.percent=getPercentWithPrecision(valueList,dataIndex,data.hostModel.get("percentPrecision"));params.$vars.push("percent");return params},_defaultLabelLine:function(option){defaultEmphasis(option,"labelLine",["show"]);var labelLineNormalOpt=option.labelLine;var labelLineEmphasisOpt=option.emphasis.labelLine;labelLineNormalOpt.show=labelLineNormalOpt.show&&option.label.show;
labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&&option.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,center:["50%","50%"],radius:[0,"75%"],clockwise:true,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:true,percentPrecision:2,stillShowZeroSum:true,label:{rotate:false,show:true,position:"outer"},labelLine:{show:true,length:15,length2:15,smooth:false,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationEasing:"cubicOut"}});mixin(PieSeries,selectableMixin);function updateDataSelected(uid,seriesModel,hasAnimation,api){var data=seriesModel.getData();var dataIndex=this.dataIndex;var name=data.getName(dataIndex);var selectedOffset=seriesModel.get("selectedOffset");api.dispatchAction({type:"pieToggleSelect",from:uid,name:name,seriesId:seriesModel.id});data.each(function(idx){toggleItemSelected(data.getItemGraphicEl(idx),data.getItemLayout(idx),seriesModel.isSelected(data.getName(idx)),selectedOffset,hasAnimation)})}function toggleItemSelected(el,layout,isSelected,selectedOffset,hasAnimation){var midAngle=(layout.startAngle+layout.endAngle)/2;var dx=Math.cos(midAngle);var dy=Math.sin(midAngle);var offset=isSelected?selectedOffset:0;var position=[dx*offset,dy*offset];hasAnimation?el.animate().when(200,{position:position}).start("bounceOut"):el.attr("position",position)}function PiePiece(data,idx){Group.call(this);var sector=new Sector({z2:2});var polyline=new Polyline();var text=new Text();this.add(sector);this.add(polyline);this.add(text);this.updateData(data,idx,true);function onEmphasis(){polyline.ignore=polyline.hoverIgnore;text.ignore=text.hoverIgnore}function onNormal(){polyline.ignore=polyline.normalIgnore;text.ignore=text.normalIgnore}this.on("emphasis",onEmphasis).on("normal",onNormal).on("mouseover",onEmphasis).on("mouseout",onNormal)}var piePieceProto=PiePiece.prototype;piePieceProto.updateData=function(data,idx,firstCreate){var sector=this.childAt(0);
var seriesModel=data.hostModel;var itemModel=data.getItemModel(idx);var layout=data.getItemLayout(idx);var sectorShape=extend({},layout);sectorShape.label=null;if(firstCreate){sector.setShape(sectorShape);var animationType=seriesModel.getShallow("animationType");if(animationType==="scale"){sector.shape.r=layout.r0;initProps(sector,{shape:{r:layout.r}},seriesModel,idx)}else{sector.shape.endAngle=layout.startAngle;updateProps(sector,{shape:{endAngle:layout.endAngle}},seriesModel,idx)}}else{updateProps(sector,{shape:sectorShape},seriesModel,idx)}var visualColor=data.getItemVisual(idx,"color");sector.useStyle(defaults({lineJoin:"bevel",fill:visualColor},itemModel.getModel("itemStyle").getItemStyle()));sector.hoverStyle=itemModel.getModel("emphasis.itemStyle").getItemStyle();var cursorStyle=itemModel.getShallow("cursor");cursorStyle&&sector.attr("cursor",cursorStyle);toggleItemSelected(this,data.getItemLayout(idx),seriesModel.isSelected(null,idx),seriesModel.get("selectedOffset"),seriesModel.get("animation"));function onEmphasis(){sector.stopAnimation(true);sector.animateTo({shape:{r:layout.r+seriesModel.get("hoverOffset")}},300,"elasticOut")}function onNormal(){sector.stopAnimation(true);sector.animateTo({shape:{r:layout.r}},300,"elasticOut")}sector.off("mouseover").off("mouseout").off("emphasis").off("normal");if(itemModel.get("hoverAnimation")&&seriesModel.isAnimationEnabled()){sector.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal)}this._updateLabel(data,idx);setHoverStyle(this)};piePieceProto._updateLabel=function(data,idx){var labelLine=this.childAt(1);var labelText=this.childAt(2);var seriesModel=data.hostModel;var itemModel=data.getItemModel(idx);var layout=data.getItemLayout(idx);var labelLayout=layout.label;var visualColor=data.getItemVisual(idx,"color");updateProps(labelLine,{shape:{points:labelLayout.linePoints||[[labelLayout.x,labelLayout.y],[labelLayout.x,labelLayout.y],[labelLayout.x,labelLayout.y]]}},seriesModel,idx);
updateProps(labelText,{style:{x:labelLayout.x,y:labelLayout.y}},seriesModel,idx);labelText.attr({rotation:labelLayout.rotation,origin:[labelLayout.x,labelLayout.y],z2:10});var labelModel=itemModel.getModel("label");var labelHoverModel=itemModel.getModel("emphasis.label");var labelLineModel=itemModel.getModel("labelLine");var labelLineHoverModel=itemModel.getModel("emphasis.labelLine");var visualColor=data.getItemVisual(idx,"color");setLabelStyle(labelText.style,labelText.hoverStyle={},labelModel,labelHoverModel,{labelFetcher:data.hostModel,labelDataIndex:idx,defaultText:data.getName(idx),autoColor:visualColor,useInsideStyle:!!labelLayout.inside},{textAlign:labelLayout.textAlign,textVerticalAlign:labelLayout.verticalAlign,opacity:data.getItemVisual(idx,"opacity")});labelText.ignore=labelText.normalIgnore=!labelModel.get("show");labelText.hoverIgnore=!labelHoverModel.get("show");labelLine.ignore=labelLine.normalIgnore=!labelLineModel.get("show");labelLine.hoverIgnore=!labelLineHoverModel.get("show");labelLine.setStyle({stroke:visualColor,opacity:data.getItemVisual(idx,"opacity")});labelLine.setStyle(labelLineModel.getModel("lineStyle").getLineStyle());labelLine.hoverStyle=labelLineHoverModel.getModel("lineStyle").getLineStyle();var smooth=labelLineModel.get("smooth");if(smooth&&smooth===true){smooth=0.4}labelLine.setShape({smooth:smooth})};inherits(PiePiece,Group);var PieView=Chart.extend({type:"pie",init:function(){var sectorGroup=new Group();this._sectorGroup=sectorGroup},render:function(seriesModel,ecModel,api,payload){if(payload&&(payload.from===this.uid)){return}var data=seriesModel.getData();var oldData=this._data;var group=this.group;var hasAnimation=ecModel.get("animation");var isFirstRender=!oldData;var animationType=seriesModel.get("animationType");var onSectorClick=curry(updateDataSelected,this.uid,seriesModel,hasAnimation,api);var selectedMode=seriesModel.get("selectedMode");data.diff(oldData).add(function(idx){var piePiece=new PiePiece(data,idx);if(isFirstRender&&animationType!=="scale"){piePiece.eachChild(function(child){child.stopAnimation(true)
})}selectedMode&&piePiece.on("click",onSectorClick);data.setItemGraphicEl(idx,piePiece);group.add(piePiece)}).update(function(newIdx,oldIdx){var piePiece=oldData.getItemGraphicEl(oldIdx);piePiece.updateData(data,newIdx);piePiece.off("click");selectedMode&&piePiece.on("click",onSectorClick);group.add(piePiece);data.setItemGraphicEl(newIdx,piePiece)}).remove(function(idx){var piePiece=oldData.getItemGraphicEl(idx);group.remove(piePiece)}).execute();if(hasAnimation&&isFirstRender&&data.count()>0&&animationType!=="scale"){var shape=data.getItemLayout(0);var r=Math.max(api.getWidth(),api.getHeight())/2;var removeClipPath=bind(group.removeClipPath,group);group.setClipPath(this._createClipPath(shape.cx,shape.cy,r,shape.startAngle,shape.clockwise,removeClipPath,seriesModel))}else{group.removeClipPath()}this._data=data},dispose:function(){},_createClipPath:function(cx,cy,r,startAngle,clockwise,cb,seriesModel){var clipPath=new Sector({shape:{cx:cx,cy:cy,r0:0,r:r,startAngle:startAngle,endAngle:startAngle,clockwise:clockwise}});initProps(clipPath,{shape:{endAngle:startAngle+(clockwise?1:-1)*Math.PI*2}},seriesModel,cb);return clipPath},containPoint:function(point,seriesModel){var data=seriesModel.getData();var itemLayout=data.getItemLayout(0);if(itemLayout){var dx=point[0]-itemLayout.cx;var dy=point[1]-itemLayout.cy;var radius=Math.sqrt(dx*dx+dy*dy);return radius<=itemLayout.r&&radius>=itemLayout.r0}}});var createDataSelectAction=function(seriesType,actionInfos){each$1(actionInfos,function(actionInfo){actionInfo.update="updateView";registerAction(actionInfo,function(payload,ecModel){var selected={};ecModel.eachComponent({mainType:"series",subType:seriesType,query:payload},function(seriesModel){if(seriesModel[actionInfo.method]){seriesModel[actionInfo.method](payload.name,payload.dataIndex)}var data=seriesModel.getData();data.each(function(idx){var name=data.getName(idx);selected[name]=seriesModel.isSelected(name)||false})});return{name:payload.name,selected:selected}})})};var dataColor=function(seriesType){return{getTargetSeries:function(ecModel){var paletteScope={};
var seiresModelMap=createHashMap();ecModel.eachSeriesByType(seriesType,function(seriesModel){seriesModel.__paletteScope=paletteScope;seiresModelMap.set(seriesModel.uid,seriesModel)});return seiresModelMap},reset:function(seriesModel,ecModel){var dataAll=seriesModel.getRawData();var idxMap={};var data=seriesModel.getData();data.each(function(idx){var rawIdx=data.getRawIndex(idx);idxMap[rawIdx]=idx});dataAll.each(function(rawIdx){var filteredIdx=idxMap[rawIdx];var singleDataColor=filteredIdx!=null&&data.getItemVisual(filteredIdx,"color",true);if(!singleDataColor){var itemModel=dataAll.getItemModel(rawIdx);var color=itemModel.get("itemStyle.color")||seriesModel.getColorFromPalette(dataAll.getName(rawIdx)||(rawIdx+""),seriesModel.__paletteScope,dataAll.count());dataAll.setItemVisual(rawIdx,"color",color);if(filteredIdx!=null){data.setItemVisual(filteredIdx,"color",color)}}else{dataAll.setItemVisual(rawIdx,"color",singleDataColor)}})}}};function adjustSingleSide(list,cx,cy,r,dir,viewWidth,viewHeight){list.sort(function(a,b){return a.y-b.y});function shiftDown(start,end,delta,dir){for(var j=start;j<end;j++){list[j].y+=delta;if(j>start&&j+1<end&&list[j+1].y>list[j].y+list[j].height){shiftUp(j,delta/2);return}}shiftUp(end-1,delta/2)}function shiftUp(end,delta){for(var j=end;j>=0;j--){list[j].y-=delta;if(j>0&&list[j].y>list[j-1].y+list[j-1].height){break}}}function changeX(list,isDownList,cx,cy,r,dir){var lastDeltaX=dir>0?isDownList?Number.MAX_VALUE:0:isDownList?Number.MAX_VALUE:0;for(var i=0,l=list.length;i<l;i++){var deltaY=Math.abs(list[i].y-cy);var length=list[i].len;var length2=list[i].len2;var deltaX=(deltaY<r+length)?Math.sqrt((r+length+length2)*(r+length+length2)-deltaY*deltaY):Math.abs(list[i].x-cx);if(isDownList&&deltaX>=lastDeltaX){deltaX=lastDeltaX-10}if(!isDownList&&deltaX<=lastDeltaX){deltaX=lastDeltaX+10}list[i].x=cx+deltaX*dir;lastDeltaX=deltaX}}var lastY=0;var delta;var len=list.length;var upList=[];var downList=[];for(var i=0;i<len;i++){delta=list[i].y-lastY;
if(delta<0){shiftDown(i,len,-delta,dir)}lastY=list[i].y+list[i].height}if(viewHeight-lastY<0){shiftUp(len-1,lastY-viewHeight)}for(var i=0;i<len;i++){if(list[i].y>=cy){downList.push(list[i])}else{upList.push(list[i])}}changeX(upList,false,cx,cy,r,dir);changeX(downList,true,cx,cy,r,dir)}function avoidOverlap(labelLayoutList,cx,cy,r,viewWidth,viewHeight){var leftList=[];var rightList=[];for(var i=0;i<labelLayoutList.length;i++){if(isPositionCenter(labelLayoutList[i])){continue}if(labelLayoutList[i].x<cx){leftList.push(labelLayoutList[i])}else{rightList.push(labelLayoutList[i])}}adjustSingleSide(rightList,cx,cy,r,1,viewWidth,viewHeight);adjustSingleSide(leftList,cx,cy,r,-1,viewWidth,viewHeight);for(var i=0;i<labelLayoutList.length;i++){if(isPositionCenter(labelLayoutList[i])){continue}var linePoints=labelLayoutList[i].linePoints;if(linePoints){var dist=linePoints[1][0]-linePoints[2][0];if(labelLayoutList[i].x<cx){linePoints[2][0]=labelLayoutList[i].x+3}else{linePoints[2][0]=labelLayoutList[i].x-3}linePoints[1][1]=linePoints[2][1]=labelLayoutList[i].y;linePoints[1][0]=linePoints[2][0]+dist}}}function isPositionCenter(layout){return layout.position==="center"}var labelLayout=function(seriesModel,r,viewWidth,viewHeight){var data=seriesModel.getData();var labelLayoutList=[];var cx;var cy;var hasLabelRotate=false;data.each(function(idx){var layout=data.getItemLayout(idx);var itemModel=data.getItemModel(idx);var labelModel=itemModel.getModel("label");var labelPosition=labelModel.get("position")||itemModel.get("emphasis.label.position");var labelLineModel=itemModel.getModel("labelLine");var labelLineLen=labelLineModel.get("length");var labelLineLen2=labelLineModel.get("length2");var midAngle=(layout.startAngle+layout.endAngle)/2;var dx=Math.cos(midAngle);var dy=Math.sin(midAngle);var textX;var textY;var linePoints;var textAlign;cx=layout.cx;cy=layout.cy;var isLabelInside=labelPosition==="inside"||labelPosition==="inner";if(labelPosition==="center"){textX=layout.cx;textY=layout.cy;
textAlign="center"}else{var x1=(isLabelInside?(layout.r+layout.r0)/2*dx:layout.r*dx)+cx;var y1=(isLabelInside?(layout.r+layout.r0)/2*dy:layout.r*dy)+cy;textX=x1+dx*3;textY=y1+dy*3;if(!isLabelInside){var x2=x1+dx*(labelLineLen+r-layout.r);var y2=y1+dy*(labelLineLen+r-layout.r);var x3=x2+((dx<0?-1:1)*labelLineLen2);var y3=y2;textX=x3+(dx<0?-5:5);textY=y3;linePoints=[[x1,y1],[x2,y2],[x3,y3]]}textAlign=isLabelInside?"center":(dx>0?"left":"right")}var font=labelModel.getFont();var labelRotate=labelModel.get("rotate")?(dx<0?-midAngle+Math.PI:-midAngle):0;var text=seriesModel.getFormattedLabel(idx,"normal")||data.getName(idx);var textRect=getBoundingRect(text,font,textAlign,"top");hasLabelRotate=!!labelRotate;layout.label={x:textX,y:textY,position:labelPosition,height:textRect.height,len:labelLineLen,len2:labelLineLen2,linePoints:linePoints,textAlign:textAlign,verticalAlign:"middle",rotation:labelRotate,inside:isLabelInside};if(!isLabelInside){labelLayoutList.push(layout.label)}});if(!hasLabelRotate&&seriesModel.get("avoidLabelOverlap")){avoidOverlap(labelLayoutList,cx,cy,r,viewWidth,viewHeight)}};var PI2$4=Math.PI*2;var RADIAN=Math.PI/180;var pieLayout=function(seriesType,ecModel,api,payload){ecModel.eachSeriesByType(seriesType,function(seriesModel){var data=seriesModel.getData();var valueDim=data.mapDimension("value");var center=seriesModel.get("center");var radius=seriesModel.get("radius");if(!isArray(radius)){radius=[0,radius]}if(!isArray(center)){center=[center,center]}var width=api.getWidth();var height=api.getHeight();var size=Math.min(width,height);var cx=parsePercent$1(center[0],width);var cy=parsePercent$1(center[1],height);var r0=parsePercent$1(radius[0],size/2);var r=parsePercent$1(radius[1],size/2);var startAngle=-seriesModel.get("startAngle")*RADIAN;var minAngle=seriesModel.get("minAngle")*RADIAN;var validDataCount=0;data.each(valueDim,function(value){!isNaN(value)&&validDataCount++});var sum=data.getSum(valueDim);var unitRadian=Math.PI/(sum||validDataCount)*2;
var clockwise=seriesModel.get("clockwise");var roseType=seriesModel.get("roseType");var stillShowZeroSum=seriesModel.get("stillShowZeroSum");var extent=data.getDataExtent(valueDim);extent[0]=0;var restAngle=PI2$4;var valueSumLargerThanMinAngle=0;var currentAngle=startAngle;var dir=clockwise?1:-1;data.each(valueDim,function(value,idx){var angle;if(isNaN(value)){data.setItemLayout(idx,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:clockwise,cx:cx,cy:cy,r0:r0,r:roseType?NaN:r});return}if(roseType!=="area"){angle=(sum===0&&stillShowZeroSum)?unitRadian:(value*unitRadian)}else{angle=PI2$4/validDataCount}if(angle<minAngle){angle=minAngle;restAngle-=minAngle}else{valueSumLargerThanMinAngle+=value}var endAngle=currentAngle+dir*angle;data.setItemLayout(idx,{angle:angle,startAngle:currentAngle,endAngle:endAngle,clockwise:clockwise,cx:cx,cy:cy,r0:r0,r:roseType?linearMap(value,extent,[r0,r]):r});currentAngle=endAngle});if(restAngle<PI2$4&&validDataCount){if(restAngle<=0.001){var angle=PI2$4/validDataCount;data.each(valueDim,function(value,idx){if(!isNaN(value)){var layout=data.getItemLayout(idx);layout.angle=angle;layout.startAngle=startAngle+dir*idx*angle;layout.endAngle=startAngle+dir*(idx+1)*angle}})}else{unitRadian=restAngle/valueSumLargerThanMinAngle;currentAngle=startAngle;data.each(valueDim,function(value,idx){if(!isNaN(value)){var layout=data.getItemLayout(idx);var angle=layout.angle===minAngle?minAngle:value*unitRadian;layout.startAngle=currentAngle;layout.endAngle=currentAngle+dir*angle;currentAngle+=dir*angle}})}}labelLayout(seriesModel,r,width,height)})};var dataFilter=function(seriesType){return{seriesType:seriesType,reset:function(seriesModel,ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});if(!legendModels||!legendModels.length){return}var data=seriesModel.getData();data.filterSelf(function(idx){var name=data.getName(idx);for(var i=0;i<legendModels.length;i++){if(!legendModels[i].isSelected(name)){return false}}return true})}}};createDataSelectAction("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]);
registerVisual(dataColor("pie"));registerLayout(curry(pieLayout,"pie"));registerProcessor(dataFilter("pie"));SeriesModel.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(option,ecModel){return createListFromArray(this.getSource(),this)},brushSelector:"point",getProgressive:function(){var progressive=this.option.progressive;if(progressive==null){return this.option.large?5000:this.get("progressive")}return progressive},getProgressiveThreshold:function(){var progressiveThreshold=this.option.progressiveThreshold;if(progressiveThreshold==null){return this.option.large?10000:this.get("progressiveThreshold")}return progressiveThreshold},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,symbolSize:10,large:false,largeThreshold:2000,itemStyle:{opacity:0.8}}});var BOOST_SIZE_THRESHOLD=4;var LargeSymbolPath=extendShape({shape:{points:null},symbolProxy:null,buildPath:function(path,shape){var points=shape.points;var size=shape.size;var symbolProxy=this.symbolProxy;var symbolProxyShape=symbolProxy.shape;var ctx=path.getContext?path.getContext():path;var canBoost=ctx&&size[0]<BOOST_SIZE_THRESHOLD;if(canBoost){return}for(var i=0;i<points.length;){var x=points[i++];var y=points[i++];if(isNaN(x)||isNaN(y)){continue}symbolProxyShape.x=x-size[0]/2;symbolProxyShape.y=y-size[1]/2;symbolProxyShape.width=size[0];symbolProxyShape.height=size[1];symbolProxy.buildPath(path,symbolProxyShape,true)}},afterBrush:function(ctx){var shape=this.shape;var points=shape.points;var size=shape.size;var canBoost=size[0]<BOOST_SIZE_THRESHOLD;if(!canBoost){return}this.setTransform(ctx);for(var i=0;i<points.length;){var x=points[i++];var y=points[i++];if(isNaN(x)||isNaN(y)){continue}ctx.fillRect(x-size[0]/2,y-size[1]/2,size[0],size[1])}this.restoreTransform(ctx)},findDataIndex:function(x,y){var shape=this.shape;var points=shape.points;var size=shape.size;var w=Math.max(size[0],4);var h=Math.max(size[1],4);
for(var idx=points.length/2-1;idx>=0;idx--){var i=idx*2;var x0=points[i]-w/2;var y0=points[i+1]-h/2;if(x>=x0&&y>=y0&&x<=x0+w&&y<=y0+h){return idx}}return -1}});function LargeSymbolDraw(){this.group=new Group()}var largeSymbolProto=LargeSymbolDraw.prototype;largeSymbolProto.isPersistent=function(){return !this._incremental};largeSymbolProto.updateData=function(data){this.group.removeAll();var symbolEl=new LargeSymbolPath({rectHover:true,cursor:"default"});symbolEl.setShape({points:data.getLayout("symbolPoints")});this._setCommon(symbolEl,data);this.group.add(symbolEl);this._incremental=null};largeSymbolProto.updateLayout=function(data){if(this._incremental){return}var points=data.getLayout("symbolPoints");this.group.eachChild(function(child){if(child.startIndex!=null){var len=(child.endIndex-child.startIndex)*2;var byteOffset=child.startIndex*4*2;points=new Float32Array(points.buffer,byteOffset,len)}child.setShape("points",points)})};largeSymbolProto.incrementalPrepareUpdate=function(data){this.group.removeAll();this._clearIncremental();if(data.count()>2000000){if(!this._incremental){this._incremental=new IncrementalDisplayble({silent:true})}this.group.add(this._incremental)}else{this._incremental=null}};largeSymbolProto.incrementalUpdate=function(taskParams,data){var symbolEl;if(this._incremental){symbolEl=new LargeSymbolPath();this._incremental.addDisplayable(symbolEl,true)}else{symbolEl=new LargeSymbolPath({rectHover:true,cursor:"default",startIndex:taskParams.start,endIndex:taskParams.end});symbolEl.incremental=true;this.group.add(symbolEl)}symbolEl.setShape({points:data.getLayout("symbolPoints")});this._setCommon(symbolEl,data,!!this._incremental)};largeSymbolProto._setCommon=function(symbolEl,data,isIncremental){var hostModel=data.hostModel;var size=data.getVisual("symbolSize");symbolEl.setShape("size",(size instanceof Array)?size:[size,size]);symbolEl.symbolProxy=createSymbol(data.getVisual("symbol"),0,0,0,0);symbolEl.setColor=symbolEl.symbolProxy.setColor;var extrudeShadow=symbolEl.shape.size[0]<BOOST_SIZE_THRESHOLD;
symbolEl.useStyle(hostModel.getModel("itemStyle").getItemStyle(extrudeShadow?["color","shadowBlur","shadowColor"]:["color"]));var visualColor=data.getVisual("color");if(visualColor){symbolEl.setColor(visualColor)}if(!isIncremental){symbolEl.seriesIndex=hostModel.seriesIndex;symbolEl.on("mousemove",function(e){symbolEl.dataIndex=null;var dataIndex=symbolEl.findDataIndex(e.offsetX,e.offsetY);if(dataIndex>=0){symbolEl.dataIndex=dataIndex+(symbolEl.startIndex||0)}})}};largeSymbolProto.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};largeSymbolProto._clearIncremental=function(){var incremental=this._incremental;if(incremental){incremental.clearDisplaybles()}};extendChartView({type:"scatter",render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var symbolDraw=this._updateSymbolDraw(data,seriesModel);symbolDraw.updateData(data);this._finished=true},incrementalPrepareRender:function(seriesModel,ecModel,api){var data=seriesModel.getData();var symbolDraw=this._updateSymbolDraw(data,seriesModel);symbolDraw.incrementalPrepareUpdate(data);this._finished=false},incrementalRender:function(taskParams,seriesModel,ecModel){this._symbolDraw.incrementalUpdate(taskParams,seriesModel.getData());this._finished=taskParams.end===seriesModel.getData().count()},updateTransform:function(seriesModel,ecModel,api){var data=seriesModel.getData();this.group.dirty();if(!this._finished||data.count()>10000||!this._symbolDraw.isPersistent()){return{update:true}}else{var res=pointsLayout().reset(seriesModel);if(res.progress){res.progress({start:0,end:data.count()},data)}this._symbolDraw.updateLayout(data)}},_updateSymbolDraw:function(data,seriesModel){var symbolDraw=this._symbolDraw;var pipelineContext=seriesModel.pipelineContext;var isLargeDraw=pipelineContext.large;if(!symbolDraw||isLargeDraw!==this._isLargeDraw){symbolDraw&&symbolDraw.remove();symbolDraw=this._symbolDraw=isLargeDraw?new LargeSymbolDraw():new SymbolDraw();this._isLargeDraw=isLargeDraw;
this.group.removeAll()}this.group.add(symbolDraw.group);return symbolDraw},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(true);this._symbolDraw=null},dispose:function(){}});registerVisual(visualSymbol("scatter","circle"));registerLayout(pointsLayout("scatter"));function IndicatorAxis(dim,scale,radiusExtent){Axis.call(this,dim,scale,radiusExtent);this.type="value";this.angle=0;this.name="";this.model}inherits(IndicatorAxis,Axis);function Radar(radarModel,ecModel,api){this._model=radarModel;this.dimensions=[];this._indicatorAxes=map(radarModel.getIndicatorModels(),function(indicatorModel,idx){var dim="indicator_"+idx;var indicatorAxis=new IndicatorAxis(dim,new IntervalScale());indicatorAxis.name=indicatorModel.get("name");indicatorAxis.model=indicatorModel;indicatorModel.axis=indicatorAxis;this.dimensions.push(dim);return indicatorAxis},this);this.resize(radarModel,api);this.cx;this.cy;this.r;this.r0;this.startAngle}Radar.prototype.getIndicatorAxes=function(){return this._indicatorAxes};Radar.prototype.dataToPoint=function(value,indicatorIndex){var indicatorAxis=this._indicatorAxes[indicatorIndex];return this.coordToPoint(indicatorAxis.dataToCoord(value),indicatorIndex)};Radar.prototype.coordToPoint=function(coord,indicatorIndex){var indicatorAxis=this._indicatorAxes[indicatorIndex];var angle=indicatorAxis.angle;var x=this.cx+coord*Math.cos(angle);var y=this.cy-coord*Math.sin(angle);return[x,y]};Radar.prototype.pointToData=function(pt){var dx=pt[0]-this.cx;var dy=pt[1]-this.cy;var radius=Math.sqrt(dx*dx+dy*dy);dx/=radius;dy/=radius;var radian=Math.atan2(-dy,dx);var minRadianDiff=Infinity;var closestAxis;var closestAxisIdx=-1;for(var i=0;i<this._indicatorAxes.length;i++){var indicatorAxis=this._indicatorAxes[i];var diff=Math.abs(radian-indicatorAxis.angle);if(diff<minRadianDiff){closestAxis=indicatorAxis;closestAxisIdx=i;minRadianDiff=diff}}return[closestAxisIdx,+(closestAxis&&closestAxis.coodToData(radius))]};Radar.prototype.resize=function(radarModel,api){var center=radarModel.get("center");
var viewWidth=api.getWidth();var viewHeight=api.getHeight();var viewSize=Math.min(viewWidth,viewHeight)/2;this.cx=parsePercent$1(center[0],viewWidth);this.cy=parsePercent$1(center[1],viewHeight);this.startAngle=radarModel.get("startAngle")*Math.PI/180;var radius=radarModel.get("radius");if(typeof radius==="string"||typeof radius==="number"){radius=[0,radius]}this.r0=parsePercent$1(radius[0],viewSize);this.r=parsePercent$1(radius[1],viewSize);each$1(this._indicatorAxes,function(indicatorAxis,idx){indicatorAxis.setExtent(this.r0,this.r);var angle=(this.startAngle+idx*Math.PI*2/this._indicatorAxes.length);angle=Math.atan2(Math.sin(angle),Math.cos(angle));indicatorAxis.angle=angle},this)};Radar.prototype.update=function(ecModel,api){var indicatorAxes=this._indicatorAxes;var radarModel=this._model;each$1(indicatorAxes,function(indicatorAxis){indicatorAxis.scale.setExtent(Infinity,-Infinity)});ecModel.eachSeriesByType("radar",function(radarSeries,idx){if(radarSeries.get("coordinateSystem")!=="radar"||ecModel.getComponent("radar",radarSeries.get("radarIndex"))!==radarModel){return}var data=radarSeries.getData();each$1(indicatorAxes,function(indicatorAxis){indicatorAxis.scale.unionExtentFromData(data,data.mapDimension(indicatorAxis.dim))})},this);var splitNumber=radarModel.get("splitNumber");function increaseInterval(interval){var exp10=Math.pow(10,Math.floor(Math.log(interval)/Math.LN10));var f=interval/exp10;if(f===2){f=5}else{f*=2}return f*exp10}each$1(indicatorAxes,function(indicatorAxis,idx){var rawExtent=getScaleExtent(indicatorAxis.scale,indicatorAxis.model);niceScaleExtent(indicatorAxis.scale,indicatorAxis.model);var axisModel=indicatorAxis.model;var scale=indicatorAxis.scale;var fixedMin=axisModel.getMin();var fixedMax=axisModel.getMax();var interval=scale.getInterval();if(fixedMin!=null&&fixedMax!=null){scale.setExtent(+fixedMin,+fixedMax);scale.setInterval((fixedMax-fixedMin)/splitNumber)}else{if(fixedMin!=null){var max;do{max=fixedMin+interval*splitNumber;scale.setExtent(+fixedMin,max);
scale.setInterval(interval);interval=increaseInterval(interval)}while(max<rawExtent[1]&&isFinite(max)&&isFinite(rawExtent[1]))}else{if(fixedMax!=null){var min;do{min=fixedMax-interval*splitNumber;scale.setExtent(min,+fixedMax);scale.setInterval(interval);interval=increaseInterval(interval)}while(min>rawExtent[0]&&isFinite(min)&&isFinite(rawExtent[0]))}else{var nicedSplitNumber=scale.getTicks().length-1;if(nicedSplitNumber>splitNumber){interval=increaseInterval(interval)}var center=Math.round((rawExtent[0]+rawExtent[1])/2/interval)*interval;var halfSplitNumber=Math.round(splitNumber/2);scale.setExtent(round$2(center-halfSplitNumber*interval),round$2(center+(splitNumber-halfSplitNumber)*interval));scale.setInterval(interval)}}}})};Radar.dimensions=[];Radar.create=function(ecModel,api){var radarList=[];ecModel.eachComponent("radar",function(radarModel){var radar=new Radar(radarModel,ecModel,api);radarList.push(radar);radarModel.coordinateSystem=radar});ecModel.eachSeriesByType("radar",function(radarSeries){if(radarSeries.get("coordinateSystem")==="radar"){radarSeries.coordinateSystem=radarList[radarSeries.get("radarIndex")||0]}});return radarList};CoordinateSystemManager.register("radar",Radar);var valueAxisDefault=axisDefault.valueAxis;function defaultsShow(opt,show){return defaults({show:show},opt)}var RadarModel=extendComponentModel({type:"radar",optionUpdated:function(){var boundaryGap=this.get("boundaryGap");var splitNumber=this.get("splitNumber");var scale=this.get("scale");var axisLine=this.get("axisLine");var axisTick=this.get("axisTick");var axisLabel=this.get("axisLabel");var nameTextStyle=this.get("name");var showName=this.get("name.show");var nameFormatter=this.get("name.formatter");var nameGap=this.get("nameGap");var triggerEvent=this.get("triggerEvent");var indicatorModels=map(this.get("indicator")||[],function(indicatorOpt){if(indicatorOpt.max!=null&&indicatorOpt.max>0&&!indicatorOpt.min){indicatorOpt.min=0}else{if(indicatorOpt.min!=null&&indicatorOpt.min<0&&!indicatorOpt.max){indicatorOpt.max=0
}}var iNameTextStyle=nameTextStyle;if(indicatorOpt.color!=null){iNameTextStyle=defaults({color:indicatorOpt.color},nameTextStyle)}indicatorOpt=merge(clone(indicatorOpt),{boundaryGap:boundaryGap,splitNumber:splitNumber,scale:scale,axisLine:axisLine,axisTick:axisTick,axisLabel:axisLabel,name:indicatorOpt.text,nameLocation:"end",nameGap:nameGap,nameTextStyle:iNameTextStyle,triggerEvent:triggerEvent},false);if(!showName){indicatorOpt.name=""}if(typeof nameFormatter==="string"){var indName=indicatorOpt.name;indicatorOpt.name=nameFormatter.replace("{value}",indName!=null?indName:"")}else{if(typeof nameFormatter==="function"){indicatorOpt.name=nameFormatter(indicatorOpt.name,indicatorOpt)}}var model=extend(new Model(indicatorOpt,null,this.ecModel),axisModelCommonMixin);model.mainType="radar";model.componentIndex=this.componentIndex;return model},this);this.getIndicatorModels=function(){return indicatorModels}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:true},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:false,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,false),axisTick:defaultsShow(valueAxisDefault.axisTick,false),splitLine:defaultsShow(valueAxisDefault.splitLine,true),splitArea:defaultsShow(valueAxisDefault.splitArea,true),indicator:[]}});var axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"];extendComponentView({type:"radar",render:function(radarModel,ecModel,api){var group=this.group;group.removeAll();this._buildAxes(radarModel);this._buildSplitLineAndArea(radarModel)},_buildAxes:function(radarModel){var radar=radarModel.coordinateSystem;var indicatorAxes=radar.getIndicatorAxes();var axisBuilders=map(indicatorAxes,function(indicatorAxis){var axisBuilder=new AxisBuilder(indicatorAxis.model,{position:[radar.cx,radar.cy],rotation:indicatorAxis.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return axisBuilder});each$1(axisBuilders,function(axisBuilder){each$1(axisBuilderAttrs$1,axisBuilder.add,axisBuilder);
this.group.add(axisBuilder.getGroup())},this)},_buildSplitLineAndArea:function(radarModel){var radar=radarModel.coordinateSystem;var indicatorAxes=radar.getIndicatorAxes();if(!indicatorAxes.length){return}var shape=radarModel.get("shape");var splitLineModel=radarModel.getModel("splitLine");var splitAreaModel=radarModel.getModel("splitArea");var lineStyleModel=splitLineModel.getModel("lineStyle");var areaStyleModel=splitAreaModel.getModel("areaStyle");var showSplitLine=splitLineModel.get("show");var showSplitArea=splitAreaModel.get("show");var splitLineColors=lineStyleModel.get("color");var splitAreaColors=areaStyleModel.get("color");splitLineColors=isArray(splitLineColors)?splitLineColors:[splitLineColors];splitAreaColors=isArray(splitAreaColors)?splitAreaColors:[splitAreaColors];var splitLines=[];var splitAreas=[];function getColorIndex(areaOrLine,areaOrLineColorList,idx){var colorIndex=idx%areaOrLineColorList.length;areaOrLine[colorIndex]=areaOrLine[colorIndex]||[];return colorIndex}if(shape==="circle"){var ticksRadius=indicatorAxes[0].getTicksCoords();var cx=radar.cx;var cy=radar.cy;for(var i=0;i<ticksRadius.length;i++){if(showSplitLine){var colorIndex=getColorIndex(splitLines,splitLineColors,i);splitLines[colorIndex].push(new Circle({shape:{cx:cx,cy:cy,r:ticksRadius[i].coord}}))}if(showSplitArea&&i<ticksRadius.length-1){var colorIndex=getColorIndex(splitAreas,splitAreaColors,i);splitAreas[colorIndex].push(new Ring({shape:{cx:cx,cy:cy,r0:ticksRadius[i].coord,r:ticksRadius[i+1].coord}}))}}}else{var realSplitNumber;var axesTicksPoints=map(indicatorAxes,function(indicatorAxis,idx){var ticksCoords=indicatorAxis.getTicksCoords();realSplitNumber=realSplitNumber==null?ticksCoords.length-1:Math.min(ticksCoords.length-1,realSplitNumber);return map(ticksCoords,function(tickCoord){return radar.coordToPoint(tickCoord.coord,idx)})});var prevPoints=[];for(var i=0;i<=realSplitNumber;i++){var points=[];for(var j=0;j<indicatorAxes.length;j++){points.push(axesTicksPoints[j][i])}if(points[0]){points.push(points[0].slice())
}else{if(__DEV__){console.error("Can't draw value axis "+i)}}if(showSplitLine){var colorIndex=getColorIndex(splitLines,splitLineColors,i);splitLines[colorIndex].push(new Polyline({shape:{points:points}}))}if(showSplitArea&&prevPoints){var colorIndex=getColorIndex(splitAreas,splitAreaColors,i-1);splitAreas[colorIndex].push(new Polygon({shape:{points:points.concat(prevPoints)}}))}prevPoints=points.slice().reverse()}}var lineStyle=lineStyleModel.getLineStyle();var areaStyle=areaStyleModel.getAreaStyle();each$1(splitAreas,function(splitAreas,idx){this.group.add(mergePath(splitAreas,{style:defaults({stroke:"none",fill:splitAreaColors[idx%splitAreaColors.length]},areaStyle),silent:true}))},this);each$1(splitLines,function(splitLines,idx){this.group.add(mergePath(splitLines,{style:defaults({fill:"none",stroke:splitLineColors[idx%splitLineColors.length]},lineStyle),silent:true}))},this)}});var RadarSeries=SeriesModel.extend({type:"series.radar",dependencies:["radar"],init:function(option){RadarSeries.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(option,ecModel){return createListSimply(this,{generateCoord:"indicator_",generateCoordCount:Infinity})},formatTooltip:function(dataIndex){var data=this.getData();var coordSys=this.coordinateSystem;var indicatorAxes=coordSys.getIndicatorAxes();var name=this.getData().getName(dataIndex);return encodeHTML(name===""?this.name:name)+"<br/>"+map(indicatorAxes,function(axis,idx){var val=data.get(data.mapDimension(axis.dim),dataIndex);return encodeHTML(axis.name+" : "+val)}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:true,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function normalizeSymbolSize(symbolSize){if(!isArray(symbolSize)){symbolSize=[+symbolSize,+symbolSize]}return symbolSize}extendChartView({type:"radar",render:function(seriesModel,ecModel,api){var polar=seriesModel.coordinateSystem;
var group=this.group;var data=seriesModel.getData();var oldData=this._data;function createSymbol$$1(data,idx){var symbolType=data.getItemVisual(idx,"symbol")||"circle";var color=data.getItemVisual(idx,"color");if(symbolType==="none"){return}var symbolSize=normalizeSymbolSize(data.getItemVisual(idx,"symbolSize"));var symbolPath=createSymbol(symbolType,-1,-1,2,2,color);symbolPath.attr({style:{strokeNoScale:true},z2:100,scale:[symbolSize[0]/2,symbolSize[1]/2]});return symbolPath}function updateSymbols(oldPoints,newPoints,symbolGroup,data,idx,isInit){symbolGroup.removeAll();for(var i=0;i<newPoints.length-1;i++){var symbolPath=createSymbol$$1(data,idx);if(symbolPath){symbolPath.__dimIdx=i;if(oldPoints[i]){symbolPath.attr("position",oldPoints[i]);graphic[isInit?"initProps":"updateProps"](symbolPath,{position:newPoints[i]},seriesModel,idx)}else{symbolPath.attr("position",newPoints[i])}symbolGroup.add(symbolPath)}}}function getInitialPoints(points){return map(points,function(pt){return[polar.cx,polar.cy]})}data.diff(oldData).add(function(idx){var points=data.getItemLayout(idx);if(!points){return}var polygon=new Polygon();var polyline=new Polyline();var target={shape:{points:points}};polygon.shape.points=getInitialPoints(points);polyline.shape.points=getInitialPoints(points);initProps(polygon,target,seriesModel,idx);initProps(polyline,target,seriesModel,idx);var itemGroup=new Group();var symbolGroup=new Group();itemGroup.add(polyline);itemGroup.add(polygon);itemGroup.add(symbolGroup);updateSymbols(polyline.shape.points,points,symbolGroup,data,idx,true);data.setItemGraphicEl(idx,itemGroup)}).update(function(newIdx,oldIdx){var itemGroup=oldData.getItemGraphicEl(oldIdx);var polyline=itemGroup.childAt(0);var polygon=itemGroup.childAt(1);var symbolGroup=itemGroup.childAt(2);var target={shape:{points:data.getItemLayout(newIdx)}};if(!target.shape.points){return}updateSymbols(polyline.shape.points,target.shape.points,symbolGroup,data,newIdx,false);updateProps(polyline,target,seriesModel);
updateProps(polygon,target,seriesModel);data.setItemGraphicEl(newIdx,itemGroup)}).remove(function(idx){group.remove(oldData.getItemGraphicEl(idx))}).execute();data.eachItemGraphicEl(function(itemGroup,idx){var itemModel=data.getItemModel(idx);var polyline=itemGroup.childAt(0);var polygon=itemGroup.childAt(1);var symbolGroup=itemGroup.childAt(2);var color=data.getItemVisual(idx,"color");group.add(itemGroup);polyline.useStyle(defaults(itemModel.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:color}));polyline.hoverStyle=itemModel.getModel("emphasis.lineStyle").getLineStyle();var areaStyleModel=itemModel.getModel("areaStyle");var hoverAreaStyleModel=itemModel.getModel("emphasis.areaStyle");var polygonIgnore=areaStyleModel.isEmpty()&&areaStyleModel.parentModel.isEmpty();var hoverPolygonIgnore=hoverAreaStyleModel.isEmpty()&&hoverAreaStyleModel.parentModel.isEmpty();hoverPolygonIgnore=hoverPolygonIgnore&&polygonIgnore;polygon.ignore=polygonIgnore;polygon.useStyle(defaults(areaStyleModel.getAreaStyle(),{fill:color,opacity:0.7}));polygon.hoverStyle=hoverAreaStyleModel.getAreaStyle();var itemStyle=itemModel.getModel("itemStyle").getItemStyle(["color"]);var itemHoverStyle=itemModel.getModel("emphasis.itemStyle").getItemStyle();var labelModel=itemModel.getModel("label");var labelHoverModel=itemModel.getModel("emphasis.label");symbolGroup.eachChild(function(symbolPath){symbolPath.setStyle(itemStyle);symbolPath.hoverStyle=clone(itemHoverStyle);setLabelStyle(symbolPath.style,symbolPath.hoverStyle,labelModel,labelHoverModel,{labelFetcher:data.hostModel,labelDataIndex:idx,labelDimIndex:symbolPath.__dimIdx,defaultText:data.get(data.dimensions[symbolPath.__dimIdx],idx),autoColor:color,isRectText:true})});function onEmphasis(){polygon.attr("ignore",hoverPolygonIgnore)}function onNormal(){polygon.attr("ignore",polygonIgnore)}itemGroup.off("mouseover").off("mouseout").off("normal").off("emphasis");itemGroup.on("emphasis",onEmphasis).on("mouseover",onEmphasis).on("normal",onNormal).on("mouseout",onNormal);
setHoverStyle(itemGroup)});this._data=data},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});var radarLayout=function(ecModel){ecModel.eachSeriesByType("radar",function(seriesModel){var data=seriesModel.getData();var points=[];var coordSys=seriesModel.coordinateSystem;if(!coordSys){return}function pointsConverter(val,idx){points[idx]=points[idx]||[];points[idx][i]=coordSys.dataToPoint(val,i)}var axes=coordSys.getIndicatorAxes();for(var i=0;i<axes.length;i++){data.each(data.mapDimension(axes[i].dim),pointsConverter)}data.each(function(idx){points[idx][0]&&points[idx].push(points[idx][0].slice());data.setItemLayout(idx,points[idx])})})};var backwardCompat$1=function(option){var polarOptArr=option.polar;if(polarOptArr){if(!isArray(polarOptArr)){polarOptArr=[polarOptArr]}var polarNotRadar=[];each$1(polarOptArr,function(polarOpt,idx){if(polarOpt.indicator){if(polarOpt.type&&!polarOpt.shape){polarOpt.shape=polarOpt.type}option.radar=option.radar||[];if(!isArray(option.radar)){option.radar=[option.radar]}option.radar.push(polarOpt)}else{polarNotRadar.push(polarOpt)}});option.polar=polarNotRadar}each$1(option.series,function(seriesOpt){if(seriesOpt&&seriesOpt.type==="radar"&&seriesOpt.polarIndex){seriesOpt.radarIndex=seriesOpt.polarIndex}})};registerVisual(dataColor("radar"));registerVisual(visualSymbol("radar","circle"));registerLayout(radarLayout);registerProcessor(dataFilter("radar"));registerPreprocessor(backwardCompat$1);var geoCoord=[126,25];var points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,0.7],[52,0.7],[56,7.7],[59,0.7],[64,0.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];
for(var i$1=0;i$1<points$1.length;i$1++){for(var k=0;k<points$1[i$1].length;k++){points$1[i$1][k][0]/=10.5;points$1[i$1][k][1]/=-10.5/0.75;points$1[i$1][k][0]+=geoCoord[0];points$1[i$1][k][1]+=geoCoord[1]}}var fixNanhai=function(mapType,regions){if(mapType==="china"){regions.push(new Region("",map(points$1,function(exterior){return{type:"polygon",exterior:exterior}}),geoCoord))}};var coordsOffsetMap={"":[32,80],"":[0,-10],"":[10,5],"":[-10,10],"":[5,5]};var fixTextCoord=function(mapType,region){if(mapType==="china"){var coordFix=coordsOffsetMap[region.name];if(coordFix){var cp=region.center;cp[0]+=coordFix[0]/10.5;cp[1]+=-coordFix[1]/(10.5/0.75)}}};var geoCoordMap={"Russia":[100,60],"United States":[-99,38],"United States of America":[-99,38]};var fixGeoCoord=function(mapType,region){if(mapType==="world"){var geoCoord=geoCoordMap[region.name];if(geoCoord){var cp=region.center;cp[0]=geoCoord[0];cp[1]=geoCoord[1]}}};var points$2=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var fixDiaoyuIsland=function(mapType,region){if(mapType==="china"&&region.name===""){region.geometries.push({type:"polygon",exterior:points$2[0]})}};var inner$7=makeInner();var geoJSONLoader={load:function(mapName,mapRecord){var parsed=inner$7(mapRecord).parsed;if(parsed){return parsed}var specialAreas=mapRecord.specialAreas||{};var geoJSON=mapRecord.geoJSON;var regions;try{regions=geoJSON?parseGeoJson$1(geoJSON):[]}catch(e){throw new Error("Invalid geoJson format\n"+e.message)}each$1(regions,function(region){var regionName=region.name;fixTextCoord(mapName,region);fixGeoCoord(mapName,region);fixDiaoyuIsland(mapName,region);var specialArea=specialAreas[regionName];if(specialArea){region.transformTo(specialArea.left,specialArea.top,specialArea.width,specialArea.height)}});fixNanhai(mapName,regions);return(inner$7(mapRecord).parsed={regions:regions,boundingRect:getBoundingRect$1(regions)})
}};function getBoundingRect$1(regions){var rect;for(var i=0;i<regions.length;i++){var regionRect=regions[i].getBoundingRect();rect=rect||regionRect.clone();rect.union(regionRect)}return rect}var inner$8=makeInner();var geoSVGLoader={load:function(mapName,mapRecord){var originRoot=inner$8(mapRecord).originRoot;if(originRoot){return{root:originRoot,boundingRect:inner$8(mapRecord).boundingRect}}var graphic=buildGraphic(mapRecord);inner$8(mapRecord).originRoot=graphic.root;inner$8(mapRecord).boundingRect=graphic.boundingRect;return graphic},makeGraphic:function(mapName,mapRecord,hostKey){var field=inner$8(mapRecord);var rootMap=field.rootMap||(field.rootMap=createHashMap());var root=rootMap.get(hostKey);if(root){return root}var originRoot=field.originRoot;var boundingRect=field.boundingRect;if(!field.originRootHostKey){field.originRootHostKey=hostKey;root=originRoot}else{root=buildGraphic(mapRecord,boundingRect).root}return rootMap.set(hostKey,root)},removeGraphic:function(mapName,mapRecord,hostKey){var field=inner$8(mapRecord);var rootMap=field.rootMap;rootMap&&rootMap.removeKey(hostKey);if(hostKey===field.originRootHostKey){field.originRootHostKey=null}}};function buildGraphic(mapRecord,boundingRect){var svgXML=mapRecord.svgXML;var result;var root;try{result=svgXML&&parseSVG(svgXML,{ignoreViewBox:true,ignoreRootClip:true})||{};root=result.root;assert$1(root!=null)}catch(e){throw new Error("Invalid svg format\n"+e.message)}var svgWidth=result.width;var svgHeight=result.height;var viewBoxRect=result.viewBoxRect;if(!boundingRect){boundingRect=(svgWidth==null||svgHeight==null)?root.getBoundingRect():new BoundingRect(0,0,0,0);if(svgWidth!=null){boundingRect.width=svgWidth}if(svgHeight!=null){boundingRect.height=svgHeight}}if(viewBoxRect){var viewBoxTransform=makeViewBoxTransform(viewBoxRect,boundingRect.width,boundingRect.height);var elRoot=root;root=new Group();root.add(elRoot);elRoot.scale=viewBoxTransform.scale;elRoot.position=viewBoxTransform.position}root.setClipPath(new Rect({shape:boundingRect.plain()}));
return{root:root,boundingRect:boundingRect}}var loaders={geoJSON:geoJSONLoader,svg:geoSVGLoader};var geoSourceManager={load:function(mapName,nameMap){var regions=[];var regionsMap=createHashMap();var nameCoordMap=createHashMap();var boundingRect;var mapRecords=retrieveMap(mapName);each$1(mapRecords,function(record){var singleSource=loaders[record.type].load(mapName,record);each$1(singleSource.regions,function(region){var regionName=region.name;if(nameMap&&nameMap.hasOwnProperty(regionName)){region=region.cloneShallow(regionName=nameMap[regionName])}regions.push(region);regionsMap.set(regionName,region);nameCoordMap.set(regionName,region.center)});var rect=singleSource.boundingRect;if(rect){boundingRect?boundingRect.union(rect):(boundingRect=rect.clone())}});return{regions:regions,regionsMap:regionsMap,nameCoordMap:nameCoordMap,boundingRect:boundingRect||new BoundingRect(0,0,0,0)}},makeGraphic:makeInvoker("makeGraphic"),removeGraphic:makeInvoker("removeGraphic")};function makeInvoker(methodName){return function(mapName,hostKey){var mapRecords=retrieveMap(mapName);var results=[];each$1(mapRecords,function(record){var method=loaders[record.type][methodName];method&&results.push(method(mapName,record,hostKey))});return results}}function mapNotExistsError(mapName){if(__DEV__){console.error("Map "+mapName+" not exists. You can download map file on http://echarts.baidu.com/download-map.html")}}function retrieveMap(mapName){var mapRecords=mapDataStorage.retrieveMap(mapName)||[];if(__DEV__){if(!mapRecords.length){mapNotExistsError(mapName)}}return mapRecords}var MapSeries=SeriesModel.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:false,seriesGroup:[],getInitialData:function(option){var data=createListSimply(this,["value"]);var valueDim=data.mapDimension("value");var dataNameMap=createHashMap();var selectTargetList=[];var toAppendNames=[];for(var i=0,len=data.count();i<len;i++){var name=data.getName(i);dataNameMap.set(name,true);selectTargetList.push({name:name,value:data.get(valueDim,i),selected:retrieveRawAttr(data,i,"selected")})
}var geoSource=geoSourceManager.load(this.getMapType(),this.option.nameMap);each$1(geoSource.regions,function(region){var name=region.name;if(!dataNameMap.get(name)){selectTargetList.push({name:name});toAppendNames.push(name)}});this.updateSelectedMap(selectTargetList);data.appendValues([],toAppendNames);return data},getHostGeoModel:function(){var geoIndex=this.option.geoIndex;return geoIndex!=null?this.dependentModels.geo[geoIndex]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(dataIndex){var data=this.getData();return data.get(data.mapDimension("value"),dataIndex)},getRegionModel:function(regionName){var data=this.getData();return data.getItemModel(data.indexOfName(regionName))},formatTooltip:function(dataIndex){var data=this.getData();var formattedValue=addCommas(this.getRawValue(dataIndex));var name=data.getName(dataIndex);var seriesGroup=this.seriesGroup;var seriesNames=[];for(var i=0;i<seriesGroup.length;i++){var otherIndex=seriesGroup[i].originalData.indexOfName(name);var valueDim=data.mapDimension("value");if(!isNaN(seriesGroup[i].originalData.get(valueDim,otherIndex))){seriesNames.push(encodeHTML(seriesGroup[i].name))}}return seriesNames.join(", ")+"<br />"+encodeHTML(name+" : "+formattedValue)},getTooltipPosition:function(dataIndex){if(dataIndex!=null){var name=this.getData().getName(dataIndex);var geo=this.coordinateSystem;var region=geo.getRegion(name);return region&&geo.dataToPoint(region.center)}},setZoom:function(zoom){this.option.zoom=zoom},setCenter:function(center){this.option.center=center},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:0.75,showLegendSymbol:true,dataRangeHoverLink:true,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:false,color:"#000"},itemStyle:{borderWidth:0.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:true,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}}}});mixin(MapSeries,selectableMixin);
var ATTR="\0_ec_interaction_mutex";function take(zr,resourceKey,userKey){var store=getStore(zr);store[resourceKey]=userKey}function release(zr,resourceKey,userKey){var store=getStore(zr);var uKey=store[resourceKey];if(uKey===userKey){store[resourceKey]=null}}function isTaken(zr,resourceKey){return !!getStore(zr)[resourceKey]}function getStore(zr){return zr[ATTR]||(zr[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){});function RoamController(zr){this.pointerChecker;this._zr=zr;this._opt={};var bind$$1=bind;var mousedownHandler=bind$$1(mousedown,this);var mousemoveHandler=bind$$1(mousemove,this);var mouseupHandler=bind$$1(mouseup,this);var mousewheelHandler=bind$$1(mousewheel,this);var pinchHandler=bind$$1(pinch,this);Eventful.call(this);this.setPointerChecker=function(pointerChecker){this.pointerChecker=pointerChecker};this.enable=function(controlType,opt){this.disable();this._opt=defaults(clone(opt)||{},{zoomOnMouseWheel:true,moveOnMouseMove:true,moveOnMouseWheel:false,preventDefaultMouseMove:true});if(controlType==null){controlType=true}if(controlType===true||(controlType==="move"||controlType==="pan")){zr.on("mousedown",mousedownHandler);zr.on("mousemove",mousemoveHandler);zr.on("mouseup",mouseupHandler)}if(controlType===true||(controlType==="scale"||controlType==="zoom")){zr.on("mousewheel",mousewheelHandler);zr.on("pinch",pinchHandler)}};this.disable=function(){zr.off("mousedown",mousedownHandler);zr.off("mousemove",mousemoveHandler);zr.off("mouseup",mouseupHandler);zr.off("mousewheel",mousewheelHandler);zr.off("pinch",pinchHandler)};this.dispose=this.disable;this.isDragging=function(){return this._dragging};this.isPinching=function(){return this._pinching}}mixin(RoamController,Eventful);function mousedown(e){if(isMiddleOrRightButtonOnMouseUpDown(e)||(e.target&&e.target.draggable)){return}var x=e.offsetX;var y=e.offsetY;if(this.pointerChecker&&this.pointerChecker(e,x,y)){this._x=x;this._y=y;this._dragging=true
}}function mousemove(e){if(!this._dragging||!isAvailableBehavior("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||isTaken(this._zr,"globalPan")){return}var x=e.offsetX;var y=e.offsetY;var oldX=this._x;var oldY=this._y;var dx=x-oldX;var dy=y-oldY;this._x=x;this._y=y;this._opt.preventDefaultMouseMove&&stop(e.event);trigger(this,"pan","moveOnMouseMove",e,{dx:dx,dy:dy,oldX:oldX,oldY:oldY,newX:x,newY:y})}function mouseup(e){if(!isMiddleOrRightButtonOnMouseUpDown(e)){this._dragging=false}}function mousewheel(e){var shouldZoom=isAvailableBehavior("zoomOnMouseWheel",e,this._opt);var shouldMove=isAvailableBehavior("moveOnMouseWheel",e,this._opt);var wheelDelta=e.wheelDelta;var absWheelDeltaDelta=Math.abs(wheelDelta);var originX=e.offsetX;var originY=e.offsetY;if(wheelDelta===0||(!shouldZoom&&!shouldMove)){return}if(shouldZoom){var factor=absWheelDeltaDelta>3?1.4:absWheelDeltaDelta>1?1.2:1.1;var scale=wheelDelta>0?factor:1/factor;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",e,{scale:scale,originX:originX,originY:originY})}if(shouldMove){var absDelta=Math.abs(wheelDelta);var scrollDelta=(wheelDelta>0?1:-1)*(absDelta>3?0.4:absDelta>1?0.15:0.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:scrollDelta,originX:originX,originY:originY})}}function pinch(e){if(isTaken(this._zr,"globalPan")){return}var scale=e.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,e,{scale:scale,originX:e.pinchX,originY:e.pinchY})}function checkPointerAndTrigger(controller,eventName,behaviorToCheck,e,contollerEvent){if(controller.pointerChecker&&controller.pointerChecker(e,contollerEvent.originX,contollerEvent.originY)){stop(e.event);trigger(controller,eventName,behaviorToCheck,e,contollerEvent)}}function trigger(controller,eventName,behaviorToCheck,e,contollerEvent){contollerEvent.isAvailableBehavior=bind(isAvailableBehavior,null,behaviorToCheck,e);controller.trigger(eventName,contollerEvent)}function isAvailableBehavior(behaviorToCheck,e,settings){var setting=settings[behaviorToCheck];
return !behaviorToCheck||(setting&&(!isString(setting)||e.event[setting+"Key"]))}function updateViewOnPan(controllerHost,dx,dy){var target=controllerHost.target;var pos=target.position;pos[0]+=dx;pos[1]+=dy;target.dirty()}function updateViewOnZoom(controllerHost,zoomDelta,zoomX,zoomY){var target=controllerHost.target;var zoomLimit=controllerHost.zoomLimit;var pos=target.position;var scale=target.scale;var newZoom=controllerHost.zoom=controllerHost.zoom||1;newZoom*=zoomDelta;if(zoomLimit){var zoomMin=zoomLimit.min||0;var zoomMax=zoomLimit.max||Infinity;newZoom=Math.max(Math.min(zoomMax,newZoom),zoomMin)}var zoomScale=newZoom/controllerHost.zoom;controllerHost.zoom=newZoom;pos[0]-=(zoomX-pos[0])*(zoomScale-1);pos[1]-=(zoomY-pos[1])*(zoomScale-1);scale[0]*=zoomScale;scale[1]*=zoomScale;target.dirty()}var IRRELEVANT_EXCLUDES={"axisPointer":1,"tooltip":1,"brush":1};function onIrrelevantElement(e,api,targetCoordSysModel){var model=api.getComponentByElement(e.topTarget);var coordSys=model&&model.coordinateSystem;return model&&model!==targetCoordSysModel&&!IRRELEVANT_EXCLUDES[model.mainType]&&(coordSys&&coordSys.model!==targetCoordSysModel)}function getFixedItemStyle(model,scale){var itemStyle=model.getItemStyle();var areaColor=model.get("areaColor");if(areaColor!=null){itemStyle.fill=areaColor}return itemStyle}function updateMapSelectHandler(mapDraw,mapOrGeoModel,regionsGroup,api,fromView){regionsGroup.off("click");regionsGroup.off("mousedown");if(mapOrGeoModel.get("selectedMode")){regionsGroup.on("mousedown",function(){mapDraw._mouseDownFlag=true});regionsGroup.on("click",function(e){if(!mapDraw._mouseDownFlag){return}mapDraw._mouseDownFlag=false;var el=e.target;while(!el.__regions){el=el.parent}if(!el){return}var action={type:(mapOrGeoModel.mainType==="geo"?"geo":"map")+"ToggleSelect",batch:map(el.__regions,function(region){return{name:region.name,from:fromView.uid}})};action[mapOrGeoModel.mainType+"Id"]=mapOrGeoModel.id;api.dispatchAction(action);updateMapSelected(mapOrGeoModel,regionsGroup)
})}}function updateMapSelected(mapOrGeoModel,regionsGroup){regionsGroup.eachChild(function(otherRegionEl){each$1(otherRegionEl.__regions,function(region){otherRegionEl.trigger(mapOrGeoModel.isSelected(region.name)?"emphasis":"normal")})})}function MapDraw(api,updateGroup){var group=new Group();this.uid=getUID("ec_map_draw");this._controller=new RoamController(api.getZr());this._controllerHost={target:updateGroup?group:null};this.group=group;this._updateGroup=updateGroup;this._mouseDownFlag;this._mapName;this._initialized;group.add(this._regionsGroup=new Group());group.add(this._backgroundGroup=new Group())}MapDraw.prototype={constructor:MapDraw,draw:function(mapOrGeoModel,ecModel,api,fromView,payload){var isGeo=mapOrGeoModel.mainType==="geo";var data=mapOrGeoModel.getData&&mapOrGeoModel.getData();isGeo&&ecModel.eachComponent({mainType:"series",subType:"map"},function(mapSeries){if(!data&&mapSeries.getHostGeoModel()===mapOrGeoModel){data=mapSeries.getData()}});var geo=mapOrGeoModel.coordinateSystem;this._updateBackground(geo);var regionsGroup=this._regionsGroup;var group=this.group;var scale=geo.scale;var transform={position:geo.position,scale:scale};if(!regionsGroup.childAt(0)||payload){group.attr(transform)}else{updateProps(group,transform,mapOrGeoModel)}regionsGroup.removeAll();var itemStyleAccessPath=["itemStyle"];var hoverItemStyleAccessPath=["emphasis","itemStyle"];var labelAccessPath=["label"];var hoverLabelAccessPath=["emphasis","label"];var nameMap=createHashMap();each$1(geo.regions,function(region){var regionGroup=nameMap.get(region.name)||nameMap.set(region.name,new Group());var compoundPath=new CompoundPath({shape:{paths:[]}});regionGroup.add(compoundPath);var regionModel=mapOrGeoModel.getRegionModel(region.name)||mapOrGeoModel;var itemStyleModel=regionModel.getModel(itemStyleAccessPath);var hoverItemStyleModel=regionModel.getModel(hoverItemStyleAccessPath);var itemStyle=getFixedItemStyle(itemStyleModel,scale);var hoverItemStyle=getFixedItemStyle(hoverItemStyleModel,scale);
var labelModel=regionModel.getModel(labelAccessPath);var hoverLabelModel=regionModel.getModel(hoverLabelAccessPath);var dataIdx;if(data){dataIdx=data.indexOfName(region.name);var visualColor=data.getItemVisual(dataIdx,"color",true);if(visualColor){itemStyle.fill=visualColor}}each$1(region.geometries,function(geometry){if(geometry.type!=="polygon"){return}compoundPath.shape.paths.push(new Polygon({shape:{points:geometry.exterior}}));for(var i=0;i<(geometry.interiors?geometry.interiors.length:0);i++){compoundPath.shape.paths.push(new Polygon({shape:{points:geometry.interiors[i]}}))}});compoundPath.setStyle(itemStyle);compoundPath.style.strokeNoScale=true;compoundPath.culling=true;var showLabel=labelModel.get("show");var hoverShowLabel=hoverLabelModel.get("show");var isDataNaN=data&&isNaN(data.get(data.mapDimension("value"),dataIdx));var itemLayout=data&&data.getItemLayout(dataIdx);if((isGeo||isDataNaN&&(showLabel||hoverShowLabel))||(itemLayout&&itemLayout.showLabel)){var query=!isGeo?dataIdx:region.name;var labelFetcher;if(!data||dataIdx>=0){labelFetcher=mapOrGeoModel}var textEl=new Text({position:region.center.slice(),scale:[1/scale[0],1/scale[1]],z2:10,silent:true});setLabelStyle(textEl.style,textEl.hoverStyle={},labelModel,hoverLabelModel,{labelFetcher:labelFetcher,labelDataIndex:query,defaultText:region.name,useInsideStyle:false},{textAlign:"center",textVerticalAlign:"middle"});regionGroup.add(textEl)}if(data){data.setItemGraphicEl(dataIdx,regionGroup)}else{var regionModel=mapOrGeoModel.getRegionModel(region.name);compoundPath.eventData={componentType:"geo",componentIndex:mapOrGeoModel.componentIndex,geoIndex:mapOrGeoModel.componentIndex,name:region.name,region:(regionModel&&regionModel.option)||{}}}var groupRegions=regionGroup.__regions||(regionGroup.__regions=[]);groupRegions.push(region);setHoverStyle(regionGroup,hoverItemStyle,{hoverSilentOnTouch:!!mapOrGeoModel.get("selectedMode")});regionsGroup.add(regionGroup)});this._updateController(mapOrGeoModel,ecModel,api);
updateMapSelectHandler(this,mapOrGeoModel,regionsGroup,api,fromView);updateMapSelected(mapOrGeoModel,regionsGroup)},remove:function(){this._regionsGroup.removeAll();this._backgroundGroup.removeAll();this._controller.dispose();this._mapName&&geoSourceManager.removeGraphic(this._mapName,this.uid);this._mapName=null;this._controllerHost={}},_updateBackground:function(geo){var mapName=geo.map;if(this._mapName!==mapName){each$1(geoSourceManager.makeGraphic(mapName,this.uid),function(root){this._backgroundGroup.add(root)},this)}this._mapName=mapName},_updateController:function(mapOrGeoModel,ecModel,api){var geo=mapOrGeoModel.coordinateSystem;var controller=this._controller;var controllerHost=this._controllerHost;controllerHost.zoomLimit=mapOrGeoModel.get("scaleLimit");controllerHost.zoom=geo.getZoom();controller.enable(mapOrGeoModel.get("roam")||false);var mainType=mapOrGeoModel.mainType;function makeActionBase(){var action={type:"geoRoam",componentType:mainType};action[mainType+"Id"]=mapOrGeoModel.id;return action}controller.off("pan").on("pan",function(e){this._mouseDownFlag=false;updateViewOnPan(controllerHost,e.dx,e.dy);api.dispatchAction(extend(makeActionBase(),{dx:e.dx,dy:e.dy}))},this);controller.off("zoom").on("zoom",function(e){this._mouseDownFlag=false;updateViewOnZoom(controllerHost,e.scale,e.originX,e.originY);api.dispatchAction(extend(makeActionBase(),{zoom:e.scale,originX:e.originX,originY:e.originY}));if(this._updateGroup){var scale=this.group.scale;this._regionsGroup.traverse(function(el){if(el.type==="text"){el.attr("scale",[1/scale[0],1/scale[1]])}})}},this);controller.setPointerChecker(function(e,x,y){return geo.getViewRectAfterRoam().contain(x,y)&&!onIrrelevantElement(e,api,mapOrGeoModel)})}};var HIGH_DOWN_PROP="__seriesMapHighDown";var RECORD_VERSION_PROP="__seriesMapCallKey";extendChartView({type:"map",render:function(mapModel,ecModel,api,payload){if(payload&&payload.type==="mapToggleSelect"&&payload.from===this.uid){return}var group=this.group;group.removeAll();
if(mapModel.getHostGeoModel()){return}if(!(payload&&payload.type==="geoRoam"&&payload.componentType==="series"&&payload.seriesId===mapModel.id)){if(mapModel.needsDrawMap){var mapDraw=this._mapDraw||new MapDraw(api,true);group.add(mapDraw.group);mapDraw.draw(mapModel,ecModel,api,this,payload);this._mapDraw=mapDraw}else{this._mapDraw&&this._mapDraw.remove();this._mapDraw=null}}else{var mapDraw=this._mapDraw;mapDraw&&group.add(mapDraw.group)}mapModel.get("showLegendSymbol")&&ecModel.getComponent("legend")&&this._renderSymbols(mapModel,ecModel,api)},remove:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null;this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null},_renderSymbols:function(mapModel,ecModel,api){var originalData=mapModel.originalData;var group=this.group;originalData.each(originalData.mapDimension("value"),function(value,originalDataIndex){if(isNaN(value)){return}var layout=originalData.getItemLayout(originalDataIndex);if(!layout||!layout.point){return}var point=layout.point;var offset=layout.offset;var circle=new Circle({style:{fill:mapModel.getData().getVisual("color")},shape:{cx:point[0]+offset*9,cy:point[1],r:3},silent:true,z2:8+(!offset?Z2_EMPHASIS_LIFT+1:0)});if(!offset){var fullData=mapModel.mainSeries.getData();var name=originalData.getName(originalDataIndex);var fullIndex=fullData.indexOfName(name);var itemModel=originalData.getItemModel(originalDataIndex);var labelModel=itemModel.getModel("label");var hoverLabelModel=itemModel.getModel("emphasis.label");var regionGroup=fullData.getItemGraphicEl(fullIndex);var normalText=retrieve2(mapModel.getFormattedLabel(fullIndex,"normal"),name);var emphasisText=retrieve2(mapModel.getFormattedLabel(fullIndex,"emphasis"),normalText);var highDownRecord=regionGroup[HIGH_DOWN_PROP];var recordVersion=Math.random();if(!highDownRecord){highDownRecord=regionGroup[HIGH_DOWN_PROP]={};var onEmphasis=curry(onRegionHighDown,true);var onNormal=curry(onRegionHighDown,false);
regionGroup.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal)}regionGroup[RECORD_VERSION_PROP]=recordVersion;extend(highDownRecord,{recordVersion:recordVersion,circle:circle,labelModel:labelModel,hoverLabelModel:hoverLabelModel,emphasisText:emphasisText,normalText:normalText});enterRegionHighDown(highDownRecord,false)}group.add(circle)})}});function onRegionHighDown(toHighOrDown){var highDownRecord=this[HIGH_DOWN_PROP];if(highDownRecord&&highDownRecord.recordVersion===this[RECORD_VERSION_PROP]){enterRegionHighDown(highDownRecord,toHighOrDown)}}function enterRegionHighDown(highDownRecord,toHighOrDown){var circle=highDownRecord.circle;var labelModel=highDownRecord.labelModel;var hoverLabelModel=highDownRecord.hoverLabelModel;var emphasisText=highDownRecord.emphasisText;var normalText=highDownRecord.normalText;if(toHighOrDown){circle.style.extendFrom(setTextStyle({},hoverLabelModel,{text:hoverLabelModel.get("show")?emphasisText:null},{isRectText:true,useInsideStyle:false},true));circle.__mapOriginalZ2=circle.z2;circle.z2+=Z2_EMPHASIS_LIFT}else{setTextStyle(circle.style,labelModel,{text:labelModel.get("show")?normalText:null,textPosition:labelModel.getShallow("position")||"bottom"},{isRectText:true,useInsideStyle:false});circle.dirty(false);if(circle.__mapOriginalZ2!=null){circle.z2=circle.__mapOriginalZ2;circle.__mapOriginalZ2=null}}}function updateCenterAndZoom(view,payload,zoomLimit){var previousZoom=view.getZoom();var center=view.getCenter();var zoom=payload.zoom;var point=view.dataToPoint(center);if(payload.dx!=null&&payload.dy!=null){point[0]-=payload.dx;point[1]-=payload.dy;var center=view.pointToData(point);view.setCenter(center)}if(zoom!=null){if(zoomLimit){var zoomMin=zoomLimit.min||0;var zoomMax=zoomLimit.max||Infinity;zoom=Math.max(Math.min(previousZoom*zoom,zoomMax),zoomMin)/previousZoom}view.scale[0]*=zoom;view.scale[1]*=zoom;var position=view.position;var fixX=(payload.originX-position[0])*(zoom-1);var fixY=(payload.originY-position[1])*(zoom-1);
position[0]-=fixX;position[1]-=fixY;view.updateTransform();var center=view.pointToData(point);view.setCenter(center);view.setZoom(zoom*previousZoom)}return{center:view.getCenter(),zoom:view.getZoom()}}registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(payload,ecModel){var componentType=payload.componentType||"series";ecModel.eachComponent({mainType:componentType,query:payload},function(componentModel){var geo=componentModel.coordinateSystem;if(geo.type!=="geo"){return}var res=updateCenterAndZoom(geo,payload,componentModel.get("scaleLimit"));componentModel.setCenter&&componentModel.setCenter(res.center);componentModel.setZoom&&componentModel.setZoom(res.zoom);if(componentType==="series"){each$1(componentModel.seriesGroup,function(seriesModel){seriesModel.setCenter(res.center);seriesModel.setZoom(res.zoom)})}})});var v2ApplyTransform$1=applyTransform;function TransformDummy(){Transformable.call(this)}mixin(TransformDummy,Transformable);function View(name){this.name=name;this.zoomLimit;Transformable.call(this);this._roamTransformable=new TransformDummy();this._rawTransformable=new TransformDummy();this._center;this._zoom}View.prototype={constructor:View,type:"view",dimensions:["x","y"],setBoundingRect:function(x,y,width,height){this._rect=new BoundingRect(x,y,width,height);return this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(x,y,width,height){this.transformTo(x,y,width,height);this._viewRect=new BoundingRect(x,y,width,height)},transformTo:function(x,y,width,height){var rect=this.getBoundingRect();var rawTransform=this._rawTransformable;rawTransform.transform=rect.calculateTransform(new BoundingRect(x,y,width,height));rawTransform.decomposeTransform();this._updateTransform()},setCenter:function(centerCoord){if(!centerCoord){return}this._center=centerCoord;this._updateCenterAndZoom()},setZoom:function(zoom){zoom=zoom||1;var zoomLimit=this.zoomLimit;if(zoomLimit){if(zoomLimit.max!=null){zoom=Math.min(zoomLimit.max,zoom)
}if(zoomLimit.min!=null){zoom=Math.max(zoomLimit.min,zoom)}}this._zoom=zoom;this._updateCenterAndZoom()},getDefaultCenter:function(){var rawRect=this.getBoundingRect();var cx=rawRect.x+rawRect.width/2;var cy=rawRect.y+rawRect.height/2;return[cx,cy]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var rawTransformMatrix=this._rawTransformable.getLocalTransform();var roamTransform=this._roamTransformable;var defaultCenter=this.getDefaultCenter();var center=this.getCenter();var zoom=this.getZoom();center=applyTransform([],center,rawTransformMatrix);defaultCenter=applyTransform([],defaultCenter,rawTransformMatrix);roamTransform.origin=center;roamTransform.position=[defaultCenter[0]-center[0],defaultCenter[1]-center[1]];roamTransform.scale=[zoom,zoom];this._updateTransform()},_updateTransform:function(){var roamTransformable=this._roamTransformable;var rawTransformable=this._rawTransformable;rawTransformable.parent=roamTransformable;roamTransformable.updateTransform();rawTransformable.updateTransform();copy$1(this.transform||(this.transform=[]),rawTransformable.transform||create$1());this._rawTransform=rawTransformable.getLocalTransform();this.invTransform=this.invTransform||[];invert(this.invTransform,this.transform);this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var rect=this.getBoundingRect().clone();rect.applyTransform(this.transform);return rect},dataToPoint:function(data,noRoam,out){var transform=noRoam?this._rawTransform:this.transform;out=out||[];return transform?v2ApplyTransform$1(out,data,transform):copy(out,data)},pointToData:function(point){var invTransform=this.invTransform;return invTransform?v2ApplyTransform$1([],point,invTransform):[point[0],point[1]]},convertToPixel:curry(doConvert$1,"dataToPoint"),convertFromPixel:curry(doConvert$1,"pointToData"),containPoint:function(point){return this.getViewRectAfterRoam().contain(point[0],point[1])
}};mixin(View,Transformable);function doConvert$1(methodName,ecModel,finder,value){var seriesModel=finder.seriesModel;var coordSys=seriesModel?seriesModel.coordinateSystem:null;return coordSys===this?coordSys[methodName](value):null}function Geo(name,map$$1,nameMap,invertLongitute){View.call(this,name);this.map=map$$1;var source=geoSourceManager.load(map$$1,nameMap);this._nameCoordMap=source.nameCoordMap;this._regionsMap=source.regionsMap;this._invertLongitute=invertLongitute==null?true:invertLongitute;this.regions=source.regions;this._rect=source.boundingRect}Geo.prototype={constructor:Geo,type:"geo",dimensions:["lng","lat"],containCoord:function(coord){var regions=this.regions;for(var i=0;i<regions.length;i++){if(regions[i].contain(coord)){return true}}return false},transformTo:function(x,y,width,height){var rect=this.getBoundingRect();var invertLongitute=this._invertLongitute;rect=rect.clone();if(invertLongitute){rect.y=-rect.y-rect.height}var rawTransformable=this._rawTransformable;rawTransformable.transform=rect.calculateTransform(new BoundingRect(x,y,width,height));rawTransformable.decomposeTransform();if(invertLongitute){var scale=rawTransformable.scale;scale[1]=-scale[1]}rawTransformable.updateTransform();this._updateTransform()},getRegion:function(name){return this._regionsMap.get(name)},getRegionByCoord:function(coord){var regions=this.regions;for(var i=0;i<regions.length;i++){if(regions[i].contain(coord)){return regions[i]}}},addGeoCoord:function(name,geoCoord){this._nameCoordMap.set(name,geoCoord)},getGeoCoord:function(name){return this._nameCoordMap.get(name)},getBoundingRect:function(){return this._rect},dataToPoint:function(data,noRoam,out){if(typeof data==="string"){data=this.getGeoCoord(data)}if(data){return View.prototype.dataToPoint.call(this,data,noRoam,out)}},convertToPixel:curry(doConvert,"dataToPoint"),convertFromPixel:curry(doConvert,"pointToData")};mixin(Geo,View);function doConvert(methodName,ecModel,finder,value){var geoModel=finder.geoModel;
var seriesModel=finder.seriesModel;var coordSys=geoModel?geoModel.coordinateSystem:seriesModel?(seriesModel.coordinateSystem||(seriesModel.getReferringComponents("geo")[0]||{}).coordinateSystem):null;return coordSys===this?coordSys[methodName](value):null}function resizeGeo(geoModel,api){var boundingCoords=geoModel.get("boundingCoords");if(boundingCoords!=null){var leftTop=boundingCoords[0];var rightBottom=boundingCoords[1];if(isNaN(leftTop[0])||isNaN(leftTop[1])||isNaN(rightBottom[0])||isNaN(rightBottom[1])){if(__DEV__){console.error("Invalid boundingCoords")}}else{this.setBoundingRect(leftTop[0],leftTop[1],rightBottom[0]-leftTop[0],rightBottom[1]-leftTop[1])}}var rect=this.getBoundingRect();var boxLayoutOption;var center=geoModel.get("layoutCenter");var size=geoModel.get("layoutSize");var viewWidth=api.getWidth();var viewHeight=api.getHeight();var aspect=rect.width/rect.height*this.aspectScale;var useCenterAndSize=false;if(center&&size){center=[parsePercent$1(center[0],viewWidth),parsePercent$1(center[1],viewHeight)];size=parsePercent$1(size,Math.min(viewWidth,viewHeight));if(!isNaN(center[0])&&!isNaN(center[1])&&!isNaN(size)){useCenterAndSize=true}else{if(__DEV__){console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.")}}}var viewRect;if(useCenterAndSize){var viewRect={};if(aspect>1){viewRect.width=size;viewRect.height=size/aspect}else{viewRect.height=size;viewRect.width=size*aspect}viewRect.y=center[1]-viewRect.height/2;viewRect.x=center[0]-viewRect.width/2}else{boxLayoutOption=geoModel.getBoxLayoutParams();boxLayoutOption.aspect=aspect;viewRect=getLayoutRect(boxLayoutOption,{width:viewWidth,height:viewHeight})}this.setViewRect(viewRect.x,viewRect.y,viewRect.width,viewRect.height);this.setCenter(geoModel.get("center"));this.setZoom(geoModel.get("zoom"))}function setGeoCoords(geo,model){each$1(model.get("geoCoord"),function(geoCoord,name){geo.addGeoCoord(name,geoCoord)})}var geoCreator={dimensions:Geo.prototype.dimensions,create:function(ecModel,api){var geoList=[];
ecModel.eachComponent("geo",function(geoModel,idx){var name=geoModel.get("map");var aspectScale=geoModel.get("aspectScale");var invertLongitute=true;var mapRecords=mapDataStorage.retrieveMap(name);if(mapRecords&&mapRecords[0]&&mapRecords[0].type==="svg"){aspectScale==null&&(aspectScale=1);invertLongitute=false}else{aspectScale==null&&(aspectScale=0.75)}var geo=new Geo(name+idx,name,geoModel.get("nameMap"),invertLongitute);geo.aspectScale=aspectScale;geo.zoomLimit=geoModel.get("scaleLimit");geoList.push(geo);setGeoCoords(geo,geoModel);geoModel.coordinateSystem=geo;geo.model=geoModel;geo.resize=resizeGeo;geo.resize(geoModel,api)});ecModel.eachSeries(function(seriesModel){var coordSys=seriesModel.get("coordinateSystem");if(coordSys==="geo"){var geoIndex=seriesModel.get("geoIndex")||0;seriesModel.coordinateSystem=geoList[geoIndex]}});var mapModelGroupBySeries={};ecModel.eachSeriesByType("map",function(seriesModel){if(!seriesModel.getHostGeoModel()){var mapType=seriesModel.getMapType();mapModelGroupBySeries[mapType]=mapModelGroupBySeries[mapType]||[];mapModelGroupBySeries[mapType].push(seriesModel)}});each$1(mapModelGroupBySeries,function(mapSeries,mapType){var nameMapList=map(mapSeries,function(singleMapSeries){return singleMapSeries.get("nameMap")});var geo=new Geo(mapType,mapType,mergeAll(nameMapList));geo.zoomLimit=retrieve.apply(null,map(mapSeries,function(singleMapSeries){return singleMapSeries.get("scaleLimit")}));geoList.push(geo);geo.resize=resizeGeo;geo.aspectScale=mapSeries[0].get("aspectScale");geo.resize(mapSeries[0],api);each$1(mapSeries,function(singleMapSeries){singleMapSeries.coordinateSystem=geo;setGeoCoords(geo,singleMapSeries)})});return geoList},getFilledRegions:function(originRegionArr,mapName,nameMap){var regionsArr=(originRegionArr||[]).slice();var dataNameMap=createHashMap();for(var i=0;i<regionsArr.length;i++){dataNameMap.set(regionsArr[i].name,regionsArr[i])}var source=geoSourceManager.load(mapName,nameMap);each$1(source.regions,function(region){var name=region.name;
!dataNameMap.get(name)&&regionsArr.push({name:name})});return regionsArr}};registerCoordinateSystem("geo",geoCreator);var mapSymbolLayout=function(ecModel){var processedMapType={};ecModel.eachSeriesByType("map",function(mapSeries){var mapType=mapSeries.getMapType();if(mapSeries.getHostGeoModel()||processedMapType[mapType]){return}var mapSymbolOffsets={};each$1(mapSeries.seriesGroup,function(subMapSeries){var geo=subMapSeries.coordinateSystem;var data=subMapSeries.originalData;if(subMapSeries.get("showLegendSymbol")&&ecModel.getComponent("legend")){data.each(data.mapDimension("value"),function(value,idx){var name=data.getName(idx);var region=geo.getRegion(name);if(!region||isNaN(value)){return}var offset=mapSymbolOffsets[name]||0;var point=geo.dataToPoint(region.center);mapSymbolOffsets[name]=offset+1;data.setItemLayout(idx,{point:point,offset:offset})})}});var data=mapSeries.getData();data.each(function(idx){var name=data.getName(idx);var layout=data.getItemLayout(idx)||{};layout.showLabel=!mapSymbolOffsets[name];data.setItemLayout(idx,layout)});processedMapType[mapType]=true})};var mapVisual=function(ecModel){ecModel.eachSeriesByType("map",function(seriesModel){var colorList=seriesModel.get("color");var itemStyleModel=seriesModel.getModel("itemStyle");var areaColor=itemStyleModel.get("areaColor");var color=itemStyleModel.get("color")||colorList[seriesModel.seriesIndex%colorList.length];seriesModel.getData().setVisual({"areaColor":areaColor,"color":color})})};function dataStatistics(datas,statisticType){var dataNameMap={};each$1(datas,function(data){data.each(data.mapDimension("value"),function(value,idx){var mapKey="ec-"+data.getName(idx);dataNameMap[mapKey]=dataNameMap[mapKey]||[];if(!isNaN(value)){dataNameMap[mapKey].push(value)}})});return datas[0].map(datas[0].mapDimension("value"),function(value,idx){var mapKey="ec-"+datas[0].getName(idx);var sum=0;var min=Infinity;var max=-Infinity;var len=dataNameMap[mapKey].length;for(var i=0;i<len;i++){min=Math.min(min,dataNameMap[mapKey][i]);
max=Math.max(max,dataNameMap[mapKey][i]);sum+=dataNameMap[mapKey][i]}var result;if(statisticType==="min"){result=min}else{if(statisticType==="max"){result=max}else{if(statisticType==="average"){result=sum/len}else{result=sum}}}return len===0?NaN:result})}var mapDataStatistic=function(ecModel){var seriesGroups={};ecModel.eachSeriesByType("map",function(seriesModel){var hostGeoModel=seriesModel.getHostGeoModel();var key=hostGeoModel?"o"+hostGeoModel.id:"i"+seriesModel.getMapType();(seriesGroups[key]=seriesGroups[key]||[]).push(seriesModel)});each$1(seriesGroups,function(seriesList,key){var data=dataStatistics(map(seriesList,function(seriesModel){return seriesModel.getData()}),seriesList[0].get("mapValueCalculation"));for(var i=0;i<seriesList.length;i++){seriesList[i].originalData=seriesList[i].getData()}for(var i=0;i<seriesList.length;i++){seriesList[i].seriesGroup=seriesList;seriesList[i].needsDrawMap=i===0&&!seriesList[i].getHostGeoModel();seriesList[i].setData(data.cloneShallow());seriesList[i].mainSeries=seriesList[0]}})};var backwardCompat$2=function(option){var mapSeries=[];each$1(option.series,function(seriesOpt){if(seriesOpt&&seriesOpt.type==="map"){mapSeries.push(seriesOpt);seriesOpt.map=seriesOpt.map||seriesOpt.mapType;defaults(seriesOpt,seriesOpt.mapLocation)}})};registerLayout(mapSymbolLayout);registerVisual(mapVisual);registerProcessor(PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic);registerPreprocessor(backwardCompat$2);createDataSelectAction("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var each$7=each$1;var DATAS="\0__link_datas";var MAIN_DATA="\0__link_mainData";function linkList(opt){var mainData=opt.mainData;var datas=opt.datas;if(!datas){datas={main:mainData};opt.datasAttr={main:"data"}}opt.datas=opt.mainData=null;linkAll(mainData,datas,opt);each$7(datas,function(data){each$7(mainData.TRANSFERABLE_METHODS,function(methodName){data.wrapMethod(methodName,curry(transferInjection,opt))
})});mainData.wrapMethod("cloneShallow",curry(cloneShallowInjection,opt));each$7(mainData.CHANGABLE_METHODS,function(methodName){mainData.wrapMethod(methodName,curry(changeInjection,opt))});assert$1(datas[mainData.dataType]===mainData)}function transferInjection(opt,res){if(isMainData(this)){var datas=extend({},this[DATAS]);datas[this.dataType]=res;linkAll(res,datas,opt)}else{linkSingle(res,this.dataType,this[MAIN_DATA],opt)}return res}function changeInjection(opt,res){opt.struct&&opt.struct.update(this);return res}function cloneShallowInjection(opt,res){each$7(res[DATAS],function(data,dataType){data!==res&&linkSingle(data.cloneShallow(),dataType,res,opt)});return res}function getLinkedData(dataType){var mainData=this[MAIN_DATA];return(dataType==null||mainData==null)?mainData:mainData[DATAS][dataType]}function isMainData(data){return data[MAIN_DATA]===data}function linkAll(mainData,datas,opt){mainData[DATAS]={};each$7(datas,function(data,dataType){linkSingle(data,dataType,mainData,opt)})}function linkSingle(data,dataType,mainData,opt){mainData[DATAS][dataType]=data;data[MAIN_DATA]=mainData;data.dataType=dataType;if(opt.struct){data[opt.structAttr]=opt.struct;opt.struct[opt.datasAttr[dataType]]=data}data.getLinkedData=getLinkedData}var TreeNode=function(name,hostTree){this.name=name||"";this.depth=0;this.height=0;this.parentNode=null;this.dataIndex=-1;this.children=[];this.viewChildren=[];this.hostTree=hostTree};TreeNode.prototype={constructor:TreeNode,isRemoved:function(){return this.dataIndex<0},eachNode:function(options,cb,context){if(typeof options==="function"){context=cb;cb=options;options=null}options=options||{};if(isString(options)){options={order:options}}var order=options.order||"preorder";var children=this[options.attr||"children"];var suppressVisitSub;order==="preorder"&&(suppressVisitSub=cb.call(context,this));for(var i=0;!suppressVisitSub&&i<children.length;i++){children[i].eachNode(options,cb,context)}order==="postorder"&&cb.call(context,this)},updateDepthAndHeight:function(depth){var height=0;
this.depth=depth;for(var i=0;i<this.children.length;i++){var child=this.children[i];child.updateDepthAndHeight(depth+1);if(child.height>height){height=child.height}}this.height=height+1},getNodeById:function(id){if(this.getId()===id){return this}for(var i=0,children=this.children,len=children.length;i<len;i++){var res=children[i].getNodeById(id);if(res){return res}}},contains:function(node){if(node===this){return true}for(var i=0,children=this.children,len=children.length;i<len;i++){var res=children[i].contains(node);if(res){return res}}},getAncestors:function(includeSelf){var ancestors=[];var node=includeSelf?this:this.parentNode;while(node){ancestors.push(node);node=node.parentNode}ancestors.reverse();return ancestors},getValue:function(dimension){var data=this.hostTree.data;return data.get(data.getDimension(dimension||"value"),this.dataIndex)},setLayout:function(layout,merge$$1){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,layout,merge$$1)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(path){if(this.dataIndex<0){return}var hostTree=this.hostTree;var itemModel=hostTree.data.getItemModel(this.dataIndex);var levelModel=this.getLevelModel();var leavesModel;if(!levelModel&&(this.children.length===0||(this.children.length!==0&&this.isExpand===false))){leavesModel=this.getLeavesModel()}return itemModel.getModel(path,(levelModel||leavesModel||hostTree.hostModel).getModel(path))},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(key,value){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,key,value)},getVisual:function(key,ignoreParent){return this.hostTree.data.getItemVisual(this.dataIndex,key,ignoreParent)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(node){var parent=node.parentNode;
while(parent){if(parent===this){return true}parent=parent.parentNode}return false},isDescendantOf:function(node){return node!==this&&node.isAncestorOf(this)}};function Tree(hostModel,levelOptions,leavesOption){this.root;this.data;this._nodes=[];this.hostModel=hostModel;this.levelModels=map(levelOptions||[],function(levelDefine){return new Model(levelDefine,hostModel,hostModel.ecModel)});this.leavesModel=new Model(leavesOption||{},hostModel,hostModel.ecModel)}Tree.prototype={constructor:Tree,type:"tree",eachNode:function(options,cb,context){this.root.eachNode(options,cb,context)},getNodeByDataIndex:function(dataIndex){var rawIndex=this.data.getRawIndex(dataIndex);return this._nodes[rawIndex]},getNodeByName:function(name){return this.root.getNodeByName(name)},update:function(){var data=this.data;var nodes=this._nodes;for(var i=0,len=nodes.length;i<len;i++){nodes[i].dataIndex=-1}for(var i=0,len=data.count();i<len;i++){nodes[data.getRawIndex(i)].dataIndex=i}},clearLayouts:function(){this.data.clearItemLayouts()}};Tree.createTree=function(dataRoot,hostModel,treeOptions){var tree=new Tree(hostModel,treeOptions.levels,treeOptions.leaves);var listData=[];var dimMax=1;buildHierarchy(dataRoot);function buildHierarchy(dataNode,parentNode){var value=dataNode.value;dimMax=Math.max(dimMax,isArray(value)?value.length:1);listData.push(dataNode);var node=new TreeNode(dataNode.name,tree);parentNode?addChild(node,parentNode):(tree.root=node);tree._nodes.push(node);var children=dataNode.children;if(children){for(var i=0;i<children.length;i++){buildHierarchy(children[i],node)}}}tree.root.updateDepthAndHeight(0);var dimensionsInfo=createDimensions(listData,{coordDimensions:["value"],dimensionsCount:dimMax});var list=new List(dimensionsInfo,hostModel);list.initData(listData);linkList({mainData:list,struct:tree,structAttr:"tree"});tree.update();return tree};function addChild(child,node){var children=node.children;if(child.parentNode===node){return}children.push(child);child.parentNode=node}SeriesModel.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(option){var root={name:option.name,children:option.data};
var leaves=option.leaves||{};var treeOption={};treeOption.leaves=leaves;var tree=Tree.createTree(root,this,treeOption);var treeDepth=0;tree.eachNode("preorder",function(node){if(node.depth>treeDepth){treeDepth=node.depth}});var expandAndCollapse=option.expandAndCollapse;var expandTreeDepth=(expandAndCollapse&&option.initialTreeDepth>=0)?option.initialTreeDepth:treeDepth;tree.root.eachNode("preorder",function(node){var item=node.hostTree.data.getRawDataItem(node.dataIndex);node.isExpand=(item&&item.collapsed!=null)?!item.collapsed:node.depth<=expandTreeDepth});return tree.data},getOrient:function(){var orient=this.get("orient");if(orient==="horizontal"){orient="LR"}else{if(orient==="vertical"){orient="TB"}}return orient},setZoom:function(zoom){this.option.zoom=zoom},setCenter:function(center){this.option.center=center},formatTooltip:function(dataIndex){var tree=this.getData().tree;var realRoot=tree.root.children[0];var node=tree.getNodeByDataIndex(dataIndex);var value=node.getValue();var name=node.name;while(node&&(node!==realRoot)){name=node.parentNode.name+"."+name;node=node.parentNode}return encodeHTML(name+((isNaN(value)||value==null)?"":" : "+value))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",roam:false,nodeScaleRatio:0.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:true,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:0.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:true,color:"#555"},leaves:{label:{show:true}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1000}});function init$2(root){root.hierNode={defaultAncestor:null,ancestor:root,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};var nodes=[root];var node;var children;while(node=nodes.pop()){children=node.children;if(node.isExpand&&children.length){var n=children.length;for(var i=n-1;i>=0;i--){var child=children[i];
child.hierNode={defaultAncestor:null,ancestor:child,prelim:0,modifier:0,change:0,shift:0,i:i,thread:null};nodes.push(child)}}}}function firstWalk(node,separation){var children=node.isExpand?node.children:[];var siblings=node.parentNode.children;var subtreeW=node.hierNode.i?siblings[node.hierNode.i-1]:null;if(children.length){executeShifts(node);var midPoint=(children[0].hierNode.prelim+children[children.length-1].hierNode.prelim)/2;if(subtreeW){node.hierNode.prelim=subtreeW.hierNode.prelim+separation(node,subtreeW);node.hierNode.modifier=node.hierNode.prelim-midPoint}else{node.hierNode.prelim=midPoint}}else{if(subtreeW){node.hierNode.prelim=subtreeW.hierNode.prelim+separation(node,subtreeW)}}node.parentNode.hierNode.defaultAncestor=apportion(node,subtreeW,node.parentNode.hierNode.defaultAncestor||siblings[0],separation)}function secondWalk(node){var nodeX=node.hierNode.prelim+node.parentNode.hierNode.modifier;node.setLayout({x:nodeX},true);node.hierNode.modifier+=node.parentNode.hierNode.modifier}function separation(cb){return arguments.length?cb:defaultSeparation}function radialCoordinate(x,y){var radialCoor={};x-=Math.PI/2;radialCoor.x=y*Math.cos(x);radialCoor.y=y*Math.sin(x);return radialCoor}function getViewRect(seriesModel,api){return getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}function executeShifts(node){var children=node.children;var n=children.length;var shift=0;var change=0;while(--n>=0){var child=children[n];child.hierNode.prelim+=shift;child.hierNode.modifier+=shift;change+=child.hierNode.change;shift+=child.hierNode.shift+change}}function apportion(subtreeV,subtreeW,ancestor,separation){if(subtreeW){var nodeOutRight=subtreeV;var nodeInRight=subtreeV;var nodeOutLeft=nodeInRight.parentNode.children[0];var nodeInLeft=subtreeW;var sumOutRight=nodeOutRight.hierNode.modifier;var sumInRight=nodeInRight.hierNode.modifier;var sumOutLeft=nodeOutLeft.hierNode.modifier;var sumInLeft=nodeInLeft.hierNode.modifier;while(nodeInLeft=nextRight(nodeInLeft),nodeInRight=nextLeft(nodeInRight),nodeInLeft&&nodeInRight){nodeOutRight=nextRight(nodeOutRight);
nodeOutLeft=nextLeft(nodeOutLeft);nodeOutRight.hierNode.ancestor=subtreeV;var shift=nodeInLeft.hierNode.prelim+sumInLeft-nodeInRight.hierNode.prelim-sumInRight+separation(nodeInLeft,nodeInRight);if(shift>0){moveSubtree(nextAncestor(nodeInLeft,subtreeV,ancestor),subtreeV,shift);sumInRight+=shift;sumOutRight+=shift}sumInLeft+=nodeInLeft.hierNode.modifier;sumInRight+=nodeInRight.hierNode.modifier;sumOutRight+=nodeOutRight.hierNode.modifier;sumOutLeft+=nodeOutLeft.hierNode.modifier}if(nodeInLeft&&!nextRight(nodeOutRight)){nodeOutRight.hierNode.thread=nodeInLeft;nodeOutRight.hierNode.modifier+=sumInLeft-sumOutRight}if(nodeInRight&&!nextLeft(nodeOutLeft)){nodeOutLeft.hierNode.thread=nodeInRight;nodeOutLeft.hierNode.modifier+=sumInRight-sumOutLeft;ancestor=subtreeV}}return ancestor}function nextRight(node){var children=node.children;return children.length&&node.isExpand?children[children.length-1]:node.hierNode.thread}function nextLeft(node){var children=node.children;return children.length&&node.isExpand?children[0]:node.hierNode.thread}function nextAncestor(nodeInLeft,node,ancestor){return nodeInLeft.hierNode.ancestor.parentNode===node.parentNode?nodeInLeft.hierNode.ancestor:ancestor}function moveSubtree(wl,wr,shift){var change=shift/(wr.hierNode.i-wl.hierNode.i);wr.hierNode.change-=change;wr.hierNode.shift+=shift;wr.hierNode.modifier+=shift;wr.hierNode.prelim+=shift;wl.hierNode.change+=change}function defaultSeparation(node1,node2){return node1.parentNode===node2.parentNode?1:2}extendChartView({type:"tree",init:function(ecModel,api){this._oldTree;this._mainGroup=new Group();this._controller=new RoamController(api.getZr());this._controllerHost={target:this.group};this.group.add(this._mainGroup)},render:function(seriesModel,ecModel,api,payload){var data=seriesModel.getData();var layoutInfo=seriesModel.layoutInfo;var group=this._mainGroup;var layout=seriesModel.get("layout");if(layout==="radial"){group.attr("position",[layoutInfo.x+layoutInfo.width/2,layoutInfo.y+layoutInfo.height/2])
}else{group.attr("position",[layoutInfo.x,layoutInfo.y])}this._updateViewCoordSys(seriesModel);this._updateController(seriesModel,ecModel,api);var oldData=this._data;var seriesScope={expandAndCollapse:seriesModel.get("expandAndCollapse"),layout:layout,orient:seriesModel.getOrient(),curvature:seriesModel.get("lineStyle.curveness"),symbolRotate:seriesModel.get("symbolRotate"),symbolOffset:seriesModel.get("symbolOffset"),hoverAnimation:seriesModel.get("hoverAnimation"),useNameLabel:true,fadeIn:true};data.diff(oldData).add(function(newIdx){if(symbolNeedsDraw$1(data,newIdx)){updateNode(data,newIdx,null,group,seriesModel,seriesScope)}}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);if(!symbolNeedsDraw$1(data,newIdx)){symbolEl&&removeNode(oldData,oldIdx,symbolEl,group,seriesModel,seriesScope);return}updateNode(data,newIdx,symbolEl,group,seriesModel,seriesScope)}).remove(function(oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);if(symbolEl){removeNode(oldData,oldIdx,symbolEl,group,seriesModel,seriesScope)}}).execute();this._nodeScaleRatio=seriesModel.get("nodeScaleRatio");this._updateNodeAndLinkScale(seriesModel);if(seriesScope.expandAndCollapse===true){data.eachItemGraphicEl(function(el,dataIndex){el.off("click").on("click",function(){api.dispatchAction({type:"treeExpandAndCollapse",seriesId:seriesModel.id,dataIndex:dataIndex})})})}this._data=data},_updateViewCoordSys:function(seriesModel){var data=seriesModel.getData();var points=[];data.each(function(idx){var layout=data.getItemLayout(idx);if(layout&&!isNaN(layout.x)&&!isNaN(layout.y)){points.push([+layout.x,+layout.y])}});var min=[];var max=[];fromPoints(points,min,max);if(max[0]-min[0]===0){max[0]+=1;min[0]-=1}if(max[1]-min[1]===0){max[1]+=1;min[1]-=1}var viewCoordSys=seriesModel.coordinateSystem=new View();viewCoordSys.zoomLimit=seriesModel.get("scaleLimit");viewCoordSys.setBoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1]);viewCoordSys.setCenter(seriesModel.get("center"));viewCoordSys.setZoom(seriesModel.get("zoom"));
this.group.attr({position:viewCoordSys.position,scale:viewCoordSys.scale});this._viewCoordSys=viewCoordSys},_updateController:function(seriesModel,ecModel,api){var controller=this._controller;var controllerHost=this._controllerHost;var group=this.group;controller.setPointerChecker(function(e,x,y){var rect=group.getBoundingRect();rect.applyTransform(group.transform);return rect.contain(x,y)&&!onIrrelevantElement(e,api,seriesModel)});controller.enable(seriesModel.get("roam"));controllerHost.zoomLimit=seriesModel.get("scaleLimit");controllerHost.zoom=seriesModel.coordinateSystem.getZoom();controller.off("pan").off("zoom").on("pan",function(e){updateViewOnPan(controllerHost,e.dx,e.dy);api.dispatchAction({seriesId:seriesModel.id,type:"treeRoam",dx:e.dx,dy:e.dy})},this).on("zoom",function(e){updateViewOnZoom(controllerHost,e.scale,e.originX,e.originY);api.dispatchAction({seriesId:seriesModel.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY});this._updateNodeAndLinkScale(seriesModel)},this)},_updateNodeAndLinkScale:function(seriesModel){var data=seriesModel.getData();var nodeScale=this._getNodeGlobalScale(seriesModel);var invScale=[nodeScale,nodeScale];data.eachItemGraphicEl(function(el,idx){el.attr("scale",invScale)})},_getNodeGlobalScale:function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys.type!=="view"){return 1}var nodeScaleRatio=this._nodeScaleRatio;var groupScale=coordSys.scale;var groupZoom=(groupScale&&groupScale[0])||1;var roamZoom=coordSys.getZoom();var nodeScale=(roamZoom-1)*nodeScaleRatio+1;return nodeScale/groupZoom},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},remove:function(){this._mainGroup.removeAll();this._data=null}});function symbolNeedsDraw$1(data,dataIndex){var layout=data.getItemLayout(dataIndex);return layout&&!isNaN(layout.x)&&!isNaN(layout.y)&&data.getItemVisual(dataIndex,"symbol")!=="none"}function getTreeNodeStyle(node,itemModel,seriesScope){seriesScope.itemModel=itemModel;
seriesScope.itemStyle=itemModel.getModel("itemStyle").getItemStyle();seriesScope.hoverItemStyle=itemModel.getModel("emphasis.itemStyle").getItemStyle();seriesScope.lineStyle=itemModel.getModel("lineStyle").getLineStyle();seriesScope.labelModel=itemModel.getModel("label");seriesScope.hoverLabelModel=itemModel.getModel("emphasis.label");if(node.isExpand===false&&node.children.length!==0){seriesScope.symbolInnerColor=seriesScope.itemStyle.fill}else{seriesScope.symbolInnerColor="#fff"}return seriesScope}function updateNode(data,dataIndex,symbolEl,group,seriesModel,seriesScope){var isInit=!symbolEl;var node=data.tree.getNodeByDataIndex(dataIndex);var itemModel=node.getModel();var seriesScope=getTreeNodeStyle(node,itemModel,seriesScope);var virtualRoot=data.tree.root;var source=node.parentNode===virtualRoot?node:node.parentNode||node;var sourceSymbolEl=data.getItemGraphicEl(source.dataIndex);var sourceLayout=source.getLayout();var sourceOldLayout=sourceSymbolEl?{x:sourceSymbolEl.position[0],y:sourceSymbolEl.position[1],rawX:sourceSymbolEl.__radialOldRawX,rawY:sourceSymbolEl.__radialOldRawY}:sourceLayout;var targetLayout=node.getLayout();if(isInit){symbolEl=new SymbolClz$1(data,dataIndex,seriesScope);symbolEl.attr("position",[sourceOldLayout.x,sourceOldLayout.y])}else{symbolEl.updateData(data,dataIndex,seriesScope)}symbolEl.__radialOldRawX=symbolEl.__radialRawX;symbolEl.__radialOldRawY=symbolEl.__radialRawY;symbolEl.__radialRawX=targetLayout.rawX;symbolEl.__radialRawY=targetLayout.rawY;group.add(symbolEl);data.setItemGraphicEl(dataIndex,symbolEl);updateProps(symbolEl,{position:[targetLayout.x,targetLayout.y]},seriesModel);var symbolPath=symbolEl.getSymbolPath();if(seriesScope.layout==="radial"){var realRoot=virtualRoot.children[0];var rootLayout=realRoot.getLayout();var length=realRoot.children.length;var rad;var isLeft;if(targetLayout.x===rootLayout.x&&node.isExpand===true){var center={};center.x=(realRoot.children[0].getLayout().x+realRoot.children[length-1].getLayout().x)/2;
center.y=(realRoot.children[0].getLayout().y+realRoot.children[length-1].getLayout().y)/2;rad=Math.atan2(center.y-rootLayout.y,center.x-rootLayout.x);if(rad<0){rad=Math.PI*2+rad}isLeft=center.x<rootLayout.x;if(isLeft){rad=rad-Math.PI}}else{rad=Math.atan2(targetLayout.y-rootLayout.y,targetLayout.x-rootLayout.x);if(rad<0){rad=Math.PI*2+rad}if(node.children.length===0||(node.children.length!==0&&node.isExpand===false)){isLeft=targetLayout.x<rootLayout.x;if(isLeft){rad=rad-Math.PI}}else{isLeft=targetLayout.x>rootLayout.x;if(!isLeft){rad=rad-Math.PI}}}var textPosition=isLeft?"left":"right";symbolPath.setStyle({textPosition:textPosition,textRotation:-rad,textOrigin:"center",verticalAlign:"middle"})}if(node.parentNode&&node.parentNode!==virtualRoot){var edge=symbolEl.__edge;if(!edge){edge=symbolEl.__edge=new BezierCurve({shape:getEdgeShape(seriesScope,sourceOldLayout,sourceOldLayout),style:defaults({opacity:0,strokeNoScale:true},seriesScope.lineStyle)})}updateProps(edge,{shape:getEdgeShape(seriesScope,sourceLayout,targetLayout),style:{opacity:1}},seriesModel);group.add(edge)}}function removeNode(data,dataIndex,symbolEl,group,seriesModel,seriesScope){var node=data.tree.getNodeByDataIndex(dataIndex);var virtualRoot=data.tree.root;var itemModel=node.getModel();var seriesScope=getTreeNodeStyle(node,itemModel,seriesScope);var source=node.parentNode===virtualRoot?node:node.parentNode||node;var sourceLayout;while(sourceLayout=source.getLayout(),sourceLayout==null){source=source.parentNode===virtualRoot?source:source.parentNode||source}updateProps(symbolEl,{position:[sourceLayout.x+1,sourceLayout.y+1]},seriesModel,function(){group.remove(symbolEl);data.setItemGraphicEl(dataIndex,null)});symbolEl.fadeOut(null,{keepLabel:true});var edge=symbolEl.__edge;if(edge){updateProps(edge,{shape:getEdgeShape(seriesScope,sourceLayout,sourceLayout),style:{opacity:0}},seriesModel,function(){group.remove(edge)})}}function getEdgeShape(seriesScope,sourceLayout,targetLayout){var cpx1;var cpy1;var cpx2;
var cpy2;var orient=seriesScope.orient;var x1;var x2;var y1;var y2;if(seriesScope.layout==="radial"){x1=sourceLayout.rawX;y1=sourceLayout.rawY;x2=targetLayout.rawX;y2=targetLayout.rawY;var radialCoor1=radialCoordinate(x1,y1);var radialCoor2=radialCoordinate(x1,y1+(y2-y1)*seriesScope.curvature);var radialCoor3=radialCoordinate(x2,y2+(y1-y2)*seriesScope.curvature);var radialCoor4=radialCoordinate(x2,y2);return{x1:radialCoor1.x,y1:radialCoor1.y,x2:radialCoor4.x,y2:radialCoor4.y,cpx1:radialCoor2.x,cpy1:radialCoor2.y,cpx2:radialCoor3.x,cpy2:radialCoor3.y}}else{x1=sourceLayout.x;y1=sourceLayout.y;x2=targetLayout.x;y2=targetLayout.y;if(orient==="LR"||orient==="RL"){cpx1=x1+(x2-x1)*seriesScope.curvature;cpy1=y1;cpx2=x2+(x1-x2)*seriesScope.curvature;cpy2=y2}if(orient==="TB"||orient==="BT"){cpx1=x1;cpy1=y1+(y2-y1)*seriesScope.curvature;cpx2=x2;cpy2=y2+(y1-y2)*seriesScope.curvature}}return{x1:x1,y1:y1,x2:x2,y2:y2,cpx1:cpx1,cpy1:cpy1,cpx2:cpx2,cpy2:cpy2}}registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"tree",query:payload},function(seriesModel){var dataIndex=payload.dataIndex;var tree=seriesModel.getData().tree;var node=tree.getNodeByDataIndex(dataIndex);node.isExpand=!node.isExpand})});registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"tree",query:payload},function(seriesModel){var coordSys=seriesModel.coordinateSystem;var res=updateCenterAndZoom(coordSys,payload);seriesModel.setCenter&&seriesModel.setCenter(res.center);seriesModel.setZoom&&seriesModel.setZoom(res.zoom)})});function eachAfter(root,callback,separation){var nodes=[root];var next=[];var node;while(node=nodes.pop()){next.push(node);if(node.isExpand){var children=node.children;if(children.length){for(var i=0;i<children.length;i++){nodes.push(children[i])}}}}while(node=next.pop()){callback(node,separation)}}function eachBefore(root,callback){var nodes=[root];
var node;while(node=nodes.pop()){callback(node);if(node.isExpand){var children=node.children;if(children.length){for(var i=children.length-1;i>=0;i--){nodes.push(children[i])}}}}}var treeLayout=function(ecModel,api){ecModel.eachSeriesByType("tree",function(seriesModel){commonLayout(seriesModel,api)})};function commonLayout(seriesModel,api){var layoutInfo=getViewRect(seriesModel,api);seriesModel.layoutInfo=layoutInfo;var layout=seriesModel.get("layout");var width=0;var height=0;var separation$$1=null;if(layout==="radial"){width=2*Math.PI;height=Math.min(layoutInfo.height,layoutInfo.width)/2;separation$$1=separation(function(node1,node2){return(node1.parentNode===node2.parentNode?1:2)/node1.depth})}else{width=layoutInfo.width;height=layoutInfo.height;separation$$1=separation()}var virtualRoot=seriesModel.getData().tree.root;var realRoot=virtualRoot.children[0];if(realRoot){init$2(virtualRoot);eachAfter(realRoot,firstWalk,separation$$1);virtualRoot.hierNode.modifier=-realRoot.hierNode.prelim;eachBefore(realRoot,secondWalk);var left=realRoot;var right=realRoot;var bottom=realRoot;eachBefore(realRoot,function(node){var x=node.getLayout().x;if(x<left.getLayout().x){left=node}if(x>right.getLayout().x){right=node}if(node.depth>bottom.depth){bottom=node}});var delta=left===right?1:separation$$1(left,right)/2;var tx=delta-left.getLayout().x;var kx=0;var ky=0;var coorX=0;var coorY=0;if(layout==="radial"){kx=width/(right.getLayout().x+delta+tx);ky=height/((bottom.depth-1)||1);eachBefore(realRoot,function(node){coorX=(node.getLayout().x+tx)*kx;coorY=(node.depth-1)*ky;var finalCoor=radialCoordinate(coorX,coorY);node.setLayout({x:finalCoor.x,y:finalCoor.y,rawX:coorX,rawY:coorY},true)})}else{var orient=seriesModel.getOrient();if(orient==="RL"||orient==="LR"){ky=height/(right.getLayout().x+delta+tx);kx=width/((bottom.depth-1)||1);eachBefore(realRoot,function(node){coorY=(node.getLayout().x+tx)*ky;coorX=orient==="LR"?(node.depth-1)*kx:width-(node.depth-1)*kx;node.setLayout({x:coorX,y:coorY},true)
})}else{if(orient==="TB"||orient==="BT"){kx=width/(right.getLayout().x+delta+tx);ky=height/((bottom.depth-1)||1);eachBefore(realRoot,function(node){coorX=(node.getLayout().x+tx)*kx;coorY=orient==="TB"?(node.depth-1)*ky:height-(node.depth-1)*ky;node.setLayout({x:coorX,y:coorY},true)})}}}}}registerVisual(visualSymbol("tree","circle"));registerLayout(treeLayout);function retrieveTargetInfo(payload,validPayloadTypes,seriesModel){if(payload&&indexOf(validPayloadTypes,payload.type)>=0){var root=seriesModel.getData().tree.root;var targetNode=payload.targetNode;if(typeof targetNode==="string"){targetNode=root.getNodeById(targetNode)}if(targetNode&&root.contains(targetNode)){return{node:targetNode}}var targetNodeId=payload.targetNodeId;if(targetNodeId!=null&&(targetNode=root.getNodeById(targetNodeId))){return{node:targetNode}}}}function getPathToRoot(node){var path=[];while(node){node=node.parentNode;node&&path.push(node)}return path.reverse()}function aboveViewRoot(viewRoot,node){var viewPath=getPathToRoot(viewRoot);return indexOf(viewPath,node)>=0}function wrapTreePathInfo(node,seriesModel){var treePathInfo=[];while(node){var nodeDataIndex=node.dataIndex;treePathInfo.push({name:node.name,dataIndex:nodeDataIndex,value:seriesModel.getRawValue(nodeDataIndex)});node=node.parentNode}treePathInfo.reverse();return treePathInfo}SeriesModel.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:Infinity,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:true,clipWindow:"origin",squareRatio:0.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:0.32*0.32,roam:true,nodeClick:"zoomToNode",animation:true,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:true,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:true,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:true},upperLabel:{show:false,position:[0,"50%"],height:20,color:"#fff",ellipsis:true,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:true,position:[0,"50%"],color:"#fff",ellipsis:true,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(option,ecModel){var root={name:option.name,children:option.data};
completeTreeValue(root);var levels=option.levels||[];levels=option.levels=setDefault(levels,ecModel);var treeOption={};treeOption.levels=levels;return Tree.createTree(root,this,treeOption).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(dataIndex){var data=this.getData();var value=this.getRawValue(dataIndex);var formattedValue=isArray(value)?addCommas(value[0]):addCommas(value);var name=data.getName(dataIndex);return encodeHTML(name+": "+formattedValue)},getDataParams:function(dataIndex){var params=SeriesModel.prototype.getDataParams.apply(this,arguments);var node=this.getData().tree.getNodeByDataIndex(dataIndex);params.treePathInfo=wrapTreePathInfo(node,this);return params},setLayoutInfo:function(layoutInfo){this.layoutInfo=this.layoutInfo||{};extend(this.layoutInfo,layoutInfo)},mapIdToIndex:function(id){var idIndexMap=this._idIndexMap;if(!idIndexMap){idIndexMap=this._idIndexMap=createHashMap();this._idIndexMapCount=0}var index=idIndexMap.get(id);if(index==null){idIndexMap.set(id,index=this._idIndexMapCount++)}return index},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(viewRoot){viewRoot?(this._viewRoot=viewRoot):(viewRoot=this._viewRoot);var root=this.getRawData().tree.root;if(!viewRoot||(viewRoot!==root&&!root.contains(viewRoot))){this._viewRoot=root}}});function completeTreeValue(dataNode){var sum=0;each$1(dataNode.children,function(child){completeTreeValue(child);var childValue=child.value;isArray(childValue)&&(childValue=childValue[0]);sum+=childValue});var thisValue=dataNode.value;if(isArray(thisValue)){thisValue=thisValue[0]}if(thisValue==null||isNaN(thisValue)){thisValue=sum}if(thisValue<0){thisValue=0}isArray(dataNode.value)?(dataNode.value[0]=thisValue):(dataNode.value=thisValue)}function setDefault(levels,ecModel){var globalColorList=ecModel.get("color");if(!globalColorList){return}levels=levels||[];var hasColorDefine;each$1(levels,function(levelDefine){var model=new Model(levelDefine);var modelColor=model.get("color");
if(model.get("itemStyle.color")||(modelColor&&modelColor!=="none")){hasColorDefine=true}});if(!hasColorDefine){var level0=levels[0]||(levels[0]={});level0.color=globalColorList.slice()}return levels}var TEXT_PADDING=8;var ITEM_GAP=8;var ARRAY_LENGTH=5;function Breadcrumb(containerGroup){this.group=new Group();containerGroup.add(this.group)}Breadcrumb.prototype={constructor:Breadcrumb,render:function(seriesModel,api,targetNode,onSelect){var model=seriesModel.getModel("breadcrumb");var thisGroup=this.group;thisGroup.removeAll();if(!model.get("show")||!targetNode){return}var normalStyleModel=model.getModel("itemStyle");var textStyleModel=normalStyleModel.getModel("textStyle");var layoutParam={pos:{left:model.get("left"),right:model.get("right"),top:model.get("top"),bottom:model.get("bottom")},box:{width:api.getWidth(),height:api.getHeight()},emptyItemWidth:model.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(targetNode,layoutParam,textStyleModel);this._renderContent(seriesModel,layoutParam,normalStyleModel,textStyleModel,onSelect);positionElement(thisGroup,layoutParam.pos,layoutParam.box)},_prepare:function(targetNode,layoutParam,textStyleModel){for(var node=targetNode;node;node=node.parentNode){var text=node.getModel().get("name");var textRect=textStyleModel.getTextRect(text);var itemWidth=Math.max(textRect.width+TEXT_PADDING*2,layoutParam.emptyItemWidth);layoutParam.totalWidth+=itemWidth+ITEM_GAP;layoutParam.renderList.push({node:node,text:text,width:itemWidth})}},_renderContent:function(seriesModel,layoutParam,normalStyleModel,textStyleModel,onSelect){var lastX=0;var emptyItemWidth=layoutParam.emptyItemWidth;var height=seriesModel.get("breadcrumb.height");var availableSize=getAvailableSize(layoutParam.pos,layoutParam.box);var totalWidth=layoutParam.totalWidth;var renderList=layoutParam.renderList;for(var i=renderList.length-1;i>=0;i--){var item=renderList[i];var itemNode=item.node;var itemWidth=item.width;var text=item.text;if(totalWidth>availableSize.width){totalWidth-=itemWidth-emptyItemWidth;
itemWidth=emptyItemWidth;text=null}var el=new Polygon({shape:{points:makeItemPoints(lastX,0,itemWidth,height,i===renderList.length-1,i===0)},style:defaults(normalStyleModel.getItemStyle(),{lineJoin:"bevel",text:text,textFill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()}),z:10,onclick:curry(onSelect,itemNode)});this.group.add(el);packEventData(el,seriesModel,itemNode);lastX+=itemWidth+ITEM_GAP}},remove:function(){this.group.removeAll()}};function makeItemPoints(x,y,itemWidth,itemHeight,head,tail){var points=[[head?x:x-ARRAY_LENGTH,y],[x+itemWidth,y],[x+itemWidth,y+itemHeight],[head?x:x-ARRAY_LENGTH,y+itemHeight]];!tail&&points.splice(2,0,[x+itemWidth+ARRAY_LENGTH,y+itemHeight/2]);!head&&points.push([x,y+itemHeight/2]);return points}function packEventData(el,seriesModel,itemNode){el.eventData={componentType:"series",componentSubType:"treemap",componentIndex:seriesModel.componentIndex,seriesIndex:seriesModel.componentIndex,seriesName:seriesModel.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:itemNode&&itemNode.dataIndex,name:itemNode&&itemNode.name},treePathInfo:itemNode&&wrapTreePathInfo(itemNode,seriesModel)}}function createWrap(){var storage=[];var elExistsMap={};var doneCallback;return{add:function(el,target,time,delay,easing){if(isString(delay)){easing=delay;delay=0}if(elExistsMap[el.id]){return false}elExistsMap[el.id]=1;storage.push({el:el,target:target,time:time,delay:delay,easing:easing});return true},done:function(callback){doneCallback=callback;return this},start:function(){var count=storage.length;for(var i=0,len=storage.length;i<len;i++){var item=storage[i];item.el.animateTo(item.target,item.time,item.delay,item.easing,done)}return this;function done(){count--;if(!count){storage.length=0;elExistsMap={};doneCallback&&doneCallback()}}}}}var bind$1=bind;var Group$2=Group;var Rect$1=Rect;var each$8=each$1;var DRAG_THRESHOLD=3;var PATH_LABEL_NOAMAL=["label"];var PATH_LABEL_EMPHASIS=["emphasis","label"];var PATH_UPPERLABEL_NORMAL=["upperLabel"];
var PATH_UPPERLABEL_EMPHASIS=["emphasis","upperLabel"];var Z_BASE=10;var Z_BG=1;var Z_CONTENT=2;var getItemStyleEmphasis=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);var getItemStyleNormal=function(model){var itemStyle=getItemStyleEmphasis(model);itemStyle.stroke=itemStyle.fill=itemStyle.lineWidth=null;return itemStyle};extendChartView({type:"treemap",init:function(o,api){this._containerGroup;this._storage=createStorage();this._oldTree;this._breadcrumb;this._controller;this._state="ready"},render:function(seriesModel,ecModel,api,payload){var models=ecModel.findComponents({mainType:"series",subType:"treemap",query:payload});if(indexOf(models,seriesModel)<0){return}this.seriesModel=seriesModel;this.api=api;this.ecModel=ecModel;var types=["treemapZoomToNode","treemapRootToNode"];var targetInfo=retrieveTargetInfo(payload,types,seriesModel);var payloadType=payload&&payload.type;var layoutInfo=seriesModel.layoutInfo;var isInit=!this._oldTree;var thisStorage=this._storage;var reRoot=(payloadType==="treemapRootToNode"&&targetInfo&&thisStorage)?{rootNodeGroup:thisStorage.nodeGroup[targetInfo.node.getRawIndex()],direction:payload.direction}:null;var containerGroup=this._giveContainerGroup(layoutInfo);var renderResult=this._doRender(containerGroup,seriesModel,reRoot);(!isInit&&(!payloadType||payloadType==="treemapZoomToNode"||payloadType==="treemapRootToNode"))?this._doAnimation(containerGroup,renderResult,seriesModel,reRoot):renderResult.renderFinally();this._resetController(api);this._renderBreadcrumb(seriesModel,api,targetInfo)},_giveContainerGroup:function(layoutInfo){var containerGroup=this._containerGroup;if(!containerGroup){containerGroup=this._containerGroup=new Group$2();this._initEvents(containerGroup);this.group.add(containerGroup)}containerGroup.attr("position",[layoutInfo.x,layoutInfo.y]);return containerGroup},_doRender:function(containerGroup,seriesModel,reRoot){var thisTree=seriesModel.getData().tree;
var oldTree=this._oldTree;var lastsForAnimation=createStorage();var thisStorage=createStorage();var oldStorage=this._storage;var willInvisibleEls=[];var doRenderNode=curry(renderNode,seriesModel,thisStorage,oldStorage,reRoot,lastsForAnimation,willInvisibleEls);dualTravel(thisTree.root?[thisTree.root]:[],(oldTree&&oldTree.root)?[oldTree.root]:[],containerGroup,thisTree===oldTree||!oldTree,0);var willDeleteEls=clearStorage(oldStorage);this._oldTree=thisTree;this._storage=thisStorage;return{lastsForAnimation:lastsForAnimation,willDeleteEls:willDeleteEls,renderFinally:renderFinally};function dualTravel(thisViewChildren,oldViewChildren,parentGroup,sameTree,depth){if(sameTree){oldViewChildren=thisViewChildren;each$8(thisViewChildren,function(child,index){!child.isRemoved()&&processNode(index,index)})}else{(new DataDiffer(oldViewChildren,thisViewChildren,getKey,getKey)).add(processNode).update(processNode).remove(curry(processNode,null)).execute()}function getKey(node){return node.getId()}function processNode(newIndex,oldIndex){var thisNode=newIndex!=null?thisViewChildren[newIndex]:null;var oldNode=oldIndex!=null?oldViewChildren[oldIndex]:null;var group=doRenderNode(thisNode,oldNode,parentGroup,depth);group&&dualTravel(thisNode&&thisNode.viewChildren||[],oldNode&&oldNode.viewChildren||[],group,sameTree,depth+1)}}function clearStorage(storage){var willDeleteEls=createStorage();storage&&each$8(storage,function(store,storageName){var delEls=willDeleteEls[storageName];each$8(store,function(el){el&&(delEls.push(el),el.__tmWillDelete=1)})});return willDeleteEls}function renderFinally(){each$8(willDeleteEls,function(els){each$8(els,function(el){el.parent&&el.parent.remove(el)})});each$8(willInvisibleEls,function(el){el.invisible=true;el.dirty()})}},_doAnimation:function(containerGroup,renderResult,seriesModel,reRoot){if(!seriesModel.get("animation")){return}var duration=seriesModel.get("animationDurationUpdate");var easing=seriesModel.get("animationEasing");var animationWrap=createWrap();
each$8(renderResult.willDeleteEls,function(store,storageName){each$8(store,function(el,rawIndex){if(el.invisible){return}var parent=el.parent;var target;if(reRoot&&reRoot.direction==="drillDown"){target=parent===reRoot.rootNodeGroup?{shape:{x:0,y:0,width:parent.__tmNodeWidth,height:parent.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}}}else{var targetX=0;var targetY=0;if(!parent.__tmWillDelete){targetX=parent.__tmNodeWidth/2;targetY=parent.__tmNodeHeight/2}target=storageName==="nodeGroup"?{position:[targetX,targetY],style:{opacity:0}}:{shape:{x:targetX,y:targetY,width:0,height:0},style:{opacity:0}}}target&&animationWrap.add(el,target,duration,easing)})});each$8(this._storage,function(store,storageName){each$8(store,function(el,rawIndex){var last=renderResult.lastsForAnimation[storageName][rawIndex];var target={};if(!last){return}if(storageName==="nodeGroup"){if(last.old){target.position=el.position.slice();el.attr("position",last.old)}}else{if(last.old){target.shape=extend({},el.shape);el.setShape(last.old)}if(last.fadein){el.setStyle("opacity",0);target.style={opacity:1}}else{if(el.style.opacity!==1){target.style={opacity:1}}}}animationWrap.add(el,target,duration,easing)})},this);this._state="animating";animationWrap.done(bind$1(function(){this._state="ready";renderResult.renderFinally()},this)).start()},_resetController:function(api){var controller=this._controller;if(!controller){controller=this._controller=new RoamController(api.getZr());controller.enable(this.seriesModel.get("roam"));controller.on("pan",bind$1(this._onPan,this));controller.on("zoom",bind$1(this._onZoom,this))}var rect=new BoundingRect(0,0,api.getWidth(),api.getHeight());controller.setPointerChecker(function(e,x,y){return rect.contain(x,y)})},_clearController:function(){var controller=this._controller;if(controller){controller.dispose();controller=null}},_onPan:function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>DRAG_THRESHOLD||Math.abs(e.dy)>DRAG_THRESHOLD)){var root=this.seriesModel.getData().tree.root;
if(!root){return}var rootLayout=root.getLayout();if(!rootLayout){return}this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:rootLayout.x+e.dx,y:rootLayout.y+e.dy,width:rootLayout.width,height:rootLayout.height}})}},_onZoom:function(e){var mouseX=e.originX;var mouseY=e.originY;if(this._state!=="animating"){var root=this.seriesModel.getData().tree.root;if(!root){return}var rootLayout=root.getLayout();if(!rootLayout){return}var rect=new BoundingRect(rootLayout.x,rootLayout.y,rootLayout.width,rootLayout.height);var layoutInfo=this.seriesModel.layoutInfo;mouseX-=layoutInfo.x;mouseY-=layoutInfo.y;var m=create$1();translate(m,m,[-mouseX,-mouseY]);scale$1(m,m,[e.scale,e.scale]);translate(m,m,[mouseX,mouseY]);rect.applyTransform(m);this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}})}},_initEvents:function(containerGroup){containerGroup.on("click",function(e){if(this._state!=="ready"){return}var nodeClick=this.seriesModel.get("nodeClick",true);if(!nodeClick){return}var targetInfo=this.findTarget(e.offsetX,e.offsetY);if(!targetInfo){return}var node=targetInfo.node;if(node.getLayout().isLeafRoot){this._rootToNode(targetInfo)}else{if(nodeClick==="zoomToNode"){this._zoomToNode(targetInfo)}else{if(nodeClick==="link"){var itemModel=node.hostTree.data.getItemModel(node.dataIndex);var link=itemModel.get("link",true);var linkTarget=itemModel.get("target",true)||"blank";link&&window.open(link,linkTarget)}}}},this)},_renderBreadcrumb:function(seriesModel,api,targetInfo){if(!targetInfo){targetInfo=seriesModel.get("leafDepth",true)!=null?{node:seriesModel.getViewRoot()}:this.findTarget(api.getWidth()/2,api.getHeight()/2);if(!targetInfo){targetInfo={node:seriesModel.getData().tree.root}}}(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(seriesModel,api,targetInfo.node,bind$1(onSelect,this));function onSelect(node){if(this._state!=="animating"){aboveViewRoot(seriesModel.getViewRoot(),node)?this._rootToNode({node:node}):this._zoomToNode({node:node})
}}},remove:function(){this._clearController();this._containerGroup&&this._containerGroup.removeAll();this._storage=createStorage();this._state="ready";this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(targetInfo){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:targetInfo.node})},_rootToNode:function(targetInfo){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:targetInfo.node})},findTarget:function(x,y){var targetInfo;var viewRoot=this.seriesModel.getViewRoot();viewRoot.eachNode({attr:"viewChildren",order:"preorder"},function(node){var bgEl=this._storage.background[node.getRawIndex()];if(bgEl){var point=bgEl.transformCoordToLocal(x,y);var shape=bgEl.shape;if(shape.x<=point[0]&&point[0]<=shape.x+shape.width&&shape.y<=point[1]&&point[1]<=shape.y+shape.height){targetInfo={node:node,offsetX:point[0],offsetY:point[1]}}else{return false}}},this);return targetInfo}});function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(seriesModel,thisStorage,oldStorage,reRoot,lastsForAnimation,willInvisibleEls,thisNode,oldNode,parentGroup,depth){if(!thisNode){return}var thisLayout=thisNode.getLayout();if(!thisLayout||!thisLayout.isInView){return}var thisWidth=thisLayout.width;var thisHeight=thisLayout.height;var borderWidth=thisLayout.borderWidth;var thisInvisible=thisLayout.invisible;var thisRawIndex=thisNode.getRawIndex();var oldRawIndex=oldNode&&oldNode.getRawIndex();var thisViewChildren=thisNode.viewChildren;var upperHeight=thisLayout.upperHeight;var isParent=thisViewChildren&&thisViewChildren.length;var itemStyleNormalModel=thisNode.getModel("itemStyle");var itemStyleEmphasisModel=thisNode.getModel("emphasis.itemStyle");var group=giveGraphic("nodeGroup",Group$2);if(!group){return}parentGroup.add(group);group.attr("position",[thisLayout.x||0,thisLayout.y||0]);group.__tmNodeWidth=thisWidth;
group.__tmNodeHeight=thisHeight;if(thisLayout.isAboveViewRoot){return group}var bg=giveGraphic("background",Rect$1,depth,Z_BG);bg&&renderBackground(group,bg,isParent&&thisLayout.upperHeight);if(!isParent){var content=giveGraphic("content",Rect$1,depth,Z_CONTENT);content&&renderContent(group,content)}return group;function renderBackground(group,bg,useUpperLabel){bg.dataIndex=thisNode.dataIndex;bg.seriesIndex=seriesModel.seriesIndex;bg.setShape({x:0,y:0,width:thisWidth,height:thisHeight});var visualBorderColor=thisNode.getVisual("borderColor",true);var emphasisBorderColor=itemStyleEmphasisModel.get("borderColor");updateStyle(bg,function(){var normalStyle=getItemStyleNormal(itemStyleNormalModel);normalStyle.fill=visualBorderColor;var emphasisStyle=getItemStyleEmphasis(itemStyleEmphasisModel);emphasisStyle.fill=emphasisBorderColor;if(useUpperLabel){var upperLabelWidth=thisWidth-2*borderWidth;prepareText(normalStyle,emphasisStyle,visualBorderColor,upperLabelWidth,upperHeight,{x:borderWidth,y:0,width:upperLabelWidth,height:upperHeight})}else{normalStyle.text=emphasisStyle.text=null}bg.setStyle(normalStyle);setHoverStyle(bg,emphasisStyle)});group.add(bg)}function renderContent(group,content){content.dataIndex=thisNode.dataIndex;content.seriesIndex=seriesModel.seriesIndex;var contentWidth=Math.max(thisWidth-2*borderWidth,0);var contentHeight=Math.max(thisHeight-2*borderWidth,0);content.culling=true;content.setShape({x:borderWidth,y:borderWidth,width:contentWidth,height:contentHeight});var visualColor=thisNode.getVisual("color",true);updateStyle(content,function(){var normalStyle=getItemStyleNormal(itemStyleNormalModel);normalStyle.fill=visualColor;var emphasisStyle=getItemStyleEmphasis(itemStyleEmphasisModel);prepareText(normalStyle,emphasisStyle,visualColor,contentWidth,contentHeight);content.setStyle(normalStyle);setHoverStyle(content,emphasisStyle)});group.add(content)}function updateStyle(element,cb){if(!thisInvisible){cb();if(!element.__tmWillVisible){element.invisible=false
}}else{!element.invisible&&willInvisibleEls.push(element)}}function prepareText(normalStyle,emphasisStyle,visualColor,width,height,upperLabelRect){var nodeModel=thisNode.getModel();var text=retrieve(seriesModel.getFormattedLabel(thisNode.dataIndex,"normal",null,null,upperLabelRect?"upperLabel":"label"),nodeModel.get("name"));if(!upperLabelRect&&thisLayout.isLeafRoot){var iconChar=seriesModel.get("drillDownIcon",true);text=iconChar?iconChar+" "+text:text}var normalLabelModel=nodeModel.getModel(upperLabelRect?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL);var emphasisLabelModel=nodeModel.getModel(upperLabelRect?PATH_UPPERLABEL_EMPHASIS:PATH_LABEL_EMPHASIS);var isShow=normalLabelModel.getShallow("show");setLabelStyle(normalStyle,emphasisStyle,normalLabelModel,emphasisLabelModel,{defaultText:isShow?text:null,autoColor:visualColor,isRectText:true});upperLabelRect&&(normalStyle.textRect=clone(upperLabelRect));normalStyle.truncate=(isShow&&normalLabelModel.get("ellipsis"))?{outerWidth:width,outerHeight:height,minChar:2}:null}function giveGraphic(storageName,Ctor,depth,z){var element=oldRawIndex!=null&&oldStorage[storageName][oldRawIndex];var lasts=lastsForAnimation[storageName];if(element){oldStorage[storageName][oldRawIndex]=null;prepareAnimationWhenHasOld(lasts,element,storageName)}else{if(!thisInvisible){element=new Ctor({z:calculateZ(depth,z)});element.__tmDepth=depth;element.__tmStorageName=storageName;prepareAnimationWhenNoOld(lasts,element,storageName)}}return(thisStorage[storageName][thisRawIndex]=element)}function prepareAnimationWhenHasOld(lasts,element,storageName){var lastCfg=lasts[thisRawIndex]={};lastCfg.old=storageName==="nodeGroup"?element.position.slice():extend({},element.shape)}function prepareAnimationWhenNoOld(lasts,element,storageName){var lastCfg=lasts[thisRawIndex]={};var parentNode=thisNode.parentNode;if(parentNode&&(!reRoot||reRoot.direction==="drillDown")){var parentOldX=0;var parentOldY=0;var parentOldBg=lastsForAnimation.background[parentNode.getRawIndex()];
if(!reRoot&&parentOldBg&&parentOldBg.old){parentOldX=parentOldBg.old.width;parentOldY=parentOldBg.old.height}lastCfg.old=storageName==="nodeGroup"?[0,parentOldY]:{x:parentOldX,y:parentOldY,width:0,height:0}}lastCfg.fadein=storageName!=="nodeGroup"}}function calculateZ(depth,zInLevel){var zb=depth*Z_BASE+zInLevel;return(zb-1)/zb}var noop$1=function(){};var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];for(var i$2=0;i$2<actionTypes.length;i$2++){registerAction({type:actionTypes[i$2],update:"updateView"},noop$1)}registerAction({type:"treemapRootToNode",update:"updateView"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"treemap",query:payload},handleRootToNode);function handleRootToNode(model,index){var types=["treemapZoomToNode","treemapRootToNode"];var targetInfo=retrieveTargetInfo(payload,types,model);if(targetInfo){var originViewRoot=model.getViewRoot();if(originViewRoot){payload.direction=aboveViewRoot(originViewRoot,targetInfo.node)?"rollUp":"drillDown"}model.resetViewRoot(targetInfo.node)}}});var each$9=each$1;var isObject$5=isObject$1;var CATEGORY_DEFAULT_VISUAL_INDEX=-1;var VisualMapping=function(option){var mappingMethod=option.mappingMethod;var visualType=option.type;var thisOption=this.option=clone(option);this.type=visualType;this.mappingMethod=mappingMethod;this._normalizeData=normalizers[mappingMethod];var visualHandler=visualHandlers[visualType];this.applyVisual=visualHandler.applyVisual;this.getColorMapper=visualHandler.getColorMapper;this._doMap=visualHandler._doMap[mappingMethod];if(mappingMethod==="piecewise"){normalizeVisualRange(thisOption);preprocessForPiecewise(thisOption)}else{if(mappingMethod==="category"){thisOption.categories?preprocessForSpecifiedCategory(thisOption):normalizeVisualRange(thisOption,true)}else{assert$1(mappingMethod!=="linear"||thisOption.dataExtent);normalizeVisualRange(thisOption)}}};VisualMapping.prototype={constructor:VisualMapping,mapValueToVisual:function(value){var normalized=this._normalizeData(value);
return this._doMap(normalized,value)},getNormalizer:function(){return bind(this._normalizeData,this)}};var visualHandlers=VisualMapping.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var thisOption=this.option;return bind(thisOption.mappingMethod==="category"?function(value,isNormalized){!isNormalized&&(value=this._normalizeData(value));return doMapCategory.call(this,value)}:function(value,isNormalized,out){var returnRGBArray=!!out;!isNormalized&&(value=this._normalizeData(value));out=fastLerp(value,thisOption.parsedVisual,out);return returnRGBArray?out:stringify(out,"rgba")},this)},_doMap:{linear:function(normalized){return stringify(fastLerp(normalized,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);if(result==null){result=stringify(fastLerp(normalized,this.option.parsedVisual),"rgba")}return result},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(color,value){return modifyHSL(color,value)}),colorSaturation:makePartialColorVisualHandler(function(color,value){return modifyHSL(color,null,value)}),colorLightness:makePartialColorVisualHandler(function(color,value){return modifyHSL(color,null,null,value)}),colorAlpha:makePartialColorVisualHandler(function(color,value){return modifyAlpha(color,value)}),opacity:{applyVisual:makeApplyVisual("opacity"),_doMap:makeDoMap([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_doMap:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(value,getter,setter){var symbolCfg=this.mapValueToVisual(value);if(isString(symbolCfg)){setter("symbol",symbolCfg)}else{if(isObject$5(symbolCfg)){for(var name in symbolCfg){if(symbolCfg.hasOwnProperty(name)){setter(name,symbolCfg[name])}}}}},_doMap:{linear:doMapToArray,category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);if(result==null){result=doMapToArray.call(this,normalized)
}return result},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_doMap:makeDoMap([0,1])}};function preprocessForPiecewise(thisOption){var pieceList=thisOption.pieceList;thisOption.hasSpecialVisual=false;each$1(pieceList,function(piece,index){piece.originIndex=index;if(piece.visual!=null){thisOption.hasSpecialVisual=true}})}function preprocessForSpecifiedCategory(thisOption){var categories=thisOption.categories;var visual=thisOption.visual;var categoryMap=thisOption.categoryMap={};each$9(categories,function(cate,index){categoryMap[cate]=index});if(!isArray(visual)){var visualArr=[];if(isObject$1(visual)){each$9(visual,function(v,cate){var index=categoryMap[cate];visualArr[index!=null?index:CATEGORY_DEFAULT_VISUAL_INDEX]=v})}else{visualArr[CATEGORY_DEFAULT_VISUAL_INDEX]=visual}visual=setVisualToOption(thisOption,visualArr)}for(var i=categories.length-1;i>=0;i--){if(visual[i]==null){delete categoryMap[categories[i]];categories.pop()}}}function normalizeVisualRange(thisOption,isCategory){var visual=thisOption.visual;var visualArr=[];if(isObject$1(visual)){each$9(visual,function(v){visualArr.push(v)})}else{if(visual!=null){visualArr.push(visual)}}var doNotNeedPair={color:1,symbol:1};if(!isCategory&&visualArr.length===1&&!doNotNeedPair.hasOwnProperty(thisOption.type)){visualArr[1]=visualArr[0]}setVisualToOption(thisOption,visualArr)}function makePartialColorVisualHandler(applyValue){return{applyVisual:function(value,getter,setter){value=this.mapValueToVisual(value);setter("color",applyValue(getter("color"),value))},_doMap:makeDoMap([0,1])}}function doMapToArray(normalized){var visual=this.option.visual;return visual[Math.round(linearMap(normalized,[0,1],[0,visual.length-1],true))]||{}}function makeApplyVisual(visualType){return function(value,getter,setter){setter(visualType,this.mapValueToVisual(value))}}function doMapCategory(normalized){var visual=this.option.visual;return visual[(this.option.loop&&normalized!==CATEGORY_DEFAULT_VISUAL_INDEX)?normalized%visual.length:normalized]
}function doMapFixed(){return this.option.visual[0]}function makeDoMap(sourceExtent){return{linear:function(normalized){return linearMap(normalized,sourceExtent,this.option.visual,true)},category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);if(result==null){result=linearMap(normalized,sourceExtent,this.option.visual,true)}return result},fixed:doMapFixed}}function getSpecifiedVisual(value){var thisOption=this.option;var pieceList=thisOption.pieceList;if(thisOption.hasSpecialVisual){var pieceIndex=VisualMapping.findPieceIndex(value,pieceList);var piece=pieceList[pieceIndex];if(piece&&piece.visual){return piece.visual[this.type]}}}function setVisualToOption(thisOption,visualArr){thisOption.visual=visualArr;if(thisOption.type==="color"){thisOption.parsedVisual=map(visualArr,function(item){return parse(item)})}return visualArr}var normalizers={linear:function(value){return linearMap(value,this.option.dataExtent,[0,1],true)},piecewise:function(value){var pieceList=this.option.pieceList;var pieceIndex=VisualMapping.findPieceIndex(value,pieceList,true);if(pieceIndex!=null){return linearMap(pieceIndex,[0,pieceList.length-1],[0,1],true)}},category:function(value){var index=this.option.categories?this.option.categoryMap[value]:value;return index==null?CATEGORY_DEFAULT_VISUAL_INDEX:index},fixed:noop};VisualMapping.listVisualTypes=function(){var visualTypes=[];each$1(visualHandlers,function(handler,key){visualTypes.push(key)});return visualTypes};VisualMapping.addVisualHandler=function(name,handler){visualHandlers[name]=handler};VisualMapping.isValidType=function(visualType){return visualHandlers.hasOwnProperty(visualType)};VisualMapping.eachVisual=function(visual,callback,context){if(isObject$1(visual)){each$1(visual,callback,context)}else{callback.call(context,visual)}};VisualMapping.mapVisual=function(visual,callback,context){var isPrimary;var newVisual=isArray(visual)?[]:isObject$1(visual)?{}:(isPrimary=true,null);VisualMapping.eachVisual(visual,function(v,key){var newVal=callback.call(context,v,key);
isPrimary?(newVisual=newVal):(newVisual[key]=newVal)});return newVisual};VisualMapping.retrieveVisuals=function(obj){var ret={};var hasVisual;obj&&each$9(visualHandlers,function(h,visualType){if(obj.hasOwnProperty(visualType)){ret[visualType]=obj[visualType];hasVisual=true}});return hasVisual?ret:null};VisualMapping.prepareVisualTypes=function(visualTypes){if(isObject$5(visualTypes)){var types=[];each$9(visualTypes,function(item,type){types.push(type)});visualTypes=types}else{if(isArray(visualTypes)){visualTypes=visualTypes.slice()}else{return[]}}visualTypes.sort(function(type1,type2){return(type2==="color"&&type1!=="color"&&type1.indexOf("color")===0)?1:-1});return visualTypes};VisualMapping.dependsOn=function(visualType1,visualType2){return visualType2==="color"?!!(visualType1&&visualType1.indexOf(visualType2)===0):visualType1===visualType2};VisualMapping.findPieceIndex=function(value,pieceList,findClosestWhenOutside){var possibleI;var abs=Infinity;for(var i=0,len=pieceList.length;i<len;i++){var pieceValue=pieceList[i].value;if(pieceValue!=null){if(pieceValue===value||(typeof pieceValue==="string"&&pieceValue===value+"")){return i}findClosestWhenOutside&&updatePossible(pieceValue,i)}}for(var i=0,len=pieceList.length;i<len;i++){var piece=pieceList[i];var interval=piece.interval;var close=piece.close;if(interval){if(interval[0]===-Infinity){if(littleThan(close[1],value,interval[1])){return i}}else{if(interval[1]===Infinity){if(littleThan(close[0],interval[0],value)){return i}}else{if(littleThan(close[0],interval[0],value)&&littleThan(close[1],value,interval[1])){return i}}}findClosestWhenOutside&&updatePossible(interval[0],i);findClosestWhenOutside&&updatePossible(interval[1],i)}}if(findClosestWhenOutside){return value===Infinity?pieceList.length-1:value===-Infinity?0:possibleI}function updatePossible(val,index){var newAbs=Math.abs(val-value);if(newAbs<abs){abs=newAbs;possibleI=index}}};function littleThan(close,a,b){return close?a<=b:a<b}var isArray$2=isArray;var ITEM_STYLE_NORMAL="itemStyle";
var treemapVisual={seriesType:"treemap",reset:function(seriesModel,ecModel,api,payload){var tree=seriesModel.getData().tree;var root=tree.root;var seriesItemStyleModel=seriesModel.getModel(ITEM_STYLE_NORMAL);if(root.isRemoved()){return}var levelItemStyles=map(tree.levelModels,function(levelModel){return levelModel?levelModel.get(ITEM_STYLE_NORMAL):null});travelTree(root,{},levelItemStyles,seriesItemStyleModel,seriesModel.getViewRoot().getAncestors(),seriesModel)}};function travelTree(node,designatedVisual,levelItemStyles,seriesItemStyleModel,viewRootAncestors,seriesModel){var nodeModel=node.getModel();var nodeLayout=node.getLayout();if(!nodeLayout||nodeLayout.invisible||!nodeLayout.isInView){return}var nodeItemStyleModel=node.getModel(ITEM_STYLE_NORMAL);var levelItemStyle=levelItemStyles[node.depth];var visuals=buildVisuals(nodeItemStyleModel,designatedVisual,levelItemStyle,seriesItemStyleModel);var borderColor=nodeItemStyleModel.get("borderColor");var borderColorSaturation=nodeItemStyleModel.get("borderColorSaturation");var thisNodeColor;if(borderColorSaturation!=null){thisNodeColor=calculateColor(visuals,node);borderColor=calculateBorderColor(borderColorSaturation,thisNodeColor)}node.setVisual("borderColor",borderColor);var viewChildren=node.viewChildren;if(!viewChildren||!viewChildren.length){thisNodeColor=calculateColor(visuals,node);node.setVisual("color",thisNodeColor)}else{var mapping=buildVisualMapping(node,nodeModel,nodeLayout,nodeItemStyleModel,visuals,viewChildren);each$1(viewChildren,function(child,index){if(child.depth>=viewRootAncestors.length||child===viewRootAncestors[child.depth]){var childVisual=mapVisual$1(nodeModel,visuals,child,index,mapping,seriesModel);travelTree(child,childVisual,levelItemStyles,seriesItemStyleModel,viewRootAncestors,seriesModel)}})}}function buildVisuals(nodeItemStyleModel,designatedVisual,levelItemStyle,seriesItemStyleModel){var visuals=extend({},designatedVisual);each$1(["color","colorAlpha","colorSaturation"],function(visualName){var val=nodeItemStyleModel.get(visualName,true);
val==null&&levelItemStyle&&(val=levelItemStyle[visualName]);val==null&&(val=designatedVisual[visualName]);val==null&&(val=seriesItemStyleModel.get(visualName));val!=null&&(visuals[visualName]=val)});return visuals}function calculateColor(visuals){var color=getValueVisualDefine(visuals,"color");if(color){var colorAlpha=getValueVisualDefine(visuals,"colorAlpha");var colorSaturation=getValueVisualDefine(visuals,"colorSaturation");if(colorSaturation){color=modifyHSL(color,null,null,colorSaturation)}if(colorAlpha){color=modifyAlpha(color,colorAlpha)}return color}}function calculateBorderColor(borderColorSaturation,thisNodeColor){return thisNodeColor!=null?modifyHSL(thisNodeColor,null,null,borderColorSaturation):null}function getValueVisualDefine(visuals,name){var value=visuals[name];if(value!=null&&value!=="none"){return value}}function buildVisualMapping(node,nodeModel,nodeLayout,nodeItemStyleModel,visuals,viewChildren){if(!viewChildren||!viewChildren.length){return}var rangeVisual=getRangeVisual(nodeModel,"color")||(visuals.color!=null&&visuals.color!=="none"&&(getRangeVisual(nodeModel,"colorAlpha")||getRangeVisual(nodeModel,"colorSaturation")));if(!rangeVisual){return}var visualMin=nodeModel.get("visualMin");var visualMax=nodeModel.get("visualMax");var dataExtent=nodeLayout.dataExtent.slice();visualMin!=null&&visualMin<dataExtent[0]&&(dataExtent[0]=visualMin);visualMax!=null&&visualMax>dataExtent[1]&&(dataExtent[1]=visualMax);var colorMappingBy=nodeModel.get("colorMappingBy");var opt={type:rangeVisual.name,dataExtent:dataExtent,visual:rangeVisual.range};if(opt.type==="color"&&(colorMappingBy==="index"||colorMappingBy==="id")){opt.mappingMethod="category";opt.loop=true}else{opt.mappingMethod="linear"}var mapping=new VisualMapping(opt);mapping.__drColorMappingBy=colorMappingBy;return mapping}function getRangeVisual(nodeModel,name){var range=nodeModel.get(name);return(isArray$2(range)&&range.length)?{name:name,range:range}:null}function mapVisual$1(nodeModel,visuals,child,index,mapping,seriesModel){var childVisuals=extend({},visuals);
if(mapping){var mappingType=mapping.type;var colorMappingBy=mappingType==="color"&&mapping.__drColorMappingBy;var value=colorMappingBy==="index"?index:colorMappingBy==="id"?seriesModel.mapIdToIndex(child.getId()):child.getValue(nodeModel.get("visualDimension"));childVisuals[mappingType]=mapping.mapValueToVisual(value)}return childVisuals}var mathMax$4=Math.max;var mathMin$4=Math.min;var retrieveValue=retrieve;var each$10=each$1;var PATH_BORDER_WIDTH=["itemStyle","borderWidth"];var PATH_GAP_WIDTH=["itemStyle","gapWidth"];var PATH_UPPER_LABEL_SHOW=["upperLabel","show"];var PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];var treemapLayout={seriesType:"treemap",reset:function(seriesModel,ecModel,api,payload){var ecWidth=api.getWidth();var ecHeight=api.getHeight();var seriesOption=seriesModel.option;var layoutInfo=getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()});var size=seriesOption.size||[];var containerWidth=parsePercent$1(retrieveValue(layoutInfo.width,size[0]),ecWidth);var containerHeight=parsePercent$1(retrieveValue(layoutInfo.height,size[1]),ecHeight);var payloadType=payload&&payload.type;var types=["treemapZoomToNode","treemapRootToNode"];var targetInfo=retrieveTargetInfo(payload,types,seriesModel);var rootRect=(payloadType==="treemapRender"||payloadType==="treemapMove")?payload.rootRect:null;var viewRoot=seriesModel.getViewRoot();var viewAbovePath=getPathToRoot(viewRoot);if(payloadType!=="treemapMove"){var rootSize=payloadType==="treemapZoomToNode"?estimateRootSize(seriesModel,targetInfo,viewRoot,containerWidth,containerHeight):rootRect?[rootRect.width,rootRect.height]:[containerWidth,containerHeight];var sort=seriesOption.sort;if(sort&&sort!=="asc"&&sort!=="desc"){sort="desc"}var options={squareRatio:seriesOption.squareRatio,sort:sort,leafDepth:seriesOption.leafDepth};viewRoot.hostTree.clearLayouts();var viewRootLayout={x:0,y:0,width:rootSize[0],height:rootSize[1],area:rootSize[0]*rootSize[1]};viewRoot.setLayout(viewRootLayout);
squarify(viewRoot,options,false,0);var viewRootLayout=viewRoot.getLayout();each$10(viewAbovePath,function(node,index){var childValue=(viewAbovePath[index+1]||viewRoot).getValue();node.setLayout(extend({dataExtent:[childValue,childValue],borderWidth:0,upperHeight:0},viewRootLayout))})}var treeRoot=seriesModel.getData().tree.root;treeRoot.setLayout(calculateRootPosition(layoutInfo,rootRect,targetInfo),true);seriesModel.setLayoutInfo(layoutInfo);prunning(treeRoot,new BoundingRect(-layoutInfo.x,-layoutInfo.y,ecWidth,ecHeight),viewAbovePath,viewRoot,0)}};function squarify(node,options,hideChildren,depth){var width;var height;if(node.isRemoved()){return}var thisLayout=node.getLayout();width=thisLayout.width;height=thisLayout.height;var nodeModel=node.getModel();var borderWidth=nodeModel.get(PATH_BORDER_WIDTH);var halfGapWidth=nodeModel.get(PATH_GAP_WIDTH)/2;var upperLabelHeight=getUpperLabelHeight(nodeModel);var upperHeight=Math.max(borderWidth,upperLabelHeight);var layoutOffset=borderWidth-halfGapWidth;var layoutOffsetUpper=upperHeight-halfGapWidth;var nodeModel=node.getModel();node.setLayout({borderWidth:borderWidth,upperHeight:upperHeight,upperLabelHeight:upperLabelHeight},true);width=mathMax$4(width-2*layoutOffset,0);height=mathMax$4(height-layoutOffset-layoutOffsetUpper,0);var totalArea=width*height;var viewChildren=initChildren(node,nodeModel,totalArea,options,hideChildren,depth);if(!viewChildren.length){return}var rect={x:layoutOffset,y:layoutOffsetUpper,width:width,height:height};var rowFixedLength=mathMin$4(width,height);var best=Infinity;var row=[];row.area=0;for(var i=0,len=viewChildren.length;i<len;){var child=viewChildren[i];row.push(child);row.area+=child.getLayout().area;var score=worst(row,rowFixedLength,options.squareRatio);if(score<=best){i++;best=score}else{row.area-=row.pop().getLayout().area;position(row,rowFixedLength,rect,halfGapWidth,false);rowFixedLength=mathMin$4(rect.width,rect.height);row.length=row.area=0;best=Infinity}}if(row.length){position(row,rowFixedLength,rect,halfGapWidth,true)
}if(!hideChildren){var childrenVisibleMin=nodeModel.get("childrenVisibleMin");if(childrenVisibleMin!=null&&totalArea<childrenVisibleMin){hideChildren=true}}for(var i=0,len=viewChildren.length;i<len;i++){squarify(viewChildren[i],options,hideChildren,depth+1)}}function initChildren(node,nodeModel,totalArea,options,hideChildren,depth){var viewChildren=node.children||[];var orderBy=options.sort;orderBy!=="asc"&&orderBy!=="desc"&&(orderBy=null);var overLeafDepth=options.leafDepth!=null&&options.leafDepth<=depth;if(hideChildren&&!overLeafDepth){return(node.viewChildren=[])}viewChildren=filter(viewChildren,function(child){return !child.isRemoved()});sort$1(viewChildren,orderBy);var info=statistic(nodeModel,viewChildren,orderBy);if(info.sum===0){return(node.viewChildren=[])}info.sum=filterByThreshold(nodeModel,totalArea,info.sum,orderBy,viewChildren);if(info.sum===0){return(node.viewChildren=[])}for(var i=0,len=viewChildren.length;i<len;i++){var area=viewChildren[i].getValue()/info.sum*totalArea;viewChildren[i].setLayout({area:area})}if(overLeafDepth){viewChildren.length&&node.setLayout({isLeafRoot:true},true);viewChildren.length=0}node.viewChildren=viewChildren;node.setLayout({dataExtent:info.dataExtent},true);return viewChildren}function filterByThreshold(nodeModel,totalArea,sum,orderBy,orderedChildren){if(!orderBy){return sum}var visibleMin=nodeModel.get("visibleMin");var len=orderedChildren.length;var deletePoint=len;for(var i=len-1;i>=0;i--){var value=orderedChildren[orderBy==="asc"?len-i-1:i].getValue();if(value/sum*totalArea<visibleMin){deletePoint=i;sum-=value}}orderBy==="asc"?orderedChildren.splice(0,len-deletePoint):orderedChildren.splice(deletePoint,len-deletePoint);return sum}function sort$1(viewChildren,orderBy){if(orderBy){viewChildren.sort(function(a,b){var diff=orderBy==="asc"?a.getValue()-b.getValue():b.getValue()-a.getValue();return diff===0?(orderBy==="asc"?a.dataIndex-b.dataIndex:b.dataIndex-a.dataIndex):diff})}return viewChildren}function statistic(nodeModel,children,orderBy){var sum=0;
for(var i=0,len=children.length;i<len;i++){sum+=children[i].getValue()}var dimension=nodeModel.get("visualDimension");var dataExtent;if(!children||!children.length){dataExtent=[NaN,NaN]}else{if(dimension==="value"&&orderBy){dataExtent=[children[children.length-1].getValue(),children[0].getValue()];orderBy==="asc"&&dataExtent.reverse()}else{var dataExtent=[Infinity,-Infinity];each$10(children,function(child){var value=child.getValue(dimension);value<dataExtent[0]&&(dataExtent[0]=value);value>dataExtent[1]&&(dataExtent[1]=value)})}}return{sum:sum,dataExtent:dataExtent}}function worst(row,rowFixedLength,ratio){var areaMax=0;var areaMin=Infinity;for(var i=0,area,len=row.length;i<len;i++){area=row[i].getLayout().area;if(area){area<areaMin&&(areaMin=area);area>areaMax&&(areaMax=area)}}var squareArea=row.area*row.area;var f=rowFixedLength*rowFixedLength*ratio;return squareArea?mathMax$4((f*areaMax)/squareArea,squareArea/(f*areaMin)):Infinity}function position(row,rowFixedLength,rect,halfGapWidth,flush){var idx0WhenH=rowFixedLength===rect.width?0:1;var idx1WhenH=1-idx0WhenH;var xy=["x","y"];var wh=["width","height"];var last=rect[xy[idx0WhenH]];var rowOtherLength=rowFixedLength?row.area/rowFixedLength:0;if(flush||rowOtherLength>rect[wh[idx1WhenH]]){rowOtherLength=rect[wh[idx1WhenH]]}for(var i=0,rowLen=row.length;i<rowLen;i++){var node=row[i];var nodeLayout={};var step=rowOtherLength?node.getLayout().area/rowOtherLength:0;var wh1=nodeLayout[wh[idx1WhenH]]=mathMax$4(rowOtherLength-2*halfGapWidth,0);var remain=rect[xy[idx0WhenH]]+rect[wh[idx0WhenH]]-last;var modWH=(i===rowLen-1||remain<step)?remain:step;var wh0=nodeLayout[wh[idx0WhenH]]=mathMax$4(modWH-2*halfGapWidth,0);nodeLayout[xy[idx1WhenH]]=rect[xy[idx1WhenH]]+mathMin$4(halfGapWidth,wh1/2);nodeLayout[xy[idx0WhenH]]=last+mathMin$4(halfGapWidth,wh0/2);last+=modWH;node.setLayout(nodeLayout,true)}rect[xy[idx1WhenH]]+=rowOtherLength;rect[wh[idx1WhenH]]-=rowOtherLength}function estimateRootSize(seriesModel,targetInfo,viewRoot,containerWidth,containerHeight){var currNode=(targetInfo||{}).node;
var defaultSize=[containerWidth,containerHeight];if(!currNode||currNode===viewRoot){return defaultSize}var parent;var viewArea=containerWidth*containerHeight;var area=viewArea*seriesModel.option.zoomToNodeRatio;while(parent=currNode.parentNode){var sum=0;var siblings=parent.children;for(var i=0,len=siblings.length;i<len;i++){sum+=siblings[i].getValue()}var currNodeValue=currNode.getValue();if(currNodeValue===0){return defaultSize}area*=sum/currNodeValue;var parentModel=parent.getModel();var borderWidth=parentModel.get(PATH_BORDER_WIDTH);var upperHeight=Math.max(borderWidth,getUpperLabelHeight(parentModel,borderWidth));area+=4*borderWidth*borderWidth+(3*borderWidth+upperHeight)*Math.pow(area,0.5);area>MAX_SAFE_INTEGER&&(area=MAX_SAFE_INTEGER);currNode=parent}area<viewArea&&(area=viewArea);var scale=Math.pow(area/viewArea,0.5);return[containerWidth*scale,containerHeight*scale]}function calculateRootPosition(layoutInfo,rootRect,targetInfo){if(rootRect){return{x:rootRect.x,y:rootRect.y}}var defaultPosition={x:0,y:0};if(!targetInfo){return defaultPosition}var targetNode=targetInfo.node;var layout=targetNode.getLayout();if(!layout){return defaultPosition}var targetCenter=[layout.width/2,layout.height/2];var node=targetNode;while(node){var nodeLayout=node.getLayout();targetCenter[0]+=nodeLayout.x;targetCenter[1]+=nodeLayout.y;node=node.parentNode}return{x:layoutInfo.width/2-targetCenter[0],y:layoutInfo.height/2-targetCenter[1]}}function prunning(node,clipRect,viewAbovePath,viewRoot,depth){var nodeLayout=node.getLayout();var nodeInViewAbovePath=viewAbovePath[depth];var isAboveViewRoot=nodeInViewAbovePath&&nodeInViewAbovePath===node;if((nodeInViewAbovePath&&!isAboveViewRoot)||(depth===viewAbovePath.length&&node!==viewRoot)){return}node.setLayout({isInView:true,invisible:!isAboveViewRoot&&!clipRect.intersect(nodeLayout),isAboveViewRoot:isAboveViewRoot},true);var childClipRect=new BoundingRect(clipRect.x-nodeLayout.x,clipRect.y-nodeLayout.y,clipRect.width,clipRect.height);each$10(node.viewChildren||[],function(child){prunning(child,childClipRect,viewAbovePath,viewRoot,depth+1)
})}function getUpperLabelHeight(model){return model.get(PATH_UPPER_LABEL_SHOW)?model.get(PATH_UPPER_LABEL_HEIGHT):0}registerVisual(treemapVisual);registerLayout(treemapLayout);function generateNodeKey(id){return"_EC_"+id}var Graph=function(directed){this._directed=directed||false;this.nodes=[];this.edges=[];this._nodesMap={};this._edgesMap={};this.data;this.edgeData};var graphProto=Graph.prototype;graphProto.type="graph";graphProto.isDirected=function(){return this._directed};graphProto.addNode=function(id,dataIndex){id=id||(""+dataIndex);var nodesMap=this._nodesMap;if(nodesMap[generateNodeKey(id)]){if(__DEV__){console.error("Graph nodes have duplicate name or id")}return}var node=new Node(id,dataIndex);node.hostGraph=this;this.nodes.push(node);nodesMap[generateNodeKey(id)]=node;return node};graphProto.getNodeByIndex=function(dataIndex){var rawIdx=this.data.getRawIndex(dataIndex);return this.nodes[rawIdx]};graphProto.getNodeById=function(id){return this._nodesMap[generateNodeKey(id)]};graphProto.addEdge=function(n1,n2,dataIndex){var nodesMap=this._nodesMap;var edgesMap=this._edgesMap;if(typeof n1==="number"){n1=this.nodes[n1]}if(typeof n2==="number"){n2=this.nodes[n2]}if(!Node.isInstance(n1)){n1=nodesMap[generateNodeKey(n1)]}if(!Node.isInstance(n2)){n2=nodesMap[generateNodeKey(n2)]}if(!n1||!n2){return}var key=n1.id+"-"+n2.id;if(edgesMap[key]){return}var edge=new Edge(n1,n2,dataIndex);edge.hostGraph=this;if(this._directed){n1.outEdges.push(edge);n2.inEdges.push(edge)}n1.edges.push(edge);if(n1!==n2){n2.edges.push(edge)}this.edges.push(edge);edgesMap[key]=edge;return edge};graphProto.getEdgeByIndex=function(dataIndex){var rawIdx=this.edgeData.getRawIndex(dataIndex);return this.edges[rawIdx]};graphProto.getEdge=function(n1,n2){if(Node.isInstance(n1)){n1=n1.id}if(Node.isInstance(n2)){n2=n2.id}var edgesMap=this._edgesMap;if(this._directed){return edgesMap[n1+"-"+n2]}else{return edgesMap[n1+"-"+n2]||edgesMap[n2+"-"+n1]}};graphProto.eachNode=function(cb,context){var nodes=this.nodes;
var len=nodes.length;for(var i=0;i<len;i++){if(nodes[i].dataIndex>=0){cb.call(context,nodes[i],i)}}};graphProto.eachEdge=function(cb,context){var edges=this.edges;var len=edges.length;for(var i=0;i<len;i++){if(edges[i].dataIndex>=0&&edges[i].node1.dataIndex>=0&&edges[i].node2.dataIndex>=0){cb.call(context,edges[i],i)}}};graphProto.breadthFirstTraverse=function(cb,startNode,direction,context){if(!Node.isInstance(startNode)){startNode=this._nodesMap[generateNodeKey(startNode)]}if(!startNode){return}var edgeType=direction==="out"?"outEdges":(direction==="in"?"inEdges":"edges");for(var i=0;i<this.nodes.length;i++){this.nodes[i].__visited=false}if(cb.call(context,startNode,null)){return}var queue=[startNode];while(queue.length){var currentNode=queue.shift();var edges=currentNode[edgeType];for(var i=0;i<edges.length;i++){var e=edges[i];var otherNode=e.node1===currentNode?e.node2:e.node1;if(!otherNode.__visited){if(cb.call(context,otherNode,currentNode)){return}queue.push(otherNode);otherNode.__visited=true}}}};graphProto.update=function(){var data=this.data;var edgeData=this.edgeData;var nodes=this.nodes;var edges=this.edges;for(var i=0,len=nodes.length;i<len;i++){nodes[i].dataIndex=-1}for(var i=0,len=data.count();i<len;i++){nodes[data.getRawIndex(i)].dataIndex=i}edgeData.filterSelf(function(idx){var edge=edges[edgeData.getRawIndex(idx)];return edge.node1.dataIndex>=0&&edge.node2.dataIndex>=0});for(var i=0,len=edges.length;i<len;i++){edges[i].dataIndex=-1}for(var i=0,len=edgeData.count();i<len;i++){edges[edgeData.getRawIndex(i)].dataIndex=i}};graphProto.clone=function(){var graph=new Graph(this._directed);var nodes=this.nodes;var edges=this.edges;for(var i=0;i<nodes.length;i++){graph.addNode(nodes[i].id,nodes[i].dataIndex)}for(var i=0;i<edges.length;i++){var e=edges[i];graph.addEdge(e.node1.id,e.node2.id,e.dataIndex)}return graph};function Node(id,dataIndex){this.id=id==null?"":id;this.inEdges=[];this.outEdges=[];this.edges=[];this.hostGraph;this.dataIndex=dataIndex==null?-1:dataIndex
}Node.prototype={constructor:Node,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(path){if(this.dataIndex<0){return}var graph=this.hostGraph;var itemModel=graph.data.getItemModel(this.dataIndex);return itemModel.getModel(path)}};function Edge(n1,n2,dataIndex){this.node1=n1;this.node2=n2;this.dataIndex=dataIndex==null?-1:dataIndex}Edge.prototype.getModel=function(path){if(this.dataIndex<0){return}var graph=this.hostGraph;var itemModel=graph.edgeData.getItemModel(this.dataIndex);return itemModel.getModel(path)};var createGraphDataProxyMixin=function(hostName,dataName){return{getValue:function(dimension){var data=this[hostName][dataName];return data.get(data.getDimension(dimension||"value"),this.dataIndex)},setVisual:function(key,value){this.dataIndex>=0&&this[hostName][dataName].setItemVisual(this.dataIndex,key,value)},getVisual:function(key,ignoreParent){return this[hostName][dataName].getItemVisual(this.dataIndex,key,ignoreParent)},setLayout:function(layout,merge$$1){this.dataIndex>=0&&this[hostName][dataName].setItemLayout(this.dataIndex,layout,merge$$1)},getLayout:function(){return this[hostName][dataName].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[hostName][dataName].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[hostName][dataName].getRawIndex(this.dataIndex)}}};mixin(Node,createGraphDataProxyMixin("hostGraph","data"));mixin(Edge,createGraphDataProxyMixin("hostGraph","edgeData"));Graph.Node=Node;Graph.Edge=Edge;enableClassCheck(Node);enableClassCheck(Edge);var createGraphFromNodeEdge=function(nodes,edges,seriesModel,directed,beforeLink){var graph=new Graph(directed);for(var i=0;i<nodes.length;i++){graph.addNode(retrieve(nodes[i].id,nodes[i].name,i),i)}var linkNameList=[];var validEdges=[];var linkCount=0;for(var i=0;i<edges.length;i++){var link=edges[i];var source=link.source;var target=link.target;if(graph.addEdge(source,target,linkCount)){validEdges.push(link);
linkNameList.push(retrieve(link.id,source+" > "+target));linkCount++}}var coordSys=seriesModel.get("coordinateSystem");var nodeData;if(coordSys==="cartesian2d"||coordSys==="polar"){nodeData=createListFromArray(nodes,seriesModel)}else{var coordSysCtor=CoordinateSystemManager.get(coordSys);var coordDimensions=(coordSysCtor&&coordSysCtor.type!=="view")?(coordSysCtor.dimensions||[]):[];if(indexOf(coordDimensions,"value")<0){coordDimensions.concat(["value"])}var dimensionNames=createDimensions(nodes,{coordDimensions:coordDimensions});nodeData=new List(dimensionNames,seriesModel);nodeData.initData(nodes)}var edgeData=new List(["value"],seriesModel);edgeData.initData(validEdges,linkNameList);beforeLink&&beforeLink(nodeData,edgeData);linkList({mainData:nodeData,struct:graph,structAttr:"graph",datas:{node:nodeData,edge:edgeData},datasAttr:{node:"data",edge:"edgeData"}});graph.update();return graph};var GraphSeries=extendSeriesModel({type:"series.graph",init:function(option){GraphSeries.superApply(this,"init",arguments);this.legendDataProvider=function(){return this._categoriesData};this.fillDataTextStyle(option.edges||option.links);this._updateCategoriesData()},mergeOption:function(option){GraphSeries.superApply(this,"mergeOption",arguments);this.fillDataTextStyle(option.edges||option.links);this._updateCategoriesData()},mergeDefaultAndTheme:function(option){GraphSeries.superApply(this,"mergeDefaultAndTheme",arguments);defaultEmphasis(option,["edgeLabel"],["show"])},getInitialData:function(option,ecModel){var edges=option.edges||option.links||[];var nodes=option.data||option.nodes||[];var self=this;if(nodes&&edges){return createGraphFromNodeEdge(nodes,edges,this,true,beforeLink).data}function beforeLink(nodeData,edgeData){nodeData.wrapMethod("getItemModel",function(model){var categoriesModels=self._categoriesModels;var categoryIdx=model.getShallow("category");var categoryModel=categoriesModels[categoryIdx];if(categoryModel){categoryModel.parentModel=model.parentModel;model.parentModel=categoryModel
}return model});var edgeLabelModel=self.getModel("edgeLabel");var fakeSeriesModel=new Model({label:edgeLabelModel.option},edgeLabelModel.parentModel,ecModel);var emphasisEdgeLabelModel=self.getModel("emphasis.edgeLabel");var emphasisFakeSeriesModel=new Model({emphasis:{label:emphasisEdgeLabelModel.option}},emphasisEdgeLabelModel.parentModel,ecModel);edgeData.wrapMethod("getItemModel",function(model){model.customizeGetParent(edgeGetParent);return model});function edgeGetParent(path){path=this.parsePath(path);return(path&&path[0]==="label")?fakeSeriesModel:(path&&path[0]==="emphasis"&&path[1]==="label")?emphasisFakeSeriesModel:this.parentModel}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(dataIndex,multipleSeries,dataType){if(dataType==="edge"){var nodeData=this.getData();var params=this.getDataParams(dataIndex,dataType);var edge=nodeData.graph.getEdgeByIndex(dataIndex);var sourceName=nodeData.getName(edge.node1.dataIndex);var targetName=nodeData.getName(edge.node2.dataIndex);var html=[];sourceName!=null&&html.push(sourceName);targetName!=null&&html.push(targetName);html=encodeHTML(html.join(" > "));if(params.value){html+=" : "+encodeHTML(params.value)}return html}else{return GraphSeries.superApply(this,"formatTooltip",arguments)}},_updateCategoriesData:function(){var categories=map(this.option.categories||[],function(category){return category.value!=null?category:extend({value:0},category)});var categoriesData=new List(["value"],this);categoriesData.initData(categories);this._categoriesData=categoriesData;this._categoriesModels=categoriesData.mapArray(function(idx){return categoriesData.getItemModel(idx,true)})},setZoom:function(zoom){this.option.zoom=zoom},setCenter:function(center){this.option.center=center},isAnimationEnabled:function(){return GraphSeries.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))
},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:true,hoverAnimation:true,layout:null,focusNodeAdjacency:false,circular:{rotateLabel:false},force:{initLayout:null,repulsion:[0,50],gravity:0.1,edgeLength:30,layoutAnimation:true},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle"},draggable:false,roam:false,center:null,zoom:1,nodeScaleRatio:0.6,label:{show:false,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,curveness:0,opacity:0.5},emphasis:{label:{show:true}}}});var straightLineProto=Line.prototype;var bezierCurveProto=BezierCurve.prototype;function isLine(shape){return isNaN(+shape.cpx1)||isNaN(+shape.cpy1)}var LinePath=extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(ctx,shape){(isLine(shape)?straightLineProto:bezierCurveProto).buildPath(ctx,shape)},pointAt:function(t){return isLine(this.shape)?straightLineProto.pointAt.call(this,t):bezierCurveProto.pointAt.call(this,t)},tangentAt:function(t){var shape=this.shape;var p=isLine(shape)?[shape.x2-shape.x1,shape.y2-shape.y1]:bezierCurveProto.tangentAt.call(this,t);return normalize(p,p)}});var SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(symbolCategory){return"_"+symbolCategory+"Type"}function createSymbol$1(name,lineData,idx){var color=lineData.getItemVisual(idx,"color");var symbolType=lineData.getItemVisual(idx,name);var symbolSize=lineData.getItemVisual(idx,name+"Size");if(!symbolType||symbolType==="none"){return}if(!isArray(symbolSize)){symbolSize=[symbolSize,symbolSize]}var symbolPath=createSymbol(symbolType,-symbolSize[0]/2,-symbolSize[1]/2,symbolSize[0],symbolSize[1],color);symbolPath.name=name;return symbolPath}function createLine(points){var line=new LinePath({name:"line"});setLinePoints(line.shape,points);return line}function setLinePoints(targetShape,points){var p1=points[0];var p2=points[1];
var cp1=points[2];targetShape.x1=p1[0];targetShape.y1=p1[1];targetShape.x2=p2[0];targetShape.y2=p2[1];targetShape.percent=1;if(cp1){targetShape.cpx1=cp1[0];targetShape.cpy1=cp1[1]}else{targetShape.cpx1=NaN;targetShape.cpy1=NaN}}function updateSymbolAndLabelBeforeLineUpdate(){var lineGroup=this;var symbolFrom=lineGroup.childOfName("fromSymbol");var symbolTo=lineGroup.childOfName("toSymbol");var label=lineGroup.childOfName("label");if(!symbolFrom&&!symbolTo&&label.ignore){return}var invScale=1;var parentNode=this.parent;while(parentNode){if(parentNode.scale){invScale/=parentNode.scale[0]}parentNode=parentNode.parent}var line=lineGroup.childOfName("line");if(!this.__dirty&&!line.__dirty){return}var percent=line.shape.percent;var fromPos=line.pointAt(0);var toPos=line.pointAt(percent);var d=sub([],toPos,fromPos);normalize(d,d);if(symbolFrom){symbolFrom.attr("position",fromPos);var tangent=line.tangentAt(0);symbolFrom.attr("rotation",Math.PI/2-Math.atan2(tangent[1],tangent[0]));symbolFrom.attr("scale",[invScale*percent,invScale*percent])}if(symbolTo){symbolTo.attr("position",toPos);var tangent=line.tangentAt(1);symbolTo.attr("rotation",-Math.PI/2-Math.atan2(tangent[1],tangent[0]));symbolTo.attr("scale",[invScale*percent,invScale*percent])}if(!label.ignore){label.attr("position",toPos);var textPosition;var textAlign;var textVerticalAlign;var distance$$1=5*invScale;if(label.__position==="end"){textPosition=[d[0]*distance$$1+toPos[0],d[1]*distance$$1+toPos[1]];textAlign=d[0]>0.8?"left":(d[0]<-0.8?"right":"center");textVerticalAlign=d[1]>0.8?"top":(d[1]<-0.8?"bottom":"middle")}else{if(label.__position==="middle"){var halfPercent=percent/2;var tangent=line.tangentAt(halfPercent);var n=[tangent[1],-tangent[0]];var cp=line.pointAt(halfPercent);if(n[1]>0){n[0]=-n[0];n[1]=-n[1]}textPosition=[cp[0]+n[0]*distance$$1,cp[1]+n[1]*distance$$1];textAlign="center";textVerticalAlign="bottom";var rotation=-Math.atan2(tangent[1],tangent[0]);if(toPos[0]<fromPos[0]){rotation=Math.PI+rotation}label.attr("rotation",rotation)
}else{textPosition=[-d[0]*distance$$1+fromPos[0],-d[1]*distance$$1+fromPos[1]];textAlign=d[0]>0.8?"right":(d[0]<-0.8?"left":"center");textVerticalAlign=d[1]>0.8?"bottom":(d[1]<-0.8?"top":"middle")}}label.attr({style:{textVerticalAlign:label.__verticalAlign||textVerticalAlign,textAlign:label.__textAlign||textAlign},position:textPosition,scale:[invScale,invScale]})}}function Line$1(lineData,idx,seriesScope){Group.call(this);this._createLine(lineData,idx,seriesScope)}var lineProto=Line$1.prototype;lineProto.beforeUpdate=updateSymbolAndLabelBeforeLineUpdate;lineProto._createLine=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel;var linePoints=lineData.getItemLayout(idx);var line=createLine(linePoints);line.shape.percent=0;initProps(line,{shape:{percent:1}},seriesModel,idx);this.add(line);var label=new Text({name:"label",lineLabelOriginalOpacity:1});this.add(label);each$1(SYMBOL_CATEGORIES,function(symbolCategory){var symbol=createSymbol$1(symbolCategory,lineData,idx);this.add(symbol);this[makeSymbolTypeKey(symbolCategory)]=lineData.getItemVisual(idx,symbolCategory)},this);this._updateCommonStl(lineData,idx,seriesScope)};lineProto.updateData=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel;var line=this.childOfName("line");var linePoints=lineData.getItemLayout(idx);var target={shape:{}};setLinePoints(target.shape,linePoints);updateProps(line,target,seriesModel,idx);each$1(SYMBOL_CATEGORIES,function(symbolCategory){var symbolType=lineData.getItemVisual(idx,symbolCategory);var key=makeSymbolTypeKey(symbolCategory);if(this[key]!==symbolType){this.remove(this.childOfName(symbolCategory));var symbol=createSymbol$1(symbolCategory,lineData,idx);this.add(symbol)}this[key]=symbolType},this);this._updateCommonStl(lineData,idx,seriesScope)};lineProto._updateCommonStl=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel;var line=this.childOfName("line");var lineStyle=seriesScope&&seriesScope.lineStyle;var hoverLineStyle=seriesScope&&seriesScope.hoverLineStyle;
var labelModel=seriesScope&&seriesScope.labelModel;var hoverLabelModel=seriesScope&&seriesScope.hoverLabelModel;if(!seriesScope||lineData.hasItemOption){var itemModel=lineData.getItemModel(idx);lineStyle=itemModel.getModel("lineStyle").getLineStyle();hoverLineStyle=itemModel.getModel("emphasis.lineStyle").getLineStyle();labelModel=itemModel.getModel("label");hoverLabelModel=itemModel.getModel("emphasis.label")}var visualColor=lineData.getItemVisual(idx,"color");var visualOpacity=retrieve3(lineData.getItemVisual(idx,"opacity"),lineStyle.opacity,1);line.useStyle(defaults({strokeNoScale:true,fill:"none",stroke:visualColor,opacity:visualOpacity},lineStyle));line.hoverStyle=hoverLineStyle;each$1(SYMBOL_CATEGORIES,function(symbolCategory){var symbol=this.childOfName(symbolCategory);if(symbol){symbol.setColor(visualColor);symbol.setStyle({opacity:visualOpacity})}},this);var showLabel=labelModel.getShallow("show");var hoverShowLabel=hoverLabelModel.getShallow("show");var label=this.childOfName("label");var defaultLabelColor;var baseText;if(showLabel||hoverShowLabel){defaultLabelColor=visualColor||"#000";baseText=seriesModel.getFormattedLabel(idx,"normal",lineData.dataType);if(baseText==null){var rawVal=seriesModel.getRawValue(idx);baseText=rawVal==null?lineData.getName(idx):isFinite(rawVal)?round$2(rawVal):rawVal}}var normalText=showLabel?baseText:null;var emphasisText=hoverShowLabel?retrieve2(seriesModel.getFormattedLabel(idx,"emphasis",lineData.dataType),baseText):null;var labelStyle=label.style;if(normalText!=null||emphasisText!=null){setTextStyle(label.style,labelModel,{text:normalText},{autoColor:defaultLabelColor});label.__textAlign=labelStyle.textAlign;label.__verticalAlign=labelStyle.textVerticalAlign;label.__position=labelModel.get("position")||"middle"}if(emphasisText!=null){label.hoverStyle={text:emphasisText,textFill:hoverLabelModel.getTextColor(true),fontStyle:hoverLabelModel.getShallow("fontStyle"),fontWeight:hoverLabelModel.getShallow("fontWeight"),fontSize:hoverLabelModel.getShallow("fontSize"),fontFamily:hoverLabelModel.getShallow("fontFamily")}
}else{label.hoverStyle={text:null}}label.ignore=!showLabel&&!hoverShowLabel;setHoverStyle(this)};lineProto.highlight=function(){this.trigger("emphasis")};lineProto.downplay=function(){this.trigger("normal")};lineProto.updateLayout=function(lineData,idx){this.setLinePoints(lineData.getItemLayout(idx))};lineProto.setLinePoints=function(points){var linePath=this.childOfName("line");setLinePoints(linePath.shape,points);linePath.dirty()};inherits(Line$1,Group);function LineDraw(ctor){this._ctor=ctor||Line$1;this.group=new Group()}var lineDrawProto=LineDraw.prototype;lineDrawProto.isPersistent=function(){return true};lineDrawProto.updateData=function(lineData){var lineDraw=this;var group=lineDraw.group;var oldLineData=lineDraw._lineData;lineDraw._lineData=lineData;if(!oldLineData){group.removeAll()}var seriesScope=makeSeriesScope$1(lineData);lineData.diff(oldLineData).add(function(idx){doAdd(lineDraw,lineData,idx,seriesScope)}).update(function(newIdx,oldIdx){doUpdate(lineDraw,oldLineData,lineData,oldIdx,newIdx,seriesScope)}).remove(function(idx){group.remove(oldLineData.getItemGraphicEl(idx))}).execute()};function doAdd(lineDraw,lineData,idx,seriesScope){var itemLayout=lineData.getItemLayout(idx);if(!lineNeedsDraw(itemLayout)){return}var el=new lineDraw._ctor(lineData,idx,seriesScope);lineData.setItemGraphicEl(idx,el);lineDraw.group.add(el)}function doUpdate(lineDraw,oldLineData,newLineData,oldIdx,newIdx,seriesScope){var itemEl=oldLineData.getItemGraphicEl(oldIdx);if(!lineNeedsDraw(newLineData.getItemLayout(newIdx))){lineDraw.group.remove(itemEl);return}if(!itemEl){itemEl=new lineDraw._ctor(newLineData,newIdx,seriesScope)}else{itemEl.updateData(newLineData,newIdx,seriesScope)}newLineData.setItemGraphicEl(newIdx,itemEl);lineDraw.group.add(itemEl)}lineDrawProto.updateLayout=function(){var lineData=this._lineData;if(!lineData){return}lineData.eachItemGraphicEl(function(el,idx){el.updateLayout(lineData,idx)},this)};lineDrawProto.incrementalPrepareUpdate=function(lineData){this._seriesScope=makeSeriesScope$1(lineData);
this._lineData=null;this.group.removeAll()};lineDrawProto.incrementalUpdate=function(taskParams,lineData){function updateIncrementalAndHover(el){if(!el.isGroup){el.incremental=el.useHoverLayer=true}}for(var idx=taskParams.start;idx<taskParams.end;idx++){var itemLayout=lineData.getItemLayout(idx);if(lineNeedsDraw(itemLayout)){var el=new this._ctor(lineData,idx,this._seriesScope);el.traverse(updateIncrementalAndHover);this.group.add(el);lineData.setItemGraphicEl(idx,el)}}};function makeSeriesScope$1(lineData){var hostModel=lineData.hostModel;return{lineStyle:hostModel.getModel("lineStyle").getLineStyle(),hoverLineStyle:hostModel.getModel("emphasis.lineStyle").getLineStyle(),labelModel:hostModel.getModel("label"),hoverLabelModel:hostModel.getModel("emphasis.label")}}lineDrawProto.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};lineDrawProto._clearIncremental=function(){var incremental=this._incremental;if(incremental){incremental.clearDisplaybles()}};function isPointNaN(pt){return isNaN(pt[0])||isNaN(pt[1])}function lineNeedsDraw(pts){return !isPointNaN(pts[0])&&!isPointNaN(pts[1])}var v1=[];var v2=[];var v3=[];var quadraticAt$1=quadraticAt;var v2DistSquare=distSquare;var mathAbs$1=Math.abs;function intersectCurveCircle(curvePoints,center,radius){var p0=curvePoints[0];var p1=curvePoints[1];var p2=curvePoints[2];var d=Infinity;var t;var radiusSquare=radius*radius;var interval=0.1;for(var _t=0.1;_t<=0.9;_t+=0.1){v1[0]=quadraticAt$1(p0[0],p1[0],p2[0],_t);v1[1]=quadraticAt$1(p0[1],p1[1],p2[1],_t);var diff=mathAbs$1(v2DistSquare(v1,center)-radiusSquare);if(diff<d){d=diff;t=_t}}for(var i=0;i<32;i++){var next=t+interval;v2[0]=quadraticAt$1(p0[0],p1[0],p2[0],t);v2[1]=quadraticAt$1(p0[1],p1[1],p2[1],t);v3[0]=quadraticAt$1(p0[0],p1[0],p2[0],next);v3[1]=quadraticAt$1(p0[1],p1[1],p2[1],next);var diff=v2DistSquare(v2,center)-radiusSquare;if(mathAbs$1(diff)<0.01){break}var nextDiff=v2DistSquare(v3,center)-radiusSquare;interval/=2;if(diff<0){if(nextDiff>=0){t=t+interval
}else{t=t-interval}}else{if(nextDiff>=0){t=t-interval}else{t=t+interval}}}return t}var adjustEdge=function(graph,scale$$1){var tmp0=[];var quadraticSubdivide$$1=quadraticSubdivide;var pts=[[],[],[]];var pts2=[[],[]];var v=[];scale$$1/=2;function getSymbolSize(node){var symbolSize=node.getVisual("symbolSize");if(symbolSize instanceof Array){symbolSize=(symbolSize[0]+symbolSize[1])/2}return symbolSize}graph.eachEdge(function(edge,idx){var linePoints=edge.getLayout();var fromSymbol=edge.getVisual("fromSymbol");var toSymbol=edge.getVisual("toSymbol");if(!linePoints.__original){linePoints.__original=[clone$1(linePoints[0]),clone$1(linePoints[1])];if(linePoints[2]){linePoints.__original.push(clone$1(linePoints[2]))}}var originalPoints=linePoints.__original;if(linePoints[2]!=null){copy(pts[0],originalPoints[0]);copy(pts[1],originalPoints[2]);copy(pts[2],originalPoints[1]);if(fromSymbol&&fromSymbol!=="none"){var symbolSize=getSymbolSize(edge.node1);var t=intersectCurveCircle(pts,originalPoints[0],symbolSize*scale$$1);quadraticSubdivide$$1(pts[0][0],pts[1][0],pts[2][0],t,tmp0);pts[0][0]=tmp0[3];pts[1][0]=tmp0[4];quadraticSubdivide$$1(pts[0][1],pts[1][1],pts[2][1],t,tmp0);pts[0][1]=tmp0[3];pts[1][1]=tmp0[4]}if(toSymbol&&toSymbol!=="none"){var symbolSize=getSymbolSize(edge.node2);var t=intersectCurveCircle(pts,originalPoints[1],symbolSize*scale$$1);quadraticSubdivide$$1(pts[0][0],pts[1][0],pts[2][0],t,tmp0);pts[1][0]=tmp0[1];pts[2][0]=tmp0[2];quadraticSubdivide$$1(pts[0][1],pts[1][1],pts[2][1],t,tmp0);pts[1][1]=tmp0[1];pts[2][1]=tmp0[2]}copy(linePoints[0],pts[0]);copy(linePoints[1],pts[2]);copy(linePoints[2],pts[1])}else{copy(pts2[0],originalPoints[0]);copy(pts2[1],originalPoints[1]);sub(v,pts2[1],pts2[0]);normalize(v,v);if(fromSymbol&&fromSymbol!=="none"){var symbolSize=getSymbolSize(edge.node1);scaleAndAdd(pts2[0],pts2[0],v,symbolSize*scale$$1)}if(toSymbol&&toSymbol!=="none"){var symbolSize=getSymbolSize(edge.node2);scaleAndAdd(pts2[1],pts2[1],v,-symbolSize*scale$$1)}copy(linePoints[0],pts2[0]);
copy(linePoints[1],pts2[1])}})};var FOCUS_ADJACENCY="__focusNodeAdjacency";var UNFOCUS_ADJACENCY="__unfocusNodeAdjacency";var nodeOpacityPath=["itemStyle","opacity"];var lineOpacityPath=["lineStyle","opacity"];function getItemOpacity(item,opacityPath){return item.getVisual("opacity")||item.getModel().get(opacityPath)}function fadeOutItem(item,opacityPath,opacityRatio){var el=item.getGraphicEl();var opacity=getItemOpacity(item,opacityPath);if(opacityRatio!=null){opacity==null&&(opacity=1);opacity*=opacityRatio}el.downplay&&el.downplay();el.traverse(function(child){if(child.type!=="group"){var opct=child.lineLabelOriginalOpacity;if(opct==null||opacityRatio!=null){opct=opacity}child.setStyle("opacity",opct)}})}function fadeInItem(item,opacityPath){var opacity=getItemOpacity(item,opacityPath);var el=item.getGraphicEl();el.highlight&&el.highlight();el.traverse(function(child){if(child.type!=="group"){child.setStyle("opacity",opacity)}})}extendChartView({type:"graph",init:function(ecModel,api){var symbolDraw=new SymbolDraw();var lineDraw=new LineDraw();var group=this.group;this._controller=new RoamController(api.getZr());this._controllerHost={target:group};group.add(symbolDraw.group);group.add(lineDraw.group);this._symbolDraw=symbolDraw;this._lineDraw=lineDraw;this._firstRender=true},render:function(seriesModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;this._model=seriesModel;this._nodeScaleRatio=seriesModel.get("nodeScaleRatio");var symbolDraw=this._symbolDraw;var lineDraw=this._lineDraw;var group=this.group;if(coordSys.type==="view"){var groupNewProp={position:coordSys.position,scale:coordSys.scale};if(this._firstRender){group.attr(groupNewProp)}else{updateProps(group,groupNewProp,seriesModel)}}adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel));var data=seriesModel.getData();symbolDraw.updateData(data);var edgeData=seriesModel.getEdgeData();lineDraw.updateData(edgeData);this._updateNodeAndLinkScale();this._updateController(seriesModel,ecModel,api);
clearTimeout(this._layoutTimeout);var forceLayout=seriesModel.forceLayout;var layoutAnimation=seriesModel.get("force.layoutAnimation");if(forceLayout){this._startForceLayoutIteration(forceLayout,layoutAnimation)}data.eachItemGraphicEl(function(el,idx){var itemModel=data.getItemModel(idx);el.off("drag").off("dragend");var draggable=itemModel.get("draggable");if(draggable){el.on("drag",function(){if(forceLayout){forceLayout.warmUp();!this._layouting&&this._startForceLayoutIteration(forceLayout,layoutAnimation);forceLayout.setFixed(idx);data.setItemLayout(idx,el.position)}},this).on("dragend",function(){if(forceLayout){forceLayout.setUnfixed(idx)}},this)}el.setDraggable(draggable&&forceLayout);el[FOCUS_ADJACENCY]&&el.off("mouseover",el[FOCUS_ADJACENCY]);el[UNFOCUS_ADJACENCY]&&el.off("mouseout",el[UNFOCUS_ADJACENCY]);if(itemModel.get("focusNodeAdjacency")){el.on("mouseover",el[FOCUS_ADJACENCY]=function(){api.dispatchAction({type:"focusNodeAdjacency",seriesId:seriesModel.id,dataIndex:el.dataIndex})});el.on("mouseout",el[UNFOCUS_ADJACENCY]=function(){api.dispatchAction({type:"unfocusNodeAdjacency",seriesId:seriesModel.id})})}},this);data.graph.eachEdge(function(edge){var el=edge.getGraphicEl();el[FOCUS_ADJACENCY]&&el.off("mouseover",el[FOCUS_ADJACENCY]);el[UNFOCUS_ADJACENCY]&&el.off("mouseout",el[UNFOCUS_ADJACENCY]);if(edge.getModel().get("focusNodeAdjacency")){el.on("mouseover",el[FOCUS_ADJACENCY]=function(){api.dispatchAction({type:"focusNodeAdjacency",seriesId:seriesModel.id,edgeDataIndex:edge.dataIndex})});el.on("mouseout",el[UNFOCUS_ADJACENCY]=function(){api.dispatchAction({type:"unfocusNodeAdjacency",seriesId:seriesModel.id})})}});var circularRotateLabel=seriesModel.get("layout")==="circular"&&seriesModel.get("circular.rotateLabel");var cx=data.getLayout("cx");var cy=data.getLayout("cy");data.eachItemGraphicEl(function(el,idx){var symbolPath=el.getSymbolPath();if(circularRotateLabel){var pos=data.getItemLayout(idx);var rad=Math.atan2(pos[1]-cy,pos[0]-cx);if(rad<0){rad=Math.PI*2+rad
}var isLeft=pos[0]<cx;if(isLeft){rad=rad-Math.PI}var textPosition=isLeft?"left":"right";symbolPath.setStyle({textRotation:-rad,textPosition:textPosition,textOrigin:"center"});symbolPath.hoverStyle&&(symbolPath.hoverStyle.textPosition=textPosition)}else{symbolPath.setStyle({textRotation:0})}});this._firstRender=false},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},focusNodeAdjacency:function(seriesModel,ecModel,api,payload){var data=this._model.getData();var graph=data.graph;var dataIndex=payload.dataIndex;var edgeDataIndex=payload.edgeDataIndex;var node=graph.getNodeByIndex(dataIndex);var edge=graph.getEdgeByIndex(edgeDataIndex);if(!node&&!edge){return}graph.eachNode(function(node){fadeOutItem(node,nodeOpacityPath,0.1)});graph.eachEdge(function(edge){fadeOutItem(edge,lineOpacityPath,0.1)});if(node){fadeInItem(node,nodeOpacityPath);each$1(node.edges,function(adjacentEdge){if(adjacentEdge.dataIndex<0){return}fadeInItem(adjacentEdge,lineOpacityPath);fadeInItem(adjacentEdge.node1,nodeOpacityPath);fadeInItem(adjacentEdge.node2,nodeOpacityPath)})}if(edge){fadeInItem(edge,lineOpacityPath);fadeInItem(edge.node1,nodeOpacityPath);fadeInItem(edge.node2,nodeOpacityPath)}},unfocusNodeAdjacency:function(seriesModel,ecModel,api,payload){var graph=this._model.getData().graph;graph.eachNode(function(node){fadeOutItem(node,nodeOpacityPath)});graph.eachEdge(function(edge){fadeOutItem(edge,lineOpacityPath)})},_startForceLayoutIteration:function(forceLayout,layoutAnimation){var self=this;(function step(){forceLayout.step(function(stopped){self.updateLayout(self._model);(self._layouting=!stopped)&&(layoutAnimation?(self._layoutTimeout=setTimeout(step,16)):step())})})()},_updateController:function(seriesModel,ecModel,api){var controller=this._controller;var controllerHost=this._controllerHost;var group=this.group;controller.setPointerChecker(function(e,x,y){var rect=group.getBoundingRect();rect.applyTransform(group.transform);return rect.contain(x,y)&&!onIrrelevantElement(e,api,seriesModel)
});if(seriesModel.coordinateSystem.type!=="view"){controller.disable();return}controller.enable(seriesModel.get("roam"));controllerHost.zoomLimit=seriesModel.get("scaleLimit");controllerHost.zoom=seriesModel.coordinateSystem.getZoom();controller.off("pan").off("zoom").on("pan",function(e){updateViewOnPan(controllerHost,e.dx,e.dy);api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",dx:e.dx,dy:e.dy})}).on("zoom",function(e){updateViewOnZoom(controllerHost,e.scale,e.originX,e.originY);api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY});this._updateNodeAndLinkScale();adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel));this._lineDraw.updateLayout()},this)},_updateNodeAndLinkScale:function(){var seriesModel=this._model;var data=seriesModel.getData();var nodeScale=this._getNodeGlobalScale(seriesModel);var invScale=[nodeScale,nodeScale];data.eachItemGraphicEl(function(el,idx){el.attr("scale",invScale)})},_getNodeGlobalScale:function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys.type!=="view"){return 1}var nodeScaleRatio=this._nodeScaleRatio;var groupScale=coordSys.scale;var groupZoom=(groupScale&&groupScale[0])||1;var roamZoom=coordSys.getZoom();var nodeScale=(roamZoom-1)*nodeScaleRatio+1;return nodeScale/groupZoom},updateLayout:function(seriesModel){adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel));this._symbolDraw.updateLayout();this._lineDraw.updateLayout()},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove();this._lineDraw&&this._lineDraw.remove()}});registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){});registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){});var actionInfo={type:"graphRoam",event:"graphRoam",update:"none"};registerAction(actionInfo,function(payload,ecModel){ecModel.eachComponent({mainType:"series",query:payload},function(seriesModel){var coordSys=seriesModel.coordinateSystem;
var res=updateCenterAndZoom(coordSys,payload);seriesModel.setCenter&&seriesModel.setCenter(res.center);seriesModel.setZoom&&seriesModel.setZoom(res.zoom)})});var categoryFilter=function(ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});if(!legendModels||!legendModels.length){return}ecModel.eachSeriesByType("graph",function(graphSeries){var categoriesData=graphSeries.getCategoriesData();var graph=graphSeries.getGraph();var data=graph.data;var categoryNames=categoriesData.mapArray(categoriesData.getName);data.filterSelf(function(idx){var model=data.getItemModel(idx);var category=model.getShallow("category");if(category!=null){if(typeof category==="number"){category=categoryNames[category]}for(var i=0;i<legendModels.length;i++){if(!legendModels[i].isSelected(category)){return false}}}return true})},this)};var categoryVisual=function(ecModel){var paletteScope={};ecModel.eachSeriesByType("graph",function(seriesModel){var categoriesData=seriesModel.getCategoriesData();var data=seriesModel.getData();var categoryNameIdxMap={};categoriesData.each(function(idx){var name=categoriesData.getName(idx);categoryNameIdxMap["ec-"+name]=idx;var itemModel=categoriesData.getItemModel(idx);var color=itemModel.get("itemStyle.color")||seriesModel.getColorFromPalette(name,paletteScope);categoriesData.setItemVisual(idx,"color",color)});if(categoriesData.count()){data.each(function(idx){var model=data.getItemModel(idx);var category=model.getShallow("category");if(category!=null){if(typeof category==="string"){category=categoryNameIdxMap["ec-"+category]}if(!data.getItemVisual(idx,"color",true)){data.setItemVisual(idx,"color",categoriesData.getItemVisual(category,"color"))}}})}})};function normalize$1(a){if(!(a instanceof Array)){a=[a,a]}return a}var edgeVisual=function(ecModel){ecModel.eachSeriesByType("graph",function(seriesModel){var graph=seriesModel.getGraph();var edgeData=seriesModel.getEdgeData();var symbolType=normalize$1(seriesModel.get("edgeSymbol"));var symbolSize=normalize$1(seriesModel.get("edgeSymbolSize"));
var colorQuery="lineStyle.color".split(".");var opacityQuery="lineStyle.opacity".split(".");edgeData.setVisual("fromSymbol",symbolType&&symbolType[0]);edgeData.setVisual("toSymbol",symbolType&&symbolType[1]);edgeData.setVisual("fromSymbolSize",symbolSize&&symbolSize[0]);edgeData.setVisual("toSymbolSize",symbolSize&&symbolSize[1]);edgeData.setVisual("color",seriesModel.get(colorQuery));edgeData.setVisual("opacity",seriesModel.get(opacityQuery));edgeData.each(function(idx){var itemModel=edgeData.getItemModel(idx);var edge=graph.getEdgeByIndex(idx);var symbolType=normalize$1(itemModel.getShallow("symbol",true));var symbolSize=normalize$1(itemModel.getShallow("symbolSize",true));var color=itemModel.get(colorQuery);var opacity=itemModel.get(opacityQuery);switch(color){case"source":color=edge.node1.getVisual("color");break;case"target":color=edge.node2.getVisual("color");break}symbolType[0]&&edge.setVisual("fromSymbol",symbolType[0]);symbolType[1]&&edge.setVisual("toSymbol",symbolType[1]);symbolSize[0]&&edge.setVisual("fromSymbolSize",symbolSize[0]);symbolSize[1]&&edge.setVisual("toSymbolSize",symbolSize[1]);edge.setVisual("color",color);edge.setVisual("opacity",opacity)})})};function simpleLayout$1(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys&&coordSys.type!=="view"){return}var graph=seriesModel.getGraph();graph.eachNode(function(node){var model=node.getModel();node.setLayout([+model.get("x"),+model.get("y")])});simpleLayoutEdge(graph)}function simpleLayoutEdge(graph){graph.eachEdge(function(edge){var curveness=edge.getModel().get("lineStyle.curveness")||0;var p1=clone$1(edge.node1.getLayout());var p2=clone$1(edge.node2.getLayout());var points=[p1,p2];if(+curveness){points.push([(p1[0]+p2[0])/2-(p1[1]-p2[1])*curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*curveness])}edge.setLayout(points)})}var simpleLayout=function(ecModel,api){ecModel.eachSeriesByType("graph",function(seriesModel){var layout=seriesModel.get("layout");var coordSys=seriesModel.coordinateSystem;
if(coordSys&&coordSys.type!=="view"){var data=seriesModel.getData();var dimensions=[];each$1(coordSys.dimensions,function(coordDim){dimensions=dimensions.concat(data.mapDimension(coordDim,true))});for(var dataIndex=0;dataIndex<data.count();dataIndex++){var value=[];var hasValue=false;for(var i=0;i<dimensions.length;i++){var val=data.get(dimensions[i],dataIndex);if(!isNaN(val)){hasValue=true}value.push(val)}if(hasValue){data.setItemLayout(dataIndex,coordSys.dataToPoint(value))}else{data.setItemLayout(dataIndex,[NaN,NaN])}}simpleLayoutEdge(data.graph)}else{if(!layout||layout==="none"){simpleLayout$1(seriesModel)}}})};function circularLayout$1(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys&&coordSys.type!=="view"){return}var rect=coordSys.getBoundingRect();var nodeData=seriesModel.getData();var graph=nodeData.graph;var angle=0;var sum=nodeData.getSum("value");var unitAngle=Math.PI*2/(sum||nodeData.count());var cx=rect.width/2+rect.x;var cy=rect.height/2+rect.y;var r=Math.min(rect.width,rect.height)/2;graph.eachNode(function(node){var value=node.getValue("value");angle+=unitAngle*(sum?value:1)/2;node.setLayout([r*Math.cos(angle)+cx,r*Math.sin(angle)+cy]);angle+=unitAngle*(sum?value:1)/2});nodeData.setLayout({cx:cx,cy:cy});graph.eachEdge(function(edge){var curveness=edge.getModel().get("lineStyle.curveness")||0;var p1=clone$1(edge.node1.getLayout());var p2=clone$1(edge.node2.getLayout());var cp1;var x12=(p1[0]+p2[0])/2;var y12=(p1[1]+p2[1])/2;if(+curveness){curveness*=3;cp1=[cx*curveness+x12*(1-curveness),cy*curveness+y12*(1-curveness)]}edge.setLayout([p1,p2,cp1])})}var circularLayout=function(ecModel){ecModel.eachSeriesByType("graph",function(seriesModel){if(seriesModel.get("layout")==="circular"){circularLayout$1(seriesModel)}})};var scaleAndAdd$2=scaleAndAdd;function forceLayout$1(nodes,edges,opts){var rect=opts.rect;var width=rect.width;var height=rect.height;var center=[rect.x+width/2,rect.y+height/2];var gravity=opts.gravity==null?0.1:opts.gravity;
for(var i=0;i<nodes.length;i++){var n=nodes[i];if(!n.p){n.p=create(width*(Math.random()-0.5)+center[0],height*(Math.random()-0.5)+center[1])}n.pp=clone$1(n.p);n.edges=null}var friction=0.6;return{warmUp:function(){friction=0.5},setFixed:function(idx){nodes[idx].fixed=true},setUnfixed:function(idx){nodes[idx].fixed=false},step:function(cb){var v12=[];var nLen=nodes.length;for(var i=0;i<edges.length;i++){var e=edges[i];var n1=e.n1;var n2=e.n2;sub(v12,n2.p,n1.p);var d=len(v12)-e.d;var w=n2.w/(n1.w+n2.w);if(isNaN(w)){w=0}normalize(v12,v12);!n1.fixed&&scaleAndAdd$2(n1.p,n1.p,v12,w*d*friction);!n2.fixed&&scaleAndAdd$2(n2.p,n2.p,v12,-(1-w)*d*friction)}for(var i=0;i<nLen;i++){var n=nodes[i];if(!n.fixed){sub(v12,center,n.p);scaleAndAdd$2(n.p,n.p,v12,gravity*friction)}}for(var i=0;i<nLen;i++){var n1=nodes[i];for(var j=i+1;j<nLen;j++){var n2=nodes[j];sub(v12,n2.p,n1.p);var d=len(v12);if(d===0){set(v12,Math.random()-0.5,Math.random()-0.5);d=1}var repFact=(n1.rep+n2.rep)/d/d;!n1.fixed&&scaleAndAdd$2(n1.pp,n1.pp,v12,repFact);!n2.fixed&&scaleAndAdd$2(n2.pp,n2.pp,v12,-repFact)}}var v=[];for(var i=0;i<nLen;i++){var n=nodes[i];if(!n.fixed){sub(v,n.p,n.pp);scaleAndAdd$2(n.p,n.p,v,friction);copy(n.pp,n.p)}}friction=friction*0.992;cb&&cb(nodes,edges,friction<0.01)}}}var forceLayout=function(ecModel){ecModel.eachSeriesByType("graph",function(graphSeries){var coordSys=graphSeries.coordinateSystem;if(coordSys&&coordSys.type!=="view"){return}if(graphSeries.get("layout")==="force"){var preservedPoints=graphSeries.preservedPoints||{};var graph=graphSeries.getGraph();var nodeData=graph.data;var edgeData=graph.edgeData;var forceModel=graphSeries.getModel("force");var initLayout=forceModel.get("initLayout");if(graphSeries.preservedPoints){nodeData.each(function(idx){var id=nodeData.getId(idx);nodeData.setItemLayout(idx,preservedPoints[id]||[NaN,NaN])})}else{if(!initLayout||initLayout==="none"){simpleLayout$1(graphSeries)}else{if(initLayout==="circular"){circularLayout$1(graphSeries)}}}var nodeDataExtent=nodeData.getDataExtent("value");
var edgeDataExtent=edgeData.getDataExtent("value");var repulsion=forceModel.get("repulsion");var edgeLength=forceModel.get("edgeLength");if(!isArray(repulsion)){repulsion=[repulsion,repulsion]}if(!isArray(edgeLength)){edgeLength=[edgeLength,edgeLength]}edgeLength=[edgeLength[1],edgeLength[0]];var nodes=nodeData.mapArray("value",function(value,idx){var point=nodeData.getItemLayout(idx);var rep=linearMap(value,nodeDataExtent,repulsion);if(isNaN(rep)){rep=(repulsion[0]+repulsion[1])/2}return{w:rep,rep:rep,fixed:nodeData.getItemModel(idx).get("fixed"),p:(!point||isNaN(point[0])||isNaN(point[1]))?null:point}});var edges=edgeData.mapArray("value",function(value,idx){var edge=graph.getEdgeByIndex(idx);var d=linearMap(value,edgeDataExtent,edgeLength);if(isNaN(d)){d=(edgeLength[0]+edgeLength[1])/2}return{n1:nodes[edge.node1.dataIndex],n2:nodes[edge.node2.dataIndex],d:d,curveness:edge.getModel().get("lineStyle.curveness")||0}});var coordSys=graphSeries.coordinateSystem;var rect=coordSys.getBoundingRect();var forceInstance=forceLayout$1(nodes,edges,{rect:rect,gravity:forceModel.get("gravity")});var oldStep=forceInstance.step;forceInstance.step=function(cb){for(var i=0,l=nodes.length;i<l;i++){if(nodes[i].fixed){copy(nodes[i].p,graph.getNodeByIndex(i).getLayout())}}oldStep(function(nodes,edges,stopped){for(var i=0,l=nodes.length;i<l;i++){if(!nodes[i].fixed){graph.getNodeByIndex(i).setLayout(nodes[i].p)}preservedPoints[nodeData.getId(i)]=nodes[i].p}for(var i=0,l=edges.length;i<l;i++){var e=edges[i];var edge=graph.getEdgeByIndex(i);var p1=e.n1.p;var p2=e.n2.p;var points=edge.getLayout();points=points?points.slice():[];points[0]=points[0]||[];points[1]=points[1]||[];copy(points[0],p1);copy(points[1],p2);if(+e.curveness){points[2]=[(p1[0]+p2[0])/2-(p1[1]-p2[1])*e.curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*e.curveness]}edge.setLayout(points)}cb&&cb(stopped)})};graphSeries.forceLayout=forceInstance;graphSeries.preservedPoints=preservedPoints;forceInstance.step()}else{graphSeries.forceLayout=null
}})};function getViewRect$1(seriesModel,api,aspect){var option=seriesModel.getBoxLayoutParams();option.aspect=aspect;return getLayoutRect(option,{width:api.getWidth(),height:api.getHeight()})}var createView=function(ecModel,api){var viewList=[];ecModel.eachSeriesByType("graph",function(seriesModel){var coordSysType=seriesModel.get("coordinateSystem");if(!coordSysType||coordSysType==="view"){var data=seriesModel.getData();var positions=data.mapArray(function(idx){var itemModel=data.getItemModel(idx);return[+itemModel.get("x"),+itemModel.get("y")]});var min=[];var max=[];fromPoints(positions,min,max);if(max[0]-min[0]===0){max[0]+=1;min[0]-=1}if(max[1]-min[1]===0){max[1]+=1;min[1]-=1}var aspect=(max[0]-min[0])/(max[1]-min[1]);var viewRect=getViewRect$1(seriesModel,api,aspect);if(isNaN(aspect)){min=[viewRect.x,viewRect.y];max=[viewRect.x+viewRect.width,viewRect.y+viewRect.height]}var bbWidth=max[0]-min[0];var bbHeight=max[1]-min[1];var viewWidth=viewRect.width;var viewHeight=viewRect.height;var viewCoordSys=seriesModel.coordinateSystem=new View();viewCoordSys.zoomLimit=seriesModel.get("scaleLimit");viewCoordSys.setBoundingRect(min[0],min[1],bbWidth,bbHeight);viewCoordSys.setViewRect(viewRect.x,viewRect.y,viewWidth,viewHeight);viewCoordSys.setCenter(seriesModel.get("center"));viewCoordSys.setZoom(seriesModel.get("zoom"));viewList.push(viewCoordSys)}});return viewList};registerProcessor(categoryFilter);registerVisual(visualSymbol("graph","circle",null));registerVisual(categoryVisual);registerVisual(edgeVisual);registerLayout(simpleLayout);registerLayout(circularLayout);registerLayout(forceLayout);registerCoordinateSystem("graphView",{create:createView});var GaugeSeries=SeriesModel.extend({type:"series.gauge",getInitialData:function(option,ecModel){var dataOpt=option.data||[];if(!isArray(dataOpt)){dataOpt=[dataOpt]}option.data=dataOpt;return createListSimply(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:true,radius:"75%",startAngle:225,endAngle:-45,clockwise:true,min:0,max:100,splitNumber:10,axisLine:{show:true,lineStyle:{color:[[0.2,"#91c7ae"],[0.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:true,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:true,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:true,distance:5,color:"auto"},pointer:{show:true,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:true,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:true,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});
var PointerPath=Path.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(ctx,shape){var mathCos=Math.cos;var mathSin=Math.sin;var r=shape.r;var width=shape.width;var angle=shape.angle;var x=shape.x-mathCos(angle)*width*(width>=r/3?1:2);var y=shape.y-mathSin(angle)*width*(width>=r/3?1:2);angle=shape.angle-Math.PI/2;ctx.moveTo(x,y);ctx.lineTo(shape.x+mathCos(angle)*width,shape.y+mathSin(angle)*width);ctx.lineTo(shape.x+mathCos(shape.angle)*r,shape.y+mathSin(shape.angle)*r);ctx.lineTo(shape.x-mathCos(angle)*width,shape.y-mathSin(angle)*width);ctx.lineTo(x,y);return}});function parsePosition(seriesModel,api){var center=seriesModel.get("center");var width=api.getWidth();var height=api.getHeight();var size=Math.min(width,height);var cx=parsePercent$1(center[0],api.getWidth());var cy=parsePercent$1(center[1],api.getHeight());var r=parsePercent$1(seriesModel.get("radius"),size/2);return{cx:cx,cy:cy,r:r}}function formatLabel(label,labelFormatter){if(labelFormatter){if(typeof labelFormatter==="string"){label=labelFormatter.replace("{value}",label!=null?label:"")}else{if(typeof labelFormatter==="function"){label=labelFormatter(label)}}}return label}var PI2$5=Math.PI*2;var GaugeView=Chart.extend({type:"gauge",render:function(seriesModel,ecModel,api){this.group.removeAll();var colorList=seriesModel.get("axisLine.lineStyle.color");var posInfo=parsePosition(seriesModel,api);this._renderMain(seriesModel,ecModel,api,colorList,posInfo)},dispose:function(){},_renderMain:function(seriesModel,ecModel,api,colorList,posInfo){var group=this.group;var axisLineModel=seriesModel.getModel("axisLine");var lineStyleModel=axisLineModel.getModel("lineStyle");var clockwise=seriesModel.get("clockwise");var startAngle=-seriesModel.get("startAngle")/180*Math.PI;var endAngle=-seriesModel.get("endAngle")/180*Math.PI;var angleRangeSpan=(endAngle-startAngle)%PI2$5;var prevEndAngle=startAngle;var axisLineWidth=lineStyleModel.get("width");for(var i=0;i<colorList.length;
i++){var percent=Math.min(Math.max(colorList[i][0],0),1);var endAngle=startAngle+angleRangeSpan*percent;var sector=new Sector({shape:{startAngle:prevEndAngle,endAngle:endAngle,cx:posInfo.cx,cy:posInfo.cy,clockwise:clockwise,r0:posInfo.r-axisLineWidth,r:posInfo.r},silent:true});sector.setStyle({fill:colorList[i][1]});sector.setStyle(lineStyleModel.getLineStyle(["color","borderWidth","borderColor"]));group.add(sector);prevEndAngle=endAngle}var getColor=function(percent){if(percent<=0){return colorList[0][1]}for(var i=0;i<colorList.length;i++){if(colorList[i][0]>=percent&&(i===0?0:colorList[i-1][0])<percent){return colorList[i][1]}}return colorList[i-1][1]};if(!clockwise){var tmp=startAngle;startAngle=endAngle;endAngle=tmp}this._renderTicks(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise);this._renderPointer(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise);this._renderTitle(seriesModel,ecModel,api,getColor,posInfo);this._renderDetail(seriesModel,ecModel,api,getColor,posInfo)},_renderTicks:function(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise){var group=this.group;var cx=posInfo.cx;var cy=posInfo.cy;var r=posInfo.r;var minVal=+seriesModel.get("min");var maxVal=+seriesModel.get("max");var splitLineModel=seriesModel.getModel("splitLine");var tickModel=seriesModel.getModel("axisTick");var labelModel=seriesModel.getModel("axisLabel");var splitNumber=seriesModel.get("splitNumber");var subSplitNumber=tickModel.get("splitNumber");var splitLineLen=parsePercent$1(splitLineModel.get("length"),r);var tickLen=parsePercent$1(tickModel.get("length"),r);var angle=startAngle;var step=(endAngle-startAngle)/splitNumber;var subStep=step/subSplitNumber;var splitLineStyle=splitLineModel.getModel("lineStyle").getLineStyle();var tickLineStyle=tickModel.getModel("lineStyle").getLineStyle();for(var i=0;i<=splitNumber;i++){var unitX=Math.cos(angle);var unitY=Math.sin(angle);if(splitLineModel.get("show")){var splitLine=new Line({shape:{x1:unitX*r+cx,y1:unitY*r+cy,x2:unitX*(r-splitLineLen)+cx,y2:unitY*(r-splitLineLen)+cy},style:splitLineStyle,silent:true});
if(splitLineStyle.stroke==="auto"){splitLine.setStyle({stroke:getColor(i/splitNumber)})}group.add(splitLine)}if(labelModel.get("show")){var label=formatLabel(round$2(i/splitNumber*(maxVal-minVal)+minVal),labelModel.get("formatter"));var distance=labelModel.get("distance");var autoColor=getColor(i/splitNumber);group.add(new Text({style:setTextStyle({},labelModel,{text:label,x:unitX*(r-splitLineLen-distance)+cx,y:unitY*(r-splitLineLen-distance)+cy,textVerticalAlign:unitY<-0.4?"top":(unitY>0.4?"bottom":"middle"),textAlign:unitX<-0.4?"left":(unitX>0.4?"right":"center")},{autoColor:autoColor}),silent:true}))}if(tickModel.get("show")&&i!==splitNumber){for(var j=0;j<=subSplitNumber;j++){var unitX=Math.cos(angle);var unitY=Math.sin(angle);var tickLine=new Line({shape:{x1:unitX*r+cx,y1:unitY*r+cy,x2:unitX*(r-tickLen)+cx,y2:unitY*(r-tickLen)+cy},silent:true,style:tickLineStyle});if(tickLineStyle.stroke==="auto"){tickLine.setStyle({stroke:getColor((i+j/subSplitNumber)/splitNumber)})}group.add(tickLine);angle+=subStep}angle-=subStep}else{angle+=step}}},_renderPointer:function(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise){var group=this.group;var oldData=this._data;if(!seriesModel.get("pointer.show")){oldData&&oldData.eachItemGraphicEl(function(el){group.remove(el)});return}var valueExtent=[+seriesModel.get("min"),+seriesModel.get("max")];var angleExtent=[startAngle,endAngle];var data=seriesModel.getData();var valueDim=data.mapDimension("value");data.diff(oldData).add(function(idx){var pointer=new PointerPath({shape:{angle:startAngle}});initProps(pointer,{shape:{angle:linearMap(data.get(valueDim,idx),valueExtent,angleExtent,true)}},seriesModel);group.add(pointer);data.setItemGraphicEl(idx,pointer)}).update(function(newIdx,oldIdx){var pointer=oldData.getItemGraphicEl(oldIdx);updateProps(pointer,{shape:{angle:linearMap(data.get(valueDim,newIdx),valueExtent,angleExtent,true)}},seriesModel);group.add(pointer);data.setItemGraphicEl(newIdx,pointer)}).remove(function(idx){var pointer=oldData.getItemGraphicEl(idx);
group.remove(pointer)}).execute();data.eachItemGraphicEl(function(pointer,idx){var itemModel=data.getItemModel(idx);var pointerModel=itemModel.getModel("pointer");pointer.setShape({x:posInfo.cx,y:posInfo.cy,width:parsePercent$1(pointerModel.get("width"),posInfo.r),r:parsePercent$1(pointerModel.get("length"),posInfo.r)});pointer.useStyle(itemModel.getModel("itemStyle").getItemStyle());if(pointer.style.fill==="auto"){pointer.setStyle("fill",getColor(linearMap(data.get(valueDim,idx),valueExtent,[0,1],true)))}setHoverStyle(pointer,itemModel.getModel("emphasis.itemStyle").getItemStyle())});this._data=data},_renderTitle:function(seriesModel,ecModel,api,getColor,posInfo){var data=seriesModel.getData();var valueDim=data.mapDimension("value");var titleModel=seriesModel.getModel("title");if(titleModel.get("show")){var offsetCenter=titleModel.get("offsetCenter");var x=posInfo.cx+parsePercent$1(offsetCenter[0],posInfo.r);var y=posInfo.cy+parsePercent$1(offsetCenter[1],posInfo.r);var minVal=+seriesModel.get("min");var maxVal=+seriesModel.get("max");var value=seriesModel.getData().get(valueDim,0);var autoColor=getColor(linearMap(value,[minVal,maxVal],[0,1],true));this.group.add(new Text({silent:true,style:setTextStyle({},titleModel,{x:x,y:y,text:data.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:autoColor,forceRich:true})}))}},_renderDetail:function(seriesModel,ecModel,api,getColor,posInfo){var detailModel=seriesModel.getModel("detail");var minVal=+seriesModel.get("min");var maxVal=+seriesModel.get("max");if(detailModel.get("show")){var offsetCenter=detailModel.get("offsetCenter");var x=posInfo.cx+parsePercent$1(offsetCenter[0],posInfo.r);var y=posInfo.cy+parsePercent$1(offsetCenter[1],posInfo.r);var width=parsePercent$1(detailModel.get("width"),posInfo.r);var height=parsePercent$1(detailModel.get("height"),posInfo.r);var data=seriesModel.getData();var value=data.get(data.mapDimension("value"),0);var autoColor=getColor(linearMap(value,[minVal,maxVal],[0,1],true));
this.group.add(new Text({silent:true,style:setTextStyle({},detailModel,{x:x,y:y,text:formatLabel(value,detailModel.get("formatter")),textWidth:isNaN(width)?null:width,textHeight:isNaN(height)?null:height,textAlign:"center",textVerticalAlign:"middle"},{autoColor:autoColor,forceRich:true})}))}}});var FunnelSeries=extendSeriesModel({type:"series.funnel",init:function(option){FunnelSeries.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()};this._defaultLabelLine(option)},getInitialData:function(option,ecModel){return createListSimply(this,["value"])},_defaultLabelLine:function(option){defaultEmphasis(option,"labelLine",["show"]);var labelLineNormalOpt=option.labelLine;var labelLineEmphasisOpt=option.emphasis.labelLine;labelLineNormalOpt.show=labelLineNormalOpt.show&&option.label.show;labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&&option.emphasis.label.show},getDataParams:function(dataIndex){var data=this.getData();var params=FunnelSeries.superCall(this,"getDataParams",dataIndex);var valueDim=data.mapDimension("value");var sum=data.getSum(valueDim);params.percent=!sum?0:+(data.get(valueDim,dataIndex)/sum*100).toFixed(2);params.$vars.push("percent");return params},defaultOption:{zlevel:0,z:2,legendHoverLink:true,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:true,position:"outer"},labelLine:{show:true,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:true}}}});function FunnelPiece(data,idx){Group.call(this);var polygon=new Polygon();var labelLine=new Polyline();var text=new Text();this.add(polygon);this.add(labelLine);this.add(text);this.updateData(data,idx,true);function onEmphasis(){labelLine.ignore=labelLine.hoverIgnore;text.ignore=text.hoverIgnore}function onNormal(){labelLine.ignore=labelLine.normalIgnore;text.ignore=text.normalIgnore}this.on("emphasis",onEmphasis).on("normal",onNormal).on("mouseover",onEmphasis).on("mouseout",onNormal)
}var funnelPieceProto=FunnelPiece.prototype;var opacityAccessPath=["itemStyle","opacity"];funnelPieceProto.updateData=function(data,idx,firstCreate){var polygon=this.childAt(0);var seriesModel=data.hostModel;var itemModel=data.getItemModel(idx);var layout=data.getItemLayout(idx);var opacity=data.getItemModel(idx).get(opacityAccessPath);opacity=opacity==null?1:opacity;polygon.useStyle({});if(firstCreate){polygon.setShape({points:layout.points});polygon.setStyle({opacity:0});initProps(polygon,{style:{opacity:opacity}},seriesModel,idx)}else{updateProps(polygon,{style:{opacity:opacity},shape:{points:layout.points}},seriesModel,idx)}var itemStyleModel=itemModel.getModel("itemStyle");var visualColor=data.getItemVisual(idx,"color");polygon.setStyle(defaults({lineJoin:"round",fill:visualColor},itemStyleModel.getItemStyle(["opacity"])));polygon.hoverStyle=itemStyleModel.getModel("emphasis").getItemStyle();this._updateLabel(data,idx);setHoverStyle(this)};funnelPieceProto._updateLabel=function(data,idx){var labelLine=this.childAt(1);var labelText=this.childAt(2);var seriesModel=data.hostModel;var itemModel=data.getItemModel(idx);var layout=data.getItemLayout(idx);var labelLayout=layout.label;var visualColor=data.getItemVisual(idx,"color");updateProps(labelLine,{shape:{points:labelLayout.linePoints||labelLayout.linePoints}},seriesModel,idx);updateProps(labelText,{style:{x:labelLayout.x,y:labelLayout.y}},seriesModel,idx);labelText.attr({rotation:labelLayout.rotation,origin:[labelLayout.x,labelLayout.y],z2:10});var labelModel=itemModel.getModel("label");var labelHoverModel=itemModel.getModel("emphasis.label");var labelLineModel=itemModel.getModel("labelLine");var labelLineHoverModel=itemModel.getModel("emphasis.labelLine");var visualColor=data.getItemVisual(idx,"color");setLabelStyle(labelText.style,labelText.hoverStyle={},labelModel,labelHoverModel,{labelFetcher:data.hostModel,labelDataIndex:idx,defaultText:data.getName(idx),autoColor:visualColor,useInsideStyle:!!labelLayout.inside},{textAlign:labelLayout.textAlign,textVerticalAlign:labelLayout.verticalAlign});
labelText.ignore=labelText.normalIgnore=!labelModel.get("show");labelText.hoverIgnore=!labelHoverModel.get("show");labelLine.ignore=labelLine.normalIgnore=!labelLineModel.get("show");labelLine.hoverIgnore=!labelLineHoverModel.get("show");labelLine.setStyle({stroke:visualColor});labelLine.setStyle(labelLineModel.getModel("lineStyle").getLineStyle());labelLine.hoverStyle=labelLineHoverModel.getModel("lineStyle").getLineStyle()};inherits(FunnelPiece,Group);var FunnelView=Chart.extend({type:"funnel",render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var oldData=this._data;var group=this.group;data.diff(oldData).add(function(idx){var funnelPiece=new FunnelPiece(data,idx);data.setItemGraphicEl(idx,funnelPiece);group.add(funnelPiece)}).update(function(newIdx,oldIdx){var piePiece=oldData.getItemGraphicEl(oldIdx);piePiece.updateData(data,newIdx);group.add(piePiece);data.setItemGraphicEl(newIdx,piePiece)}).remove(function(idx){var piePiece=oldData.getItemGraphicEl(idx);group.remove(piePiece)}).execute();this._data=data},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});function getViewRect$2(seriesModel,api){return getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}function getSortedIndices(data,sort){var valueDim=data.mapDimension("value");var valueArr=data.mapArray(valueDim,function(val){return val});var indices=[];var isAscending=sort==="ascending";for(var i=0,len=data.count();i<len;i++){indices[i]=i}if(typeof sort==="function"){indices.sort(sort)}else{if(sort!=="none"){indices.sort(function(a,b){return isAscending?valueArr[a]-valueArr[b]:valueArr[b]-valueArr[a]})}}return indices}function labelLayout$1(data){data.each(function(idx){var itemModel=data.getItemModel(idx);var labelModel=itemModel.getModel("label");var labelPosition=labelModel.get("position");var labelLineModel=itemModel.getModel("labelLine");var layout=data.getItemLayout(idx);var points=layout.points;var isLabelInside=labelPosition==="inner"||labelPosition==="inside"||labelPosition==="center";
var textAlign;var textX;var textY;var linePoints;if(isLabelInside){textX=(points[0][0]+points[1][0]+points[2][0]+points[3][0])/4;textY=(points[0][1]+points[1][1]+points[2][1]+points[3][1])/4;textAlign="center";linePoints=[[textX,textY],[textX,textY]]}else{var x1;var y1;var x2;var labelLineLen=labelLineModel.get("length");if(labelPosition==="left"){x1=(points[3][0]+points[0][0])/2;y1=(points[3][1]+points[0][1])/2;x2=x1-labelLineLen;textX=x2-5;textAlign="right"}else{x1=(points[1][0]+points[2][0])/2;y1=(points[1][1]+points[2][1])/2;x2=x1+labelLineLen;textX=x2+5;textAlign="left"}var y2=y1;linePoints=[[x1,y1],[x2,y2]];textY=y2}layout.label={linePoints:linePoints,x:textX,y:textY,verticalAlign:"middle",textAlign:textAlign,inside:isLabelInside}})}var funnelLayout=function(ecModel,api,payload){ecModel.eachSeriesByType("funnel",function(seriesModel){var data=seriesModel.getData();var valueDim=data.mapDimension("value");var sort=seriesModel.get("sort");var viewRect=getViewRect$2(seriesModel,api);var indices=getSortedIndices(data,sort);var sizeExtent=[parsePercent$1(seriesModel.get("minSize"),viewRect.width),parsePercent$1(seriesModel.get("maxSize"),viewRect.width)];var dataExtent=data.getDataExtent(valueDim);var min=seriesModel.get("min");var max=seriesModel.get("max");if(min==null){min=Math.min(dataExtent[0],0)}if(max==null){max=dataExtent[1]}var funnelAlign=seriesModel.get("funnelAlign");var gap=seriesModel.get("gap");var itemHeight=(viewRect.height-gap*(data.count()-1))/data.count();var y=viewRect.y;var getLinePoints=function(idx,offY){var val=data.get(valueDim,idx)||0;var itemWidth=linearMap(val,[min,max],sizeExtent,true);var x0;switch(funnelAlign){case"left":x0=viewRect.x;break;case"center":x0=viewRect.x+(viewRect.width-itemWidth)/2;break;case"right":x0=viewRect.x+viewRect.width-itemWidth;break}return[[x0,offY],[x0+itemWidth,offY]]};if(sort==="ascending"){itemHeight=-itemHeight;gap=-gap;y+=viewRect.height;indices=indices.reverse()}for(var i=0;i<indices.length;i++){var idx=indices[i];
var nextIdx=indices[i+1];var itemModel=data.getItemModel(idx);var height=itemModel.get("itemStyle.height");if(height==null){height=itemHeight}else{height=parsePercent$1(height,viewRect.height);if(sort==="ascending"){height=-height}}var start=getLinePoints(idx,y);var end=getLinePoints(nextIdx,y+height);y+=height+gap;data.setItemLayout(idx,{points:start.concat(end.slice().reverse())})}labelLayout$1(data)})};registerVisual(dataColor("funnel"));registerLayout(funnelLayout);registerProcessor(dataFilter("funnel"));var parallelPreprocessor=function(option){createParallelIfNeeded(option);mergeAxisOptionFromParallel(option)};function createParallelIfNeeded(option){if(option.parallel){return}var hasParallelSeries=false;each$1(option.series,function(seriesOpt){if(seriesOpt&&seriesOpt.type==="parallel"){hasParallelSeries=true}});if(hasParallelSeries){option.parallel=[{}]}}function mergeAxisOptionFromParallel(option){var axes=normalizeToArray(option.parallelAxis);each$1(axes,function(axisOption){if(!isObject$1(axisOption)){return}var parallelIndex=axisOption.parallelIndex||0;var parallelOption=normalizeToArray(option.parallel)[parallelIndex];if(parallelOption&&parallelOption.parallelAxisDefault){merge(axisOption,parallelOption.parallelAxisDefault,false)}})}var ParallelAxis=function(dim,scale,coordExtent,axisType,axisIndex){Axis.call(this,dim,scale,coordExtent);this.type=axisType||"value";this.axisIndex=axisIndex};ParallelAxis.prototype={constructor:ParallelAxis,model:null,isHorizontal:function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"}};inherits(ParallelAxis,Axis);var sliderMove=function(delta,handleEnds,extent,handleIndex,minSpan,maxSpan){handleEnds[0]=restrict$1(handleEnds[0],extent);handleEnds[1]=restrict$1(handleEnds[1],extent);delta=delta||0;var extentSpan=extent[1]-extent[0];if(minSpan!=null){minSpan=restrict$1(minSpan,[0,extentSpan])}if(maxSpan!=null){maxSpan=Math.max(maxSpan,minSpan!=null?minSpan:0)}if(handleIndex==="all"){minSpan=maxSpan=Math.abs(handleEnds[1]-handleEnds[0]);
handleIndex=0}var originalDistSign=getSpanSign(handleEnds,handleIndex);handleEnds[handleIndex]+=delta;var extentMinSpan=minSpan||0;var realExtent=extent.slice();originalDistSign.sign<0?(realExtent[0]+=extentMinSpan):(realExtent[1]-=extentMinSpan);handleEnds[handleIndex]=restrict$1(handleEnds[handleIndex],realExtent);var currDistSign=getSpanSign(handleEnds,handleIndex);if(minSpan!=null&&(currDistSign.sign!==originalDistSign.sign||currDistSign.span<minSpan)){handleEnds[1-handleIndex]=handleEnds[handleIndex]+originalDistSign.sign*minSpan}var currDistSign=getSpanSign(handleEnds,handleIndex);if(maxSpan!=null&&currDistSign.span>maxSpan){handleEnds[1-handleIndex]=handleEnds[handleIndex]+currDistSign.sign*maxSpan}return handleEnds};function getSpanSign(handleEnds,handleIndex){var dist=handleEnds[handleIndex]-handleEnds[1-handleIndex];return{span:Math.abs(dist),sign:dist>0?-1:dist<0?1:handleIndex?-1:1}}function restrict$1(value,extend){return Math.min(extend[1],Math.max(extend[0],value))}var each$11=each$1;var mathMin$5=Math.min;var mathMax$5=Math.max;var mathFloor$2=Math.floor;var mathCeil$2=Math.ceil;var round$3=round$2;var PI$3=Math.PI;function Parallel(parallelModel,ecModel,api){this._axesMap=createHashMap();this._axesLayout={};this.dimensions=parallelModel.dimensions;this._rect;this._model=parallelModel;this._init(parallelModel,ecModel,api)}Parallel.prototype={type:"parallel",constructor:Parallel,_init:function(parallelModel,ecModel,api){var dimensions=parallelModel.dimensions;var parallelAxisIndex=parallelModel.parallelAxisIndex;each$11(dimensions,function(dim,idx){var axisIndex=parallelAxisIndex[idx];var axisModel=ecModel.getComponent("parallelAxis",axisIndex);var axis=this._axesMap.set(dim,new ParallelAxis(dim,createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisIndex));var isCategory=axis.type==="category";axis.onBand=isCategory&&axisModel.get("boundaryGap");axis.inverse=axisModel.get("inverse");axisModel.axis=axis;axis.model=axisModel;axis.coordinateSystem=axisModel.coordinateSystem=this
},this)},update:function(ecModel,api){this._updateAxesFromSeries(this._model,ecModel)},containPoint:function(point){var layoutInfo=this._makeLayoutInfo();var axisBase=layoutInfo.axisBase;var layoutBase=layoutInfo.layoutBase;var pixelDimIndex=layoutInfo.pixelDimIndex;var pAxis=point[1-pixelDimIndex];var pLayout=point[pixelDimIndex];return pAxis>=axisBase&&pAxis<=axisBase+layoutInfo.axisLength&&pLayout>=layoutBase&&pLayout<=layoutBase+layoutInfo.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(parallelModel,ecModel){ecModel.eachSeries(function(seriesModel){if(!parallelModel.contains(seriesModel,ecModel)){return}var data=seriesModel.getData();each$11(this.dimensions,function(dim){var axis=this._axesMap.get(dim);axis.scale.unionExtentFromData(data,data.mapDimension(dim));niceScaleExtent(axis.scale,axis.model)},this)},this)},resize:function(parallelModel,api){this._rect=getLayoutRect(parallelModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()});this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var parallelModel=this._model;var rect=this._rect;var xy=["x","y"];var wh=["width","height"];var layout=parallelModel.get("layout");var pixelDimIndex=layout==="horizontal"?0:1;var layoutLength=rect[wh[pixelDimIndex]];var layoutExtent=[0,layoutLength];var axisCount=this.dimensions.length;var axisExpandWidth=restrict(parallelModel.get("axisExpandWidth"),layoutExtent);var axisExpandCount=restrict(parallelModel.get("axisExpandCount")||0,[0,axisCount]);var axisExpandable=parallelModel.get("axisExpandable")&&axisCount>3&&axisCount>axisExpandCount&&axisExpandCount>1&&axisExpandWidth>0&&layoutLength>0;var axisExpandWindow=parallelModel.get("axisExpandWindow");var winSize;if(!axisExpandWindow){winSize=restrict(axisExpandWidth*(axisExpandCount-1),layoutExtent);var axisExpandCenter=parallelModel.get("axisExpandCenter")||mathFloor$2(axisCount/2);axisExpandWindow=[axisExpandWidth*axisExpandCenter-winSize/2];
axisExpandWindow[1]=axisExpandWindow[0]+winSize}else{winSize=restrict(axisExpandWindow[1]-axisExpandWindow[0],layoutExtent);axisExpandWindow[1]=axisExpandWindow[0]+winSize}var axisCollapseWidth=(layoutLength-winSize)/(axisCount-axisExpandCount);axisCollapseWidth<3&&(axisCollapseWidth=0);var winInnerIndices=[mathFloor$2(round$3(axisExpandWindow[0]/axisExpandWidth,1))+1,mathCeil$2(round$3(axisExpandWindow[1]/axisExpandWidth,1))-1];var axisExpandWindow0Pos=axisCollapseWidth/axisExpandWidth*axisExpandWindow[0];return{layout:layout,pixelDimIndex:pixelDimIndex,layoutBase:rect[xy[pixelDimIndex]],layoutLength:layoutLength,axisBase:rect[xy[1-pixelDimIndex]],axisLength:rect[wh[1-pixelDimIndex]],axisExpandable:axisExpandable,axisExpandWidth:axisExpandWidth,axisCollapseWidth:axisCollapseWidth,axisExpandWindow:axisExpandWindow,axisCount:axisCount,winInnerIndices:winInnerIndices,axisExpandWindow0Pos:axisExpandWindow0Pos}},_layoutAxes:function(){var rect=this._rect;var axes=this._axesMap;var dimensions=this.dimensions;var layoutInfo=this._makeLayoutInfo();var layout=layoutInfo.layout;axes.each(function(axis){var axisExtent=[0,layoutInfo.axisLength];var idx=axis.inverse?1:0;axis.setExtent(axisExtent[idx],axisExtent[1-idx])});each$11(dimensions,function(dim,idx){var posInfo=(layoutInfo.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(idx,layoutInfo);var positionTable={horizontal:{x:posInfo.position,y:layoutInfo.axisLength},vertical:{x:0,y:posInfo.position}};var rotationTable={horizontal:PI$3/2,vertical:0};var position=[positionTable[layout].x+rect.x,positionTable[layout].y+rect.y];var rotation=rotationTable[layout];var transform=create$1();rotate(transform,transform,rotation);translate(transform,transform,position);this._axesLayout[dim]={position:position,rotation:rotation,transform:transform,axisNameAvailableWidth:posInfo.axisNameAvailableWidth,axisLabelShow:posInfo.axisLabelShow,nameTruncateMaxWidth:posInfo.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(dim){return this._axesMap.get(dim)
},dataToPoint:function(value,dim){return this.axisCoordToPoint(this._axesMap.get(dim).dataToCoord(value),dim)},eachActiveState:function(data,callback,start,end){start==null&&(start=0);end==null&&(end=data.count());var axesMap=this._axesMap;var dimensions=this.dimensions;var dataDimensions=[];var axisModels=[];each$1(dimensions,function(axisDim){dataDimensions.push(data.mapDimension(axisDim));axisModels.push(axesMap.get(axisDim).model)});var hasActiveSet=this.hasAxisBrushed();for(var dataIndex=start;dataIndex<end;dataIndex++){var activeState;if(!hasActiveSet){activeState="normal"}else{activeState="active";var values=data.getValues(dataDimensions,dataIndex);for(var j=0,lenj=dimensions.length;j<lenj;j++){var state=axisModels[j].getActiveState(values[j]);if(state==="inactive"){activeState="inactive";break}}}callback(activeState,dataIndex)}},hasAxisBrushed:function(){var dimensions=this.dimensions;var axesMap=this._axesMap;var hasActiveSet=false;for(var j=0,lenj=dimensions.length;j<lenj;j++){if(axesMap.get(dimensions[j]).model.getActiveState()!=="normal"){hasActiveSet=true}}return hasActiveSet},axisCoordToPoint:function(coord,dim){var axisLayout=this._axesLayout[dim];return applyTransform$1([coord,0],axisLayout.transform)},getAxisLayout:function(dim){return clone(this._axesLayout[dim])},getSlidedAxisExpandWindow:function(point){var layoutInfo=this._makeLayoutInfo();var pixelDimIndex=layoutInfo.pixelDimIndex;var axisExpandWindow=layoutInfo.axisExpandWindow.slice();var winSize=axisExpandWindow[1]-axisExpandWindow[0];var extent=[0,layoutInfo.axisExpandWidth*(layoutInfo.axisCount-1)];if(!this.containPoint(point)){return{behavior:"none",axisExpandWindow:axisExpandWindow}}var pointCoord=point[pixelDimIndex]-layoutInfo.layoutBase-layoutInfo.axisExpandWindow0Pos;var delta;var behavior="slide";var axisCollapseWidth=layoutInfo.axisCollapseWidth;var triggerArea=this._model.get("axisExpandSlideTriggerArea");var useJump=triggerArea[0]!=null;if(axisCollapseWidth){if(useJump&&axisCollapseWidth&&pointCoord<winSize*triggerArea[0]){behavior="jump";
delta=pointCoord-winSize*triggerArea[2]}else{if(useJump&&axisCollapseWidth&&pointCoord>winSize*(1-triggerArea[0])){behavior="jump";delta=pointCoord-winSize*(1-triggerArea[2])}else{(delta=pointCoord-winSize*triggerArea[1])>=0&&(delta=pointCoord-winSize*(1-triggerArea[1]))<=0&&(delta=0)}}delta*=layoutInfo.axisExpandWidth/axisCollapseWidth;delta?sliderMove(delta,axisExpandWindow,extent,"all"):(behavior="none")}else{var winSize=axisExpandWindow[1]-axisExpandWindow[0];var pos=extent[1]*pointCoord/winSize;axisExpandWindow=[mathMax$5(0,pos-winSize/2)];axisExpandWindow[1]=mathMin$5(extent[1],axisExpandWindow[0]+winSize);axisExpandWindow[0]=axisExpandWindow[1]-winSize}return{axisExpandWindow:axisExpandWindow,behavior:behavior}}};function restrict(len,extent){return mathMin$5(mathMax$5(len,extent[0]),extent[1])}function layoutAxisWithoutExpand(axisIndex,layoutInfo){var step=layoutInfo.layoutLength/(layoutInfo.axisCount-1);return{position:step*axisIndex,axisNameAvailableWidth:step,axisLabelShow:true}}function layoutAxisWithExpand(axisIndex,layoutInfo){var layoutLength=layoutInfo.layoutLength;var axisExpandWidth=layoutInfo.axisExpandWidth;var axisCount=layoutInfo.axisCount;var axisCollapseWidth=layoutInfo.axisCollapseWidth;var winInnerIndices=layoutInfo.winInnerIndices;var position;var axisNameAvailableWidth=axisCollapseWidth;var axisLabelShow=false;var nameTruncateMaxWidth;if(axisIndex<winInnerIndices[0]){position=axisIndex*axisCollapseWidth;nameTruncateMaxWidth=axisCollapseWidth}else{if(axisIndex<=winInnerIndices[1]){position=layoutInfo.axisExpandWindow0Pos+axisIndex*axisExpandWidth-layoutInfo.axisExpandWindow[0];axisNameAvailableWidth=axisExpandWidth;axisLabelShow=true}else{position=layoutLength-(axisCount-1-axisIndex)*axisCollapseWidth;nameTruncateMaxWidth=axisCollapseWidth}}return{position:position,axisNameAvailableWidth:axisNameAvailableWidth,axisLabelShow:axisLabelShow,nameTruncateMaxWidth:nameTruncateMaxWidth}}function create$2(ecModel,api){var coordSysList=[];ecModel.eachComponent("parallel",function(parallelModel,idx){var coordSys=new Parallel(parallelModel,ecModel,api);
coordSys.name="parallel_"+idx;coordSys.resize(parallelModel,api);parallelModel.coordinateSystem=coordSys;coordSys.model=parallelModel;coordSysList.push(coordSys)});ecModel.eachSeries(function(seriesModel){if(seriesModel.get("coordinateSystem")==="parallel"){var parallelModel=ecModel.queryComponents({mainType:"parallel",index:seriesModel.get("parallelIndex"),id:seriesModel.get("parallelId")})[0];seriesModel.coordinateSystem=parallelModel.coordinateSystem}});return coordSysList}CoordinateSystemManager.register("parallel",{create:create$2});var AxisModel$2=ComponentModel.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(intervals){var activeIntervals=this.activeIntervals=clone(intervals);if(activeIntervals){for(var i=activeIntervals.length-1;i>=0;i--){asc(activeIntervals[i])}}},getActiveState:function(value){var activeIntervals=this.activeIntervals;if(!activeIntervals.length){return"normal"}if(value==null||isNaN(value)){return"inactive"}if(activeIntervals.length===1){var interval=activeIntervals[0];if(interval[0]<=value&&value<=interval[1]){return"active"}}else{for(var i=0,len=activeIntervals.length;i<len;i++){if(activeIntervals[i][0]<=value&&value<=activeIntervals[i][1]){return"active"}}}return"inactive"}});var defaultOption$1={type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:0.3},realtime:true,z:10};merge(AxisModel$2.prototype,axisModelCommonMixin);function getAxisType$1(axisName,option){return option.type||(option.data?"category":"value")}axisModelCreator("parallel",AxisModel$2,getAxisType$1,defaultOption$1);ComponentModel.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:false,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-0.15,0.05,0.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){ComponentModel.prototype.init.apply(this,arguments);
this.mergeOption({})},mergeOption:function(newOption){var thisOption=this.option;newOption&&merge(thisOption,newOption,true);this._initDimensions()},contains:function(model,ecModel){var parallelIndex=model.get("parallelIndex");return parallelIndex!=null&&ecModel.getComponent("parallel",parallelIndex)===this},setAxisExpand:function(opt){each$1(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(name){if(opt.hasOwnProperty(name)){this.option[name]=opt[name]}},this)},_initDimensions:function(){var dimensions=this.dimensions=[];var parallelAxisIndex=this.parallelAxisIndex=[];var axisModels=filter(this.dependentModels.parallelAxis,function(axisModel){return(axisModel.get("parallelIndex")||0)===this.componentIndex},this);each$1(axisModels,function(axisModel){dimensions.push("dim"+axisModel.get("dim"));parallelAxisIndex.push(axisModel.componentIndex)})}});var actionInfo$1={type:"axisAreaSelect",event:"axisAreaSelected"};registerAction(actionInfo$1,function(payload,ecModel){ecModel.eachComponent({mainType:"parallelAxis",query:payload},function(parallelAxisModel){parallelAxisModel.axis.model.setActiveIntervals(payload.intervals)})});registerAction("parallelAxisExpand",function(payload,ecModel){ecModel.eachComponent({mainType:"parallel",query:payload},function(parallelModel){parallelModel.setAxisExpand(payload)})});var curry$2=curry;var each$12=each$1;var map$2=map;var mathMin$6=Math.min;var mathMax$6=Math.max;var mathPow$2=Math.pow;var COVER_Z=10000;var UNSELECT_THRESHOLD=6;var MIN_RESIZE_LINE_WIDTH=6;var MUTEX_RESOURCE_KEY="globalPan";var DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]};var CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"};var DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:true,brushMode:"single",removeOnClick:false};var baseUID=0;function BrushController(zr){if(__DEV__){assert$1(zr)}Eventful.call(this);this._zr=zr;this.group=new Group();
this._brushType;this._brushOption;this._panels;this._track=[];this._dragging;this._covers=[];this._creatingCover;this._creatingPanel;this._enableGlobalPan;if(__DEV__){this._mounted}this._uid="brushController_"+baseUID++;this._handlers={};each$12(mouseHandlers,function(handler,eventName){this._handlers[eventName]=bind(handler,this)},this)}BrushController.prototype={constructor:BrushController,enableBrush:function(brushOption){if(__DEV__){assert$1(this._mounted)}this._brushType&&doDisableBrush(this);brushOption.brushType&&doEnableBrush(this,brushOption);return this},setPanels:function(panelOpts){if(panelOpts&&panelOpts.length){var panels=this._panels={};each$1(panelOpts,function(panelOpts){panels[panelOpts.panelId]=clone(panelOpts)})}else{this._panels=null}return this},mount:function(opt){opt=opt||{};if(__DEV__){this._mounted=true}this._enableGlobalPan=opt.enableGlobalPan;var thisGroup=this.group;this._zr.add(thisGroup);thisGroup.attr({position:opt.position||[0,0],rotation:opt.rotation||0,scale:opt.scale||[1,1]});this._transform=thisGroup.getLocalTransform();return this},eachCover:function(cb,context){each$12(this._covers,cb,context)},updateCovers:function(brushOptionList){if(__DEV__){assert$1(this._mounted)}brushOptionList=map(brushOptionList,function(brushOption){return merge(clone(DEFAULT_BRUSH_OPT),brushOption,true)});var tmpIdPrefix="\0-brush-index-";var oldCovers=this._covers;var newCovers=this._covers=[];var controller=this;var creatingCover=this._creatingCover;(new DataDiffer(oldCovers,brushOptionList,oldGetKey,getKey)).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();return this;function getKey(brushOption,index){return(brushOption.id!=null?brushOption.id:tmpIdPrefix+index)+"-"+brushOption.brushType}function oldGetKey(cover,index){return getKey(cover.__brushOption,index)}function addOrUpdate(newIndex,oldIndex){var newBrushOption=brushOptionList[newIndex];if(oldIndex!=null&&oldCovers[oldIndex]===creatingCover){newCovers[newIndex]=oldCovers[oldIndex]
}else{var cover=newCovers[newIndex]=oldIndex!=null?(oldCovers[oldIndex].__brushOption=newBrushOption,oldCovers[oldIndex]):endCreating(controller,createCover(controller,newBrushOption));updateCoverAfterCreation(controller,cover)}}function remove(oldIndex){if(oldCovers[oldIndex]!==creatingCover){controller.group.remove(oldCovers[oldIndex])}}},unmount:function(){if(__DEV__){if(!this._mounted){return}}this.enableBrush(false);clearCovers(this);this._zr.remove(this.group);if(__DEV__){this._mounted=false}return this},dispose:function(){this.unmount();this.off()}};mixin(BrushController,Eventful);function doEnableBrush(controller,brushOption){var zr=controller._zr;if(!controller._enableGlobalPan){take(zr,MUTEX_RESOURCE_KEY,controller._uid)}each$12(controller._handlers,function(handler,eventName){zr.on(eventName,handler)});controller._brushType=brushOption.brushType;controller._brushOption=merge(clone(DEFAULT_BRUSH_OPT),brushOption,true)}function doDisableBrush(controller){var zr=controller._zr;release(zr,MUTEX_RESOURCE_KEY,controller._uid);each$12(controller._handlers,function(handler,eventName){zr.off(eventName,handler)});controller._brushType=controller._brushOption=null}function createCover(controller,brushOption){var cover=coverRenderers[brushOption.brushType].createCover(controller,brushOption);cover.__brushOption=brushOption;updateZ$1(cover,brushOption);controller.group.add(cover);return cover}function endCreating(controller,creatingCover){var coverRenderer=getCoverRenderer(creatingCover);if(coverRenderer.endCreating){coverRenderer.endCreating(controller,creatingCover);updateZ$1(creatingCover,creatingCover.__brushOption)}return creatingCover}function updateCoverShape(controller,cover){var brushOption=cover.__brushOption;getCoverRenderer(cover).updateCoverShape(controller,cover,brushOption.range,brushOption)}function updateZ$1(cover,brushOption){var z=brushOption.z;z==null&&(z=COVER_Z);cover.traverse(function(el){el.z=z;el.z2=z})}function updateCoverAfterCreation(controller,cover){getCoverRenderer(cover).updateCommon(controller,cover);
updateCoverShape(controller,cover)}function getCoverRenderer(cover){return coverRenderers[cover.__brushOption.brushType]}function getPanelByPoint(controller,e,localCursorPoint){var panels=controller._panels;if(!panels){return true}var panel;var transform=controller._transform;each$12(panels,function(pn){pn.isTargetByCursor(e,localCursorPoint,transform)&&(panel=pn)});return panel}function getPanelByCover(controller,cover){var panels=controller._panels;if(!panels){return true}var panelId=cover.__brushOption.panelId;return panelId!=null?panels[panelId]:true}function clearCovers(controller){var covers=controller._covers;var originalLength=covers.length;each$12(covers,function(cover){controller.group.remove(cover)},controller);covers.length=0;return !!originalLength}function trigger$1(controller,opt){var areas=map$2(controller._covers,function(cover){var brushOption=cover.__brushOption;var range=clone(brushOption.range);return{brushType:brushOption.brushType,panelId:brushOption.panelId,range:range}});controller.trigger("brush",areas,{isEnd:!!opt.isEnd,removeOnClick:!!opt.removeOnClick})}function shouldShowCover(controller){var track=controller._track;if(!track.length){return false}var p2=track[track.length-1];var p1=track[0];var dx=p2[0]-p1[0];var dy=p2[1]-p1[1];var dist=mathPow$2(dx*dx+dy*dy,0.5);return dist>UNSELECT_THRESHOLD}function getTrackEnds(track){var tail=track.length-1;tail<0&&(tail=0);return[track[0],track[tail]]}function createBaseRectCover(doDrift,controller,brushOption,edgeNames){var cover=new Group();cover.add(new Rect({name:"main",style:makeStyle(brushOption),silent:true,draggable:true,cursor:"move",drift:curry$2(doDrift,controller,cover,"nswe"),ondragend:curry$2(trigger$1,controller,{isEnd:true})}));each$12(edgeNames,function(name){cover.add(new Rect({name:name,style:{opacity:0},draggable:true,silent:true,invisible:true,drift:curry$2(doDrift,controller,cover,name),ondragend:curry$2(trigger$1,controller,{isEnd:true})}))});return cover}function updateBaseRect(controller,cover,localRange,brushOption){var lineWidth=brushOption.brushStyle.lineWidth||0;
var handleSize=mathMax$6(lineWidth,MIN_RESIZE_LINE_WIDTH);var x=localRange[0][0];var y=localRange[1][0];var xa=x-lineWidth/2;var ya=y-lineWidth/2;var x2=localRange[0][1];var y2=localRange[1][1];var x2a=x2-handleSize+lineWidth/2;var y2a=y2-handleSize+lineWidth/2;var width=x2-x;var height=y2-y;var widtha=width+lineWidth;var heighta=height+lineWidth;updateRectShape(controller,cover,"main",x,y,width,height);if(brushOption.transformable){updateRectShape(controller,cover,"w",xa,ya,handleSize,heighta);updateRectShape(controller,cover,"e",x2a,ya,handleSize,heighta);updateRectShape(controller,cover,"n",xa,ya,widtha,handleSize);updateRectShape(controller,cover,"s",xa,y2a,widtha,handleSize);updateRectShape(controller,cover,"nw",xa,ya,handleSize,handleSize);updateRectShape(controller,cover,"ne",x2a,ya,handleSize,handleSize);updateRectShape(controller,cover,"sw",xa,y2a,handleSize,handleSize);updateRectShape(controller,cover,"se",x2a,y2a,handleSize,handleSize)}}function updateCommon(controller,cover){var brushOption=cover.__brushOption;var transformable=brushOption.transformable;var mainEl=cover.childAt(0);mainEl.useStyle(makeStyle(brushOption));mainEl.attr({silent:!transformable,cursor:transformable?"move":"default"});each$12(["w","e","n","s","se","sw","ne","nw"],function(name){var el=cover.childOfName(name);var globalDir=getGlobalDirection(controller,name);el&&el.attr({silent:!transformable,invisible:!transformable,cursor:transformable?CURSOR_MAP[globalDir]+"-resize":null})})}function updateRectShape(controller,cover,name,x,y,w,h){var el=cover.childOfName(name);el&&el.setShape(pointsToRect(clipByPanel(controller,cover,[[x,y],[x+w,y+h]])))}function makeStyle(brushOption){return defaults({strokeNoScale:true},brushOption.brushStyle)}function formatRectRange(x,y,x2,y2){var min=[mathMin$6(x,x2),mathMin$6(y,y2)];var max=[mathMax$6(x,x2),mathMax$6(y,y2)];return[[min[0],max[0]],[min[1],max[1]]]}function getTransform$1(controller){return getTransform(controller.group)}function getGlobalDirection(controller,localDirection){if(localDirection.length>1){localDirection=localDirection.split("");
var globalDir=[getGlobalDirection(controller,localDirection[0]),getGlobalDirection(controller,localDirection[1])];(globalDir[0]==="e"||globalDir[0]==="w")&&globalDir.reverse();return globalDir.join("")}else{var map$$1={w:"left",e:"right",n:"top",s:"bottom"};var inverseMap={left:"w",right:"e",top:"n",bottom:"s"};var globalDir=transformDirection(map$$1[localDirection],getTransform$1(controller));return inverseMap[globalDir]}}function driftRect(toRectRange,fromRectRange,controller,cover,name,dx,dy,e){var brushOption=cover.__brushOption;var rectRange=toRectRange(brushOption.range);var localDelta=toLocalDelta(controller,dx,dy);each$12(name.split(""),function(namePart){var ind=DIRECTION_MAP[namePart];rectRange[ind[0]][ind[1]]+=localDelta[ind[0]]});brushOption.range=fromRectRange(formatRectRange(rectRange[0][0],rectRange[1][0],rectRange[0][1],rectRange[1][1]));updateCoverAfterCreation(controller,cover);trigger$1(controller,{isEnd:false})}function driftPolygon(controller,cover,dx,dy,e){var range=cover.__brushOption.range;var localDelta=toLocalDelta(controller,dx,dy);each$12(range,function(point){point[0]+=localDelta[0];point[1]+=localDelta[1]});updateCoverAfterCreation(controller,cover);trigger$1(controller,{isEnd:false})}function toLocalDelta(controller,dx,dy){var thisGroup=controller.group;var localD=thisGroup.transformCoordToLocal(dx,dy);var localZero=thisGroup.transformCoordToLocal(0,0);return[localD[0]-localZero[0],localD[1]-localZero[1]]}function clipByPanel(controller,cover,data){var panel=getPanelByCover(controller,cover);return(panel&&panel!==true)?panel.clipPath(data,controller._transform):clone(data)}function pointsToRect(points){var xmin=mathMin$6(points[0][0],points[1][0]);var ymin=mathMin$6(points[0][1],points[1][1]);var xmax=mathMax$6(points[0][0],points[1][0]);var ymax=mathMax$6(points[0][1],points[1][1]);return{x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin}}function resetCursor(controller,e,localCursorPoint){if(!controller._brushType){return}var zr=controller._zr;
var covers=controller._covers;var currPanel=getPanelByPoint(controller,e,localCursorPoint);if(!controller._dragging){for(var i=0;i<covers.length;i++){var brushOption=covers[i].__brushOption;if(currPanel&&(currPanel===true||brushOption.panelId===currPanel.panelId)&&coverRenderers[brushOption.brushType].contain(covers[i],localCursorPoint[0],localCursorPoint[1])){return}}}currPanel&&zr.setCursorStyle("crosshair")}function preventDefault(e){var rawE=e.event;rawE.preventDefault&&rawE.preventDefault()}function mainShapeContain(cover,x,y){return cover.childOfName("main").contain(x,y)}function updateCoverByMouse(controller,e,localCursorPoint,isEnd){var creatingCover=controller._creatingCover;var panel=controller._creatingPanel;var thisBrushOption=controller._brushOption;var eventParams;controller._track.push(localCursorPoint.slice());if(shouldShowCover(controller)||creatingCover){if(panel&&!creatingCover){thisBrushOption.brushMode==="single"&&clearCovers(controller);var brushOption=clone(thisBrushOption);brushOption.brushType=determineBrushType(brushOption.brushType,panel);brushOption.panelId=panel===true?null:panel.panelId;creatingCover=controller._creatingCover=createCover(controller,brushOption);controller._covers.push(creatingCover)}if(creatingCover){var coverRenderer=coverRenderers[determineBrushType(controller._brushType,panel)];var coverBrushOption=creatingCover.__brushOption;coverBrushOption.range=coverRenderer.getCreatingRange(clipByPanel(controller,creatingCover,controller._track));if(isEnd){endCreating(controller,creatingCover);coverRenderer.updateCommon(controller,creatingCover)}updateCoverShape(controller,creatingCover);eventParams={isEnd:isEnd}}}else{if(isEnd&&thisBrushOption.brushMode==="single"&&thisBrushOption.removeOnClick){if(getPanelByPoint(controller,e,localCursorPoint)&&clearCovers(controller)){eventParams={isEnd:isEnd,removeOnClick:true}}}}return eventParams}function determineBrushType(brushType,panel){if(brushType==="auto"){if(__DEV__){assert$1(panel&&panel.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"')
}return panel.defaultBrushType}return brushType}var mouseHandlers={mousedown:function(e){if(this._dragging){handleDragEnd.call(this,e)}else{if(!e.target||!e.target.draggable){preventDefault(e);var localCursorPoint=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var panel=this._creatingPanel=getPanelByPoint(this,e,localCursorPoint);if(panel){this._dragging=true;this._track=[localCursorPoint.slice()]}}}},mousemove:function(e){var localCursorPoint=this.group.transformCoordToLocal(e.offsetX,e.offsetY);resetCursor(this,e,localCursorPoint);if(this._dragging){preventDefault(e);var eventParams=updateCoverByMouse(this,e,localCursorPoint,false);eventParams&&trigger$1(this,eventParams)}},mouseup:handleDragEnd};function handleDragEnd(e){if(this._dragging){preventDefault(e);var localCursorPoint=this.group.transformCoordToLocal(e.offsetX,e.offsetY);var eventParams=updateCoverByMouse(this,e,localCursorPoint,true);this._dragging=false;this._track=[];this._creatingCover=null;eventParams&&trigger$1(this,eventParams)}}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(controller,brushOption){return createBaseRectCover(curry$2(driftRect,function(range){return range},function(range){return range}),controller,brushOption,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack);return formatRectRange(ends[1][0],ends[1][1],ends[0][0],ends[0][1])},updateCoverShape:function(controller,cover,localRange,brushOption){updateBaseRect(controller,cover,localRange,brushOption)},updateCommon:updateCommon,contain:mainShapeContain},polygon:{createCover:function(controller,brushOption){var cover=new Group();cover.add(new Polyline({name:"main",style:makeStyle(brushOption),silent:true}));return cover},getCreatingRange:function(localTrack){return localTrack},endCreating:function(controller,cover){cover.remove(cover.childAt(0));cover.add(new Polygon({name:"main",draggable:true,drift:curry$2(driftPolygon,controller,cover),ondragend:curry$2(trigger$1,controller,{isEnd:true})}))
},updateCoverShape:function(controller,cover,localRange,brushOption){cover.childAt(0).setShape({points:clipByPanel(controller,cover,localRange)})},updateCommon:updateCommon,contain:mainShapeContain}};function getLineRenderer(xyIndex){return{createCover:function(controller,brushOption){return createBaseRectCover(curry$2(driftRect,function(range){var rectRange=[range,[0,100]];xyIndex&&rectRange.reverse();return rectRange},function(rectRange){return rectRange[xyIndex]}),controller,brushOption,[["w","e"],["n","s"]][xyIndex])},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack);var min=mathMin$6(ends[0][xyIndex],ends[1][xyIndex]);var max=mathMax$6(ends[0][xyIndex],ends[1][xyIndex]);return[min,max]},updateCoverShape:function(controller,cover,localRange,brushOption){var otherExtent;var panel=getPanelByCover(controller,cover);if(panel!==true&&panel.getLinearBrushOtherExtent){otherExtent=panel.getLinearBrushOtherExtent(xyIndex,controller._transform)}else{var zr=controller._zr;otherExtent=[0,[zr.getWidth(),zr.getHeight()][1-xyIndex]]}var rectRange=[localRange,otherExtent];xyIndex&&rectRange.reverse();updateBaseRect(controller,cover,rectRange,brushOption)},updateCommon:updateCommon,contain:mainShapeContain}}function makeRectPanelClipPath(rect){rect=normalizeRect(rect);return function(localPoints,transform){return clipPointsByRect(localPoints,rect)}}function makeLinearBrushOtherExtent(rect,specifiedXYIndex){rect=normalizeRect(rect);return function(xyIndex){var idx=specifiedXYIndex!=null?specifiedXYIndex:xyIndex;var brushWidth=idx?rect.width:rect.height;var base=idx?rect.x:rect.y;return[base,base+(brushWidth||0)]}}function makeRectIsTargetByCursor(rect,api,targetModel){rect=normalizeRect(rect);return function(e,localCursorPoint,transform){return rect.contain(localCursorPoint[0],localCursorPoint[1])&&!onIrrelevantElement(e,api,targetModel)}}function normalizeRect(rect){return BoundingRect.create(rect)}var elementList=["axisLine","axisTickLabel","axisName"];var AxisView$2=extendComponentView({type:"parallelAxis",init:function(ecModel,api){AxisView$2.superApply(this,"init",arguments);
(this._brushController=new BrushController(api.getZr())).on("brush",bind(this._onBrush,this))},render:function(axisModel,ecModel,api,payload){if(fromAxisAreaSelect(axisModel,ecModel,payload)){return}this.axisModel=axisModel;this.api=api;this.group.removeAll();var oldAxisGroup=this._axisGroup;this._axisGroup=new Group();this.group.add(this._axisGroup);if(!axisModel.get("show")){return}var coordSysModel=getCoordSysModel(axisModel,ecModel);var coordSys=coordSysModel.coordinateSystem;var areaSelectStyle=axisModel.getAreaSelectStyle();var areaWidth=areaSelectStyle.width;var dim=axisModel.axis.dim;var axisLayout=coordSys.getAxisLayout(dim);var builderOpt=extend({strokeContainThreshold:areaWidth},axisLayout);var axisBuilder=new AxisBuilder(axisModel,builderOpt);each$1(elementList,axisBuilder.add,axisBuilder);this._axisGroup.add(axisBuilder.getGroup());this._refreshBrushController(builderOpt,areaSelectStyle,axisModel,coordSysModel,areaWidth,api);var animationModel=(payload&&payload.animation===false)?null:axisModel;groupTransition(oldAxisGroup,this._axisGroup,animationModel)},_refreshBrushController:function(builderOpt,areaSelectStyle,axisModel,coordSysModel,areaWidth,api){var extent=axisModel.axis.getExtent();var extentLen=extent[1]-extent[0];var extra=Math.min(30,Math.abs(extentLen)*0.1);var rect=BoundingRect.create({x:extent[0],y:-areaWidth/2,width:extentLen,height:areaWidth});rect.x-=extra;rect.width+=2*extra;this._brushController.mount({enableGlobalPan:true,rotation:builderOpt.rotation,position:builderOpt.position}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(rect),isTargetByCursor:makeRectIsTargetByCursor(rect,api,coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(rect,0)}]).enableBrush({brushType:"lineX",brushStyle:areaSelectStyle,removeOnClick:true}).updateCovers(getCoverInfoList(axisModel))},_onBrush:function(coverInfoList,opt){var axisModel=this.axisModel;var axis=axisModel.axis;var intervals=map(coverInfoList,function(coverInfo){return[axis.coordToData(coverInfo.range[0],true),axis.coordToData(coverInfo.range[1],true)]
});if(!axisModel.option.realtime===opt.isEnd||opt.removeOnClick){this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:axisModel.id,intervals:intervals})}},dispose:function(){this._brushController.dispose()}});function fromAxisAreaSelect(axisModel,ecModel,payload){return payload&&payload.type==="axisAreaSelect"&&ecModel.findComponents({mainType:"parallelAxis",query:payload})[0]===axisModel}function getCoverInfoList(axisModel){var axis=axisModel.axis;return map(axisModel.activeIntervals,function(interval){return{brushType:"lineX",panelId:"pl",range:[axis.dataToCoord(interval[0],true),axis.dataToCoord(interval[1],true)]}})}function getCoordSysModel(axisModel,ecModel){return ecModel.getComponent("parallel",axisModel.get("parallelIndex"))}var CLICK_THRESHOLD=5;extendComponentView({type:"parallel",render:function(parallelModel,ecModel,api){this._model=parallelModel;this._api=api;if(!this._handlers){this._handlers={};each$1(handlers,function(handler,eventName){api.getZr().on(eventName,this._handlers[eventName]=bind(handler,this))},this)}createOrUpdate(this,"_throttledDispatchExpand",parallelModel.get("axisExpandRate"),"fixRate")},dispose:function(ecModel,api){each$1(this._handlers,function(handler,eventName){api.getZr().off(eventName,handler)});this._handlers=null},_throttledDispatchExpand:function(opt){this._dispatchExpand(opt)},_dispatchExpand:function(opt){opt&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},opt))}});var handlers={mousedown:function(e){if(checkTrigger(this,"click")){this._mouseDownPoint=[e.offsetX,e.offsetY]}},mouseup:function(e){var mouseDownPoint=this._mouseDownPoint;if(checkTrigger(this,"click")&&mouseDownPoint){var point=[e.offsetX,e.offsetY];var dist=Math.pow(mouseDownPoint[0]-point[0],2)+Math.pow(mouseDownPoint[1]-point[1],2);if(dist>CLICK_THRESHOLD){return}var result=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);result.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:result.axisExpandWindow})
}this._mouseDownPoint=null},mousemove:function(e){if(this._mouseDownPoint||!checkTrigger(this,"mousemove")){return}var model=this._model;var result=model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);var behavior=result.behavior;behavior==="jump"&&this._throttledDispatchExpand.debounceNextCall(model.get("axisExpandDebounce"));this._throttledDispatchExpand(behavior==="none"?null:{axisExpandWindow:result.axisExpandWindow,animation:behavior==="jump"?null:false})}};function checkTrigger(view,triggerOn){var model=view._model;return model.get("axisExpandable")&&model.get("axisExpandTriggerOn")===triggerOn}registerPreprocessor(parallelPreprocessor);SeriesModel.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(option,ecModel){var source=this.getSource();setEncodeAndDimensions(source,this);return createListFromArray(source,this)},getRawIndicesByActiveState:function(activeState){var coordSys=this.coordinateSystem;var data=this.getData();var indices=[];coordSys.eachActiveState(data,function(theActiveState,dataIndex){if(activeState===theActiveState){indices.push(data.getRawIndex(dataIndex))}});return indices},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:false},inactiveOpacity:0.05,activeOpacity:1,lineStyle:{width:1,opacity:0.45,type:"solid"},emphasis:{label:{show:false}},progressive:500,smooth:false,animationEasing:"linear"}});function setEncodeAndDimensions(source,seriesModel){if(source.encodeDefine){return}var parallelModel=seriesModel.ecModel.getComponent("parallel",seriesModel.get("parallelIndex"));if(!parallelModel){return}var encodeDefine=source.encodeDefine=createHashMap();each$1(parallelModel.dimensions,function(axisDim){var dataDimIndex=convertDimNameToNumber(axisDim);encodeDefine.set(axisDim,dataDimIndex)})}function convertDimNameToNumber(dimName){return +dimName.replace("dim","")}var DEFAULT_SMOOTH=0.3;var ParallelView=Chart.extend({type:"parallel",init:function(){this._dataGroup=new Group();
this.group.add(this._dataGroup);this._data;this._initialized},render:function(seriesModel,ecModel,api,payload){var dataGroup=this._dataGroup;var data=seriesModel.getData();var oldData=this._data;var coordSys=seriesModel.coordinateSystem;var dimensions=coordSys.dimensions;var seriesScope=makeSeriesScope$2(seriesModel);data.diff(oldData).add(add).update(update).remove(remove).execute();function add(newDataIndex){var line=addEl(data,dataGroup,newDataIndex,dimensions,coordSys);updateElCommon(line,data,newDataIndex,seriesScope)}function update(newDataIndex,oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex);var points=createLinePoints(data,newDataIndex,dimensions,coordSys);data.setItemGraphicEl(newDataIndex,line);var animationModel=(payload&&payload.animation===false)?null:seriesModel;updateProps(line,{shape:{points:points}},animationModel,newDataIndex);updateElCommon(line,data,newDataIndex,seriesScope)}function remove(oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex);dataGroup.remove(line)}if(!this._initialized){this._initialized=true;var clipPath=createGridClipShape$1(coordSys,seriesModel,function(){setTimeout(function(){dataGroup.removeClipPath()})});dataGroup.setClipPath(clipPath)}this._data=data},incrementalPrepareRender:function(seriesModel,ecModel,api){this._initialized=true;this._data=null;this._dataGroup.removeAll()},incrementalRender:function(taskParams,seriesModel,ecModel){var data=seriesModel.getData();var coordSys=seriesModel.coordinateSystem;var dimensions=coordSys.dimensions;var seriesScope=makeSeriesScope$2(seriesModel);for(var dataIndex=taskParams.start;dataIndex<taskParams.end;dataIndex++){var line=addEl(data,this._dataGroup,dataIndex,dimensions,coordSys);line.incremental=true;updateElCommon(line,data,dataIndex,seriesScope)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll();this._data=null}});function createGridClipShape$1(coordSys,seriesModel,cb){var parallelModel=coordSys.model;var rect=coordSys.getRect();
var rectEl=new Rect({shape:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}});var dim=parallelModel.get("layout")==="horizontal"?"width":"height";rectEl.setShape(dim,0);initProps(rectEl,{shape:{width:rect.width,height:rect.height}},seriesModel,cb);return rectEl}function createLinePoints(data,dataIndex,dimensions,coordSys){var points=[];for(var i=0;i<dimensions.length;i++){var dimName=dimensions[i];var value=data.get(data.mapDimension(dimName),dataIndex);if(!isEmptyValue(value,coordSys.getAxis(dimName).type)){points.push(coordSys.dataToPoint(value,dimName))}}return points}function addEl(data,dataGroup,dataIndex,dimensions,coordSys){var points=createLinePoints(data,dataIndex,dimensions,coordSys);var line=new Polyline({shape:{points:points},silent:true,z2:10});dataGroup.add(line);data.setItemGraphicEl(dataIndex,line);return line}function makeSeriesScope$2(seriesModel){var smooth=seriesModel.get("smooth",true);smooth===true&&(smooth=DEFAULT_SMOOTH);return{lineStyle:seriesModel.getModel("lineStyle").getLineStyle(),smooth:smooth!=null?smooth:DEFAULT_SMOOTH}}function updateElCommon(el,data,dataIndex,seriesScope){var lineStyle=seriesScope.lineStyle;if(data.hasItemOption){var lineStyleModel=data.getItemModel(dataIndex).getModel("lineStyle");lineStyle=lineStyleModel.getLineStyle()}el.useStyle(lineStyle);var elStyle=el.style;elStyle.fill=null;elStyle.stroke=data.getItemVisual(dataIndex,"color");elStyle.opacity=data.getItemVisual(dataIndex,"opacity");seriesScope.smooth&&(el.shape.smooth=seriesScope.smooth)}function isEmptyValue(val,axisType){return axisType==="category"?val==null:(val==null||isNaN(val))}var opacityAccessPath$1=["lineStyle","normal","opacity"];var parallelVisual={seriesType:"parallel",reset:function(seriesModel,ecModel,api){var itemStyleModel=seriesModel.getModel("itemStyle");var lineStyleModel=seriesModel.getModel("lineStyle");var globalColors=ecModel.get("color");var color=lineStyleModel.get("color")||itemStyleModel.get("color")||globalColors[seriesModel.seriesIndex%globalColors.length];
var inactiveOpacity=seriesModel.get("inactiveOpacity");var activeOpacity=seriesModel.get("activeOpacity");var lineStyle=seriesModel.getModel("lineStyle").getLineStyle();var coordSys=seriesModel.coordinateSystem;var data=seriesModel.getData();var opacityMap={normal:lineStyle.opacity,active:activeOpacity,inactive:inactiveOpacity};data.setVisual("color",color);function progress(params,data){coordSys.eachActiveState(data,function(activeState,dataIndex){var opacity=opacityMap[activeState];if(activeState==="normal"&&data.hasItemOption){var itemOpacity=data.getItemModel(dataIndex).get(opacityAccessPath$1,true);itemOpacity!=null&&(opacity=itemOpacity)}data.setItemVisual(dataIndex,"opacity",opacity)},params.start,params.end)}return{progress:progress}}};registerVisual(parallelVisual);var SankeySeries=SeriesModel.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(option){var links=option.edges||option.links;var nodes=option.data||option.nodes;if(nodes&&links){var graph=createGraphFromNodeEdge(nodes,links,this,true);return graph.data}},setNodePosition:function(dataIndex,localPosition){var dataItem=this.option.data[dataIndex];dataItem.localX=localPosition[0];dataItem.localY=localPosition[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(dataIndex,multipleSeries,dataType){if(dataType==="edge"){var params=this.getDataParams(dataIndex,dataType);var rawDataOpt=params.data;var html=rawDataOpt.source+" -- "+rawDataOpt.target;if(params.value){html+=" : "+params.value}return encodeHTML(html)}return SankeySeries.superCall(this,"formatTooltip",dataIndex,multipleSeries)},optionUpdated:function(){var option=this.option;if(option.focusNodeAdjacency===true){option.focusNodeAdjacency="allEdges"}},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:true,focusNodeAdjacency:false,layoutIterations:32,label:{show:true,position:"right",color:"#000",fontSize:12},itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:0.2,curveness:0.5},emphasis:{label:{show:true},lineStyle:{opacity:0.6}},animationEasing:"linear",animationDuration:1000}});
var nodeOpacityPath$1=["itemStyle","opacity"];var lineOpacityPath$1=["lineStyle","opacity"];function getItemOpacity$1(item,opacityPath){return item.getVisual("opacity")||item.getModel().get(opacityPath)}function fadeOutItem$1(item,opacityPath,opacityRatio){var el=item.getGraphicEl();var opacity=getItemOpacity$1(item,opacityPath);if(opacityRatio!=null){opacity==null&&(opacity=1);opacity*=opacityRatio}el.downplay&&el.downplay();el.traverse(function(child){if(child.type!=="group"){child.setStyle("opacity",opacity)}})}function fadeInItem$1(item,opacityPath){var opacity=getItemOpacity$1(item,opacityPath);var el=item.getGraphicEl();el.highlight&&el.highlight();el.traverse(function(child){if(child.type!=="group"){child.setStyle("opacity",opacity)}})}var SankeyShape=extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(ctx,shape){var extent=shape.extent;var orient=shape.orient;if(orient==="vertical"){ctx.moveTo(shape.x1,shape.y1);ctx.bezierCurveTo(shape.cpx1,shape.cpy1,shape.cpx2,shape.cpy2,shape.x2,shape.y2);ctx.lineTo(shape.x2+extent,shape.y2);ctx.bezierCurveTo(shape.cpx2+extent,shape.cpy2,shape.cpx1+extent,shape.cpy1,shape.x1+extent,shape.y1)}else{ctx.moveTo(shape.x1,shape.y1);ctx.bezierCurveTo(shape.cpx1,shape.cpy1,shape.cpx2,shape.cpy2,shape.x2,shape.y2);ctx.lineTo(shape.x2,shape.y2+extent);ctx.bezierCurveTo(shape.cpx2,shape.cpy2+extent,shape.cpx1,shape.cpy1+extent,shape.x1,shape.y1+extent)}ctx.closePath()}});extendChartView({type:"sankey",_model:null,_focusAdjacencyDisabled:false,render:function(seriesModel,ecModel,api){var sankeyView=this;var graph=seriesModel.getGraph();var group=this.group;var layoutInfo=seriesModel.layoutInfo;var width=layoutInfo.width;var height=layoutInfo.height;var nodeData=seriesModel.getData();var edgeData=seriesModel.getData("edge");var orient=seriesModel.get("orient");this._model=seriesModel;group.removeAll();group.attr("position",[layoutInfo.x,layoutInfo.y]);graph.eachEdge(function(edge){var curve=new SankeyShape();
curve.dataIndex=edge.dataIndex;curve.seriesIndex=seriesModel.seriesIndex;curve.dataType="edge";var lineStyleModel=edge.getModel("lineStyle");var curvature=lineStyleModel.get("curveness");var n1Layout=edge.node1.getLayout();var node1Model=edge.node1.getModel();var dragX1=node1Model.get("localX");var dragY1=node1Model.get("localY");var n2Layout=edge.node2.getLayout();var node2Model=edge.node2.getModel();var dragX2=node2Model.get("localX");var dragY2=node2Model.get("localY");var edgeLayout=edge.getLayout();var x1;var y1;var x2;var y2;var cpx1;var cpy1;var cpx2;var cpy2;curve.shape.extent=Math.max(1,edgeLayout.dy);curve.shape.orient=orient;if(orient==="vertical"){x1=(dragX1!=null?dragX1*width:n1Layout.x)+edgeLayout.sy;y1=(dragY1!=null?dragY1*height:n1Layout.y)+n1Layout.dy;x2=(dragX2!=null?dragX2*width:n2Layout.x)+edgeLayout.ty;y2=dragY2!=null?dragY2*height:n2Layout.y;cpx1=x1;cpy1=y1*(1-curvature)+y2*curvature;cpx2=x2;cpy2=y1*curvature+y2*(1-curvature)}else{x1=(dragX1!=null?dragX1*width:n1Layout.x)+n1Layout.dx;y1=(dragY1!=null?dragY1*height:n1Layout.y)+edgeLayout.sy;x2=dragX2!=null?dragX2*width:n2Layout.x;y2=(dragY2!=null?dragY2*height:n2Layout.y)+edgeLayout.ty;cpx1=x1*(1-curvature)+x2*curvature;cpy1=y1;cpx2=x1*curvature+x2*(1-curvature);cpy2=y2}curve.setShape({x1:x1,y1:y1,x2:x2,y2:y2,cpx1:cpx1,cpy1:cpy1,cpx2:cpx2,cpy2:cpy2});curve.setStyle(lineStyleModel.getItemStyle());switch(curve.style.fill){case"source":curve.style.fill=edge.node1.getVisual("color");break;case"target":curve.style.fill=edge.node2.getVisual("color");break}setHoverStyle(curve,edge.getModel("emphasis.lineStyle").getItemStyle());group.add(curve);edgeData.setItemGraphicEl(edge.dataIndex,curve)});graph.eachNode(function(node){var layout=node.getLayout();var itemModel=node.getModel();var dragX=itemModel.get("localX");var dragY=itemModel.get("localY");var labelModel=itemModel.getModel("label");var labelHoverModel=itemModel.getModel("emphasis.label");var rect=new Rect({shape:{x:dragX!=null?dragX*width:layout.x,y:dragY!=null?dragY*height:layout.y,width:layout.dx,height:layout.dy},style:itemModel.getModel("itemStyle").getItemStyle()});
var hoverStyle=node.getModel("emphasis.itemStyle").getItemStyle();setLabelStyle(rect.style,hoverStyle,labelModel,labelHoverModel,{labelFetcher:seriesModel,labelDataIndex:node.dataIndex,defaultText:node.id,isRectText:true});rect.setStyle("fill",node.getVisual("color"));setHoverStyle(rect,hoverStyle);group.add(rect);nodeData.setItemGraphicEl(node.dataIndex,rect);rect.dataType="node"});nodeData.eachItemGraphicEl(function(el,dataIndex){var itemModel=nodeData.getItemModel(dataIndex);if(itemModel.get("draggable")){el.drift=function(dx,dy){sankeyView._focusAdjacencyDisabled=true;this.shape.x+=dx;this.shape.y+=dy;this.dirty();api.dispatchAction({type:"dragNode",seriesId:seriesModel.id,dataIndex:nodeData.getRawIndex(dataIndex),localX:this.shape.x/width,localY:this.shape.y/height})};el.ondragend=function(){sankeyView._focusAdjacencyDisabled=false};el.draggable=true;el.cursor="move"}if(itemModel.get("focusNodeAdjacency")){el.off("mouseover").on("mouseover",function(){if(!sankeyView._focusAdjacencyDisabled){api.dispatchAction({type:"focusNodeAdjacency",seriesId:seriesModel.id,dataIndex:el.dataIndex})}});el.off("mouseout").on("mouseout",function(){if(!sankeyView._focusAdjacencyDisabled){api.dispatchAction({type:"unfocusNodeAdjacency",seriesId:seriesModel.id})}})}});edgeData.eachItemGraphicEl(function(el,dataIndex){var edgeModel=edgeData.getItemModel(dataIndex);if(edgeModel.get("focusNodeAdjacency")){el.off("mouseover").on("mouseover",function(){if(!sankeyView._focusAdjacencyDisabled){api.dispatchAction({type:"focusNodeAdjacency",seriesId:seriesModel.id,edgeDataIndex:el.dataIndex})}});el.off("mouseout").on("mouseout",function(){if(!sankeyView._focusAdjacencyDisabled){api.dispatchAction({type:"unfocusNodeAdjacency",seriesId:seriesModel.id})}})}});if(!this._data&&seriesModel.get("animation")){group.setClipPath(createGridClipShape$2(group.getBoundingRect(),seriesModel,function(){group.removeClipPath()}))}this._data=seriesModel.getData()},dispose:function(){},focusNodeAdjacency:function(seriesModel,ecModel,api,payload){var data=this._model.getData();
var graph=data.graph;var dataIndex=payload.dataIndex;var itemModel=data.getItemModel(dataIndex);var edgeDataIndex=payload.edgeDataIndex;if(dataIndex==null&&edgeDataIndex==null){return}var node=graph.getNodeByIndex(dataIndex);var edge=graph.getEdgeByIndex(edgeDataIndex);graph.eachNode(function(node){fadeOutItem$1(node,nodeOpacityPath$1,0.1)});graph.eachEdge(function(edge){fadeOutItem$1(edge,lineOpacityPath$1,0.1)});if(node){fadeInItem$1(node,nodeOpacityPath$1);var focusNodeAdj=itemModel.get("focusNodeAdjacency");if(focusNodeAdj==="outEdges"){each$1(node.outEdges,function(edge){if(edge.dataIndex<0){return}fadeInItem$1(edge,lineOpacityPath$1);fadeInItem$1(edge.node2,nodeOpacityPath$1)})}else{if(focusNodeAdj==="inEdges"){each$1(node.inEdges,function(edge){if(edge.dataIndex<0){return}fadeInItem$1(edge,lineOpacityPath$1);fadeInItem$1(edge.node1,nodeOpacityPath$1)})}else{if(focusNodeAdj==="allEdges"){each$1(node.edges,function(edge){if(edge.dataIndex<0){return}fadeInItem$1(edge,lineOpacityPath$1);fadeInItem$1(edge.node1,nodeOpacityPath$1);fadeInItem$1(edge.node2,nodeOpacityPath$1)})}}}}if(edge){fadeInItem$1(edge,lineOpacityPath$1);fadeInItem$1(edge.node1,nodeOpacityPath$1);fadeInItem$1(edge.node2,nodeOpacityPath$1)}},unfocusNodeAdjacency:function(seriesModel,ecModel,api,payload){var graph=this._model.getGraph();graph.eachNode(function(node){fadeOutItem$1(node,nodeOpacityPath$1)});graph.eachEdge(function(edge){fadeOutItem$1(edge,lineOpacityPath$1)})}});function createGridClipShape$2(rect,seriesModel,cb){var rectEl=new Rect({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});initProps(rectEl,{shape:{width:rect.width+20,height:rect.height+20}},seriesModel,cb);return rectEl}registerAction({type:"dragNode",event:"dragNode",update:"update"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"sankey",query:payload},function(seriesModel){seriesModel.setNodePosition(payload.dataIndex,[payload.localX,payload.localY])})});function nest(){var keysFunction=[];
var sortKeysFunction=[];function map$$1(array,depth){if(depth>=keysFunction.length){return array}var i=-1;var n=array.length;var keyFunction=keysFunction[depth++];var mapObject={};var valuesByKey={};while(++i<n){var keyValue=keyFunction(array[i]);var values=valuesByKey[keyValue];if(values){values.push(array[i])}else{valuesByKey[keyValue]=[array[i]]}}each$1(valuesByKey,function(value,key){mapObject[key]=map$$1(value,depth)});return mapObject}function entriesMap(mapObject,depth){if(depth>=keysFunction.length){return mapObject}var array=[];var sortKeyFunction=sortKeysFunction[depth++];each$1(mapObject,function(value,key){array.push({key:key,values:entriesMap(value,depth)})});if(sortKeyFunction){return array.sort(function(a,b){return sortKeyFunction(a.key,b.key)})}return array}return{key:function(d){keysFunction.push(d);return this},sortKeys:function(order){sortKeysFunction[keysFunction.length-1]=order;return this},entries:function(array){return entriesMap(map$$1(array,0),0)}}}var sankeyLayout=function(ecModel,api,payload){ecModel.eachSeriesByType("sankey",function(seriesModel){var nodeWidth=seriesModel.get("nodeWidth");var nodeGap=seriesModel.get("nodeGap");var layoutInfo=getViewRect$3(seriesModel,api);seriesModel.layoutInfo=layoutInfo;var width=layoutInfo.width;var height=layoutInfo.height;var graph=seriesModel.getGraph();var nodes=graph.nodes;var edges=graph.edges;computeNodeValues(nodes);var filteredNodes=filter(nodes,function(node){return node.getLayout().value===0});var iterations=filteredNodes.length!==0?0:seriesModel.get("layoutIterations");var orient=seriesModel.get("orient");layoutSankey(nodes,edges,nodeWidth,nodeGap,width,height,iterations,orient)})};function getViewRect$3(seriesModel,api){return getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}function layoutSankey(nodes,edges,nodeWidth,nodeGap,width,height,iterations,orient){computeNodeBreadths(nodes,edges,nodeWidth,width,height,orient);computeNodeDepths(nodes,edges,height,width,nodeGap,iterations,orient);
computeEdgeDepths(nodes,orient)}function computeNodeValues(nodes){each$1(nodes,function(node){var value1=sum(node.outEdges,getEdgeValue);var value2=sum(node.inEdges,getEdgeValue);var value=Math.max(value1,value2);node.setLayout({value:value},true)})}function computeNodeBreadths(nodes,edges,nodeWidth,width,height,orient){var remainEdges=[];var indegreeArr=[];var zeroIndegrees=[];var nextNode=[];var x=0;var kx=0;for(var i=0;i<edges.length;i++){remainEdges[i]=1}for(i=0;i<nodes.length;i++){indegreeArr[i]=nodes[i].inEdges.length;if(indegreeArr[i]===0){zeroIndegrees.push(nodes[i])}}while(zeroIndegrees.length){for(var idx=0;idx<zeroIndegrees.length;idx++){var node=zeroIndegrees[idx];if(orient==="vertical"){node.setLayout({y:x},true);node.setLayout({dy:nodeWidth},true)}else{node.setLayout({x:x},true);node.setLayout({dx:nodeWidth},true)}for(var oidx=0;oidx<node.outEdges.length;oidx++){var edge=node.outEdges[oidx];var indexEdge=edges.indexOf(edge);remainEdges[indexEdge]=0;var targetNode=edge.node2;var nodeIndex=nodes.indexOf(targetNode);if(--indegreeArr[nodeIndex]===0){nextNode.push(targetNode)}}}++x;zeroIndegrees=nextNode;nextNode=[]}for(i=0;i<remainEdges.length;i++){if(__DEV__){if(remainEdges[i]===1){throw new Error("Sankey is a DAG, the original data has cycle!")}}}moveSinksRight(nodes,x,orient);if(orient==="vertical"){kx=(height-nodeWidth)/(x-1)}else{kx=(width-nodeWidth)/(x-1)}scaleNodeBreadths(nodes,kx,orient)}function moveSinksRight(nodes,x,orient){each$1(nodes,function(node){if(!node.outEdges.length){if(orient==="vertical"){node.setLayout({y:x-1},true)}else{node.setLayout({x:x-1},true)}}})}function scaleNodeBreadths(nodes,kx,orient){each$1(nodes,function(node){if(orient==="vertical"){var nodeY=node.getLayout().y*kx;node.setLayout({y:nodeY},true)}else{var nodeX=node.getLayout().x*kx;node.setLayout({x:nodeX},true)}})}function computeNodeDepths(nodes,edges,height,width,nodeGap,iterations,orient){var nodesByBreadth=nest().key(getKeyFunction(orient)).sortKeys(function(a,b){return a-b
}).entries(nodes).map(function(d){return d.values});initializeNodeDepth(nodes,nodesByBreadth,edges,height,width,nodeGap,orient);resolveCollisions(nodesByBreadth,nodeGap,height,width,orient);for(var alpha=1;iterations>0;iterations--){alpha*=0.99;relaxRightToLeft(nodesByBreadth,alpha,orient);resolveCollisions(nodesByBreadth,nodeGap,height,width,orient);relaxLeftToRight(nodesByBreadth,alpha,orient);resolveCollisions(nodesByBreadth,nodeGap,height,width,orient)}}function getKeyFunction(orient){if(orient==="vertical"){return function(d){return d.getLayout().y}}return function(d){return d.getLayout().x}}function initializeNodeDepth(nodes,nodesByBreadth,edges,height,width,nodeGap,orient){var kyArray=[];each$1(nodesByBreadth,function(nodes){var n=nodes.length;var sum=0;var ky=0;each$1(nodes,function(node){sum+=node.getLayout().value});if(orient==="vertical"){ky=(width-(n-1)*nodeGap)/sum}else{ky=(height-(n-1)*nodeGap)/sum}kyArray.push(ky)});kyArray.sort(function(a,b){return a-b});var ky0=kyArray[0];each$1(nodesByBreadth,function(nodes){each$1(nodes,function(node,i){var nodeDy=node.getLayout().value*ky0;if(orient==="vertical"){node.setLayout({x:i},true);node.setLayout({dx:nodeDy},true)}else{node.setLayout({y:i},true);node.setLayout({dy:nodeDy},true)}})});each$1(edges,function(edge){var edgeDy=+edge.getValue()*ky0;edge.setLayout({dy:edgeDy},true)})}function resolveCollisions(nodesByBreadth,nodeGap,height,width,orient){each$1(nodesByBreadth,function(nodes){var node;var dy;var y0=0;var n=nodes.length;var i;if(orient==="vertical"){var nodeX;nodes.sort(function(a,b){return a.getLayout().x-b.getLayout().x});for(i=0;i<n;i++){node=nodes[i];dy=y0-node.getLayout().x;if(dy>0){nodeX=node.getLayout().x+dy;node.setLayout({x:nodeX},true)}y0=node.getLayout().x+node.getLayout().dx+nodeGap}dy=y0-nodeGap-width;if(dy>0){nodeX=node.getLayout().x-dy;node.setLayout({x:nodeX},true);y0=nodeX;for(i=n-2;i>=0;--i){node=nodes[i];dy=node.getLayout().x+node.getLayout().dx+nodeGap-y0;if(dy>0){nodeX=node.getLayout().x-dy;
node.setLayout({x:nodeX},true)}y0=node.getLayout().x}}}else{var nodeY;nodes.sort(function(a,b){return a.getLayout().y-b.getLayout().y});for(i=0;i<n;i++){node=nodes[i];dy=y0-node.getLayout().y;if(dy>0){nodeY=node.getLayout().y+dy;node.setLayout({y:nodeY},true)}y0=node.getLayout().y+node.getLayout().dy+nodeGap}dy=y0-nodeGap-height;if(dy>0){nodeY=node.getLayout().y-dy;node.setLayout({y:nodeY},true);y0=nodeY;for(i=n-2;i>=0;--i){node=nodes[i];dy=node.getLayout().y+node.getLayout().dy+nodeGap-y0;if(dy>0){nodeY=node.getLayout().y-dy;node.setLayout({y:nodeY},true)}y0=node.getLayout().y}}}})}function relaxRightToLeft(nodesByBreadth,alpha,orient){each$1(nodesByBreadth.slice().reverse(),function(nodes){each$1(nodes,function(node){if(node.outEdges.length){var y=sum(node.outEdges,weightedTarget,orient)/sum(node.outEdges,getEdgeValue,orient);if(orient==="vertical"){var nodeX=node.getLayout().x+(y-center$1(node,orient))*alpha;node.setLayout({x:nodeX},true)}else{var nodeY=node.getLayout().y+(y-center$1(node,orient))*alpha;node.setLayout({y:nodeY},true)}}})})}function weightedTarget(edge,orient){return center$1(edge.node2,orient)*edge.getValue()}function weightedSource(edge,orient){return center$1(edge.node1,orient)*edge.getValue()}function center$1(node,orient){if(orient==="vertical"){return node.getLayout().x+node.getLayout().dx/2}return node.getLayout().y+node.getLayout().dy/2}function getEdgeValue(edge){return edge.getValue()}function sum(array,f,orient){var sum=0;var len=array.length;var i=-1;while(++i<len){var value=+f.call(array,array[i],orient);if(!isNaN(value)){sum+=value}}return sum}function relaxLeftToRight(nodesByBreadth,alpha,orient){each$1(nodesByBreadth,function(nodes){each$1(nodes,function(node){if(node.inEdges.length){var y=sum(node.inEdges,weightedSource,orient)/sum(node.inEdges,getEdgeValue,orient);if(orient==="vertical"){var nodeX=node.getLayout().x+(y-center$1(node,orient))*alpha;node.setLayout({x:nodeX},true)}else{var nodeY=node.getLayout().y+(y-center$1(node,orient))*alpha;
node.setLayout({y:nodeY},true)}}})})}function computeEdgeDepths(nodes,orient){each$1(nodes,function(node){if(orient==="vertical"){node.outEdges.sort(function(a,b){return a.node2.getLayout().x-b.node2.getLayout().x});node.inEdges.sort(function(a,b){return a.node1.getLayout().x-b.node1.getLayout().x})}else{node.outEdges.sort(function(a,b){return a.node2.getLayout().y-b.node2.getLayout().y});node.inEdges.sort(function(a,b){return a.node1.getLayout().y-b.node1.getLayout().y})}});each$1(nodes,function(node){var sy=0;var ty=0;each$1(node.outEdges,function(edge){edge.setLayout({sy:sy},true);sy+=edge.getLayout().dy});each$1(node.inEdges,function(edge){edge.setLayout({ty:ty},true);ty+=edge.getLayout().dy})})}var sankeyVisual=function(ecModel,payload){ecModel.eachSeriesByType("sankey",function(seriesModel){var graph=seriesModel.getGraph();var nodes=graph.nodes;if(nodes.length){var minValue=Infinity;var maxValue=-Infinity;each$1(nodes,function(node){var nodeValue=node.getLayout().value;if(nodeValue<minValue){minValue=nodeValue}if(nodeValue>maxValue){maxValue=nodeValue}});each$1(nodes,function(node){var mapping=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[minValue,maxValue],visual:seriesModel.get("color")});var mapValueToColor=mapping.mapValueToVisual(node.getLayout().value);node.setVisual("color",mapValueToColor);var itemModel=node.getModel();var customColor=itemModel.get("itemStyle.color");if(customColor!=null){node.setVisual("color",customColor)}})}})};registerLayout(sankeyLayout);registerVisual(sankeyVisual);var seriesModelMixin={_baseAxisDim:null,getInitialData:function(option,ecModel){var ordinalMeta;var xAxisModel=ecModel.getComponent("xAxis",this.get("xAxisIndex"));var yAxisModel=ecModel.getComponent("yAxis",this.get("yAxisIndex"));var xAxisType=xAxisModel.get("type");var yAxisType=yAxisModel.get("type");var addOrdinal;if(xAxisType==="category"){option.layout="horizontal";ordinalMeta=xAxisModel.getOrdinalMeta();addOrdinal=true}else{if(yAxisType==="category"){option.layout="vertical";
ordinalMeta=yAxisModel.getOrdinalMeta();addOrdinal=true}else{option.layout=option.layout||"horizontal"}}var coordDims=["x","y"];var baseAxisDimIndex=option.layout==="horizontal"?0:1;var baseAxisDim=this._baseAxisDim=coordDims[baseAxisDimIndex];var otherAxisDim=coordDims[1-baseAxisDimIndex];var axisModels=[xAxisModel,yAxisModel];var baseAxisType=axisModels[baseAxisDimIndex].get("type");var otherAxisType=axisModels[1-baseAxisDimIndex].get("type");var data=option.data;if(data&&addOrdinal){var newOptionData=[];each$1(data,function(item,index){var newItem;if(item.value&&isArray(item.value)){newItem=item.value.slice();item.value.unshift(index)}else{if(isArray(item)){newItem=item.slice();item.unshift(index)}else{newItem=item}}newOptionData.push(newItem)});option.data=newOptionData}var defaultValueDimensions=this.defaultValueDimensions;return createListSimply(this,{coordDimensions:[{name:baseAxisDim,type:getDimensionTypeByAxis(baseAxisType),ordinalMeta:ordinalMeta,otherDims:{tooltip:false,itemName:0},dimsDef:["base"]},{name:otherAxisDim,type:getDimensionTypeByAxis(otherAxisType),dimsDef:defaultValueDimensions.slice()}],dimensionsCount:defaultValueDimensions.length+1})},getBaseAxis:function(){var dim=this._baseAxisDim;return this.ecModel.getComponent(dim+"Axis",this.get(dim+"AxisIndex")).axis}};var BoxplotSeries=SeriesModel.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:true},{name:"Q1",defaultTooltip:true},{name:"median",defaultTooltip:true},{name:"Q3",defaultTooltip:true},{name:"max",defaultTooltip:true}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});mixin(BoxplotSeries,seriesModelMixin,true);var NORMAL_ITEM_STYLE_PATH=["itemStyle"];
var EMPHASIS_ITEM_STYLE_PATH=["emphasis","itemStyle"];var BoxplotView=Chart.extend({type:"boxplot",render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var group=this.group;var oldData=this._data;if(!this._data){group.removeAll()}var constDim=seriesModel.get("layout")==="horizontal"?1:0;data.diff(oldData).add(function(newIdx){if(data.hasValue(newIdx)){var itemLayout=data.getItemLayout(newIdx);var symbolEl=createNormalBox(itemLayout,data,newIdx,constDim,true);data.setItemGraphicEl(newIdx,symbolEl);group.add(symbolEl)}}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);if(!data.hasValue(newIdx)){group.remove(symbolEl);return}var itemLayout=data.getItemLayout(newIdx);if(!symbolEl){symbolEl=createNormalBox(itemLayout,data,newIdx,constDim)}else{updateNormalBoxData(itemLayout,symbolEl,data,newIdx)}group.add(symbolEl);data.setItemGraphicEl(newIdx,symbolEl)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&group.remove(el)}).execute();this._data=data},remove:function(ecModel){var group=this.group;var data=this._data;this._data=null;data&&data.eachItemGraphicEl(function(el){el&&group.remove(el)})},dispose:noop});var BoxPath=Path.extend({type:"boxplotBoxPath",shape:{},buildPath:function(ctx,shape){var ends=shape.points;var i=0;ctx.moveTo(ends[i][0],ends[i][1]);i++;for(;i<4;i++){ctx.lineTo(ends[i][0],ends[i][1])}ctx.closePath();for(;i<ends.length;i++){ctx.moveTo(ends[i][0],ends[i][1]);i++;ctx.lineTo(ends[i][0],ends[i][1])}}});function createNormalBox(itemLayout,data,dataIndex,constDim,isInit){var ends=itemLayout.ends;var el=new BoxPath({shape:{points:isInit?transInit(ends,constDim,itemLayout):ends}});updateNormalBoxData(itemLayout,el,data,dataIndex,isInit);return el}function updateNormalBoxData(itemLayout,el,data,dataIndex,isInit){var seriesModel=data.hostModel;var updateMethod=graphic[isInit?"initProps":"updateProps"];updateMethod(el,{shape:{points:itemLayout.ends}},seriesModel,dataIndex);var itemModel=data.getItemModel(dataIndex);
var normalItemStyleModel=itemModel.getModel(NORMAL_ITEM_STYLE_PATH);var borderColor=data.getItemVisual(dataIndex,"color");var itemStyle=normalItemStyleModel.getItemStyle(["borderColor"]);itemStyle.stroke=borderColor;itemStyle.strokeNoScale=true;el.useStyle(itemStyle);el.z2=100;var hoverStyle=itemModel.getModel(EMPHASIS_ITEM_STYLE_PATH).getItemStyle();setHoverStyle(el,hoverStyle)}function transInit(points,dim,itemLayout){return map(points,function(point){point=point.slice();point[dim]=itemLayout.initBaseline;return point})}var borderColorQuery=["itemStyle","borderColor"];var boxplotVisual=function(ecModel,api){var globalColors=ecModel.get("color");ecModel.eachRawSeriesByType("boxplot",function(seriesModel){var defaulColor=globalColors[seriesModel.seriesIndex%globalColors.length];var data=seriesModel.getData();data.setVisual({legendSymbol:"roundRect",color:seriesModel.get(borderColorQuery)||defaulColor});if(!ecModel.isSeriesFiltered(seriesModel)){data.each(function(idx){var itemModel=data.getItemModel(idx);data.setItemVisual(idx,{color:itemModel.get(borderColorQuery,true)})})}})};var each$13=each$1;var boxplotLayout=function(ecModel){var groupResult=groupSeriesByAxis(ecModel);each$13(groupResult,function(groupItem){var seriesModels=groupItem.seriesModels;if(!seriesModels.length){return}calculateBase(groupItem);each$13(seriesModels,function(seriesModel,idx){layoutSingleSeries(seriesModel,groupItem.boxOffsetList[idx],groupItem.boxWidthList[idx])})})};function groupSeriesByAxis(ecModel){var result=[];var axisList=[];ecModel.eachSeriesByType("boxplot",function(seriesModel){var baseAxis=seriesModel.getBaseAxis();var idx=indexOf(axisList,baseAxis);if(idx<0){idx=axisList.length;axisList[idx]=baseAxis;result[idx]={axis:baseAxis,seriesModels:[]}}result[idx].seriesModels.push(seriesModel)});return result}function calculateBase(groupItem){var extent;var baseAxis=groupItem.axis;var seriesModels=groupItem.seriesModels;var seriesCount=seriesModels.length;var boxWidthList=groupItem.boxWidthList=[];
var boxOffsetList=groupItem.boxOffsetList=[];var boundList=[];var bandWidth;if(baseAxis.type==="category"){bandWidth=baseAxis.getBandWidth()}else{var maxDataCount=0;each$13(seriesModels,function(seriesModel){maxDataCount=Math.max(maxDataCount,seriesModel.getData().count())});extent=baseAxis.getExtent(),Math.abs(extent[1]-extent[0])/maxDataCount}each$13(seriesModels,function(seriesModel){var boxWidthBound=seriesModel.get("boxWidth");if(!isArray(boxWidthBound)){boxWidthBound=[boxWidthBound,boxWidthBound]}boundList.push([parsePercent$1(boxWidthBound[0],bandWidth)||0,parsePercent$1(boxWidthBound[1],bandWidth)||0])});var availableWidth=bandWidth*0.8-2;var boxGap=availableWidth/seriesCount*0.3;var boxWidth=(availableWidth-boxGap*(seriesCount-1))/seriesCount;var base=boxWidth/2-availableWidth/2;each$13(seriesModels,function(seriesModel,idx){boxOffsetList.push(base);base+=boxGap+boxWidth;boxWidthList.push(Math.min(Math.max(boxWidth,boundList[idx][0]),boundList[idx][1]))})}function layoutSingleSeries(seriesModel,offset,boxWidth){var coordSys=seriesModel.coordinateSystem;var data=seriesModel.getData();var halfWidth=boxWidth/2;var cDimIdx=seriesModel.get("layout")==="horizontal"?0:1;var vDimIdx=1-cDimIdx;var coordDims=["x","y"];var cDim=data.mapDimension(coordDims[cDimIdx]);var vDims=data.mapDimension(coordDims[vDimIdx],true);if(cDim==null||vDims.length<5){return}for(var dataIndex=0;dataIndex<data.count();dataIndex++){var axisDimVal=data.get(cDim,dataIndex);var median=getPoint(axisDimVal,vDims[2],dataIndex);var end1=getPoint(axisDimVal,vDims[0],dataIndex);var end2=getPoint(axisDimVal,vDims[1],dataIndex);var end4=getPoint(axisDimVal,vDims[3],dataIndex);var end5=getPoint(axisDimVal,vDims[4],dataIndex);var ends=[];addBodyEnd(ends,end2,0);addBodyEnd(ends,end4,1);ends.push(end1,end2,end5,end4);layEndLine(ends,end1);layEndLine(ends,end5);layEndLine(ends,median);data.setItemLayout(dataIndex,{initBaseline:median[vDimIdx],ends:ends})}function getPoint(axisDimVal,dimIdx,dataIndex){var val=data.get(dimIdx,dataIndex);
var p=[];p[cDimIdx]=axisDimVal;p[vDimIdx]=val;var point;if(isNaN(axisDimVal)||isNaN(val)){point=[NaN,NaN]}else{point=coordSys.dataToPoint(p);point[cDimIdx]+=offset}return point}function addBodyEnd(ends,point,start){var point1=point.slice();var point2=point.slice();point1[cDimIdx]+=halfWidth;point2[cDimIdx]-=halfWidth;start?ends.push(point1,point2):ends.push(point2,point1)}function layEndLine(ends,endCenter){var from=endCenter.slice();var to=endCenter.slice();from[cDimIdx]-=halfWidth;to[cDimIdx]+=halfWidth;ends.push(from,to)}}registerVisual(boxplotVisual);registerLayout(boxplotLayout);var CandlestickSeries=SeriesModel.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:true},{name:"close",defaultTooltip:true},{name:"lowest",defaultTooltip:true},{name:"highest",defaultTooltip:true}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,layout:null,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:true,largeThreshold:600,progressive:3000,progressiveThreshold:10000,progressiveChunkMode:"mod",animationUpdate:false,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(dataIndex,data,selectors){var itemLayout=data.getItemLayout(dataIndex);return itemLayout&&selectors.rect(itemLayout.brushRect)}});mixin(CandlestickSeries,seriesModelMixin,true);var NORMAL_ITEM_STYLE_PATH$1=["itemStyle"];var EMPHASIS_ITEM_STYLE_PATH$1=["emphasis","itemStyle"];var SKIP_PROPS=["color","color0","borderColor","borderColor0"];var CandlestickView=Chart.extend({type:"candlestick",render:function(seriesModel,ecModel,api){this._updateDrawMode(seriesModel);this._isLargeDraw?this._renderLarge(seriesModel):this._renderNormal(seriesModel)},incrementalPrepareRender:function(seriesModel,ecModel,api){this._clear();
this._updateDrawMode(seriesModel)},incrementalRender:function(params,seriesModel,ecModel,api){this._isLargeDraw?this._incrementalRenderLarge(params,seriesModel):this._incrementalRenderNormal(params,seriesModel)},_updateDrawMode:function(seriesModel){var isLargeDraw=seriesModel.pipelineContext.large;if(this._isLargeDraw==null||isLargeDraw^this._isLargeDraw){this._isLargeDraw=isLargeDraw;this._clear()}},_renderNormal:function(seriesModel){var data=seriesModel.getData();var oldData=this._data;var group=this.group;var isSimpleBox=data.getLayout("isSimpleBox");if(!this._data){group.removeAll()}data.diff(oldData).add(function(newIdx){if(data.hasValue(newIdx)){var el;var itemLayout=data.getItemLayout(newIdx);el=createNormalBox$1(itemLayout,newIdx,true);initProps(el,{shape:{points:itemLayout.ends}},seriesModel,newIdx);setBoxCommon(el,data,newIdx,isSimpleBox);group.add(el);data.setItemGraphicEl(newIdx,el)}}).update(function(newIdx,oldIdx){var el=oldData.getItemGraphicEl(oldIdx);if(!data.hasValue(newIdx)){group.remove(el);return}var itemLayout=data.getItemLayout(newIdx);if(!el){el=createNormalBox$1(itemLayout,newIdx)}else{updateProps(el,{shape:{points:itemLayout.ends}},seriesModel,newIdx)}setBoxCommon(el,data,newIdx,isSimpleBox);group.add(el);data.setItemGraphicEl(newIdx,el)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&group.remove(el)}).execute();this._data=data},_renderLarge:function(seriesModel){this._clear();createLarge$1(seriesModel,this.group)},_incrementalRenderNormal:function(params,seriesModel){var data=seriesModel.getData();var isSimpleBox=data.getLayout("isSimpleBox");var dataIndex;while((dataIndex=params.next())!=null){var el;var itemLayout=data.getItemLayout(dataIndex);el=createNormalBox$1(itemLayout,dataIndex);setBoxCommon(el,data,dataIndex,isSimpleBox);el.incremental=true;this.group.add(el)}},_incrementalRenderLarge:function(params,seriesModel){createLarge$1(seriesModel,this.group,true)},remove:function(ecModel){this._clear()},_clear:function(){this.group.removeAll();
this._data=null},dispose:noop});var NormalBoxPath=Path.extend({type:"normalCandlestickBox",shape:{},buildPath:function(ctx,shape){var ends=shape.points;if(this.__simpleBox){ctx.moveTo(ends[4][0],ends[4][1]);ctx.lineTo(ends[6][0],ends[6][1])}else{ctx.moveTo(ends[0][0],ends[0][1]);ctx.lineTo(ends[1][0],ends[1][1]);ctx.lineTo(ends[2][0],ends[2][1]);ctx.lineTo(ends[3][0],ends[3][1]);ctx.closePath();ctx.moveTo(ends[4][0],ends[4][1]);ctx.lineTo(ends[5][0],ends[5][1]);ctx.moveTo(ends[6][0],ends[6][1]);ctx.lineTo(ends[7][0],ends[7][1])}}});function createNormalBox$1(itemLayout,dataIndex,isInit){var ends=itemLayout.ends;return new NormalBoxPath({shape:{points:isInit?transInit$1(ends,itemLayout):ends},z2:100})}function setBoxCommon(el,data,dataIndex,isSimpleBox){var itemModel=data.getItemModel(dataIndex);var normalItemStyleModel=itemModel.getModel(NORMAL_ITEM_STYLE_PATH$1);var color=data.getItemVisual(dataIndex,"color");var borderColor=data.getItemVisual(dataIndex,"borderColor")||color;var itemStyle=normalItemStyleModel.getItemStyle(SKIP_PROPS);el.useStyle(itemStyle);el.style.strokeNoScale=true;el.style.fill=color;el.style.stroke=borderColor;el.__simpleBox=isSimpleBox;var hoverStyle=itemModel.getModel(EMPHASIS_ITEM_STYLE_PATH$1).getItemStyle();setHoverStyle(el,hoverStyle)}function transInit$1(points,itemLayout){return map(points,function(point){point=point.slice();point[1]=itemLayout.initBaseline;return point})}var LargeBoxPath=Path.extend({type:"largeCandlestickBox",shape:{},buildPath:function(ctx,shape){var points=shape.points;for(var i=0;i<points.length;){if(this.__sign===points[i++]){var x=points[i++];ctx.moveTo(x,points[i++]);ctx.lineTo(x,points[i++])}else{i+=3}}}});function createLarge$1(seriesModel,group,incremental){var data=seriesModel.getData();var largePoints=data.getLayout("largePoints");var elP=new LargeBoxPath({shape:{points:largePoints},__sign:1});group.add(elP);var elN=new LargeBoxPath({shape:{points:largePoints},__sign:-1});group.add(elN);setLargeStyle$1(1,elP,seriesModel,data);
setLargeStyle$1(-1,elN,seriesModel,data);if(incremental){elP.incremental=true;elN.incremental=true}}function setLargeStyle$1(sign,el,seriesModel,data){var suffix=sign>0?"P":"N";var borderColor=data.getVisual("borderColor"+suffix)||data.getVisual("color"+suffix);var itemStyle=seriesModel.getModel(NORMAL_ITEM_STYLE_PATH$1).getItemStyle(SKIP_PROPS);el.useStyle(itemStyle);el.style.fill=null;el.style.stroke=borderColor}var preprocessor=function(option){if(!option||!isArray(option.series)){return}each$1(option.series,function(seriesItem){if(isObject$1(seriesItem)&&seriesItem.type==="k"){seriesItem.type="candlestick"}})};var positiveBorderColorQuery=["itemStyle","borderColor"];var negativeBorderColorQuery=["itemStyle","borderColor0"];var positiveColorQuery=["itemStyle","color"];var negativeColorQuery=["itemStyle","color0"];var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:true,reset:function(seriesModel,ecModel){var data=seriesModel.getData();var isLargeRender=seriesModel.pipelineContext.large;data.setVisual({legendSymbol:"roundRect",colorP:getColor(1,seriesModel),colorN:getColor(-1,seriesModel),borderColorP:getBorderColor(1,seriesModel),borderColorN:getBorderColor(-1,seriesModel)});if(ecModel.isSeriesFiltered(seriesModel)){return}return !isLargeRender&&{progress:progress};function progress(params,data){var dataIndex;while((dataIndex=params.next())!=null){var itemModel=data.getItemModel(dataIndex);var sign=data.getItemLayout(dataIndex).sign;data.setItemVisual(dataIndex,{color:getColor(sign,itemModel),borderColor:getBorderColor(sign,itemModel)})}}function getColor(sign,model){return model.get(sign>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(sign,model){return model.get(sign>0?positiveBorderColorQuery:negativeBorderColorQuery)}}};var LargeArr$1=typeof Float32Array!=="undefined"?Float32Array:Array;var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(seriesModel){var coordSys=seriesModel.coordinateSystem;
var data=seriesModel.getData();var candleWidth=calculateCandleWidth(seriesModel,data);var cDimIdx=0;var vDimIdx=1;var coordDims=["x","y"];var cDim=data.mapDimension(coordDims[cDimIdx]);var vDims=data.mapDimension(coordDims[vDimIdx],true);var openDim=vDims[0];var closeDim=vDims[1];var lowestDim=vDims[2];var highestDim=vDims[3];data.setLayout({candleWidth:candleWidth,isSimpleBox:candleWidth<=1.3});if(cDim==null||vDims.length<4){return}return{progress:seriesModel.pipelineContext.large?largeProgress:normalProgress};function normalProgress(params,data){var dataIndex;while((dataIndex=params.next())!=null){var axisDimVal=data.get(cDim,dataIndex);var openVal=data.get(openDim,dataIndex);var closeVal=data.get(closeDim,dataIndex);var lowestVal=data.get(lowestDim,dataIndex);var highestVal=data.get(highestDim,dataIndex);var ocLow=Math.min(openVal,closeVal);var ocHigh=Math.max(openVal,closeVal);var ocLowPoint=getPoint(ocLow,axisDimVal);var ocHighPoint=getPoint(ocHigh,axisDimVal);var lowestPoint=getPoint(lowestVal,axisDimVal);var highestPoint=getPoint(highestVal,axisDimVal);var ends=[];addBodyEnd(ends,ocHighPoint,0);addBodyEnd(ends,ocLowPoint,1);ends.push(subPixelOptimizePoint(highestPoint),subPixelOptimizePoint(ocHighPoint),subPixelOptimizePoint(lowestPoint),subPixelOptimizePoint(ocLowPoint));data.setItemLayout(dataIndex,{sign:getSign(data,dataIndex,openVal,closeVal,closeDim),initBaseline:openVal>closeVal?ocHighPoint[vDimIdx]:ocLowPoint[vDimIdx],ends:ends,brushRect:makeBrushRect(lowestVal,highestVal,axisDimVal)})}function getPoint(val,axisDimVal){var p=[];p[cDimIdx]=axisDimVal;p[vDimIdx]=val;return(isNaN(axisDimVal)||isNaN(val))?[NaN,NaN]:coordSys.dataToPoint(p)}function addBodyEnd(ends,point,start){var point1=point.slice();var point2=point.slice();point1[cDimIdx]=subPixelOptimize(point1[cDimIdx]+candleWidth/2,1,false);point2[cDimIdx]=subPixelOptimize(point2[cDimIdx]-candleWidth/2,1,true);start?ends.push(point1,point2):ends.push(point2,point1)}function makeBrushRect(lowestVal,highestVal,axisDimVal){var pmin=getPoint(lowestVal,axisDimVal);
var pmax=getPoint(highestVal,axisDimVal);pmin[cDimIdx]-=candleWidth/2;pmax[cDimIdx]-=candleWidth/2;return{x:pmin[0],y:pmin[1],width:vDimIdx?candleWidth:pmax[0]-pmin[0],height:vDimIdx?pmax[1]-pmin[1]:candleWidth}}function subPixelOptimizePoint(point){point[cDimIdx]=subPixelOptimize(point[cDimIdx],1);return point}}function largeProgress(params,data){var points=new LargeArr$1(params.count*5);var offset=0;var point;var tmpIn=[];var tmpOut=[];var dataIndex;while((dataIndex=params.next())!=null){var axisDimVal=data.get(cDim,dataIndex);var openVal=data.get(openDim,dataIndex);var closeVal=data.get(closeDim,dataIndex);var lowestVal=data.get(lowestDim,dataIndex);var highestVal=data.get(highestDim,dataIndex);if(isNaN(axisDimVal)||isNaN(lowestVal)||isNaN(highestVal)){points[offset++]=NaN;offset+=4;continue}points[offset++]=getSign(data,dataIndex,openVal,closeVal,closeDim);tmpIn[cDimIdx]=axisDimVal;tmpIn[vDimIdx]=lowestVal;point=coordSys.dataToPoint(tmpIn,null,tmpOut);points[offset++]=point?point[0]:NaN;points[offset++]=point?point[1]:NaN;tmpIn[vDimIdx]=highestVal;point=coordSys.dataToPoint(tmpIn,null,tmpOut);points[offset++]=point?point[1]:NaN}data.setLayout("largePoints",points)}}};function getSign(data,dataIndex,openVal,closeVal,closeDim){var sign;if(openVal>closeVal){sign=-1}else{if(openVal<closeVal){sign=1}else{sign=dataIndex>0?(data.get(closeDim,dataIndex-1)<=closeVal?1:-1):1}}return sign}function calculateCandleWidth(seriesModel,data){var baseAxis=seriesModel.getBaseAxis();var extent;var bandWidth=baseAxis.type==="category"?baseAxis.getBandWidth():(extent=baseAxis.getExtent(),Math.abs(extent[1]-extent[0])/data.count());var barMaxWidth=parsePercent$1(retrieve2(seriesModel.get("barMaxWidth"),bandWidth),bandWidth);var barMinWidth=parsePercent$1(retrieve2(seriesModel.get("barMinWidth"),1),bandWidth);var barWidth=seriesModel.get("barWidth");return barWidth!=null?parsePercent$1(barWidth,bandWidth):Math.max(Math.min(bandWidth/2,barMaxWidth),barMinWidth)}registerPreprocessor(preprocessor);
registerVisual(candlestickVisual);registerLayout(candlestickLayout);SeriesModel.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(option,ecModel){return createListFromArray(this.getSource(),this)},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var EFFECT_RIPPLE_NUMBER=3;function normalizeSymbolSize$1(symbolSize){if(!isArray(symbolSize)){symbolSize=[+symbolSize,+symbolSize]}return symbolSize}function updateRipplePath(rippleGroup,effectCfg){rippleGroup.eachChild(function(ripplePath){ripplePath.attr({z:effectCfg.z,zlevel:effectCfg.zlevel,style:{stroke:effectCfg.brushType==="stroke"?effectCfg.color:null,fill:effectCfg.brushType==="fill"?effectCfg.color:null}})})}function EffectSymbol(data,idx){Group.call(this);var symbol=new SymbolClz$1(data,idx);var rippleGroup=new Group();this.add(symbol);this.add(rippleGroup);rippleGroup.beforeUpdate=function(){this.attr(symbol.getScale())};this.updateData(data,idx)}var effectSymbolProto=EffectSymbol.prototype;effectSymbolProto.stopEffectAnimation=function(){this.childAt(1).removeAll()};effectSymbolProto.startEffectAnimation=function(effectCfg){var symbolType=effectCfg.symbolType;var color=effectCfg.color;var rippleGroup=this.childAt(1);for(var i=0;i<EFFECT_RIPPLE_NUMBER;i++){var ripplePath=createSymbol(symbolType,-1,-1,2,2,color);ripplePath.attr({style:{strokeNoScale:true},z2:99,silent:true,scale:[0.5,0.5]});var delay=-i/EFFECT_RIPPLE_NUMBER*effectCfg.period+effectCfg.effectOffset;ripplePath.animate("",true).when(effectCfg.period,{scale:[effectCfg.rippleScale/2,effectCfg.rippleScale/2]}).delay(delay).start();ripplePath.animateStyle(true).when(effectCfg.period,{opacity:0}).delay(delay).start();rippleGroup.add(ripplePath)}updateRipplePath(rippleGroup,effectCfg)};effectSymbolProto.updateEffectAnimation=function(effectCfg){var oldEffectCfg=this._effectCfg;
var rippleGroup=this.childAt(1);var DIFFICULT_PROPS=["symbolType","period","rippleScale"];for(var i=0;i<DIFFICULT_PROPS.length;i++){var propName=DIFFICULT_PROPS[i];if(oldEffectCfg[propName]!==effectCfg[propName]){this.stopEffectAnimation();this.startEffectAnimation(effectCfg);return}}updateRipplePath(rippleGroup,effectCfg)};effectSymbolProto.highlight=function(){this.trigger("emphasis")};effectSymbolProto.downplay=function(){this.trigger("normal")};effectSymbolProto.updateData=function(data,idx){var seriesModel=data.hostModel;this.childAt(0).updateData(data,idx);var rippleGroup=this.childAt(1);var itemModel=data.getItemModel(idx);var symbolType=data.getItemVisual(idx,"symbol");var symbolSize=normalizeSymbolSize$1(data.getItemVisual(idx,"symbolSize"));var color=data.getItemVisual(idx,"color");rippleGroup.attr("scale",symbolSize);rippleGroup.traverse(function(ripplePath){ripplePath.attr({fill:color})});var symbolOffset=itemModel.getShallow("symbolOffset");if(symbolOffset){var pos=rippleGroup.position;pos[0]=parsePercent$1(symbolOffset[0],symbolSize[0]);pos[1]=parsePercent$1(symbolOffset[1],symbolSize[1])}rippleGroup.rotation=(itemModel.getShallow("symbolRotate")||0)*Math.PI/180||0;var effectCfg={};effectCfg.showEffectOn=seriesModel.get("showEffectOn");effectCfg.rippleScale=itemModel.get("rippleEffect.scale");effectCfg.brushType=itemModel.get("rippleEffect.brushType");effectCfg.period=itemModel.get("rippleEffect.period")*1000;effectCfg.effectOffset=idx/data.count();effectCfg.z=itemModel.getShallow("z")||0;effectCfg.zlevel=itemModel.getShallow("zlevel")||0;effectCfg.symbolType=symbolType;effectCfg.color=color;this.off("mouseover").off("mouseout").off("emphasis").off("normal");if(effectCfg.showEffectOn==="render"){this._effectCfg?this.updateEffectAnimation(effectCfg):this.startEffectAnimation(effectCfg);this._effectCfg=effectCfg}else{this._effectCfg=null;this.stopEffectAnimation();var symbol=this.childAt(0);var onEmphasis=function(){symbol.highlight();if(effectCfg.showEffectOn!=="render"){this.startEffectAnimation(effectCfg)
}};var onNormal=function(){symbol.downplay();if(effectCfg.showEffectOn!=="render"){this.stopEffectAnimation()}};this.on("mouseover",onEmphasis,this).on("mouseout",onNormal,this).on("emphasis",onEmphasis,this).on("normal",onNormal,this)}this._effectCfg=effectCfg};effectSymbolProto.fadeOut=function(cb){this.off("mouseover").off("mouseout").off("emphasis").off("normal");cb&&cb()};inherits(EffectSymbol,Group);extendChartView({type:"effectScatter",init:function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var effectSymbolDraw=this._symbolDraw;effectSymbolDraw.updateData(data);this.group.add(effectSymbolDraw.group)},updateTransform:function(seriesModel,ecModel,api){var data=seriesModel.getData();this.group.dirty();var res=pointsLayout().reset(seriesModel);if(res.progress){res.progress({start:0,end:data.count()},data)}this._symbolDraw.updateLayout(data)},_updateGroupTransform:function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys&&coordSys.getRoamTransform){this.group.transform=clone$2(coordSys.getRoamTransform());this.group.decomposeTransform()}},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(api)},dispose:function(){}});registerVisual(visualSymbol("effectScatter","circle"));registerLayout(pointsLayout("effectScatter"));var Uint32Arr=typeof Uint32Array==="undefined"?Array:Uint32Array;var Float64Arr=typeof Float64Array==="undefined"?Array:Float64Array;function compatEc2(seriesOpt){var data=seriesOpt.data;if(data&&data[0]&&data[0][0]&&data[0][0].coord){if(__DEV__){console.warn("Lines data configuration has been changed to"+" { coords:[[1,2],[2,3]] }")}seriesOpt.data=map(data,function(itemOpt){var coords=[itemOpt[0].coord,itemOpt[1].coord];var target={coords:coords};if(itemOpt[0].name){target.fromName=itemOpt[0].name}if(itemOpt[1].name){target.toName=itemOpt[1].name}return mergeAll([target,itemOpt[0],itemOpt[1]])})}}var LinesSeries=SeriesModel.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(option){option.data=option.data||[];
compatEc2(option);var result=this._processFlatCoordsArray(option.data);this._flatCoords=result.flatCoords;this._flatCoordsOffset=result.flatCoordsOffset;if(result.flatCoords){option.data=new Float32Array(result.count)}LinesSeries.superApply(this,"init",arguments)},mergeOption:function(option){option.data=option.data||[];compatEc2(option);if(option.data){var result=this._processFlatCoordsArray(option.data);this._flatCoords=result.flatCoords;this._flatCoordsOffset=result.flatCoordsOffset;if(result.flatCoords){option.data=new Float32Array(result.count)}}LinesSeries.superApply(this,"mergeOption",arguments)},appendData:function(params){var result=this._processFlatCoordsArray(params.data);if(result.flatCoords){if(!this._flatCoords){this._flatCoords=result.flatCoords;this._flatCoordsOffset=result.flatCoordsOffset}else{this._flatCoords=concatArray(this._flatCoords,result.flatCoords);this._flatCoordsOffset=concatArray(this._flatCoordsOffset,result.flatCoordsOffset)}params.data=new Float32Array(result.count)}this.getRawData().appendData(params.data)},_getCoordsFromItemModel:function(idx){var itemModel=this.getData().getItemModel(idx);var coords=(itemModel.option instanceof Array)?itemModel.option:itemModel.getShallow("coords");if(__DEV__){if(!(coords instanceof Array&&coords.length>0&&coords[0] instanceof Array)){throw new Error("Invalid coords "+JSON.stringify(coords)+". Lines must have 2d coords array in data item.")}}return coords},getLineCoordsCount:function(idx){if(this._flatCoordsOffset){return this._flatCoordsOffset[idx*2+1]}else{return this._getCoordsFromItemModel(idx).length}},getLineCoords:function(idx,out){if(this._flatCoordsOffset){var offset=this._flatCoordsOffset[idx*2];var len=this._flatCoordsOffset[idx*2+1];for(var i=0;i<len;i++){out[i]=out[i]||[];out[i][0]=this._flatCoords[offset+i*2];out[i][1]=this._flatCoords[offset+i*2+1]}return len}else{var coords=this._getCoordsFromItemModel(idx);for(var i=0;i<coords.length;i++){out[i]=out[i]||[];out[i][0]=coords[i][0];out[i][1]=coords[i][1]
}return coords.length}},_processFlatCoordsArray:function(data){var startOffset=0;if(this._flatCoords){startOffset=this._flatCoords.length}if(typeof data[0]==="number"){var len=data.length;var coordsOffsetAndLenStorage=new Uint32Arr(len);var coordsStorage=new Float64Arr(len);var coordsCursor=0;var offsetCursor=0;var dataCount=0;for(var i=0;i<len;){dataCount++;var count=data[i++];coordsOffsetAndLenStorage[offsetCursor++]=coordsCursor+startOffset;coordsOffsetAndLenStorage[offsetCursor++]=count;for(var k=0;k<count;k++){var x=data[i++];var y=data[i++];coordsStorage[coordsCursor++]=x;coordsStorage[coordsCursor++]=y;if(i>len){if(__DEV__){throw new Error("Invalid data format.")}}}}return{flatCoordsOffset:new Uint32Array(coordsOffsetAndLenStorage.buffer,0,offsetCursor),flatCoords:coordsStorage,count:dataCount}}return{flatCoordsOffset:null,flatCoords:null,count:data.length}},getInitialData:function(option,ecModel){if(__DEV__){var CoordSys=CoordinateSystemManager.get(option.coordinateSystem);if(!CoordSys){throw new Error("Unkown coordinate system "+option.coordinateSystem)}}var lineData=new List(["value"],this);lineData.hasItemOption=false;lineData.initData(option.data,[],function(dataItem,dimName,dataIndex,dimIndex){if(dataItem instanceof Array){return NaN}else{lineData.hasItemOption=true;var value=dataItem.value;if(value!=null){return value instanceof Array?value[dimIndex]:value}}});return lineData},formatTooltip:function(dataIndex){var data=this.getData();var itemModel=data.getItemModel(dataIndex);var name=itemModel.get("name");if(name){return name}var fromName=itemModel.get("fromName");var toName=itemModel.get("toName");var html=[];fromName!=null&&html.push(fromName);toName!=null&&html.push(toName);return encodeHTML(html.join(" > "))},preventIncremental:function(){return !!this.get("effect.show")},getProgressive:function(){var progressive=this.option.progressive;if(progressive==null){return this.option.large?10000:this.get("progressive")}return progressive},getProgressiveThreshold:function(){var progressiveThreshold=this.option.progressiveThreshold;
if(progressiveThreshold==null){return this.option.large?20000:this.get("progressiveThreshold")}return progressiveThreshold},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:false,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:true,trailLength:0.2},large:false,largeThreshold:2000,polyline:false,label:{show:false,position:"end"},lineStyle:{opacity:0.5}}});function EffectLine(lineData,idx,seriesScope){Group.call(this);this.add(this.createLine(lineData,idx,seriesScope));this._updateEffectSymbol(lineData,idx)}var effectLineProto=EffectLine.prototype;effectLineProto.createLine=function(lineData,idx,seriesScope){return new Line$1(lineData,idx,seriesScope)};effectLineProto._updateEffectSymbol=function(lineData,idx){var itemModel=lineData.getItemModel(idx);var effectModel=itemModel.getModel("effect");var size=effectModel.get("symbolSize");var symbolType=effectModel.get("symbol");if(!isArray(size)){size=[size,size]}var color=effectModel.get("color")||lineData.getItemVisual(idx,"color");var symbol=this.childAt(1);if(this._symbolType!==symbolType){this.remove(symbol);symbol=createSymbol(symbolType,-0.5,-0.5,1,1,color);symbol.z2=100;symbol.culling=true;this.add(symbol)}if(!symbol){return}symbol.setStyle("shadowColor",color);symbol.setStyle(effectModel.getItemStyle(["color"]));symbol.attr("scale",size);symbol.setColor(color);symbol.attr("scale",size);this._symbolType=symbolType;this._updateEffectAnimation(lineData,effectModel,idx)};effectLineProto._updateEffectAnimation=function(lineData,effectModel,idx){var symbol=this.childAt(1);if(!symbol){return}var self=this;var points=lineData.getItemLayout(idx);var period=effectModel.get("period")*1000;var loop=effectModel.get("loop");var constantSpeed=effectModel.get("constantSpeed");var delayExpr=retrieve(effectModel.get("delay"),function(idx){return idx/lineData.count()*period/3});var isDelayFunc=typeof delayExpr==="function";
symbol.ignore=true;this.updateAnimationPoints(symbol,points);if(constantSpeed>0){period=this.getLineLength(symbol)/constantSpeed*1000}if(period!==this._period||loop!==this._loop){symbol.stopAnimation();var delay=delayExpr;if(isDelayFunc){delay=delayExpr(idx)}if(symbol.__t>0){delay=-period*symbol.__t}symbol.__t=0;var animator=symbol.animate("",loop).when(period,{__t:1}).delay(delay).during(function(){self.updateSymbolPosition(symbol)});if(!loop){animator.done(function(){self.remove(symbol)})}animator.start()}this._period=period;this._loop=loop};effectLineProto.getLineLength=function(symbol){return(dist(symbol.__p1,symbol.__cp1)+dist(symbol.__cp1,symbol.__p2))};effectLineProto.updateAnimationPoints=function(symbol,points){symbol.__p1=points[0];symbol.__p2=points[1];symbol.__cp1=points[2]||[(points[0][0]+points[1][0])/2,(points[0][1]+points[1][1])/2]};effectLineProto.updateData=function(lineData,idx,seriesScope){this.childAt(0).updateData(lineData,idx,seriesScope);this._updateEffectSymbol(lineData,idx)};effectLineProto.updateSymbolPosition=function(symbol){var p1=symbol.__p1;var p2=symbol.__p2;var cp1=symbol.__cp1;var t=symbol.__t;var pos=symbol.position;var quadraticAt$$1=quadraticAt;var quadraticDerivativeAt$$1=quadraticDerivativeAt;pos[0]=quadraticAt$$1(p1[0],cp1[0],p2[0],t);pos[1]=quadraticAt$$1(p1[1],cp1[1],p2[1],t);var tx=quadraticDerivativeAt$$1(p1[0],cp1[0],p2[0],t);var ty=quadraticDerivativeAt$$1(p1[1],cp1[1],p2[1],t);symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2;symbol.ignore=false};effectLineProto.updateLayout=function(lineData,idx){this.childAt(0).updateLayout(lineData,idx);var effectModel=lineData.getItemModel(idx).getModel("effect");this._updateEffectAnimation(lineData,effectModel,idx)};inherits(EffectLine,Group);function Polyline$2(lineData,idx,seriesScope){Group.call(this);this._createPolyline(lineData,idx,seriesScope)}var polylineProto=Polyline$2.prototype;polylineProto._createPolyline=function(lineData,idx,seriesScope){var points=lineData.getItemLayout(idx);
var line=new Polyline({shape:{points:points}});this.add(line);this._updateCommonStl(lineData,idx,seriesScope)};polylineProto.updateData=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel;var line=this.childAt(0);var target={shape:{points:lineData.getItemLayout(idx)}};updateProps(line,target,seriesModel,idx);this._updateCommonStl(lineData,idx,seriesScope)};polylineProto._updateCommonStl=function(lineData,idx,seriesScope){var line=this.childAt(0);var itemModel=lineData.getItemModel(idx);var visualColor=lineData.getItemVisual(idx,"color");var lineStyle=seriesScope&&seriesScope.lineStyle;var hoverLineStyle=seriesScope&&seriesScope.hoverLineStyle;if(!seriesScope||lineData.hasItemOption){lineStyle=itemModel.getModel("lineStyle").getLineStyle();hoverLineStyle=itemModel.getModel("emphasis.lineStyle").getLineStyle()}line.useStyle(defaults({strokeNoScale:true,fill:"none",stroke:visualColor},lineStyle));line.hoverStyle=hoverLineStyle;setHoverStyle(this)};polylineProto.updateLayout=function(lineData,idx){var polyline=this.childAt(0);polyline.setShape("points",lineData.getItemLayout(idx))};inherits(Polyline$2,Group);function EffectPolyline(lineData,idx,seriesScope){EffectLine.call(this,lineData,idx,seriesScope);this._lastFrame=0;this._lastFramePercent=0}var effectPolylineProto=EffectPolyline.prototype;effectPolylineProto.createLine=function(lineData,idx,seriesScope){return new Polyline$2(lineData,idx,seriesScope)};effectPolylineProto.updateAnimationPoints=function(symbol,points){this._points=points;var accLenArr=[0];var len$$1=0;for(var i=1;i<points.length;i++){var p1=points[i-1];var p2=points[i];len$$1+=dist(p1,p2);accLenArr.push(len$$1)}if(len$$1===0){return}for(var i=0;i<accLenArr.length;i++){accLenArr[i]/=len$$1}this._offsets=accLenArr;this._length=len$$1};effectPolylineProto.getLineLength=function(symbol){return this._length};effectPolylineProto.updateSymbolPosition=function(symbol){var t=symbol.__t;var points=this._points;var offsets=this._offsets;var len$$1=points.length;
if(!offsets){return}var lastFrame=this._lastFrame;var frame;if(t<this._lastFramePercent){var start=Math.min(lastFrame+1,len$$1-1);for(frame=start;frame>=0;frame--){if(offsets[frame]<=t){break}}frame=Math.min(frame,len$$1-2)}else{for(var frame=lastFrame;frame<len$$1;frame++){if(offsets[frame]>t){break}}frame=Math.min(frame-1,len$$1-2)}lerp(symbol.position,points[frame],points[frame+1],(t-offsets[frame])/(offsets[frame+1]-offsets[frame]));var tx=points[frame+1][0]-points[frame][0];var ty=points[frame+1][1]-points[frame][1];symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2;this._lastFrame=frame;this._lastFramePercent=t;symbol.ignore=false};inherits(EffectPolyline,EffectLine);var LargeLineShape=extendShape({shape:{polyline:false,curveness:0,segs:[]},buildPath:function(path,shape){var segs=shape.segs;var curveness=shape.curveness;if(shape.polyline){for(var i=0;i<segs.length;){var count=segs[i++];if(count>0){path.moveTo(segs[i++],segs[i++]);for(var k=1;k<count;k++){path.lineTo(segs[i++],segs[i++])}}}}else{for(var i=0;i<segs.length;){var x0=segs[i++];var y0=segs[i++];var x1=segs[i++];var y1=segs[i++];path.moveTo(x0,y0);if(curveness>0){var x2=(x0+x1)/2-(y0-y1)*curveness;var y2=(y0+y1)/2-(x1-x0)*curveness;path.quadraticCurveTo(x2,y2,x1,y1)}else{path.lineTo(x1,y1)}}}},findDataIndex:function(x,y){var shape=this.shape;var segs=shape.segs;var curveness=shape.curveness;if(shape.polyline){var dataIndex=0;for(var i=0;i<segs.length;){var count=segs[i++];if(count>0){var x0=segs[i++];var y0=segs[i++];for(var k=1;k<count;k++){var x1=segs[i++];var y1=segs[i++];if(containStroke$1(x0,y0,x1,y1)){return dataIndex}}}dataIndex++}}else{var dataIndex=0;for(var i=0;i<segs.length;){var x0=segs[i++];var y0=segs[i++];var x1=segs[i++];var y1=segs[i++];if(curveness>0){var x2=(x0+x1)/2-(y0-y1)*curveness;var y2=(y0+y1)/2-(x1-x0)*curveness;if(containStroke$3(x0,y0,x2,y2,x1,y1)){return dataIndex}}else{if(containStroke$1(x0,y0,x1,y1)){return dataIndex}}dataIndex++}}return -1}});function LargeLineDraw(){this.group=new Group()
}var largeLineProto=LargeLineDraw.prototype;largeLineProto.isPersistent=function(){return !this._incremental};largeLineProto.updateData=function(data){this.group.removeAll();var lineEl=new LargeLineShape({rectHover:true,cursor:"default"});lineEl.setShape({segs:data.getLayout("linesPoints")});this._setCommon(lineEl,data);this.group.add(lineEl);this._incremental=null};largeLineProto.incrementalPrepareUpdate=function(data){this.group.removeAll();this._clearIncremental();if(data.count()>500000){if(!this._incremental){this._incremental=new IncrementalDisplayble({silent:true})}this.group.add(this._incremental)}else{this._incremental=null}};largeLineProto.incrementalUpdate=function(taskParams,data){var lineEl=new LargeLineShape();lineEl.setShape({segs:data.getLayout("linesPoints")});this._setCommon(lineEl,data,!!this._incremental);if(!this._incremental){lineEl.rectHover=true;lineEl.cursor="default";lineEl.__startIndex=taskParams.start;this.group.add(lineEl)}else{this._incremental.addDisplayable(lineEl,true)}};largeLineProto.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};largeLineProto._setCommon=function(lineEl,data,isIncremental){var hostModel=data.hostModel;lineEl.setShape({polyline:hostModel.get("polyline"),curveness:hostModel.get("lineStyle.curveness")});lineEl.useStyle(hostModel.getModel("lineStyle").getLineStyle());lineEl.style.strokeNoScale=true;var visualColor=data.getVisual("color");if(visualColor){lineEl.setStyle("stroke",visualColor)}lineEl.setStyle("fill");if(!isIncremental){lineEl.seriesIndex=hostModel.seriesIndex;lineEl.on("mousemove",function(e){lineEl.dataIndex=null;var dataIndex=lineEl.findDataIndex(e.offsetX,e.offsetY);if(dataIndex>0){lineEl.dataIndex=dataIndex+lineEl.__startIndex}})}};largeLineProto._clearIncremental=function(){var incremental=this._incremental;if(incremental){incremental.clearDisplaybles()}};var linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(seriesModel){var coordSys=seriesModel.coordinateSystem;
var isPolyline=seriesModel.get("polyline");var isLarge=seriesModel.pipelineContext.large;function progress(params,lineData){var lineCoords=[];if(isLarge){var points;var segCount=params.end-params.start;if(isPolyline){var totalCoordsCount=0;for(var i=params.start;i<params.end;i++){totalCoordsCount+=seriesModel.getLineCoordsCount(i)}points=new Float32Array(segCount+totalCoordsCount*2)}else{points=new Float32Array(segCount*4)}var offset=0;var pt=[];for(var i=params.start;i<params.end;i++){var len=seriesModel.getLineCoords(i,lineCoords);if(isPolyline){points[offset++]=len}for(var k=0;k<len;k++){pt=coordSys.dataToPoint(lineCoords[k],false,pt);points[offset++]=pt[0];points[offset++]=pt[1]}}lineData.setLayout("linesPoints",points)}else{for(var i=params.start;i<params.end;i++){var itemModel=lineData.getItemModel(i);var len=seriesModel.getLineCoords(i,lineCoords);var pts=[];if(isPolyline){for(var j=0;j<len;j++){pts.push(coordSys.dataToPoint(lineCoords[j]))}}else{pts[0]=coordSys.dataToPoint(lineCoords[0]);pts[1]=coordSys.dataToPoint(lineCoords[1]);var curveness=itemModel.get("lineStyle.curveness");if(+curveness){pts[2]=[(pts[0][0]+pts[1][0])/2-(pts[0][1]-pts[1][1])*curveness,(pts[0][1]+pts[1][1])/2-(pts[1][0]-pts[0][0])*curveness]}}lineData.setItemLayout(i,pts)}}}return{progress:progress}}};extendChartView({type:"lines",init:function(){},render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var lineDraw=this._updateLineDraw(data,seriesModel);var zlevel=seriesModel.get("zlevel");var trailLength=seriesModel.get("effect.trailLength");var zr=api.getZr();var isSvg=zr.painter.getType()==="svg";if(!isSvg){zr.painter.getLayer(zlevel).clear(true)}if(this._lastZlevel!=null&&!isSvg){zr.configLayer(this._lastZlevel,{motionBlur:false})}if(this._showEffect(seriesModel)&&trailLength){if(__DEV__){var notInIndividual=false;ecModel.eachSeries(function(otherSeriesModel){if(otherSeriesModel!==seriesModel&&otherSeriesModel.get("zlevel")===zlevel){notInIndividual=true}});notInIndividual&&console.warn("Lines with trail effect should have an individual zlevel")
}if(!isSvg){zr.configLayer(zlevel,{motionBlur:true,lastFrameAlpha:Math.max(Math.min(trailLength/10+0.9,1),0)})}}lineDraw.updateData(data);this._lastZlevel=zlevel;this._finished=true},incrementalPrepareRender:function(seriesModel,ecModel,api){var data=seriesModel.getData();var lineDraw=this._updateLineDraw(data,seriesModel);lineDraw.incrementalPrepareUpdate(data);this._clearLayer(api);this._finished=false},incrementalRender:function(taskParams,seriesModel,ecModel){this._lineDraw.incrementalUpdate(taskParams,seriesModel.getData());this._finished=taskParams.end===seriesModel.getData().count()},updateTransform:function(seriesModel,ecModel,api){var data=seriesModel.getData();var pipelineContext=seriesModel.pipelineContext;if(!this._finished||pipelineContext.large||pipelineContext.progressiveRender){return{update:true}}else{var res=linesLayout.reset(seriesModel);if(res.progress){res.progress({start:0,end:data.count()},data)}this._lineDraw.updateLayout();this._clearLayer(api)}},_updateLineDraw:function(data,seriesModel){var lineDraw=this._lineDraw;var hasEffect=this._showEffect(seriesModel);var isPolyline=!!seriesModel.get("polyline");var pipelineContext=seriesModel.pipelineContext;var isLargeDraw=pipelineContext.large;if(__DEV__){if(hasEffect&&isLargeDraw){console.warn("Large lines not support effect")}}if(!lineDraw||hasEffect!==this._hasEffet||isPolyline!==this._isPolyline||isLargeDraw!==this._isLargeDraw){if(lineDraw){lineDraw.remove()}lineDraw=this._lineDraw=isLargeDraw?new LargeLineDraw():new LineDraw(isPolyline?(hasEffect?EffectPolyline:Polyline$2):(hasEffect?EffectLine:Line$1));this._hasEffet=hasEffect;this._isPolyline=isPolyline;this._isLargeDraw=isLargeDraw;this.group.removeAll()}this.group.add(lineDraw.group);return lineDraw},_showEffect:function(seriesModel){return !!seriesModel.get("effect.show")},_clearLayer:function(api){var zr=api.getZr();var isSvg=zr.painter.getType()==="svg";if(!isSvg&&this._lastZlevel!=null){zr.painter.getLayer(this._lastZlevel).clear(true)
}},remove:function(ecModel,api){this._lineDraw&&this._lineDraw.remove();this._lineDraw=null;this._clearLayer(api)},dispose:function(){}});function normalize$2(a){if(!(a instanceof Array)){a=[a,a]}return a}var opacityQuery="lineStyle.opacity".split(".");var linesVisual={seriesType:"lines",reset:function(seriesModel,ecModel,api){var symbolType=normalize$2(seriesModel.get("symbol"));var symbolSize=normalize$2(seriesModel.get("symbolSize"));var data=seriesModel.getData();data.setVisual("fromSymbol",symbolType&&symbolType[0]);data.setVisual("toSymbol",symbolType&&symbolType[1]);data.setVisual("fromSymbolSize",symbolSize&&symbolSize[0]);data.setVisual("toSymbolSize",symbolSize&&symbolSize[1]);data.setVisual("opacity",seriesModel.get(opacityQuery));function dataEach(data,idx){var itemModel=data.getItemModel(idx);var symbolType=normalize$2(itemModel.getShallow("symbol",true));var symbolSize=normalize$2(itemModel.getShallow("symbolSize",true));var opacity=itemModel.get(opacityQuery);symbolType[0]&&data.setItemVisual(idx,"fromSymbol",symbolType[0]);symbolType[1]&&data.setItemVisual(idx,"toSymbol",symbolType[1]);symbolSize[0]&&data.setItemVisual(idx,"fromSymbolSize",symbolSize[0]);symbolSize[1]&&data.setItemVisual(idx,"toSymbolSize",symbolSize[1]);data.setItemVisual(idx,"opacity",opacity)}return{dataEach:data.hasItemOption?dataEach:null}}};registerLayout(linesLayout);registerVisual(linesVisual);SeriesModel.extend({type:"series.heatmap",getInitialData:function(option,ecModel){return createListFromArray(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var coordSysCreator=CoordinateSystemManager.get(this.get("coordinateSystem"));if(coordSysCreator&&coordSysCreator.dimensions){return coordSysCreator.dimensions[0]==="lng"&&coordSysCreator.dimensions[1]==="lat"}},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});var GRADIENT_LEVELS=256;function Heatmap(){var canvas=createCanvas();this.canvas=canvas;
this.blurSize=30;this.pointSize=20;this.maxOpacity=1;this.minOpacity=0;this._gradientPixels={}}Heatmap.prototype={update:function(data,width,height,normalize,colorFunc,isInRange){var brush=this._getBrush();var gradientInRange=this._getGradient(data,colorFunc,"inRange");var gradientOutOfRange=this._getGradient(data,colorFunc,"outOfRange");var r=this.pointSize+this.blurSize;var canvas=this.canvas;var ctx=canvas.getContext("2d");var len=data.length;canvas.width=width;canvas.height=height;for(var i=0;i<len;++i){var p=data[i];var x=p[0];var y=p[1];var value=p[2];var alpha=normalize(value);ctx.globalAlpha=alpha;ctx.drawImage(brush,x-r,y-r)}if(!canvas.width||!canvas.height){return canvas}var imageData=ctx.getImageData(0,0,canvas.width,canvas.height);var pixels=imageData.data;var offset=0;var pixelLen=pixels.length;var minOpacity=this.minOpacity;var maxOpacity=this.maxOpacity;var diffOpacity=maxOpacity-minOpacity;while(offset<pixelLen){var alpha=pixels[offset+3]/256;var gradientOffset=Math.floor(alpha*(GRADIENT_LEVELS-1))*4;if(alpha>0){var gradient=isInRange(alpha)?gradientInRange:gradientOutOfRange;alpha>0&&(alpha=alpha*diffOpacity+minOpacity);pixels[offset++]=gradient[gradientOffset];pixels[offset++]=gradient[gradientOffset+1];pixels[offset++]=gradient[gradientOffset+2];pixels[offset++]=gradient[gradientOffset+3]*alpha*256}else{offset+=4}}ctx.putImageData(imageData,0,0);return canvas},_getBrush:function(){var brushCanvas=this._brushCanvas||(this._brushCanvas=createCanvas());var r=this.pointSize+this.blurSize;var d=r*2;brushCanvas.width=d;brushCanvas.height=d;var ctx=brushCanvas.getContext("2d");ctx.clearRect(0,0,d,d);ctx.shadowOffsetX=d;ctx.shadowBlur=this.blurSize;ctx.shadowColor="#000";ctx.beginPath();ctx.arc(-r,r,this.pointSize,0,Math.PI*2,true);ctx.closePath();ctx.fill();return brushCanvas},_getGradient:function(data,colorFunc,state){var gradientPixels=this._gradientPixels;var pixelsSingleState=gradientPixels[state]||(gradientPixels[state]=new Uint8ClampedArray(256*4));
var color=[0,0,0,0];var off=0;for(var i=0;i<256;i++){colorFunc[state](i/255,true,color);pixelsSingleState[off++]=color[0];pixelsSingleState[off++]=color[1];pixelsSingleState[off++]=color[2];pixelsSingleState[off++]=color[3]}return pixelsSingleState}};function getIsInPiecewiseRange(dataExtent,pieceList,selected){var dataSpan=dataExtent[1]-dataExtent[0];pieceList=map(pieceList,function(piece){return{interval:[(piece.interval[0]-dataExtent[0])/dataSpan,(piece.interval[1]-dataExtent[0])/dataSpan]}});var len=pieceList.length;var lastIndex=0;return function(val){for(var i=lastIndex;i<len;i++){var interval=pieceList[i].interval;if(interval[0]<=val&&val<=interval[1]){lastIndex=i;break}}if(i===len){for(var i=lastIndex-1;i>=0;i--){var interval=pieceList[i].interval;if(interval[0]<=val&&val<=interval[1]){lastIndex=i;break}}}return i>=0&&i<len&&selected[i]}}function getIsInContinuousRange(dataExtent,range){var dataSpan=dataExtent[1]-dataExtent[0];range=[(range[0]-dataExtent[0])/dataSpan,(range[1]-dataExtent[0])/dataSpan];return function(val){return val>=range[0]&&val<=range[1]}}function isGeoCoordSys(coordSys){var dimensions=coordSys.dimensions;return dimensions[0]==="lng"&&dimensions[1]==="lat"}extendChartView({type:"heatmap",render:function(seriesModel,ecModel,api){var visualMapOfThisSeries;ecModel.eachComponent("visualMap",function(visualMap){visualMap.eachTargetSeries(function(targetSeries){if(targetSeries===seriesModel){visualMapOfThisSeries=visualMap}})});if(__DEV__){if(!visualMapOfThisSeries){throw new Error("Heatmap must use with visualMap")}}this.group.removeAll();this._incrementalDisplayable=null;var coordSys=seriesModel.coordinateSystem;if(coordSys.type==="cartesian2d"||coordSys.type==="calendar"){this._renderOnCartesianAndCalendar(seriesModel,api,0,seriesModel.getData().count())}else{if(isGeoCoordSys(coordSys)){this._renderOnGeo(coordSys,seriesModel,visualMapOfThisSeries,api)}}},incrementalPrepareRender:function(seriesModel,ecModel,api){this.group.removeAll()},incrementalRender:function(params,seriesModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;
if(coordSys){this._renderOnCartesianAndCalendar(seriesModel,api,params.start,params.end,true)}},_renderOnCartesianAndCalendar:function(seriesModel,api,start,end,incremental){var coordSys=seriesModel.coordinateSystem;var width;var height;if(coordSys.type==="cartesian2d"){var xAxis=coordSys.getAxis("x");var yAxis=coordSys.getAxis("y");if(__DEV__){if(!(xAxis.type==="category"&&yAxis.type==="category")){throw new Error("Heatmap on cartesian must have two category axes")}if(!(xAxis.onBand&&yAxis.onBand)){throw new Error("Heatmap on cartesian must have two axes with boundaryGap true")}}width=xAxis.getBandWidth();height=yAxis.getBandWidth()}var group=this.group;var data=seriesModel.getData();var itemStyleQuery="itemStyle";var hoverItemStyleQuery="emphasis.itemStyle";var labelQuery="label";var hoverLabelQuery="emphasis.label";var style=seriesModel.getModel(itemStyleQuery).getItemStyle(["color"]);var hoverStl=seriesModel.getModel(hoverItemStyleQuery).getItemStyle();var labelModel=seriesModel.getModel(labelQuery);var hoverLabelModel=seriesModel.getModel(hoverLabelQuery);var coordSysType=coordSys.type;var dataDims=coordSysType==="cartesian2d"?[data.mapDimension("x"),data.mapDimension("y"),data.mapDimension("value")]:[data.mapDimension("time"),data.mapDimension("value")];for(var idx=start;idx<end;idx++){var rect;if(coordSysType==="cartesian2d"){if(isNaN(data.get(dataDims[2],idx))){continue}var point=coordSys.dataToPoint([data.get(dataDims[0],idx),data.get(dataDims[1],idx)]);rect=new Rect({shape:{x:point[0]-width/2,y:point[1]-height/2,width:width,height:height},style:{fill:data.getItemVisual(idx,"color"),opacity:data.getItemVisual(idx,"opacity")}})}else{if(isNaN(data.get(dataDims[1],idx))){continue}rect=new Rect({z2:1,shape:coordSys.dataToRect([data.get(dataDims[0],idx)]).contentShape,style:{fill:data.getItemVisual(idx,"color"),opacity:data.getItemVisual(idx,"opacity")}})}var itemModel=data.getItemModel(idx);if(data.hasItemOption){style=itemModel.getModel(itemStyleQuery).getItemStyle(["color"]);
hoverStl=itemModel.getModel(hoverItemStyleQuery).getItemStyle();labelModel=itemModel.getModel(labelQuery);hoverLabelModel=itemModel.getModel(hoverLabelQuery)}var rawValue=seriesModel.getRawValue(idx);var defaultText="-";if(rawValue&&rawValue[2]!=null){defaultText=rawValue[2]}setLabelStyle(style,hoverStl,labelModel,hoverLabelModel,{labelFetcher:seriesModel,labelDataIndex:idx,defaultText:defaultText,isRectText:true});rect.setStyle(style);setHoverStyle(rect,data.hasItemOption?hoverStl:extend({},hoverStl));rect.incremental=incremental;if(incremental){rect.useHoverLayer=true}group.add(rect);data.setItemGraphicEl(idx,rect)}},_renderOnGeo:function(geo,seriesModel,visualMapModel,api){var inRangeVisuals=visualMapModel.targetVisuals.inRange;var outOfRangeVisuals=visualMapModel.targetVisuals.outOfRange;var data=seriesModel.getData();var hmLayer=this._hmLayer||(this._hmLayer||new Heatmap());hmLayer.blurSize=seriesModel.get("blurSize");hmLayer.pointSize=seriesModel.get("pointSize");hmLayer.minOpacity=seriesModel.get("minOpacity");hmLayer.maxOpacity=seriesModel.get("maxOpacity");var rect=geo.getViewRect().clone();var roamTransform=geo.getRoamTransform();rect.applyTransform(roamTransform);var x=Math.max(rect.x,0);var y=Math.max(rect.y,0);var x2=Math.min(rect.width+rect.x,api.getWidth());var y2=Math.min(rect.height+rect.y,api.getHeight());var width=x2-x;var height=y2-y;var dims=[data.mapDimension("lng"),data.mapDimension("lat"),data.mapDimension("value")];var points=data.mapArray(dims,function(lng,lat,value){var pt=geo.dataToPoint([lng,lat]);pt[0]-=x;pt[1]-=y;pt.push(value);return pt});var dataExtent=visualMapModel.getExtent();var isInRange=visualMapModel.type==="visualMap.continuous"?getIsInContinuousRange(dataExtent,visualMapModel.option.range):getIsInPiecewiseRange(dataExtent,visualMapModel.getPieceList(),visualMapModel.option.selected);hmLayer.update(points,width,height,inRangeVisuals.color.getNormalizer(),{inRange:inRangeVisuals.color.getColorMapper(),outOfRange:outOfRangeVisuals.color.getColorMapper()},isInRange);
var img=new ZImage({style:{width:width,height:height,x:x,y:y,image:hmLayer.canvas},silent:true});this.group.add(img)},dispose:function(){}});var PictorialBarSeries=BaseBarSeries.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:false,symbolRepeatDirection:"end",symbolClip:false,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:false},getInitialData:function(option){option.stack=null;return PictorialBarSeries.superApply(this,"getInitialData",arguments)}});var BAR_BORDER_WIDTH_QUERY$1=["itemStyle","borderWidth"];var LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}];var pathForLineWidth=new Circle();var BarView$1=extendChartView({type:"pictorialBar",render:function(seriesModel,ecModel,api){var group=this.group;var data=seriesModel.getData();var oldData=this._data;var cartesian=seriesModel.coordinateSystem;var baseAxis=cartesian.getBaseAxis();var isHorizontal=!!baseAxis.isHorizontal();var coordSysRect=cartesian.grid.getRect();var opt={ecSize:{width:api.getWidth(),height:api.getHeight()},seriesModel:seriesModel,coordSys:cartesian,coordSysExtent:[[coordSysRect.x,coordSysRect.x+coordSysRect.width],[coordSysRect.y,coordSysRect.y+coordSysRect.height]],isHorizontal:isHorizontal,valueDim:LAYOUT_ATTRS[+isHorizontal],categoryDim:LAYOUT_ATTRS[1-isHorizontal]};data.diff(oldData).add(function(dataIndex){if(!data.hasValue(dataIndex)){return}var itemModel=getItemModel(data,dataIndex);var symbolMeta=getSymbolMeta(data,dataIndex,itemModel,opt);var bar=createBar(data,opt,symbolMeta);data.setItemGraphicEl(dataIndex,bar);group.add(bar);updateCommon$1(bar,opt,symbolMeta)}).update(function(newIndex,oldIndex){var bar=oldData.getItemGraphicEl(oldIndex);if(!data.hasValue(newIndex)){group.remove(bar);return}var itemModel=getItemModel(data,newIndex);
var symbolMeta=getSymbolMeta(data,newIndex,itemModel,opt);var pictorialShapeStr=getShapeStr(data,symbolMeta);if(bar&&pictorialShapeStr!==bar.__pictorialShapeStr){group.remove(bar);data.setItemGraphicEl(newIndex,null);bar=null}if(bar){updateBar(bar,opt,symbolMeta)}else{bar=createBar(data,opt,symbolMeta,true)}data.setItemGraphicEl(newIndex,bar);bar.__pictorialSymbolMeta=symbolMeta;group.add(bar);updateCommon$1(bar,opt,symbolMeta)}).remove(function(dataIndex){var bar=oldData.getItemGraphicEl(dataIndex);bar&&removeBar(oldData,dataIndex,bar.__pictorialSymbolMeta.animationModel,bar)}).execute();this._data=data;return this.group},dispose:noop,remove:function(ecModel,api){var group=this.group;var data=this._data;if(ecModel.get("animation")){if(data){data.eachItemGraphicEl(function(bar){removeBar(data,bar.dataIndex,ecModel,bar)})}}else{group.removeAll()}}});function getSymbolMeta(data,dataIndex,itemModel,opt){var layout=data.getItemLayout(dataIndex);var symbolRepeat=itemModel.get("symbolRepeat");var symbolClip=itemModel.get("symbolClip");var symbolPosition=itemModel.get("symbolPosition")||"start";var symbolRotate=itemModel.get("symbolRotate");var rotation=(symbolRotate||0)*Math.PI/180||0;var symbolPatternSize=itemModel.get("symbolPatternSize")||2;var isAnimationEnabled=itemModel.isAnimationEnabled();var symbolMeta={dataIndex:dataIndex,layout:layout,itemModel:itemModel,symbolType:data.getItemVisual(dataIndex,"symbol")||"circle",color:data.getItemVisual(dataIndex,"color"),symbolClip:symbolClip,symbolRepeat:symbolRepeat,symbolRepeatDirection:itemModel.get("symbolRepeatDirection"),symbolPatternSize:symbolPatternSize,rotation:rotation,animationModel:isAnimationEnabled?itemModel:null,hoverAnimation:isAnimationEnabled&&itemModel.get("hoverAnimation"),z2:itemModel.getShallow("z",true)||0};prepareBarLength(itemModel,symbolRepeat,layout,opt,symbolMeta);prepareSymbolSize(data,dataIndex,layout,symbolRepeat,symbolClip,symbolMeta.boundingLength,symbolMeta.pxSign,symbolPatternSize,opt,symbolMeta);
prepareLineWidth(itemModel,symbolMeta.symbolScale,rotation,opt,symbolMeta);var symbolSize=symbolMeta.symbolSize;var symbolOffset=itemModel.get("symbolOffset");if(isArray(symbolOffset)){symbolOffset=[parsePercent$1(symbolOffset[0],symbolSize[0]),parsePercent$1(symbolOffset[1],symbolSize[1])]}prepareLayoutInfo(itemModel,symbolSize,layout,symbolRepeat,symbolClip,symbolOffset,symbolPosition,symbolMeta.valueLineWidth,symbolMeta.boundingLength,symbolMeta.repeatCutLength,opt,symbolMeta);return symbolMeta}function prepareBarLength(itemModel,symbolRepeat,layout,opt,output){var valueDim=opt.valueDim;var symbolBoundingData=itemModel.get("symbolBoundingData");var valueAxis=opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());var zeroPx=valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));var pxSignIdx=1-+(layout[valueDim.wh]<=0);var boundingLength;if(isArray(symbolBoundingData)){var symbolBoundingExtent=[convertToCoordOnAxis(valueAxis,symbolBoundingData[0])-zeroPx,convertToCoordOnAxis(valueAxis,symbolBoundingData[1])-zeroPx];symbolBoundingExtent[1]<symbolBoundingExtent[0]&&(symbolBoundingExtent.reverse());boundingLength=symbolBoundingExtent[pxSignIdx]}else{if(symbolBoundingData!=null){boundingLength=convertToCoordOnAxis(valueAxis,symbolBoundingData)-zeroPx}else{if(symbolRepeat){boundingLength=opt.coordSysExtent[valueDim.index][pxSignIdx]-zeroPx}else{boundingLength=layout[valueDim.wh]}}}output.boundingLength=boundingLength;if(symbolRepeat){output.repeatCutLength=layout[valueDim.wh]}output.pxSign=boundingLength>0?1:boundingLength<0?-1:0}function convertToCoordOnAxis(axis,value){return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)))}function prepareSymbolSize(data,dataIndex,layout,symbolRepeat,symbolClip,boundingLength,pxSign,symbolPatternSize,opt,output){var valueDim=opt.valueDim;var categoryDim=opt.categoryDim;var categorySize=Math.abs(layout[categoryDim.wh]);var symbolSize=data.getItemVisual(dataIndex,"symbolSize");if(isArray(symbolSize)){symbolSize=symbolSize.slice()
}else{if(symbolSize==null){symbolSize="100%"}symbolSize=[symbolSize,symbolSize]}symbolSize[categoryDim.index]=parsePercent$1(symbolSize[categoryDim.index],categorySize);symbolSize[valueDim.index]=parsePercent$1(symbolSize[valueDim.index],symbolRepeat?categorySize:Math.abs(boundingLength));output.symbolSize=symbolSize;var symbolScale=output.symbolScale=[symbolSize[0]/symbolPatternSize,symbolSize[1]/symbolPatternSize];symbolScale[valueDim.index]*=(opt.isHorizontal?-1:1)*pxSign}function prepareLineWidth(itemModel,symbolScale,rotation,opt,output){var valueLineWidth=itemModel.get(BAR_BORDER_WIDTH_QUERY$1)||0;if(valueLineWidth){pathForLineWidth.attr({scale:symbolScale.slice(),rotation:rotation});pathForLineWidth.updateTransform();valueLineWidth/=pathForLineWidth.getLineScale();valueLineWidth*=symbolScale[opt.valueDim.index]}output.valueLineWidth=valueLineWidth}function prepareLayoutInfo(itemModel,symbolSize,layout,symbolRepeat,symbolClip,symbolOffset,symbolPosition,valueLineWidth,boundingLength,repeatCutLength,opt,output){var categoryDim=opt.categoryDim;var valueDim=opt.valueDim;var pxSign=output.pxSign;var unitLength=Math.max(symbolSize[valueDim.index]+valueLineWidth,0);var pathLen=unitLength;if(symbolRepeat){var absBoundingLength=Math.abs(boundingLength);var symbolMargin=retrieve(itemModel.get("symbolMargin"),"15%")+"";var hasEndGap=false;if(symbolMargin.lastIndexOf("!")===symbolMargin.length-1){hasEndGap=true;symbolMargin=symbolMargin.slice(0,symbolMargin.length-1)}symbolMargin=parsePercent$1(symbolMargin,symbolSize[valueDim.index]);var uLenWithMargin=Math.max(unitLength+symbolMargin*2,0);var endFix=hasEndGap?0:symbolMargin*2;var repeatSpecified=isNumeric(symbolRepeat);var repeatTimes=repeatSpecified?symbolRepeat:toIntTimes((absBoundingLength+endFix)/uLenWithMargin);var mDiff=absBoundingLength-repeatTimes*unitLength;symbolMargin=mDiff/2/(hasEndGap?repeatTimes:repeatTimes-1);uLenWithMargin=unitLength+symbolMargin*2;endFix=hasEndGap?0:symbolMargin*2;if(!repeatSpecified&&symbolRepeat!=="fixed"){repeatTimes=repeatCutLength?toIntTimes((Math.abs(repeatCutLength)+endFix)/uLenWithMargin):0
}pathLen=repeatTimes*uLenWithMargin-endFix;output.repeatTimes=repeatTimes;output.symbolMargin=symbolMargin}var sizeFix=pxSign*(pathLen/2);var pathPosition=output.pathPosition=[];pathPosition[categoryDim.index]=layout[categoryDim.wh]/2;pathPosition[valueDim.index]=symbolPosition==="start"?sizeFix:symbolPosition==="end"?boundingLength-sizeFix:boundingLength/2;if(symbolOffset){pathPosition[0]+=symbolOffset[0];pathPosition[1]+=symbolOffset[1]}var bundlePosition=output.bundlePosition=[];bundlePosition[categoryDim.index]=layout[categoryDim.xy];bundlePosition[valueDim.index]=layout[valueDim.xy];var barRectShape=output.barRectShape=extend({},layout);barRectShape[valueDim.wh]=pxSign*Math.max(Math.abs(layout[valueDim.wh]),Math.abs(pathPosition[valueDim.index]+sizeFix));barRectShape[categoryDim.wh]=layout[categoryDim.wh];var clipShape=output.clipShape={};clipShape[categoryDim.xy]=-layout[categoryDim.xy];clipShape[categoryDim.wh]=opt.ecSize[categoryDim.wh];clipShape[valueDim.xy]=0;clipShape[valueDim.wh]=layout[valueDim.wh]}function createPath(symbolMeta){var symbolPatternSize=symbolMeta.symbolPatternSize;var path=createSymbol(symbolMeta.symbolType,-symbolPatternSize/2,-symbolPatternSize/2,symbolPatternSize,symbolPatternSize,symbolMeta.color);path.attr({culling:true});path.type!=="image"&&path.setStyle({strokeNoScale:true});return path}function createOrUpdateRepeatSymbols(bar,opt,symbolMeta,isUpdate){var bundle=bar.__pictorialBundle;var symbolSize=symbolMeta.symbolSize;var valueLineWidth=symbolMeta.valueLineWidth;var pathPosition=symbolMeta.pathPosition;var valueDim=opt.valueDim;var repeatTimes=symbolMeta.repeatTimes||0;var index=0;var unit=symbolSize[opt.valueDim.index]+valueLineWidth+symbolMeta.symbolMargin*2;eachPath(bar,function(path){path.__pictorialAnimationIndex=index;path.__pictorialRepeatTimes=repeatTimes;if(index<repeatTimes){updateAttr(path,null,makeTarget(index),symbolMeta,isUpdate)}else{updateAttr(path,null,{scale:[0,0]},symbolMeta,isUpdate,function(){bundle.remove(path)
})}updateHoverAnimation(path,symbolMeta);index++});for(;index<repeatTimes;index++){var path=createPath(symbolMeta);path.__pictorialAnimationIndex=index;path.__pictorialRepeatTimes=repeatTimes;bundle.add(path);var target=makeTarget(index);updateAttr(path,{position:target.position,scale:[0,0]},{scale:target.scale,rotation:target.rotation},symbolMeta,isUpdate);path.on("mouseover",onMouseOver).on("mouseout",onMouseOut);updateHoverAnimation(path,symbolMeta)}function makeTarget(index){var position=pathPosition.slice();var pxSign=symbolMeta.pxSign;var i=index;if(symbolMeta.symbolRepeatDirection==="start"?pxSign>0:pxSign<0){i=repeatTimes-1-index}position[valueDim.index]=unit*(i-repeatTimes/2+0.5)+pathPosition[valueDim.index];return{position:position,scale:symbolMeta.symbolScale.slice(),rotation:symbolMeta.rotation}}function onMouseOver(){eachPath(bar,function(path){path.trigger("emphasis")})}function onMouseOut(){eachPath(bar,function(path){path.trigger("normal")})}}function createOrUpdateSingleSymbol(bar,opt,symbolMeta,isUpdate){var bundle=bar.__pictorialBundle;var mainPath=bar.__pictorialMainPath;if(!mainPath){mainPath=bar.__pictorialMainPath=createPath(symbolMeta);bundle.add(mainPath);updateAttr(mainPath,{position:symbolMeta.pathPosition.slice(),scale:[0,0],rotation:symbolMeta.rotation},{scale:symbolMeta.symbolScale.slice()},symbolMeta,isUpdate);mainPath.on("mouseover",onMouseOver).on("mouseout",onMouseOut)}else{updateAttr(mainPath,null,{position:symbolMeta.pathPosition.slice(),scale:symbolMeta.symbolScale.slice(),rotation:symbolMeta.rotation},symbolMeta,isUpdate)}updateHoverAnimation(mainPath,symbolMeta);function onMouseOver(){this.trigger("emphasis")}function onMouseOut(){this.trigger("normal")}}function createOrUpdateBarRect(bar,symbolMeta,isUpdate){var rectShape=extend({},symbolMeta.barRectShape);var barRect=bar.__pictorialBarRect;if(!barRect){barRect=bar.__pictorialBarRect=new Rect({z2:2,shape:rectShape,silent:true,style:{stroke:"transparent",fill:"transparent",lineWidth:0}});
bar.add(barRect)}else{updateAttr(barRect,null,{shape:rectShape},symbolMeta,isUpdate)}}function createOrUpdateClip(bar,opt,symbolMeta,isUpdate){if(symbolMeta.symbolClip){var clipPath=bar.__pictorialClipPath;var clipShape=extend({},symbolMeta.clipShape);var valueDim=opt.valueDim;var animationModel=symbolMeta.animationModel;var dataIndex=symbolMeta.dataIndex;if(clipPath){updateProps(clipPath,{shape:clipShape},animationModel,dataIndex)}else{clipShape[valueDim.wh]=0;clipPath=new Rect({shape:clipShape});bar.__pictorialBundle.setClipPath(clipPath);bar.__pictorialClipPath=clipPath;var target={};target[valueDim.wh]=symbolMeta.clipShape[valueDim.wh];graphic[isUpdate?"updateProps":"initProps"](clipPath,{shape:target},animationModel,dataIndex)}}}function getItemModel(data,dataIndex){var itemModel=data.getItemModel(dataIndex);itemModel.getAnimationDelayParams=getAnimationDelayParams;itemModel.isAnimationEnabled=isAnimationEnabled;return itemModel}function getAnimationDelayParams(path){return{index:path.__pictorialAnimationIndex,count:path.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function updateHoverAnimation(path,symbolMeta){path.off("emphasis").off("normal");var scale=symbolMeta.symbolScale.slice();symbolMeta.hoverAnimation&&path.on("emphasis",function(){this.animateTo({scale:[scale[0]*1.1,scale[1]*1.1]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:scale.slice()},400,"elasticOut")})}function createBar(data,opt,symbolMeta,isUpdate){var bar=new Group();var bundle=new Group();bar.add(bundle);bar.__pictorialBundle=bundle;bundle.attr("position",symbolMeta.bundlePosition.slice());if(symbolMeta.symbolRepeat){createOrUpdateRepeatSymbols(bar,opt,symbolMeta)}else{createOrUpdateSingleSymbol(bar,opt,symbolMeta)}createOrUpdateBarRect(bar,symbolMeta,isUpdate);createOrUpdateClip(bar,opt,symbolMeta,isUpdate);bar.__pictorialShapeStr=getShapeStr(data,symbolMeta);bar.__pictorialSymbolMeta=symbolMeta;
return bar}function updateBar(bar,opt,symbolMeta){var animationModel=symbolMeta.animationModel;var dataIndex=symbolMeta.dataIndex;var bundle=bar.__pictorialBundle;updateProps(bundle,{position:symbolMeta.bundlePosition.slice()},animationModel,dataIndex);if(symbolMeta.symbolRepeat){createOrUpdateRepeatSymbols(bar,opt,symbolMeta,true)}else{createOrUpdateSingleSymbol(bar,opt,symbolMeta,true)}createOrUpdateBarRect(bar,symbolMeta,true);createOrUpdateClip(bar,opt,symbolMeta,true)}function removeBar(data,dataIndex,animationModel,bar){var labelRect=bar.__pictorialBarRect;labelRect&&(labelRect.style.text=null);var pathes=[];eachPath(bar,function(path){pathes.push(path)});bar.__pictorialMainPath&&pathes.push(bar.__pictorialMainPath);bar.__pictorialClipPath&&(animationModel=null);each$1(pathes,function(path){updateProps(path,{scale:[0,0]},animationModel,dataIndex,function(){bar.parent&&bar.parent.remove(bar)})});data.setItemGraphicEl(dataIndex,null)}function getShapeStr(data,symbolMeta){return[data.getItemVisual(symbolMeta.dataIndex,"symbol")||"none",!!symbolMeta.symbolRepeat,!!symbolMeta.symbolClip].join(":")}function eachPath(bar,cb,context){each$1(bar.__pictorialBundle.children(),function(el){el!==bar.__pictorialBarRect&&cb.call(context,el)})}function updateAttr(el,immediateAttrs,animationAttrs,symbolMeta,isUpdate,cb){immediateAttrs&&el.attr(immediateAttrs);if(symbolMeta.symbolClip&&!isUpdate){animationAttrs&&el.attr(animationAttrs)}else{animationAttrs&&graphic[isUpdate?"updateProps":"initProps"](el,animationAttrs,symbolMeta.animationModel,symbolMeta.dataIndex,cb)}}function updateCommon$1(bar,opt,symbolMeta){var color=symbolMeta.color;var dataIndex=symbolMeta.dataIndex;var itemModel=symbolMeta.itemModel;var normalStyle=itemModel.getModel("itemStyle").getItemStyle(["color"]);var hoverStyle=itemModel.getModel("emphasis.itemStyle").getItemStyle();var cursorStyle=itemModel.getShallow("cursor");eachPath(bar,function(path){path.setColor(color);path.setStyle(defaults({fill:color,opacity:symbolMeta.opacity},normalStyle));
setHoverStyle(path,hoverStyle);cursorStyle&&(path.cursor=cursorStyle);path.z2=symbolMeta.z2});var barRectHoverStyle={};var barPositionOutside=opt.valueDim.posDesc[+(symbolMeta.boundingLength>0)];var barRect=bar.__pictorialBarRect;setLabel(barRect.style,barRectHoverStyle,itemModel,color,opt.seriesModel,dataIndex,barPositionOutside);setHoverStyle(barRect,barRectHoverStyle)}function toIntTimes(times){var roundedTimes=Math.round(times);return Math.abs(times-roundedTimes)<0.0001?roundedTimes:Math.ceil(times)}registerLayout(curry(layout,"pictorialBar"));registerVisual(visualSymbol("pictorialBar","roundRect"));var SingleAxis=function(dim,scale,coordExtent,axisType,position){Axis.call(this,dim,scale,coordExtent);this.type=axisType||"value";this.position=position||"bottom";this.orient=null};SingleAxis.prototype={constructor:SingleAxis,model:null,isHorizontal:function(){var position=this.position;return position==="top"||position==="bottom"},pointToData:function(point,clamp){return this.coordinateSystem.pointToData(point,clamp)[0]},toGlobalCoord:null,toLocalCoord:null};inherits(SingleAxis,Axis);function Single(axisModel,ecModel,api){this.dimension="single";this.dimensions=["single"];this._axis=null;this._rect;this._init(axisModel,ecModel,api);this.model=axisModel}Single.prototype={type:"singleAxis",axisPointerEnabled:true,constructor:Single,_init:function(axisModel,ecModel,api){var dim=this.dimension;var axis=new SingleAxis(dim,createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisModel.get("position"));var isCategory=axis.type==="category";axis.onBand=isCategory&&axisModel.get("boundaryGap");axis.inverse=axisModel.get("inverse");axis.orient=axisModel.get("orient");axisModel.axis=axis;axis.model=axisModel;axis.coordinateSystem=this;this._axis=axis},update:function(ecModel,api){ecModel.eachSeries(function(seriesModel){if(seriesModel.coordinateSystem===this){var data=seriesModel.getData();each$1(data.mapDimension(this.dimension,true),function(dim){this._axis.scale.unionExtentFromData(data,dim)
},this);niceScaleExtent(this._axis.scale,this._axis.model)}},this)},resize:function(axisModel,api){this._rect=getLayoutRect({left:axisModel.get("left"),top:axisModel.get("top"),right:axisModel.get("right"),bottom:axisModel.get("bottom"),width:axisModel.get("width"),height:axisModel.get("height")},{width:api.getWidth(),height:api.getHeight()});this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var rect=this._rect;var axis=this._axis;var isHorizontal=axis.isHorizontal();var extent=isHorizontal?[0,rect.width]:[0,rect.height];var idx=axis.reverse?1:0;axis.setExtent(extent[idx],extent[1-idx]);this._updateAxisTransform(axis,isHorizontal?rect.x:rect.y)},_updateAxisTransform:function(axis,coordBase){var axisExtent=axis.getExtent();var extentSum=axisExtent[0]+axisExtent[1];var isHorizontal=axis.isHorizontal();axis.toGlobalCoord=isHorizontal?function(coord){return coord+coordBase}:function(coord){return extentSum-coord+coordBase};axis.toLocalCoord=isHorizontal?function(coord){return coord-coordBase}:function(coord){return extentSum-coord+coordBase}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(point){var rect=this.getRect();var axis=this.getAxis();var orient=axis.orient;if(orient==="horizontal"){return axis.contain(axis.toLocalCoord(point[0]))&&(point[1]>=rect.y&&point[1]<=(rect.y+rect.height))}else{return axis.contain(axis.toLocalCoord(point[1]))&&(point[0]>=rect.y&&point[0]<=(rect.y+rect.height))}},pointToData:function(point){var axis=this.getAxis();return[axis.coordToData(axis.toLocalCoord(point[axis.orient==="horizontal"?0:1]))]},dataToPoint:function(val){var axis=this.getAxis();var rect=this.getRect();var pt=[];var idx=axis.orient==="horizontal"?0:1;if(val instanceof Array){val=val[0]}pt[idx]=axis.toGlobalCoord(axis.dataToCoord(+val));pt[1-idx]=idx===0?(rect.y+rect.height/2):(rect.x+rect.width/2);
return pt}};function create$3(ecModel,api){var singles=[];ecModel.eachComponent("singleAxis",function(axisModel,idx){var single=new Single(axisModel,ecModel,api);single.name="single_"+idx;single.resize(axisModel,api);axisModel.coordinateSystem=single;singles.push(single)});ecModel.eachSeries(function(seriesModel){if(seriesModel.get("coordinateSystem")==="singleAxis"){var singleAxisModel=ecModel.queryComponents({mainType:"singleAxis",index:seriesModel.get("singleAxisIndex"),id:seriesModel.get("singleAxisId")})[0];seriesModel.coordinateSystem=singleAxisModel&&singleAxisModel.coordinateSystem}});return singles}CoordinateSystemManager.register("single",{create:create$3,dimensions:Single.prototype.dimensions});function layout$2(axisModel,opt){opt=opt||{};var single=axisModel.coordinateSystem;var axis=axisModel.axis;var layout={};var axisPosition=axis.position;var orient=axis.orient;var rect=single.getRect();var rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height];var positionMap={horizontal:{top:rectBound[2],bottom:rectBound[3]},vertical:{left:rectBound[0],right:rectBound[1]}};layout.position=[orient==="vertical"?positionMap.vertical[axisPosition]:rectBound[0],orient==="horizontal"?positionMap.horizontal[axisPosition]:rectBound[3]];var r={horizontal:0,vertical:1};layout.rotation=Math.PI/2*r[orient];var directionMap={top:-1,bottom:1,right:1,left:-1};layout.labelDirection=layout.tickDirection=layout.nameDirection=directionMap[axisPosition];if(axisModel.get("axisTick.inside")){layout.tickDirection=-layout.tickDirection}if(retrieve(opt.labelInside,axisModel.get("axisLabel.inside"))){layout.labelDirection=-layout.labelDirection}var labelRotation=opt.rotate;labelRotation==null&&(labelRotation=axisModel.get("axisLabel.rotate"));layout.labelRotation=axisPosition==="top"?-labelRotation:labelRotation;layout.z2=1;return layout}var axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"];var selfBuilderAttr="splitLine";var SingleAxisView=AxisView.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(axisModel,ecModel,api,payload){var group=this.group;
group.removeAll();var layout=layout$2(axisModel);var axisBuilder=new AxisBuilder(axisModel,layout);each$1(axisBuilderAttrs$2,axisBuilder.add,axisBuilder);group.add(axisBuilder.getGroup());if(axisModel.get(selfBuilderAttr+".show")){this["_"+selfBuilderAttr](axisModel)}SingleAxisView.superCall(this,"render",axisModel,ecModel,api,payload)},_splitLine:function(axisModel){var axis=axisModel.axis;if(axis.scale.isBlank()){return}var splitLineModel=axisModel.getModel("splitLine");var lineStyleModel=splitLineModel.getModel("lineStyle");var lineWidth=lineStyleModel.get("width");var lineColors=lineStyleModel.get("color");lineColors=lineColors instanceof Array?lineColors:[lineColors];var gridRect=axisModel.coordinateSystem.getRect();var isHorizontal=axis.isHorizontal();var splitLines=[];var lineCount=0;var ticksCoords=axis.getTicksCoords({tickModel:splitLineModel});var p1=[];var p2=[];for(var i=0;i<ticksCoords.length;++i){var tickCoord=axis.toGlobalCoord(ticksCoords[i].coord);if(isHorizontal){p1[0]=tickCoord;p1[1]=gridRect.y;p2[0]=tickCoord;p2[1]=gridRect.y+gridRect.height}else{p1[0]=gridRect.x;p1[1]=tickCoord;p2[0]=gridRect.x+gridRect.width;p2[1]=tickCoord}var colorIndex=(lineCount++)%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[];splitLines[colorIndex].push(new Line(subPixelOptimizeLine({shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:{lineWidth:lineWidth},silent:true})))}for(var i=0;i<splitLines.length;++i){this.group.add(mergePath(splitLines[i],{style:{stroke:lineColors[i%lineColors.length],lineDash:lineStyleModel.getLineDash(lineWidth),lineWidth:lineWidth},silent:true}))}}});var AxisModel$4=ComponentModel.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});var defaultOption$2={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:true,lineStyle:{width:2,type:"solid"}},tooltip:{show:true},axisTick:{show:true,length:6,lineStyle:{width:2}},axisLabel:{show:true,interval:"auto"},splitLine:{show:true,lineStyle:{type:"dashed",opacity:0.2}}};
function getAxisType$2(axisName,option){return option.type||(option.data?"category":"value")}merge(AxisModel$4.prototype,axisModelCommonMixin);axisModelCreator("single",AxisModel$4,getAxisType$2,defaultOption$2);var findPointFromSeries=function(finder,ecModel){var point=[];var seriesIndex=finder.seriesIndex;var seriesModel;if(seriesIndex==null||!(seriesModel=ecModel.getSeriesByIndex(seriesIndex))){return{point:[]}}var data=seriesModel.getData();var dataIndex=queryDataIndex(data,finder);if(dataIndex==null||dataIndex<0||isArray(dataIndex)){return{point:[]}}var el=data.getItemGraphicEl(dataIndex);var coordSys=seriesModel.coordinateSystem;if(seriesModel.getTooltipPosition){point=seriesModel.getTooltipPosition(dataIndex)||[]}else{if(coordSys&&coordSys.dataToPoint){point=coordSys.dataToPoint(data.getValues(map(coordSys.dimensions,function(dim){return data.mapDimension(dim)}),dataIndex,true))||[]}else{if(el){var rect=el.getBoundingRect().clone();rect.applyTransform(el.transform);point=[rect.x+rect.width/2,rect.y+rect.height/2]}}}return{point:point,el:el}};var each$14=each$1;var curry$3=curry;var inner$9=makeInner();var axisTrigger=function(payload,ecModel,api){var currTrigger=payload.currTrigger;var point=[payload.x,payload.y];var finder=payload;var dispatchAction=payload.dispatchAction||bind(api.dispatchAction,api);var coordSysAxesInfo=ecModel.getComponent("axisPointer").coordSysAxesInfo;if(!coordSysAxesInfo){return}if(illegalPoint(point)){point=findPointFromSeries({seriesIndex:finder.seriesIndex,dataIndex:finder.dataIndex},ecModel).point}var isIllegalPoint=illegalPoint(point);var inputAxesInfo=finder.axesInfo;var axesInfo=coordSysAxesInfo.axesInfo;var shouldHide=currTrigger==="leave"||illegalPoint(point);var outputFinder={};var showValueMap={};var dataByCoordSys={list:[],map:{}};var updaters={showPointer:curry$3(showPointer,showValueMap),showTooltip:curry$3(showTooltip,dataByCoordSys)};each$14(coordSysAxesInfo.coordSysMap,function(coordSys,coordSysKey){var coordSysContainsPoint=isIllegalPoint||coordSys.containPoint(point);
each$14(coordSysAxesInfo.coordSysAxesInfo[coordSysKey],function(axisInfo,key){var axis=axisInfo.axis;var inputAxisInfo=findInputAxisInfo(inputAxesInfo,axisInfo);if(!shouldHide&&coordSysContainsPoint&&(!inputAxesInfo||inputAxisInfo)){var val=inputAxisInfo&&inputAxisInfo.value;if(val==null&&!isIllegalPoint){val=axis.pointToData(point)}val!=null&&processOnAxis(axisInfo,val,updaters,false,outputFinder)}})});var linkTriggers={};each$14(axesInfo,function(tarAxisInfo,tarKey){var linkGroup=tarAxisInfo.linkGroup;if(linkGroup&&!showValueMap[tarKey]){each$14(linkGroup.axesInfo,function(srcAxisInfo,srcKey){var srcValItem=showValueMap[srcKey];if(srcAxisInfo!==tarAxisInfo&&srcValItem){var val=srcValItem.value;linkGroup.mapper&&(val=tarAxisInfo.axis.scale.parse(linkGroup.mapper(val,makeMapperParam(srcAxisInfo),makeMapperParam(tarAxisInfo))));linkTriggers[tarAxisInfo.key]=val}})}});each$14(linkTriggers,function(val,tarKey){processOnAxis(axesInfo[tarKey],val,updaters,true,outputFinder)});updateModelActually(showValueMap,axesInfo,outputFinder);dispatchTooltipActually(dataByCoordSys,point,payload,dispatchAction);dispatchHighDownActually(axesInfo,dispatchAction,api);return outputFinder};function processOnAxis(axisInfo,newValue,updaters,dontSnap,outputFinder){var axis=axisInfo.axis;if(axis.scale.isBlank()||!axis.containData(newValue)){return}if(!axisInfo.involveSeries){updaters.showPointer(axisInfo,newValue);return}var payloadInfo=buildPayloadsBySeries(newValue,axisInfo);var payloadBatch=payloadInfo.payloadBatch;var snapToValue=payloadInfo.snapToValue;if(payloadBatch[0]&&outputFinder.seriesIndex==null){extend(outputFinder,payloadBatch[0])}if(!dontSnap&&axisInfo.snap){if(axis.containData(snapToValue)&&snapToValue!=null){newValue=snapToValue}}updaters.showPointer(axisInfo,newValue,payloadBatch,outputFinder);updaters.showTooltip(axisInfo,payloadInfo,snapToValue)}function buildPayloadsBySeries(value,axisInfo){var axis=axisInfo.axis;var dim=axis.dim;var snapToValue=value;var payloadBatch=[];var minDist=Number.MAX_VALUE;
var minDiff=-1;each$14(axisInfo.seriesModels,function(series,idx){var dataDim=series.getData().mapDimension(dim,true);var seriesNestestValue;var dataIndices;if(series.getAxisTooltipData){var result=series.getAxisTooltipData(dataDim,value,axis);dataIndices=result.dataIndices;seriesNestestValue=result.nestestValue}else{dataIndices=series.getData().indicesOfNearest(dataDim[0],value,axis.type==="category"?0.5:null);if(!dataIndices.length){return}seriesNestestValue=series.getData().get(dataDim[0],dataIndices[0])}if(seriesNestestValue==null||!isFinite(seriesNestestValue)){return}var diff=value-seriesNestestValue;var dist=Math.abs(diff);if(dist<=minDist){if(dist<minDist||(diff>=0&&minDiff<0)){minDist=dist;minDiff=diff;snapToValue=seriesNestestValue;payloadBatch.length=0}each$14(dataIndices,function(dataIndex){payloadBatch.push({seriesIndex:series.seriesIndex,dataIndexInside:dataIndex,dataIndex:series.getData().getRawIndex(dataIndex)})})}});return{payloadBatch:payloadBatch,snapToValue:snapToValue}}function showPointer(showValueMap,axisInfo,value,payloadBatch){showValueMap[axisInfo.key]={value:value,payloadBatch:payloadBatch}}function showTooltip(dataByCoordSys,axisInfo,payloadInfo,value){var payloadBatch=payloadInfo.payloadBatch;var axis=axisInfo.axis;var axisModel=axis.model;var axisPointerModel=axisInfo.axisPointerModel;if(!axisInfo.triggerTooltip||!payloadBatch.length){return}var coordSysModel=axisInfo.coordSys.model;var coordSysKey=makeKey(coordSysModel);var coordSysItem=dataByCoordSys.map[coordSysKey];if(!coordSysItem){coordSysItem=dataByCoordSys.map[coordSysKey]={coordSysId:coordSysModel.id,coordSysIndex:coordSysModel.componentIndex,coordSysType:coordSysModel.type,coordSysMainType:coordSysModel.mainType,dataByAxis:[]};dataByCoordSys.list.push(coordSysItem)}coordSysItem.dataByAxis.push({axisDim:axis.dim,axisIndex:axisModel.componentIndex,axisType:axisModel.type,axisId:axisModel.id,value:value,valueLabelOpt:{precision:axisPointerModel.get("label.precision"),formatter:axisPointerModel.get("label.formatter")},seriesDataIndices:payloadBatch.slice()})
}function updateModelActually(showValueMap,axesInfo,outputFinder){var outputAxesInfo=outputFinder.axesInfo=[];each$14(axesInfo,function(axisInfo,key){var option=axisInfo.axisPointerModel.option;var valItem=showValueMap[key];if(valItem){!axisInfo.useHandle&&(option.status="show");option.value=valItem.value;option.seriesDataIndices=(valItem.payloadBatch||[]).slice()}else{!axisInfo.useHandle&&(option.status="hide")}option.status==="show"&&outputAxesInfo.push({axisDim:axisInfo.axis.dim,axisIndex:axisInfo.axis.model.componentIndex,value:option.value})})}function dispatchTooltipActually(dataByCoordSys,point,payload,dispatchAction){if(illegalPoint(point)||!dataByCoordSys.list.length){dispatchAction({type:"hideTip"});return}var sampleItem=((dataByCoordSys.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};dispatchAction({type:"showTip",escapeConnect:true,x:point[0],y:point[1],tooltipOption:payload.tooltipOption,position:payload.position,dataIndexInside:sampleItem.dataIndexInside,dataIndex:sampleItem.dataIndex,seriesIndex:sampleItem.seriesIndex,dataByCoordSys:dataByCoordSys.list})}function dispatchHighDownActually(axesInfo,dispatchAction,api){var zr=api.getZr();var highDownKey="axisPointerLastHighlights";var lastHighlights=inner$9(zr)[highDownKey]||{};var newHighlights=inner$9(zr)[highDownKey]={};each$14(axesInfo,function(axisInfo,key){var option=axisInfo.axisPointerModel.option;option.status==="show"&&each$14(option.seriesDataIndices,function(batchItem){var key=batchItem.seriesIndex+" | "+batchItem.dataIndex;newHighlights[key]=batchItem})});var toHighlight=[];var toDownplay=[];each$1(lastHighlights,function(batchItem,key){!newHighlights[key]&&toDownplay.push(batchItem)});each$1(newHighlights,function(batchItem,key){!lastHighlights[key]&&toHighlight.push(batchItem)});toDownplay.length&&api.dispatchAction({type:"downplay",escapeConnect:true,batch:toDownplay});toHighlight.length&&api.dispatchAction({type:"highlight",escapeConnect:true,batch:toHighlight})}function findInputAxisInfo(inputAxesInfo,axisInfo){for(var i=0;
i<(inputAxesInfo||[]).length;i++){var inputAxisInfo=inputAxesInfo[i];if(axisInfo.axis.dim===inputAxisInfo.axisDim&&axisInfo.axis.model.componentIndex===inputAxisInfo.axisIndex){return inputAxisInfo}}}function makeMapperParam(axisInfo){var axisModel=axisInfo.axis.model;var item={};var dim=item.axisDim=axisInfo.axis.dim;item.axisIndex=item[dim+"AxisIndex"]=axisModel.componentIndex;item.axisName=item[dim+"AxisName"]=axisModel.name;item.axisId=item[dim+"AxisId"]=axisModel.id;return item}function illegalPoint(point){return !point||point[0]==null||isNaN(point[0])||point[1]==null||isNaN(point[1])}var AxisPointerModel=extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:false,triggerTooltip:true,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:true,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:false,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var inner$10=makeInner();var each$15=each$1;function register(key,api,handler){if(env$1.node){return}var zr=api.getZr();inner$10(zr).records||(inner$10(zr).records={});initGlobalListeners(zr,api);var record=inner$10(zr).records[key]||(inner$10(zr).records[key]={});record.handler=handler}function initGlobalListeners(zr,api){if(inner$10(zr).initialized){return}inner$10(zr).initialized=true;useHandler("click",curry(doEnter,"click"));useHandler("mousemove",curry(doEnter,"mousemove"));useHandler("globalout",onLeave);function useHandler(eventType,cb){zr.on(eventType,function(e){var dis=makeDispatchAction(api);
each$15(inner$10(zr).records,function(record){record&&cb(record,e,dis.dispatchAction)});dispatchTooltipFinally(dis.pendings,api)})}}function dispatchTooltipFinally(pendings,api){var showLen=pendings.showTip.length;var hideLen=pendings.hideTip.length;var actuallyPayload;if(showLen){actuallyPayload=pendings.showTip[showLen-1]}else{if(hideLen){actuallyPayload=pendings.hideTip[hideLen-1]}}if(actuallyPayload){actuallyPayload.dispatchAction=null;api.dispatchAction(actuallyPayload)}}function onLeave(record,e,dispatchAction){record.handler("leave",null,dispatchAction)}function doEnter(currTrigger,record,e,dispatchAction){record.handler(currTrigger,e,dispatchAction)}function makeDispatchAction(api){var pendings={showTip:[],hideTip:[]};var dispatchAction=function(payload){var pendingList=pendings[payload.type];if(pendingList){pendingList.push(payload)}else{payload.dispatchAction=dispatchAction;api.dispatchAction(payload)}};return{dispatchAction:dispatchAction,pendings:pendings}}function unregister(key,api){if(env$1.node){return}var zr=api.getZr();var record=(inner$10(zr).records||{})[key];if(record){inner$10(zr).records[key]=null}}var AxisPointerView=extendComponentView({type:"axisPointer",render:function(globalAxisPointerModel,ecModel,api){var globalTooltipModel=ecModel.getComponent("tooltip");var triggerOn=globalAxisPointerModel.get("triggerOn")||(globalTooltipModel&&globalTooltipModel.get("triggerOn")||"mousemove|click");register("axisPointer",api,function(currTrigger,e,dispatchAction){if(triggerOn!=="none"&&(currTrigger==="leave"||triggerOn.indexOf(currTrigger)>=0)){dispatchAction({type:"updateAxisPointer",currTrigger:currTrigger,x:e&&e.offsetX,y:e&&e.offsetY})}})},remove:function(ecModel,api){unregister(api.getZr(),"axisPointer");AxisPointerView.superApply(this._model,"remove",arguments)},dispose:function(ecModel,api){unregister("axisPointer",api);AxisPointerView.superApply(this._model,"dispose",arguments)}});var inner$11=makeInner();var clone$4=clone;var bind$2=bind;function BaseAxisPointer(){}BaseAxisPointer.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:false,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(axisModel,axisPointerModel,api,forceRender){var value=axisPointerModel.get("value");
var status=axisPointerModel.get("status");this._axisModel=axisModel;this._axisPointerModel=axisPointerModel;this._api=api;if(!forceRender&&this._lastValue===value&&this._lastStatus===status){return}this._lastValue=value;this._lastStatus=status;var group=this._group;var handle=this._handle;if(!status||status==="hide"){group&&group.hide();handle&&handle.hide();return}group&&group.show();handle&&handle.show();var elOption={};this.makeElOption(elOption,value,axisModel,axisPointerModel,api);var graphicKey=elOption.graphicKey;if(graphicKey!==this._lastGraphicKey){this.clear(api)}this._lastGraphicKey=graphicKey;var moveAnimation=this._moveAnimation=this.determineAnimation(axisModel,axisPointerModel);if(!group){group=this._group=new Group();this.createPointerEl(group,elOption,axisModel,axisPointerModel);this.createLabelEl(group,elOption,axisModel,axisPointerModel);api.getZr().add(group)}else{var doUpdateProps=curry(updateProps$1,axisPointerModel,moveAnimation);this.updatePointerEl(group,elOption,doUpdateProps,axisPointerModel);this.updateLabelEl(group,elOption,doUpdateProps,axisPointerModel)}updateMandatoryProps(group,axisPointerModel,true);this._renderHandle(value)},remove:function(api){this.clear(api)},dispose:function(api){this.clear(api)},determineAnimation:function(axisModel,axisPointerModel){var animation=axisPointerModel.get("animation");var axis=axisModel.axis;var isCategoryAxis=axis.type==="category";var useSnap=axisPointerModel.get("snap");if(!useSnap&&!isCategoryAxis){return false}if(animation==="auto"||animation==null){var animationThreshold=this.animationThreshold;if(isCategoryAxis&&axis.getBandWidth()>animationThreshold){return true}if(useSnap){var seriesDataCount=getAxisInfo(axisModel).seriesDataCount;var axisExtent=axis.getExtent();return Math.abs(axisExtent[0]-axisExtent[1])/seriesDataCount>animationThreshold}return false}return animation===true},makeElOption:function(elOption,value,axisModel,axisPointerModel,api){},createPointerEl:function(group,elOption,axisModel,axisPointerModel){var pointerOption=elOption.pointer;
if(pointerOption){var pointerEl=inner$11(group).pointerEl=new graphic[pointerOption.type](clone$4(elOption.pointer));group.add(pointerEl)}},createLabelEl:function(group,elOption,axisModel,axisPointerModel){if(elOption.label){var labelEl=inner$11(group).labelEl=new Rect(clone$4(elOption.label));group.add(labelEl);updateLabelShowHide(labelEl,axisPointerModel)}},updatePointerEl:function(group,elOption,updateProps$$1){var pointerEl=inner$11(group).pointerEl;if(pointerEl){pointerEl.setStyle(elOption.pointer.style);updateProps$$1(pointerEl,{shape:elOption.pointer.shape})}},updateLabelEl:function(group,elOption,updateProps$$1,axisPointerModel){var labelEl=inner$11(group).labelEl;if(labelEl){labelEl.setStyle(elOption.label.style);updateProps$$1(labelEl,{shape:elOption.label.shape,position:elOption.label.position});updateLabelShowHide(labelEl,axisPointerModel)}},_renderHandle:function(value){if(this._dragging||!this.updateHandleTransform){return}var axisPointerModel=this._axisPointerModel;var zr=this._api.getZr();var handle=this._handle;var handleModel=axisPointerModel.getModel("handle");var status=axisPointerModel.get("status");if(!handleModel.get("show")||!status||status==="hide"){handle&&zr.remove(handle);this._handle=null;return}var isInit;if(!this._handle){isInit=true;handle=this._handle=createIcon(handleModel.get("icon"),{cursor:"move",draggable:true,onmousemove:function(e){stop(e.event)},onmousedown:bind$2(this._onHandleDragMove,this,0,0),drift:bind$2(this._onHandleDragMove,this),ondragend:bind$2(this._onHandleDragEnd,this)});zr.add(handle)}updateMandatoryProps(handle,axisPointerModel,false);var includeStyles=["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];handle.setStyle(handleModel.getItemStyle(null,includeStyles));var handleSize=handleModel.get("size");if(!isArray(handleSize)){handleSize=[handleSize,handleSize]}handle.attr("scale",[handleSize[0]/2,handleSize[1]/2]);createOrUpdate(this,"_doDispatchAxisPointer",handleModel.get("throttle")||0,"fixRate");
this._moveHandleToValue(value,isInit)},_moveHandleToValue:function(value,isInit){updateProps$1(this._axisPointerModel,!isInit&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(value,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(dx,dy){var handle=this._handle;if(!handle){return}this._dragging=true;var trans=this.updateHandleTransform(getHandleTransProps(handle),[dx,dy],this._axisModel,this._axisPointerModel);this._payloadInfo=trans;handle.stopAnimation();handle.attr(getHandleTransProps(trans));inner$11(handle).lastProp=null;this._doDispatchAxisPointer()},_doDispatchAxisPointer:function(){var handle=this._handle;if(!handle){return}var payloadInfo=this._payloadInfo;var axisModel=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:payloadInfo.cursorPoint[0],y:payloadInfo.cursorPoint[1],tooltipOption:payloadInfo.tooltipOption,axesInfo:[{axisDim:axisModel.axis.dim,axisIndex:axisModel.componentIndex}]})},_onHandleDragEnd:function(moveAnimation){this._dragging=false;var handle=this._handle;if(!handle){return}var value=this._axisPointerModel.get("value");this._moveHandleToValue(value);this._api.dispatchAction({type:"hideTip"})},getHandleTransform:null,updateHandleTransform:null,clear:function(api){this._lastValue=null;this._lastStatus=null;var zr=api.getZr();var group=this._group;var handle=this._handle;if(zr&&group){this._lastGraphicKey=null;group&&zr.remove(group);handle&&zr.remove(handle);this._group=null;this._handle=null;this._payloadInfo=null}},doClear:function(){},buildLabel:function(xy,wh,xDimIndex){xDimIndex=xDimIndex||0;return{x:xy[xDimIndex],y:xy[1-xDimIndex],width:wh[xDimIndex],height:wh[1-xDimIndex]}}};BaseAxisPointer.prototype.constructor=BaseAxisPointer;function updateProps$1(animationModel,moveAnimation,el,props){if(!propsEqual(inner$11(el).lastProp,props)){inner$11(el).lastProp=props;moveAnimation?updateProps(el,props,animationModel):(el.stopAnimation(),el.attr(props))}}function propsEqual(lastProps,newProps){if(isObject$1(lastProps)&&isObject$1(newProps)){var equals=true;
each$1(newProps,function(item,key){equals=equals&&propsEqual(lastProps[key],item)});return !!equals}else{return lastProps===newProps}}function updateLabelShowHide(labelEl,axisPointerModel){labelEl[axisPointerModel.get("label.show")?"show":"hide"]()}function getHandleTransProps(trans){return{position:trans.position.slice(),rotation:trans.rotation||0}}function updateMandatoryProps(group,axisPointerModel,silent){var z=axisPointerModel.get("z");var zlevel=axisPointerModel.get("zlevel");group&&group.traverse(function(el){if(el.type!=="group"){z!=null&&(el.z=z);zlevel!=null&&(el.zlevel=zlevel);el.silent=silent}})}enableClassExtend(BaseAxisPointer);function buildElStyle(axisPointerModel){var axisPointerType=axisPointerModel.get("type");var styleModel=axisPointerModel.getModel(axisPointerType+"Style");var style;if(axisPointerType==="line"){style=styleModel.getLineStyle();style.fill=null}else{if(axisPointerType==="shadow"){style=styleModel.getAreaStyle();style.stroke=null}}return style}function buildLabelElOption(elOption,axisModel,axisPointerModel,api,labelPos){var value=axisPointerModel.get("value");var text=getValueLabel(value,axisModel.axis,axisModel.ecModel,axisPointerModel.get("seriesDataIndices"),{precision:axisPointerModel.get("label.precision"),formatter:axisPointerModel.get("label.formatter")});var labelModel=axisPointerModel.getModel("label");var paddings=normalizeCssArray$1(labelModel.get("padding")||0);var font=labelModel.getFont();var textRect=getBoundingRect(text,font);var position=labelPos.position;var width=textRect.width+paddings[1]+paddings[3];var height=textRect.height+paddings[0]+paddings[2];var align=labelPos.align;align==="right"&&(position[0]-=width);align==="center"&&(position[0]-=width/2);var verticalAlign=labelPos.verticalAlign;verticalAlign==="bottom"&&(position[1]-=height);verticalAlign==="middle"&&(position[1]-=height/2);confineInContainer(position,width,height,api);var bgColor=labelModel.get("backgroundColor");if(!bgColor||bgColor==="auto"){bgColor=axisModel.get("axisLine.lineStyle.color")
}elOption.label={shape:{x:0,y:0,width:width,height:height,r:labelModel.get("borderRadius")},position:position.slice(),style:{text:text,textFont:font,textFill:labelModel.getTextColor(),textPosition:"inside",fill:bgColor,stroke:labelModel.get("borderColor")||"transparent",lineWidth:labelModel.get("borderWidth")||0,shadowBlur:labelModel.get("shadowBlur"),shadowColor:labelModel.get("shadowColor"),shadowOffsetX:labelModel.get("shadowOffsetX"),shadowOffsetY:labelModel.get("shadowOffsetY")},z2:10}}function confineInContainer(position,width,height,api){var viewWidth=api.getWidth();var viewHeight=api.getHeight();position[0]=Math.min(position[0]+width,viewWidth)-width;position[1]=Math.min(position[1]+height,viewHeight)-height;position[0]=Math.max(position[0],0);position[1]=Math.max(position[1],0)}function getValueLabel(value,axis,ecModel,seriesDataIndices,opt){value=axis.scale.parse(value);var text=axis.scale.getLabel(value,{precision:opt.precision});var formatter=opt.formatter;if(formatter){var params={value:getAxisRawValue(axis,value),seriesData:[]};each$1(seriesDataIndices,function(idxItem){var series=ecModel.getSeriesByIndex(idxItem.seriesIndex);var dataIndex=idxItem.dataIndexInside;var dataParams=series&&series.getDataParams(dataIndex);dataParams&&params.seriesData.push(dataParams)});if(isString(formatter)){text=formatter.replace("{value}",text)}else{if(isFunction$1(formatter)){text=formatter(params)}}}return text}function getTransformedPosition(axis,value,layoutInfo){var transform=create$1();rotate(transform,transform,layoutInfo.rotation);translate(transform,transform,layoutInfo.position);return applyTransform$1([axis.dataToCoord(value),(layoutInfo.labelOffset||0)+(layoutInfo.labelDirection||1)*(layoutInfo.labelMargin||0)],transform)}function buildCartesianSingleLabelElOption(value,elOption,layoutInfo,axisModel,axisPointerModel,api){var textLayout=AxisBuilder.innerTextLayout(layoutInfo.rotation,0,layoutInfo.labelDirection);layoutInfo.labelMargin=axisPointerModel.get("label.margin");
buildLabelElOption(elOption,axisModel,axisPointerModel,api,{position:getTransformedPosition(axisModel.axis,value,layoutInfo),align:textLayout.textAlign,verticalAlign:textLayout.textVerticalAlign})}function makeLineShape(p1,p2,xDimIndex){xDimIndex=xDimIndex||0;return{x1:p1[xDimIndex],y1:p1[1-xDimIndex],x2:p2[xDimIndex],y2:p2[1-xDimIndex]}}function makeRectShape(xy,wh,xDimIndex){xDimIndex=xDimIndex||0;return{x:xy[xDimIndex],y:xy[1-xDimIndex],width:wh[xDimIndex],height:wh[1-xDimIndex]}}function makeSectorShape(cx,cy,r0,r,startAngle,endAngle){return{cx:cx,cy:cy,r0:r0,r:r,startAngle:startAngle,endAngle:endAngle,clockwise:true}}var CartesianAxisPointer=BaseAxisPointer.extend({makeElOption:function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis;var grid=axis.grid;var axisPointerType=axisPointerModel.get("type");var otherExtent=getCartesian(grid,axis).getOtherAxis(axis).getGlobalExtent();var pixelValue=axis.toGlobalCoord(axis.dataToCoord(value,true));if(axisPointerType&&axisPointerType!=="none"){var elStyle=buildElStyle(axisPointerModel);var pointerOption=pointerShapeBuilder[axisPointerType](axis,pixelValue,otherExtent,elStyle);pointerOption.style=elStyle;elOption.graphicKey=pointerOption.type;elOption.pointer=pointerOption}var layoutInfo=layout$1(grid.model,axisModel);buildCartesianSingleLabelElOption(value,elOption,layoutInfo,axisModel,axisPointerModel,api)},getHandleTransform:function(value,axisModel,axisPointerModel){var layoutInfo=layout$1(axisModel.axis.grid.model,axisModel,{labelInside:false});layoutInfo.labelMargin=axisPointerModel.get("handle.margin");return{position:getTransformedPosition(axisModel.axis,value,layoutInfo),rotation:layoutInfo.rotation+(layoutInfo.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(transform,delta,axisModel,axisPointerModel){var axis=axisModel.axis;var grid=axis.grid;var axisExtent=axis.getGlobalExtent(true);var otherExtent=getCartesian(grid,axis).getOtherAxis(axis).getGlobalExtent();var dimIndex=axis.dim==="x"?0:1;
var currPosition=transform.position;currPosition[dimIndex]+=delta[dimIndex];currPosition[dimIndex]=Math.min(axisExtent[1],currPosition[dimIndex]);currPosition[dimIndex]=Math.max(axisExtent[0],currPosition[dimIndex]);var cursorOtherValue=(otherExtent[1]+otherExtent[0])/2;var cursorPoint=[cursorOtherValue,cursorOtherValue];cursorPoint[dimIndex]=currPosition[dimIndex];var tooltipOptions=[{verticalAlign:"middle"},{align:"center"}];return{position:currPosition,rotation:transform.rotation,cursorPoint:cursorPoint,tooltipOption:tooltipOptions[dimIndex]}}});function getCartesian(grid,axis){var opt={};opt[axis.dim+"AxisIndex"]=axis.index;return grid.getCartesian(opt)}var pointerShapeBuilder={line:function(axis,pixelValue,otherExtent,elStyle){var targetShape=makeLineShape([pixelValue,otherExtent[0]],[pixelValue,otherExtent[1]],getAxisDimIndex(axis));subPixelOptimizeLine({shape:targetShape,style:elStyle});return{type:"Line",shape:targetShape}},shadow:function(axis,pixelValue,otherExtent,elStyle){var bandWidth=Math.max(1,axis.getBandWidth());var span=otherExtent[1]-otherExtent[0];return{type:"Rect",shape:makeRectShape([pixelValue-bandWidth/2,otherExtent[0]],[bandWidth,span],getAxisDimIndex(axis))}}};function getAxisDimIndex(axis){return axis.dim==="x"?0:1}AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer);registerPreprocessor(function(option){if(option){(!option.axisPointer||option.axisPointer.length===0)&&(option.axisPointer={});var link=option.axisPointer.link;if(link&&!isArray(link)){option.axisPointer.link=[link]}}});registerProcessor(PRIORITY.PROCESSOR.STATISTIC,function(ecModel,api){ecModel.getComponent("axisPointer").coordSysAxesInfo=collect(ecModel,api)});registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger);var XY=["x","y"];var WH=["width","height"];var SingleAxisPointer=BaseAxisPointer.extend({makeElOption:function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis;var coordSys=axis.coordinateSystem;
var otherExtent=getGlobalExtent(coordSys,1-getPointDimIndex(axis));var pixelValue=coordSys.dataToPoint(value)[0];var axisPointerType=axisPointerModel.get("type");if(axisPointerType&&axisPointerType!=="none"){var elStyle=buildElStyle(axisPointerModel);var pointerOption=pointerShapeBuilder$1[axisPointerType](axis,pixelValue,otherExtent,elStyle);pointerOption.style=elStyle;elOption.graphicKey=pointerOption.type;elOption.pointer=pointerOption}var layoutInfo=layout$2(axisModel);buildCartesianSingleLabelElOption(value,elOption,layoutInfo,axisModel,axisPointerModel,api)},getHandleTransform:function(value,axisModel,axisPointerModel){var layoutInfo=layout$2(axisModel,{labelInside:false});layoutInfo.labelMargin=axisPointerModel.get("handle.margin");return{position:getTransformedPosition(axisModel.axis,value,layoutInfo),rotation:layoutInfo.rotation+(layoutInfo.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(transform,delta,axisModel,axisPointerModel){var axis=axisModel.axis;var coordSys=axis.coordinateSystem;var dimIndex=getPointDimIndex(axis);var axisExtent=getGlobalExtent(coordSys,dimIndex);var currPosition=transform.position;currPosition[dimIndex]+=delta[dimIndex];currPosition[dimIndex]=Math.min(axisExtent[1],currPosition[dimIndex]);currPosition[dimIndex]=Math.max(axisExtent[0],currPosition[dimIndex]);var otherExtent=getGlobalExtent(coordSys,1-dimIndex);var cursorOtherValue=(otherExtent[1]+otherExtent[0])/2;var cursorPoint=[cursorOtherValue,cursorOtherValue];cursorPoint[dimIndex]=currPosition[dimIndex];return{position:currPosition,rotation:transform.rotation,cursorPoint:cursorPoint,tooltipOption:{verticalAlign:"middle"}}}});var pointerShapeBuilder$1={line:function(axis,pixelValue,otherExtent,elStyle){var targetShape=makeLineShape([pixelValue,otherExtent[0]],[pixelValue,otherExtent[1]],getPointDimIndex(axis));subPixelOptimizeLine({shape:targetShape,style:elStyle});return{type:"Line",shape:targetShape}},shadow:function(axis,pixelValue,otherExtent,elStyle){var bandWidth=axis.getBandWidth();
var span=otherExtent[1]-otherExtent[0];return{type:"Rect",shape:makeRectShape([pixelValue-bandWidth/2,otherExtent[0]],[bandWidth,span],getPointDimIndex(axis))}}};function getPointDimIndex(axis){return axis.isHorizontal()?0:1}function getGlobalExtent(coordSys,dimIndex){var rect=coordSys.getRect();return[rect[XY[dimIndex]],rect[XY[dimIndex]]+rect[WH[dimIndex]]]}AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer);extendComponentView({type:"single"});var DATA_NAME_INDEX=2;var ThemeRiverSeries=SeriesModel.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(option){ThemeRiverSeries.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()}},fixData:function(data){var rawDataLength=data.length;var dataByName=nest().key(function(dataItem){return dataItem[2]}).entries(data);var layData=map(dataByName,function(d){return{name:d.key,dataList:d.values}});var layerNum=layData.length;var largestLayer=-1;var index=-1;for(var i=0;i<layerNum;++i){var len=layData[i].dataList.length;if(len>largestLayer){largestLayer=len;index=i}}for(var k=0;k<layerNum;++k){if(k===index){continue}var name=layData[k].name;for(var j=0;j<largestLayer;++j){var timeValue=layData[index].dataList[j][0];var length=layData[k].dataList.length;var keyIndex=-1;for(var l=0;l<length;++l){var value=layData[k].dataList[l][0];if(value===timeValue){keyIndex=l;break}}if(keyIndex===-1){data[rawDataLength]=[];data[rawDataLength][0]=timeValue;data[rawDataLength][1]=0;data[rawDataLength][2]=name;rawDataLength++}}}return data},getInitialData:function(option,ecModel){var singleAxisModel=ecModel.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0];var axisType=singleAxisModel.get("type");var filterData=filter(option.data,function(dataItem){return dataItem[2]!==undefined});var data=this.fixData(filterData||[]);var nameList=[];var nameMap=this.nameMap=createHashMap();var count=0;for(var i=0;
i<data.length;++i){nameList.push(data[i][DATA_NAME_INDEX]);if(!nameMap.get(data[i][DATA_NAME_INDEX])){nameMap.set(data[i][DATA_NAME_INDEX],count);count++}}var dimensionsInfo=createDimensions(data,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(axisType)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}});var list=new List(dimensionsInfo,this);list.initData(data);return list},getLayerSeries:function(){var data=this.getData();var lenCount=data.count();var indexArr=[];for(var i=0;i<lenCount;++i){indexArr[i]=i}var dataByName=nest().key(function(index){return data.get("name",index)}).entries(indexArr);var layerSeries=map(dataByName,function(d){return{name:d.key,indices:d.values}});var timeDim=data.mapDimension("single");for(var j=0;j<layerSeries.length;++j){layerSeries[j].indices.sort(comparer)}function comparer(index1,index2){return data.get(timeDim,index1)-data.get(timeDim,index2)}return layerSeries},getAxisTooltipData:function(dim,value,baseAxis){if(!isArray(dim)){dim=dim?[dim]:[]}var data=this.getData();var layerSeries=this.getLayerSeries();var indices=[];var layerNum=layerSeries.length;var nestestValue;for(var i=0;i<layerNum;++i){var minDist=Number.MAX_VALUE;var nearestIdx=-1;var pointNum=layerSeries[i].indices.length;for(var j=0;j<pointNum;++j){var theValue=data.get(dim[0],layerSeries[i].indices[j]);var dist=Math.abs(theValue-value);if(dist<=minDist){nestestValue=theValue;minDist=dist;nearestIdx=layerSeries[i].indices[j]}}indices.push(nearestIdx)}return{dataIndices:indices,nestestValue:nestestValue}},formatTooltip:function(dataIndex){var data=this.getData();var htmlName=data.getName(dataIndex);var htmlValue=data.get(data.mapDimension("value"),dataIndex);if(isNaN(htmlValue)||htmlValue==null){htmlValue="-"}return encodeHTML(htmlName+" : "+htmlValue)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:true,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:true}}}});
extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var group=this.group;var layerSeries=seriesModel.getLayerSeries();var layoutInfo=data.getLayout("layoutInfo");var rect=layoutInfo.rect;var boundaryGap=layoutInfo.boundaryGap;group.attr("position",[0,rect.y+boundaryGap[0]]);function keyGetter(item){return item.name}var dataDiffer=new DataDiffer(this._layersSeries||[],layerSeries,keyGetter,keyGetter);var newLayersGroups={};dataDiffer.add(bind(process,this,"add")).update(bind(process,this,"update")).remove(bind(process,this,"remove")).execute();function process(status,idx,oldIdx){var oldLayersGroups=this._layers;if(status==="remove"){group.remove(oldLayersGroups[idx]);return}var points0=[];var points1=[];var color;var indices=layerSeries[idx].indices;for(var j=0;j<indices.length;j++){var layout=data.getItemLayout(indices[j]);var x=layout.x;var y0=layout.y0;var y=layout.y;points0.push([x,y0]);points1.push([x,y0+y]);color=data.getItemVisual(indices[j],"color")}var polygon;var text;var textLayout=data.getItemLayout(indices[0]);var itemModel=data.getItemModel(indices[j-1]);var labelModel=itemModel.getModel("label");var margin=labelModel.get("margin");if(status==="add"){var layerGroup=newLayersGroups[idx]=new Group();polygon=new Polygon$1({shape:{points:points0,stackedOnPoints:points1,smooth:0.4,stackedOnSmooth:0.4,smoothConstraint:false},z2:0});text=new Text({style:{x:textLayout.x-margin,y:textLayout.y0+textLayout.y/2}});layerGroup.add(polygon);layerGroup.add(text);group.add(layerGroup);polygon.setClipPath(createGridClipShape$3(polygon.getBoundingRect(),seriesModel,function(){polygon.removeClipPath()}))}else{var layerGroup=oldLayersGroups[oldIdx];polygon=layerGroup.childAt(0);text=layerGroup.childAt(1);group.add(layerGroup);newLayersGroups[idx]=layerGroup;updateProps(polygon,{shape:{points:points0,stackedOnPoints:points1}},seriesModel);updateProps(text,{style:{x:textLayout.x-margin,y:textLayout.y0+textLayout.y/2}},seriesModel)
}var hoverItemStyleModel=itemModel.getModel("emphasis.itemStyle");var itemStyleModel=itemModel.getModel("itemStyle");setTextStyle(text.style,labelModel,{text:labelModel.get("show")?seriesModel.getFormattedLabel(indices[j-1],"normal")||data.getName(indices[j-1]):null,textVerticalAlign:"middle"});polygon.setStyle(extend({fill:color},itemStyleModel.getItemStyle(["color"])));setHoverStyle(polygon,hoverItemStyleModel.getItemStyle())}this._layersSeries=layerSeries;this._layers=newLayersGroups},dispose:function(){}});function createGridClipShape$3(rect,seriesModel,cb){var rectEl=new Rect({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});initProps(rectEl,{shape:{width:rect.width+20,height:rect.height+20}},seriesModel,cb);return rectEl}var themeRiverLayout=function(ecModel,api){ecModel.eachSeriesByType("themeRiver",function(seriesModel){var data=seriesModel.getData();var single=seriesModel.coordinateSystem;var layoutInfo={};var rect=single.getRect();layoutInfo.rect=rect;var boundaryGap=seriesModel.get("boundaryGap");var axis=single.getAxis();layoutInfo.boundaryGap=boundaryGap;if(axis.orient==="horizontal"){boundaryGap[0]=parsePercent$1(boundaryGap[0],rect.height);boundaryGap[1]=parsePercent$1(boundaryGap[1],rect.height);var height=rect.height-boundaryGap[0]-boundaryGap[1];themeRiverLayout$1(data,seriesModel,height)}else{boundaryGap[0]=parsePercent$1(boundaryGap[0],rect.width);boundaryGap[1]=parsePercent$1(boundaryGap[1],rect.width);var width=rect.width-boundaryGap[0]-boundaryGap[1];themeRiverLayout$1(data,seriesModel,width)}data.setLayout("layoutInfo",layoutInfo)})};function themeRiverLayout$1(data,seriesModel,height){if(!data.count()){return}var coordSys=seriesModel.coordinateSystem;var layerSeries=seriesModel.getLayerSeries();var timeDim=data.mapDimension("single");var valueDim=data.mapDimension("value");var layerPoints=map(layerSeries,function(singleLayer){return map(singleLayer.indices,function(idx){var pt=coordSys.dataToPoint(data.get(timeDim,idx));pt[1]=data.get(valueDim,idx);
return pt})});var base=computeBaseline(layerPoints);var baseLine=base.y0;var ky=height/base.max;var n=layerSeries.length;var m=layerSeries[0].indices.length;var baseY0;for(var j=0;j<m;++j){baseY0=baseLine[j]*ky;data.setItemLayout(layerSeries[0].indices[j],{layerIndex:0,x:layerPoints[0][j][0],y0:baseY0,y:layerPoints[0][j][1]*ky});for(var i=1;i<n;++i){baseY0+=layerPoints[i-1][j][1]*ky;data.setItemLayout(layerSeries[i].indices[j],{layerIndex:i,x:layerPoints[i][j][0],y0:baseY0,y:layerPoints[i][j][1]*ky})}}}function computeBaseline(data){var layerNum=data.length;var pointNum=data[0].length;var sums=[];var y0=[];var max=0;var temp;var base={};for(var i=0;i<pointNum;++i){for(var j=0,temp=0;j<layerNum;++j){temp+=data[j][i][1]}if(temp>max){max=temp}sums.push(temp)}for(var k=0;k<pointNum;++k){y0[k]=(max-sums[k])/2}max=0;for(var l=0;l<pointNum;++l){var sum=sums[l]+y0[l];if(sum>max){max=sum}}base.y0=y0;base.max=max;return base}var themeRiverVisual=function(ecModel){ecModel.eachSeriesByType("themeRiver",function(seriesModel){var data=seriesModel.getData();var rawData=seriesModel.getRawData();var colorList=seriesModel.get("color");var idxMap=createHashMap();data.each(function(idx){idxMap.set(data.getRawIndex(idx),idx)});rawData.each(function(rawIndex){var name=rawData.getName(rawIndex);var color=colorList[(seriesModel.nameMap.get(name)-1)%colorList.length];rawData.setItemVisual(rawIndex,"color",color);var idx=idxMap.get(rawIndex);if(idx!=null){data.setItemVisual(idx,"color",color)}})})};registerLayout(themeRiverLayout);registerVisual(themeRiverVisual);registerProcessor(dataFilter("themeRiver"));SeriesModel.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(option,ecModel){var root={name:option.name,children:option.data};completeTreeValue$1(root);var levels=option.levels||[];var treeOption={};treeOption.levels=levels;return Tree.createTree(root,this,treeOption).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(dataIndex){var params=SeriesModel.prototype.getDataParams.apply(this,arguments);
var node=this.getData().tree.getNodeByDataIndex(dataIndex);params.treePathInfo=wrapTreePathInfo(node,this);return params},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:true,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:true,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:false,label:{rotate:"radial",show:true,opacity:1,align:"center",position:"inside",distance:5,silent:true,emphasis:{}},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:0.9}},animationType:"expansion",animationDuration:1000,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(viewRoot){viewRoot?(this._viewRoot=viewRoot):(viewRoot=this._viewRoot);var root=this.getRawData().tree.root;if(!viewRoot||(viewRoot!==root&&!root.contains(viewRoot))){this._viewRoot=root}}});function completeTreeValue$1(dataNode){var sum=0;each$1(dataNode.children,function(child){completeTreeValue$1(child);var childValue=child.value;isArray(childValue)&&(childValue=childValue[0]);sum+=childValue});var thisValue=dataNode.value;if(isArray(thisValue)){thisValue=thisValue[0]}if(thisValue==null||isNaN(thisValue)){thisValue=sum}if(thisValue<0){thisValue=0}isArray(dataNode.value)?(dataNode.value[0]=thisValue):(dataNode.value=thisValue)}var NodeHighlightPolicy={NONE:"none",DESCENDANT:"descendant",ANCESTOR:"ancestor",SELF:"self"};var DEFAULT_SECTOR_Z=2;var DEFAULT_TEXT_Z=4;function SunburstPiece(node,seriesModel,ecModel){Group.call(this);var sector=new Sector({z2:DEFAULT_SECTOR_Z});sector.seriesIndex=seriesModel.seriesIndex;var text=new Text({z2:DEFAULT_TEXT_Z,silent:node.getModel("label").get("silent")});this.add(sector);this.add(text);this.updateData(true,node,"normal",seriesModel,ecModel);function onEmphasis(){text.ignore=text.hoverIgnore
}function onNormal(){text.ignore=text.normalIgnore}this.on("emphasis",onEmphasis).on("normal",onNormal).on("mouseover",onEmphasis).on("mouseout",onNormal)}var SunburstPieceProto=SunburstPiece.prototype;SunburstPieceProto.updateData=function(firstCreate,node,state,seriesModel,ecModel){this.node=node;node.piece=this;seriesModel=seriesModel||this._seriesModel;ecModel=ecModel||this._ecModel;var sector=this.childAt(0);sector.dataIndex=node.dataIndex;var itemModel=node.getModel();var layout=node.getLayout();var sectorShape=extend({},layout);sectorShape.label=null;var visualColor=getNodeColor(node,seriesModel,ecModel);fillDefaultColor(node,seriesModel,visualColor);var normalStyle=itemModel.getModel("itemStyle").getItemStyle();var style;if(state==="normal"){style=normalStyle}else{var stateStyle=itemModel.getModel(state+".itemStyle").getItemStyle();style=merge(stateStyle,normalStyle)}style=defaults({lineJoin:"bevel",fill:style.fill||visualColor},style);if(firstCreate){sector.setShape(sectorShape);sector.shape.r=layout.r0;updateProps(sector,{shape:{r:layout.r}},seriesModel,node.dataIndex);sector.useStyle(style)}else{if(typeof style.fill==="object"&&style.fill.type||typeof sector.style.fill==="object"&&sector.style.fill.type){updateProps(sector,{shape:sectorShape},seriesModel);sector.useStyle(style)}else{updateProps(sector,{shape:sectorShape,style:style},seriesModel)}}this._updateLabel(seriesModel,visualColor,state);var cursorStyle=itemModel.getShallow("cursor");cursorStyle&&sector.attr("cursor",cursorStyle);if(firstCreate){var highlightPolicy=seriesModel.getShallow("highlightPolicy");this._initEvents(sector,node,seriesModel,highlightPolicy)}this._seriesModel=seriesModel||this._seriesModel;this._ecModel=ecModel||this._ecModel};SunburstPieceProto.onEmphasis=function(highlightPolicy){var that=this;this.node.hostTree.root.eachNode(function(n){if(n.piece){if(that.node===n){n.piece.updateData(false,n,"emphasis")}else{if(isNodeHighlighted(n,that.node,highlightPolicy)){n.piece.childAt(0).trigger("highlight")
}else{if(highlightPolicy!==NodeHighlightPolicy.NONE){n.piece.childAt(0).trigger("downplay")}}}}})};SunburstPieceProto.onNormal=function(){this.node.hostTree.root.eachNode(function(n){if(n.piece){n.piece.updateData(false,n,"normal")}})};SunburstPieceProto.onHighlight=function(){this.updateData(false,this.node,"highlight")};SunburstPieceProto.onDownplay=function(){this.updateData(false,this.node,"downplay")};SunburstPieceProto._updateLabel=function(seriesModel,visualColor,state){var itemModel=this.node.getModel();var normalModel=itemModel.getModel("label");var labelModel=state==="normal"||state==="emphasis"?normalModel:itemModel.getModel(state+".label");var labelHoverModel=itemModel.getModel("emphasis.label");var text=retrieve(seriesModel.getFormattedLabel(this.node.dataIndex,"normal",null,null,"label"),this.node.name);if(getLabelAttr("show")===false){text=""}var layout=this.node.getLayout();var labelMinAngle=labelModel.get("minAngle");if(labelMinAngle==null){labelMinAngle=normalModel.get("minAngle")}labelMinAngle=labelMinAngle/180*Math.PI;var angle=layout.endAngle-layout.startAngle;if(labelMinAngle!=null&&Math.abs(angle)<labelMinAngle){text=""}var label=this.childAt(1);setLabelStyle(label.style,label.hoverStyle||{},normalModel,labelHoverModel,{defaultText:labelModel.getShallow("show")?text:null,autoColor:visualColor,useInsideStyle:true});var midAngle=(layout.startAngle+layout.endAngle)/2;var dx=Math.cos(midAngle);var dy=Math.sin(midAngle);var r;var labelPosition=getLabelAttr("position");var labelPadding=getLabelAttr("distance")||0;var textAlign=getLabelAttr("align");if(labelPosition==="outside"){r=layout.r+labelPadding;textAlign=midAngle>Math.PI/2?"right":"left"}else{if(!textAlign||textAlign==="center"){r=(layout.r+layout.r0)/2;textAlign="center"}else{if(textAlign==="left"){r=layout.r0+labelPadding;if(midAngle>Math.PI/2){textAlign="right"}}else{if(textAlign==="right"){r=layout.r-labelPadding;if(midAngle>Math.PI/2){textAlign="left"}}}}}label.attr("style",{text:text,textAlign:textAlign,textVerticalAlign:getLabelAttr("verticalAlign")||"middle",opacity:getLabelAttr("opacity")});
var textX=r*dx+layout.cx;var textY=r*dy+layout.cy;label.attr("position",[textX,textY]);var rotateType=getLabelAttr("rotate");var rotate=0;if(rotateType==="radial"){rotate=-midAngle;if(rotate<-Math.PI/2){rotate+=Math.PI}}else{if(rotateType==="tangential"){rotate=Math.PI/2-midAngle;if(rotate>Math.PI/2){rotate-=Math.PI}else{if(rotate<-Math.PI/2){rotate+=Math.PI}}}else{if(typeof rotateType==="number"){rotate=rotateType*Math.PI/180}}}label.attr("rotation",rotate);function getLabelAttr(name){var stateAttr=labelModel.get(name);if(stateAttr==null){return normalModel.get(name)}else{return stateAttr}}};SunburstPieceProto._initEvents=function(sector,node,seriesModel,highlightPolicy){sector.off("mouseover").off("mouseout").off("emphasis").off("normal");var that=this;var onEmphasis=function(){that.onEmphasis(highlightPolicy)};var onNormal=function(){that.onNormal()};var onDownplay=function(){that.onDownplay()};var onHighlight=function(){that.onHighlight()};if(seriesModel.isAnimationEnabled()){sector.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal).on("downplay",onDownplay).on("highlight",onHighlight)}};inherits(SunburstPiece,Group);function getNodeColor(node,seriesModel,ecModel){var visualColor=node.getVisual("color");var visualMetaList=node.getVisual("visualMeta");if(!visualMetaList||visualMetaList.length===0){visualColor=null}var color=node.getModel("itemStyle").get("color");if(color){return color}else{if(visualColor){return visualColor}else{if(node.depth===0){return ecModel.option.color[0]}else{var length=ecModel.option.color.length;color=ecModel.option.color[getRootId(node)%length]}}}return color}function getRootId(node){var ancestor=node;while(ancestor.depth>1){ancestor=ancestor.parentNode}var virtualRoot=node.getAncestors()[0];return indexOf(virtualRoot.children,ancestor)}function isNodeHighlighted(node,activeNode,policy){if(policy===NodeHighlightPolicy.NONE){return false}else{if(policy===NodeHighlightPolicy.SELF){return node===activeNode
}else{if(policy===NodeHighlightPolicy.ANCESTOR){return node===activeNode||node.isAncestorOf(activeNode)}else{return node===activeNode||node.isDescendantOf(activeNode)}}}}function fillDefaultColor(node,seriesModel,color){var data=seriesModel.getData();data.setItemVisual(node.dataIndex,"color",color)}var ROOT_TO_NODE_ACTION="sunburstRootToNode";var SunburstView=Chart.extend({type:"sunburst",init:function(){},render:function(seriesModel,ecModel,api,payload){var that=this;this.seriesModel=seriesModel;this.api=api;this.ecModel=ecModel;var data=seriesModel.getData();var virtualRoot=data.tree.root;var newRoot=seriesModel.getViewRoot();var group=this.group;var renderLabelForZeroData=seriesModel.get("renderLabelForZeroData");var newChildren=[];newRoot.eachNode(function(node){newChildren.push(node)});var oldChildren=this._oldChildren||[];dualTravel(newChildren,oldChildren);renderRollUp(virtualRoot,newRoot);if(payload&&payload.highlight&&payload.highlight.piece){var highlightPolicy=seriesModel.getShallow("highlightPolicy");payload.highlight.piece.onEmphasis(highlightPolicy)}else{if(payload&&payload.unhighlight){var piece=this.virtualPiece;if(!piece&&virtualRoot.children.length){piece=virtualRoot.children[0].piece}if(piece){piece.onNormal()}}}this._initEvents();this._oldChildren=newChildren;function dualTravel(newChildren,oldChildren){if(newChildren.length===0&&oldChildren.length===0){return}new DataDiffer(oldChildren,newChildren,getKey,getKey).add(processNode).update(processNode).remove(curry(processNode,null)).execute();function getKey(node){return node.getId()}function processNode(newId,oldId){var newNode=newId==null?null:newChildren[newId];var oldNode=oldId==null?null:oldChildren[oldId];doRenderNode(newNode,oldNode)}}function doRenderNode(newNode,oldNode){if(!renderLabelForZeroData&&newNode&&!newNode.getValue()){newNode=null}if(newNode!==virtualRoot&&oldNode!==virtualRoot){if(oldNode&&oldNode.piece){if(newNode){oldNode.piece.updateData(false,newNode,"normal",seriesModel,ecModel);
data.setItemGraphicEl(newNode.dataIndex,oldNode.piece)}else{removeNode(oldNode)}}else{if(newNode){var piece=new SunburstPiece(newNode,seriesModel,ecModel);group.add(piece);data.setItemGraphicEl(newNode.dataIndex,piece)}}}}function removeNode(node){if(!node){return}if(node.piece){group.remove(node.piece);node.piece=null}}function renderRollUp(virtualRoot,viewRoot){if(viewRoot.depth>0){if(that.virtualPiece){that.virtualPiece.updateData(false,virtualRoot,"normal",seriesModel,ecModel)}else{that.virtualPiece=new SunburstPiece(virtualRoot,seriesModel,ecModel);group.add(that.virtualPiece)}if(viewRoot.piece._onclickEvent){viewRoot.piece.off("click",viewRoot.piece._onclickEvent)}var event=function(e){that._rootToNode(viewRoot.parentNode)};viewRoot.piece._onclickEvent=event;that.virtualPiece.on("click",event)}else{if(that.virtualPiece){group.remove(that.virtualPiece);that.virtualPiece=null}}}},dispose:function(){},_initEvents:function(){var that=this;var event=function(e){var targetFound=false;var viewRoot=that.seriesModel.getViewRoot();viewRoot.eachNode(function(node){if(!targetFound&&node.piece&&node.piece.childAt(0)===e.target){var nodeClick=node.getModel().get("nodeClick");if(nodeClick==="rootToNode"){that._rootToNode(node)}else{if(nodeClick==="link"){var itemModel=node.getModel();var link=itemModel.get("link");if(link){var linkTarget=itemModel.get("target",true)||"_blank";window.open(link,linkTarget)}}}targetFound=true}})};if(this.group._onclickEvent){this.group.off("click",this.group._onclickEvent)}this.group.on("click",event);this.group._onclickEvent=event},_rootToNode:function(node){if(node!==this.seriesModel.getViewRoot()){this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:node})}},containPoint:function(point,seriesModel){var treeRoot=seriesModel.getData();var itemLayout=treeRoot.getItemLayout(0);if(itemLayout){var dx=point[0]-itemLayout.cx;var dy=point[1]-itemLayout.cy;var radius=Math.sqrt(dx*dx+dy*dy);return radius<=itemLayout.r&&radius>=itemLayout.r0
}}});var ROOT_TO_NODE_ACTION$1="sunburstRootToNode";registerAction({type:ROOT_TO_NODE_ACTION$1,update:"updateView"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"sunburst",query:payload},handleRootToNode);function handleRootToNode(model,index){var targetInfo=retrieveTargetInfo(payload,[ROOT_TO_NODE_ACTION$1],model);if(targetInfo){var originViewRoot=model.getViewRoot();if(originViewRoot){payload.direction=aboveViewRoot(originViewRoot,targetInfo.node)?"rollUp":"drillDown"}model.resetViewRoot(targetInfo.node)}}});var HIGHLIGHT_ACTION="sunburstHighlight";registerAction({type:HIGHLIGHT_ACTION,update:"updateView"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"sunburst",query:payload},handleHighlight);function handleHighlight(model,index){var targetInfo=retrieveTargetInfo(payload,[HIGHLIGHT_ACTION],model);if(targetInfo){payload.highlight=targetInfo.node}}});var UNHIGHLIGHT_ACTION="sunburstUnhighlight";registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"sunburst",query:payload},handleUnhighlight);function handleUnhighlight(model,index){payload.unhighlight=true}});var RADIAN$1=Math.PI/180;var sunburstLayout=function(seriesType,ecModel,api,payload){ecModel.eachSeriesByType(seriesType,function(seriesModel){var center=seriesModel.get("center");var radius=seriesModel.get("radius");if(!isArray(radius)){radius=[0,radius]}if(!isArray(center)){center=[center,center]}var width=api.getWidth();var height=api.getHeight();var size=Math.min(width,height);var cx=parsePercent$1(center[0],width);var cy=parsePercent$1(center[1],height);var r0=parsePercent$1(radius[0],size/2);var r=parsePercent$1(radius[1],size/2);var startAngle=-seriesModel.get("startAngle")*RADIAN$1;var minAngle=seriesModel.get("minAngle")*RADIAN$1;var virtualRoot=seriesModel.getData().tree.root;var treeRoot=seriesModel.getViewRoot();var rootDepth=treeRoot.depth;var sort=seriesModel.get("sort");
if(sort!=null){initChildren$1(treeRoot,sort)}var validDataCount=0;each$1(treeRoot.children,function(child){!isNaN(child.getValue())&&validDataCount++});var sum=treeRoot.getValue();var unitRadian=Math.PI/(sum||validDataCount)*2;var renderRollupNode=treeRoot.depth>0;var levels=treeRoot.height-(renderRollupNode?-1:1);var rPerLevel=(r-r0)/(levels||1);var clockwise=seriesModel.get("clockwise");var stillShowZeroSum=seriesModel.get("stillShowZeroSum");var dir=clockwise?1:-1;var renderNode=function(node,startAngle){if(!node){return}var endAngle=startAngle;if(node!==virtualRoot){var value=node.getValue();var angle=(sum===0&&stillShowZeroSum)?unitRadian:(value*unitRadian);if(angle<minAngle){angle=minAngle}else{}endAngle=startAngle+dir*angle;var depth=node.depth-rootDepth-(renderRollupNode?-1:1);var rStart=r0+rPerLevel*depth;var rEnd=r0+rPerLevel*(depth+1);var itemModel=node.getModel();if(itemModel.get("r0")!=null){rStart=parsePercent$1(itemModel.get("r0"),size/2)}if(itemModel.get("r")!=null){rEnd=parsePercent$1(itemModel.get("r"),size/2)}node.setLayout({angle:angle,startAngle:startAngle,endAngle:endAngle,clockwise:clockwise,cx:cx,cy:cy,r0:rStart,r:rEnd})}if(node.children&&node.children.length){var siblingAngle=0;each$1(node.children,function(node){siblingAngle+=renderNode(node,startAngle+siblingAngle)})}return endAngle-startAngle};if(renderRollupNode){var rStart=r0;var rEnd=r0+rPerLevel;var angle=Math.PI*2;virtualRoot.setLayout({angle:angle,startAngle:startAngle,endAngle:startAngle+angle,clockwise:clockwise,cx:cx,cy:cy,r0:rStart,r:rEnd})}renderNode(treeRoot,startAngle)})};function initChildren$1(node,isAsc){var children=node.children||[];node.children=sort$2(children,isAsc);if(children.length){each$1(node.children,function(child){initChildren$1(child,isAsc)})}}function sort$2(children,sortOrder){if(typeof sortOrder==="function"){return children.sort(sortOrder)}else{var isAsc=sortOrder==="asc";return children.sort(function(a,b){var diff=(a.getValue()-b.getValue())*(isAsc?1:-1);
return diff===0?(a.dataIndex-b.dataIndex)*(isAsc?-1:1):diff})}}registerVisual(curry(dataColor,"sunburst"));registerLayout(curry(sunburstLayout,"sunburst"));registerProcessor(curry(dataFilter,"sunburst"));function dataToCoordSize(dataSize,dataItem){dataItem=dataItem||[0,0];return map(["x","y"],function(dim,dimIdx){var axis=this.getAxis(dim);var val=dataItem[dimIdx];var halfSize=dataSize[dimIdx]/2;return axis.type==="category"?axis.getBandWidth():Math.abs(axis.dataToCoord(val-halfSize)-axis.dataToCoord(val+halfSize))},this)}var prepareCartesian2d=function(coordSys){var rect=coordSys.grid.getRect();return{coordSys:{type:"cartesian2d",x:rect.x,y:rect.y,width:rect.width,height:rect.height},api:{coord:function(data){return coordSys.dataToPoint(data)},size:bind(dataToCoordSize,coordSys)}}};function dataToCoordSize$1(dataSize,dataItem){dataItem=dataItem||[0,0];return map([0,1],function(dimIdx){var val=dataItem[dimIdx];var halfSize=dataSize[dimIdx]/2;var p1=[];var p2=[];p1[dimIdx]=val-halfSize;p2[dimIdx]=val+halfSize;p1[1-dimIdx]=p2[1-dimIdx]=dataItem[1-dimIdx];return Math.abs(this.dataToPoint(p1)[dimIdx]-this.dataToPoint(p2)[dimIdx])},this)}var prepareGeo=function(coordSys){var rect=coordSys.getBoundingRect();return{coordSys:{type:"geo",x:rect.x,y:rect.y,width:rect.width,height:rect.height,zoom:coordSys.getZoom()},api:{coord:function(data){return coordSys.dataToPoint(data)},size:bind(dataToCoordSize$1,coordSys)}}};function dataToCoordSize$2(dataSize,dataItem){var axis=this.getAxis();var val=dataItem instanceof Array?dataItem[0]:dataItem;var halfSize=(dataSize instanceof Array?dataSize[0]:dataSize)/2;return axis.type==="category"?axis.getBandWidth():Math.abs(axis.dataToCoord(val-halfSize)-axis.dataToCoord(val+halfSize))}var prepareSingleAxis=function(coordSys){var rect=coordSys.getRect();return{coordSys:{type:"singleAxis",x:rect.x,y:rect.y,width:rect.width,height:rect.height},api:{coord:function(val){return coordSys.dataToPoint(val)},size:bind(dataToCoordSize$2,coordSys)}}};function dataToCoordSize$3(dataSize,dataItem){return map(["Radius","Angle"],function(dim,dimIdx){var axis=this["get"+dim+"Axis"]();
var val=dataItem[dimIdx];var halfSize=dataSize[dimIdx]/2;var method="dataTo"+dim;var result=axis.type==="category"?axis.getBandWidth():Math.abs(axis[method](val-halfSize)-axis[method](val+halfSize));if(dim==="Angle"){result=result*Math.PI/180}return result},this)}var preparePolar=function(coordSys){var radiusAxis=coordSys.getRadiusAxis();var angleAxis=coordSys.getAngleAxis();var radius=radiusAxis.getExtent();radius[0]>radius[1]&&radius.reverse();return{coordSys:{type:"polar",cx:coordSys.cx,cy:coordSys.cy,r:radius[1],r0:radius[0]},api:{coord:bind(function(data){var radius=radiusAxis.dataToRadius(data[0]);var angle=angleAxis.dataToAngle(data[1]);var coord=coordSys.coordToPoint([radius,angle]);coord.push(radius,angle*Math.PI/180);return coord}),size:bind(dataToCoordSize$3,coordSys)}}};var prepareCalendar=function(coordSys){var rect=coordSys.getRect();var rangeInfo=coordSys.getRangeInfo();return{coordSys:{type:"calendar",x:rect.x,y:rect.y,width:rect.width,height:rect.height,cellWidth:coordSys.getCellWidth(),cellHeight:coordSys.getCellHeight(),rangeInfo:{start:rangeInfo.start,end:rangeInfo.end,weeks:rangeInfo.weeks,dayCount:rangeInfo.allDay}},api:{coord:function(data,clamp){return coordSys.dataToPoint(data,clamp)}}}};var ITEM_STYLE_NORMAL_PATH=["itemStyle"];var ITEM_STYLE_EMPHASIS_PATH=["emphasis","itemStyle"];var LABEL_NORMAL=["label"];var LABEL_EMPHASIS=["emphasis","label"];var GROUP_DIFF_PREFIX="e\0\0";var prepareCustoms={cartesian2d:prepareCartesian2d,geo:prepareGeo,singleAxis:prepareSingleAxis,polar:preparePolar,calendar:prepareCalendar};SeriesModel.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true,useTransform:true},getInitialData:function(option,ecModel){return createListFromArray(this.getSource(),this)},getDataParams:function(dataIndex,dataType,el){var params=SeriesModel.prototype.getDataParams.apply(this,arguments);el&&(params.info=el.info);return params
}});Chart.extend({type:"custom",_data:null,render:function(customSeries,ecModel,api,payload){var oldData=this._data;var data=customSeries.getData();var group=this.group;var renderItem=makeRenderItem(customSeries,data,ecModel,api);data.diff(oldData).add(function(newIdx){createOrUpdate$1(null,newIdx,renderItem(newIdx,payload),customSeries,group,data)}).update(function(newIdx,oldIdx){var el=oldData.getItemGraphicEl(oldIdx);createOrUpdate$1(el,newIdx,renderItem(newIdx,payload),customSeries,group,data)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&group.remove(el)}).execute();this._data=data},incrementalPrepareRender:function(customSeries,ecModel,api){this.group.removeAll();this._data=null},incrementalRender:function(params,customSeries,ecModel,api,payload){var data=customSeries.getData();var renderItem=makeRenderItem(customSeries,data,ecModel,api);function setIncrementalAndHoverLayer(el){if(!el.isGroup){el.incremental=true;el.useHoverLayer=true}}for(var idx=params.start;idx<params.end;idx++){var el=createOrUpdate$1(null,idx,renderItem(idx,payload),customSeries,this.group,data);el.traverse(setIncrementalAndHoverLayer)}},dispose:noop,filterForExposedEvent:function(eventType,query,targetEl,packedEvent){var elementName=query.element;if(elementName==null||targetEl.name===elementName){return true}while((targetEl=targetEl.parent)&&targetEl!==this.group){if(targetEl.name===elementName){return true}}return false}});function createEl(elOption){var graphicType=elOption.type;var el;if(graphicType==="path"){var shape=elOption.shape;var pathRect=(shape.width!=null&&shape.height!=null)?{x:shape.x||0,y:shape.y||0,width:shape.width,height:shape.height}:null;var pathData=getPathData(shape);el=makePath(pathData,null,pathRect,shape.layout||"center");el.__customPathData=pathData}else{if(graphicType==="image"){el=new ZImage({});el.__customImagePath=elOption.style.image}else{if(graphicType==="text"){el=new Text({});el.__customText=elOption.style.text}else{var Clz=graphic[graphicType.charAt(0).toUpperCase()+graphicType.slice(1)];
if(__DEV__){assert$1(Clz,'graphic type "'+graphicType+'" can not be found.')}el=new Clz()}}}el.__customGraphicType=graphicType;el.name=elOption.name;return el}function updateEl(el,dataIndex,elOption,animatableModel,data,isInit,isRoot){var transitionProps={};var elOptionStyle=elOption.style||{};elOption.shape&&(transitionProps.shape=clone(elOption.shape));elOption.position&&(transitionProps.position=elOption.position.slice());elOption.scale&&(transitionProps.scale=elOption.scale.slice());elOption.origin&&(transitionProps.origin=elOption.origin.slice());elOption.rotation&&(transitionProps.rotation=elOption.rotation);if(el.type==="image"&&elOption.style){var targetStyle=transitionProps.style={};each$1(["x","y","width","height"],function(prop){prepareStyleTransition(prop,targetStyle,elOptionStyle,el.style,isInit)})}if(el.type==="text"&&elOption.style){var targetStyle=transitionProps.style={};each$1(["x","y"],function(prop){prepareStyleTransition(prop,targetStyle,elOptionStyle,el.style,isInit)});!elOptionStyle.hasOwnProperty("textFill")&&elOptionStyle.fill&&(elOptionStyle.textFill=elOptionStyle.fill);!elOptionStyle.hasOwnProperty("textStroke")&&elOptionStyle.stroke&&(elOptionStyle.textStroke=elOptionStyle.stroke)}if(el.type!=="group"){el.useStyle(elOptionStyle);if(isInit){el.style.opacity=0;var targetOpacity=elOptionStyle.opacity;targetOpacity==null&&(targetOpacity=1);initProps(el,{style:{opacity:targetOpacity}},animatableModel,dataIndex)}}if(isInit){el.attr(transitionProps)}else{updateProps(el,transitionProps,animatableModel,dataIndex)}elOption.hasOwnProperty("z2")&&el.attr("z2",elOption.z2||0);elOption.hasOwnProperty("silent")&&el.attr("silent",elOption.silent);elOption.hasOwnProperty("invisible")&&el.attr("invisible",elOption.invisible);elOption.hasOwnProperty("ignore")&&el.attr("ignore",elOption.ignore);elOption.hasOwnProperty("info")&&el.attr("info",elOption.info);var styleEmphasis=elOption.styleEmphasis;var disableStyleEmphasis=styleEmphasis===false;if(!((el.__cusHasEmphStl&&styleEmphasis==null)||(!el.__cusHasEmphStl&&disableStyleEmphasis))){setElementHoverStyle(el,styleEmphasis);
el.__cusHasEmphStl=!disableStyleEmphasis}isRoot&&setAsHoverStyleTrigger(el,!disableStyleEmphasis)}function prepareStyleTransition(prop,targetStyle,elOptionStyle,oldElStyle,isInit){if(elOptionStyle[prop]!=null&&!isInit){targetStyle[prop]=elOptionStyle[prop];elOptionStyle[prop]=oldElStyle[prop]}}function makeRenderItem(customSeries,data,ecModel,api){var renderItem=customSeries.get("renderItem");var coordSys=customSeries.coordinateSystem;var prepareResult={};if(coordSys){if(__DEV__){assert$1(renderItem,"series.render is required.");assert$1(coordSys.prepareCustoms||prepareCustoms[coordSys.type],"This coordSys does not support custom series.")}prepareResult=coordSys.prepareCustoms?coordSys.prepareCustoms():prepareCustoms[coordSys.type](coordSys)}var userAPI=defaults({getWidth:api.getWidth,getHeight:api.getHeight,getZr:api.getZr,getDevicePixelRatio:api.getDevicePixelRatio,value:value,style:style,styleEmphasis:styleEmphasis,visual:visual,barLayout:barLayout,currentSeriesIndices:currentSeriesIndices,font:font},prepareResult.api||{});var userParams={context:{},seriesId:customSeries.id,seriesName:customSeries.name,seriesIndex:customSeries.seriesIndex,coordSys:prepareResult.coordSys,dataInsideLength:data.count(),encode:wrapEncodeDef(customSeries.getData())};var currDataIndexInside;var currDirty=true;var currItemModel;var currLabelNormalModel;var currLabelEmphasisModel;var currVisualColor;return function(dataIndexInside,payload){currDataIndexInside=dataIndexInside;currDirty=true;return renderItem&&renderItem(defaults({dataIndexInside:dataIndexInside,dataIndex:data.getRawIndex(dataIndexInside),actionType:payload?payload.type:null},userParams),userAPI)};function updateCache(dataIndexInside){dataIndexInside==null&&(dataIndexInside=currDataIndexInside);if(currDirty){currItemModel=data.getItemModel(dataIndexInside);currLabelNormalModel=currItemModel.getModel(LABEL_NORMAL);currLabelEmphasisModel=currItemModel.getModel(LABEL_EMPHASIS);currVisualColor=data.getItemVisual(dataIndexInside,"color");
currDirty=false}}function value(dim,dataIndexInside){dataIndexInside==null&&(dataIndexInside=currDataIndexInside);return data.get(data.getDimension(dim||0),dataIndexInside)}function style(extra,dataIndexInside){dataIndexInside==null&&(dataIndexInside=currDataIndexInside);updateCache(dataIndexInside);var itemStyle=currItemModel.getModel(ITEM_STYLE_NORMAL_PATH).getItemStyle();currVisualColor!=null&&(itemStyle.fill=currVisualColor);var opacity=data.getItemVisual(dataIndexInside,"opacity");opacity!=null&&(itemStyle.opacity=opacity);setTextStyle(itemStyle,currLabelNormalModel,null,{autoColor:currVisualColor,isRectText:true});itemStyle.text=currLabelNormalModel.getShallow("show")?retrieve2(customSeries.getFormattedLabel(dataIndexInside,"normal"),getDefaultLabel(data,dataIndexInside)):null;extra&&extend(itemStyle,extra);return itemStyle}function styleEmphasis(extra,dataIndexInside){dataIndexInside==null&&(dataIndexInside=currDataIndexInside);updateCache(dataIndexInside);var itemStyle=currItemModel.getModel(ITEM_STYLE_EMPHASIS_PATH).getItemStyle();setTextStyle(itemStyle,currLabelEmphasisModel,null,{isRectText:true},true);itemStyle.text=currLabelEmphasisModel.getShallow("show")?retrieve3(customSeries.getFormattedLabel(dataIndexInside,"emphasis"),customSeries.getFormattedLabel(dataIndexInside,"normal"),getDefaultLabel(data,dataIndexInside)):null;extra&&extend(itemStyle,extra);return itemStyle}function visual(visualType,dataIndexInside){dataIndexInside==null&&(dataIndexInside=currDataIndexInside);return data.getItemVisual(dataIndexInside,visualType)}function barLayout(opt){if(coordSys.getBaseAxis){var baseAxis=coordSys.getBaseAxis();return getLayoutOnAxis(defaults({axis:baseAxis},opt),api)}}function currentSeriesIndices(){return ecModel.getCurrentSeriesIndices()}function font(opt){return getFont(opt,ecModel)}}function wrapEncodeDef(data){var encodeDef={};each$1(data.dimensions,function(dimName,dataDimIndex){var dimInfo=data.getDimensionInfo(dimName);if(!dimInfo.isExtraCoord){var coordDim=dimInfo.coordDim;
var dataDims=encodeDef[coordDim]=encodeDef[coordDim]||[];dataDims[dimInfo.coordDimIndex]=dataDimIndex}});return encodeDef}function createOrUpdate$1(el,dataIndex,elOption,animatableModel,group,data){el=doCreateOrUpdate(el,dataIndex,elOption,animatableModel,group,data,true);el&&data.setItemGraphicEl(dataIndex,el);return el}function doCreateOrUpdate(el,dataIndex,elOption,animatableModel,group,data,isRoot){var simplyRemove=!elOption;elOption=elOption||{};var elOptionType=elOption.type;var elOptionShape=elOption.shape;var elOptionStyle=elOption.style;if(el&&(simplyRemove||(elOptionType!=null&&elOptionType!==el.__customGraphicType)||(elOptionType==="path"&&hasOwnPathData(elOptionShape)&&getPathData(elOptionShape)!==el.__customPathData)||(elOptionType==="image"&&hasOwn(elOptionStyle,"image")&&elOptionStyle.image!==el.__customImagePath)||(elOptionType==="text"&&hasOwn(elOptionShape,"text")&&elOptionStyle.text!==el.__customText))){group.remove(el);el=null}if(simplyRemove){return}var isInit=!el;!el&&(el=createEl(elOption));updateEl(el,dataIndex,elOption,animatableModel,data,isInit,isRoot);if(elOptionType==="group"){mergeChildren(el,dataIndex,elOption,animatableModel,data)}group.add(el);return el}function mergeChildren(el,dataIndex,elOption,animatableModel,data){var newChildren=elOption.children;var newLen=newChildren?newChildren.length:0;var mergeChildren=elOption.$mergeChildren;var byName=mergeChildren==="byName"||elOption.diffChildrenByName;var notMerge=mergeChildren===false;if(!newLen&&!byName&&!notMerge){return}if(byName){diffGroupChildren({oldChildren:el.children()||[],newChildren:newChildren||[],dataIndex:dataIndex,animatableModel:animatableModel,group:el,data:data});return}notMerge&&el.removeAll();var index=0;for(;index<newLen;index++){newChildren[index]&&doCreateOrUpdate(el.childAt(index),dataIndex,newChildren[index],animatableModel,el,data)}if(__DEV__){assert$1(!notMerge||el.childCount()===index,"MUST NOT contain empty item in children array when `group.$mergeChildren` is `false`.")
}}function diffGroupChildren(context){(new DataDiffer(context.oldChildren,context.newChildren,getKey,getKey,context)).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(item,idx){var name=item&&item.name;return name!=null?name:GROUP_DIFF_PREFIX+idx}function processAddUpdate(newIndex,oldIndex){var context=this.context;var childOption=newIndex!=null?context.newChildren[newIndex]:null;var child=oldIndex!=null?context.oldChildren[oldIndex]:null;doCreateOrUpdate(child,context.dataIndex,childOption,context.animatableModel,context.group,context.data)}function processRemove(oldIndex){var context=this.context;var child=context.oldChildren[oldIndex];child&&context.group.remove(child)}function getPathData(shape){return shape&&(shape.pathData||shape.d)}function hasOwnPathData(shape){return shape&&(shape.hasOwnProperty("pathData")||shape.hasOwnProperty("d"))}function hasOwn(host,prop){return host&&host.hasOwnProperty(prop)}registerPreprocessor(function(option){var graphicOption=option.graphic;if(isArray(graphicOption)){if(!graphicOption[0]||!graphicOption[0].elements){option.graphic=[{elements:graphicOption}]}else{option.graphic=[option.graphic[0]]}}else{if(graphicOption&&!graphicOption.elements){option.graphic=[{elements:[graphicOption]}]}}});var GraphicModel=extendComponentModel({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(option){var elements=this.option.elements;this.option.elements=null;GraphicModel.superApply(this,"mergeOption",arguments);this.option.elements=elements},optionUpdated:function(newOption,isInit){var thisOption=this.option;var newList=(isInit?thisOption:newOption).elements;var existList=thisOption.elements=isInit?[]:thisOption.elements;var flattenedList=[];this._flatten(newList,flattenedList);var mappingResult=mappingToExists(existList,flattenedList);makeIdAndName(mappingResult);var elOptionsToUpdate=this._elOptionsToUpdate=[];each$1(mappingResult,function(resultItem,index){var newElOption=resultItem.option;
if(__DEV__){assert$1(isObject$1(newElOption)||resultItem.exist,"Empty graphic option definition")}if(!newElOption){return}elOptionsToUpdate.push(newElOption);setKeyInfoToNewElOption(resultItem,newElOption);mergeNewElOptionToExist(existList,index,newElOption);setLayoutInfoToExist(existList[index],newElOption)},this);for(var i=existList.length-1;i>=0;i--){if(existList[i]==null){existList.splice(i,1)}else{delete existList[i].$action}}},_flatten:function(optionList,result,parentOption){each$1(optionList,function(option){if(!option){return}if(parentOption){option.parentOption=parentOption}result.push(option);var children=option.children;if(option.type==="group"&&children){this._flatten(children,result,option)}delete option.children},this)},useElOptionsToUpdate:function(){var els=this._elOptionsToUpdate;this._elOptionsToUpdate=null;return els}});extendComponentView({type:"graphic",init:function(ecModel,api){this._elMap=createHashMap();this._lastGraphicModel},render:function(graphicModel,ecModel,api){if(graphicModel!==this._lastGraphicModel){this._clear()}this._lastGraphicModel=graphicModel;this._updateElements(graphicModel);this._relocate(graphicModel,api)},_updateElements:function(graphicModel){var elOptionsToUpdate=graphicModel.useElOptionsToUpdate();if(!elOptionsToUpdate){return}var elMap=this._elMap;var rootGroup=this.group;each$1(elOptionsToUpdate,function(elOption){var $action=elOption.$action;var id=elOption.id;var existEl=elMap.get(id);var parentId=elOption.parentId;var targetElParent=parentId!=null?elMap.get(parentId):rootGroup;var elOptionStyle=elOption.style;if(elOption.type==="text"&&elOptionStyle){if(elOption.hv&&elOption.hv[1]){elOptionStyle.textVerticalAlign=elOptionStyle.textBaseline=null}!elOptionStyle.hasOwnProperty("textFill")&&elOptionStyle.fill&&(elOptionStyle.textFill=elOptionStyle.fill);!elOptionStyle.hasOwnProperty("textStroke")&&elOptionStyle.stroke&&(elOptionStyle.textStroke=elOptionStyle.stroke)}var elOptionCleaned=getCleanedElOption(elOption);if(__DEV__){existEl&&assert$1(targetElParent===existEl.parent,"Changing parent is not supported.")
}if(!$action||$action==="merge"){existEl?existEl.attr(elOptionCleaned):createEl$1(id,targetElParent,elOptionCleaned,elMap)}else{if($action==="replace"){removeEl(existEl,elMap);createEl$1(id,targetElParent,elOptionCleaned,elMap)}else{if($action==="remove"){removeEl(existEl,elMap)}}}var el=elMap.get(id);if(el){el.__ecGraphicWidth=elOption.width;el.__ecGraphicHeight=elOption.height;setEventData(el,graphicModel,elOption)}})},_relocate:function(graphicModel,api){var elOptions=graphicModel.option.elements;var rootGroup=this.group;var elMap=this._elMap;for(var i=elOptions.length-1;i>=0;i--){var elOption=elOptions[i];var el=elMap.get(elOption.id);if(!el){continue}var parentEl=el.parent;var containerInfo=parentEl===rootGroup?{width:api.getWidth(),height:api.getHeight()}:{width:parentEl.__ecGraphicWidth||0,height:parentEl.__ecGraphicHeight||0};positionElement(el,elOption,containerInfo,null,{hv:elOption.hv,boundingMode:elOption.bounding})}},_clear:function(){var elMap=this._elMap;elMap.each(function(el){removeEl(el,elMap)});this._elMap=createHashMap()},dispose:function(){this._clear()}});function createEl$1(id,targetElParent,elOption,elMap){var graphicType=elOption.type;if(__DEV__){assert$1(graphicType,"graphic type MUST be set")}var Clz=graphic[graphicType.charAt(0).toUpperCase()+graphicType.slice(1)];if(__DEV__){assert$1(Clz,"graphic type can not be found")}var el=new Clz(elOption);targetElParent.add(el);elMap.set(id,el);el.__ecGraphicId=id}function removeEl(existEl,elMap){var existElParent=existEl&&existEl.parent;if(existElParent){existEl.type==="group"&&existEl.traverse(function(el){removeEl(el,elMap)});elMap.removeKey(existEl.__ecGraphicId);existElParent.remove(existEl)}}function getCleanedElOption(elOption){elOption=extend({},elOption);each$1(["id","parentId","$action","hv","bounding"].concat(LOCATION_PARAMS),function(name){delete elOption[name]});return elOption}function isSetLoc(obj,props){var isSet;each$1(props,function(prop){obj[prop]!=null&&obj[prop]!=="auto"&&(isSet=true)
});return isSet}function setKeyInfoToNewElOption(resultItem,newElOption){var existElOption=resultItem.exist;newElOption.id=resultItem.keyInfo.id;!newElOption.type&&existElOption&&(newElOption.type=existElOption.type);if(newElOption.parentId==null){var newElParentOption=newElOption.parentOption;if(newElParentOption){newElOption.parentId=newElParentOption.id}else{if(existElOption){newElOption.parentId=existElOption.parentId}}}newElOption.parentOption=null}function mergeNewElOptionToExist(existList,index,newElOption){var newElOptCopy=extend({},newElOption);var existElOption=existList[index];var $action=newElOption.$action||"merge";if($action==="merge"){if(existElOption){if(__DEV__){var newType=newElOption.type;assert$1(!newType||existElOption.type===newType,'Please set $action: "replace" to change `type`')}merge(existElOption,newElOptCopy,true);mergeLayoutParam(existElOption,newElOptCopy,{ignoreSize:true});copyLayoutParams(newElOption,existElOption)}else{existList[index]=newElOptCopy}}else{if($action==="replace"){existList[index]=newElOptCopy}else{if($action==="remove"){existElOption&&(existList[index]=null)}}}}function setLayoutInfoToExist(existItem,newElOption){if(!existItem){return}existItem.hv=newElOption.hv=[isSetLoc(newElOption,["left","right"]),isSetLoc(newElOption,["top","bottom"])];if(existItem.type==="group"){existItem.width==null&&(existItem.width=newElOption.width=0);existItem.height==null&&(existItem.height=newElOption.height=0)}}function setEventData(el,graphicModel,elOption){var eventData=el.eventData;if(!el.silent&&!el.ignore&&!eventData){eventData=el.eventData={componentType:"graphic",componentIndex:graphicModel.componentIndex,name:el.name}}if(eventData){eventData.info=el.info}}var LegendModel=extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:true},init:function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel);option.selected=option.selected||{}},mergeOption:function(option){LegendModel.superCall(this,"mergeOption",option)
},optionUpdated:function(){this._updateData(this.ecModel);var legendData=this._data;if(legendData[0]&&this.get("selectedMode")==="single"){var hasSelected=false;for(var i=0;i<legendData.length;i++){var name=legendData[i].get("name");if(this.isSelected(name)){this.select(name);hasSelected=true;break}}!hasSelected&&this.select(legendData[0].get("name"))}},_updateData:function(ecModel){var potentialData=[];var availableNames=[];ecModel.eachRawSeries(function(seriesModel){var seriesName=seriesModel.name;availableNames.push(seriesName);var isPotential;if(seriesModel.legendDataProvider){var data=seriesModel.legendDataProvider();var names=data.mapArray(data.getName);if(!ecModel.isSeriesFiltered(seriesModel)){availableNames=availableNames.concat(names)}if(names.length){potentialData=potentialData.concat(names)}else{isPotential=true}}else{isPotential=true}if(isPotential&&isNameSpecified(seriesModel)){potentialData.push(seriesModel.name)}});this._availableNames=availableNames;var rawData=this.get("data")||potentialData;var legendData=map(rawData,function(dataItem){if(typeof dataItem==="string"||typeof dataItem==="number"){dataItem={name:dataItem}}return new Model(dataItem,this,this.ecModel)},this);this._data=legendData},getData:function(){return this._data},select:function(name){var selected=this.option.selected;var selectedMode=this.get("selectedMode");if(selectedMode==="single"){var data=this._data;each$1(data,function(dataItem){selected[dataItem.get("name")]=false})}selected[name]=true},unSelect:function(name){if(this.get("selectedMode")!=="single"){this.option.selected[name]=false}},toggleSelected:function(name){var selected=this.option.selected;if(!selected.hasOwnProperty(name)){selected[name]=true}this[selected[name]?"unSelect":"select"](name)},isSelected:function(name){var selected=this.option.selected;return !(selected.hasOwnProperty(name)&&!selected[name])&&indexOf(this._availableNames,name)>=0},defaultOption:{zlevel:0,z:4,show:true,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:true,tooltip:{show:false}}});
function legendSelectActionHandler(methodName,payload,ecModel){var selectedMap={};var isToggleSelect=methodName==="toggleSelected";var isSelected;ecModel.eachComponent("legend",function(legendModel){if(isToggleSelect&&isSelected!=null){legendModel[isSelected?"select":"unSelect"](payload.name)}else{legendModel[methodName](payload.name);isSelected=legendModel.isSelected(payload.name)}var legendData=legendModel.getData();each$1(legendData,function(model){var name=model.get("name");if(name==="\n"||name===""){return}var isItemSelected=legendModel.isSelected(name);if(selectedMap.hasOwnProperty(name)){selectedMap[name]=selectedMap[name]&&isItemSelected}else{selectedMap[name]=isItemSelected}})});return{name:payload.name,selected:selectedMap}}registerAction("legendToggleSelect","legendselectchanged",curry(legendSelectActionHandler,"toggleSelected"));registerAction("legendSelect","legendselected",curry(legendSelectActionHandler,"select"));registerAction("legendUnSelect","legendunselected",curry(legendSelectActionHandler,"unSelect"));function layout$3(group,componentModel,api){var boxLayoutParams=componentModel.getBoxLayoutParams();var padding=componentModel.get("padding");var viewportSize={width:api.getWidth(),height:api.getHeight()};var rect=getLayoutRect(boxLayoutParams,viewportSize,padding);box(componentModel.get("orient"),group,componentModel.get("itemGap"),rect.width,rect.height);positionElement(group,boxLayoutParams,viewportSize,padding)}function makeBackground(rect,componentModel){var padding=normalizeCssArray$1(componentModel.get("padding"));var style=componentModel.getItemStyle(["color","opacity"]);style.fill=componentModel.get("backgroundColor");var rect=new Rect({shape:{x:rect.x-padding[3],y:rect.y-padding[0],width:rect.width+padding[1]+padding[3],height:rect.height+padding[0]+padding[2],r:componentModel.get("borderRadius")},style:style,silent:true,z2:-1});return rect}var curry$4=curry;var each$16=each$1;var Group$3=Group;var LegendView=extendComponentView({type:"legend.plain",newlineDisabled:false,init:function(){this.group.add(this._contentGroup=new Group$3());
this._backgroundEl;this._isFirstRender=true},getContentGroup:function(){return this._contentGroup},render:function(legendModel,ecModel,api){var isFirstRender=this._isFirstRender;this._isFirstRender=false;this.resetInner();if(!legendModel.get("show",true)){return}var itemAlign=legendModel.get("align");if(!itemAlign||itemAlign==="auto"){itemAlign=(legendModel.get("left")==="right"&&legendModel.get("orient")==="vertical")?"right":"left"}this.renderInner(itemAlign,legendModel,ecModel,api);var positionInfo=legendModel.getBoxLayoutParams();var viewportSize={width:api.getWidth(),height:api.getHeight()};var padding=legendModel.get("padding");var maxSize=getLayoutRect(positionInfo,viewportSize,padding);var mainRect=this.layoutInner(legendModel,itemAlign,maxSize,isFirstRender);var layoutRect=getLayoutRect(defaults({width:mainRect.width,height:mainRect.height},positionInfo),viewportSize,padding);this.group.attr("position",[layoutRect.x-mainRect.x,layoutRect.y-mainRect.y]);this.group.add(this._backgroundEl=makeBackground(mainRect,legendModel))},resetInner:function(){this.getContentGroup().removeAll();this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(itemAlign,legendModel,ecModel,api){var contentGroup=this.getContentGroup();var legendDrawnMap=createHashMap();var selectMode=legendModel.get("selectedMode");var excludeSeriesId=[];ecModel.eachRawSeries(function(seriesModel){!seriesModel.get("legendHoverLink")&&excludeSeriesId.push(seriesModel.id)});each$16(legendModel.getData(),function(itemModel,dataIndex){var name=itemModel.get("name");if(!this.newlineDisabled&&(name===""||name==="\n")){contentGroup.add(new Group$3({newline:true}));return}var seriesModel=ecModel.getSeriesByName(name)[0];if(legendDrawnMap.get(name)){return}if(seriesModel){var data=seriesModel.getData();var color=data.getVisual("color");if(typeof color==="function"){color=color(seriesModel.getDataParams(0))}var legendSymbolType=data.getVisual("legendSymbol")||"roundRect";var symbolType=data.getVisual("symbol");
var itemGroup=this._createItem(name,dataIndex,itemModel,legendModel,legendSymbolType,symbolType,itemAlign,color,selectMode);itemGroup.on("click",curry$4(dispatchSelectAction,name,api)).on("mouseover",curry$4(dispatchHighlightAction,seriesModel.name,null,api,excludeSeriesId)).on("mouseout",curry$4(dispatchDownplayAction,seriesModel.name,null,api,excludeSeriesId));legendDrawnMap.set(name,true)}else{ecModel.eachRawSeries(function(seriesModel){if(legendDrawnMap.get(name)){return}if(seriesModel.legendDataProvider){var data=seriesModel.legendDataProvider();var idx=data.indexOfName(name);if(idx<0){return}var color=data.getItemVisual(idx,"color");var legendSymbolType="roundRect";var itemGroup=this._createItem(name,dataIndex,itemModel,legendModel,legendSymbolType,null,itemAlign,color,selectMode);itemGroup.on("click",curry$4(dispatchSelectAction,name,api)).on("mouseover",curry$4(dispatchHighlightAction,null,name,api,excludeSeriesId)).on("mouseout",curry$4(dispatchDownplayAction,null,name,api,excludeSeriesId));legendDrawnMap.set(name,true)}},this)}if(__DEV__){if(!legendDrawnMap.get(name)){console.warn(name+" series not exists. Legend data should be same with series name or data name.")}}},this)},_createItem:function(name,dataIndex,itemModel,legendModel,legendSymbolType,symbolType,itemAlign,color,selectMode){var itemWidth=legendModel.get("itemWidth");var itemHeight=legendModel.get("itemHeight");var inactiveColor=legendModel.get("inactiveColor");var symbolKeepAspect=legendModel.get("symbolKeepAspect");var isSelected=legendModel.isSelected(name);var itemGroup=new Group$3();var textStyleModel=itemModel.getModel("textStyle");var itemIcon=itemModel.get("icon");var tooltipModel=itemModel.getModel("tooltip");var legendGlobalTooltipModel=tooltipModel.parentModel;legendSymbolType=itemIcon||legendSymbolType;itemGroup.add(createSymbol(legendSymbolType,0,0,itemWidth,itemHeight,isSelected?color:inactiveColor,symbolKeepAspect==null?true:symbolKeepAspect));if(!itemIcon&&symbolType&&((symbolType!==legendSymbolType)||symbolType==="none")){var size=itemHeight*0.8;
if(symbolType==="none"){symbolType="circle"}itemGroup.add(createSymbol(symbolType,(itemWidth-size)/2,(itemHeight-size)/2,size,size,isSelected?color:inactiveColor,symbolKeepAspect==null?true:symbolKeepAspect))}var textX=itemAlign==="left"?itemWidth+5:-5;var textAlign=itemAlign;var formatter=legendModel.get("formatter");var content=name;if(typeof formatter==="string"&&formatter){content=formatter.replace("{name}",name!=null?name:"")}else{if(typeof formatter==="function"){content=formatter(name)}}itemGroup.add(new Text({style:setTextStyle({},textStyleModel,{text:content,x:textX,y:itemHeight/2,textFill:isSelected?textStyleModel.getTextColor():inactiveColor,textAlign:textAlign,textVerticalAlign:"middle"})}));var hitRect=new Rect({shape:itemGroup.getBoundingRect(),invisible:true,tooltip:tooltipModel.get("show")?extend({content:name,formatter:legendGlobalTooltipModel.get("formatter",true)||function(){return name},formatterParams:{componentType:"legend",legendIndex:legendModel.componentIndex,name:name,$vars:["name"]}},tooltipModel.option):null});itemGroup.add(hitRect);itemGroup.eachChild(function(child){child.silent=true});hitRect.silent=!selectMode;this.getContentGroup().add(itemGroup);setHoverStyle(itemGroup);itemGroup.__legendDataIndex=dataIndex;return itemGroup},layoutInner:function(legendModel,itemAlign,maxSize){var contentGroup=this.getContentGroup();box(legendModel.get("orient"),contentGroup,legendModel.get("itemGap"),maxSize.width,maxSize.height);var contentRect=contentGroup.getBoundingRect();contentGroup.attr("position",[-contentRect.x,-contentRect.y]);return this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll();this._isFirstRender=true}});function dispatchSelectAction(name,api){api.dispatchAction({type:"legendToggleSelect",name:name})}function dispatchHighlightAction(seriesName,dataName,api,excludeSeriesId){var el=api.getZr().storage.getDisplayList()[0];if(!(el&&el.useHoverLayer)){api.dispatchAction({type:"highlight",seriesName:seriesName,name:dataName,excludeSeriesId:excludeSeriesId})
}}function dispatchDownplayAction(seriesName,dataName,api,excludeSeriesId){var el=api.getZr().storage.getDisplayList()[0];if(!(el&&el.useHoverLayer)){api.dispatchAction({type:"downplay",seriesName:seriesName,name:dataName,excludeSeriesId:excludeSeriesId})}}var legendFilter=function(ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});if(legendModels&&legendModels.length){ecModel.filterSeries(function(series){for(var i=0;i<legendModels.length;i++){if(!legendModels[i].isSelected(series.name)){return false}}return true})}};registerProcessor(legendFilter);ComponentModel.registerSubTypeDefaulter("legend",function(){return"plain"});var ScrollableLegendModel=LegendModel.extend({type:"legend.scroll",setScrollDataIndex:function(scrollDataIndex){this.option.scrollDataIndex=scrollDataIndex},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(option,parentModel,ecModel,extraOpt){var inputPositionParams=getLayoutParams(option);ScrollableLegendModel.superCall(this,"init",option,parentModel,ecModel,extraOpt);mergeAndNormalizeLayoutParams(this,option,inputPositionParams)},mergeOption:function(option,extraOpt){ScrollableLegendModel.superCall(this,"mergeOption",option,extraOpt);mergeAndNormalizeLayoutParams(this,this.option,option)},getOrient:function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}}});function mergeAndNormalizeLayoutParams(legendModel,target,raw){var orient=legendModel.getOrient();var ignoreSize=[1,1];ignoreSize[orient.index]=0;mergeLayoutParam(target,raw,{type:"box",ignoreSize:ignoreSize})}var Group$4=Group;var WH$1=["width","height"];var XY$1=["x","y"];var ScrollableLegendView=LegendView.extend({type:"legend.scroll",newlineDisabled:true,init:function(){ScrollableLegendView.superCall(this,"init");
this._currentIndex=0;this.group.add(this._containerGroup=new Group$4());this._containerGroup.add(this.getContentGroup());this.group.add(this._controllerGroup=new Group$4());this._showController},resetInner:function(){ScrollableLegendView.superCall(this,"resetInner");this._controllerGroup.removeAll();this._containerGroup.removeClipPath();this._containerGroup.__rectSize=null},renderInner:function(itemAlign,legendModel,ecModel,api){var me=this;ScrollableLegendView.superCall(this,"renderInner",itemAlign,legendModel,ecModel,api);var controllerGroup=this._controllerGroup;var pageIconSize=legendModel.get("pageIconSize",true);if(!isArray(pageIconSize)){pageIconSize=[pageIconSize,pageIconSize]}createPageButton("pagePrev",0);var pageTextStyleModel=legendModel.getModel("pageTextStyle");controllerGroup.add(new Text({name:"pageText",style:{textFill:pageTextStyleModel.getTextColor(),font:pageTextStyleModel.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:true}));createPageButton("pageNext",1);function createPageButton(name,iconIdx){var pageDataIndexName=name+"DataIndex";var icon=createIcon(legendModel.get("pageIcons",true)[legendModel.getOrient().name][iconIdx],{onclick:bind(me._pageGo,me,pageDataIndexName,legendModel,api)},{x:-pageIconSize[0]/2,y:-pageIconSize[1]/2,width:pageIconSize[0],height:pageIconSize[1]});icon.name=name;controllerGroup.add(icon)}},layoutInner:function(legendModel,itemAlign,maxSize,isFirstRender){var contentGroup=this.getContentGroup();var containerGroup=this._containerGroup;var controllerGroup=this._controllerGroup;var orientIdx=legendModel.getOrient().index;var wh=WH$1[orientIdx];var hw=WH$1[1-orientIdx];var yx=XY$1[1-orientIdx];box(legendModel.get("orient"),contentGroup,legendModel.get("itemGap"),!orientIdx?null:maxSize.width,orientIdx?null:maxSize.height);box("horizontal",controllerGroup,legendModel.get("pageButtonItemGap",true));var contentRect=contentGroup.getBoundingRect();var controllerRect=controllerGroup.getBoundingRect();var showController=this._showController=contentRect[wh]>maxSize[wh];
var contentPos=[-contentRect.x,-contentRect.y];if(!isFirstRender){contentPos[orientIdx]=contentGroup.position[orientIdx]}var containerPos=[0,0];var controllerPos=[-controllerRect.x,-controllerRect.y];var pageButtonGap=retrieve2(legendModel.get("pageButtonGap",true),legendModel.get("itemGap",true));if(showController){var pageButtonPosition=legendModel.get("pageButtonPosition",true);if(pageButtonPosition==="end"){controllerPos[orientIdx]+=maxSize[wh]-controllerRect[wh]}else{containerPos[orientIdx]+=controllerRect[wh]+pageButtonGap}}controllerPos[1-orientIdx]+=contentRect[hw]/2-controllerRect[hw]/2;contentGroup.attr("position",contentPos);containerGroup.attr("position",containerPos);controllerGroup.attr("position",controllerPos);var mainRect=this.group.getBoundingRect();var mainRect={x:0,y:0};mainRect[wh]=showController?maxSize[wh]:contentRect[wh];mainRect[hw]=Math.max(contentRect[hw],controllerRect[hw]);mainRect[yx]=Math.min(0,controllerRect[yx]+controllerPos[1-orientIdx]);containerGroup.__rectSize=maxSize[wh];if(showController){var clipShape={x:0,y:0};clipShape[wh]=Math.max(maxSize[wh]-controllerRect[wh]-pageButtonGap,0);clipShape[hw]=mainRect[hw];containerGroup.setClipPath(new Rect({shape:clipShape}));containerGroup.__rectSize=clipShape[wh]}else{controllerGroup.eachChild(function(child){child.attr({invisible:true,silent:true})})}var pageInfo=this._getPageInfo(legendModel);pageInfo.pageIndex!=null&&updateProps(contentGroup,{position:pageInfo.contentPosition},showController?legendModel:false);this._updatePageInfoView(legendModel,pageInfo);return mainRect},_pageGo:function(to,legendModel,api){var scrollDataIndex=this._getPageInfo(legendModel)[to];scrollDataIndex!=null&&api.dispatchAction({type:"legendScroll",scrollDataIndex:scrollDataIndex,legendId:legendModel.id})},_updatePageInfoView:function(legendModel,pageInfo){var controllerGroup=this._controllerGroup;each$1(["pagePrev","pageNext"],function(name){var canJump=pageInfo[name+"DataIndex"]!=null;var icon=controllerGroup.childOfName(name);
if(icon){icon.setStyle("fill",canJump?legendModel.get("pageIconColor",true):legendModel.get("pageIconInactiveColor",true));icon.cursor=canJump?"pointer":"default"}});var pageText=controllerGroup.childOfName("pageText");var pageFormatter=legendModel.get("pageFormatter");var pageIndex=pageInfo.pageIndex;var current=pageIndex!=null?pageIndex+1:0;var total=pageInfo.pageCount;pageText&&pageFormatter&&pageText.setStyle("text",isString(pageFormatter)?pageFormatter.replace("{current}",current).replace("{total}",total):pageFormatter({current:current,total:total}))},_getPageInfo:function(legendModel){var scrollDataIndex=legendModel.get("scrollDataIndex",true);var contentGroup=this.getContentGroup();var containerRectSize=this._containerGroup.__rectSize;var orientIdx=legendModel.getOrient().index;var wh=WH$1[orientIdx];var xy=XY$1[orientIdx];var targetItemIndex=this._findTargetItemIndex(scrollDataIndex);var children=contentGroup.children();var targetItem=children[targetItemIndex];var itemCount=children.length;var pCount=!itemCount?0:1;var result={contentPosition:contentGroup.position.slice(),pageCount:pCount,pageIndex:pCount-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!targetItem){return result}var targetItemInfo=getItemInfo(targetItem);result.contentPosition[orientIdx]=-targetItemInfo.s;for(var i=targetItemIndex+1,winStartItemInfo=targetItemInfo,winEndItemInfo=targetItemInfo,currItemInfo=null;i<=itemCount;++i){currItemInfo=getItemInfo(children[i]);if((!currItemInfo&&winEndItemInfo.e>winStartItemInfo.s+containerRectSize)||(currItemInfo&&!intersect(currItemInfo,winStartItemInfo.s))){if(winEndItemInfo.i>winStartItemInfo.i){winStartItemInfo=winEndItemInfo}else{winStartItemInfo=currItemInfo}if(winStartItemInfo){if(result.pageNextDataIndex==null){result.pageNextDataIndex=winStartItemInfo.i}++result.pageCount}}winEndItemInfo=currItemInfo}for(var i=targetItemIndex-1,winStartItemInfo=targetItemInfo,winEndItemInfo=targetItemInfo,currItemInfo=null;i>=-1;--i){currItemInfo=getItemInfo(children[i]);
if((!currItemInfo||!intersect(winEndItemInfo,currItemInfo.s))&&winStartItemInfo.i<winEndItemInfo.i){winEndItemInfo=winStartItemInfo;if(result.pagePrevDataIndex==null){result.pagePrevDataIndex=winStartItemInfo.i}++result.pageCount;++result.pageIndex}winStartItemInfo=currItemInfo}return result;function getItemInfo(el){if(el){var itemRect=el.getBoundingRect();var start=itemRect[xy]+el.position[orientIdx];return{s:start,e:start+itemRect[wh],i:el.__legendDataIndex}}}function intersect(itemInfo,winStart){return itemInfo.e>=winStart&&itemInfo.s<=winStart+containerRectSize}},_findTargetItemIndex:function(targetDataIndex){var index;var contentGroup=this.getContentGroup();if(this._showController){contentGroup.eachChild(function(child,idx){if(child.__legendDataIndex===targetDataIndex){index=idx}})}else{index=0}return index}});registerAction("legendScroll","legendscroll",function(payload,ecModel){var scrollDataIndex=payload.scrollDataIndex;scrollDataIndex!=null&&ecModel.eachComponent({mainType:"legend",subType:"scroll",query:payload},function(legendModel){legendModel.setScrollDataIndex(scrollDataIndex)})});extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:true,showContent:true,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:false,displayMode:"single",renderMode:"auto",confine:false,showDelay:0,hideDelay:100,transitionDuration:0.4,enterable:false,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var each$18=each$1;var toCamelCase$1=toCamelCase;var vendors=["","-webkit-","-moz-","-o-"];var gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";function assembleTransition(duration){var transitionCurve="cubic-bezier(0.23, 1, 0.32, 1)";
var transitionText="left "+duration+"s "+transitionCurve+","+"top "+duration+"s "+transitionCurve;return map(vendors,function(vendorPrefix){return vendorPrefix+"transition:"+transitionText}).join(";")}function assembleFont(textStyleModel){var cssText=[];var fontSize=textStyleModel.get("fontSize");var color=textStyleModel.getTextColor();color&&cssText.push("color:"+color);cssText.push("font:"+textStyleModel.getFont());fontSize&&cssText.push("line-height:"+Math.round(fontSize*3/2)+"px");each$18(["decoration","align"],function(name){var val=textStyleModel.get(name);val&&cssText.push("text-"+name+":"+val)});return cssText.join(";")}function assembleCssText(tooltipModel){var cssText=[];var transitionDuration=tooltipModel.get("transitionDuration");var backgroundColor=tooltipModel.get("backgroundColor");var textStyleModel=tooltipModel.getModel("textStyle");var padding=tooltipModel.get("padding");transitionDuration&&cssText.push(assembleTransition(transitionDuration));if(backgroundColor){if(env$1.canvasSupported){cssText.push("background-Color:"+backgroundColor)}else{cssText.push("background-Color:#"+toHex(backgroundColor));cssText.push("filter:alpha(opacity=70)")}}each$18(["width","color","radius"],function(name){var borderName="border-"+name;var camelCase=toCamelCase$1(borderName);var val=tooltipModel.get(camelCase);val!=null&&cssText.push(borderName+":"+val+(name==="color"?"":"px"))});cssText.push(assembleFont(textStyleModel));if(padding!=null){cssText.push("padding:"+normalizeCssArray$1(padding).join("px ")+"px")}return cssText.join(";")+";"}function TooltipContent(container,api){if(env$1.wxa){return null}var el=document.createElement("div");var zr=this._zr=api.getZr();this.el=el;this._x=api.getWidth()/2;this._y=api.getHeight()/2;container.appendChild(el);this._container=container;this._show=false;this._hideTimeout;var self=this;el.onmouseenter=function(){if(self._enterable){clearTimeout(self._hideTimeout);self._show=true}self._inContent=true};el.onmousemove=function(e){e=e||window.event;
if(!self._enterable){var handler=zr.handler;normalizeEvent(container,e,true);handler.dispatch("mousemove",e)}};el.onmouseleave=function(){if(self._enterable){if(self._show){self.hideLater(self._hideDelay)}}self._inContent=false}}TooltipContent.prototype={constructor:TooltipContent,_enterable:true,update:function(){var container=this._container;var stl=container.currentStyle||document.defaultView.getComputedStyle(container);var domStyle=container.style;if(domStyle.position!=="absolute"&&stl.position!=="absolute"){domStyle.position="relative"}},show:function(tooltipModel){clearTimeout(this._hideTimeout);var el=this.el;el.style.cssText=gCssText+assembleCssText(tooltipModel)+";left:"+this._x+"px;top:"+this._y+"px;"+(tooltipModel.get("extraCssText")||"");el.style.display=el.innerHTML?"block":"none";el.style.pointerEvents=this._enterable?"auto":"none";this._show=true},setContent:function(content){this.el.innerHTML=content==null?"":content},setEnterable:function(enterable){this._enterable=enterable},getSize:function(){var el=this.el;return[el.clientWidth,el.clientHeight]},moveTo:function(x,y){var zr=this._zr;var viewportRootOffset;if(zr&&zr.painter&&(viewportRootOffset=zr.painter.getViewportRootOffset())){x+=viewportRootOffset.offsetLeft;y+=viewportRootOffset.offsetTop}var style=this.el.style;style.left=x+"px";style.top=y+"px";this._x=x;this._y=y},hide:function(){this.el.style.display="none";this._show=false},hideLater:function(time){if(this._show&&!(this._inContent&&this._enterable)){if(time){this._hideDelay=time;this._show=false;this._hideTimeout=setTimeout(bind(this.hide,this),time)}else{this.hide()}}},isShow:function(){return this._show},getOuterSize:function(){var width=this.el.clientWidth;var height=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var stl=document.defaultView.getComputedStyle(this.el);if(stl){width+=parseInt(stl.paddingLeft,10)+parseInt(stl.paddingRight,10)+parseInt(stl.borderLeftWidth,10)+parseInt(stl.borderRightWidth,10);
height+=parseInt(stl.paddingTop,10)+parseInt(stl.paddingBottom,10)+parseInt(stl.borderTopWidth,10)+parseInt(stl.borderBottomWidth,10)}}return{width:width,height:height}}};function TooltipRichContent(api){this._zr=api.getZr();this._show=false;this._hideTimeout}TooltipRichContent.prototype={constructor:TooltipRichContent,_enterable:true,update:function(){},show:function(tooltipModel){if(this._hideTimeout){clearTimeout(this._hideTimeout)}this.el.attr("show",true);this._show=true},setContent:function(content,markerRich,tooltipModel){if(this.el){this._zr.remove(this.el)}var markers={};var text=content;var prefix="{marker";var suffix="|}";var startId=text.indexOf(prefix);while(startId>=0){var endId=text.indexOf(suffix);var name=text.substr(startId+prefix.length,endId-startId-prefix.length);if(name.indexOf("sub")>-1){markers["marker"+name]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:markerRich[name],textOffset:[3,0]}}else{markers["marker"+name]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:markerRich[name]}}text=text.substr(endId+1);startId=text.indexOf("{marker")}this.el=new Text({style:{rich:markers,text:content,textLineHeight:20,textBackgroundColor:tooltipModel.get("backgroundColor"),textBorderRadius:tooltipModel.get("borderRadius"),textFill:tooltipModel.get("textStyle.color"),textPadding:tooltipModel.get("padding")},z:tooltipModel.get("z")});this._zr.add(this.el);var self=this;this.el.on("mouseover",function(){if(self._enterable){clearTimeout(self._hideTimeout);self._show=true}self._inContent=true});this.el.on("mouseout",function(){if(self._enterable){if(self._show){self.hideLater(self._hideDelay)}}self._inContent=false})},setEnterable:function(enterable){this._enterable=enterable},getSize:function(){var bounding=this.el.getBoundingRect();return[bounding.width,bounding.height]},moveTo:function(x,y){if(this.el){this.el.attr("position",[x,y])}},hide:function(){this.el.hide();this._show=false},hideLater:function(time){if(this._show&&!(this._inContent&&this._enterable)){if(time){this._hideDelay=time;
this._show=false;this._hideTimeout=setTimeout(bind(this.hide,this),time)}else{this.hide()}}},isShow:function(){return this._show},getOuterSize:function(){return this.getSize()}};var bind$3=bind;var each$17=each$1;var parsePercent$2=parsePercent$1;var proxyRect=new Rect({shape:{x:-1,y:-1,width:2,height:2}});extendComponentView({type:"tooltip",init:function(ecModel,api){if(env$1.node){return}var tooltipModel=ecModel.getComponent("tooltip");var renderMode=tooltipModel.get("renderMode");this._renderMode=getTooltipRenderMode(renderMode);var tooltipContent;if(this._renderMode==="html"){tooltipContent=new TooltipContent(api.getDom(),api);this._newLine="<br/>"}else{tooltipContent=new TooltipRichContent(api);this._newLine="\n"}this._tooltipContent=tooltipContent},render:function(tooltipModel,ecModel,api){if(env$1.node){return}this.group.removeAll();this._tooltipModel=tooltipModel;this._ecModel=ecModel;this._api=api;this._lastDataByCoordSys=null;this._alwaysShowContent=tooltipModel.get("alwaysShowContent");var tooltipContent=this._tooltipContent;tooltipContent.update();tooltipContent.setEnterable(tooltipModel.get("enterable"));this._initGlobalListener();this._keepShow()},_initGlobalListener:function(){var tooltipModel=this._tooltipModel;var triggerOn=tooltipModel.get("triggerOn");register("itemTooltip",this._api,bind$3(function(currTrigger,e,dispatchAction){if(triggerOn!=="none"){if(triggerOn.indexOf(currTrigger)>=0){this._tryShow(e,dispatchAction)}else{if(currTrigger==="leave"){this._hide(dispatchAction)}}}},this))},_keepShow:function(){var tooltipModel=this._tooltipModel;var ecModel=this._ecModel;var api=this._api;if(this._lastX!=null&&this._lastY!=null&&tooltipModel.get("triggerOn")!=="none"){var self=this;clearTimeout(this._refreshUpdateTimeout);this._refreshUpdateTimeout=setTimeout(function(){self.manuallyShowTip(tooltipModel,ecModel,api,{x:self._lastX,y:self._lastY})})}},manuallyShowTip:function(tooltipModel,ecModel,api,payload){if(payload.from===this.uid||env$1.node){return
}var dispatchAction=makeDispatchAction$1(payload,api);this._ticket="";var dataByCoordSys=payload.dataByCoordSys;if(payload.tooltip&&payload.x!=null&&payload.y!=null){var el=proxyRect;el.position=[payload.x,payload.y];el.update();el.tooltip=payload.tooltip;this._tryShow({offsetX:payload.x,offsetY:payload.y,target:el},dispatchAction)}else{if(dataByCoordSys){this._tryShow({offsetX:payload.x,offsetY:payload.y,position:payload.position,event:{},dataByCoordSys:payload.dataByCoordSys,tooltipOption:payload.tooltipOption},dispatchAction)}else{if(payload.seriesIndex!=null){if(this._manuallyAxisShowTip(tooltipModel,ecModel,api,payload)){return}var pointInfo=findPointFromSeries(payload,ecModel);var cx=pointInfo.point[0];var cy=pointInfo.point[1];if(cx!=null&&cy!=null){this._tryShow({offsetX:cx,offsetY:cy,position:payload.position,target:pointInfo.el,event:{}},dispatchAction)}}else{if(payload.x!=null&&payload.y!=null){api.dispatchAction({type:"updateAxisPointer",x:payload.x,y:payload.y});this._tryShow({offsetX:payload.x,offsetY:payload.y,position:payload.position,target:api.getZr().findHover(payload.x,payload.y).target,event:{}},dispatchAction)}}}}},manuallyHideTip:function(tooltipModel,ecModel,api,payload){var tooltipContent=this._tooltipContent;if(!this._alwaysShowContent&&this._tooltipModel){tooltipContent.hideLater(this._tooltipModel.get("hideDelay"))}this._lastX=this._lastY=null;if(payload.from!==this.uid){this._hide(makeDispatchAction$1(payload,api))}},_manuallyAxisShowTip:function(tooltipModel,ecModel,api,payload){var seriesIndex=payload.seriesIndex;var dataIndex=payload.dataIndex;var coordSysAxesInfo=ecModel.getComponent("axisPointer").coordSysAxesInfo;if(seriesIndex==null||dataIndex==null||coordSysAxesInfo==null){return}var seriesModel=ecModel.getSeriesByIndex(seriesIndex);if(!seriesModel){return}var data=seriesModel.getData();var tooltipModel=buildTooltipModel([data.getItemModel(dataIndex),seriesModel,(seriesModel.coordinateSystem||{}).model,tooltipModel]);if(tooltipModel.get("trigger")!=="axis"){return
}api.dispatchAction({type:"updateAxisPointer",seriesIndex:seriesIndex,dataIndex:dataIndex,position:payload.position});return true},_tryShow:function(e,dispatchAction){var el=e.target;var tooltipModel=this._tooltipModel;if(!tooltipModel){return}this._lastX=e.offsetX;this._lastY=e.offsetY;var dataByCoordSys=e.dataByCoordSys;if(dataByCoordSys&&dataByCoordSys.length){this._showAxisTooltip(dataByCoordSys,e)}else{if(el&&el.dataIndex!=null){this._lastDataByCoordSys=null;this._showSeriesItemTooltip(e,el,dispatchAction)}else{if(el&&el.tooltip){this._lastDataByCoordSys=null;this._showComponentItemTooltip(e,el,dispatchAction)}else{this._lastDataByCoordSys=null;this._hide(dispatchAction)}}}},_showOrMove:function(tooltipModel,cb){var delay=tooltipModel.get("showDelay");cb=bind(cb,this);clearTimeout(this._showTimout);delay>0?(this._showTimout=setTimeout(cb,delay)):cb()},_showAxisTooltip:function(dataByCoordSys,e){var ecModel=this._ecModel;var globalTooltipModel=this._tooltipModel;var point=[e.offsetX,e.offsetY];var singleDefaultHTML=[];var singleParamsList=[];var singleTooltipModel=buildTooltipModel([e.tooltipOption,globalTooltipModel]);var renderMode=this._renderMode;var newLine=this._newLine;var markers={};each$17(dataByCoordSys,function(itemCoordSys){each$17(itemCoordSys.dataByAxis,function(item){var axisModel=ecModel.getComponent(item.axisDim+"Axis",item.axisIndex);var axisValue=item.value;var seriesDefaultHTML=[];if(!axisModel||axisValue==null){return}var valueLabel=getValueLabel(axisValue,axisModel.axis,ecModel,item.seriesDataIndices,item.valueLabelOpt);each$1(item.seriesDataIndices,function(idxItem){var series=ecModel.getSeriesByIndex(idxItem.seriesIndex);var dataIndex=idxItem.dataIndexInside;var dataParams=series&&series.getDataParams(dataIndex);dataParams.axisDim=item.axisDim;dataParams.axisIndex=item.axisIndex;dataParams.axisType=item.axisType;dataParams.axisId=item.axisId;dataParams.axisValue=getAxisRawValue(axisModel.axis,axisValue);dataParams.axisValueLabel=valueLabel;
if(dataParams){singleParamsList.push(dataParams);var seriesTooltip=series.formatTooltip(dataIndex,true,null,renderMode);var html;if(isObject$1(seriesTooltip)){html=seriesTooltip.html;var newMarkers=seriesTooltip.markers;merge(markers,newMarkers)}else{html=seriesTooltip}seriesDefaultHTML.push(html)}});var firstLine=valueLabel;if(renderMode!=="html"){singleDefaultHTML.push(seriesDefaultHTML.join(newLine))}else{singleDefaultHTML.push((firstLine?encodeHTML(firstLine)+newLine:"")+seriesDefaultHTML.join(newLine))}})},this);singleDefaultHTML.reverse();singleDefaultHTML=singleDefaultHTML.join(this._newLine+this._newLine);var positionExpr=e.position;this._showOrMove(singleTooltipModel,function(){if(this._updateContentNotChangedOnAxis(dataByCoordSys)){this._updatePosition(singleTooltipModel,positionExpr,point[0],point[1],this._tooltipContent,singleParamsList)}else{this._showTooltipContent(singleTooltipModel,singleDefaultHTML,singleParamsList,Math.random(),point[0],point[1],positionExpr,undefined,markers)}})},_showSeriesItemTooltip:function(e,el,dispatchAction){var ecModel=this._ecModel;var seriesIndex=el.seriesIndex;var seriesModel=ecModel.getSeriesByIndex(seriesIndex);var dataModel=el.dataModel||seriesModel;var dataIndex=el.dataIndex;var dataType=el.dataType;var data=dataModel.getData();var tooltipModel=buildTooltipModel([data.getItemModel(dataIndex),dataModel,seriesModel&&(seriesModel.coordinateSystem||{}).model,this._tooltipModel]);var tooltipTrigger=tooltipModel.get("trigger");if(tooltipTrigger!=null&&tooltipTrigger!=="item"){return}var params=dataModel.getDataParams(dataIndex,dataType);var seriesTooltip=dataModel.formatTooltip(dataIndex,false,dataType,this._renderMode);var defaultHtml;var markers;if(isObject$1(seriesTooltip)){defaultHtml=seriesTooltip.html;markers=seriesTooltip.markers}else{defaultHtml=seriesTooltip;markers=null}var asyncTicket="item_"+dataModel.name+"_"+dataIndex;this._showOrMove(tooltipModel,function(){this._showTooltipContent(tooltipModel,defaultHtml,params,asyncTicket,e.offsetX,e.offsetY,e.position,e.target,markers)
});dispatchAction({type:"showTip",dataIndexInside:dataIndex,dataIndex:data.getRawIndex(dataIndex),seriesIndex:seriesIndex,from:this.uid})},_showComponentItemTooltip:function(e,el,dispatchAction){var tooltipOpt=el.tooltip;if(typeof tooltipOpt==="string"){var content=tooltipOpt;tooltipOpt={content:content,formatter:content}}var subTooltipModel=new Model(tooltipOpt,this._tooltipModel,this._ecModel);var defaultHtml=subTooltipModel.get("content");var asyncTicket=Math.random();this._showOrMove(subTooltipModel,function(){this._showTooltipContent(subTooltipModel,defaultHtml,subTooltipModel.get("formatterParams")||{},asyncTicket,e.offsetX,e.offsetY,e.position,el)});dispatchAction({type:"showTip",from:this.uid})},_showTooltipContent:function(tooltipModel,defaultHtml,params,asyncTicket,x,y,positionExpr,el,markers){this._ticket="";if(!tooltipModel.get("showContent")||!tooltipModel.get("show")){return}var tooltipContent=this._tooltipContent;var formatter=tooltipModel.get("formatter");positionExpr=positionExpr||tooltipModel.get("position");var html=defaultHtml;if(formatter&&typeof formatter==="string"){html=formatTpl(formatter,params,true)}else{if(typeof formatter==="function"){var callback=bind$3(function(cbTicket,html){if(cbTicket===this._ticket){tooltipContent.setContent(html,markers,tooltipModel);this._updatePosition(tooltipModel,positionExpr,x,y,tooltipContent,params,el)}},this);this._ticket=asyncTicket;html=formatter(params,asyncTicket,callback)}}tooltipContent.setContent(html,markers,tooltipModel);tooltipContent.show(tooltipModel);this._updatePosition(tooltipModel,positionExpr,x,y,tooltipContent,params,el)},_updatePosition:function(tooltipModel,positionExpr,x,y,content,params,el){var viewWidth=this._api.getWidth();var viewHeight=this._api.getHeight();positionExpr=positionExpr||tooltipModel.get("position");var contentSize=content.getSize();var align=tooltipModel.get("align");var vAlign=tooltipModel.get("verticalAlign");var rect=el&&el.getBoundingRect().clone();el&&rect.applyTransform(el.transform);
if(typeof positionExpr==="function"){positionExpr=positionExpr([x,y],params,content.el,rect,{viewSize:[viewWidth,viewHeight],contentSize:contentSize.slice()})}if(isArray(positionExpr)){x=parsePercent$2(positionExpr[0],viewWidth);y=parsePercent$2(positionExpr[1],viewHeight)}else{if(isObject$1(positionExpr)){positionExpr.width=contentSize[0];positionExpr.height=contentSize[1];var layoutRect=getLayoutRect(positionExpr,{width:viewWidth,height:viewHeight});x=layoutRect.x;y=layoutRect.y;align=null;vAlign=null}else{if(typeof positionExpr==="string"&&el){var pos=calcTooltipPosition(positionExpr,rect,contentSize);x=pos[0];y=pos[1]}else{var pos=refixTooltipPosition(x,y,content,viewWidth,viewHeight,align?null:20,vAlign?null:20);x=pos[0];y=pos[1]}}}align&&(x-=isCenterAlign(align)?contentSize[0]/2:align==="right"?contentSize[0]:0);vAlign&&(y-=isCenterAlign(vAlign)?contentSize[1]/2:vAlign==="bottom"?contentSize[1]:0);if(tooltipModel.get("confine")){var pos=confineTooltipPosition(x,y,content,viewWidth,viewHeight);x=pos[0];y=pos[1]}content.moveTo(x,y)},_updateContentNotChangedOnAxis:function(dataByCoordSys){var lastCoordSys=this._lastDataByCoordSys;var contentNotChanged=!!lastCoordSys&&lastCoordSys.length===dataByCoordSys.length;contentNotChanged&&each$17(lastCoordSys,function(lastItemCoordSys,indexCoordSys){var lastDataByAxis=lastItemCoordSys.dataByAxis||{};var thisItemCoordSys=dataByCoordSys[indexCoordSys]||{};var thisDataByAxis=thisItemCoordSys.dataByAxis||[];contentNotChanged&=lastDataByAxis.length===thisDataByAxis.length;contentNotChanged&&each$17(lastDataByAxis,function(lastItem,indexAxis){var thisItem=thisDataByAxis[indexAxis]||{};var lastIndices=lastItem.seriesDataIndices||[];var newIndices=thisItem.seriesDataIndices||[];contentNotChanged&=lastItem.value===thisItem.value&&lastItem.axisType===thisItem.axisType&&lastItem.axisId===thisItem.axisId&&lastIndices.length===newIndices.length;contentNotChanged&&each$17(lastIndices,function(lastIdxItem,j){var newIdxItem=newIndices[j];contentNotChanged&=lastIdxItem.seriesIndex===newIdxItem.seriesIndex&&lastIdxItem.dataIndex===newIdxItem.dataIndex
})})});this._lastDataByCoordSys=dataByCoordSys;return !!contentNotChanged},_hide:function(dispatchAction){this._lastDataByCoordSys=null;dispatchAction({type:"hideTip",from:this.uid})},dispose:function(ecModel,api){if(env$1.node){return}this._tooltipContent.hide();unregister("itemTooltip",api)}});function buildTooltipModel(modelCascade){var resultModel=modelCascade.pop();while(modelCascade.length){var tooltipOpt=modelCascade.pop();if(tooltipOpt){if(Model.isInstance(tooltipOpt)){tooltipOpt=tooltipOpt.get("tooltip",true)}if(typeof tooltipOpt==="string"){tooltipOpt={formatter:tooltipOpt}}resultModel=new Model(tooltipOpt,resultModel,resultModel.ecModel)}}return resultModel}function makeDispatchAction$1(payload,api){return payload.dispatchAction||bind(api.dispatchAction,api)}function refixTooltipPosition(x,y,content,viewWidth,viewHeight,gapH,gapV){var size=content.getOuterSize();var width=size.width;var height=size.height;if(gapH!=null){if(x+width+gapH>viewWidth){x-=width+gapH}else{x+=gapH}}if(gapV!=null){if(y+height+gapV>viewHeight){y-=height+gapV}else{y+=gapV}}return[x,y]}function confineTooltipPosition(x,y,content,viewWidth,viewHeight){var size=content.getOuterSize();var width=size.width;var height=size.height;x=Math.min(x+width,viewWidth)-width;y=Math.min(y+height,viewHeight)-height;x=Math.max(x,0);y=Math.max(y,0);return[x,y]}function calcTooltipPosition(position,rect,contentSize){var domWidth=contentSize[0];var domHeight=contentSize[1];var gap=5;var x=0;var y=0;var rectWidth=rect.width;var rectHeight=rect.height;switch(position){case"inside":x=rect.x+rectWidth/2-domWidth/2;y=rect.y+rectHeight/2-domHeight/2;break;case"top":x=rect.x+rectWidth/2-domWidth/2;y=rect.y-domHeight-gap;break;case"bottom":x=rect.x+rectWidth/2-domWidth/2;y=rect.y+rectHeight+gap;break;case"left":x=rect.x-domWidth-gap;y=rect.y+rectHeight/2-domHeight/2;break;case"right":x=rect.x+rectWidth+gap;y=rect.y+rectHeight/2-domHeight/2}return[x,y]}function isCenterAlign(align){return align==="center"||align==="middle"
}registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){});registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});function getSeriesStackId$1(seriesModel){return seriesModel.get("stack")||"__ec_stack_"+seriesModel.seriesIndex}function getAxisKey$1(axis){return axis.dim}function barLayoutPolar(seriesType,ecModel,api){var width=api.getWidth();var height=api.getHeight();var lastStackCoords={};var barWidthAndOffset=calRadialBar(filter(ecModel.getSeriesByType(seriesType),function(seriesModel){return !ecModel.isSeriesFiltered(seriesModel)&&seriesModel.coordinateSystem&&seriesModel.coordinateSystem.type==="polar"}));ecModel.eachSeriesByType(seriesType,function(seriesModel){if(seriesModel.coordinateSystem.type!=="polar"){return}var data=seriesModel.getData();var polar=seriesModel.coordinateSystem;var baseAxis=polar.getBaseAxis();var stackId=getSeriesStackId$1(seriesModel);var columnLayoutInfo=barWidthAndOffset[getAxisKey$1(baseAxis)][stackId];var columnOffset=columnLayoutInfo.offset;var columnWidth=columnLayoutInfo.width;var valueAxis=polar.getOtherAxis(baseAxis);var cx=seriesModel.coordinateSystem.cx;var cy=seriesModel.coordinateSystem.cy;var barMinHeight=seriesModel.get("barMinHeight")||0;var barMinAngle=seriesModel.get("barMinAngle")||0;lastStackCoords[stackId]=lastStackCoords[stackId]||[];var valueDim=data.mapDimension(valueAxis.dim);var baseDim=data.mapDimension(baseAxis.dim);var stacked=isDimensionStacked(data,valueDim);var valueAxisStart=valueAxis.getExtent()[0];for(var idx=0,len=data.count();idx<len;idx++){var value=data.get(valueDim,idx);var baseValue=data.get(baseDim,idx);if(isNaN(value)){continue}var sign=value>=0?"p":"n";var baseCoord=valueAxisStart;if(stacked){if(!lastStackCoords[stackId][baseValue]){lastStackCoords[stackId][baseValue]={p:valueAxisStart,n:valueAxisStart}}baseCoord=lastStackCoords[stackId][baseValue][sign]}var r0;var r;var startAngle;var endAngle;if(valueAxis.dim==="radius"){var radiusSpan=valueAxis.dataToRadius(value)-valueAxisStart;
var angle=baseAxis.dataToAngle(baseValue);if(Math.abs(radiusSpan)<barMinHeight){radiusSpan=(radiusSpan<0?-1:1)*barMinHeight}r0=baseCoord;r=baseCoord+radiusSpan;startAngle=angle-columnOffset;endAngle=startAngle-columnWidth;stacked&&(lastStackCoords[stackId][baseValue][sign]=r)}else{var angleSpan=valueAxis.dataToAngle(value,true)-valueAxisStart;var radius=baseAxis.dataToRadius(baseValue);if(Math.abs(angleSpan)<barMinAngle){angleSpan=(angleSpan<0?-1:1)*barMinAngle}r0=radius+columnOffset;r=r0+columnWidth;startAngle=baseCoord;endAngle=baseCoord+angleSpan;stacked&&(lastStackCoords[stackId][baseValue][sign]=endAngle)}data.setItemLayout(idx,{cx:cx,cy:cy,r0:r0,r:r,startAngle:-startAngle*Math.PI/180,endAngle:-endAngle*Math.PI/180})}},this)}function calRadialBar(barSeries,api){var columnsMap={};each$1(barSeries,function(seriesModel,idx){var data=seriesModel.getData();var polar=seriesModel.coordinateSystem;var baseAxis=polar.getBaseAxis();var axisExtent=baseAxis.getExtent();var bandWidth=baseAxis.type==="category"?baseAxis.getBandWidth():(Math.abs(axisExtent[1]-axisExtent[0])/data.count());var columnsOnAxis=columnsMap[getAxisKey$1(baseAxis)]||{bandWidth:bandWidth,remainedWidth:bandWidth,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}};var stacks=columnsOnAxis.stacks;columnsMap[getAxisKey$1(baseAxis)]=columnsOnAxis;var stackId=getSeriesStackId$1(seriesModel);if(!stacks[stackId]){columnsOnAxis.autoWidthCount++}stacks[stackId]=stacks[stackId]||{width:0,maxWidth:0};var barWidth=parsePercent$1(seriesModel.get("barWidth"),bandWidth);var barMaxWidth=parsePercent$1(seriesModel.get("barMaxWidth"),bandWidth);var barGap=seriesModel.get("barGap");var barCategoryGap=seriesModel.get("barCategoryGap");if(barWidth&&!stacks[stackId].width){barWidth=Math.min(columnsOnAxis.remainedWidth,barWidth);stacks[stackId].width=barWidth;columnsOnAxis.remainedWidth-=barWidth}barMaxWidth&&(stacks[stackId].maxWidth=barMaxWidth);(barGap!=null)&&(columnsOnAxis.gap=barGap);(barCategoryGap!=null)&&(columnsOnAxis.categoryGap=barCategoryGap)
});var result={};each$1(columnsMap,function(columnsOnAxis,coordSysName){result[coordSysName]={};var stacks=columnsOnAxis.stacks;var bandWidth=columnsOnAxis.bandWidth;var categoryGap=parsePercent$1(columnsOnAxis.categoryGap,bandWidth);var barGapPercent=parsePercent$1(columnsOnAxis.gap,1);var remainedWidth=columnsOnAxis.remainedWidth;var autoWidthCount=columnsOnAxis.autoWidthCount;var autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0);each$1(stacks,function(column,stack){var maxWidth=column.maxWidth;if(maxWidth&&maxWidth<autoWidth){maxWidth=Math.min(maxWidth,remainedWidth);if(column.width){maxWidth=Math.min(maxWidth,column.width)}remainedWidth-=maxWidth;column.width=maxWidth;autoWidthCount--}});autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0);var widthSum=0;var lastColumn;each$1(stacks,function(column,idx){if(!column.width){column.width=autoWidth}lastColumn=column;widthSum+=column.width*(1+barGapPercent)});if(lastColumn){widthSum-=lastColumn.width*barGapPercent}var offset=-widthSum/2;each$1(stacks,function(column,stackId){result[coordSysName][stackId]=result[coordSysName][stackId]||{offset:offset,width:column.width};offset+=column.width*(1+barGapPercent)})});return result}function RadiusAxis(scale,radiusExtent){Axis.call(this,"radius",scale,radiusExtent);this.type="category"}RadiusAxis.prototype={constructor:RadiusAxis,pointToData:function(point,clamp){return this.polar.pointToData(point,clamp)[this.dim==="radius"?0:1]},dataToRadius:Axis.prototype.dataToCoord,radiusToData:Axis.prototype.coordToData};inherits(RadiusAxis,Axis);var inner$12=makeInner();function AngleAxis(scale,angleExtent){angleExtent=angleExtent||[0,360];Axis.call(this,"angle",scale,angleExtent);this.type="category"}AngleAxis.prototype={constructor:AngleAxis,pointToData:function(point,clamp){return this.polar.pointToData(point,clamp)[this.dim==="radius"?0:1]},dataToAngle:Axis.prototype.dataToCoord,angleToData:Axis.prototype.coordToData,calculateCategoryInterval:function(){var axis=this;
var labelModel=axis.getLabelModel();var ordinalScale=axis.scale;var ordinalExtent=ordinalScale.getExtent();var tickCount=ordinalScale.count();if(ordinalExtent[1]-ordinalExtent[0]<1){return 0}var tickValue=ordinalExtent[0];var unitSpan=axis.dataToCoord(tickValue+1)-axis.dataToCoord(tickValue);var unitH=Math.abs(unitSpan);var rect=getBoundingRect(tickValue,labelModel.getFont(),"center","top");var maxH=Math.max(rect.height,7);var dh=maxH/unitH;isNaN(dh)&&(dh=Infinity);var interval=Math.max(0,Math.floor(dh));var cache=inner$12(axis.model);var lastAutoInterval=cache.lastAutoInterval;var lastTickCount=cache.lastTickCount;if(lastAutoInterval!=null&&lastTickCount!=null&&Math.abs(lastAutoInterval-interval)<=1&&Math.abs(lastTickCount-tickCount)<=1&&lastAutoInterval>interval){interval=lastAutoInterval}else{cache.lastTickCount=tickCount;cache.lastAutoInterval=interval}return interval}};inherits(AngleAxis,Axis);var Polar=function(name){this.name=name||"";this.cx=0;this.cy=0;this._radiusAxis=new RadiusAxis();this._angleAxis=new AngleAxis();this._radiusAxis.polar=this._angleAxis.polar=this};Polar.prototype={type:"polar",axisPointerEnabled:true,constructor:Polar,dimensions:["radius","angle"],model:null,containPoint:function(point){var coord=this.pointToCoord(point);return this._radiusAxis.contain(coord[0])&&this._angleAxis.contain(coord[1])},containData:function(data){return this._radiusAxis.containData(data[0])&&this._angleAxis.containData(data[1])},getAxis:function(dim){return this["_"+dim+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(scaleType){var axes=[];var angleAxis=this._angleAxis;var radiusAxis=this._radiusAxis;angleAxis.scale.type===scaleType&&axes.push(angleAxis);radiusAxis.scale.type===scaleType&&axes.push(radiusAxis);return axes},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(axis){var angleAxis=this._angleAxis;return axis===angleAxis?this._radiusAxis:angleAxis
},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(dim){var baseAxis=(dim!=null&&dim!=="auto")?this.getAxis(dim):this.getBaseAxis();return{baseAxes:[baseAxis],otherAxes:[this.getOtherAxis(baseAxis)]}},dataToPoint:function(data,clamp){return this.coordToPoint([this._radiusAxis.dataToRadius(data[0],clamp),this._angleAxis.dataToAngle(data[1],clamp)])},pointToData:function(point,clamp){var coord=this.pointToCoord(point);return[this._radiusAxis.radiusToData(coord[0],clamp),this._angleAxis.angleToData(coord[1],clamp)]},pointToCoord:function(point){var dx=point[0]-this.cx;var dy=point[1]-this.cy;var angleAxis=this.getAngleAxis();var extent=angleAxis.getExtent();var minAngle=Math.min(extent[0],extent[1]);var maxAngle=Math.max(extent[0],extent[1]);angleAxis.inverse?(minAngle=maxAngle-360):(maxAngle=minAngle+360);var radius=Math.sqrt(dx*dx+dy*dy);dx/=radius;dy/=radius;var radian=Math.atan2(-dy,dx)/Math.PI*180;var dir=radian<minAngle?1:-1;while(radian<minAngle||radian>maxAngle){radian+=dir*360}return[radius,radian]},coordToPoint:function(coord){var radius=coord[0];var radian=coord[1]/180*Math.PI;var x=Math.cos(radian)*radius+this.cx;var y=-Math.sin(radian)*radius+this.cy;return[x,y]}};var PolarAxisModel=ComponentModel.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});merge(PolarAxisModel.prototype,axisModelCommonMixin);var polarAxisDefaultExtendedOption={angle:{startAngle:90,clockwise:true,splitNumber:12,axisLabel:{rotate:false}},radius:{splitNumber:5}};function getAxisType$3(axisDim,option){return option.type||(option.data?"category":"value")}axisModelCreator("angle",PolarAxisModel,getAxisType$3,polarAxisDefaultExtendedOption.angle);axisModelCreator("radius",PolarAxisModel,getAxisType$3,polarAxisDefaultExtendedOption.radius);extendComponentModel({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(axisType){var foundAxisModel;
var ecModel=this.ecModel;ecModel.eachComponent(axisType,function(axisModel){if(axisModel.getCoordSysModel()===this){foundAxisModel=axisModel}},this);return foundAxisModel},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}});function resizePolar(polar,polarModel,api){var center=polarModel.get("center");var width=api.getWidth();var height=api.getHeight();polar.cx=parsePercent$1(center[0],width);polar.cy=parsePercent$1(center[1],height);var radiusAxis=polar.getRadiusAxis();var size=Math.min(width,height)/2;var radius=parsePercent$1(polarModel.get("radius"),size);radiusAxis.inverse?radiusAxis.setExtent(radius,0):radiusAxis.setExtent(0,radius)}function updatePolarScale(ecModel,api){var polar=this;var angleAxis=polar.getAngleAxis();var radiusAxis=polar.getRadiusAxis();angleAxis.scale.setExtent(Infinity,-Infinity);radiusAxis.scale.setExtent(Infinity,-Infinity);ecModel.eachSeries(function(seriesModel){if(seriesModel.coordinateSystem===polar){var data=seriesModel.getData();each$1(data.mapDimension("radius",true),function(dim){radiusAxis.scale.unionExtentFromData(data,getStackedDimension(data,dim))});each$1(data.mapDimension("angle",true),function(dim){angleAxis.scale.unionExtentFromData(data,getStackedDimension(data,dim))})}});niceScaleExtent(angleAxis.scale,angleAxis.model);niceScaleExtent(radiusAxis.scale,radiusAxis.model);if(angleAxis.type==="category"&&!angleAxis.onBand){var extent=angleAxis.getExtent();var diff=360/angleAxis.scale.count();angleAxis.inverse?(extent[1]+=diff):(extent[1]-=diff);angleAxis.setExtent(extent[0],extent[1])}}function setAxis(axis,axisModel){axis.type=axisModel.get("type");axis.scale=createScaleByModel(axisModel);axis.onBand=axisModel.get("boundaryGap")&&axis.type==="category";axis.inverse=axisModel.get("inverse");if(axisModel.mainType==="angleAxis"){axis.inverse^=axisModel.get("clockwise");var startAngle=axisModel.get("startAngle");axis.setExtent(startAngle,startAngle+(axis.inverse?-360:360))}axisModel.axis=axis;axis.model=axisModel}var polarCreator={dimensions:Polar.prototype.dimensions,create:function(ecModel,api){var polarList=[];
ecModel.eachComponent("polar",function(polarModel,idx){var polar=new Polar(idx);polar.update=updatePolarScale;var radiusAxis=polar.getRadiusAxis();var angleAxis=polar.getAngleAxis();var radiusAxisModel=polarModel.findAxisModel("radiusAxis");var angleAxisModel=polarModel.findAxisModel("angleAxis");setAxis(radiusAxis,radiusAxisModel);setAxis(angleAxis,angleAxisModel);resizePolar(polar,polarModel,api);polarList.push(polar);polarModel.coordinateSystem=polar;polar.model=polarModel});ecModel.eachSeries(function(seriesModel){if(seriesModel.get("coordinateSystem")==="polar"){var polarModel=ecModel.queryComponents({mainType:"polar",index:seriesModel.get("polarIndex"),id:seriesModel.get("polarId")})[0];if(__DEV__){if(!polarModel){throw new Error('Polar "'+retrieve(seriesModel.get("polarIndex"),seriesModel.get("polarId"),0)+'" not found')}}seriesModel.coordinateSystem=polarModel.coordinateSystem}});return polarList}};CoordinateSystemManager.register("polar",polarCreator);var elementList$1=["axisLine","axisLabel","axisTick","splitLine","splitArea"];function getAxisLineShape(polar,rExtent,angle){rExtent[1]>rExtent[0]&&(rExtent=rExtent.slice().reverse());var start=polar.coordToPoint([rExtent[0],angle]);var end=polar.coordToPoint([rExtent[1],angle]);return{x1:start[0],y1:start[1],x2:end[0],y2:end[1]}}function getRadiusIdx(polar){var radiusAxis=polar.getRadiusAxis();return radiusAxis.inverse?0:1}function fixAngleOverlap(list){var firstItem=list[0];var lastItem=list[list.length-1];if(firstItem&&lastItem&&Math.abs(Math.abs(firstItem.coord-lastItem.coord)-360)<0.0001){list.pop()}}AxisView.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(angleAxisModel,ecModel){this.group.removeAll();if(!angleAxisModel.get("show")){return}var angleAxis=angleAxisModel.axis;var polar=angleAxis.polar;var radiusExtent=polar.getRadiusAxis().getExtent();var ticksAngles=angleAxis.getTicksCoords();var labels=map(angleAxis.getViewLabels(),function(labelItem){var labelItem=clone(labelItem);
labelItem.coord=angleAxis.dataToCoord(labelItem.tickValue);return labelItem});fixAngleOverlap(labels);fixAngleOverlap(ticksAngles);each$1(elementList$1,function(name){if(angleAxisModel.get(name+".show")&&(!angleAxis.scale.isBlank()||name==="axisLine")){this["_"+name](angleAxisModel,polar,ticksAngles,radiusExtent,labels)}},this)},_axisLine:function(angleAxisModel,polar,ticksAngles,radiusExtent){var lineStyleModel=angleAxisModel.getModel("axisLine.lineStyle");var circle=new Circle({shape:{cx:polar.cx,cy:polar.cy,r:radiusExtent[getRadiusIdx(polar)]},style:lineStyleModel.getLineStyle(),z2:1,silent:true});circle.style.fill=null;this.group.add(circle)},_axisTick:function(angleAxisModel,polar,ticksAngles,radiusExtent){var tickModel=angleAxisModel.getModel("axisTick");var tickLen=(tickModel.get("inside")?-1:1)*tickModel.get("length");var radius=radiusExtent[getRadiusIdx(polar)];var lines=map(ticksAngles,function(tickAngleItem){return new Line({shape:getAxisLineShape(polar,[radius,radius+tickLen],tickAngleItem.coord)})});this.group.add(mergePath(lines,{style:defaults(tickModel.getModel("lineStyle").getLineStyle(),{stroke:angleAxisModel.get("axisLine.lineStyle.color")})}))},_axisLabel:function(angleAxisModel,polar,ticksAngles,radiusExtent,labels){var rawCategoryData=angleAxisModel.getCategories(true);var commonLabelModel=angleAxisModel.getModel("axisLabel");var labelMargin=commonLabelModel.get("margin");each$1(labels,function(labelItem,idx){var labelModel=commonLabelModel;var tickValue=labelItem.tickValue;var r=radiusExtent[getRadiusIdx(polar)];var p=polar.coordToPoint([r+labelMargin,labelItem.coord]);var cx=polar.cx;var cy=polar.cy;var labelTextAlign=Math.abs(p[0]-cx)/r<0.3?"center":(p[0]>cx?"left":"right");var labelTextVerticalAlign=Math.abs(p[1]-cy)/r<0.3?"middle":(p[1]>cy?"top":"bottom");if(rawCategoryData&&rawCategoryData[tickValue]&&rawCategoryData[tickValue].textStyle){labelModel=new Model(rawCategoryData[tickValue].textStyle,commonLabelModel,commonLabelModel.ecModel)}var textEl=new Text({silent:true});
this.group.add(textEl);setTextStyle(textEl.style,labelModel,{x:p[0],y:p[1],textFill:labelModel.getTextColor()||angleAxisModel.get("axisLine.lineStyle.color"),text:labelItem.formattedLabel,textAlign:labelTextAlign,textVerticalAlign:labelTextVerticalAlign})},this)},_splitLine:function(angleAxisModel,polar,ticksAngles,radiusExtent){var splitLineModel=angleAxisModel.getModel("splitLine");var lineStyleModel=splitLineModel.getModel("lineStyle");var lineColors=lineStyleModel.get("color");var lineCount=0;lineColors=lineColors instanceof Array?lineColors:[lineColors];var splitLines=[];for(var i=0;i<ticksAngles.length;i++){var colorIndex=(lineCount++)%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[];splitLines[colorIndex].push(new Line({shape:getAxisLineShape(polar,radiusExtent,ticksAngles[i].coord)}))}for(var i=0;i<splitLines.length;i++){this.group.add(mergePath(splitLines[i],{style:defaults({stroke:lineColors[i%lineColors.length]},lineStyleModel.getLineStyle()),silent:true,z:angleAxisModel.get("z")}))}},_splitArea:function(angleAxisModel,polar,ticksAngles,radiusExtent){if(!ticksAngles.length){return}var splitAreaModel=angleAxisModel.getModel("splitArea");var areaStyleModel=splitAreaModel.getModel("areaStyle");var areaColors=areaStyleModel.get("color");var lineCount=0;areaColors=areaColors instanceof Array?areaColors:[areaColors];var splitAreas=[];var RADIAN=Math.PI/180;var prevAngle=-ticksAngles[0].coord*RADIAN;var r0=Math.min(radiusExtent[0],radiusExtent[1]);var r1=Math.max(radiusExtent[0],radiusExtent[1]);var clockwise=angleAxisModel.get("clockwise");for(var i=1;i<ticksAngles.length;i++){var colorIndex=(lineCount++)%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[];splitAreas[colorIndex].push(new Sector({shape:{cx:polar.cx,cy:polar.cy,r0:r0,r:r1,startAngle:prevAngle,endAngle:-ticksAngles[i].coord*RADIAN,clockwise:clockwise},silent:true}));prevAngle=-ticksAngles[i].coord*RADIAN}for(var i=0;i<splitAreas.length;i++){this.group.add(mergePath(splitAreas[i],{style:defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),silent:true}))
}}});var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"];var selfBuilderAttrs$1=["splitLine","splitArea"];AxisView.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(radiusAxisModel,ecModel){this.group.removeAll();if(!radiusAxisModel.get("show")){return}var radiusAxis=radiusAxisModel.axis;var polar=radiusAxis.polar;var angleAxis=polar.getAngleAxis();var ticksCoords=radiusAxis.getTicksCoords();var axisAngle=angleAxis.getExtent()[0];var radiusExtent=radiusAxis.getExtent();var layout=layoutAxis(polar,radiusAxisModel,axisAngle);var axisBuilder=new AxisBuilder(radiusAxisModel,layout);each$1(axisBuilderAttrs$3,axisBuilder.add,axisBuilder);this.group.add(axisBuilder.getGroup());each$1(selfBuilderAttrs$1,function(name){if(radiusAxisModel.get(name+".show")&&!radiusAxis.scale.isBlank()){this["_"+name](radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords)}},this)},_splitLine:function(radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){var splitLineModel=radiusAxisModel.getModel("splitLine");var lineStyleModel=splitLineModel.getModel("lineStyle");var lineColors=lineStyleModel.get("color");var lineCount=0;lineColors=lineColors instanceof Array?lineColors:[lineColors];var splitLines=[];for(var i=0;i<ticksCoords.length;i++){var colorIndex=(lineCount++)%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[];splitLines[colorIndex].push(new Circle({shape:{cx:polar.cx,cy:polar.cy,r:ticksCoords[i].coord},silent:true}))}for(var i=0;i<splitLines.length;i++){this.group.add(mergePath(splitLines[i],{style:defaults({stroke:lineColors[i%lineColors.length],fill:null},lineStyleModel.getLineStyle()),silent:true}))}},_splitArea:function(radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){if(!ticksCoords.length){return}var splitAreaModel=radiusAxisModel.getModel("splitArea");var areaStyleModel=splitAreaModel.getModel("areaStyle");var areaColors=areaStyleModel.get("color");var lineCount=0;areaColors=areaColors instanceof Array?areaColors:[areaColors];
var splitAreas=[];var prevRadius=ticksCoords[0].coord;for(var i=1;i<ticksCoords.length;i++){var colorIndex=(lineCount++)%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[];splitAreas[colorIndex].push(new Sector({shape:{cx:polar.cx,cy:polar.cy,r0:prevRadius,r:ticksCoords[i].coord,startAngle:0,endAngle:Math.PI*2},silent:true}));prevRadius=ticksCoords[i].coord}for(var i=0;i<splitAreas.length;i++){this.group.add(mergePath(splitAreas[i],{style:defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),silent:true}))}}});function layoutAxis(polar,radiusAxisModel,axisAngle){return{position:[polar.cx,polar.cy],rotation:axisAngle/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:radiusAxisModel.getModel("axisLabel").get("rotate"),z2:1}}var PolarAxisPointer=BaseAxisPointer.extend({makeElOption:function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis;if(axis.dim==="angle"){this.animationThreshold=Math.PI/18}var polar=axis.polar;var otherAxis=polar.getOtherAxis(axis);var otherExtent=otherAxis.getExtent();var coordValue;coordValue=axis["dataTo"+capitalFirst(axis.dim)](value);var axisPointerType=axisPointerModel.get("type");if(axisPointerType&&axisPointerType!=="none"){var elStyle=buildElStyle(axisPointerModel);var pointerOption=pointerShapeBuilder$2[axisPointerType](axis,polar,coordValue,otherExtent,elStyle);pointerOption.style=elStyle;elOption.graphicKey=pointerOption.type;elOption.pointer=pointerOption}var labelMargin=axisPointerModel.get("label.margin");var labelPos=getLabelPosition(value,axisModel,axisPointerModel,polar,labelMargin);buildLabelElOption(elOption,axisModel,axisPointerModel,api,labelPos)}});function getLabelPosition(value,axisModel,axisPointerModel,polar,labelMargin){var axis=axisModel.axis;var coord=axis.dataToCoord(value);var axisAngle=polar.getAngleAxis().getExtent()[0];axisAngle=axisAngle/180*Math.PI;var radiusExtent=polar.getRadiusAxis().getExtent();var position;var align;var verticalAlign;
if(axis.dim==="radius"){var transform=create$1();rotate(transform,transform,axisAngle);translate(transform,transform,[polar.cx,polar.cy]);position=applyTransform$1([coord,-labelMargin],transform);var labelRotation=axisModel.getModel("axisLabel").get("rotate")||0;var labelLayout=AxisBuilder.innerTextLayout(axisAngle,labelRotation*Math.PI/180,-1);align=labelLayout.textAlign;verticalAlign=labelLayout.textVerticalAlign}else{var r=radiusExtent[1];position=polar.coordToPoint([r+labelMargin,coord]);var cx=polar.cx;var cy=polar.cy;align=Math.abs(position[0]-cx)/r<0.3?"center":(position[0]>cx?"left":"right");verticalAlign=Math.abs(position[1]-cy)/r<0.3?"middle":(position[1]>cy?"top":"bottom")}return{position:position,align:align,verticalAlign:verticalAlign}}var pointerShapeBuilder$2={line:function(axis,polar,coordValue,otherExtent,elStyle){return axis.dim==="angle"?{type:"Line",shape:makeLineShape(polar.coordToPoint([otherExtent[0],coordValue]),polar.coordToPoint([otherExtent[1],coordValue]))}:{type:"Circle",shape:{cx:polar.cx,cy:polar.cy,r:coordValue}}},shadow:function(axis,polar,coordValue,otherExtent,elStyle){var bandWidth=Math.max(1,axis.getBandWidth());var radian=Math.PI/180;return axis.dim==="angle"?{type:"Sector",shape:makeSectorShape(polar.cx,polar.cy,otherExtent[0],otherExtent[1],(-coordValue-bandWidth/2)*radian,(-coordValue+bandWidth/2)*radian)}:{type:"Sector",shape:makeSectorShape(polar.cx,polar.cy,coordValue-bandWidth/2,coordValue+bandWidth/2,0,Math.PI*2)}}};AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer);registerLayout(curry(barLayoutPolar,"bar"));extendComponentView({type:"polar"});var GeoModel=ComponentModel.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(option){ComponentModel.prototype.init.apply(this,arguments);defaultEmphasis(option,"label",["show"])},optionUpdated:function(){var option=this.option;var self=this;option.regions=geoCreator.getFilledRegions(option.regions,option.map,option.nameMap);this._optionModelMap=reduce(option.regions||[],function(optionModelMap,regionOpt){if(regionOpt.name){optionModelMap.set(regionOpt.name,new Model(regionOpt,self))
}return optionModelMap},createHashMap());this.updateSelectedMap(option.regions)},defaultOption:{zlevel:0,z:0,show:true,left:"center",top:"center",aspectScale:null,silent:false,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:false,color:"#000"},itemStyle:{borderWidth:0.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:true,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(name){return this._optionModelMap.get(name)||new Model(null,this,this.ecModel)},getFormattedLabel:function(name,status){var regionModel=this.getRegionModel(name);var formatter=regionModel.get("label."+status+".formatter");var params={name:name};if(typeof formatter==="function"){params.status=status;return formatter(params)}else{if(typeof formatter==="string"){return formatter.replace("{a}",name!=null?name:"")}}},setZoom:function(zoom){this.option.zoom=zoom},setCenter:function(center){this.option.center=center}});mixin(GeoModel,selectableMixin);extendComponentView({type:"geo",init:function(ecModel,api){var mapDraw=new MapDraw(api,true);this._mapDraw=mapDraw;this.group.add(mapDraw.group)},render:function(geoModel,ecModel,api,payload){if(payload&&payload.type==="geoToggleSelect"&&payload.from===this.uid){return}var mapDraw=this._mapDraw;if(geoModel.get("show")){mapDraw.draw(geoModel,ecModel,api,this,payload)}else{this._mapDraw.group.removeAll()}this.group.silent=geoModel.get("silent")},dispose:function(){this._mapDraw&&this._mapDraw.remove()}});function makeAction(method,actionInfo){actionInfo.update="updateView";registerAction(actionInfo,function(payload,ecModel){var selected={};ecModel.eachComponent({mainType:"geo",query:payload},function(geoModel){geoModel[method](payload.name);var geo=geoModel.coordinateSystem;each$1(geo.regions,function(region){selected[region.name]=geoModel.isSelected(region.name)||false})});return{selected:selected,name:payload.name}})}makeAction("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"});
makeAction("select",{type:"geoSelect",event:"geoselected"});makeAction("unSelect",{type:"geoUnSelect",event:"geounselected"});var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];var preprocessor$1=function(option,isNew){var brushComponents=option&&option.brush;if(!isArray(brushComponents)){brushComponents=brushComponents?[brushComponents]:[]}if(!brushComponents.length){return}var brushComponentSpecifiedBtns=[];each$1(brushComponents,function(brushOpt){var tbs=brushOpt.hasOwnProperty("toolbox")?brushOpt.toolbox:[];if(tbs instanceof Array){brushComponentSpecifiedBtns=brushComponentSpecifiedBtns.concat(tbs)}});var toolbox=option&&option.toolbox;if(isArray(toolbox)){toolbox=toolbox[0]}if(!toolbox){toolbox={feature:{}};option.toolbox=[toolbox]}var toolboxFeature=(toolbox.feature||(toolbox.feature={}));var toolboxBrush=toolboxFeature.brush||(toolboxFeature.brush={});var brushTypes=toolboxBrush.type||(toolboxBrush.type=[]);brushTypes.push.apply(brushTypes,brushComponentSpecifiedBtns);removeDuplicate(brushTypes);if(isNew&&!brushTypes.length){brushTypes.push.apply(brushTypes,DEFAULT_TOOLBOX_BTNS)}};function removeDuplicate(arr){var map$$1={};each$1(arr,function(val){map$$1[val]=1});arr.length=0;each$1(map$$1,function(flag,val){arr.push(val)})}var each$19=each$1;function hasKeys(obj){if(obj){for(var name in obj){if(obj.hasOwnProperty(name)){return true}}}}function createVisualMappings(option,stateList,supplementVisualOption){var visualMappings={};each$19(stateList,function(state){var mappings=visualMappings[state]=createMappings();each$19(option[state],function(visualData,visualType){if(!VisualMapping.isValidType(visualType)){return}var mappingOption={type:visualType,visual:visualData};supplementVisualOption&&supplementVisualOption(mappingOption,state);mappings[visualType]=new VisualMapping(mappingOption);if(visualType==="opacity"){mappingOption=clone(mappingOption);mappingOption.type="colorAlpha";mappings.__hidden.__alphaForOpacity=new VisualMapping(mappingOption)}})});
return visualMappings;function createMappings(){var Creater=function(){};Creater.prototype.__hidden=Creater.prototype;var obj=new Creater();return obj}}function replaceVisualOption(thisOption,newOption,keys){var has;each$1(keys,function(key){if(newOption.hasOwnProperty(key)&&hasKeys(newOption[key])){has=true}});has&&each$1(keys,function(key){if(newOption.hasOwnProperty(key)&&hasKeys(newOption[key])){thisOption[key]=clone(newOption[key])}else{delete thisOption[key]}})}function applyVisual(stateList,visualMappings,data,getValueState,scope,dimension){var visualTypesMap={};each$1(stateList,function(state){var visualTypes=VisualMapping.prepareVisualTypes(visualMappings[state]);visualTypesMap[state]=visualTypes});var dataIndex;function getVisual(key){return data.getItemVisual(dataIndex,key)}function setVisual(key,value){data.setItemVisual(dataIndex,key,value)}if(dimension==null){data.each(eachItem)}else{data.each([dimension],eachItem)}function eachItem(valueOrIndex,index){dataIndex=dimension==null?valueOrIndex:index;var rawDataItem=data.getRawDataItem(dataIndex);if(rawDataItem&&rawDataItem.visualMap===false){return}var valueState=getValueState.call(scope,valueOrIndex);var mappings=visualMappings[valueState];var visualTypes=visualTypesMap[valueState];for(var i=0,len=visualTypes.length;i<len;i++){var type=visualTypes[i];mappings[type]&&mappings[type].applyVisual(valueOrIndex,getVisual,setVisual)}}}function incrementalApplyVisual(stateList,visualMappings,getValueState,dim){var visualTypesMap={};each$1(stateList,function(state){var visualTypes=VisualMapping.prepareVisualTypes(visualMappings[state]);visualTypesMap[state]=visualTypes});function progress(params,data){if(dim!=null){dim=data.getDimension(dim)}function getVisual(key){return data.getItemVisual(dataIndex,key)}function setVisual(key,value){data.setItemVisual(dataIndex,key,value)}var dataIndex;while((dataIndex=params.next())!=null){var rawDataItem=data.getRawDataItem(dataIndex);if(rawDataItem&&rawDataItem.visualMap===false){continue
}var value=dim!=null?data.get(dim,dataIndex,true):dataIndex;var valueState=getValueState(value);var mappings=visualMappings[valueState];var visualTypes=visualTypesMap[valueState];for(var i=0,len=visualTypes.length;i<len;i++){var type=visualTypes[i];mappings[type]&&mappings[type].applyVisual(value,getVisual,setVisual)}}}return{progress:progress}}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(itemLayout,selectors,area){return itemLayout&&area.boundingRect.contain(itemLayout[0],itemLayout[1])},rect:function(itemLayout,selectors,area){return itemLayout&&area.boundingRect.intersect(itemLayout)}},polygon:{point:function(itemLayout,selectors,area){return itemLayout&&area.boundingRect.contain(itemLayout[0],itemLayout[1])&&contain$1(area.range,itemLayout[0],itemLayout[1])},rect:function(itemLayout,selectors,area){var points=area.range;if(!itemLayout||points.length<=1){return false}var x=itemLayout.x;var y=itemLayout.y;var width=itemLayout.width;var height=itemLayout.height;var p=points[0];if(contain$1(points,x,y)||contain$1(points,x+width,y)||contain$1(points,x,y+height)||contain$1(points,x+width,y+height)||BoundingRect.create(itemLayout).contain(p[0],p[1])||lineIntersectPolygon(x,y,x+width,y,points)||lineIntersectPolygon(x,y,x,y+height,points)||lineIntersectPolygon(x+width,y,x+width,y+height,points)||lineIntersectPolygon(x,y+height,x+width,y+height,points)){return true}}}};function getLineSelectors(xyIndex){var xy=["x","y"];var wh=["width","height"];return{point:function(itemLayout,selectors,area){if(itemLayout){var range=area.range;var p=itemLayout[xyIndex];return inLineRange(p,range)}},rect:function(itemLayout,selectors,area){if(itemLayout){var range=area.range;var layoutRange=[itemLayout[xy[xyIndex]],itemLayout[xy[xyIndex]]+itemLayout[wh[xyIndex]]];layoutRange[1]<layoutRange[0]&&layoutRange.reverse();return inLineRange(layoutRange[0],range)||inLineRange(layoutRange[1],range)||inLineRange(range[0],layoutRange)||inLineRange(range[1],layoutRange)
}}}}function inLineRange(p,range){return range[0]<=p&&p<=range[1]}function lineIntersectPolygon(lx,ly,l2x,l2y,points){for(var i=0,p2=points[points.length-1];i<points.length;i++){var p=points[i];if(lineIntersect(lx,ly,l2x,l2y,p[0],p[1],p2[0],p2[1])){return true}p2=p}}function lineIntersect(a1x,a1y,a2x,a2y,b1x,b1y,b2x,b2y){var delta=determinant(a2x-a1x,b1x-b2x,a2y-a1y,b1y-b2y);if(nearZero(delta)){return false}var namenda=determinant(b1x-a1x,b1x-b2x,b1y-a1y,b1y-b2y)/delta;if(namenda<0||namenda>1){return false}var miu=determinant(a2x-a1x,b1x-a1x,a2y-a1y,b1y-a1y)/delta;if(miu<0||miu>1){return false}return true}function nearZero(val){return val<=(0.000001)&&val>=-(0.000001)}function determinant(v1,v2,v3,v4){return v1*v4-v2*v3}var each$20=each$1;var indexOf$1=indexOf;var curry$5=curry;var COORD_CONVERTS=["dataToPoint","pointToData"];var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function BrushTargetManager(option,ecModel,opt){var targetInfoList=this._targetInfoList=[];var info={};var foundCpts=parseFinder$1(ecModel,option);each$20(targetInfoBuilders,function(builder,type){if(!opt||!opt.include||indexOf$1(opt.include,type)>=0){builder(foundCpts,targetInfoList,info)}})}var proto$2=BrushTargetManager.prototype;proto$2.setOutputRanges=function(areas,ecModel){this.matchOutputRanges(areas,ecModel,function(area,coordRange,coordSys){(area.coordRanges||(area.coordRanges=[])).push(coordRange);if(!area.coordRange){area.coordRange=coordRange;var result=coordConvert[area.brushType](0,coordSys,coordRange);area.__rangeOffset={offset:diffProcessor[area.brushType](result.values,area.range,[1,1]),xyMinMax:result.xyMinMax}}})};proto$2.matchOutputRanges=function(areas,ecModel,cb){each$20(areas,function(area){var targetInfo=this.findTargetInfo(area,ecModel);if(targetInfo&&targetInfo!==true){each$1(targetInfo.coordSyses,function(coordSys){var result=coordConvert[area.brushType](1,coordSys,area.range);cb(area,result.values,coordSys,ecModel)
})}},this)};proto$2.setInputRanges=function(areas,ecModel){each$20(areas,function(area){var targetInfo=this.findTargetInfo(area,ecModel);if(__DEV__){assert$1(!targetInfo||targetInfo===true||area.coordRange,"coordRange must be specified when coord index specified.");assert$1(!targetInfo||targetInfo!==true||area.range,"range must be specified in global brush.")}area.range=area.range||[];if(targetInfo&&targetInfo!==true){area.panelId=targetInfo.panelId;var result=coordConvert[area.brushType](0,targetInfo.coordSys,area.coordRange);var rangeOffset=area.__rangeOffset;area.range=rangeOffset?diffProcessor[area.brushType](result.values,rangeOffset.offset,getScales(result.xyMinMax,rangeOffset.xyMinMax)):result.values}},this)};proto$2.makePanelOpts=function(api,getDefaultBrushType){return map(this._targetInfoList,function(targetInfo){var rect=targetInfo.getPanelRect();return{panelId:targetInfo.panelId,defaultBrushType:getDefaultBrushType&&getDefaultBrushType(targetInfo),clipPath:makeRectPanelClipPath(rect),isTargetByCursor:makeRectIsTargetByCursor(rect,api,targetInfo.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(rect)}})};proto$2.controlSeries=function(area,seriesModel,ecModel){var targetInfo=this.findTargetInfo(area,ecModel);return targetInfo===true||(targetInfo&&indexOf$1(targetInfo.coordSyses,seriesModel.coordinateSystem)>=0)};proto$2.findTargetInfo=function(area,ecModel){var targetInfoList=this._targetInfoList;var foundCpts=parseFinder$1(ecModel,area);for(var i=0;i<targetInfoList.length;i++){var targetInfo=targetInfoList[i];var areaPanelId=area.panelId;if(areaPanelId){if(targetInfo.panelId===areaPanelId){return targetInfo}}else{for(var i=0;i<targetInfoMatchers.length;i++){if(targetInfoMatchers[i](foundCpts,targetInfo)){return targetInfo}}}}return true};function formatMinMax(minMax){minMax[0]>minMax[1]&&minMax.reverse();return minMax}function parseFinder$1(ecModel,option){return parseFinder(ecModel,option,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(foundCpts,targetInfoList){var xAxisModels=foundCpts.xAxisModels;
var yAxisModels=foundCpts.yAxisModels;var gridModels=foundCpts.gridModels;var gridModelMap=createHashMap();var xAxesHas={};var yAxesHas={};if(!xAxisModels&&!yAxisModels&&!gridModels){return}each$20(xAxisModels,function(axisModel){var gridModel=axisModel.axis.grid.model;gridModelMap.set(gridModel.id,gridModel);xAxesHas[gridModel.id]=true});each$20(yAxisModels,function(axisModel){var gridModel=axisModel.axis.grid.model;gridModelMap.set(gridModel.id,gridModel);yAxesHas[gridModel.id]=true});each$20(gridModels,function(gridModel){gridModelMap.set(gridModel.id,gridModel);xAxesHas[gridModel.id]=true;yAxesHas[gridModel.id]=true});gridModelMap.each(function(gridModel){var grid=gridModel.coordinateSystem;var cartesians=[];each$20(grid.getCartesians(),function(cartesian,index){if(indexOf$1(xAxisModels,cartesian.getAxis("x").model)>=0||indexOf$1(yAxisModels,cartesian.getAxis("y").model)>=0){cartesians.push(cartesian)}});targetInfoList.push({panelId:"grid--"+gridModel.id,gridModel:gridModel,coordSysModel:gridModel,coordSys:cartesians[0],coordSyses:cartesians,getPanelRect:panelRectBuilder.grid,xAxisDeclared:xAxesHas[gridModel.id],yAxisDeclared:yAxesHas[gridModel.id]})})},geo:function(foundCpts,targetInfoList){each$20(foundCpts.geoModels,function(geoModel){var coordSys=geoModel.coordinateSystem;targetInfoList.push({panelId:"geo--"+geoModel.id,geoModel:geoModel,coordSysModel:geoModel,coordSys:coordSys,coordSyses:[coordSys],getPanelRect:panelRectBuilder.geo})})}};var targetInfoMatchers=[function(foundCpts,targetInfo){var xAxisModel=foundCpts.xAxisModel;var yAxisModel=foundCpts.yAxisModel;var gridModel=foundCpts.gridModel;!gridModel&&xAxisModel&&(gridModel=xAxisModel.axis.grid.model);!gridModel&&yAxisModel&&(gridModel=yAxisModel.axis.grid.model);return gridModel&&gridModel===targetInfo.gridModel},function(foundCpts,targetInfo){var geoModel=foundCpts.geoModel;return geoModel&&geoModel===targetInfo.geoModel}];var panelRectBuilder={grid:function(){return this.coordSys.grid.getRect().clone()
},geo:function(){var coordSys=this.coordSys;var rect=coordSys.getBoundingRect().clone();rect.applyTransform(getTransform(coordSys));return rect}};var coordConvert={lineX:curry$5(axisConvert,0),lineY:curry$5(axisConvert,1),rect:function(to,coordSys,rangeOrCoordRange){var xminymin=coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][0],rangeOrCoordRange[1][0]]);var xmaxymax=coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][1],rangeOrCoordRange[1][1]]);var values=[formatMinMax([xminymin[0],xmaxymax[0]]),formatMinMax([xminymin[1],xmaxymax[1]])];return{values:values,xyMinMax:values}},polygon:function(to,coordSys,rangeOrCoordRange){var xyMinMax=[[Infinity,-Infinity],[Infinity,-Infinity]];var values=map(rangeOrCoordRange,function(item){var p=coordSys[COORD_CONVERTS[to]](item);xyMinMax[0][0]=Math.min(xyMinMax[0][0],p[0]);xyMinMax[1][0]=Math.min(xyMinMax[1][0],p[1]);xyMinMax[0][1]=Math.max(xyMinMax[0][1],p[0]);xyMinMax[1][1]=Math.max(xyMinMax[1][1],p[1]);return p});return{values:values,xyMinMax:xyMinMax}}};function axisConvert(axisNameIndex,to,coordSys,rangeOrCoordRange){if(__DEV__){assert$1(coordSys.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.")}var axis=coordSys.getAxis(["x","y"][axisNameIndex]);var values=formatMinMax(map([0,1],function(i){return to?axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i])):axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]))}));var xyMinMax=[];xyMinMax[axisNameIndex]=values;xyMinMax[1-axisNameIndex]=[NaN,NaN];return{values:values,xyMinMax:xyMinMax}}var diffProcessor={lineX:curry$5(axisDiffProcessor,0),lineY:curry$5(axisDiffProcessor,1),rect:function(values,refer,scales){return[[values[0][0]-scales[0]*refer[0][0],values[0][1]-scales[0]*refer[0][1]],[values[1][0]-scales[1]*refer[1][0],values[1][1]-scales[1]*refer[1][1]]]},polygon:function(values,refer,scales){return map(values,function(item,idx){return[item[0]-scales[0]*refer[idx][0],item[1]-scales[1]*refer[idx][1]]})}};function axisDiffProcessor(axisNameIndex,values,refer,scales){return[values[0]-scales[axisNameIndex]*refer[0],values[1]-scales[axisNameIndex]*refer[1]]
}function getScales(xyMinMaxCurr,xyMinMaxOrigin){var sizeCurr=getSize(xyMinMaxCurr);var sizeOrigin=getSize(xyMinMaxOrigin);var scales=[sizeCurr[0]/sizeOrigin[0],sizeCurr[1]/sizeOrigin[1]];isNaN(scales[0])&&(scales[0]=1);isNaN(scales[1])&&(scales[1]=1);return scales}function getSize(xyMinMax){return xyMinMax?[xyMinMax[0][1]-xyMinMax[0][0],xyMinMax[1][1]-xyMinMax[1][0]]:[NaN,NaN]}var STATE_LIST=["inBrush","outOfBrush"];var DISPATCH_METHOD="__ecBrushSelect";var DISPATCH_FLAG="__ecInBrushSelectEvent";var PRIORITY_BRUSH=PRIORITY.VISUAL.BRUSH;registerLayout(PRIORITY_BRUSH,function(ecModel,api,payload){ecModel.eachComponent({mainType:"brush"},function(brushModel){payload&&payload.type==="takeGlobalCursor"&&brushModel.setBrushOption(payload.key==="brush"?payload.brushOption:{brushType:false});var brushTargetManager=brushModel.brushTargetManager=new BrushTargetManager(brushModel.option,ecModel);brushTargetManager.setInputRanges(brushModel.areas,ecModel)})});registerVisual(PRIORITY_BRUSH,function(ecModel,api,payload){var brushSelected=[];var throttleType;var throttleDelay;ecModel.eachComponent({mainType:"brush"},function(brushModel,brushIndex){var thisBrushSelected={brushId:brushModel.id,brushIndex:brushIndex,brushName:brushModel.name,areas:clone(brushModel.areas),selected:[]};brushSelected.push(thisBrushSelected);var brushOption=brushModel.option;var brushLink=brushOption.brushLink;var linkedSeriesMap=[];var selectedDataIndexForLink=[];var rangeInfoBySeries=[];var hasBrushExists=0;if(!brushIndex){throttleType=brushOption.throttleType;throttleDelay=brushOption.throttleDelay}var areas=map(brushModel.areas,function(area){return bindSelector(defaults({boundingRect:boundingRectBuilders[area.brushType](area)},area))});var visualMappings=createVisualMappings(brushModel.option,STATE_LIST,function(mappingOption){mappingOption.mappingMethod="fixed"});isArray(brushLink)&&each$1(brushLink,function(seriesIndex){linkedSeriesMap[seriesIndex]=1});function linkOthers(seriesIndex){return brushLink==="all"||linkedSeriesMap[seriesIndex]
}function brushed(rangeInfoList){return !!rangeInfoList.length}ecModel.eachSeries(function(seriesModel,seriesIndex){var rangeInfoList=rangeInfoBySeries[seriesIndex]=[];seriesModel.subType==="parallel"?stepAParallel(seriesModel,seriesIndex,rangeInfoList):stepAOthers(seriesModel,seriesIndex,rangeInfoList)});function stepAParallel(seriesModel,seriesIndex){var coordSys=seriesModel.coordinateSystem;hasBrushExists|=coordSys.hasAxisBrushed();linkOthers(seriesIndex)&&coordSys.eachActiveState(seriesModel.getData(),function(activeState,dataIndex){activeState==="active"&&(selectedDataIndexForLink[dataIndex]=1)})}function stepAOthers(seriesModel,seriesIndex,rangeInfoList){var selectorsByBrushType=getSelectorsByBrushType(seriesModel);if(!selectorsByBrushType||brushModelNotControll(brushModel,seriesIndex)){return}each$1(areas,function(area){selectorsByBrushType[area.brushType]&&brushModel.brushTargetManager.controlSeries(area,seriesModel,ecModel)&&rangeInfoList.push(area);hasBrushExists|=brushed(rangeInfoList)});if(linkOthers(seriesIndex)&&brushed(rangeInfoList)){var data=seriesModel.getData();data.each(function(dataIndex){if(checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex)){selectedDataIndexForLink[dataIndex]=1}})}}ecModel.eachSeries(function(seriesModel,seriesIndex){var seriesBrushSelected={seriesId:seriesModel.id,seriesIndex:seriesIndex,seriesName:seriesModel.name,dataIndex:[]};thisBrushSelected.selected.push(seriesBrushSelected);var selectorsByBrushType=getSelectorsByBrushType(seriesModel);var rangeInfoList=rangeInfoBySeries[seriesIndex];var data=seriesModel.getData();var getValueState=linkOthers(seriesIndex)?function(dataIndex){return selectedDataIndexForLink[dataIndex]?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),"inBrush"):"outOfBrush"}:function(dataIndex){return checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex)?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),"inBrush"):"outOfBrush"};(linkOthers(seriesIndex)?hasBrushExists:brushed(rangeInfoList))&&applyVisual(STATE_LIST,visualMappings,data,getValueState)
})});dispatchAction(api,throttleType,throttleDelay,brushSelected,payload)});function dispatchAction(api,throttleType,throttleDelay,brushSelected,payload){if(!payload){return}var zr=api.getZr();if(zr[DISPATCH_FLAG]){return}if(!zr[DISPATCH_METHOD]){zr[DISPATCH_METHOD]=doDispatch}var fn=createOrUpdate(zr,DISPATCH_METHOD,throttleDelay,throttleType);fn(api,brushSelected)}function doDispatch(api,brushSelected){if(!api.isDisposed()){var zr=api.getZr();zr[DISPATCH_FLAG]=true;api.dispatchAction({type:"brushSelect",batch:brushSelected});zr[DISPATCH_FLAG]=false}}function checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex){for(var i=0,len=rangeInfoList.length;i<len;i++){var area=rangeInfoList[i];if(selectorsByBrushType[area.brushType](dataIndex,data,area.selectors,area)){return true}}}function getSelectorsByBrushType(seriesModel){var brushSelector=seriesModel.brushSelector;if(isString(brushSelector)){var sels=[];each$1(selector,function(selectorsByElementType,brushType){sels[brushType]=function(dataIndex,data,selectors,area){var itemLayout=data.getItemLayout(dataIndex);return selectorsByElementType[brushSelector](itemLayout,selectors,area)}});return sels}else{if(isFunction$1(brushSelector)){var bSelector={};each$1(selector,function(sel,brushType){bSelector[brushType]=brushSelector});return bSelector}}return brushSelector}function brushModelNotControll(brushModel,seriesIndex){var seriesIndices=brushModel.option.seriesIndex;return seriesIndices!=null&&seriesIndices!=="all"&&(isArray(seriesIndices)?indexOf(seriesIndices,seriesIndex)<0:seriesIndex!==seriesIndices)}function bindSelector(area){var selectors=area.selectors={};each$1(selector[area.brushType],function(selFn,elType){selectors[elType]=function(itemLayout){return selFn(itemLayout,selectors,area)}});return area}var boundingRectBuilders={lineX:noop,lineY:noop,rect:function(area){return getBoundingRectFromMinMax(area.range)},polygon:function(area){var minMax;var range=area.range;for(var i=0,len=range.length;i<len;i++){minMax=minMax||[[Infinity,-Infinity],[Infinity,-Infinity]];
var rg=range[i];rg[0]<minMax[0][0]&&(minMax[0][0]=rg[0]);rg[0]>minMax[0][1]&&(minMax[0][1]=rg[0]);rg[1]<minMax[1][0]&&(minMax[1][0]=rg[1]);rg[1]>minMax[1][1]&&(minMax[1][1]=rg[1])}return minMax&&getBoundingRectFromMinMax(minMax)}};function getBoundingRectFromMinMax(minMax){return new BoundingRect(minMax[0][0],minMax[1][0],minMax[0][1]-minMax[0][0],minMax[1][1]-minMax[1][0])}var DEFAULT_OUT_OF_BRUSH_COLOR=["#ddd"];var BrushModel=extendComponentModel({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:true,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:true,z:10000},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(newOption,isInit){var thisOption=this.option;!isInit&&replaceVisualOption(thisOption,newOption,["inBrush","outOfBrush"]);var inBrush=thisOption.inBrush=thisOption.inBrush||{};thisOption.outOfBrush=thisOption.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR};if(!inBrush.hasOwnProperty("liftZ")){inBrush.liftZ=5}},setAreas:function(areas){if(__DEV__){assert$1(isArray(areas));each$1(areas,function(area){assert$1(area.brushType,"Illegal areas")})}if(!areas){return}this.areas=map(areas,function(area){return generateBrushOption(this.option,area)},this)},setBrushOption:function(brushOption){this.brushOption=generateBrushOption(this.option,brushOption);this.brushType=this.brushOption.brushType}});function generateBrushOption(option,brushOption){return merge({brushType:option.brushType,brushMode:option.brushMode,transformable:option.transformable,brushStyle:new Model(option.brushStyle).getItemStyle(),removeOnClick:option.removeOnClick,z:option.z},brushOption,true)}extendComponentView({type:"brush",init:function(ecModel,api){this.ecModel=ecModel;this.api=api;this.model;
(this._brushController=new BrushController(api.getZr())).on("brush",bind(this._onBrush,this)).mount()},render:function(brushModel){this.model=brushModel;return updateController.apply(this,arguments)},updateTransform:updateController,updateView:updateController,dispose:function(){this._brushController.dispose()},_onBrush:function(areas,opt){var modelId=this.model.id;this.model.brushTargetManager.setOutputRanges(areas,this.ecModel);(!opt.isEnd||opt.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:modelId,areas:clone(areas),$from:modelId})}});function updateController(brushModel,ecModel,api,payload){(!payload||payload.$from!==brushModel.id)&&this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice())}registerAction({type:"brush",event:"brush"},function(payload,ecModel){ecModel.eachComponent({mainType:"brush",query:payload},function(brushModel){brushModel.setAreas(payload.areas)})});registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){});var features={};function register$1(name,ctor){features[name]=ctor}function get$1(name){return features[name]}var brushLang=lang.toolbox.brush;function Brush(model,ecModel,api){this.model=model;this.ecModel=ecModel;this.api=api;this._brushType;this._brushMode}Brush.defaultOption={show:true,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:clone(brushLang.title)};
var proto$3=Brush.prototype;proto$3.render=proto$3.updateView=function(featureModel,ecModel,api){var brushType;var brushMode;var isBrushed;ecModel.eachComponent({mainType:"brush"},function(brushModel){brushType=brushModel.brushType;brushMode=brushModel.brushOption.brushMode||"single";isBrushed|=brushModel.areas.length});this._brushType=brushType;this._brushMode=brushMode;each$1(featureModel.get("type",true),function(type){featureModel.setIconStatus(type,(type==="keep"?brushMode==="multiple":type==="clear"?isBrushed:type===brushType)?"emphasis":"normal")})};proto$3.getIcons=function(){var model=this.model;var availableIcons=model.get("icon",true);var icons={};each$1(model.get("type",true),function(type){if(availableIcons[type]){icons[type]=availableIcons[type]}});return icons};proto$3.onclick=function(ecModel,api,type){var brushType=this._brushType;var brushMode=this._brushMode;if(type==="clear"){api.dispatchAction({type:"axisAreaSelect",intervals:[]});api.dispatchAction({type:"brush",command:"clear",areas:[]})}else{api.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:type==="keep"?brushType:(brushType===type?false:type),brushMode:type==="keep"?(brushMode==="multiple"?"single":"multiple"):brushMode}})}};register$1("brush",Brush);registerPreprocessor(preprocessor$1);var PROXIMATE_ONE_DAY=86400000;function Calendar(calendarModel,ecModel,api){this._model=calendarModel}Calendar.prototype={constructor:Calendar,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(date){date=parseDate(date);var y=date.getFullYear();var m=date.getMonth()+1;m=m<10?"0"+m:m;var d=date.getDate();
d=d<10?"0"+d:d;var day=date.getDay();day=Math.abs((day+7-this.getFirstDayOfWeek())%7);return{y:y,m:m,d:d,day:day,time:date.getTime(),formatedDate:y+"-"+m+"-"+d,date:date}},getNextNDay:function(date,n){n=n||0;if(n===0){return this.getDateInfo(date)}date=new Date(this.getDateInfo(date).time);date.setDate(date.getDate()+n);return this.getDateInfo(date)},update:function(ecModel,api){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay");this._orient=this._model.get("orient");this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0;this._rangeInfo=this._getRangeInfo(this._initRangeOption());var weeks=this._rangeInfo.weeks||1;var whNames=["width","height"];var cellSize=this._model.get("cellSize").slice();var layoutParams=this._model.getBoxLayoutParams();var cellNumbers=this._orient==="horizontal"?[weeks,7]:[7,weeks];each$1([0,1],function(idx){if(cellSizeSpecified(cellSize,idx)){layoutParams[whNames[idx]]=cellSize[idx]*cellNumbers[idx]}});var whGlobal={width:api.getWidth(),height:api.getHeight()};var calendarRect=this._rect=getLayoutRect(layoutParams,whGlobal);each$1([0,1],function(idx){if(!cellSizeSpecified(cellSize,idx)){cellSize[idx]=calendarRect[whNames[idx]]/cellNumbers[idx]}});function cellSizeSpecified(cellSize,idx){return cellSize[idx]!=null&&cellSize[idx]!=="auto"}this._sw=cellSize[0];this._sh=cellSize[1]},dataToPoint:function(data,clamp){isArray(data)&&(data=data[0]);clamp==null&&(clamp=true);var dayInfo=this.getDateInfo(data);var range=this._rangeInfo;var date=dayInfo.formatedDate;if(clamp&&!(dayInfo.time>=range.start.time&&dayInfo.time<range.end.time+PROXIMATE_ONE_DAY)){return[NaN,NaN]}var week=dayInfo.day;var nthWeek=this._getRangeInfo([range.start.time,date]).nthWeek;if(this._orient==="vertical"){return[this._rect.x+week*this._sw+this._sw/2,this._rect.y+nthWeek*this._sh+this._sh/2]}return[this._rect.x+nthWeek*this._sw+this._sw/2,this._rect.y+week*this._sh+this._sh/2]},pointToData:function(point){var date=this.pointToDate(point);
return date&&date.time},dataToRect:function(data,clamp){var point=this.dataToPoint(data,clamp);return{contentShape:{x:point[0]-(this._sw-this._lineWidth)/2,y:point[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:point,tl:[point[0]-this._sw/2,point[1]-this._sh/2],tr:[point[0]+this._sw/2,point[1]-this._sh/2],br:[point[0]+this._sw/2,point[1]+this._sh/2],bl:[point[0]-this._sw/2,point[1]+this._sh/2]}},pointToDate:function(point){var nthX=Math.floor((point[0]-this._rect.x)/this._sw)+1;var nthY=Math.floor((point[1]-this._rect.y)/this._sh)+1;var range=this._rangeInfo.range;if(this._orient==="vertical"){return this._getDateByWeeksAndDay(nthY,nthX-1,range)}return this._getDateByWeeksAndDay(nthX,nthY-1,range)},convertToPixel:curry(doConvert$2,"dataToPoint"),convertFromPixel:curry(doConvert$2,"pointToData"),_initRangeOption:function(){var range=this._model.get("range");var rg=range;if(isArray(rg)&&rg.length===1){rg=rg[0]}if(/^\d{4}$/.test(rg)){range=[rg+"-01-01",rg+"-12-31"]}if(/^\d{4}[\/|-]\d{1,2}$/.test(rg)){var start=this.getDateInfo(rg);var firstDay=start.date;firstDay.setMonth(firstDay.getMonth()+1);var end=this.getNextNDay(firstDay,-1);range=[start.formatedDate,end.formatedDate]}if(/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(rg)){range=[rg,rg]}var tmp=this._getRangeInfo(range);if(tmp.start.time>tmp.end.time){range.reverse()}return range},_getRangeInfo:function(range){range=[this.getDateInfo(range[0]),this.getDateInfo(range[1])];var reversed;if(range[0].time>range[1].time){reversed=true;range.reverse()}var allDay=Math.floor(range[1].time/PROXIMATE_ONE_DAY)-Math.floor(range[0].time/PROXIMATE_ONE_DAY)+1;var date=new Date(range[0].time);var startDateNum=date.getDate();var endDateNum=range[1].date.getDate();date.setDate(startDateNum+allDay-1);if(date.getDate()!==endDateNum){var sign=date.getTime()-range[1].time>0?1:-1;while(date.getDate()!==endDateNum&&(date.getTime()-range[1].time)*sign>0){allDay-=sign;date.setDate(startDateNum+allDay-1)
}}var weeks=Math.floor((allDay+range[0].day+6)/7);var nthWeek=reversed?-weeks+1:weeks-1;reversed&&range.reverse();return{range:[range[0].formatedDate,range[1].formatedDate],start:range[0],end:range[1],allDay:allDay,weeks:weeks,nthWeek:nthWeek,fweek:range[0].day,lweek:range[1].day}},_getDateByWeeksAndDay:function(nthWeek,day,range){var rangeInfo=this._getRangeInfo(range);if(nthWeek>rangeInfo.weeks||(nthWeek===0&&day<rangeInfo.fweek)||(nthWeek===rangeInfo.weeks&&day>rangeInfo.lweek)){return false}var nthDay=(nthWeek-1)*7-rangeInfo.fweek+day;var date=new Date(rangeInfo.start.time);date.setDate(rangeInfo.start.d+nthDay);return this.getDateInfo(date)}};Calendar.dimensions=Calendar.prototype.dimensions;Calendar.getDimensionsInfo=Calendar.prototype.getDimensionsInfo;Calendar.create=function(ecModel,api){var calendarList=[];ecModel.eachComponent("calendar",function(calendarModel){var calendar=new Calendar(calendarModel,ecModel,api);calendarList.push(calendar);calendarModel.coordinateSystem=calendar});ecModel.eachSeries(function(calendarSeries){if(calendarSeries.get("coordinateSystem")==="calendar"){calendarSeries.coordinateSystem=calendarList[calendarSeries.get("calendarIndex")||0]}});return calendarList};function doConvert$2(methodName,ecModel,finder,value){var calendarModel=finder.calendarModel;var seriesModel=finder.seriesModel;var coordSys=calendarModel?calendarModel.coordinateSystem:seriesModel?seriesModel.coordinateSystem:null;return coordSys===this?coordSys[methodName](value):null}CoordinateSystemManager.register("calendar",Calendar);var CalendarModel=ComponentModel.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:true,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:true,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:true,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:true,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(option,parentModel,ecModel,extraOpt){var inputPositionParams=getLayoutParams(option);
CalendarModel.superApply(this,"init",arguments);mergeAndNormalizeLayoutParams$1(option,inputPositionParams)},mergeOption:function(option,extraOpt){CalendarModel.superApply(this,"mergeOption",arguments);mergeAndNormalizeLayoutParams$1(this.option,option)}});function mergeAndNormalizeLayoutParams$1(target,raw){var cellSize=target.cellSize;if(!isArray(cellSize)){cellSize=target.cellSize=[cellSize,cellSize]}else{if(cellSize.length===1){cellSize[1]=cellSize[0]}}var ignoreSize=map([0,1],function(hvIdx){if(sizeCalculable(raw,hvIdx)){cellSize[hvIdx]="auto"}return cellSize[hvIdx]!=null&&cellSize[hvIdx]!=="auto"});mergeLayoutParam(target,raw,{type:"box",ignoreSize:ignoreSize})}var MONTH_TEXT={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["","","","","","","","","","","",""]};var WEEK_TEXT={EN:["S","M","T","W","T","F","S"],CN:["","","","","","",""]};extendComponentView({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(calendarModel,ecModel,api){var group=this.group;group.removeAll();var coordSys=calendarModel.coordinateSystem;var rangeData=coordSys.getRangeInfo();var orient=coordSys.getOrient();this._renderDayRect(calendarModel,rangeData,group);this._renderLines(calendarModel,rangeData,orient,group);this._renderYearText(calendarModel,rangeData,orient,group);this._renderMonthText(calendarModel,orient,group);this._renderWeekText(calendarModel,rangeData,orient,group)},_renderDayRect:function(calendarModel,rangeData,group){var coordSys=calendarModel.coordinateSystem;var itemRectStyleModel=calendarModel.getModel("itemStyle").getItemStyle();var sw=coordSys.getCellWidth();var sh=coordSys.getCellHeight();for(var i=rangeData.start.time;i<=rangeData.end.time;i=coordSys.getNextNDay(i,1).time){var point=coordSys.dataToRect([i],false).tl;var rect=new Rect({shape:{x:point[0],y:point[1],width:sw,height:sh},cursor:"default",style:itemRectStyleModel});group.add(rect)}},_renderLines:function(calendarModel,rangeData,orient,group){var self=this;
var coordSys=calendarModel.coordinateSystem;var lineStyleModel=calendarModel.getModel("splitLine.lineStyle").getLineStyle();var show=calendarModel.get("splitLine.show");var lineWidth=lineStyleModel.lineWidth;this._tlpoints=[];this._blpoints=[];this._firstDayOfMonth=[];this._firstDayPoints=[];var firstDay=rangeData.start;for(var i=0;firstDay.time<=rangeData.end.time;i++){addPoints(firstDay.formatedDate);if(i===0){firstDay=coordSys.getDateInfo(rangeData.start.y+"-"+rangeData.start.m)}var date=firstDay.date;date.setMonth(date.getMonth()+1);firstDay=coordSys.getDateInfo(date)}addPoints(coordSys.getNextNDay(rangeData.end.time,1).formatedDate);function addPoints(date){self._firstDayOfMonth.push(coordSys.getDateInfo(date));self._firstDayPoints.push(coordSys.dataToRect([date],false).tl);var points=self._getLinePointsOfOneWeek(calendarModel,date,orient);self._tlpoints.push(points[0]);self._blpoints.push(points[points.length-1]);show&&self._drawSplitline(points,lineStyleModel,group)}show&&this._drawSplitline(self._getEdgesPoints(self._tlpoints,lineWidth,orient),lineStyleModel,group);show&&this._drawSplitline(self._getEdgesPoints(self._blpoints,lineWidth,orient),lineStyleModel,group)},_getEdgesPoints:function(points,lineWidth,orient){var rs=[points[0].slice(),points[points.length-1].slice()];var idx=orient==="horizontal"?0:1;rs[0][idx]=rs[0][idx]-lineWidth/2;rs[1][idx]=rs[1][idx]+lineWidth/2;return rs},_drawSplitline:function(points,lineStyleModel,group){var poyline=new Polyline({z2:20,shape:{points:points},style:lineStyleModel});group.add(poyline)},_getLinePointsOfOneWeek:function(calendarModel,date,orient){var coordSys=calendarModel.coordinateSystem;date=coordSys.getDateInfo(date);var points=[];for(var i=0;i<7;i++){var tmpD=coordSys.getNextNDay(date.time,i);var point=coordSys.dataToRect([tmpD.time],false);points[2*tmpD.day]=point.tl;points[2*tmpD.day+1]=point[orient==="horizontal"?"bl":"tr"]}return points},_formatterLabel:function(formatter,params){if(typeof formatter==="string"&&formatter){return formatTplSimple(formatter,params)
}if(typeof formatter==="function"){return formatter(params)}return params.nameMap},_yearTextPositionControl:function(textEl,point,orient,position,margin){point=point.slice();var aligns=["center","bottom"];if(position==="bottom"){point[1]+=margin;aligns=["center","top"]}else{if(position==="left"){point[0]-=margin}else{if(position==="right"){point[0]+=margin;aligns=["center","top"]}else{point[1]-=margin}}}var rotate=0;if(position==="left"||position==="right"){rotate=Math.PI/2}return{rotation:rotate,position:point,style:{textAlign:aligns[0],textVerticalAlign:aligns[1]}}},_renderYearText:function(calendarModel,rangeData,orient,group){var yearLabel=calendarModel.getModel("yearLabel");if(!yearLabel.get("show")){return}var margin=yearLabel.get("margin");var pos=yearLabel.get("position");if(!pos){pos=orient!=="horizontal"?"top":"left"}var points=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]];var xc=(points[0][0]+points[1][0])/2;var yc=(points[0][1]+points[1][1])/2;var idx=orient==="horizontal"?0:1;var posPoints={top:[xc,points[idx][1]],bottom:[xc,points[1-idx][1]],left:[points[1-idx][0],yc],right:[points[idx][0],yc]};var name=rangeData.start.y;if(+rangeData.end.y>+rangeData.start.y){name=name+"-"+rangeData.end.y}var formatter=yearLabel.get("formatter");var params={start:rangeData.start.y,end:rangeData.end.y,nameMap:name};var content=this._formatterLabel(formatter,params);var yearText=new Text({z2:30});setTextStyle(yearText.style,yearLabel,{text:content}),yearText.attr(this._yearTextPositionControl(yearText,posPoints[pos],orient,pos,margin));group.add(yearText)},_monthTextPositionControl:function(point,isCenter,orient,position,margin){var align="left";var vAlign="top";var x=point[0];var y=point[1];if(orient==="horizontal"){y=y+margin;if(isCenter){align="center"}if(position==="start"){vAlign="bottom"}}else{x=x+margin;if(isCenter){vAlign="middle"}if(position==="start"){align="right"}}return{x:x,y:y,textAlign:align,textVerticalAlign:vAlign}},_renderMonthText:function(calendarModel,orient,group){var monthLabel=calendarModel.getModel("monthLabel");
if(!monthLabel.get("show")){return}var nameMap=monthLabel.get("nameMap");var margin=monthLabel.get("margin");var pos=monthLabel.get("position");var align=monthLabel.get("align");var termPoints=[this._tlpoints,this._blpoints];if(isString(nameMap)){nameMap=MONTH_TEXT[nameMap.toUpperCase()]||[]}var idx=pos==="start"?0:1;var axis=orient==="horizontal"?0:1;margin=pos==="start"?-margin:margin;var isCenter=(align==="center");for(var i=0;i<termPoints[idx].length-1;i++){var tmp=termPoints[idx][i].slice();var firstDay=this._firstDayOfMonth[i];if(isCenter){var firstDayPoints=this._firstDayPoints[i];tmp[axis]=(firstDayPoints[axis]+termPoints[0][i+1][axis])/2}var formatter=monthLabel.get("formatter");var name=nameMap[+firstDay.m-1];var params={yyyy:firstDay.y,yy:(firstDay.y+"").slice(2),MM:firstDay.m,M:+firstDay.m,nameMap:name};var content=this._formatterLabel(formatter,params);var monthText=new Text({z2:30});extend(setTextStyle(monthText.style,monthLabel,{text:content}),this._monthTextPositionControl(tmp,isCenter,orient,pos,margin));group.add(monthText)}},_weekTextPositionControl:function(point,orient,position,margin,cellSize){var align="center";var vAlign="middle";var x=point[0];var y=point[1];var isStart=position==="start";if(orient==="horizontal"){x=x+margin+(isStart?1:-1)*cellSize[0]/2;align=isStart?"right":"left"}else{y=y+margin+(isStart?1:-1)*cellSize[1]/2;vAlign=isStart?"bottom":"top"}return{x:x,y:y,textAlign:align,textVerticalAlign:vAlign}},_renderWeekText:function(calendarModel,rangeData,orient,group){var dayLabel=calendarModel.getModel("dayLabel");if(!dayLabel.get("show")){return}var coordSys=calendarModel.coordinateSystem;var pos=dayLabel.get("position");var nameMap=dayLabel.get("nameMap");var margin=dayLabel.get("margin");var firstDayOfWeek=coordSys.getFirstDayOfWeek();if(isString(nameMap)){nameMap=WEEK_TEXT[nameMap.toUpperCase()]||[]}var start=coordSys.getNextNDay(rangeData.end.time,(7-rangeData.lweek)).time;var cellSize=[coordSys.getCellWidth(),coordSys.getCellHeight()];
margin=parsePercent$1(margin,cellSize[orient==="horizontal"?0:1]);if(pos==="start"){start=coordSys.getNextNDay(rangeData.start.time,-(7+rangeData.fweek)).time;margin=-margin}for(var i=0;i<7;i++){var tmpD=coordSys.getNextNDay(start,i);var point=coordSys.dataToRect([tmpD.time],false).center;var day=i;day=Math.abs((i+firstDayOfWeek)%7);var weekText=new Text({z2:30});extend(setTextStyle(weekText.style,dayLabel,{text:nameMap[day]}),this._weekTextPositionControl(point,orient,pos,margin,cellSize));group.add(weekText)}}});extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:true},defaultOption:{zlevel:0,z:6,show:true,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}});extendComponentView({type:"title",render:function(titleModel,ecModel,api){this.group.removeAll();if(!titleModel.get("show")){return}var group=this.group;var textStyleModel=titleModel.getModel("textStyle");var subtextStyleModel=titleModel.getModel("subtextStyle");var textAlign=titleModel.get("textAlign");var textBaseline=titleModel.get("textBaseline");var textEl=new Text({style:setTextStyle({},textStyleModel,{text:titleModel.get("text"),textFill:textStyleModel.getTextColor()},{disableBox:true}),z2:10});var textRect=textEl.getBoundingRect();var subText=titleModel.get("subtext");var subTextEl=new Text({style:setTextStyle({},subtextStyleModel,{text:subText,textFill:subtextStyleModel.getTextColor(),y:textRect.height+titleModel.get("itemGap"),textVerticalAlign:"top"},{disableBox:true}),z2:10});var link=titleModel.get("link");var sublink=titleModel.get("sublink");var triggerEvent=titleModel.get("triggerEvent",true);textEl.silent=!link&&!triggerEvent;subTextEl.silent=!sublink&&!triggerEvent;if(link){textEl.on("click",function(){window.open(link,"_"+titleModel.get("target"))})}if(sublink){subTextEl.on("click",function(){window.open(sublink,"_"+titleModel.get("subtarget"))
})}textEl.eventData=subTextEl.eventData=triggerEvent?{componentType:"title",componentIndex:titleModel.componentIndex}:null;group.add(textEl);subText&&group.add(subTextEl);var groupRect=group.getBoundingRect();var layoutOption=titleModel.getBoxLayoutParams();layoutOption.width=groupRect.width;layoutOption.height=groupRect.height;var layoutRect=getLayoutRect(layoutOption,{width:api.getWidth(),height:api.getHeight()},titleModel.get("padding"));if(!textAlign){textAlign=titleModel.get("left")||titleModel.get("right");if(textAlign==="middle"){textAlign="center"}if(textAlign==="right"){layoutRect.x+=layoutRect.width}else{if(textAlign==="center"){layoutRect.x+=layoutRect.width/2}}}if(!textBaseline){textBaseline=titleModel.get("top")||titleModel.get("bottom");if(textBaseline==="center"){textBaseline="middle"}if(textBaseline==="bottom"){layoutRect.y+=layoutRect.height}else{if(textBaseline==="middle"){layoutRect.y+=layoutRect.height/2}}textBaseline=textBaseline||"top"}group.attr("position",[layoutRect.x,layoutRect.y]);var alignStyle={textAlign:textAlign,textVerticalAlign:textBaseline};textEl.setStyle(alignStyle);subTextEl.setStyle(alignStyle);groupRect=group.getBoundingRect();var padding=layoutRect.margin;var style=titleModel.getItemStyle(["color","opacity"]);style.fill=titleModel.get("backgroundColor");var rect=new Rect({shape:{x:groupRect.x-padding[3],y:groupRect.y-padding[0],width:groupRect.width+padding[1]+padding[3],height:groupRect.height+padding[0]+padding[2],r:titleModel.get("borderRadius")},style:style,silent:true});subPixelOptimizeRect(rect);group.add(rect)}});ComponentModel.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var AXIS_DIMS=["x","y","z","radius","angle","single"];var COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(coordType){return indexOf(COORDS,coordType)>=0}function createNameEach(names,attrs){names=names.slice();var capitalNames=map(names,capitalFirst);attrs=(attrs||[]).slice();var capitalAttrs=map(attrs,capitalFirst);
return function(callback,context){each$1(names,function(name,index){var nameObj={name:name,capital:capitalNames[index]};for(var j=0;j<attrs.length;j++){nameObj[attrs[j]]=name+capitalAttrs[j]}callback.call(context,nameObj)})}}var eachAxisDim$1=createNameEach(AXIS_DIMS,["axisIndex","axis","index","id"]);function createLinkedNodesFinder(forEachNode,forEachEdgeType,edgeIdGetter){return function(sourceNode){var result={nodes:[],records:{}};forEachEdgeType(function(edgeType){result.records[edgeType.name]={}});if(!sourceNode){return result}absorb(sourceNode,result);var existsLink;do{existsLink=false;forEachNode(processSingleNode)}while(existsLink);function processSingleNode(node){if(!isNodeAbsorded(node,result)&&isLinked(node,result)){absorb(node,result);existsLink=true}}return result};function isNodeAbsorded(node,result){return indexOf(result.nodes,node)>=0}function isLinked(node,result){var hasLink=false;forEachEdgeType(function(edgeType){each$1(edgeIdGetter(node,edgeType)||[],function(edgeId){result.records[edgeType.name][edgeId]&&(hasLink=true)})});return hasLink}function absorb(node,result){result.nodes.push(node);forEachEdgeType(function(edgeType){each$1(edgeIdGetter(node,edgeType)||[],function(edgeId){result.records[edgeType.name][edgeId]=true})})}}var each$22=each$1;var asc$1=asc;var AxisProxy=function(dimName,axisIndex,dataZoomModel,ecModel){this._dimName=dimName;this._axisIndex=axisIndex;this._valueWindow;this._percentWindow;this._dataExtent;this._minMaxSpan;this.ecModel=ecModel;this._dataZoomModel=dataZoomModel};AxisProxy.prototype={constructor:AxisProxy,hostedBy:function(dataZoomModel){return this._dataZoomModel===dataZoomModel},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var seriesModels=[];var ecModel=this.ecModel;ecModel.eachSeries(function(seriesModel){if(isCoordSupported(seriesModel.get("coordinateSystem"))){var dimName=this._dimName;var axisModel=ecModel.queryComponents({mainType:dimName+"Axis",index:seriesModel.get(dimName+"AxisIndex"),id:seriesModel.get(dimName+"AxisId")})[0];
if(this._axisIndex===(axisModel&&axisModel.componentIndex)){seriesModels.push(seriesModel)}}},this);return seriesModels},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var axisDim=this._dimName;var ecModel=this.ecModel;var axisModel=this.getAxisModel();var isCartesian=axisDim==="x"||axisDim==="y";var otherAxisDim;var coordSysIndexName;if(isCartesian){coordSysIndexName="gridIndex";otherAxisDim=axisDim==="x"?"y":"x"}else{coordSysIndexName="polarIndex";otherAxisDim=axisDim==="angle"?"radius":"angle"}var foundOtherAxisModel;ecModel.eachComponent(otherAxisDim+"Axis",function(otherAxisModel){if((otherAxisModel.get(coordSysIndexName)||0)===(axisModel.get(coordSysIndexName)||0)){foundOtherAxisModel=otherAxisModel}});return foundOtherAxisModel},getMinMaxSpan:function(){return clone(this._minMaxSpan)},calculateDataWindow:function(opt){var dataExtent=this._dataExtent;var axisModel=this.getAxisModel();var scale=axisModel.axis.scale;var rangePropMode=this._dataZoomModel.getRangePropMode();var percentExtent=[0,100];var percentWindow=[opt.start,opt.end];var valueWindow=[];each$22(["startValue","endValue"],function(prop){valueWindow.push(opt[prop]!=null?scale.parse(opt[prop]):null)});each$22([0,1],function(idx){var boundValue=valueWindow[idx];var boundPercent=percentWindow[idx];if(rangePropMode[idx]==="percent"){if(boundPercent==null){boundPercent=percentExtent[idx]}boundValue=scale.parse(linearMap(boundPercent,percentExtent,dataExtent,true))}else{boundPercent=linearMap(boundValue,dataExtent,percentExtent,true)}valueWindow[idx]=boundValue;percentWindow[idx]=boundPercent});return{valueWindow:asc$1(valueWindow),percentWindow:asc$1(percentWindow)}},reset:function(dataZoomModel){if(dataZoomModel!==this._dataZoomModel){return}var targetSeries=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,targetSeries);var dataWindow=this.calculateDataWindow(dataZoomModel.option);this._valueWindow=dataWindow.valueWindow;
this._percentWindow=dataWindow.percentWindow;setMinMaxSpan(this);setAxisModel(this)},restore:function(dataZoomModel){if(dataZoomModel!==this._dataZoomModel){return}this._valueWindow=this._percentWindow=null;setAxisModel(this,true)},filterData:function(dataZoomModel,api){if(dataZoomModel!==this._dataZoomModel){return}var axisDim=this._dimName;var seriesModels=this.getTargetSeriesModels();var filterMode=dataZoomModel.get("filterMode");var valueWindow=this._valueWindow;if(filterMode==="none"){return}each$22(seriesModels,function(seriesModel){var seriesData=seriesModel.getData();var dataDims=seriesData.mapDimension(axisDim,true);if(!dataDims.length){return}if(filterMode==="weakFilter"){seriesData.filterSelf(function(dataIndex){var leftOut;var rightOut;var hasValue;for(var i=0;i<dataDims.length;i++){var value=seriesData.get(dataDims[i],dataIndex);var thisHasValue=!isNaN(value);var thisLeftOut=value<valueWindow[0];var thisRightOut=value>valueWindow[1];if(thisHasValue&&!thisLeftOut&&!thisRightOut){return true}thisHasValue&&(hasValue=true);thisLeftOut&&(leftOut=true);thisRightOut&&(rightOut=true)}return hasValue&&leftOut&&rightOut})}else{each$22(dataDims,function(dim){if(filterMode==="empty"){seriesModel.setData(seriesData.map(dim,function(value){return !isInWindow(value)?NaN:value}))}else{var range={};range[dim]=valueWindow;seriesData.selectRange(range)}})}each$22(dataDims,function(dim){seriesData.setApproximateExtent(valueWindow,dim)})});function isInWindow(value){return value>=valueWindow[0]&&value<=valueWindow[1]}}};function calculateDataExtent(axisProxy,axisDim,seriesModels){var dataExtent=[Infinity,-Infinity];each$22(seriesModels,function(seriesModel){var seriesData=seriesModel.getData();if(seriesData){each$22(seriesData.mapDimension(axisDim,true),function(dim){var seriesExtent=seriesData.getApproximateExtent(dim);seriesExtent[0]<dataExtent[0]&&(dataExtent[0]=seriesExtent[0]);seriesExtent[1]>dataExtent[1]&&(dataExtent[1]=seriesExtent[1])})}});if(dataExtent[1]<dataExtent[0]){dataExtent=[NaN,NaN]
}fixExtentByAxis(axisProxy,dataExtent);return dataExtent}function fixExtentByAxis(axisProxy,dataExtent){var axisModel=axisProxy.getAxisModel();var min=axisModel.getMin(true);var isCategoryAxis=axisModel.get("type")==="category";var axisDataLen=isCategoryAxis&&axisModel.getCategories().length;if(min!=null&&min!=="dataMin"&&typeof min!=="function"){dataExtent[0]=min}else{if(isCategoryAxis){dataExtent[0]=axisDataLen>0?0:NaN}}var max=axisModel.getMax(true);if(max!=null&&max!=="dataMax"&&typeof max!=="function"){dataExtent[1]=max}else{if(isCategoryAxis){dataExtent[1]=axisDataLen>0?axisDataLen-1:NaN}}if(!axisModel.get("scale",true)){dataExtent[0]>0&&(dataExtent[0]=0);dataExtent[1]<0&&(dataExtent[1]=0)}return dataExtent}function setAxisModel(axisProxy,isRestore){var axisModel=axisProxy.getAxisModel();var percentWindow=axisProxy._percentWindow;var valueWindow=axisProxy._valueWindow;if(!percentWindow){return}var precision=getPixelPrecision(valueWindow,[0,500]);precision=Math.min(precision,20);var useOrigin=isRestore||(percentWindow[0]===0&&percentWindow[1]===100);axisModel.setRange(useOrigin?null:+valueWindow[0].toFixed(precision),useOrigin?null:+valueWindow[1].toFixed(precision))}function setMinMaxSpan(axisProxy){var minMaxSpan=axisProxy._minMaxSpan={};var dataZoomModel=axisProxy._dataZoomModel;each$22(["min","max"],function(minMax){minMaxSpan[minMax+"Span"]=dataZoomModel.get(minMax+"Span");var valueSpan=dataZoomModel.get(minMax+"ValueSpan");if(valueSpan!=null){minMaxSpan[minMax+"ValueSpan"]=valueSpan;valueSpan=axisProxy.getAxisModel().axis.scale.parse(valueSpan);if(valueSpan!=null){var dataExtent=axisProxy._dataExtent;minMaxSpan[minMax+"Span"]=linearMap(dataExtent[0]+valueSpan,dataExtent,[0,100],true)}}})}var each$21=each$1;var eachAxisDim=eachAxisDim$1;var DataZoomModel=extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(option,parentModel,ecModel){this._dataIntervalByAxis={};
this._dataInfo={};this._axisProxies={};this.textStyleModel;this._autoThrottle=true;this._rangePropMode=["percent","percent"];var rawOption=retrieveRaw(option);this.mergeDefaultAndTheme(option,ecModel);this.doInit(rawOption)},mergeOption:function(newOption){var rawOption=retrieveRaw(newOption);merge(this.option,newOption,true);this.doInit(rawOption)},doInit:function(rawOption){var thisOption=this.option;if(!env$1.canvasSupported){thisOption.realtime=false}this._setDefaultThrottle(rawOption);updateRangeUse(this,rawOption);each$21([["start","startValue"],["end","endValue"]],function(names,index){if(this._rangePropMode[index]==="value"){thisOption[names[0]]=null}},this);this.textStyleModel=this.getModel("textStyle");this._resetTarget();this._giveAxisProxies()},_giveAxisProxies:function(){var axisProxies=this._axisProxies;this.eachTargetAxis(function(dimNames,axisIndex,dataZoomModel,ecModel){var axisModel=this.dependentModels[dimNames.axis][axisIndex];var axisProxy=axisModel.__dzAxisProxy||(axisModel.__dzAxisProxy=new AxisProxy(dimNames.name,axisIndex,this,ecModel));axisProxies[dimNames.name+"_"+axisIndex]=axisProxy},this)},_resetTarget:function(){var thisOption=this.option;var autoMode=this._judgeAutoMode();eachAxisDim(function(dimNames){var axisIndexName=dimNames.axisIndex;thisOption[axisIndexName]=normalizeToArray(thisOption[axisIndexName])},this);if(autoMode==="axisIndex"){this._autoSetAxisIndex()}else{if(autoMode==="orient"){this._autoSetOrient()}}},_judgeAutoMode:function(){var thisOption=this.option;var hasIndexSpecified=false;eachAxisDim(function(dimNames){if(thisOption[dimNames.axisIndex]!=null){hasIndexSpecified=true}},this);var orient=thisOption.orient;if(orient==null&&hasIndexSpecified){return"orient"}else{if(!hasIndexSpecified){if(orient==null){thisOption.orient="horizontal"}return"axisIndex"}}},_autoSetAxisIndex:function(){var autoAxisIndex=true;var orient=this.get("orient",true);var thisOption=this.option;var dependentModels=this.dependentModels;if(autoAxisIndex){var dimName=orient==="vertical"?"y":"x";
if(dependentModels[dimName+"Axis"].length){thisOption[dimName+"AxisIndex"]=[0];autoAxisIndex=false}else{each$21(dependentModels.singleAxis,function(singleAxisModel){if(autoAxisIndex&&singleAxisModel.get("orient",true)===orient){thisOption.singleAxisIndex=[singleAxisModel.componentIndex];autoAxisIndex=false}})}}if(autoAxisIndex){eachAxisDim(function(dimNames){if(!autoAxisIndex){return}var axisIndices=[];var axisModels=this.dependentModels[dimNames.axis];if(axisModels.length&&!axisIndices.length){for(var i=0,len=axisModels.length;i<len;i++){if(axisModels[i].get("type")==="category"){axisIndices.push(i)}}}thisOption[dimNames.axisIndex]=axisIndices;if(axisIndices.length){autoAxisIndex=false}},this)}if(autoAxisIndex){this.ecModel.eachSeries(function(seriesModel){if(this._isSeriesHasAllAxesTypeOf(seriesModel,"value")){eachAxisDim(function(dimNames){var axisIndices=thisOption[dimNames.axisIndex];var axisIndex=seriesModel.get(dimNames.axisIndex);var axisId=seriesModel.get(dimNames.axisId);var axisModel=seriesModel.ecModel.queryComponents({mainType:dimNames.axis,index:axisIndex,id:axisId})[0];if(__DEV__){if(!axisModel){throw new Error(dimNames.axis+' "'+retrieve(axisIndex,axisId,0)+'" not found')}}axisIndex=axisModel.componentIndex;if(indexOf(axisIndices,axisIndex)<0){axisIndices.push(axisIndex)}})}},this)}},_autoSetOrient:function(){var dim;this.eachTargetAxis(function(dimNames){!dim&&(dim=dimNames.name)},this);this.option.orient=dim==="y"?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(seriesModel,axisType){var is=true;eachAxisDim(function(dimNames){var seriesAxisIndex=seriesModel.get(dimNames.axisIndex);var axisModel=this.dependentModels[dimNames.axis][seriesAxisIndex];if(!axisModel||axisModel.get("type")!==axisType){is=false}},this);return is},_setDefaultThrottle:function(rawOption){if(rawOption.hasOwnProperty("throttle")){this._autoThrottle=false}if(this._autoThrottle){var globalOption=this.ecModel.option;this.option.throttle=(globalOption.animation&&globalOption.animationDurationUpdate>0)?100:20
}},getFirstTargetAxisModel:function(){var firstAxisModel;eachAxisDim(function(dimNames){if(firstAxisModel==null){var indices=this.get(dimNames.axisIndex);if(indices.length){firstAxisModel=this.dependentModels[dimNames.axis][indices[0]]}}},this);return firstAxisModel},eachTargetAxis:function(callback,context){var ecModel=this.ecModel;eachAxisDim(function(dimNames){each$21(this.get(dimNames.axisIndex),function(axisIndex){callback.call(context,dimNames,axisIndex,this,ecModel)},this)},this)},getAxisProxy:function(dimName,axisIndex){return this._axisProxies[dimName+"_"+axisIndex]},getAxisModel:function(dimName,axisIndex){var axisProxy=this.getAxisProxy(dimName,axisIndex);return axisProxy&&axisProxy.getAxisModel()},setRawRange:function(opt,ignoreUpdateRangeUsg){var option=this.option;each$21([["start","startValue"],["end","endValue"]],function(names){if(opt[names[0]]!=null||opt[names[1]]!=null){option[names[0]]=opt[names[0]];option[names[1]]=opt[names[1]]}},this);!ignoreUpdateRangeUsg&&updateRangeUse(this,opt)},getPercentRange:function(){var axisProxy=this.findRepresentativeAxisProxy();if(axisProxy){return axisProxy.getDataPercentWindow()}},getValueRange:function(axisDimName,axisIndex){if(axisDimName==null&&axisIndex==null){var axisProxy=this.findRepresentativeAxisProxy();if(axisProxy){return axisProxy.getDataValueWindow()}}else{return this.getAxisProxy(axisDimName,axisIndex).getDataValueWindow()}},findRepresentativeAxisProxy:function(axisModel){if(axisModel){return axisModel.__dzAxisProxy}var axisProxies=this._axisProxies;for(var key in axisProxies){if(axisProxies.hasOwnProperty(key)&&axisProxies[key].hostedBy(this)){return axisProxies[key]}}for(var key in axisProxies){if(axisProxies.hasOwnProperty(key)&&!axisProxies[key].hostedBy(this)){return axisProxies[key]}}},getRangePropMode:function(){return this._rangePropMode.slice()}});function retrieveRaw(option){var ret={};each$21(["start","end","startValue","endValue","throttle"],function(name){option.hasOwnProperty(name)&&(ret[name]=option[name])
});return ret}function updateRangeUse(dataZoomModel,rawOption){var rangePropMode=dataZoomModel._rangePropMode;var rangeModeInOption=dataZoomModel.get("rangeMode");each$21([["start","startValue"],["end","endValue"]],function(names,index){var percentSpecified=rawOption[names[0]]!=null;var valueSpecified=rawOption[names[1]]!=null;if(percentSpecified&&!valueSpecified){rangePropMode[index]="percent"}else{if(!percentSpecified&&valueSpecified){rangePropMode[index]="value"}else{if(rangeModeInOption){rangePropMode[index]=rangeModeInOption[index]}else{if(percentSpecified){rangePropMode[index]="percent"}}}}})}var DataZoomView=Component.extend({type:"dataZoom",render:function(dataZoomModel,ecModel,api,payload){this.dataZoomModel=dataZoomModel;this.ecModel=ecModel;this.api=api},getTargetCoordInfo:function(){var dataZoomModel=this.dataZoomModel;var ecModel=this.ecModel;var coordSysLists={};dataZoomModel.eachTargetAxis(function(dimNames,axisIndex){var axisModel=ecModel.getComponent(dimNames.axis,axisIndex);if(axisModel){var coordModel=axisModel.getCoordSysModel();coordModel&&save(coordModel,axisModel,coordSysLists[coordModel.mainType]||(coordSysLists[coordModel.mainType]=[]),coordModel.componentIndex)}},this);function save(coordModel,axisModel,store,coordIndex){var item;for(var i=0;i<store.length;i++){if(store[i].model===coordModel){item=store[i];break}}if(!item){store.push(item={model:coordModel,axisModels:[],coordIndex:coordIndex})}item.axisModels.push(axisModel)}return coordSysLists}});var SliderZoomModel=DataZoomModel.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:true,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:0.5,opacity:0.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:0.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:true,showDataShadow:"auto",realtime:true,zoomLock:false,textStyle:{color:"#333"}}});
var Rect$2=Rect;var linearMap$1=linearMap;var asc$2=asc;var bind$4=bind;var each$23=each$1;var DEFAULT_LOCATION_EDGE_GAP=7;var DEFAULT_FRAME_BORDER_WIDTH=1;var DEFAULT_FILLER_SIZE=30;var HORIZONTAL="horizontal";var VERTICAL="vertical";var LABEL_GAP=5;var SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"];var SliderZoomView=DataZoomView.extend({type:"dataZoom.slider",init:function(ecModel,api){this._displayables={};this._orient;this._range;this._handleEnds;this._size;this._handleWidth;this._handleHeight;this._location;this._dragging;this._dataShadowInfo;this.api=api},render:function(dataZoomModel,ecModel,api,payload){SliderZoomView.superApply(this,"render",arguments);createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate");this._orient=dataZoomModel.get("orient");if(this.dataZoomModel.get("show")===false){this.group.removeAll();return}if(!payload||payload.type!=="dataZoom"||payload.from!==this.uid){this._buildView()}this._updateView()},remove:function(){SliderZoomView.superApply(this,"remove",arguments);clear(this,"_dispatchZoomAction")},dispose:function(){SliderZoomView.superApply(this,"dispose",arguments);clear(this,"_dispatchZoomAction")},_buildView:function(){var thisGroup=this.group;thisGroup.removeAll();this._resetLocation();this._resetInterval();var barGroup=this._displayables.barGroup=new Group();this._renderBackground();this._renderHandle();this._renderDataShadow();thisGroup.add(barGroup);this._positionGroup()},_resetLocation:function(){var dataZoomModel=this.dataZoomModel;var api=this.api;var coordRect=this._findCoordRect();var ecSize={width:api.getWidth(),height:api.getHeight()};var positionInfo=this._orient===HORIZONTAL?{right:ecSize.width-coordRect.x-coordRect.width,top:(ecSize.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP),width:coordRect.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:coordRect.y,width:DEFAULT_FILLER_SIZE,height:coordRect.height};var layoutParams=getLayoutParams(dataZoomModel.option);
each$1(["right","top","width","height"],function(name){if(layoutParams[name]==="ph"){layoutParams[name]=positionInfo[name]}});var layoutRect=getLayoutRect(layoutParams,ecSize,dataZoomModel.padding);this._location={x:layoutRect.x,y:layoutRect.y};this._size=[layoutRect.width,layoutRect.height];this._orient===VERTICAL&&this._size.reverse()},_positionGroup:function(){var thisGroup=this.group;var location=this._location;var orient=this._orient;var targetAxisModel=this.dataZoomModel.getFirstTargetAxisModel();var inverse=targetAxisModel&&targetAxisModel.get("inverse");var barGroup=this._displayables.barGroup;var otherAxisInverse=(this._dataShadowInfo||{}).otherAxisInverse;barGroup.attr((orient===HORIZONTAL&&!inverse)?{scale:otherAxisInverse?[1,1]:[1,-1]}:(orient===HORIZONTAL&&inverse)?{scale:otherAxisInverse?[-1,1]:[-1,-1]}:(orient===VERTICAL&&!inverse)?{scale:otherAxisInverse?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:otherAxisInverse?[-1,-1]:[-1,1],rotation:Math.PI/2});var rect=thisGroup.getBoundingRect([barGroup]);thisGroup.attr("position",[location.x-rect.x,location.y-rect.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var dataZoomModel=this.dataZoomModel;var size=this._size;var barGroup=this._displayables.barGroup;barGroup.add(new Rect$2({silent:true,shape:{x:0,y:0,width:size[0],height:size[1]},style:{fill:dataZoomModel.get("backgroundColor")},z2:-40}));barGroup.add(new Rect$2({shape:{x:0,y:0,width:size[0],height:size[1]},style:{fill:"transparent"},z2:0,onclick:bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var info=this._dataShadowInfo=this._prepareDataShadowInfo();if(!info){return}var size=this._size;var seriesModel=info.series;var data=seriesModel.getRawData();var otherDim=seriesModel.getShadowDim?seriesModel.getShadowDim():info.otherDim;if(otherDim==null){return}var otherDataExtent=data.getDataExtent(otherDim);var otherOffset=(otherDataExtent[1]-otherDataExtent[0])*0.3;otherDataExtent=[otherDataExtent[0]-otherOffset,otherDataExtent[1]+otherOffset];
var otherShadowExtent=[0,size[1]];var thisShadowExtent=[0,size[0]];var areaPoints=[[size[0],0],[0,0]];var linePoints=[];var step=thisShadowExtent[1]/(data.count()-1);var thisCoord=0;var stride=Math.round(data.count()/size[0]);var lastIsEmpty;data.each([otherDim],function(value,index){if(stride>0&&(index%stride)){thisCoord+=step;return}var isEmpty=value==null||isNaN(value)||value==="";var otherCoord=isEmpty?0:linearMap$1(value,otherDataExtent,otherShadowExtent,true);if(isEmpty&&!lastIsEmpty&&index){areaPoints.push([areaPoints[areaPoints.length-1][0],0]);linePoints.push([linePoints[linePoints.length-1][0],0])}else{if(!isEmpty&&lastIsEmpty){areaPoints.push([thisCoord,0]);linePoints.push([thisCoord,0])}}areaPoints.push([thisCoord,otherCoord]);linePoints.push([thisCoord,otherCoord]);thisCoord+=step;lastIsEmpty=isEmpty});var dataZoomModel=this.dataZoomModel;this._displayables.barGroup.add(new Polygon({shape:{points:areaPoints},style:defaults({fill:dataZoomModel.get("dataBackgroundColor")},dataZoomModel.getModel("dataBackground.areaStyle").getAreaStyle()),silent:true,z2:-20}));this._displayables.barGroup.add(new Polyline({shape:{points:linePoints},style:dataZoomModel.getModel("dataBackground.lineStyle").getLineStyle(),silent:true,z2:-19}))},_prepareDataShadowInfo:function(){var dataZoomModel=this.dataZoomModel;var showDataShadow=dataZoomModel.get("showDataShadow");if(showDataShadow===false){return}var result;var ecModel=this.ecModel;dataZoomModel.eachTargetAxis(function(dimNames,axisIndex){var seriesModels=dataZoomModel.getAxisProxy(dimNames.name,axisIndex).getTargetSeriesModels();each$1(seriesModels,function(seriesModel){if(result){return}if(showDataShadow!==true&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,seriesModel.get("type"))<0){return}var thisAxis=ecModel.getComponent(dimNames.axis,axisIndex).axis;var otherDim=getOtherDim(dimNames.name);var otherAxisInverse;var coordSys=seriesModel.coordinateSystem;if(otherDim!=null&&coordSys.getOtherAxis){otherAxisInverse=coordSys.getOtherAxis(thisAxis).inverse
}otherDim=seriesModel.getData().mapDimension(otherDim);result={thisAxis:thisAxis,series:seriesModel,thisDim:dimNames.name,otherDim:otherDim,otherAxisInverse:otherAxisInverse}},this)},this);return result},_renderHandle:function(){var displaybles=this._displayables;var handles=displaybles.handles=[];var handleLabels=displaybles.handleLabels=[];var barGroup=this._displayables.barGroup;var size=this._size;var dataZoomModel=this.dataZoomModel;barGroup.add(displaybles.filler=new Rect$2({draggable:true,cursor:getCursor(this._orient),drift:bind$4(this._onDragMove,this,"all"),onmousemove:function(e){stop(e.event)},ondragstart:bind$4(this._showDataInfo,this,true),ondragend:bind$4(this._onDragEnd,this),onmouseover:bind$4(this._showDataInfo,this,true),onmouseout:bind$4(this._showDataInfo,this,false),style:{fill:dataZoomModel.get("fillerColor"),textPosition:"inside"}}));barGroup.add(new Rect$2(subPixelOptimizeRect({silent:true,shape:{x:0,y:0,width:size[0],height:size[1]},style:{stroke:dataZoomModel.get("dataBackgroundColor")||dataZoomModel.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})));each$23([0,1],function(handleIndex){var path=createIcon(dataZoomModel.get("handleIcon"),{cursor:getCursor(this._orient),draggable:true,drift:bind$4(this._onDragMove,this,handleIndex),onmousemove:function(e){stop(e.event)},ondragend:bind$4(this._onDragEnd,this),onmouseover:bind$4(this._showDataInfo,this,true),onmouseout:bind$4(this._showDataInfo,this,false)},{x:-1,y:0,width:2,height:2});var bRect=path.getBoundingRect();this._handleHeight=parsePercent$1(dataZoomModel.get("handleSize"),this._size[1]);this._handleWidth=bRect.width/bRect.height*this._handleHeight;path.setStyle(dataZoomModel.getModel("handleStyle").getItemStyle());var handleColor=dataZoomModel.get("handleColor");if(handleColor!=null){path.style.fill=handleColor}barGroup.add(handles[handleIndex]=path);var textStyleModel=dataZoomModel.textStyleModel;this.group.add(handleLabels[handleIndex]=new Text({silent:true,invisible:true,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()},z2:10}))
},this)},_resetInterval:function(){var range=this._range=this.dataZoomModel.getPercentRange();var viewExtent=this._getViewExtent();this._handleEnds=[linearMap$1(range[0],[0,100],viewExtent,true),linearMap$1(range[1],[0,100],viewExtent,true)]},_updateInterval:function(handleIndex,delta){var dataZoomModel=this.dataZoomModel;var handleEnds=this._handleEnds;var viewExtend=this._getViewExtent();var minMaxSpan=dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();var percentExtent=[0,100];sliderMove(delta,handleEnds,viewExtend,dataZoomModel.get("zoomLock")?"all":handleIndex,minMaxSpan.minSpan!=null?linearMap$1(minMaxSpan.minSpan,percentExtent,viewExtend,true):null,minMaxSpan.maxSpan!=null?linearMap$1(minMaxSpan.maxSpan,percentExtent,viewExtend,true):null);var lastRange=this._range;var range=this._range=asc$2([linearMap$1(handleEnds[0],viewExtend,percentExtent,true),linearMap$1(handleEnds[1],viewExtend,percentExtent,true)]);return !lastRange||lastRange[0]!==range[0]||lastRange[1]!==range[1]},_updateView:function(nonRealtime){var displaybles=this._displayables;var handleEnds=this._handleEnds;var handleInterval=asc$2(handleEnds.slice());var size=this._size;each$23([0,1],function(handleIndex){var handle=displaybles.handles[handleIndex];var handleHeight=this._handleHeight;handle.attr({scale:[handleHeight/2,handleHeight/2],position:[handleEnds[handleIndex],size[1]/2-handleHeight/2]})},this);displaybles.filler.setShape({x:handleInterval[0],y:0,width:handleInterval[1]-handleInterval[0],height:size[1]});this._updateDataInfo(nonRealtime)},_updateDataInfo:function(nonRealtime){var dataZoomModel=this.dataZoomModel;var displaybles=this._displayables;var handleLabels=displaybles.handleLabels;var orient=this._orient;var labelTexts=["",""];if(dataZoomModel.get("showDetail")){var axisProxy=dataZoomModel.findRepresentativeAxisProxy();if(axisProxy){var axis=axisProxy.getAxisModel().axis;var range=this._range;var dataInterval=nonRealtime?axisProxy.calculateDataWindow({start:range[0],end:range[1]}).valueWindow:axisProxy.getDataValueWindow();
labelTexts=[this._formatLabel(dataInterval[0],axis),this._formatLabel(dataInterval[1],axis)]}}var orderedHandleEnds=asc$2(this._handleEnds.slice());setLabel.call(this,0);setLabel.call(this,1);function setLabel(handleIndex){var barTransform=getTransform(displaybles.handles[handleIndex].parent,this.group);var direction=transformDirection(handleIndex===0?"right":"left",barTransform);var offset=this._handleWidth/2+LABEL_GAP;var textPoint=applyTransform$1([orderedHandleEnds[handleIndex]+(handleIndex===0?-offset:offset),this._size[1]/2],barTransform);handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],textVerticalAlign:orient===HORIZONTAL?"middle":direction,textAlign:orient===HORIZONTAL?direction:"center",text:labelTexts[handleIndex]})}},_formatLabel:function(value,axis){var dataZoomModel=this.dataZoomModel;var labelFormatter=dataZoomModel.get("labelFormatter");var labelPrecision=dataZoomModel.get("labelPrecision");if(labelPrecision==null||labelPrecision==="auto"){labelPrecision=axis.getPixelPrecision()}var valueStr=(value==null||isNaN(value))?"":(axis.type==="category"||axis.type==="time")?axis.scale.getLabel(Math.round(value)):value.toFixed(Math.min(labelPrecision,20));return isFunction$1(labelFormatter)?labelFormatter(value,valueStr):isString(labelFormatter)?labelFormatter.replace("{value}",valueStr):valueStr},_showDataInfo:function(showOrHide){showOrHide=this._dragging||showOrHide;var handleLabels=this._displayables.handleLabels;handleLabels[0].attr("invisible",!showOrHide);handleLabels[1].attr("invisible",!showOrHide)},_onDragMove:function(handleIndex,dx,dy){this._dragging=true;var barTransform=this._displayables.barGroup.getLocalTransform();var vertex=applyTransform$1([dx,dy],barTransform,true);var changed=this._updateInterval(handleIndex,vertex[0]);var realtime=this.dataZoomModel.get("realtime");this._updateView(!realtime);changed&&realtime&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=false;this._showDataInfo(false);var realtime=this.dataZoomModel.get("realtime");
!realtime&&this._dispatchZoomAction()},_onClickPanelClick:function(e){var size=this._size;var localPoint=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(localPoint[0]<0||localPoint[0]>size[0]||localPoint[1]<0||localPoint[1]>size[1]){return}var handleEnds=this._handleEnds;var center=(handleEnds[0]+handleEnds[1])/2;var changed=this._updateInterval("all",localPoint[0]-center);this._updateView();changed&&this._dispatchZoomAction()},_dispatchZoomAction:function(){var range=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:range[0],end:range[1]})},_findCoordRect:function(){var rect;each$23(this.getTargetCoordInfo(),function(coordInfoList){if(!rect&&coordInfoList.length){var coordSys=coordInfoList[0].model.coordinateSystem;rect=coordSys.getRect&&coordSys.getRect()}});if(!rect){var width=this.api.getWidth();var height=this.api.getHeight();rect={x:width*0.2,y:height*0.2,width:width*0.6,height:height*0.6}}return rect}});function getOtherDim(thisDim){var map$$1={x:"y",y:"x",radius:"angle",angle:"radius"};return map$$1[thisDim]}function getCursor(orient){return orient==="vertical"?"ns-resize":"ew-resize"}DataZoomModel.extend({type:"dataZoom.inside",defaultOption:{disabled:false,zoomLock:false,zoomOnMouseWheel:true,moveOnMouseMove:true,moveOnMouseWheel:false,preventDefaultMouseMove:true}});var ATTR$1="\0_ec_dataZoom_roams";function register$2(api,dataZoomInfo){var store=giveStore(api);var theDataZoomId=dataZoomInfo.dataZoomId;var theCoordId=dataZoomInfo.coordId;each$1(store,function(record,coordId){var dataZoomInfos=record.dataZoomInfos;if(dataZoomInfos[theDataZoomId]&&indexOf(dataZoomInfo.allCoordIds,theCoordId)<0){delete dataZoomInfos[theDataZoomId];record.count--}});cleanStore(store);var record=store[theCoordId];if(!record){record=store[theCoordId]={coordId:theCoordId,dataZoomInfos:{},count:0};record.controller=createController(api,record);record.dispatchAction=curry(dispatchAction$1,api)}!(record.dataZoomInfos[theDataZoomId])&&record.count++;
record.dataZoomInfos[theDataZoomId]=dataZoomInfo;var controllerParams=mergeControllerParams(record.dataZoomInfos);record.controller.enable(controllerParams.controlType,controllerParams.opt);record.controller.setPointerChecker(dataZoomInfo.containsPoint);createOrUpdate(record,"dispatchAction",dataZoomInfo.dataZoomModel.get("throttle",true),"fixRate")}function unregister$1(api,dataZoomId){var store=giveStore(api);each$1(store,function(record){record.controller.dispose();var dataZoomInfos=record.dataZoomInfos;if(dataZoomInfos[dataZoomId]){delete dataZoomInfos[dataZoomId];record.count--}});cleanStore(store)}function generateCoordId(coordModel){return coordModel.type+"\0_"+coordModel.id}function giveStore(api){var zr=api.getZr();return zr[ATTR$1]||(zr[ATTR$1]={})}function createController(api,newRecord){var controller=new RoamController(api.getZr());each$1(["pan","zoom","scrollMove"],function(eventName){controller.on(eventName,function(event){var batch=[];each$1(newRecord.dataZoomInfos,function(info){if(!event.isAvailableBehavior(info.dataZoomModel.option)){return}var method=(info.getRange||{})[eventName];var range=method&&method(newRecord.controller,event);!info.dataZoomModel.get("disabled",true)&&range&&batch.push({dataZoomId:info.dataZoomId,start:range[0],end:range[1]})});batch.length&&newRecord.dispatchAction(batch)})});return controller}function cleanStore(store){each$1(store,function(record,coordId){if(!record.count){record.controller.dispose();delete store[coordId]}})}function dispatchAction$1(api,batch){api.dispatchAction({type:"dataZoom",batch:batch})}function mergeControllerParams(dataZoomInfos){var controlType;var prefix="type_";var typePriority={"type_true":2,"type_move":1,"type_false":0,"type_undefined":-1};var preventDefaultMouseMove=true;each$1(dataZoomInfos,function(dataZoomInfo){var dataZoomModel=dataZoomInfo.dataZoomModel;var oneType=dataZoomModel.get("disabled",true)?false:dataZoomModel.get("zoomLock",true)?"move":true;if(typePriority[prefix+oneType]>typePriority[prefix+controlType]){controlType=oneType
}preventDefaultMouseMove&=dataZoomModel.get("preventDefaultMouseMove",true)});return{controlType:controlType,opt:{zoomOnMouseWheel:true,moveOnMouseMove:true,moveOnMouseWheel:true,preventDefaultMouseMove:!!preventDefaultMouseMove}}}var bind$5=bind;var InsideZoomView=DataZoomView.extend({type:"dataZoom.inside",init:function(ecModel,api){this._range},render:function(dataZoomModel,ecModel,api,payload){InsideZoomView.superApply(this,"render",arguments);this._range=dataZoomModel.getPercentRange();each$1(this.getTargetCoordInfo(),function(coordInfoList,coordSysName){var allCoordIds=map(coordInfoList,function(coordInfo){return generateCoordId(coordInfo.model)});each$1(coordInfoList,function(coordInfo){var coordModel=coordInfo.model;var getRange={};each$1(["pan","zoom","scrollMove"],function(eventName){getRange[eventName]=bind$5(roamHandlers[eventName],this,coordInfo,coordSysName)},this);register$2(api,{coordId:generateCoordId(coordModel),allCoordIds:allCoordIds,containsPoint:function(e,x,y){return coordModel.coordinateSystem.containPoint([x,y])},dataZoomId:dataZoomModel.id,dataZoomModel:dataZoomModel,getRange:getRange})},this)},this)},dispose:function(){unregister$1(this.api,this.dataZoomModel.id);InsideZoomView.superApply(this,"dispose",arguments);this._range=null}});var roamHandlers={zoom:function(coordInfo,coordSysName,controller,e){var lastRange=this._range;var range=lastRange.slice();var axisModel=coordInfo.axisModels[0];if(!axisModel){return}var directionInfo=getDirectionInfo[coordSysName](null,[e.originX,e.originY],axisModel,controller,coordInfo);var percentPoint=(directionInfo.signal>0?(directionInfo.pixelStart+directionInfo.pixelLength-directionInfo.pixel):(directionInfo.pixel-directionInfo.pixelStart))/directionInfo.pixelLength*(range[1]-range[0])+range[0];var scale=Math.max(1/e.scale,0);range[0]=(range[0]-percentPoint)*scale+percentPoint;range[1]=(range[1]-percentPoint)*scale+percentPoint;var minMaxSpan=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();
sliderMove(0,range,[0,100],0,minMaxSpan.minSpan,minMaxSpan.maxSpan);this._range=range;if(lastRange[0]!==range[0]||lastRange[1]!==range[1]){return range}},pan:makeMover(function(range,axisModel,coordInfo,coordSysName,controller,e){var directionInfo=getDirectionInfo[coordSysName]([e.oldX,e.oldY],[e.newX,e.newY],axisModel,controller,coordInfo);return directionInfo.signal*(range[1]-range[0])*directionInfo.pixel/directionInfo.pixelLength}),scrollMove:makeMover(function(range,axisModel,coordInfo,coordSysName,controller,e){var directionInfo=getDirectionInfo[coordSysName]([0,0],[e.scrollDelta,e.scrollDelta],axisModel,controller,coordInfo);return directionInfo.signal*(range[1]-range[0])*e.scrollDelta})};function makeMover(getPercentDelta){return function(coordInfo,coordSysName,controller,e){var lastRange=this._range;var range=lastRange.slice();var axisModel=coordInfo.axisModels[0];if(!axisModel){return}var percentDelta=getPercentDelta(range,axisModel,coordInfo,coordSysName,controller,e);sliderMove(percentDelta,range,[0,100],"all");this._range=range;if(lastRange[0]!==range[0]||lastRange[1]!==range[1]){return range}}}var getDirectionInfo={grid:function(oldPoint,newPoint,axisModel,controller,coordInfo){var axis=axisModel.axis;var ret={};var rect=coordInfo.model.coordinateSystem.getRect();oldPoint=oldPoint||[0,0];if(axis.dim==="x"){ret.pixel=newPoint[0]-oldPoint[0];ret.pixelLength=rect.width;ret.pixelStart=rect.x;ret.signal=axis.inverse?1:-1}else{ret.pixel=newPoint[1]-oldPoint[1];ret.pixelLength=rect.height;ret.pixelStart=rect.y;ret.signal=axis.inverse?-1:1}return ret},polar:function(oldPoint,newPoint,axisModel,controller,coordInfo){var axis=axisModel.axis;var ret={};var polar=coordInfo.model.coordinateSystem;var radiusExtent=polar.getRadiusAxis().getExtent();var angleExtent=polar.getAngleAxis().getExtent();oldPoint=oldPoint?polar.pointToCoord(oldPoint):[0,0];newPoint=polar.pointToCoord(newPoint);if(axisModel.mainType==="radiusAxis"){ret.pixel=newPoint[0]-oldPoint[0];ret.pixelLength=radiusExtent[1]-radiusExtent[0];
ret.pixelStart=radiusExtent[0];ret.signal=axis.inverse?1:-1}else{ret.pixel=newPoint[1]-oldPoint[1];ret.pixelLength=angleExtent[1]-angleExtent[0];ret.pixelStart=angleExtent[0];ret.signal=axis.inverse?-1:1}return ret},singleAxis:function(oldPoint,newPoint,axisModel,controller,coordInfo){var axis=axisModel.axis;var rect=coordInfo.model.coordinateSystem.getRect();var ret={};oldPoint=oldPoint||[0,0];if(axis.orient==="horizontal"){ret.pixel=newPoint[0]-oldPoint[0];ret.pixelLength=rect.width;ret.pixelStart=rect.x;ret.signal=axis.inverse?1:-1}else{ret.pixel=newPoint[1]-oldPoint[1];ret.pixelLength=rect.height;ret.pixelStart=rect.y;ret.signal=axis.inverse?-1:1}return ret}};registerProcessor({getTargetSeries:function(ecModel){var seriesModelMap=createHashMap();ecModel.eachComponent("dataZoom",function(dataZoomModel){dataZoomModel.eachTargetAxis(function(dimNames,axisIndex,dataZoomModel){var axisProxy=dataZoomModel.getAxisProxy(dimNames.name,axisIndex);each$1(axisProxy.getTargetSeriesModels(),function(seriesModel){seriesModelMap.set(seriesModel.uid,seriesModel)})})});return seriesModelMap},modifyOutputEnd:true,overallReset:function(ecModel,api){ecModel.eachComponent("dataZoom",function(dataZoomModel){dataZoomModel.eachTargetAxis(function(dimNames,axisIndex,dataZoomModel){dataZoomModel.getAxisProxy(dimNames.name,axisIndex).reset(dataZoomModel,api)});dataZoomModel.eachTargetAxis(function(dimNames,axisIndex,dataZoomModel){dataZoomModel.getAxisProxy(dimNames.name,axisIndex).filterData(dataZoomModel,api)})});ecModel.eachComponent("dataZoom",function(dataZoomModel){var axisProxy=dataZoomModel.findRepresentativeAxisProxy();var percentRange=axisProxy.getDataPercentWindow();var valueRange=axisProxy.getDataValueWindow();dataZoomModel.setRawRange({start:percentRange[0],end:percentRange[1],startValue:valueRange[0],endValue:valueRange[1]},true)})}});registerAction("dataZoom",function(payload,ecModel){var linkedNodesFinder=createLinkedNodesFinder(bind(ecModel.eachComponent,ecModel,"dataZoom"),eachAxisDim$1,function(model,dimNames){return model.get(dimNames.axisIndex)
});var effectedModels=[];ecModel.eachComponent({mainType:"dataZoom",query:payload},function(model,index){effectedModels.push.apply(effectedModels,linkedNodesFinder(model).nodes)});each$1(effectedModels,function(dataZoomModel,index){dataZoomModel.setRawRange({start:payload.start,end:payload.end,startValue:payload.startValue,endValue:payload.endValue})})});var each$24=each$1;var preprocessor$2=function(option){var visualMap=option&&option.visualMap;if(!isArray(visualMap)){visualMap=visualMap?[visualMap]:[]}each$24(visualMap,function(opt){if(!opt){return}if(has$1(opt,"splitList")&&!has$1(opt,"pieces")){opt.pieces=opt.splitList;delete opt.splitList}var pieces=opt.pieces;if(pieces&&isArray(pieces)){each$24(pieces,function(piece){if(isObject$1(piece)){if(has$1(piece,"start")&&!has$1(piece,"min")){piece.min=piece.start}if(has$1(piece,"end")&&!has$1(piece,"max")){piece.max=piece.end}}})}})};function has$1(obj,name){return obj&&obj.hasOwnProperty&&obj.hasOwnProperty(name)}ComponentModel.registerSubTypeDefaulter("visualMap",function(option){return(!option.categories&&(!(option.pieces?option.pieces.length>0:option.splitNumber>0)||option.calculable))?"continuous":"piecewise"});var VISUAL_PRIORITY=PRIORITY.VISUAL.COMPONENT;registerVisual(VISUAL_PRIORITY,{createOnAllSeries:true,reset:function(seriesModel,ecModel){var resetDefines=[];ecModel.eachComponent("visualMap",function(visualMapModel){var pipelineContext=seriesModel.pipelineContext;if(!visualMapModel.isTargetSeries(seriesModel)||(pipelineContext&&pipelineContext.large)){return}resetDefines.push(incrementalApplyVisual(visualMapModel.stateList,visualMapModel.targetVisuals,bind(visualMapModel.getValueState,visualMapModel),visualMapModel.getDataDimension(seriesModel.getData())))});return resetDefines}});registerVisual(VISUAL_PRIORITY,{createOnAllSeries:true,reset:function(seriesModel,ecModel){var data=seriesModel.getData();var visualMetaList=[];ecModel.eachComponent("visualMap",function(visualMapModel){if(visualMapModel.isTargetSeries(seriesModel)){var visualMeta=visualMapModel.getVisualMeta(bind(getColorVisual,null,seriesModel,visualMapModel))||{stops:[],outerColors:[]};
var concreteDim=visualMapModel.getDataDimension(data);var dimInfo=data.getDimensionInfo(concreteDim);if(dimInfo!=null){visualMeta.dimension=dimInfo.index;visualMetaList.push(visualMeta)}}});seriesModel.getData().setVisual("visualMeta",visualMetaList)}});function getColorVisual(seriesModel,visualMapModel,value,valueState){var mappings=visualMapModel.targetVisuals[valueState];var visualTypes=VisualMapping.prepareVisualTypes(mappings);var resultVisual={color:seriesModel.getData().getVisual("color")};for(var i=0,len=visualTypes.length;i<len;i++){var type=visualTypes[i];var mapping=mappings[type==="opacity"?"__alphaForOpacity":type];mapping&&mapping.applyVisual(value,getVisual,setVisual)}return resultVisual.color;function getVisual(key){return resultVisual[key]}function setVisual(key,value){resultVisual[key]=value}}var visualDefault={get:function(visualType,key,isCategory){var value=clone((defaultOption$3[visualType]||{})[key]);return isCategory?(isArray(value)?value[value.length-1]:value):value}};var defaultOption$3={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[0.3,1],inactive:[0,0]},colorLightness:{active:[0.9,0.5],inactive:[0,0]},colorAlpha:{active:[0.3,1],inactive:[0,0]},opacity:{active:[0.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};var mapVisual$2=VisualMapping.mapVisual;var eachVisual=VisualMapping.eachVisual;var isArray$3=isArray;var each$25=each$1;var asc$3=asc;var linearMap$2=linearMap;var noop$2=noop;var VisualMapModel=extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-Infinity,Infinity],layoutMode:{type:"box",ignoreSize:true},defaultOption:{show:true,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:false,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(option,parentModel,ecModel){this._dataExtent;
this.targetVisuals={};this.controllerVisuals={};this.textStyleModel;this.itemSize;this.mergeDefaultAndTheme(option,ecModel)},optionUpdated:function(newOption,isInit){var thisOption=this.option;if(!env$1.canvasSupported){thisOption.realtime=false}!isInit&&replaceVisualOption(thisOption,newOption,this.replacableOptionKeys);this.textStyleModel=this.getModel("textStyle");this.resetItemSize();this.completeVisualOption()},resetVisual:function(supplementVisualOption){var stateList=this.stateList;supplementVisualOption=bind(supplementVisualOption,this);this.controllerVisuals=createVisualMappings(this.option.controller,stateList,supplementVisualOption);this.targetVisuals=createVisualMappings(this.option.target,stateList,supplementVisualOption)},getTargetSeriesIndices:function(){var optionSeriesIndex=this.option.seriesIndex;var seriesIndices=[];if(optionSeriesIndex==null||optionSeriesIndex==="all"){this.ecModel.eachSeries(function(seriesModel,index){seriesIndices.push(index)})}else{seriesIndices=normalizeToArray(optionSeriesIndex)}return seriesIndices},eachTargetSeries:function(callback,context){each$1(this.getTargetSeriesIndices(),function(seriesIndex){callback.call(context,this.ecModel.getSeriesByIndex(seriesIndex))},this)},isTargetSeries:function(seriesModel){var is=false;this.eachTargetSeries(function(model){model===seriesModel&&(is=true)});return is},formatValueText:function(value,isCategory,edgeSymbols){var option=this.option;var precision=option.precision;var dataBound=this.dataBound;var formatter=option.formatter;var isMinMax;var textValue;edgeSymbols=edgeSymbols||["<",">"];if(isArray(value)){value=value.slice();isMinMax=true}textValue=isCategory?value:(isMinMax?[toFixed(value[0]),toFixed(value[1])]:toFixed(value));if(isString(formatter)){return formatter.replace("{value}",isMinMax?textValue[0]:textValue).replace("{value2}",isMinMax?textValue[1]:textValue)}else{if(isFunction$1(formatter)){return isMinMax?formatter(value[0],value[1]):formatter(value)}}if(isMinMax){if(value[0]===dataBound[0]){return edgeSymbols[0]+" "+textValue[1]
}else{if(value[1]===dataBound[1]){return edgeSymbols[1]+" "+textValue[0]}else{return textValue[0]+" - "+textValue[1]}}}else{return textValue}function toFixed(val){return val===dataBound[0]?"min":val===dataBound[1]?"max":(+val).toFixed(Math.min(precision,20))}},resetExtent:function(){var thisOption=this.option;var extent=asc$3([thisOption.min,thisOption.max]);this._dataExtent=extent},getDataDimension:function(list){var optDim=this.option.dimension;var listDimensions=list.dimensions;if(optDim==null&&!listDimensions.length){return}if(optDim!=null){return list.getDimension(optDim)}var dimNames=list.dimensions;for(var i=dimNames.length-1;i>=0;i--){var dimName=dimNames[i];var dimInfo=list.getDimensionInfo(dimName);if(!dimInfo.isCalculationCoord){return dimName}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var ecModel=this.ecModel;var thisOption=this.option;var base={inRange:thisOption.inRange,outOfRange:thisOption.outOfRange};var target=thisOption.target||(thisOption.target={});var controller=thisOption.controller||(thisOption.controller={});merge(target,base);merge(controller,base);var isCategory=this.isCategory();completeSingle.call(this,target);completeSingle.call(this,controller);completeInactive.call(this,target,"inRange","outOfRange");completeController.call(this,controller);function completeSingle(base){if(isArray$3(thisOption.color)&&!base.inRange){base.inRange={color:thisOption.color.slice().reverse()}}base.inRange=base.inRange||{color:ecModel.get("gradientColor")};each$25(this.stateList,function(state){var visualType=base[state];if(isString(visualType)){var defa=visualDefault.get(visualType,"active",isCategory);if(defa){base[state]={};base[state][visualType]=defa}else{delete base[state]}}},this)}function completeInactive(base,stateExist,stateAbsent){var optExist=base[stateExist];var optAbsent=base[stateAbsent];if(optExist&&!optAbsent){optAbsent=base[stateAbsent]={};each$25(optExist,function(visualData,visualType){if(!VisualMapping.isValidType(visualType)){return
}var defa=visualDefault.get(visualType,"inactive",isCategory);if(defa!=null){optAbsent[visualType]=defa;if(visualType==="color"&&!optAbsent.hasOwnProperty("opacity")&&!optAbsent.hasOwnProperty("colorAlpha")){optAbsent.opacity=[0,0]}}})}}function completeController(controller){var symbolExists=(controller.inRange||{}).symbol||(controller.outOfRange||{}).symbol;var symbolSizeExists=(controller.inRange||{}).symbolSize||(controller.outOfRange||{}).symbolSize;var inactiveColor=this.get("inactiveColor");each$25(this.stateList,function(state){var itemSize=this.itemSize;var visuals=controller[state];if(!visuals){visuals=controller[state]={color:isCategory?inactiveColor:[inactiveColor]}}if(visuals.symbol==null){visuals.symbol=symbolExists&&clone(symbolExists)||(isCategory?"roundRect":["roundRect"])}if(visuals.symbolSize==null){visuals.symbolSize=symbolSizeExists&&clone(symbolSizeExists)||(isCategory?itemSize[0]:[itemSize[0],itemSize[0]])}visuals.symbol=mapVisual$2(visuals.symbol,function(symbol){return(symbol==="none"||symbol==="square")?"roundRect":symbol});var symbolSize=visuals.symbolSize;if(symbolSize!=null){var max=-Infinity;eachVisual(symbolSize,function(value){value>max&&(max=value)});visuals.symbolSize=mapVisual$2(symbolSize,function(value){return linearMap$2(value,[0,max],[0,itemSize[0]],true)})}},this)}},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return !!this.option.categories},setSelected:noop$2,getValueState:noop$2,getVisualMeta:noop$2});var DEFAULT_BAR_BOUND=[20,140];var ContinuousModel=VisualMapModel.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:false,range:null,realtime:true,itemHeight:null,itemWidth:null,hoverLink:true,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(newOption,isInit){ContinuousModel.superApply(this,"optionUpdated",arguments);this.resetExtent();this.resetVisual(function(mappingOption){mappingOption.mappingMethod="linear";
mappingOption.dataExtent=this.getExtent()});this._resetRange()},resetItemSize:function(){ContinuousModel.superApply(this,"resetItemSize",arguments);var itemSize=this.itemSize;this._orient==="horizontal"&&itemSize.reverse();(itemSize[0]==null||isNaN(itemSize[0]))&&(itemSize[0]=DEFAULT_BAR_BOUND[0]);(itemSize[1]==null||isNaN(itemSize[1]))&&(itemSize[1]=DEFAULT_BAR_BOUND[1])},_resetRange:function(){var dataExtent=this.getExtent();var range=this.option.range;if(!range||range.auto){dataExtent.auto=1;this.option.range=dataExtent}else{if(isArray(range)){if(range[0]>range[1]){range.reverse()}range[0]=Math.max(range[0],dataExtent[0]);range[1]=Math.min(range[1],dataExtent[1])}}},completeVisualOption:function(){VisualMapModel.prototype.completeVisualOption.apply(this,arguments);each$1(this.stateList,function(state){var symbolSize=this.option.controller[state].symbolSize;if(symbolSize&&symbolSize[0]!==symbolSize[1]){symbolSize[0]=0}},this)},setSelected:function(selected){this.option.range=selected.slice();this._resetRange()},getSelected:function(){var dataExtent=this.getExtent();var dataInterval=asc((this.get("range")||[]).slice());dataInterval[0]>dataExtent[1]&&(dataInterval[0]=dataExtent[1]);dataInterval[1]>dataExtent[1]&&(dataInterval[1]=dataExtent[1]);dataInterval[0]<dataExtent[0]&&(dataInterval[0]=dataExtent[0]);dataInterval[1]<dataExtent[0]&&(dataInterval[1]=dataExtent[0]);return dataInterval},getValueState:function(value){var range=this.option.range;var dataExtent=this.getExtent();return((range[0]<=dataExtent[0]||range[0]<=value)&&(range[1]>=dataExtent[1]||value<=range[1]))?"inRange":"outOfRange"},findTargetDataIndices:function(range){var result=[];this.eachTargetSeries(function(seriesModel){var dataIndices=[];var data=seriesModel.getData();data.each(this.getDataDimension(data),function(value,dataIndex){range[0]<=value&&value<=range[1]&&dataIndices.push(dataIndex)},this);result.push({seriesId:seriesModel.id,dataIndex:dataIndices})},this);return result},getVisualMeta:function(getColorVisual){var oVals=getColorStopValues(this,"outOfRange",this.getExtent());
var iVals=getColorStopValues(this,"inRange",this.option.range.slice());var stops=[];function setStop(value,valueState){stops.push({value:value,color:getColorVisual(value,valueState)})}var iIdx=0;var oIdx=0;var iLen=iVals.length;var oLen=oVals.length;for(;oIdx<oLen&&(!iVals.length||oVals[oIdx]<=iVals[0]);oIdx++){if(oVals[oIdx]<iVals[iIdx]){setStop(oVals[oIdx],"outOfRange")}}for(var first=1;iIdx<iLen;iIdx++,first=0){first&&stops.length&&setStop(iVals[iIdx],"outOfRange");setStop(iVals[iIdx],"inRange")}for(var first=1;oIdx<oLen;oIdx++){if(!iVals.length||iVals[iVals.length-1]<oVals[oIdx]){if(first){stops.length&&setStop(stops[stops.length-1].value,"outOfRange");first=0}setStop(oVals[oIdx],"outOfRange")}}var stopsLen=stops.length;return{stops:stops,outerColors:[stopsLen?stops[0].color:"transparent",stopsLen?stops[stopsLen-1].color:"transparent"]}}});function getColorStopValues(visualMapModel,valueState,dataExtent){if(dataExtent[0]===dataExtent[1]){return dataExtent.slice()}var count=200;var step=(dataExtent[1]-dataExtent[0])/count;var value=dataExtent[0];var stopValues=[];for(var i=0;i<=count&&value<dataExtent[1];i++){stopValues.push(value);value+=step}stopValues.push(dataExtent[1]);return stopValues}var VisualMapView=extendComponentView({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(ecModel,api){this.ecModel=ecModel;this.api=api;this.visualMapModel},render:function(visualMapModel,ecModel,api,payload){this.visualMapModel=visualMapModel;if(visualMapModel.get("show")===false){this.group.removeAll();return}this.doRender.apply(this,arguments)},renderBackground:function(group){var visualMapModel=this.visualMapModel;var padding=normalizeCssArray$1(visualMapModel.get("padding")||0);var rect=group.getBoundingRect();group.add(new Rect({z2:-1,silent:true,shape:{x:rect.x-padding[3],y:rect.y-padding[0],width:rect.width+padding[3]+padding[1],height:rect.height+padding[0]+padding[2]},style:{fill:visualMapModel.get("backgroundColor"),stroke:visualMapModel.get("borderColor"),lineWidth:visualMapModel.get("borderWidth")}}))
},getControllerVisual:function(targetValue,visualCluster,opts){opts=opts||{};var forceState=opts.forceState;var visualMapModel=this.visualMapModel;var visualObj={};if(visualCluster==="symbol"){visualObj.symbol=visualMapModel.get("itemSymbol")}if(visualCluster==="color"){var defaultColor=visualMapModel.get("contentColor");visualObj.color=defaultColor}function getter(key){return visualObj[key]}function setter(key,value){visualObj[key]=value}var mappings=visualMapModel.controllerVisuals[forceState||visualMapModel.getValueState(targetValue)];var visualTypes=VisualMapping.prepareVisualTypes(mappings);each$1(visualTypes,function(type){var visualMapping=mappings[type];if(opts.convertOpacityToAlpha&&type==="opacity"){type="colorAlpha";visualMapping=mappings.__alphaForOpacity}if(VisualMapping.dependsOn(type,visualCluster)){visualMapping&&visualMapping.applyVisual(targetValue,getter,setter)}});return visualObj[visualCluster]},positionGroup:function(group){var model=this.visualMapModel;var api=this.api;positionElement(group,model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})},doRender:noop});function getItemAlign(visualMapModel,api,itemSize){var modelOption=visualMapModel.option;var itemAlign=modelOption.align;if(itemAlign!=null&&itemAlign!=="auto"){return itemAlign}var ecSize={width:api.getWidth(),height:api.getHeight()};var realIndex=modelOption.orient==="horizontal"?1:0;var paramsSet=[["left","right","width"],["top","bottom","height"]];var reals=paramsSet[realIndex];var fakeValue=[0,null,10];var layoutInput={};for(var i=0;i<3;i++){layoutInput[paramsSet[1-realIndex][i]]=fakeValue[i];layoutInput[reals[i]]=i===2?itemSize[0]:modelOption[reals[i]]}var rParam=[["x","width",3],["y","height",0]][realIndex];var rect=getLayoutRect(layoutInput,ecSize,modelOption.padding);return reals[(rect.margin[rParam[2]]||0)+rect[rParam[0]]+rect[rParam[1]]*0.5<ecSize[rParam[1]]*0.5?0:1]}function convertDataIndex(batch){each$1(batch||[],function(batchItem){if(batch.dataIndex!=null){batch.dataIndexInside=batch.dataIndex;
batch.dataIndex=null}});return batch}var linearMap$3=linearMap;var each$26=each$1;var mathMin$7=Math.min;var mathMax$7=Math.max;var HOVER_LINK_SIZE=12;var HOVER_LINK_OUT=6;var ContinuousView=VisualMapView.extend({type:"visualMap.continuous",init:function(){ContinuousView.superApply(this,"init",arguments);this._shapes={};this._dataInterval=[];this._handleEnds=[];this._orient;this._useHandle;this._hoverLinkDataIndices=[];this._dragging;this._hovering},doRender:function(visualMapModel,ecModel,api,payload){if(!payload||payload.type!=="selectDataRange"||payload.from!==this.uid){this._buildView()}},_buildView:function(){this.group.removeAll();var visualMapModel=this.visualMapModel;var thisGroup=this.group;this._orient=visualMapModel.get("orient");this._useHandle=visualMapModel.get("calculable");this._resetInterval();this._renderBar(thisGroup);var dataRangeText=visualMapModel.get("text");this._renderEndsText(thisGroup,dataRangeText,0);this._renderEndsText(thisGroup,dataRangeText,1);this._updateView(true);this.renderBackground(thisGroup);this._updateView();this._enableHoverLinkToSeries();this._enableHoverLinkFromSeries();this.positionGroup(thisGroup)},_renderEndsText:function(group,dataRangeText,endsIndex){if(!dataRangeText){return}var text=dataRangeText[1-endsIndex];text=text!=null?text+"":"";var visualMapModel=this.visualMapModel;var textGap=visualMapModel.get("textGap");var itemSize=visualMapModel.itemSize;var barGroup=this._shapes.barGroup;var position=this._applyTransform([itemSize[0]/2,endsIndex===0?-textGap:itemSize[1]+textGap],barGroup);var align=this._applyTransform(endsIndex===0?"bottom":"top",barGroup);var orient=this._orient;var textStyleModel=this.visualMapModel.textStyleModel;this.group.add(new Text({style:{x:position[0],y:position[1],textVerticalAlign:orient==="horizontal"?"middle":align,textAlign:orient==="horizontal"?align:"center",text:text,textFont:textStyleModel.getFont(),textFill:textStyleModel.getTextColor()}}))},_renderBar:function(targetGroup){var visualMapModel=this.visualMapModel;
var shapes=this._shapes;var itemSize=visualMapModel.itemSize;var orient=this._orient;var useHandle=this._useHandle;var itemAlign=getItemAlign(visualMapModel,this.api,itemSize);var barGroup=shapes.barGroup=this._createBarGroup(itemAlign);barGroup.add(shapes.outOfRange=createPolygon());barGroup.add(shapes.inRange=createPolygon(null,useHandle?getCursor$1(this._orient):null,bind(this._dragHandle,this,"all",false),bind(this._dragHandle,this,"all",true)));var textRect=visualMapModel.textStyleModel.getTextRect("");var textSize=mathMax$7(textRect.width,textRect.height);if(useHandle){shapes.handleThumbs=[];shapes.handleLabels=[];shapes.handleLabelPoints=[];this._createHandle(barGroup,0,itemSize,textSize,orient,itemAlign);this._createHandle(barGroup,1,itemSize,textSize,orient,itemAlign)}this._createIndicator(barGroup,itemSize,textSize,orient);targetGroup.add(barGroup)},_createHandle:function(barGroup,handleIndex,itemSize,textSize,orient){var onDrift=bind(this._dragHandle,this,handleIndex,false);var onDragEnd=bind(this._dragHandle,this,handleIndex,true);var handleThumb=createPolygon(createHandlePoints(handleIndex,textSize),getCursor$1(this._orient),onDrift,onDragEnd);handleThumb.position[0]=itemSize[0];barGroup.add(handleThumb);var textStyleModel=this.visualMapModel.textStyleModel;var handleLabel=new Text({draggable:true,drift:onDrift,onmousemove:function(e){stop(e.event)},ondragend:onDragEnd,style:{x:0,y:0,text:"",textFont:textStyleModel.getFont(),textFill:textStyleModel.getTextColor()}});this.group.add(handleLabel);var handleLabelPoint=[orient==="horizontal"?textSize/2:textSize*1.5,orient==="horizontal"?(handleIndex===0?-(textSize*1.5):(textSize*1.5)):(handleIndex===0?-textSize/2:textSize/2)];var shapes=this._shapes;shapes.handleThumbs[handleIndex]=handleThumb;shapes.handleLabelPoints[handleIndex]=handleLabelPoint;shapes.handleLabels[handleIndex]=handleLabel},_createIndicator:function(barGroup,itemSize,textSize,orient){var indicator=createPolygon([[0,0]],"move");indicator.position[0]=itemSize[0];
indicator.attr({invisible:true,silent:true});barGroup.add(indicator);var textStyleModel=this.visualMapModel.textStyleModel;var indicatorLabel=new Text({silent:true,invisible:true,style:{x:0,y:0,text:"",textFont:textStyleModel.getFont(),textFill:textStyleModel.getTextColor()}});this.group.add(indicatorLabel);var indicatorLabelPoint=[orient==="horizontal"?textSize/2:HOVER_LINK_OUT+3,0];var shapes=this._shapes;shapes.indicator=indicator;shapes.indicatorLabel=indicatorLabel;shapes.indicatorLabelPoint=indicatorLabelPoint},_dragHandle:function(handleIndex,isEnd,dx,dy){if(!this._useHandle){return}this._dragging=!isEnd;if(!isEnd){var vertex=this._applyTransform([dx,dy],this._shapes.barGroup,true);this._updateInterval(handleIndex,vertex[1]);this._updateView()}if(isEnd===!this.visualMapModel.get("realtime")){this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()})}if(isEnd){!this._hovering&&this._clearHoverLinkToSeries()}else{if(useHoverLinkOnHandle(this.visualMapModel)){this._doHoverLinkToSeries(this._handleEnds[handleIndex],false)}}},_resetInterval:function(){var visualMapModel=this.visualMapModel;var dataInterval=this._dataInterval=visualMapModel.getSelected();var dataExtent=visualMapModel.getExtent();var sizeExtent=[0,visualMapModel.itemSize[1]];this._handleEnds=[linearMap$3(dataInterval[0],dataExtent,sizeExtent,true),linearMap$3(dataInterval[1],dataExtent,sizeExtent,true)]},_updateInterval:function(handleIndex,delta){delta=delta||0;var visualMapModel=this.visualMapModel;var handleEnds=this._handleEnds;var sizeExtent=[0,visualMapModel.itemSize[1]];sliderMove(delta,handleEnds,sizeExtent,handleIndex,0);var dataExtent=visualMapModel.getExtent();this._dataInterval=[linearMap$3(handleEnds[0],sizeExtent,dataExtent,true),linearMap$3(handleEnds[1],sizeExtent,dataExtent,true)]},_updateView:function(forSketch){var visualMapModel=this.visualMapModel;var dataExtent=visualMapModel.getExtent();var shapes=this._shapes;
var outOfRangeHandleEnds=[0,visualMapModel.itemSize[1]];var inRangeHandleEnds=forSketch?outOfRangeHandleEnds:this._handleEnds;var visualInRange=this._createBarVisual(this._dataInterval,dataExtent,inRangeHandleEnds,"inRange");var visualOutOfRange=this._createBarVisual(dataExtent,dataExtent,outOfRangeHandleEnds,"outOfRange");shapes.inRange.setStyle({fill:visualInRange.barColor,opacity:visualInRange.opacity}).setShape("points",visualInRange.barPoints);shapes.outOfRange.setStyle({fill:visualOutOfRange.barColor,opacity:visualOutOfRange.opacity}).setShape("points",visualOutOfRange.barPoints);this._updateHandle(inRangeHandleEnds,visualInRange)},_createBarVisual:function(dataInterval,dataExtent,handleEnds,forceState){var opts={forceState:forceState,convertOpacityToAlpha:true};var colorStops=this._makeColorGradient(dataInterval,opts);var symbolSizes=[this.getControllerVisual(dataInterval[0],"symbolSize",opts),this.getControllerVisual(dataInterval[1],"symbolSize",opts)];var barPoints=this._createBarPoints(handleEnds,symbolSizes);return{barColor:new LinearGradient(0,0,0,1,colorStops),barPoints:barPoints,handlesColor:[colorStops[0].color,colorStops[colorStops.length-1].color]}},_makeColorGradient:function(dataInterval,opts){var sampleNumber=100;var colorStops=[];var step=(dataInterval[1]-dataInterval[0])/sampleNumber;colorStops.push({color:this.getControllerVisual(dataInterval[0],"color",opts),offset:0});for(var i=1;i<sampleNumber;i++){var currValue=dataInterval[0]+step*i;if(currValue>dataInterval[1]){break}colorStops.push({color:this.getControllerVisual(currValue,"color",opts),offset:i/sampleNumber})}colorStops.push({color:this.getControllerVisual(dataInterval[1],"color",opts),offset:1});return colorStops},_createBarPoints:function(handleEnds,symbolSizes){var itemSize=this.visualMapModel.itemSize;return[[itemSize[0]-symbolSizes[0],handleEnds[0]],[itemSize[0],handleEnds[0]],[itemSize[0],handleEnds[1]],[itemSize[0]-symbolSizes[1],handleEnds[1]]]},_createBarGroup:function(itemAlign){var orient=this._orient;
var inverse=this.visualMapModel.get("inverse");return new Group((orient==="horizontal"&&!inverse)?{scale:itemAlign==="bottom"?[1,1]:[-1,1],rotation:Math.PI/2}:(orient==="horizontal"&&inverse)?{scale:itemAlign==="bottom"?[-1,1]:[1,1],rotation:-Math.PI/2}:(orient==="vertical"&&!inverse)?{scale:itemAlign==="left"?[1,-1]:[-1,-1]}:{scale:itemAlign==="left"?[1,1]:[-1,1]})},_updateHandle:function(handleEnds,visualInRange){if(!this._useHandle){return}var shapes=this._shapes;var visualMapModel=this.visualMapModel;var handleThumbs=shapes.handleThumbs;var handleLabels=shapes.handleLabels;each$26([0,1],function(handleIndex){var handleThumb=handleThumbs[handleIndex];handleThumb.setStyle("fill",visualInRange.handlesColor[handleIndex]);handleThumb.position[1]=handleEnds[handleIndex];var textPoint=applyTransform$1(shapes.handleLabelPoints[handleIndex],getTransform(handleThumb,this.group));handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],text:visualMapModel.formatValueText(this._dataInterval[handleIndex]),textVerticalAlign:"middle",textAlign:this._applyTransform(this._orient==="horizontal"?(handleIndex===0?"bottom":"top"):"left",shapes.barGroup)})},this)},_showIndicator:function(cursorValue,textValue,rangeSymbol,halfHoverLinkSize){var visualMapModel=this.visualMapModel;var dataExtent=visualMapModel.getExtent();var itemSize=visualMapModel.itemSize;var sizeExtent=[0,itemSize[1]];var pos=linearMap$3(cursorValue,dataExtent,sizeExtent,true);var shapes=this._shapes;var indicator=shapes.indicator;if(!indicator){return}indicator.position[1]=pos;indicator.attr("invisible",false);indicator.setShape("points",createIndicatorPoints(!!rangeSymbol,halfHoverLinkSize,pos,itemSize[1]));var opts={convertOpacityToAlpha:true};var color=this.getControllerVisual(cursorValue,"color",opts);indicator.setStyle("fill",color);var textPoint=applyTransform$1(shapes.indicatorLabelPoint,getTransform(indicator,this.group));var indicatorLabel=shapes.indicatorLabel;indicatorLabel.attr("invisible",false);
var align=this._applyTransform("left",shapes.barGroup);var orient=this._orient;indicatorLabel.setStyle({text:(rangeSymbol?rangeSymbol:"")+visualMapModel.formatValueText(textValue),textVerticalAlign:orient==="horizontal"?align:"middle",textAlign:orient==="horizontal"?"center":align,x:textPoint[0],y:textPoint[1]})},_enableHoverLinkToSeries:function(){var self=this;this._shapes.barGroup.on("mousemove",function(e){self._hovering=true;if(!self._dragging){var itemSize=self.visualMapModel.itemSize;var pos=self._applyTransform([e.offsetX,e.offsetY],self._shapes.barGroup,true,true);pos[1]=mathMin$7(mathMax$7(0,pos[1]),itemSize[1]);self._doHoverLinkToSeries(pos[1],0<=pos[0]&&pos[0]<=itemSize[0])}}).on("mouseout",function(){self._hovering=false;!self._dragging&&self._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var zr=this.api.getZr();if(this.visualMapModel.option.hoverLink){zr.on("mouseover",this._hoverLinkFromSeriesMouseOver,this);zr.on("mouseout",this._hideIndicator,this)}else{this._clearHoverLinkFromSeries()}},_doHoverLinkToSeries:function(cursorPos,hoverOnBar){var visualMapModel=this.visualMapModel;var itemSize=visualMapModel.itemSize;if(!visualMapModel.option.hoverLink){return}var sizeExtent=[0,itemSize[1]];var dataExtent=visualMapModel.getExtent();cursorPos=mathMin$7(mathMax$7(sizeExtent[0],cursorPos),sizeExtent[1]);var halfHoverLinkSize=getHalfHoverLinkSize(visualMapModel,dataExtent,sizeExtent);var hoverRange=[cursorPos-halfHoverLinkSize,cursorPos+halfHoverLinkSize];var cursorValue=linearMap$3(cursorPos,sizeExtent,dataExtent,true);var valueRange=[linearMap$3(hoverRange[0],sizeExtent,dataExtent,true),linearMap$3(hoverRange[1],sizeExtent,dataExtent,true)];hoverRange[0]<sizeExtent[0]&&(valueRange[0]=-Infinity);hoverRange[1]>sizeExtent[1]&&(valueRange[1]=Infinity);if(hoverOnBar){if(valueRange[0]===-Infinity){this._showIndicator(cursorValue,valueRange[1],"< ",halfHoverLinkSize)}else{if(valueRange[1]===Infinity){this._showIndicator(cursorValue,valueRange[0],"> ",halfHoverLinkSize)
}else{this._showIndicator(cursorValue,cursorValue," ",halfHoverLinkSize)}}}var oldBatch=this._hoverLinkDataIndices;var newBatch=[];if(hoverOnBar||useHoverLinkOnHandle(visualMapModel)){newBatch=this._hoverLinkDataIndices=visualMapModel.findTargetDataIndices(valueRange)}var resultBatches=compressBatches(oldBatch,newBatch);this._dispatchHighDown("downplay",convertDataIndex(resultBatches[0]));this._dispatchHighDown("highlight",convertDataIndex(resultBatches[1]))},_hoverLinkFromSeriesMouseOver:function(e){var el=e.target;var visualMapModel=this.visualMapModel;if(!el||el.dataIndex==null){return}var dataModel=this.ecModel.getSeriesByIndex(el.seriesIndex);if(!visualMapModel.isTargetSeries(dataModel)){return}var data=dataModel.getData(el.dataType);var value=data.get(visualMapModel.getDataDimension(data),el.dataIndex,true);if(!isNaN(value)){this._showIndicator(value,value)}},_hideIndicator:function(){var shapes=this._shapes;shapes.indicator&&shapes.indicator.attr("invisible",true);shapes.indicatorLabel&&shapes.indicatorLabel.attr("invisible",true)},_clearHoverLinkToSeries:function(){this._hideIndicator();var indices=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",convertDataIndex(indices));indices.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var zr=this.api.getZr();zr.off("mouseover",this._hoverLinkFromSeriesMouseOver);zr.off("mouseout",this._hideIndicator)},_applyTransform:function(vertex,element,inverse,global){var transform=getTransform(element,global?null:this.group);return graphic[isArray(vertex)?"applyTransform":"transformDirection"](vertex,transform,inverse)},_dispatchHighDown:function(type,batch){batch&&batch.length&&this.api.dispatchAction({type:type,batch:batch})},dispose:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()}});function createPolygon(points,cursor,onDrift,onDragEnd){return new Polygon({shape:{points:points},draggable:!!onDrift,cursor:cursor,drift:onDrift,onmousemove:function(e){stop(e.event)
},ondragend:onDragEnd})}function createHandlePoints(handleIndex,textSize){return handleIndex===0?[[0,0],[textSize,0],[textSize,-textSize]]:[[0,0],[textSize,0],[textSize,textSize]]}function createIndicatorPoints(isRange,halfHoverLinkSize,pos,extentMax){return isRange?[[0,-mathMin$7(halfHoverLinkSize,mathMax$7(pos,0))],[HOVER_LINK_OUT,0],[0,mathMin$7(halfHoverLinkSize,mathMax$7(extentMax-pos,0))]]:[[0,0],[5,-5],[5,5]]}function getHalfHoverLinkSize(visualMapModel,dataExtent,sizeExtent){var halfHoverLinkSize=HOVER_LINK_SIZE/2;var hoverLinkDataSize=visualMapModel.get("hoverLinkDataSize");if(hoverLinkDataSize){halfHoverLinkSize=linearMap$3(hoverLinkDataSize,dataExtent,sizeExtent,true)/2}return halfHoverLinkSize}function useHoverLinkOnHandle(visualMapModel){var hoverLinkOnHandle=visualMapModel.get("hoverLinkOnHandle");return !!(hoverLinkOnHandle==null?visualMapModel.get("realtime"):hoverLinkOnHandle)}function getCursor$1(orient){return orient==="vertical"?"ns-resize":"ew-resize"}var actionInfo$2={type:"selectDataRange",event:"dataRangeSelected",update:"update"};registerAction(actionInfo$2,function(payload,ecModel){ecModel.eachComponent({mainType:"visualMap",query:payload},function(model){model.setSelected(payload.selected)})});registerPreprocessor(preprocessor$2);var PiecewiseModel=VisualMapModel.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:false,maxOpen:false,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:true,showLabel:null},optionUpdated:function(newOption,isInit){PiecewiseModel.superApply(this,"optionUpdated",arguments);this._pieceList=[];this.resetExtent();var mode=this._mode=this._determineMode();resetMethods[this._mode].call(this);this._resetSelected(newOption,isInit);var categories=this.option.categories;this.resetVisual(function(mappingOption,state){if(mode==="categories"){mappingOption.mappingMethod="category";mappingOption.categories=clone(categories)
}else{mappingOption.dataExtent=this.getExtent();mappingOption.mappingMethod="piecewise";mappingOption.pieceList=map(this._pieceList,function(piece){var piece=clone(piece);if(state!=="inRange"){piece.visual=null}return piece})}})},completeVisualOption:function(){var option=this.option;var visualTypesInPieces={};var visualTypes=VisualMapping.listVisualTypes();var isCategory=this.isCategory();each$1(option.pieces,function(piece){each$1(visualTypes,function(visualType){if(piece.hasOwnProperty(visualType)){visualTypesInPieces[visualType]=1}})});each$1(visualTypesInPieces,function(v,visualType){var exists=0;each$1(this.stateList,function(state){exists|=has(option,state,visualType)||has(option.target,state,visualType)},this);!exists&&each$1(this.stateList,function(state){(option[state]||(option[state]={}))[visualType]=visualDefault.get(visualType,state==="inRange"?"active":"inactive",isCategory)})},this);function has(obj,state,visualType){return obj&&obj[state]&&(isObject$1(obj[state])?obj[state].hasOwnProperty(visualType):obj[state]===visualType)}VisualMapModel.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(newOption,isInit){var thisOption=this.option;var pieceList=this._pieceList;var selected=(isInit?thisOption:newOption).selected||{};thisOption.selected=selected;each$1(pieceList,function(piece,index){var key=this.getSelectedMapKey(piece);if(!selected.hasOwnProperty(key)){selected[key]=true}},this);if(thisOption.selectedMode==="single"){var hasSel=false;each$1(pieceList,function(piece,index){var key=this.getSelectedMapKey(piece);if(selected[key]){hasSel?(selected[key]=false):(hasSel=true)}},this)}},getSelectedMapKey:function(piece){return this._mode==="categories"?piece.value+"":piece.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var option=this.option;return option.pieces&&option.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(selected){this.option.selected=clone(selected)
},getValueState:function(value){var index=VisualMapping.findPieceIndex(value,this._pieceList);return index!=null?(this.option.selected[this.getSelectedMapKey(this._pieceList[index])]?"inRange":"outOfRange"):"outOfRange"},findTargetDataIndices:function(pieceIndex){var result=[];this.eachTargetSeries(function(seriesModel){var dataIndices=[];var data=seriesModel.getData();data.each(this.getDataDimension(data),function(value,dataIndex){var pIdx=VisualMapping.findPieceIndex(value,this._pieceList);pIdx===pieceIndex&&dataIndices.push(dataIndex)},this);result.push({seriesId:seriesModel.id,dataIndex:dataIndices})},this);return result},getRepresentValue:function(piece){var representValue;if(this.isCategory()){representValue=piece.value}else{if(piece.value!=null){representValue=piece.value}else{var pieceInterval=piece.interval||[];representValue=(pieceInterval[0]===-Infinity&&pieceInterval[1]===Infinity)?0:(pieceInterval[0]+pieceInterval[1])/2}}return representValue},getVisualMeta:function(getColorVisual){if(this.isCategory()){return}var stops=[];var outerColors=[];var visualMapModel=this;function setStop(interval,valueState){var representValue=visualMapModel.getRepresentValue({interval:interval});if(!valueState){valueState=visualMapModel.getValueState(representValue)}var color=getColorVisual(representValue,valueState);if(interval[0]===-Infinity){outerColors[0]=color}else{if(interval[1]===Infinity){outerColors[1]=color}else{stops.push({value:interval[0],color:color},{value:interval[1],color:color})}}}var pieceList=this._pieceList.slice();if(!pieceList.length){pieceList.push({interval:[-Infinity,Infinity]})}else{var edge=pieceList[0].interval[0];edge!==-Infinity&&pieceList.unshift({interval:[-Infinity,edge]});edge=pieceList[pieceList.length-1].interval[1];edge!==Infinity&&pieceList.push({interval:[edge,Infinity]})}var curr=-Infinity;each$1(pieceList,function(piece){var interval=piece.interval;if(interval){interval[0]>curr&&setStop([curr,interval[0]],"outOfRange");setStop(interval.slice());
curr=interval[1]}},this);return{stops:stops,outerColors:outerColors}}});var resetMethods={splitNumber:function(){var thisOption=this.option;var pieceList=this._pieceList;var precision=Math.min(thisOption.precision,20);var dataExtent=this.getExtent();var splitNumber=thisOption.splitNumber;splitNumber=Math.max(parseInt(splitNumber,10),1);thisOption.splitNumber=splitNumber;var splitStep=(dataExtent[1]-dataExtent[0])/splitNumber;while(+splitStep.toFixed(precision)!==splitStep&&precision<5){precision++}thisOption.precision=precision;splitStep=+splitStep.toFixed(precision);var index=0;if(thisOption.minOpen){pieceList.push({index:index++,interval:[-Infinity,dataExtent[0]],close:[0,0]})}for(var curr=dataExtent[0],len=index+splitNumber;index<len;curr+=splitStep){var max=index===splitNumber-1?dataExtent[1]:(curr+splitStep);pieceList.push({index:index++,interval:[curr,max],close:[1,1]})}if(thisOption.maxOpen){pieceList.push({index:index++,interval:[dataExtent[1],Infinity],close:[0,0]})}reformIntervals(pieceList);each$1(pieceList,function(piece){piece.text=this.formatValueText(piece.interval)},this)},categories:function(){var thisOption=this.option;each$1(thisOption.categories,function(cate){this._pieceList.push({text:this.formatValueText(cate,true),value:cate})},this);normalizeReverse(thisOption,this._pieceList)},pieces:function(){var thisOption=this.option;var pieceList=this._pieceList;each$1(thisOption.pieces,function(pieceListItem,index){if(!isObject$1(pieceListItem)){pieceListItem={value:pieceListItem}}var item={text:"",index:index};if(pieceListItem.label!=null){item.text=pieceListItem.label}if(pieceListItem.hasOwnProperty("value")){var value=item.value=pieceListItem.value;item.interval=[value,value];item.close=[1,1]}else{var interval=item.interval=[];var close=item.close=[0,0];var closeList=[1,0,1];var infinityList=[-Infinity,Infinity];var useMinMax=[];for(var lg=0;lg<2;lg++){var names=[["gte","gt","min"],["lte","lt","max"]][lg];for(var i=0;i<3&&interval[lg]==null;i++){interval[lg]=pieceListItem[names[i]];
close[lg]=closeList[i];useMinMax[lg]=i===2}interval[lg]==null&&(interval[lg]=infinityList[lg])}useMinMax[0]&&interval[1]===Infinity&&(close[0]=0);useMinMax[1]&&interval[0]===-Infinity&&(close[1]=0);if(__DEV__){if(interval[0]>interval[1]){console.warn("Piece "+index+"is illegal: "+interval+" lower bound should not greater then uppper bound.")}}if(interval[0]===interval[1]&&close[0]&&close[1]){item.value=interval[0]}}item.visual=VisualMapping.retrieveVisuals(pieceListItem);pieceList.push(item)},this);normalizeReverse(thisOption,pieceList);reformIntervals(pieceList);each$1(pieceList,function(piece){var close=piece.close;var edgeSymbols=[["<",""][close[1]],[">",""][close[0]]];piece.text=piece.text||this.formatValueText(piece.value!=null?piece.value:piece.interval,false,edgeSymbols)},this)}};function normalizeReverse(thisOption,pieceList){var inverse=thisOption.inverse;if(thisOption.orient==="vertical"?!inverse:inverse){pieceList.reverse()}}var PiecewiseVisualMapView=VisualMapView.extend({type:"visualMap.piecewise",doRender:function(){var thisGroup=this.group;thisGroup.removeAll();var visualMapModel=this.visualMapModel;var textGap=visualMapModel.get("textGap");var textStyleModel=visualMapModel.textStyleModel;var textFont=textStyleModel.getFont();var textFill=textStyleModel.getTextColor();var itemAlign=this._getItemAlign();var itemSize=visualMapModel.itemSize;var viewData=this._getViewData();var endsText=viewData.endsText;var showLabel=retrieve(visualMapModel.get("showLabel",true),!endsText);endsText&&this._renderEndsText(thisGroup,endsText[0],itemSize,showLabel,itemAlign);each$1(viewData.viewPieceList,renderItem,this);endsText&&this._renderEndsText(thisGroup,endsText[1],itemSize,showLabel,itemAlign);box(visualMapModel.get("orient"),thisGroup,visualMapModel.get("itemGap"));this.renderBackground(thisGroup);this.positionGroup(thisGroup);function renderItem(item){var piece=item.piece;var itemGroup=new Group();itemGroup.onclick=bind(this._onItemClick,this,piece);this._enableHoverLink(itemGroup,item.indexInModelPieceList);
var representValue=visualMapModel.getRepresentValue(piece);this._createItemSymbol(itemGroup,representValue,[0,0,itemSize[0],itemSize[1]]);if(showLabel){var visualState=this.visualMapModel.getValueState(representValue);itemGroup.add(new Text({style:{x:itemAlign==="right"?-textGap:itemSize[0]+textGap,y:itemSize[1]/2,text:piece.text,textVerticalAlign:"middle",textAlign:itemAlign,textFont:textFont,textFill:textFill,opacity:visualState==="outOfRange"?0.5:1}}))}thisGroup.add(itemGroup)}},_enableHoverLink:function(itemGroup,pieceIndex){itemGroup.on("mouseover",bind(onHoverLink,this,"highlight")).on("mouseout",bind(onHoverLink,this,"downplay"));function onHoverLink(method){var visualMapModel=this.visualMapModel;visualMapModel.option.hoverLink&&this.api.dispatchAction({type:method,batch:convertDataIndex(visualMapModel.findTargetDataIndices(pieceIndex))})}},_getItemAlign:function(){var visualMapModel=this.visualMapModel;var modelOption=visualMapModel.option;if(modelOption.orient==="vertical"){return getItemAlign(visualMapModel,this.api,visualMapModel.itemSize)}else{var align=modelOption.align;if(!align||align==="auto"){align="left"}return align}},_renderEndsText:function(group,text,itemSize,showLabel,itemAlign){if(!text){return}var itemGroup=new Group();var textStyleModel=this.visualMapModel.textStyleModel;itemGroup.add(new Text({style:{x:showLabel?(itemAlign==="right"?itemSize[0]:0):itemSize[0]/2,y:itemSize[1]/2,textVerticalAlign:"middle",textAlign:showLabel?itemAlign:"center",text:text,textFont:textStyleModel.getFont(),textFill:textStyleModel.getTextColor()}}));group.add(itemGroup)},_getViewData:function(){var visualMapModel=this.visualMapModel;var viewPieceList=map(visualMapModel.getPieceList(),function(piece,index){return{piece:piece,indexInModelPieceList:index}});var endsText=visualMapModel.get("text");var orient=visualMapModel.get("orient");var inverse=visualMapModel.get("inverse");if(orient==="horizontal"?inverse:!inverse){viewPieceList.reverse()}else{if(endsText){endsText=endsText.slice().reverse()
}}return{viewPieceList:viewPieceList,endsText:endsText}},_createItemSymbol:function(group,representValue,shapeParam){group.add(createSymbol(this.getControllerVisual(representValue,"symbol"),shapeParam[0],shapeParam[1],shapeParam[2],shapeParam[3],this.getControllerVisual(representValue,"color")))},_onItemClick:function(piece){var visualMapModel=this.visualMapModel;var option=visualMapModel.option;var selected=clone(option.selected);var newKey=visualMapModel.getSelectedMapKey(piece);if(option.selectedMode==="single"){selected[newKey]=true;each$1(selected,function(o,key){selected[key]=key===newKey})}else{selected[newKey]=!selected[newKey]}this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:selected})}});registerPreprocessor(preprocessor$2);var addCommas$1=addCommas;var encodeHTML$1=encodeHTML;function fillLabel(opt){defaultEmphasis(opt,"label",["show"])}var MarkerModel=extendComponentModel({type:"marker",dependencies:["series","grid","polar","geo"],init:function(option,parentModel,ecModel,extraOpt){if(__DEV__){if(this.type==="marker"){throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.")}}this.mergeDefaultAndTheme(option,ecModel);this.mergeOption(option,ecModel,extraOpt.createdBySelf,true)},isAnimationEnabled:function(){if(env$1.node){return false}var hostSeries=this.__hostSeries;return this.getShallow("animation")&&hostSeries&&hostSeries.isAnimationEnabled()},mergeOption:function(newOpt,ecModel,createdBySelf,isInit){var MarkerModel=this.constructor;var modelPropName=this.mainType+"Model";if(!createdBySelf){ecModel.eachSeries(function(seriesModel){var markerOpt=seriesModel.get(this.mainType,true);var markerModel=seriesModel[modelPropName];if(!markerOpt||!markerOpt.data){seriesModel[modelPropName]=null;return}if(!markerModel){if(isInit){fillLabel(markerOpt)}each$1(markerOpt.data,function(item){if(item instanceof Array){fillLabel(item[0]);fillLabel(item[1])}else{fillLabel(item)
}});markerModel=new MarkerModel(markerOpt,this,ecModel);extend(markerModel,{mainType:this.mainType,seriesIndex:seriesModel.seriesIndex,name:seriesModel.name,createdBySelf:true});markerModel.__hostSeries=seriesModel}else{markerModel.mergeOption(markerOpt,ecModel,true)}seriesModel[modelPropName]=markerModel},this)}},formatTooltip:function(dataIndex){var data=this.getData();var value=this.getRawValue(dataIndex);var formattedValue=isArray(value)?map(value,addCommas$1).join(", "):addCommas$1(value);var name=data.getName(dataIndex);var html=encodeHTML$1(this.name);if(value!=null||name){html+="<br />"}if(name){html+=encodeHTML$1(name);if(value!=null){html+=" : "}}if(value!=null){html+=encodeHTML$1(formattedValue)}return html},getData:function(){return this._data},setData:function(data){this._data=data}});mixin(MarkerModel,dataFormatMixin);MarkerModel.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:true,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:true}}}});var indexOf$2=indexOf;function hasXOrY(item){return !(isNaN(parseFloat(item.x))&&isNaN(parseFloat(item.y)))}function hasXAndY(item){return !isNaN(parseFloat(item.x))&&!isNaN(parseFloat(item.y))}function markerTypeCalculatorWithExtent(mlType,data,otherDataDim,targetDataDim,otherCoordIndex,targetCoordIndex){var coordArr=[];var stacked=isDimensionStacked(data,targetDataDim);var calcDataDim=stacked?data.getCalculationInfo("stackResultDimension"):targetDataDim;var value=numCalculate(data,calcDataDim,mlType);var dataIndex=data.indicesOfNearest(calcDataDim,value)[0];coordArr[otherCoordIndex]=data.get(otherDataDim,dataIndex);coordArr[targetCoordIndex]=data.get(targetDataDim,dataIndex);var precision=getPrecision(data.get(targetDataDim,dataIndex));precision=Math.min(precision,20);if(precision>=0){coordArr[targetCoordIndex]=+coordArr[targetCoordIndex].toFixed(precision)}return coordArr}var curry$6=curry;var markerTypeCalculator={min:curry$6(markerTypeCalculatorWithExtent,"min"),max:curry$6(markerTypeCalculatorWithExtent,"max"),average:curry$6(markerTypeCalculatorWithExtent,"average")};
function dataTransform(seriesModel,item){var data=seriesModel.getData();var coordSys=seriesModel.coordinateSystem;if(item&&!hasXAndY(item)&&!isArray(item.coord)&&coordSys){var dims=coordSys.dimensions;var axisInfo=getAxisInfo$1(item,data,coordSys,seriesModel);item=clone(item);if(item.type&&markerTypeCalculator[item.type]&&axisInfo.baseAxis&&axisInfo.valueAxis){var otherCoordIndex=indexOf$2(dims,axisInfo.baseAxis.dim);var targetCoordIndex=indexOf$2(dims,axisInfo.valueAxis.dim);item.coord=markerTypeCalculator[item.type](data,axisInfo.baseDataDim,axisInfo.valueDataDim,otherCoordIndex,targetCoordIndex);item.value=item.coord[targetCoordIndex]}else{var coord=[item.xAxis!=null?item.xAxis:item.radiusAxis,item.yAxis!=null?item.yAxis:item.angleAxis];for(var i=0;i<2;i++){if(markerTypeCalculator[coord[i]]){coord[i]=numCalculate(data,data.mapDimension(dims[i]),coord[i])}}item.coord=coord}}return item}function getAxisInfo$1(item,data,coordSys,seriesModel){var ret={};if(item.valueIndex!=null||item.valueDim!=null){ret.valueDataDim=item.valueIndex!=null?data.getDimension(item.valueIndex):item.valueDim;ret.valueAxis=coordSys.getAxis(dataDimToCoordDim(seriesModel,ret.valueDataDim));ret.baseAxis=coordSys.getOtherAxis(ret.valueAxis);ret.baseDataDim=data.mapDimension(ret.baseAxis.dim)}else{ret.baseAxis=seriesModel.getBaseAxis();ret.valueAxis=coordSys.getOtherAxis(ret.baseAxis);ret.baseDataDim=data.mapDimension(ret.baseAxis.dim);ret.valueDataDim=data.mapDimension(ret.valueAxis.dim)}return ret}function dataDimToCoordDim(seriesModel,dataDim){var data=seriesModel.getData();var dimensions=data.dimensions;dataDim=data.getDimension(dataDim);for(var i=0;i<dimensions.length;i++){var dimItem=data.getDimensionInfo(dimensions[i]);if(dimItem.name===dataDim){return dimItem.coordDim}}}function dataFilter$1(coordSys,item){return(coordSys&&coordSys.containData&&item.coord&&!hasXOrY(item))?coordSys.containData(item.coord):true}function dimValueGetter(item,dimName,dataIndex,dimIndex){if(dimIndex<2){return item.coord&&item.coord[dimIndex]
}return item.value}function numCalculate(data,valueDataDim,type){if(type==="average"){var sum=0;var count=0;data.each(valueDataDim,function(val,idx){if(!isNaN(val)){sum+=val;count++}});return sum/count}else{if(type==="median"){return data.getMedian(valueDataDim)}else{return data.getDataExtent(valueDataDim,true)[type==="max"?1:0]}}}var MarkerView=extendComponentView({type:"marker",init:function(){this.markerGroupMap=createHashMap()},render:function(markerModel,ecModel,api){var markerGroupMap=this.markerGroupMap;markerGroupMap.each(function(item){item.__keep=false});var markerModelKey=this.type+"Model";ecModel.eachSeries(function(seriesModel){var markerModel=seriesModel[markerModelKey];markerModel&&this.renderSeries(seriesModel,markerModel,ecModel,api)},this);markerGroupMap.each(function(item){!item.__keep&&this.group.remove(item.group)},this)},renderSeries:function(){}});function updateMarkerLayout(mpData,seriesModel,api){var coordSys=seriesModel.coordinateSystem;mpData.each(function(idx){var itemModel=mpData.getItemModel(idx);var point;var xPx=parsePercent$1(itemModel.get("x"),api.getWidth());var yPx=parsePercent$1(itemModel.get("y"),api.getHeight());if(!isNaN(xPx)&&!isNaN(yPx)){point=[xPx,yPx]}else{if(seriesModel.getMarkerPosition){point=seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions,idx))}else{if(coordSys){var x=mpData.get(coordSys.dimensions[0],idx);var y=mpData.get(coordSys.dimensions[1],idx);point=coordSys.dataToPoint([x,y])}}}if(!isNaN(xPx)){point[0]=xPx}if(!isNaN(yPx)){point[1]=yPx}mpData.setItemLayout(idx,point)})}MarkerView.extend({type:"markPoint",updateTransform:function(markPointModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var mpModel=seriesModel.markPointModel;if(mpModel){updateMarkerLayout(mpModel.getData(),seriesModel,api);this.markerGroupMap.get(seriesModel.id).updateLayout(mpModel)}},this)},renderSeries:function(seriesModel,mpModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;var seriesId=seriesModel.id;var seriesData=seriesModel.getData();
var symbolDrawMap=this.markerGroupMap;var symbolDraw=symbolDrawMap.get(seriesId)||symbolDrawMap.set(seriesId,new SymbolDraw());var mpData=createList$1(coordSys,seriesModel,mpModel);mpModel.setData(mpData);updateMarkerLayout(mpModel.getData(),seriesModel,api);mpData.each(function(idx){var itemModel=mpData.getItemModel(idx);var symbolSize=itemModel.getShallow("symbolSize");if(typeof symbolSize==="function"){symbolSize=symbolSize(mpModel.getRawValue(idx),mpModel.getDataParams(idx))}mpData.setItemVisual(idx,{symbolSize:symbolSize,color:itemModel.get("itemStyle.color")||seriesData.getVisual("color"),symbol:itemModel.getShallow("symbol")})});symbolDraw.updateData(mpData);this.group.add(symbolDraw.group);mpData.eachItemGraphicEl(function(el){el.traverse(function(child){child.dataModel=mpModel})});symbolDraw.__keep=true;symbolDraw.group.silent=mpModel.get("silent")||seriesModel.get("silent")}});function createList$1(coordSys,seriesModel,mpModel){var coordDimsInfos;if(coordSys){coordDimsInfos=map(coordSys&&coordSys.dimensions,function(coordDim){var info=seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim))||{};return defaults({name:coordDim},info)})}else{coordDimsInfos=[{name:"value",type:"float"}]}var mpData=new List(coordDimsInfos,mpModel);var dataOpt=map(mpModel.get("data"),curry(dataTransform,seriesModel));if(coordSys){dataOpt=filter(dataOpt,curry(dataFilter$1,coordSys))}mpData.initData(dataOpt,null,coordSys?dimValueGetter:function(item){return item.value});return mpData}registerPreprocessor(function(opt){opt.markPoint=opt.markPoint||{}});MarkerModel.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:true,position:"end"},lineStyle:{type:"dashed"},emphasis:{label:{show:true},lineStyle:{width:3}},animationEasing:"linear"}});var markLineTransform=function(seriesModel,coordSys,mlModel,item){var data=seriesModel.getData();var mlType=item.type;if(!isArray(item)&&(mlType==="min"||mlType==="max"||mlType==="average"||mlType==="median"||(item.xAxis!=null||item.yAxis!=null))){var valueAxis;
var valueDataDim;var value;if(item.yAxis!=null||item.xAxis!=null){valueDataDim=item.yAxis!=null?"y":"x";valueAxis=coordSys.getAxis(valueDataDim);value=retrieve(item.yAxis,item.xAxis)}else{var axisInfo=getAxisInfo$1(item,data,coordSys,seriesModel);valueDataDim=axisInfo.valueDataDim;valueAxis=axisInfo.valueAxis;value=numCalculate(data,valueDataDim,mlType)}var valueIndex=valueDataDim==="x"?0:1;var baseIndex=1-valueIndex;var mlFrom=clone(item);var mlTo={};mlFrom.type=null;mlFrom.coord=[];mlTo.coord=[];mlFrom.coord[baseIndex]=-Infinity;mlTo.coord[baseIndex]=Infinity;var precision=mlModel.get("precision");if(precision>=0&&typeof value==="number"){value=+value.toFixed(Math.min(precision,20))}mlFrom.coord[valueIndex]=mlTo.coord[valueIndex]=value;item=[mlFrom,mlTo,{type:mlType,valueIndex:item.valueIndex,value:value}]}item=[dataTransform(seriesModel,item[0]),dataTransform(seriesModel,item[1]),extend({},item[2])];item[2].type=item[2].type||"";merge(item[2],item[0]);merge(item[2],item[1]);return item};function isInifinity(val){return !isNaN(val)&&!isFinite(val)}function ifMarkLineHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){var otherDimIndex=1-dimIndex;var dimName=coordSys.dimensions[dimIndex];return isInifinity(fromCoord[otherDimIndex])&&isInifinity(toCoord[otherDimIndex])&&fromCoord[dimIndex]===toCoord[dimIndex]&&coordSys.getAxis(dimName).containData(fromCoord[dimIndex])}function markLineFilter(coordSys,item){if(coordSys.type==="cartesian2d"){var fromCoord=item[0].coord;var toCoord=item[1].coord;if(fromCoord&&toCoord&&(ifMarkLineHasOnlyDim(1,fromCoord,toCoord,coordSys)||ifMarkLineHasOnlyDim(0,fromCoord,toCoord,coordSys))){return true}}return dataFilter$1(coordSys,item[0])&&dataFilter$1(coordSys,item[1])}function updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api){var coordSys=seriesModel.coordinateSystem;var itemModel=data.getItemModel(idx);var point;var xPx=parsePercent$1(itemModel.get("x"),api.getWidth());var yPx=parsePercent$1(itemModel.get("y"),api.getHeight());
if(!isNaN(xPx)&&!isNaN(yPx)){point=[xPx,yPx]}else{if(seriesModel.getMarkerPosition){point=seriesModel.getMarkerPosition(data.getValues(data.dimensions,idx))}else{var dims=coordSys.dimensions;var x=data.get(dims[0],idx);var y=data.get(dims[1],idx);point=coordSys.dataToPoint([x,y])}if(coordSys.type==="cartesian2d"){var xAxis=coordSys.getAxis("x");var yAxis=coordSys.getAxis("y");var dims=coordSys.dimensions;if(isInifinity(data.get(dims[0],idx))){point[0]=xAxis.toGlobalCoord(xAxis.getExtent()[isFrom?0:1])}else{if(isInifinity(data.get(dims[1],idx))){point[1]=yAxis.toGlobalCoord(yAxis.getExtent()[isFrom?0:1])}}}if(!isNaN(xPx)){point[0]=xPx}if(!isNaN(yPx)){point[1]=yPx}}data.setItemLayout(idx,point)}MarkerView.extend({type:"markLine",updateTransform:function(markLineModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var mlModel=seriesModel.markLineModel;if(mlModel){var mlData=mlModel.getData();var fromData=mlModel.__from;var toData=mlModel.__to;fromData.each(function(idx){updateSingleMarkerEndLayout(fromData,idx,true,seriesModel,api);updateSingleMarkerEndLayout(toData,idx,false,seriesModel,api)});mlData.each(function(idx){mlData.setItemLayout(idx,[fromData.getItemLayout(idx),toData.getItemLayout(idx)])});this.markerGroupMap.get(seriesModel.id).updateLayout()}},this)},renderSeries:function(seriesModel,mlModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;var seriesId=seriesModel.id;var seriesData=seriesModel.getData();var lineDrawMap=this.markerGroupMap;var lineDraw=lineDrawMap.get(seriesId)||lineDrawMap.set(seriesId,new LineDraw());this.group.add(lineDraw.group);var mlData=createList$2(coordSys,seriesModel,mlModel);var fromData=mlData.from;var toData=mlData.to;var lineData=mlData.line;mlModel.__from=fromData;mlModel.__to=toData;mlModel.setData(lineData);var symbolType=mlModel.get("symbol");var symbolSize=mlModel.get("symbolSize");if(!isArray(symbolType)){symbolType=[symbolType,symbolType]}if(typeof symbolSize==="number"){symbolSize=[symbolSize,symbolSize]}mlData.from.each(function(idx){updateDataVisualAndLayout(fromData,idx,true);
updateDataVisualAndLayout(toData,idx,false)});lineData.each(function(idx){var lineColor=lineData.getItemModel(idx).get("lineStyle.color");lineData.setItemVisual(idx,{color:lineColor||fromData.getItemVisual(idx,"color")});lineData.setItemLayout(idx,[fromData.getItemLayout(idx),toData.getItemLayout(idx)]);lineData.setItemVisual(idx,{"fromSymbolSize":fromData.getItemVisual(idx,"symbolSize"),"fromSymbol":fromData.getItemVisual(idx,"symbol"),"toSymbolSize":toData.getItemVisual(idx,"symbolSize"),"toSymbol":toData.getItemVisual(idx,"symbol")})});lineDraw.updateData(lineData);mlData.line.eachItemGraphicEl(function(el,idx){el.traverse(function(child){child.dataModel=mlModel})});function updateDataVisualAndLayout(data,idx,isFrom){var itemModel=data.getItemModel(idx);updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api);data.setItemVisual(idx,{symbolSize:itemModel.get("symbolSize")||symbolSize[isFrom?0:1],symbol:itemModel.get("symbol",true)||symbolType[isFrom?0:1],color:itemModel.get("itemStyle.color")||seriesData.getVisual("color")})}lineDraw.__keep=true;lineDraw.group.silent=mlModel.get("silent")||seriesModel.get("silent")}});function createList$2(coordSys,seriesModel,mlModel){var coordDimsInfos;if(coordSys){coordDimsInfos=map(coordSys&&coordSys.dimensions,function(coordDim){var info=seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim))||{};return defaults({name:coordDim},info)})}else{coordDimsInfos=[{name:"value",type:"float"}]}var fromData=new List(coordDimsInfos,mlModel);var toData=new List(coordDimsInfos,mlModel);var lineData=new List([],mlModel);var optData=map(mlModel.get("data"),curry(markLineTransform,seriesModel,coordSys,mlModel));if(coordSys){optData=filter(optData,curry(markLineFilter,coordSys))}var dimValueGetter$$1=coordSys?dimValueGetter:function(item){return item.value};fromData.initData(map(optData,function(item){return item[0]}),null,dimValueGetter$$1);toData.initData(map(optData,function(item){return item[1]}),null,dimValueGetter$$1);
lineData.initData(map(optData,function(item){return item[2]}));lineData.hasItemOption=true;return{from:fromData,to:toData,line:lineData}}registerPreprocessor(function(opt){opt.markLine=opt.markLine||{}});MarkerModel.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:false,label:{show:true,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:true,position:"top"}}}});var markAreaTransform=function(seriesModel,coordSys,maModel,item){var lt=dataTransform(seriesModel,item[0]);var rb=dataTransform(seriesModel,item[1]);var retrieve$$1=retrieve;var ltCoord=lt.coord;var rbCoord=rb.coord;ltCoord[0]=retrieve$$1(ltCoord[0],-Infinity);ltCoord[1]=retrieve$$1(ltCoord[1],-Infinity);rbCoord[0]=retrieve$$1(rbCoord[0],Infinity);rbCoord[1]=retrieve$$1(rbCoord[1],Infinity);var result=mergeAll([{},lt,rb]);result.coord=[lt.coord,rb.coord];result.x0=lt.x;result.y0=lt.y;result.x1=rb.x;result.y1=rb.y;return result};function isInifinity$1(val){return !isNaN(val)&&!isFinite(val)}function ifMarkLineHasOnlyDim$1(dimIndex,fromCoord,toCoord,coordSys){var otherDimIndex=1-dimIndex;return isInifinity$1(fromCoord[otherDimIndex])&&isInifinity$1(toCoord[otherDimIndex])}function markAreaFilter(coordSys,item){var fromCoord=item.coord[0];var toCoord=item.coord[1];if(coordSys.type==="cartesian2d"){if(fromCoord&&toCoord&&(ifMarkLineHasOnlyDim$1(1,fromCoord,toCoord,coordSys)||ifMarkLineHasOnlyDim$1(0,fromCoord,toCoord,coordSys))){return true}}return dataFilter$1(coordSys,{coord:fromCoord,x:item.x0,y:item.y0})||dataFilter$1(coordSys,{coord:toCoord,x:item.x1,y:item.y1})}function getSingleMarkerEndPoint(data,idx,dims,seriesModel,api){var coordSys=seriesModel.coordinateSystem;var itemModel=data.getItemModel(idx);var point;var xPx=parsePercent$1(itemModel.get(dims[0]),api.getWidth());var yPx=parsePercent$1(itemModel.get(dims[1]),api.getHeight());if(!isNaN(xPx)&&!isNaN(yPx)){point=[xPx,yPx]}else{if(seriesModel.getMarkerPosition){point=seriesModel.getMarkerPosition(data.getValues(dims,idx))
}else{var x=data.get(dims[0],idx);var y=data.get(dims[1],idx);var pt=[x,y];coordSys.clampData&&coordSys.clampData(pt,pt);point=coordSys.dataToPoint(pt,true)}if(coordSys.type==="cartesian2d"){var xAxis=coordSys.getAxis("x");var yAxis=coordSys.getAxis("y");var x=data.get(dims[0],idx);var y=data.get(dims[1],idx);if(isInifinity$1(x)){point[0]=xAxis.toGlobalCoord(xAxis.getExtent()[dims[0]==="x0"?0:1])}else{if(isInifinity$1(y)){point[1]=yAxis.toGlobalCoord(yAxis.getExtent()[dims[1]==="y0"?0:1])}}}if(!isNaN(xPx)){point[0]=xPx}if(!isNaN(yPx)){point[1]=yPx}}return point}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];MarkerView.extend({type:"markArea",updateTransform:function(markAreaModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var maModel=seriesModel.markAreaModel;if(maModel){var areaData=maModel.getData();areaData.each(function(idx){var points=map(dimPermutations,function(dim){return getSingleMarkerEndPoint(areaData,idx,dim,seriesModel,api)});areaData.setItemLayout(idx,points);var el=areaData.getItemGraphicEl(idx);el.setShape("points",points)})}},this)},renderSeries:function(seriesModel,maModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;var seriesId=seriesModel.id;var seriesData=seriesModel.getData();var areaGroupMap=this.markerGroupMap;var polygonGroup=areaGroupMap.get(seriesId)||areaGroupMap.set(seriesId,{group:new Group()});this.group.add(polygonGroup.group);polygonGroup.__keep=true;var areaData=createList$3(coordSys,seriesModel,maModel);maModel.setData(areaData);areaData.each(function(idx){areaData.setItemLayout(idx,map(dimPermutations,function(dim){return getSingleMarkerEndPoint(areaData,idx,dim,seriesModel,api)}));areaData.setItemVisual(idx,{color:seriesData.getVisual("color")})});areaData.diff(polygonGroup.__data).add(function(idx){var polygon=new Polygon({shape:{points:areaData.getItemLayout(idx)}});areaData.setItemGraphicEl(idx,polygon);polygonGroup.group.add(polygon)}).update(function(newIdx,oldIdx){var polygon=polygonGroup.__data.getItemGraphicEl(oldIdx);
updateProps(polygon,{shape:{points:areaData.getItemLayout(newIdx)}},maModel,newIdx);polygonGroup.group.add(polygon);areaData.setItemGraphicEl(newIdx,polygon)}).remove(function(idx){var polygon=polygonGroup.__data.getItemGraphicEl(idx);polygonGroup.group.remove(polygon)}).execute();areaData.eachItemGraphicEl(function(polygon,idx){var itemModel=areaData.getItemModel(idx);var labelModel=itemModel.getModel("label");var labelHoverModel=itemModel.getModel("emphasis.label");var color=areaData.getItemVisual(idx,"color");polygon.useStyle(defaults(itemModel.getModel("itemStyle").getItemStyle(),{fill:modifyAlpha(color,0.4),stroke:color}));polygon.hoverStyle=itemModel.getModel("emphasis.itemStyle").getItemStyle();setLabelStyle(polygon.style,polygon.hoverStyle,labelModel,labelHoverModel,{labelFetcher:maModel,labelDataIndex:idx,defaultText:areaData.getName(idx)||"",isRectText:true,autoColor:color});setHoverStyle(polygon,{});polygon.dataModel=maModel});polygonGroup.__data=areaData;polygonGroup.group.silent=maModel.get("silent")||seriesModel.get("silent")}});function createList$3(coordSys,seriesModel,maModel){var coordDimsInfos;var areaData;var dims=["x0","y0","x1","y1"];if(coordSys){coordDimsInfos=map(coordSys&&coordSys.dimensions,function(coordDim){var data=seriesModel.getData();var info=data.getDimensionInfo(data.mapDimension(coordDim))||{};return defaults({name:coordDim},info)});areaData=new List(map(dims,function(dim,idx){return{name:dim,type:coordDimsInfos[idx%2].type}}),maModel)}else{coordDimsInfos=[{name:"value",type:"float"}];areaData=new List(coordDimsInfos,maModel)}var optData=map(maModel.get("data"),curry(markAreaTransform,seriesModel,coordSys,maModel));if(coordSys){optData=filter(optData,curry(markAreaFilter,coordSys))}var dimValueGetter$$1=coordSys?function(item,dimName,dataIndex,dimIndex){return item.coord[Math.floor(dimIndex/2)][dimIndex%2]}:function(item){return item.value};areaData.initData(optData,null,dimValueGetter$$1);areaData.hasItemOption=true;return areaData
}registerPreprocessor(function(opt){opt.markArea=opt.markArea||{}});var preprocessor$3=function(option){var timelineOpt=option&&option.timeline;if(!isArray(timelineOpt)){timelineOpt=timelineOpt?[timelineOpt]:[]}each$1(timelineOpt,function(opt){if(!opt){return}compatibleEC2(opt)})};function compatibleEC2(opt){var type=opt.type;var ec2Types={"number":"value","time":"time"};if(ec2Types[type]){opt.axisType=ec2Types[type];delete opt.type}transferItem(opt);if(has$2(opt,"controlPosition")){var controlStyle=opt.controlStyle||(opt.controlStyle={});if(!has$2(controlStyle,"position")){controlStyle.position=opt.controlPosition}if(controlStyle.position==="none"&&!has$2(controlStyle,"show")){controlStyle.show=false;delete controlStyle.position}delete opt.controlPosition}each$1(opt.data||[],function(dataItem){if(isObject$1(dataItem)&&!isArray(dataItem)){if(!has$2(dataItem,"value")&&has$2(dataItem,"name")){dataItem.value=dataItem.name}transferItem(dataItem)}})}function transferItem(opt){var itemStyle=opt.itemStyle||(opt.itemStyle={});var itemStyleEmphasis=itemStyle.emphasis||(itemStyle.emphasis={});var label=opt.label||(opt.label||{});var labelNormal=label.normal||(label.normal={});var excludeLabelAttr={normal:1,emphasis:1};each$1(label,function(value,name){if(!excludeLabelAttr[name]&&!has$2(labelNormal,name)){labelNormal[name]=value}});if(itemStyleEmphasis.label&&!has$2(label,"emphasis")){label.emphasis=itemStyleEmphasis.label;delete itemStyleEmphasis.label}}function has$2(obj,attr){return obj.hasOwnProperty(attr)}ComponentModel.registerSubTypeDefaulter("timeline",function(){return"slider"});registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(payload,ecModel){var timelineModel=ecModel.getComponent("timeline");if(timelineModel&&payload.currentIndex!=null){timelineModel.setCurrentIndex(payload.currentIndex);if(!timelineModel.get("loop",true)&&timelineModel.isIndexMax()){timelineModel.setPlayState(false)}}ecModel.resetOption("timeline");return defaults({currentIndex:timelineModel.option.currentIndex},payload)
});registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(payload,ecModel){var timelineModel=ecModel.getComponent("timeline");if(timelineModel&&payload.playState!=null){timelineModel.setPlayState(payload.playState)}});var TimelineModel=ComponentModel.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:true,axisType:"time",realtime:true,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:false,rewind:false,loop:true,playInterval:2000,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(option,parentModel,ecModel){this._data;this._names;this.mergeDefaultAndTheme(option,ecModel);this._initData()},mergeOption:function(option){TimelineModel.superApply(this,"mergeOption",arguments);this._initData()},setCurrentIndex:function(currentIndex){if(currentIndex==null){currentIndex=this.option.currentIndex}var count=this._data.count();if(this.option.loop){currentIndex=(currentIndex%count+count)%count}else{currentIndex>=count&&(currentIndex=count-1);currentIndex<0&&(currentIndex=0)}this.option.currentIndex=currentIndex},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(state){this.option.autoPlay=!!state},getPlayState:function(){return !!this.option.autoPlay},_initData:function(){var thisOption=this.option;var dataArr=thisOption.data||[];var axisType=thisOption.axisType;var names=this._names=[];if(axisType==="category"){var idxArr=[];each$1(dataArr,function(item,index){var value=getDataItemValue(item);var newItem;if(isObject$1(item)){newItem=clone(item);newItem.value=index}else{newItem=index}idxArr.push(newItem);if(!isString(value)&&(value==null||isNaN(value))){value=""}names.push(value+"")});dataArr=idxArr}var dimType=({category:"ordinal",time:"time"})[axisType]||"number";var data=this._data=new List([{name:"value",type:dimType}],this);data.initData(dataArr,names)
},getData:function(){return this._data},getCategories:function(){if(this.get("axisType")==="category"){return this._names.slice()}}});var SliderTimelineModel=TimelineModel.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:false,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:true,width:2,color:"#304654"},label:{position:"auto",show:true,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:true,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:true,showPlayBtn:true,showPrevBtn:true,showNextBtn:true,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:true,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});
mixin(SliderTimelineModel,dataFormatMixin);var TimelineView=Component.extend({type:"timeline"});var TimelineAxis=function(dim,scale,coordExtent,axisType){Axis.call(this,dim,scale,coordExtent);this.type=axisType||"value";this.model=null};TimelineAxis.prototype={constructor:TimelineAxis,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return this.model.get("orient")==="horizontal"}};inherits(TimelineAxis,Axis);var bind$6=bind;var each$27=each$1;var PI$4=Math.PI;TimelineView.extend({type:"timeline.slider",init:function(ecModel,api){this.api=api;this._axis;this._viewRect;this._timer;this._currentPointer;this._mainGroup;this._labelGroup},render:function(timelineModel,ecModel,api,payload){this.model=timelineModel;this.api=api;this.ecModel=ecModel;this.group.removeAll();if(timelineModel.get("show",true)){var layoutInfo=this._layout(timelineModel,api);var mainGroup=this._createGroup("mainGroup");var labelGroup=this._createGroup("labelGroup");var axis=this._axis=this._createAxis(layoutInfo,timelineModel);timelineModel.formatTooltip=function(dataIndex){return encodeHTML(axis.scale.getLabel(dataIndex))};each$27(["AxisLine","AxisTick","Control","CurrentPointer"],function(name){this["_render"+name](layoutInfo,mainGroup,axis,timelineModel)},this);this._renderAxisLabel(layoutInfo,labelGroup,axis,timelineModel);this._position(layoutInfo,timelineModel)}this._doPlayStop()},remove:function(){this._clearTimer();this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(timelineModel,api){var labelPosOpt=timelineModel.get("label.position");var orient=timelineModel.get("orient");var viewRect=getViewRect$4(timelineModel,api);if(labelPosOpt==null||labelPosOpt==="auto"){labelPosOpt=orient==="horizontal"?((viewRect.y+viewRect.height/2)<api.getHeight()/2?"-":"+"):((viewRect.x+viewRect.width/2)<api.getWidth()/2?"+":"-")}else{if(isNaN(labelPosOpt)){labelPosOpt=({horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}})[orient][labelPosOpt]
}}var labelAlignMap={horizontal:"center",vertical:(labelPosOpt>=0||labelPosOpt==="+")?"left":"right"};var labelBaselineMap={horizontal:(labelPosOpt>=0||labelPosOpt==="+")?"top":"bottom",vertical:"middle"};var rotationMap={horizontal:0,vertical:PI$4/2};var mainLength=orient==="vertical"?viewRect.height:viewRect.width;var controlModel=timelineModel.getModel("controlStyle");var showControl=controlModel.get("show",true);var controlSize=showControl?controlModel.get("itemSize"):0;var controlGap=showControl?controlModel.get("itemGap"):0;var sizePlusGap=controlSize+controlGap;var labelRotation=timelineModel.get("label.rotate")||0;labelRotation=labelRotation*PI$4/180;var playPosition;var prevBtnPosition;var nextBtnPosition;var axisExtent;var controlPosition=controlModel.get("position",true);var showPlayBtn=showControl&&controlModel.get("showPlayBtn",true);var showPrevBtn=showControl&&controlModel.get("showPrevBtn",true);var showNextBtn=showControl&&controlModel.get("showNextBtn",true);var xLeft=0;var xRight=mainLength;if(controlPosition==="left"||controlPosition==="bottom"){showPlayBtn&&(playPosition=[0,0],xLeft+=sizePlusGap);showPrevBtn&&(prevBtnPosition=[xLeft,0],xLeft+=sizePlusGap);showNextBtn&&(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap)}else{showPlayBtn&&(playPosition=[xRight-controlSize,0],xRight-=sizePlusGap);showPrevBtn&&(prevBtnPosition=[0,0],xLeft+=sizePlusGap);showNextBtn&&(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap)}axisExtent=[xLeft,xRight];if(timelineModel.get("inverse")){axisExtent.reverse()}return{viewRect:viewRect,mainLength:mainLength,orient:orient,rotation:rotationMap[orient],labelRotation:labelRotation,labelPosOpt:labelPosOpt,labelAlign:timelineModel.get("label.align")||labelAlignMap[orient],labelBaseline:timelineModel.get("label.verticalAlign")||timelineModel.get("label.baseline")||labelBaselineMap[orient],playPosition:playPosition,prevBtnPosition:prevBtnPosition,nextBtnPosition:nextBtnPosition,axisExtent:axisExtent,controlSize:controlSize,controlGap:controlGap}
},_position:function(layoutInfo,timelineModel){var mainGroup=this._mainGroup;var labelGroup=this._labelGroup;var viewRect=layoutInfo.viewRect;if(layoutInfo.orient==="vertical"){var m=create$1();var rotateOriginX=viewRect.x;var rotateOriginY=viewRect.y+viewRect.height;translate(m,m,[-rotateOriginX,-rotateOriginY]);rotate(m,m,-PI$4/2);translate(m,m,[rotateOriginX,rotateOriginY]);viewRect=viewRect.clone();viewRect.applyTransform(m)}var viewBound=getBound(viewRect);var mainBound=getBound(mainGroup.getBoundingRect());var labelBound=getBound(labelGroup.getBoundingRect());var mainPosition=mainGroup.position;var labelsPosition=labelGroup.position;labelsPosition[0]=mainPosition[0]=viewBound[0][0];var labelPosOpt=layoutInfo.labelPosOpt;if(isNaN(labelPosOpt)){var mainBoundIdx=labelPosOpt==="+"?0:1;toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx);toBound(labelsPosition,labelBound,viewBound,1,1-mainBoundIdx)}else{var mainBoundIdx=labelPosOpt>=0?0:1;toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx);labelsPosition[1]=mainPosition[1]+labelPosOpt}mainGroup.attr("position",mainPosition);labelGroup.attr("position",labelsPosition);mainGroup.rotation=labelGroup.rotation=layoutInfo.rotation;setOrigin(mainGroup);setOrigin(labelGroup);function setOrigin(targetGroup){var pos=targetGroup.position;targetGroup.origin=[viewBound[0][0]-pos[0],viewBound[1][0]-pos[1]]}function getBound(rect){return[[rect.x,rect.x+rect.width],[rect.y,rect.y+rect.height]]}function toBound(fromPos,from,to,dimIdx,boundIdx){fromPos[dimIdx]+=to[dimIdx][boundIdx]-from[dimIdx][boundIdx]}},_createAxis:function(layoutInfo,timelineModel){var data=timelineModel.getData();var axisType=timelineModel.get("axisType");var scale=createScaleByModel(timelineModel,axisType);scale.getTicks=function(){return data.mapArray(["value"],function(value){return value})};var dataExtent=data.getDataExtent("value");scale.setExtent(dataExtent[0],dataExtent[1]);scale.niceTicks();var axis=new TimelineAxis("value",scale,layoutInfo.axisExtent,axisType);
axis.model=timelineModel;return axis},_createGroup:function(name){var newGroup=this["_"+name]=new Group();this.group.add(newGroup);return newGroup},_renderAxisLine:function(layoutInfo,group,axis,timelineModel){var axisExtent=axis.getExtent();if(!timelineModel.get("lineStyle.show")){return}group.add(new Line({shape:{x1:axisExtent[0],y1:0,x2:axisExtent[1],y2:0},style:extend({lineCap:"round"},timelineModel.getModel("lineStyle").getLineStyle()),silent:true,z2:1}))},_renderAxisTick:function(layoutInfo,group,axis,timelineModel){var data=timelineModel.getData();var ticks=axis.scale.getTicks();each$27(ticks,function(value){var tickCoord=axis.dataToCoord(value);var itemModel=data.getItemModel(value);var itemStyleModel=itemModel.getModel("itemStyle");var hoverStyleModel=itemModel.getModel("emphasis.itemStyle");var symbolOpt={position:[tickCoord,0],onclick:bind$6(this._changeTimeline,this,value)};var el=giveSymbol(itemModel,itemStyleModel,group,symbolOpt);setHoverStyle(el,hoverStyleModel.getItemStyle());if(itemModel.get("tooltip")){el.dataIndex=value;el.dataModel=timelineModel}else{el.dataIndex=el.dataModel=null}},this)},_renderAxisLabel:function(layoutInfo,group,axis,timelineModel){var labelModel=axis.getLabelModel();if(!labelModel.get("show")){return}var data=timelineModel.getData();var labels=axis.getViewLabels();each$27(labels,function(labelItem){var dataIndex=labelItem.tickValue;var itemModel=data.getItemModel(dataIndex);var normalLabelModel=itemModel.getModel("label");var hoverLabelModel=itemModel.getModel("emphasis.label");var tickCoord=axis.dataToCoord(labelItem.tickValue);var textEl=new Text({position:[tickCoord,0],rotation:layoutInfo.labelRotation-layoutInfo.rotation,onclick:bind$6(this._changeTimeline,this,dataIndex),silent:false});setTextStyle(textEl.style,normalLabelModel,{text:labelItem.formattedLabel,textAlign:layoutInfo.labelAlign,textVerticalAlign:layoutInfo.labelBaseline});group.add(textEl);setHoverStyle(textEl,setTextStyle({},hoverLabelModel))},this)},_renderControl:function(layoutInfo,group,axis,timelineModel){var controlSize=layoutInfo.controlSize;
var rotation=layoutInfo.rotation;var itemStyle=timelineModel.getModel("controlStyle").getItemStyle();var hoverStyle=timelineModel.getModel("emphasis.controlStyle").getItemStyle();var rect=[0,-controlSize/2,controlSize,controlSize];var playState=timelineModel.getPlayState();var inverse=timelineModel.get("inverse",true);makeBtn(layoutInfo.nextBtnPosition,"controlStyle.nextIcon",bind$6(this._changeTimeline,this,inverse?"-":"+"));makeBtn(layoutInfo.prevBtnPosition,"controlStyle.prevIcon",bind$6(this._changeTimeline,this,inverse?"+":"-"));makeBtn(layoutInfo.playPosition,"controlStyle."+(playState?"stopIcon":"playIcon"),bind$6(this._handlePlayClick,this,!playState),true);function makeBtn(position,iconPath,onclick,willRotate){if(!position){return}var opt={position:position,origin:[controlSize/2,0],rotation:willRotate?-rotation:0,rectHover:true,style:itemStyle,onclick:onclick};var btn=makeIcon(timelineModel,iconPath,rect,opt);group.add(btn);setHoverStyle(btn,hoverStyle)}},_renderCurrentPointer:function(layoutInfo,group,axis,timelineModel){var data=timelineModel.getData();var currentIndex=timelineModel.getCurrentIndex();var pointerModel=data.getItemModel(currentIndex).getModel("checkpointStyle");var me=this;var callback={onCreate:function(pointer){pointer.draggable=true;pointer.drift=bind$6(me._handlePointerDrag,me);pointer.ondragend=bind$6(me._handlePointerDragend,me);pointerMoveTo(pointer,currentIndex,axis,timelineModel,true)},onUpdate:function(pointer){pointerMoveTo(pointer,currentIndex,axis,timelineModel)}};this._currentPointer=giveSymbol(pointerModel,pointerModel,this._mainGroup,{},this._currentPointer,callback)},_handlePlayClick:function(nextState){this._clearTimer();this.api.dispatchAction({type:"timelinePlayChange",playState:nextState,from:this.uid})},_handlePointerDrag:function(dx,dy,e){this._clearTimer();this._pointerChangeTimeline([e.offsetX,e.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],true)},_pointerChangeTimeline:function(mousePos,trigger){var toCoord=this._toAxisCoord(mousePos)[0];
var axis=this._axis;var axisExtent=asc(axis.getExtent().slice());toCoord>axisExtent[1]&&(toCoord=axisExtent[1]);toCoord<axisExtent[0]&&(toCoord=axisExtent[0]);this._currentPointer.position[0]=toCoord;this._currentPointer.dirty();var targetDataIndex=this._findNearestTick(toCoord);var timelineModel=this.model;if(trigger||(targetDataIndex!==timelineModel.getCurrentIndex()&&timelineModel.get("realtime"))){this._changeTimeline(targetDataIndex)}},_doPlayStop:function(){this._clearTimer();if(this.model.getPlayState()){this._timer=setTimeout(bind$6(handleFrame,this),this.model.get("playInterval"))}function handleFrame(){var timelineModel=this.model;this._changeTimeline(timelineModel.getCurrentIndex()+(timelineModel.get("rewind",true)?-1:1))}},_toAxisCoord:function(vertex){var trans=this._mainGroup.getLocalTransform();return applyTransform$1(vertex,trans,true)},_findNearestTick:function(axisCoord){var data=this.model.getData();var dist=Infinity;var targetDataIndex;var axis=this._axis;data.each(["value"],function(value,dataIndex){var coord=axis.dataToCoord(value);var d=Math.abs(coord-axisCoord);if(d<dist){dist=d;targetDataIndex=dataIndex}});return targetDataIndex},_clearTimer:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}},_changeTimeline:function(nextIndex){var currentIndex=this.model.getCurrentIndex();if(nextIndex==="+"){nextIndex=currentIndex+1}else{if(nextIndex==="-"){nextIndex=currentIndex-1}}this.api.dispatchAction({type:"timelineChange",currentIndex:nextIndex,from:this.uid})}});function getViewRect$4(model,api){return getLayoutRect(model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()},model.get("padding"))}function makeIcon(timelineModel,objPath,rect,opts){var icon=makePath(timelineModel.get(objPath).replace(/^path:\/\//,""),clone(opts||{}),new BoundingRect(rect[0],rect[1],rect[2],rect[3]),"center");return icon}function giveSymbol(hostModel,itemStyleModel,group,opt,symbol,callback){var color=itemStyleModel.get("color");if(!symbol){var symbolType=hostModel.get("symbol");
symbol=createSymbol(symbolType,-1,-1,2,2,color);symbol.setStyle("strokeNoScale",true);group.add(symbol);callback&&callback.onCreate(symbol)}else{symbol.setColor(color);group.add(symbol);callback&&callback.onUpdate(symbol)}var itemStyle=itemStyleModel.getItemStyle(["color","symbol","symbolSize"]);symbol.setStyle(itemStyle);opt=merge({rectHover:true,z2:100},opt,true);var symbolSize=hostModel.get("symbolSize");symbolSize=symbolSize instanceof Array?symbolSize.slice():[+symbolSize,+symbolSize];symbolSize[0]/=2;symbolSize[1]/=2;opt.scale=symbolSize;var symbolOffset=hostModel.get("symbolOffset");if(symbolOffset){var pos=opt.position=opt.position||[0,0];pos[0]+=parsePercent$1(symbolOffset[0],symbolSize[0]);pos[1]+=parsePercent$1(symbolOffset[1],symbolSize[1])}var symbolRotate=hostModel.get("symbolRotate");opt.rotation=(symbolRotate||0)*Math.PI/180||0;symbol.attr(opt);symbol.updateTransform();return symbol}function pointerMoveTo(pointer,dataIndex,axis,timelineModel,noAnimation){if(pointer.dragging){return}var pointerModel=timelineModel.getModel("checkpointStyle");var toCoord=axis.dataToCoord(timelineModel.getData().get(["value"],dataIndex));if(noAnimation||!pointerModel.get("animation",true)){pointer.attr({position:[toCoord,0]})}else{pointer.stopAnimation(true);pointer.animateTo({position:[toCoord,0]},pointerModel.get("animationDuration",true),pointerModel.get("animationEasing",true))}}registerPreprocessor(preprocessor$3);var ToolboxModel=extendComponentModel({type:"toolbox",layoutMode:{type:"box",ignoreSize:true},optionUpdated:function(){ToolboxModel.superApply(this,"optionUpdated",arguments);each$1(this.option.feature,function(featureOpt,featureName){var Feature=get$1(featureName);Feature&&merge(featureOpt,Feature.defaultOption)})},defaultOption:{show:true,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:true,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}}}});
extendComponentView({type:"toolbox",render:function(toolboxModel,ecModel,api,payload){var group=this.group;group.removeAll();if(!toolboxModel.get("show")){return}var itemSize=+toolboxModel.get("itemSize");var featureOpts=toolboxModel.get("feature")||{};var features=this._features||(this._features={});var featureNames=[];each$1(featureOpts,function(opt,name){featureNames.push(name)});(new DataDiffer(this._featureNames||[],featureNames)).add(processFeature).update(processFeature).remove(curry(processFeature,null)).execute();this._featureNames=featureNames;function processFeature(newIndex,oldIndex){var featureName=featureNames[newIndex];var oldName=featureNames[oldIndex];var featureOpt=featureOpts[featureName];var featureModel=new Model(featureOpt,toolboxModel,toolboxModel.ecModel);var feature;if(featureName&&!oldName){if(isUserFeatureName(featureName)){feature={model:featureModel,onclick:featureModel.option.onclick,featureName:featureName}}else{var Feature=get$1(featureName);if(!Feature){return}feature=new Feature(featureModel,ecModel,api)}features[featureName]=feature}else{feature=features[oldName];if(!feature){return}feature.model=featureModel;feature.ecModel=ecModel;feature.api=api}if(!featureName&&oldName){feature.dispose&&feature.dispose(ecModel,api);return}if(!featureModel.get("show")||feature.unusable){feature.remove&&feature.remove(ecModel,api);return}createIconPaths(featureModel,feature,featureName);featureModel.setIconStatus=function(iconName,status){var option=this.option;var iconPaths=this.iconPaths;option.iconStatus=option.iconStatus||{};option.iconStatus[iconName]=status;iconPaths[iconName]&&iconPaths[iconName].trigger(status)};if(feature.render){feature.render(featureModel,ecModel,api,payload)}}function createIconPaths(featureModel,feature,featureName){var iconStyleModel=featureModel.getModel("iconStyle");var iconStyleEmphasisModel=featureModel.getModel("emphasis.iconStyle");var icons=feature.getIcons?feature.getIcons():featureModel.get("icon");var titles=featureModel.get("title")||{};
if(typeof icons==="string"){var icon=icons;var title=titles;icons={};titles={};icons[featureName]=icon;titles[featureName]=title}var iconPaths=featureModel.iconPaths={};each$1(icons,function(iconStr,iconName){var path=createIcon(iconStr,{},{x:-itemSize/2,y:-itemSize/2,width:itemSize,height:itemSize});path.setStyle(iconStyleModel.getItemStyle());path.hoverStyle=iconStyleEmphasisModel.getItemStyle();setHoverStyle(path);if(toolboxModel.get("showTitle")){path.__title=titles[iconName];path.on("mouseover",function(){var hoverStyle=iconStyleEmphasisModel.getItemStyle();path.setStyle({text:titles[iconName],textPosition:hoverStyle.textPosition||"bottom",textFill:hoverStyle.fill||hoverStyle.stroke||"#000",textAlign:hoverStyle.textAlign||"center"})}).on("mouseout",function(){path.setStyle({textFill:null})})}path.trigger(featureModel.get("iconStatus."+iconName)||"normal");group.add(path);path.on("click",bind(feature.onclick,feature,ecModel,api,iconName));iconPaths[iconName]=path})}layout$3(group,toolboxModel,api);group.add(makeBackground(group.getBoundingRect(),toolboxModel));group.eachChild(function(icon){var titleText=icon.__title;var hoverStyle=icon.hoverStyle;if(hoverStyle&&titleText){var rect=getBoundingRect(titleText,makeFont(hoverStyle));var offsetX=icon.position[0]+group.position[0];var offsetY=icon.position[1]+group.position[1]+itemSize;var needPutOnTop=false;if(offsetY+rect.height>api.getHeight()){hoverStyle.textPosition="top";needPutOnTop=true}var topOffset=needPutOnTop?(-5-rect.height):(itemSize+8);if(offsetX+rect.width/2>api.getWidth()){hoverStyle.textPosition=["100%",topOffset];hoverStyle.textAlign="right"}else{if(offsetX-rect.width/2<0){hoverStyle.textPosition=[0,topOffset];hoverStyle.textAlign="left"}}}})},updateView:function(toolboxModel,ecModel,api,payload){each$1(this._features,function(feature){feature.updateView&&feature.updateView(feature.model,ecModel,api,payload)})},remove:function(ecModel,api){each$1(this._features,function(feature){feature.remove&&feature.remove(ecModel,api)
});this.group.removeAll()},dispose:function(ecModel,api){each$1(this._features,function(feature){feature.dispose&&feature.dispose(ecModel,api)})}});function isUserFeatureName(featureName){return featureName.indexOf("my")===0}var saveAsImageLang=lang.toolbox.saveAsImage;function SaveAsImage(model){this.model=model}SaveAsImage.defaultOption={show:true,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:saveAsImageLang.title,type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:saveAsImageLang.lang.slice()};SaveAsImage.prototype.unusable=!env$1.canvasSupported;var proto$4=SaveAsImage.prototype;proto$4.onclick=function(ecModel,api){var model=this.model;var title=model.get("name")||ecModel.get("title.0.text")||"echarts";var $a=document.createElement("a");var type=model.get("type",true)||"png";$a.download=title+"."+type;$a.target="_blank";var url=api.getConnectedDataURL({type:type,backgroundColor:model.get("backgroundColor",true)||ecModel.get("backgroundColor")||"#fff",excludeComponents:model.get("excludeComponents"),pixelRatio:model.get("pixelRatio")});$a.href=url;if(typeof MouseEvent==="function"&&!env$1.browser.ie&&!env$1.browser.edge){var evt=new MouseEvent("click",{view:window,bubbles:true,cancelable:false});$a.dispatchEvent(evt)}else{if(window.navigator.msSaveOrOpenBlob){var bstr=atob(url.split(",")[1]);var n=bstr.length;var u8arr=new Uint8Array(n);while(n--){u8arr[n]=bstr.charCodeAt(n)}var blob=new Blob([u8arr]);window.navigator.msSaveOrOpenBlob(blob,title+"."+type)}else{var lang$$1=model.get("lang");var html=""+'<body style="margin:0;">'+'<img src="'+url+'" style="max-width:100%;" title="'+((lang$$1&&lang$$1[0])||"")+'" />'+"</body>";var tab=window.open();tab.document.write(html)}}};register$1("saveAsImage",SaveAsImage);var magicTypeLang=lang.toolbox.magicType;function MagicType(model){this.model=model}MagicType.defaultOption={show:true,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:clone(magicTypeLang.title),option:{},seriesIndex:{}};
var proto$5=MagicType.prototype;proto$5.getIcons=function(){var model=this.model;var availableIcons=model.get("icon");var icons={};each$1(model.get("type"),function(type){if(availableIcons[type]){icons[type]=availableIcons[type]}});return icons};var seriesOptGenreator={"line":function(seriesType,seriesId,seriesModel,model){if(seriesType==="bar"){return merge({id:seriesId,type:"line",data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")},model.get("option.line")||{},true)}},"bar":function(seriesType,seriesId,seriesModel,model){if(seriesType==="line"){return merge({id:seriesId,type:"bar",data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")},model.get("option.bar")||{},true)}},"stack":function(seriesType,seriesId,seriesModel,model){if(seriesType==="line"||seriesType==="bar"){return merge({id:seriesId,stack:"__ec_magicType_stack__"},model.get("option.stack")||{},true)}},"tiled":function(seriesType,seriesId,seriesModel,model){if(seriesType==="line"||seriesType==="bar"){return merge({id:seriesId,stack:""},model.get("option.tiled")||{},true)}}};var radioTypes=[["line","bar"],["stack","tiled"]];proto$5.onclick=function(ecModel,api,type){var model=this.model;var seriesIndex=model.get("seriesIndex."+type);if(!seriesOptGenreator[type]){return}var newOption={series:[]};var generateNewSeriesTypes=function(seriesModel){var seriesType=seriesModel.subType;var seriesId=seriesModel.id;var newSeriesOpt=seriesOptGenreator[type](seriesType,seriesId,seriesModel,model);if(newSeriesOpt){defaults(newSeriesOpt,seriesModel.option);newOption.series.push(newSeriesOpt)}var coordSys=seriesModel.coordinateSystem;if(coordSys&&coordSys.type==="cartesian2d"&&(type==="line"||type==="bar")){var categoryAxis=coordSys.getAxesByScale("ordinal")[0];if(categoryAxis){var axisDim=categoryAxis.dim;var axisType=axisDim+"Axis";var axisModel=ecModel.queryComponents({mainType:axisType,index:seriesModel.get(name+"Index"),id:seriesModel.get(name+"Id")})[0];
var axisIndex=axisModel.componentIndex;newOption[axisType]=newOption[axisType]||[];for(var i=0;i<=axisIndex;i++){newOption[axisType][axisIndex]=newOption[axisType][axisIndex]||{}}newOption[axisType][axisIndex].boundaryGap=type==="bar"}}};each$1(radioTypes,function(radio){if(indexOf(radio,type)>=0){each$1(radio,function(item){model.setIconStatus(item,"normal")})}});model.setIconStatus(type,"emphasis");ecModel.eachComponent({mainType:"series",query:seriesIndex==null?null:{seriesIndex:seriesIndex}},generateNewSeriesTypes);api.dispatchAction({type:"changeMagicType",currentType:type,newOption:newOption})};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(payload,ecModel){ecModel.mergeOption(payload.newOption)});register$1("magicType",MagicType);var dataViewLang=lang.toolbox.dataView;var BLOCK_SPLITER=new Array(60).join("-");var ITEM_SPLITER="\t";function groupSeries(ecModel){var seriesGroupByCategoryAxis={};var otherSeries=[];var meta=[];ecModel.eachRawSeries(function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys&&(coordSys.type==="cartesian2d"||coordSys.type==="polar")){var baseAxis=coordSys.getBaseAxis();if(baseAxis.type==="category"){var key=baseAxis.dim+"_"+baseAxis.index;if(!seriesGroupByCategoryAxis[key]){seriesGroupByCategoryAxis[key]={categoryAxis:baseAxis,valueAxis:coordSys.getOtherAxis(baseAxis),series:[]};meta.push({axisDim:baseAxis.dim,axisIndex:baseAxis.index})}seriesGroupByCategoryAxis[key].series.push(seriesModel)}else{otherSeries.push(seriesModel)}}else{otherSeries.push(seriesModel)}});return{seriesGroupByCategoryAxis:seriesGroupByCategoryAxis,other:otherSeries,meta:meta}}function assembleSeriesWithCategoryAxis(series){var tables=[];each$1(series,function(group,key){var categoryAxis=group.categoryAxis;var valueAxis=group.valueAxis;var valueAxisDim=valueAxis.dim;var headers=[" "].concat(map(group.series,function(series){return series.name}));var columns=[categoryAxis.model.getCategories()];
each$1(group.series,function(series){columns.push(series.getRawData().mapArray(valueAxisDim,function(val){return val}))});var lines=[headers.join(ITEM_SPLITER)];for(var i=0;i<columns[0].length;i++){var items=[];for(var j=0;j<columns.length;j++){items.push(columns[j][i])}lines.push(items.join(ITEM_SPLITER))}tables.push(lines.join("\n"))});return tables.join("\n\n"+BLOCK_SPLITER+"\n\n")}function assembleOtherSeries(series){return map(series,function(series){var data=series.getRawData();var lines=[series.name];var vals=[];data.each(data.dimensions,function(){var argLen=arguments.length;var dataIndex=arguments[argLen-1];var name=data.getName(dataIndex);for(var i=0;i<argLen-1;i++){vals[i]=arguments[i]}lines.push((name?(name+ITEM_SPLITER):"")+vals.join(ITEM_SPLITER))});return lines.join("\n")}).join("\n\n"+BLOCK_SPLITER+"\n\n")}function getContentFromModel(ecModel){var result=groupSeries(ecModel);return{value:filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis),assembleOtherSeries(result.other)],function(str){return str.replace(/[\n\t\s]/g,"")}).join("\n\n"+BLOCK_SPLITER+"\n\n"),meta:result.meta}}function trim$1(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(block){var firstLine=block.slice(0,block.indexOf("\n"));if(firstLine.indexOf(ITEM_SPLITER)>=0){return true}}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(tsv){var tsvLines=tsv.split(/\n+/g);var headers=trim$1(tsvLines.shift()).split(itemSplitRegex);var categories=[];var series=map(headers,function(header){return{name:header,data:[]}});for(var i=0;i<tsvLines.length;i++){var items=trim$1(tsvLines[i]).split(itemSplitRegex);categories.push(items.shift());for(var j=0;j<items.length;j++){series[j]&&(series[j].data[i]=items[j])}}return{series:series,categories:categories}}function parseListContents(str){var lines=str.split(/\n+/g);var seriesName=trim$1(lines.shift());var data=[];for(var i=0;i<lines.length;i++){var items=trim$1(lines[i]).split(itemSplitRegex);
var name="";var value;var hasName=false;if(isNaN(items[0])){hasName=true;name=items[0];items=items.slice(1);data[i]={name:name,value:[]};value=data[i].value}else{value=data[i]=[]}for(var j=0;j<items.length;j++){value.push(+items[j])}if(value.length===1){hasName?(data[i].value=value[0]):(data[i]=value[0])}}return{name:seriesName,data:data}}function parseContents(str,blockMetaList){var blocks=str.split(new RegExp("\n*"+BLOCK_SPLITER+"\n*","g"));var newOption={series:[]};each$1(blocks,function(block,idx){if(isTSVFormat(block)){var result=parseTSVContents(block);var blockMeta=blockMetaList[idx];var axisKey=blockMeta.axisDim+"Axis";if(blockMeta){newOption[axisKey]=newOption[axisKey]||[];newOption[axisKey][blockMeta.axisIndex]={data:result.categories};newOption.series=newOption.series.concat(result.series)}}else{var result=parseListContents(block);newOption.series.push(result)}});return newOption}function DataView(model){this._dom=null;this.model=model}DataView.defaultOption={show:true,readOnly:false,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:clone(dataViewLang.title),lang:clone(dataViewLang.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};DataView.prototype.onclick=function(ecModel,api){var container=api.getDom();var model=this.model;if(this._dom){container.removeChild(this._dom)}var root=document.createElement("div");root.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;";root.style.backgroundColor=model.get("backgroundColor")||"#fff";var header=document.createElement("h4");var lang$$1=model.get("lang")||[];header.innerHTML=lang$$1[0]||model.get("title");header.style.cssText="margin: 10px 20px;";header.style.color=model.get("textColor");var viewMain=document.createElement("div");var textarea=document.createElement("textarea");viewMain.style.cssText="display:block;width:100%;overflow:auto;";
var optionToContent=model.get("optionToContent");var contentToOption=model.get("contentToOption");var result=getContentFromModel(ecModel);if(typeof optionToContent==="function"){var htmlOrDom=optionToContent(api.getOption());if(typeof htmlOrDom==="string"){viewMain.innerHTML=htmlOrDom}else{if(isDom(htmlOrDom)){viewMain.appendChild(htmlOrDom)}}}else{viewMain.appendChild(textarea);textarea.readOnly=model.get("readOnly");textarea.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;";textarea.style.color=model.get("textColor");textarea.style.borderColor=model.get("textareaBorderColor");textarea.style.backgroundColor=model.get("textareaColor");textarea.value=result.value}var blockMetaList=result.meta;var buttonContainer=document.createElement("div");buttonContainer.style.cssText="position:absolute;bottom:0;left:0;right:0;";var buttonStyle="float:right;margin-right:20px;border:none;"+"cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px";var closeButton=document.createElement("div");var refreshButton=document.createElement("div");buttonStyle+=";background-color:"+model.get("buttonColor");buttonStyle+=";color:"+model.get("buttonTextColor");var self=this;function close(){container.removeChild(root);self._dom=null}addEventListener(closeButton,"click",close);addEventListener(refreshButton,"click",function(){var newOption;try{if(typeof contentToOption==="function"){newOption=contentToOption(viewMain,api.getOption())}else{newOption=parseContents(textarea.value,blockMetaList)}}catch(e){close();throw new Error("Data view format error "+e)}if(newOption){api.dispatchAction({type:"changeDataView",newOption:newOption})}close()});closeButton.innerHTML=lang$$1[1];refreshButton.innerHTML=lang$$1[2];refreshButton.style.cssText=buttonStyle;closeButton.style.cssText=buttonStyle;!model.get("readOnly")&&buttonContainer.appendChild(refreshButton);buttonContainer.appendChild(closeButton);addEventListener(textarea,"keydown",function(e){if((e.keyCode||e.which)===9){var val=this.value;
var start=this.selectionStart;var end=this.selectionEnd;this.value=val.substring(0,start)+ITEM_SPLITER+val.substring(end);this.selectionStart=this.selectionEnd=start+1;stop(e)}});root.appendChild(header);root.appendChild(viewMain);root.appendChild(buttonContainer);viewMain.style.height=(container.clientHeight-80)+"px";container.appendChild(root);this._dom=root};DataView.prototype.remove=function(ecModel,api){this._dom&&api.getDom().removeChild(this._dom)};DataView.prototype.dispose=function(ecModel,api){this.remove(ecModel,api)};function tryMergeDataOption(newData,originalData){return map(newData,function(newVal,idx){var original=originalData&&originalData[idx];if(isObject$1(original)&&!isArray(original)){if(isObject$1(newVal)&&!isArray(newVal)){newVal=newVal.value}return defaults({value:newVal},original)}else{return newVal}})}register$1("dataView",DataView);registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(payload,ecModel){var newSeriesOptList=[];each$1(payload.newOption.series,function(seriesOpt){var seriesModel=ecModel.getSeriesByName(seriesOpt.name)[0];if(!seriesModel){newSeriesOptList.push(extend({type:"scatter"},seriesOpt))}else{var originalData=seriesModel.get("data");newSeriesOptList.push({name:seriesOpt.name,data:tryMergeDataOption(seriesOpt.data,originalData)})}});ecModel.mergeOption(defaults({series:newSeriesOptList},payload.newOption))});var each$29=each$1;var ATTR$2="\0_ec_hist_store";function push(ecModel,newSnapshot){var store=giveStore$1(ecModel);each$29(newSnapshot,function(batchItem,dataZoomId){var i=store.length-1;for(;i>=0;i--){var snapshot=store[i];if(snapshot[dataZoomId]){break}}if(i<0){var dataZoomModel=ecModel.queryComponents({mainType:"dataZoom",subType:"select",id:dataZoomId})[0];if(dataZoomModel){var percentRange=dataZoomModel.getPercentRange();store[0][dataZoomId]={dataZoomId:dataZoomId,start:percentRange[0],end:percentRange[1]}}}});store.push(newSnapshot)}function pop(ecModel){var store=giveStore$1(ecModel);
var head=store[store.length-1];store.length>1&&store.pop();var snapshot={};each$29(head,function(batchItem,dataZoomId){for(var i=store.length-1;i>=0;i--){var batchItem=store[i][dataZoomId];if(batchItem){snapshot[dataZoomId]=batchItem;break}}});return snapshot}function clear$1(ecModel){ecModel[ATTR$2]=null}function count(ecModel){return giveStore$1(ecModel).length}function giveStore$1(ecModel){var store=ecModel[ATTR$2];if(!store){store=ecModel[ATTR$2]=[{}]}return store}DataZoomModel.extend({type:"dataZoom.select"});DataZoomView.extend({type:"dataZoom.select"});var dataZoomLang=lang.toolbox.dataZoom;var each$28=each$1;var DATA_ZOOM_ID_BASE="\0_ec_\0toolbox-dataZoom_";function DataZoom(model,ecModel,api){(this._brushController=new BrushController(api.getZr())).on("brush",bind(this._onBrush,this)).mount();this._isZoomActive}DataZoom.defaultOption={show:true,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:clone(dataZoomLang.title)};var proto$6=DataZoom.prototype;proto$6.render=function(featureModel,ecModel,api,payload){this.model=featureModel;this.ecModel=ecModel;this.api=api;updateZoomBtnStatus(featureModel,ecModel,this,payload,api);updateBackBtnStatus(featureModel,ecModel)};proto$6.onclick=function(ecModel,api,type){handlers$1[type].call(this)};proto$6.remove=function(ecModel,api){this._brushController.unmount()};proto$6.dispose=function(ecModel,api){this._brushController.dispose()};var handlers$1={zoom:function(){var nextActive=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:nextActive})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};proto$6._onBrush=function(areas,opt){if(!opt.isEnd||!areas.length){return}var snapshot={};var ecModel=this.ecModel;this._brushController.updateCovers([]);var brushTargetManager=new BrushTargetManager(retrieveAxisSetting(this.model.option),ecModel,{include:["grid"]});brushTargetManager.matchOutputRanges(areas,ecModel,function(area,coordRange,coordSys){if(coordSys.type!=="cartesian2d"){return
}var brushType=area.brushType;if(brushType==="rect"){setBatch("x",coordSys,coordRange[0]);setBatch("y",coordSys,coordRange[1])}else{setBatch(({lineX:"x",lineY:"y"})[brushType],coordSys,coordRange)}});push(ecModel,snapshot);this._dispatchZoomAction(snapshot);function setBatch(dimName,coordSys,minMax){var axis=coordSys.getAxis(dimName);var axisModel=axis.model;var dataZoomModel=findDataZoom(dimName,axisModel,ecModel);var minMaxSpan=dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();if(minMaxSpan.minValueSpan!=null||minMaxSpan.maxValueSpan!=null){minMax=sliderMove(0,minMax.slice(),axis.scale.getExtent(),0,minMaxSpan.minValueSpan,minMaxSpan.maxValueSpan)}dataZoomModel&&(snapshot[dataZoomModel.id]={dataZoomId:dataZoomModel.id,startValue:minMax[0],endValue:minMax[1]})}function findDataZoom(dimName,axisModel,ecModel){var found;ecModel.eachComponent({mainType:"dataZoom",subType:"select"},function(dzModel){var has=dzModel.getAxisModel(dimName,axisModel.componentIndex);has&&(found=dzModel)});return found}};proto$6._dispatchZoomAction=function(snapshot){var batch=[];each$28(snapshot,function(batchItem,dataZoomId){batch.push(clone(batchItem))});batch.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:batch})};function retrieveAxisSetting(option){var setting={};each$1(["xAxisIndex","yAxisIndex"],function(name){setting[name]=option[name];setting[name]==null&&(setting[name]="all");(setting[name]===false||setting[name]==="none")&&(setting[name]=[])});return setting}function updateBackBtnStatus(featureModel,ecModel){featureModel.setIconStatus("back",count(ecModel)>1?"emphasis":"normal")}function updateZoomBtnStatus(featureModel,ecModel,view,payload,api){var zoomActive=view._isZoomActive;if(payload&&payload.type==="takeGlobalCursor"){zoomActive=payload.key==="dataZoomSelect"?payload.dataZoomSelectActive:false}view._isZoomActive=zoomActive;featureModel.setIconStatus("zoom",zoomActive?"emphasis":"normal");var brushTargetManager=new BrushTargetManager(retrieveAxisSetting(featureModel.option),ecModel,{include:["grid"]});
view._brushController.setPanels(brushTargetManager.makePanelOpts(api,function(targetInfo){return(targetInfo.xAxisDeclared&&!targetInfo.yAxisDeclared)?"lineX":(!targetInfo.xAxisDeclared&&targetInfo.yAxisDeclared)?"lineY":"rect"})).enableBrush(zoomActive?{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}}:false)}register$1("dataZoom",DataZoom);registerPreprocessor(function(option){if(!option){return}var dataZoomOpts=option.dataZoom||(option.dataZoom=[]);if(!isArray(dataZoomOpts)){option.dataZoom=dataZoomOpts=[dataZoomOpts]}var toolboxOpt=option.toolbox;if(toolboxOpt){if(isArray(toolboxOpt)){toolboxOpt=toolboxOpt[0]}if(toolboxOpt&&toolboxOpt.feature){var dataZoomOpt=toolboxOpt.feature.dataZoom;addForAxis("xAxis",dataZoomOpt);addForAxis("yAxis",dataZoomOpt)}}function addForAxis(axisName,dataZoomOpt){if(!dataZoomOpt){return}var axisIndicesName=axisName+"Index";var givenAxisIndices=dataZoomOpt[axisIndicesName];if(givenAxisIndices!=null&&givenAxisIndices!=="all"&&!isArray(givenAxisIndices)){givenAxisIndices=(givenAxisIndices===false||givenAxisIndices==="none")?[]:[givenAxisIndices]}forEachComponent(axisName,function(axisOpt,axisIndex){if(givenAxisIndices!=null&&givenAxisIndices!=="all"&&indexOf(givenAxisIndices,axisIndex)===-1){return}var newOpt={type:"select",$fromToolbox:true,id:DATA_ZOOM_ID_BASE+axisName+axisIndex};newOpt[axisIndicesName]=axisIndex;dataZoomOpts.push(newOpt)})}function forEachComponent(mainType,cb){var opts=option[mainType];if(!isArray(opts)){opts=opts?[opts]:[]}each$28(opts,cb)}});var restoreLang=lang.toolbox.restore;function Restore(model){this.model=model}Restore.defaultOption={show:true,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:restoreLang.title};var proto$7=Restore.prototype;proto$7.onclick=function(ecModel,api,type){clear$1(ecModel);api.dispatchAction({type:"restore",from:this.uid})};register$1("restore",Restore);
registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(payload,ecModel){ecModel.resetOption("recreate")});var urn="urn:schemas-microsoft-com:vml";var win=typeof window==="undefined"?null:window;var vmlInited=false;var doc=win&&win.document;function createNode(tagName){return doCreateNode(tagName)}var doCreateNode;if(doc&&!env$1.canvasSupported){try{!doc.namespaces.zrvml&&doc.namespaces.add("zrvml",urn);doCreateNode=function(tagName){return doc.createElement("<zrvml:"+tagName+' class="zrvml">')}}catch(e){doCreateNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="'+urn+'" class="zrvml">')}}}function initVML(){if(vmlInited||!doc){return}vmlInited=true;var styleSheets=doc.styleSheets;if(styleSheets.length<31){doc.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)")}else{styleSheets[0].addRule(".zrvml","behavior:url(#default#VML)")}}var CMD$3=PathProxy.CMD;var round$4=Math.round;var sqrt=Math.sqrt;var abs$1=Math.abs;var cos=Math.cos;var sin=Math.sin;var mathMax$8=Math.max;if(!env$1.canvasSupported){var comma=",";var imageTransformPrefix="progid:DXImageTransform.Microsoft";var Z=21600;var Z2=Z/2;var ZLEVEL_BASE=100000;var Z_BASE$1=1000;var initRootElStyle=function(el){el.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;";el.coordsize=Z+","+Z;el.coordorigin="0,0"};var encodeHtmlAttribute=function(s){return String(s).replace(/&/g,"&amp;").replace(/"/g,"&quot;")};var rgb2Str=function(r,g,b){return"rgb("+[r,g,b].join(",")+")"};var append=function(parent,child){if(child&&parent&&child.parentNode!==parent){parent.appendChild(child)}};var remove=function(parent,child){if(child&&parent&&child.parentNode===parent){parent.removeChild(child)}};var getZIndex=function(zlevel,z,z2){return(parseFloat(zlevel)||0)*ZLEVEL_BASE+(parseFloat(z)||0)*Z_BASE$1+z2};var parsePercent$3=function(value,maxValue){if(typeof value==="string"){if(value.lastIndexOf("%")>=0){return parseFloat(value)/100*maxValue}return parseFloat(value)
}return value};var setColorAndOpacity=function(el,color,opacity){var colorArr=parse(color);opacity=+opacity;if(isNaN(opacity)){opacity=1}if(colorArr){el.color=rgb2Str(colorArr[0],colorArr[1],colorArr[2]);el.opacity=opacity*colorArr[3]}};var getColorAndAlpha=function(color){var colorArr=parse(color);return[rgb2Str(colorArr[0],colorArr[1],colorArr[2]),colorArr[3]]};var updateFillNode=function(el,style,zrEl){var fill=style.fill;if(fill!=null){if(fill instanceof Gradient){var gradientType;var angle=0;var focus=[0,0];var shift=0;var expansion=1;var rect=zrEl.getBoundingRect();var rectWidth=rect.width;var rectHeight=rect.height;if(fill.type==="linear"){gradientType="gradient";var transform=zrEl.transform;var p0=[fill.x*rectWidth,fill.y*rectHeight];var p1=[fill.x2*rectWidth,fill.y2*rectHeight];if(transform){applyTransform(p0,p0,transform);applyTransform(p1,p1,transform)}var dx=p1[0]-p0[0];var dy=p1[1]-p0[1];angle=Math.atan2(dx,dy)*180/Math.PI;if(angle<0){angle+=360}if(angle<0.000001){angle=0}}else{gradientType="gradientradial";var p0=[fill.x*rectWidth,fill.y*rectHeight];var transform=zrEl.transform;var scale$$1=zrEl.scale;var width=rectWidth;var height=rectHeight;focus=[(p0[0]-rect.x)/width,(p0[1]-rect.y)/height];if(transform){applyTransform(p0,p0,transform)}width/=scale$$1[0]*Z;height/=scale$$1[1]*Z;var dimension=mathMax$8(width,height);shift=2*0/dimension;expansion=2*fill.r/dimension-shift}var stops=fill.colorStops.slice();stops.sort(function(cs1,cs2){return cs1.offset-cs2.offset});var length$$1=stops.length;var colorAndAlphaList=[];var colors=[];for(var i=0;i<length$$1;i++){var stop=stops[i];var colorAndAlpha=getColorAndAlpha(stop.color);colors.push(stop.offset*expansion+shift+" "+colorAndAlpha[0]);if(i===0||i===length$$1-1){colorAndAlphaList.push(colorAndAlpha)}}if(length$$1>=2){var color1=colorAndAlphaList[0][0];var color2=colorAndAlphaList[1][0];var opacity1=colorAndAlphaList[0][1]*style.opacity;var opacity2=colorAndAlphaList[1][1]*style.opacity;el.type=gradientType;el.method="none";
el.focus="100%";el.angle=angle;el.color=color1;el.color2=color2;el.colors=colors.join(",");el.opacity=opacity2;el.opacity2=opacity1}if(gradientType==="radial"){el.focusposition=focus.join(",")}}else{setColorAndOpacity(el,fill,style.opacity)}}};var updateStrokeNode=function(el,style){if(style.lineDash!=null){el.dashstyle=style.lineDash.join(" ")}if(style.stroke!=null&&!(style.stroke instanceof Gradient)){setColorAndOpacity(el,style.stroke,style.opacity)}};var updateFillAndStroke=function(vmlEl,type,style,zrEl){var isFill=type==="fill";var el=vmlEl.getElementsByTagName(type)[0];if(style[type]!=null&&style[type]!=="none"&&(isFill||(!isFill&&style.lineWidth))){vmlEl[isFill?"filled":"stroked"]="true";if(style[type] instanceof Gradient){remove(vmlEl,el)}if(!el){el=createNode(type)}isFill?updateFillNode(el,style,zrEl):updateStrokeNode(el,style);append(vmlEl,el)}else{vmlEl[isFill?"filled":"stroked"]="false";remove(vmlEl,el)}};var points$3=[[],[],[]];var pathDataToString=function(path,m){var M=CMD$3.M;var C=CMD$3.C;var L=CMD$3.L;var A=CMD$3.A;var Q=CMD$3.Q;var str=[];var nPoint;var cmdStr;var cmd;var i;var xi;var yi;var data=path.data;var dataLength=path.len();for(i=0;i<dataLength;){cmd=data[i++];cmdStr="";nPoint=0;switch(cmd){case M:cmdStr=" m ";nPoint=1;xi=data[i++];yi=data[i++];points$3[0][0]=xi;points$3[0][1]=yi;break;case L:cmdStr=" l ";nPoint=1;xi=data[i++];yi=data[i++];points$3[0][0]=xi;points$3[0][1]=yi;break;case Q:case C:cmdStr=" c ";nPoint=3;var x1=data[i++];var y1=data[i++];var x2=data[i++];var y2=data[i++];var x3;var y3;if(cmd===Q){x3=x2;y3=y2;x2=(x2+2*x1)/3;y2=(y2+2*y1)/3;x1=(xi+2*x1)/3;y1=(yi+2*y1)/3}else{x3=data[i++];y3=data[i++]}points$3[0][0]=x1;points$3[0][1]=y1;points$3[1][0]=x2;points$3[1][1]=y2;points$3[2][0]=x3;points$3[2][1]=y3;xi=x3;yi=y3;break;case A:var x=0;var y=0;var sx=1;var sy=1;var angle=0;if(m){x=m[4];y=m[5];sx=sqrt(m[0]*m[0]+m[1]*m[1]);sy=sqrt(m[2]*m[2]+m[3]*m[3]);angle=Math.atan2(-m[1]/sy,m[0]/sx)}var cx=data[i++];var cy=data[i++];var rx=data[i++];
var ry=data[i++];var startAngle=data[i++]+angle;var endAngle=data[i++]+startAngle+angle;i++;var clockwise=data[i++];var x0=cx+cos(startAngle)*rx;var y0=cy+sin(startAngle)*ry;var x1=cx+cos(endAngle)*rx;var y1=cy+sin(endAngle)*ry;var type=clockwise?" wa ":" at ";if(Math.abs(x0-x1)<0.0001){if(Math.abs(endAngle-startAngle)>0.01){if(clockwise){x0+=270/Z}}else{if(Math.abs(y0-cy)<0.0001){if((clockwise&&x0<cx)||(!clockwise&&x0>cx)){y1-=270/Z}else{y1+=270/Z}}else{if((clockwise&&y0<cy)||(!clockwise&&y0>cy)){x1+=270/Z}else{x1-=270/Z}}}}str.push(type,round$4(((cx-rx)*sx+x)*Z-Z2),comma,round$4(((cy-ry)*sy+y)*Z-Z2),comma,round$4(((cx+rx)*sx+x)*Z-Z2),comma,round$4(((cy+ry)*sy+y)*Z-Z2),comma,round$4((x0*sx+x)*Z-Z2),comma,round$4((y0*sy+y)*Z-Z2),comma,round$4((x1*sx+x)*Z-Z2),comma,round$4((y1*sy+y)*Z-Z2));xi=x1;yi=y1;break;case CMD$3.R:var p0=points$3[0];var p1=points$3[1];p0[0]=data[i++];p0[1]=data[i++];p1[0]=p0[0]+data[i++];p1[1]=p0[1]+data[i++];if(m){applyTransform(p0,p0,m);applyTransform(p1,p1,m)}p0[0]=round$4(p0[0]*Z-Z2);p1[0]=round$4(p1[0]*Z-Z2);p0[1]=round$4(p0[1]*Z-Z2);p1[1]=round$4(p1[1]*Z-Z2);str.push(" m ",p0[0],comma,p0[1]," l ",p1[0],comma,p0[1]," l ",p1[0],comma,p1[1]," l ",p0[0],comma,p1[1]);break;case CMD$3.Z:str.push(" x ")}if(nPoint>0){str.push(cmdStr);for(var k=0;k<nPoint;k++){var p=points$3[k];m&&applyTransform(p,p,m);str.push(round$4(p[0]*Z-Z2),comma,round$4(p[1]*Z-Z2),k<nPoint-1?comma:"")}}}return str.join("")};Path.prototype.brushVML=function(vmlRoot){var style=this.style;var vmlEl=this._vmlEl;if(!vmlEl){vmlEl=createNode("shape");initRootElStyle(vmlEl);this._vmlEl=vmlEl}updateFillAndStroke(vmlEl,"fill",style,this);updateFillAndStroke(vmlEl,"stroke",style,this);var m=this.transform;var needTransform=m!=null;var strokeEl=vmlEl.getElementsByTagName("stroke")[0];if(strokeEl){var lineWidth=style.lineWidth;if(needTransform&&!style.strokeNoScale){var det=m[0]*m[3]-m[1]*m[2];lineWidth*=sqrt(abs$1(det))}strokeEl.weight=lineWidth+"px"}var path=this.path||(this.path=new PathProxy());
if(this.__dirtyPath){path.beginPath();path.subPixelOptimize=false;this.buildPath(path,this.shape);path.toStatic();this.__dirtyPath=false}vmlEl.path=pathDataToString(path,this.transform);vmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2);append(vmlRoot,vmlEl);if(style.text!=null){this.drawRectText(vmlRoot,this.getBoundingRect())}else{this.removeRectText(vmlRoot)}};Path.prototype.onRemove=function(vmlRoot){remove(vmlRoot,this._vmlEl);this.removeRectText(vmlRoot)};Path.prototype.onAdd=function(vmlRoot){append(vmlRoot,this._vmlEl);this.appendRectText(vmlRoot)};var isImage=function(img){return(typeof img==="object")&&img.tagName&&img.tagName.toUpperCase()==="IMG"};ZImage.prototype.brushVML=function(vmlRoot){var style=this.style;var image=style.image;var ow;var oh;if(isImage(image)){var src=image.src;if(src===this._imageSrc){ow=this._imageWidth;oh=this._imageHeight}else{var imageRuntimeStyle=image.runtimeStyle;var oldRuntimeWidth=imageRuntimeStyle.width;var oldRuntimeHeight=imageRuntimeStyle.height;imageRuntimeStyle.width="auto";imageRuntimeStyle.height="auto";ow=image.width;oh=image.height;imageRuntimeStyle.width=oldRuntimeWidth;imageRuntimeStyle.height=oldRuntimeHeight;this._imageSrc=src;this._imageWidth=ow;this._imageHeight=oh}image=src}else{if(image===this._imageSrc){ow=this._imageWidth;oh=this._imageHeight}}if(!image){return}var x=style.x||0;var y=style.y||0;var dw=style.width;var dh=style.height;var sw=style.sWidth;var sh=style.sHeight;var sx=style.sx||0;var sy=style.sy||0;var hasCrop=sw&&sh;var vmlEl=this._vmlEl;if(!vmlEl){vmlEl=doc.createElement("div");initRootElStyle(vmlEl);this._vmlEl=vmlEl}var vmlElStyle=vmlEl.style;var hasRotation=false;var m;var scaleX=1;var scaleY=1;if(this.transform){m=this.transform;scaleX=sqrt(m[0]*m[0]+m[1]*m[1]);scaleY=sqrt(m[2]*m[2]+m[3]*m[3]);hasRotation=m[1]||m[2]}if(hasRotation){var p0=[x,y];var p1=[x+dw,y];var p2=[x,y+dh];var p3=[x+dw,y+dh];applyTransform(p0,p0,m);applyTransform(p1,p1,m);applyTransform(p2,p2,m);applyTransform(p3,p3,m);
var maxX=mathMax$8(p0[0],p1[0],p2[0],p3[0]);var maxY=mathMax$8(p0[1],p1[1],p2[1],p3[1]);var transformFilter=[];transformFilter.push("M11=",m[0]/scaleX,comma,"M12=",m[2]/scaleY,comma,"M21=",m[1]/scaleX,comma,"M22=",m[3]/scaleY,comma,"Dx=",round$4(x*scaleX+m[4]),comma,"Dy=",round$4(y*scaleY+m[5]));vmlElStyle.padding="0 "+round$4(maxX)+"px "+round$4(maxY)+"px 0";vmlElStyle.filter=imageTransformPrefix+".Matrix("+transformFilter.join("")+", SizingMethod=clip)"}else{if(m){x=x*scaleX+m[4];y=y*scaleY+m[5]}vmlElStyle.filter="";vmlElStyle.left=round$4(x)+"px";vmlElStyle.top=round$4(y)+"px"}var imageEl=this._imageEl;var cropEl=this._cropEl;if(!imageEl){imageEl=doc.createElement("div");this._imageEl=imageEl}var imageELStyle=imageEl.style;if(hasCrop){if(!(ow&&oh)){var tmpImage=new Image();var self=this;tmpImage.onload=function(){tmpImage.onload=null;ow=tmpImage.width;oh=tmpImage.height;imageELStyle.width=round$4(scaleX*ow*dw/sw)+"px";imageELStyle.height=round$4(scaleY*oh*dh/sh)+"px";self._imageWidth=ow;self._imageHeight=oh;self._imageSrc=image};tmpImage.src=image}else{imageELStyle.width=round$4(scaleX*ow*dw/sw)+"px";imageELStyle.height=round$4(scaleY*oh*dh/sh)+"px"}if(!cropEl){cropEl=doc.createElement("div");cropEl.style.overflow="hidden";this._cropEl=cropEl}var cropElStyle=cropEl.style;cropElStyle.width=round$4((dw+sx*dw/sw)*scaleX);cropElStyle.height=round$4((dh+sy*dh/sh)*scaleY);cropElStyle.filter=imageTransformPrefix+".Matrix(Dx="+(-sx*dw/sw*scaleX)+",Dy="+(-sy*dh/sh*scaleY)+")";if(!cropEl.parentNode){vmlEl.appendChild(cropEl)}if(imageEl.parentNode!==cropEl){cropEl.appendChild(imageEl)}}else{imageELStyle.width=round$4(scaleX*dw)+"px";imageELStyle.height=round$4(scaleY*dh)+"px";vmlEl.appendChild(imageEl);if(cropEl&&cropEl.parentNode){vmlEl.removeChild(cropEl);this._cropEl=null}}var filterStr="";var alpha=style.opacity;if(alpha<1){filterStr+=".Alpha(opacity="+round$4(alpha*100)+") "}filterStr+=imageTransformPrefix+".AlphaImageLoader(src="+image+", SizingMethod=scale)";imageELStyle.filter=filterStr;
vmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2);append(vmlRoot,vmlEl);if(style.text!=null){this.drawRectText(vmlRoot,this.getBoundingRect())}};ZImage.prototype.onRemove=function(vmlRoot){remove(vmlRoot,this._vmlEl);this._vmlEl=null;this._cropEl=null;this._imageEl=null;this.removeRectText(vmlRoot)};ZImage.prototype.onAdd=function(vmlRoot){append(vmlRoot,this._vmlEl);this.appendRectText(vmlRoot)};var DEFAULT_STYLE_NORMAL="normal";var fontStyleCache={};var fontStyleCacheCount=0;var MAX_FONT_CACHE_SIZE=100;var fontEl=document.createElement("div");var getFontStyle=function(fontString){var fontStyle=fontStyleCache[fontString];if(!fontStyle){if(fontStyleCacheCount>MAX_FONT_CACHE_SIZE){fontStyleCacheCount=0;fontStyleCache={}}var style=fontEl.style;var fontFamily;try{style.font=fontString;fontFamily=style.fontFamily.split(",")[0]}catch(e){}fontStyle={style:style.fontStyle||DEFAULT_STYLE_NORMAL,variant:style.fontVariant||DEFAULT_STYLE_NORMAL,weight:style.fontWeight||DEFAULT_STYLE_NORMAL,size:parseFloat(style.fontSize||12)|0,family:fontFamily||"Microsoft YaHei"};fontStyleCache[fontString]=fontStyle;fontStyleCacheCount++}return fontStyle};var textMeasureEl;$override$1("measureText",function(text,textFont){var doc$$1=doc;if(!textMeasureEl){textMeasureEl=doc$$1.createElement("div");textMeasureEl.style.cssText="position:absolute;top:-20000px;left:0;"+"padding:0;margin:0;border:none;white-space:pre;";doc.body.appendChild(textMeasureEl)}try{textMeasureEl.style.font=textFont}catch(ex){}textMeasureEl.innerHTML="";textMeasureEl.appendChild(doc$$1.createTextNode(text));return{width:textMeasureEl.offsetWidth}});var tmpRect$2=new BoundingRect();var drawRectText=function(vmlRoot,rect,textRect,fromTextEl){var style=this.style;this.__dirty&&normalizeTextStyle(style,true);var text=style.text;text!=null&&(text+="");if(!text){return}if(style.rich){var contentBlock=parseRichText(text,style);text=[];for(var i=0;i<contentBlock.lines.length;i++){var tokens=contentBlock.lines[i].tokens;var textLine=[];
for(var j=0;j<tokens.length;j++){textLine.push(tokens[j].text)}text.push(textLine.join(""))}text=text.join("\n")}var x;var y;var align=style.textAlign;var verticalAlign=style.textVerticalAlign;var fontStyle=getFontStyle(style.font);var font=fontStyle.style+" "+fontStyle.variant+" "+fontStyle.weight+" "+fontStyle.size+'px "'+fontStyle.family+'"';textRect=textRect||getBoundingRect(text,font,align,verticalAlign,style.textPadding,style.textLineHeight);var m=this.transform;if(m&&!fromTextEl){tmpRect$2.copy(rect);tmpRect$2.applyTransform(m);rect=tmpRect$2}if(!fromTextEl){var textPosition=style.textPosition;var distance$$1=style.textDistance;if(textPosition instanceof Array){x=rect.x+parsePercent$3(textPosition[0],rect.width);y=rect.y+parsePercent$3(textPosition[1],rect.height);align=align||"left"}else{var res=adjustTextPositionOnRect(textPosition,rect,distance$$1);x=res.x;y=res.y;align=align||res.textAlign;verticalAlign=verticalAlign||res.textVerticalAlign}}else{x=rect.x;y=rect.y}x=adjustTextX(x,textRect.width,align);y=adjustTextY(y,textRect.height,verticalAlign);y+=textRect.height/2;var createNode$$1=createNode;var textVmlEl=this._textVmlEl;var pathEl;var textPathEl;var skewEl;if(!textVmlEl){textVmlEl=createNode$$1("line");pathEl=createNode$$1("path");textPathEl=createNode$$1("textpath");skewEl=createNode$$1("skew");textPathEl.style["v-text-align"]="left";initRootElStyle(textVmlEl);pathEl.textpathok=true;textPathEl.on=true;textVmlEl.from="0 0";textVmlEl.to="1000 0.05";append(textVmlEl,skewEl);append(textVmlEl,pathEl);append(textVmlEl,textPathEl);this._textVmlEl=textVmlEl}else{skewEl=textVmlEl.firstChild;pathEl=skewEl.nextSibling;textPathEl=pathEl.nextSibling}var coords=[x,y];var textVmlElStyle=textVmlEl.style;if(m&&fromTextEl){applyTransform(coords,coords,m);skewEl.on=true;skewEl.matrix=m[0].toFixed(3)+comma+m[2].toFixed(3)+comma+m[1].toFixed(3)+comma+m[3].toFixed(3)+",0,0";skewEl.offset=(round$4(coords[0])||0)+","+(round$4(coords[1])||0);skewEl.origin="0 0";textVmlElStyle.left="0px";
textVmlElStyle.top="0px"}else{skewEl.on=false;textVmlElStyle.left=round$4(x)+"px";textVmlElStyle.top=round$4(y)+"px"}textPathEl.string=encodeHtmlAttribute(text);try{textPathEl.style.font=font}catch(e){}updateFillAndStroke(textVmlEl,"fill",{fill:style.textFill,opacity:style.opacity},this);updateFillAndStroke(textVmlEl,"stroke",{stroke:style.textStroke,opacity:style.opacity,lineDash:style.lineDash},this);textVmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2);append(vmlRoot,textVmlEl)};var removeRectText=function(vmlRoot){remove(vmlRoot,this._textVmlEl);this._textVmlEl=null};var appendRectText=function(vmlRoot){append(vmlRoot,this._textVmlEl)};var list=[RectText,Displayable,ZImage,Path,Text];for(var i$3=0;i$3<list.length;i$3++){var proto$8=list[i$3].prototype;proto$8.drawRectText=drawRectText;proto$8.removeRectText=removeRectText;proto$8.appendRectText=appendRectText}Text.prototype.brushVML=function(vmlRoot){var style=this.style;if(style.text!=null){this.drawRectText(vmlRoot,{x:style.x||0,y:style.y||0,width:0,height:0},this.getBoundingRect(),true)}else{this.removeRectText(vmlRoot)}};Text.prototype.onRemove=function(vmlRoot){this.removeRectText(vmlRoot)};Text.prototype.onAdd=function(vmlRoot){this.appendRectText(vmlRoot)}}function parseInt10$1(val){return parseInt(val,10)}function VMLPainter(root,storage){initVML();this.root=root;this.storage=storage;var vmlViewport=document.createElement("div");var vmlRoot=document.createElement("div");vmlViewport.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;";vmlRoot.style.cssText="position:absolute;left:0;top:0;";root.appendChild(vmlViewport);this._vmlRoot=vmlRoot;this._vmlViewport=vmlViewport;this.resize();var oldDelFromStorage=storage.delFromStorage;var oldAddToStorage=storage.addToStorage;storage.delFromStorage=function(el){oldDelFromStorage.call(storage,el);if(el){el.onRemove&&el.onRemove(vmlRoot)}};storage.addToStorage=function(el){el.onAdd&&el.onAdd(vmlRoot);oldAddToStorage.call(storage,el)
};this._firstPaint=true}VMLPainter.prototype={constructor:VMLPainter,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var viewportRoot=this.getViewportRoot();if(viewportRoot){return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}}},refresh:function(){var list=this.storage.getDisplayList(true,true);this._paintList(list)},_paintList:function(list){var vmlRoot=this._vmlRoot;for(var i=0;i<list.length;i++){var el=list[i];if(el.invisible||el.ignore){if(!el.__alreadyNotVisible){el.onRemove(vmlRoot)}el.__alreadyNotVisible=true}else{if(el.__alreadyNotVisible){el.onAdd(vmlRoot)}el.__alreadyNotVisible=false;if(el.__dirty){el.beforeBrush&&el.beforeBrush();(el.brushVML||el.brush).call(el,vmlRoot);el.afterBrush&&el.afterBrush()}}el.__dirty=false}if(this._firstPaint){this._vmlViewport.appendChild(vmlRoot);this._firstPaint=false}},resize:function(width,height){var width=width==null?this._getWidth():width;var height=height==null?this._getHeight():height;if(this._width!==width||this._height!==height){this._width=width;this._height=height;var vmlViewportStyle=this._vmlViewport.style;vmlViewportStyle.width=width+"px";vmlViewportStyle.height=height+"px"}},dispose:function(){this.root.innerHTML="";this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){if(this._vmlViewport){this.root.removeChild(this._vmlViewport)}},_getWidth:function(){var root=this.root;var stl=root.currentStyle;return((root.clientWidth||parseInt10$1(stl.width))-parseInt10$1(stl.paddingLeft)-parseInt10$1(stl.paddingRight))|0},_getHeight:function(){var root=this.root;var stl=root.currentStyle;return((root.clientHeight||parseInt10$1(stl.height))-parseInt10$1(stl.paddingTop)-parseInt10$1(stl.paddingBottom))|0}};function createMethodNotSupport(method){return function(){zrLog('In IE8.0 VML mode painter not support method "'+method+'"')}}each$1(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(name){VMLPainter.prototype[name]=createMethodNotSupport(name)
});registerPainter("vml",VMLPainter);var svgURI="http://www.w3.org/2000/svg";function createElement(name){return document.createElementNS(svgURI,name)}var CMD$4=PathProxy.CMD;var arrayJoin=Array.prototype.join;var NONE="none";var mathRound=Math.round;var mathSin$3=Math.sin;var mathCos$3=Math.cos;var PI$5=Math.PI;var PI2$7=Math.PI*2;var degree=180/PI$5;var EPSILON$4=0.0001;function round4(val){return mathRound(val*10000)/10000}function isAroundZero$1(val){return val<EPSILON$4&&val>-EPSILON$4}function pathHasFill(style,isText){var fill=isText?style.textFill:style.fill;return fill!=null&&fill!==NONE}function pathHasStroke(style,isText){var stroke=isText?style.textStroke:style.stroke;return stroke!=null&&stroke!==NONE}function setTransform(svgEl,m){if(m){attr(svgEl,"transform","matrix("+arrayJoin.call(m,",")+")")}}function attr(el,key,val){if(!val||val.type!=="linear"&&val.type!=="radial"){el.setAttribute(key,val)}}function attrXLink(el,key,val){el.setAttributeNS("http://www.w3.org/1999/xlink",key,val)}function bindStyle(svgEl,style,isText,el){if(pathHasFill(style,isText)){var fill=isText?style.textFill:style.fill;fill=fill==="transparent"?NONE:fill;if(svgEl.getAttribute("clip-path")!=="none"&&fill===NONE){fill="rgba(0, 0, 0, 0.002)"}attr(svgEl,"fill",fill);attr(svgEl,"fill-opacity",style.fillOpacity!=null?style.fillOpacity*style.opacity:style.opacity)}else{attr(svgEl,"fill",NONE)}if(pathHasStroke(style,isText)){var stroke=isText?style.textStroke:style.stroke;stroke=stroke==="transparent"?NONE:stroke;attr(svgEl,"stroke",stroke);var strokeWidth=isText?style.textStrokeWidth:style.lineWidth;var strokeScale=!isText&&style.strokeNoScale?el.getLineScale():1;attr(svgEl,"stroke-width",strokeWidth/strokeScale);attr(svgEl,"paint-order",isText?"stroke":"fill");attr(svgEl,"stroke-opacity",style.strokeOpacity!=null?style.strokeOpacity:style.opacity);var lineDash=style.lineDash;if(lineDash){attr(svgEl,"stroke-dasharray",style.lineDash.join(","));attr(svgEl,"stroke-dashoffset",mathRound(style.lineDashOffset||0))
}else{attr(svgEl,"stroke-dasharray","")}style.lineCap&&attr(svgEl,"stroke-linecap",style.lineCap);style.lineJoin&&attr(svgEl,"stroke-linejoin",style.lineJoin);style.miterLimit&&attr(svgEl,"stroke-miterlimit",style.miterLimit)}else{attr(svgEl,"stroke",NONE)}}function pathDataToString$1(path){var str=[];var data=path.data;var dataLength=path.len();for(var i=0;i<dataLength;){var cmd=data[i++];var cmdStr="";var nData=0;switch(cmd){case CMD$4.M:cmdStr="M";nData=2;break;case CMD$4.L:cmdStr="L";nData=2;break;case CMD$4.Q:cmdStr="Q";nData=4;break;case CMD$4.C:cmdStr="C";nData=6;break;case CMD$4.A:var cx=data[i++];var cy=data[i++];var rx=data[i++];var ry=data[i++];var theta=data[i++];var dTheta=data[i++];var psi=data[i++];var clockwise=data[i++];var dThetaPositive=Math.abs(dTheta);var isCircle=isAroundZero$1(dThetaPositive-PI2$7)&&!isAroundZero$1(dThetaPositive);var large=false;if(dThetaPositive>=PI2$7){large=true}else{if(isAroundZero$1(dThetaPositive)){large=false}else{large=(dTheta>-PI$5&&dTheta<0||dTheta>PI$5)===!!clockwise}}var x0=round4(cx+rx*mathCos$3(theta));var y0=round4(cy+ry*mathSin$3(theta));if(isCircle){if(clockwise){dTheta=PI2$7-0.0001}else{dTheta=-PI2$7+0.0001}large=true;if(i===9){str.push("M",x0,y0)}}var x=round4(cx+rx*mathCos$3(theta+dTheta));var y=round4(cy+ry*mathSin$3(theta+dTheta));str.push("A",round4(rx),round4(ry),mathRound(psi*degree),+large,+clockwise,x,y);break;case CMD$4.Z:cmdStr="Z";break;case CMD$4.R:var x=round4(data[i++]);var y=round4(data[i++]);var w=round4(data[i++]);var h=round4(data[i++]);str.push("M",x,y,"L",x+w,y,"L",x+w,y+h,"L",x,y+h,"L",x,y);break}cmdStr&&str.push(cmdStr);for(var j=0;j<nData;j++){str.push(round4(data[i++]))}}return str.join(" ")}var svgPath={};svgPath.brush=function(el){var style=el.style;var svgEl=el.__svgEl;if(!svgEl){svgEl=createElement("path");el.__svgEl=svgEl}if(!el.path){el.createPathProxy()}var path=el.path;if(el.__dirtyPath){path.beginPath();path.subPixelOptimize=false;el.buildPath(path,el.shape);el.__dirtyPath=false;
var pathStr=pathDataToString$1(path);if(pathStr.indexOf("NaN")<0){attr(svgEl,"d",pathStr)}}bindStyle(svgEl,style,false,el);setTransform(svgEl,el.transform);if(style.text!=null){svgTextDrawRectText(el,el.getBoundingRect())}};var svgImage={};svgImage.brush=function(el){var style=el.style;var image=style.image;if(image instanceof HTMLImageElement){var src=image.src;image=src}if(!image){return}var x=style.x||0;var y=style.y||0;var dw=style.width;var dh=style.height;var svgEl=el.__svgEl;if(!svgEl){svgEl=createElement("image");el.__svgEl=svgEl}if(image!==el.__imageSrc){attrXLink(svgEl,"href",image);el.__imageSrc=image}attr(svgEl,"width",dw);attr(svgEl,"height",dh);attr(svgEl,"x",x);attr(svgEl,"y",y);setTransform(svgEl,el.transform);if(style.text!=null){svgTextDrawRectText(el,el.getBoundingRect())}};var svgText={};var tmpRect$3=new BoundingRect();var svgTextDrawRectText=function(el,rect,textRect){var style=el.style;el.__dirty&&normalizeTextStyle(style,true);var text=style.text;if(text==null){return}else{text+=""}var textSvgEl=el.__textSvgEl;if(!textSvgEl){textSvgEl=createElement("text");el.__textSvgEl=textSvgEl}var x;var y;var textPosition=style.textPosition;var distance=style.textDistance;var align=style.textAlign||"left";if(typeof style.fontSize==="number"){style.fontSize+="px"}var font=style.font||[style.fontStyle||"",style.fontWeight||"",style.fontSize||"",style.fontFamily||""].join(" ")||DEFAULT_FONT$1;var verticalAlign=getVerticalAlignForSvg(style.textVerticalAlign);textRect=getBoundingRect(text,font,align,verticalAlign,style.textPadding,style.textLineHeight);var lineHeight=textRect.lineHeight;if(textPosition instanceof Array){x=rect.x+textPosition[0];y=rect.y+textPosition[1]}else{var newPos=adjustTextPositionOnRect(textPosition,rect,distance);x=newPos.x;y=newPos.y;verticalAlign=getVerticalAlignForSvg(newPos.textVerticalAlign);align=newPos.textAlign}attr(textSvgEl,"alignment-baseline",verticalAlign);if(font){textSvgEl.style.font=font}var textPadding=style.textPadding;
attr(textSvgEl,"x",x);attr(textSvgEl,"y",y);bindStyle(textSvgEl,style,true,el);if(el instanceof Text||el.style.transformText){setTransform(textSvgEl,el.transform)}else{if(el.transform){tmpRect$3.copy(rect);tmpRect$3.applyTransform(el.transform);rect=tmpRect$3}else{var pos=el.transformCoordToGlobal(rect.x,rect.y);rect.x=pos[0];rect.y=pos[1];el.transform=identity(create$1())}var origin=style.textOrigin;if(origin==="center"){x=textRect.width/2+x;y=textRect.height/2+y}else{if(origin){x=origin[0]+x;y=origin[1]+y}}var rotate$$1=-style.textRotation||0;var transform=create$1();rotate(transform,transform,rotate$$1);var pos=[el.transform[4],el.transform[5]];translate(transform,transform,pos);setTransform(textSvgEl,transform)}var textLines=text.split("\n");var nTextLines=textLines.length;var textAnchor=align;if(textAnchor==="left"){textAnchor="start";textPadding&&(x+=textPadding[3])}else{if(textAnchor==="right"){textAnchor="end";textPadding&&(x-=textPadding[1])}else{if(textAnchor==="center"){textAnchor="middle";textPadding&&(x+=(textPadding[3]-textPadding[1])/2)}}}var dy=0;if(verticalAlign==="after-edge"){dy=-textRect.height+lineHeight;textPadding&&(dy-=textPadding[2])}else{if(verticalAlign==="middle"){dy=(-textRect.height+lineHeight)/2;textPadding&&(y+=(textPadding[0]-textPadding[2])/2)}else{textPadding&&(dy+=textPadding[0])}}if(el.__text!==text||el.__textFont!==font){var tspanList=el.__tspanList||[];el.__tspanList=tspanList;for(var i=0;i<nTextLines;i++){var tspan=tspanList[i];if(!tspan){tspan=tspanList[i]=createElement("tspan");textSvgEl.appendChild(tspan);attr(tspan,"alignment-baseline",verticalAlign);attr(tspan,"text-anchor",textAnchor)}else{tspan.innerHTML=""}attr(tspan,"x",x);attr(tspan,"y",y+i*lineHeight+dy);tspan.appendChild(document.createTextNode(textLines[i]))}for(;i<tspanList.length;i++){textSvgEl.removeChild(tspanList[i])}tspanList.length=nTextLines;el.__text=text;el.__textFont=font}else{if(el.__tspanList.length){var len=el.__tspanList.length;for(var i=0;i<len;++i){var tspan=el.__tspanList[i];
if(tspan){attr(tspan,"x",x);attr(tspan,"y",y+i*lineHeight+dy)}}}}};function getVerticalAlignForSvg(verticalAlign){if(verticalAlign==="middle"){return"middle"}else{if(verticalAlign==="bottom"){return"after-edge"}else{return"hanging"}}}svgText.drawRectText=svgTextDrawRectText;svgText.brush=function(el){var style=el.style;if(style.text!=null){style.textPosition=[0,0];svgTextDrawRectText(el,{x:style.x||0,y:style.y||0,width:0,height:0},el.getBoundingRect())}};function Diff(){}Diff.prototype={diff:function(oldArr,newArr,equals){if(!equals){equals=function(a,b){return a===b}}this.equals=equals;var self=this;oldArr=oldArr.slice();newArr=newArr.slice();var newLen=newArr.length;var oldLen=oldArr.length;var editLength=1;var maxEditLength=newLen+oldLen;var bestPath=[{newPos:-1,components:[]}];var oldPos=this.extractCommon(bestPath[0],newArr,oldArr,0);if(bestPath[0].newPos+1>=newLen&&oldPos+1>=oldLen){var indices=[];for(var i=0;i<newArr.length;i++){indices.push(i)}return[{indices:indices,count:newArr.length}]}function execEditLength(){for(var diagonalPath=-1*editLength;diagonalPath<=editLength;diagonalPath+=2){var basePath;var addPath=bestPath[diagonalPath-1];var removePath=bestPath[diagonalPath+1];var oldPos=(removePath?removePath.newPos:0)-diagonalPath;if(addPath){bestPath[diagonalPath-1]=undefined}var canAdd=addPath&&addPath.newPos+1<newLen;var canRemove=removePath&&0<=oldPos&&oldPos<oldLen;if(!canAdd&&!canRemove){bestPath[diagonalPath]=undefined;continue}if(!canAdd||(canRemove&&addPath.newPos<removePath.newPos)){basePath=clonePath(removePath);self.pushComponent(basePath.components,undefined,true)}else{basePath=addPath;basePath.newPos++;self.pushComponent(basePath.components,true,undefined)}oldPos=self.extractCommon(basePath,newArr,oldArr,diagonalPath);if(basePath.newPos+1>=newLen&&oldPos+1>=oldLen){return buildValues(self,basePath.components,newArr,oldArr)}else{bestPath[diagonalPath]=basePath}}editLength++}while(editLength<=maxEditLength){var ret=execEditLength();if(ret){return ret
}}},pushComponent:function(components,added,removed){var last=components[components.length-1];if(last&&last.added===added&&last.removed===removed){components[components.length-1]={count:last.count+1,added:added,removed:removed}}else{components.push({count:1,added:added,removed:removed})}},extractCommon:function(basePath,newArr,oldArr,diagonalPath){var newLen=newArr.length;var oldLen=oldArr.length;var newPos=basePath.newPos;var oldPos=newPos-diagonalPath;var commonCount=0;while(newPos+1<newLen&&oldPos+1<oldLen&&this.equals(newArr[newPos+1],oldArr[oldPos+1])){newPos++;oldPos++;commonCount++}if(commonCount){basePath.components.push({count:commonCount})}basePath.newPos=newPos;return oldPos},tokenize:function(value){return value.slice()},join:function(value){return value.slice()}};function buildValues(diff,components,newArr,oldArr){var componentPos=0;var componentLen=components.length;var newPos=0;var oldPos=0;for(;componentPos<componentLen;componentPos++){var component=components[componentPos];if(!component.removed){var indices=[];for(var i=newPos;i<newPos+component.count;i++){indices.push(i)}component.indices=indices;newPos+=component.count;if(!component.added){oldPos+=component.count}}else{var indices=[];for(var i=oldPos;i<oldPos+component.count;i++){indices.push(i)}component.indices=indices;oldPos+=component.count}}return components}function clonePath(path){return{newPos:path.newPos,components:path.components.slice(0)}}var arrayDiff=new Diff();var arrayDiff$1=function(oldArr,newArr,callback){return arrayDiff.diff(oldArr,newArr,callback)};var MARK_UNUSED="0";var MARK_USED="1";function Definable(zrId,svgRoot,tagNames,markLabel,domName){this._zrId=zrId;this._svgRoot=svgRoot;this._tagNames=typeof tagNames==="string"?[tagNames]:tagNames;this._markLabel=markLabel;this._domName=domName||"_dom";this.nextId=0}Definable.prototype.createElement=createElement;Definable.prototype.getDefs=function(isForceCreating){var svgRoot=this._svgRoot;var defs=this._svgRoot.getElementsByTagName("defs");
if(defs.length===0){if(isForceCreating){defs=svgRoot.insertBefore(this.createElement("defs"),svgRoot.firstChild);if(!defs.contains){defs.contains=function(el){var children=defs.children;if(!children){return false}for(var i=children.length-1;i>=0;--i){if(children[i]===el){return true}}return false}}return defs}else{return null}}else{return defs[0]}};Definable.prototype.update=function(element,onUpdate){if(!element){return}var defs=this.getDefs(false);if(element[this._domName]&&defs.contains(element[this._domName])){if(typeof onUpdate==="function"){onUpdate(element)}}else{var dom=this.add(element);if(dom){element[this._domName]=dom}}};Definable.prototype.addDom=function(dom){var defs=this.getDefs(true);defs.appendChild(dom)};Definable.prototype.removeDom=function(element){var defs=this.getDefs(false);if(defs&&element[this._domName]){defs.removeChild(element[this._domName]);element[this._domName]=null}};Definable.prototype.getDoms=function(){var defs=this.getDefs(false);if(!defs){return[]}var doms=[];each$1(this._tagNames,function(tagName){var tags=defs.getElementsByTagName(tagName);doms=doms.concat([].slice.call(tags))});return doms};Definable.prototype.markAllUnused=function(){var doms=this.getDoms();var that=this;each$1(doms,function(dom){dom[that._markLabel]=MARK_UNUSED})};Definable.prototype.markUsed=function(dom){if(dom){dom[this._markLabel]=MARK_USED}};Definable.prototype.removeUnused=function(){var defs=this.getDefs(false);if(!defs){return}var doms=this.getDoms();var that=this;each$1(doms,function(dom){if(dom[that._markLabel]!==MARK_USED){defs.removeChild(dom)}})};Definable.prototype.getSvgProxy=function(displayable){if(displayable instanceof Path){return svgPath}else{if(displayable instanceof ZImage){return svgImage}else{if(displayable instanceof Text){return svgText}else{return svgPath}}}};Definable.prototype.getTextSvgElement=function(displayable){return displayable.__textSvgEl};Definable.prototype.getSvgElement=function(displayable){return displayable.__svgEl
};function GradientManager(zrId,svgRoot){Definable.call(this,zrId,svgRoot,["linearGradient","radialGradient"],"__gradient_in_use__")}inherits(GradientManager,Definable);GradientManager.prototype.addWithoutUpdate=function(svgElement,displayable){if(displayable&&displayable.style){var that=this;each$1(["fill","stroke"],function(fillOrStroke){if(displayable.style[fillOrStroke]&&(displayable.style[fillOrStroke].type==="linear"||displayable.style[fillOrStroke].type==="radial")){var gradient=displayable.style[fillOrStroke];var defs=that.getDefs(true);var dom;if(gradient._dom){dom=gradient._dom;if(!defs.contains(gradient._dom)){that.addDom(dom)}}else{dom=that.add(gradient)}that.markUsed(displayable);var id=dom.getAttribute("id");svgElement.setAttribute(fillOrStroke,"url(#"+id+")")}})}};GradientManager.prototype.add=function(gradient){var dom;if(gradient.type==="linear"){dom=this.createElement("linearGradient")}else{if(gradient.type==="radial"){dom=this.createElement("radialGradient")}else{zrLog("Illegal gradient type.");return null}}gradient.id=gradient.id||this.nextId++;dom.setAttribute("id","zr"+this._zrId+"-gradient-"+gradient.id);this.updateDom(gradient,dom);this.addDom(dom);return dom};GradientManager.prototype.update=function(gradient){var that=this;Definable.prototype.update.call(this,gradient,function(){var type=gradient.type;var tagName=gradient._dom.tagName;if(type==="linear"&&tagName==="linearGradient"||type==="radial"&&tagName==="radialGradient"){that.updateDom(gradient,gradient._dom)}else{that.removeDom(gradient);that.add(gradient)}})};GradientManager.prototype.updateDom=function(gradient,dom){if(gradient.type==="linear"){dom.setAttribute("x1",gradient.x);dom.setAttribute("y1",gradient.y);dom.setAttribute("x2",gradient.x2);dom.setAttribute("y2",gradient.y2)}else{if(gradient.type==="radial"){dom.setAttribute("cx",gradient.x);dom.setAttribute("cy",gradient.y);dom.setAttribute("r",gradient.r)}else{zrLog("Illegal gradient type.");return}}if(gradient.global){dom.setAttribute("gradientUnits","userSpaceOnUse")
}else{dom.setAttribute("gradientUnits","objectBoundingBox")}dom.innerHTML="";var colors=gradient.colorStops;for(var i=0,len=colors.length;i<len;++i){var stop=this.createElement("stop");stop.setAttribute("offset",colors[i].offset*100+"%");var color=colors[i].color;if(color.indexOf("rgba">-1)){var opacity=parse(color)[3];var hex=toHex(color);stop.setAttribute("stop-color","#"+hex);stop.setAttribute("stop-opacity",opacity)}else{stop.setAttribute("stop-color",colors[i].color)}dom.appendChild(stop)}gradient._dom=dom};GradientManager.prototype.markUsed=function(displayable){if(displayable.style){var gradient=displayable.style.fill;if(gradient&&gradient._dom){Definable.prototype.markUsed.call(this,gradient._dom)}gradient=displayable.style.stroke;if(gradient&&gradient._dom){Definable.prototype.markUsed.call(this,gradient._dom)}}};function ClippathManager(zrId,svgRoot){Definable.call(this,zrId,svgRoot,"clipPath","__clippath_in_use__")}inherits(ClippathManager,Definable);ClippathManager.prototype.update=function(displayable){var svgEl=this.getSvgElement(displayable);if(svgEl){this.updateDom(svgEl,displayable.__clipPaths,false)}var textEl=this.getTextSvgElement(displayable);if(textEl){this.updateDom(textEl,displayable.__clipPaths,true)}this.markUsed(displayable)};ClippathManager.prototype.updateDom=function(parentEl,clipPaths,isText){if(clipPaths&&clipPaths.length>0){var defs=this.getDefs(true);var clipPath=clipPaths[0];var clipPathEl;var id;var dom=isText?"_textDom":"_dom";if(clipPath[dom]){id=clipPath[dom].getAttribute("id");clipPathEl=clipPath[dom];if(!defs.contains(clipPathEl)){defs.appendChild(clipPathEl)}}else{id="zr"+this._zrId+"-clip-"+this.nextId;++this.nextId;clipPathEl=this.createElement("clipPath");clipPathEl.setAttribute("id",id);defs.appendChild(clipPathEl);clipPath[dom]=clipPathEl}var svgProxy=this.getSvgProxy(clipPath);if(clipPath.transform&&clipPath.parent.invTransform&&!isText){var transform=Array.prototype.slice.call(clipPath.transform);mul$1(clipPath.transform,clipPath.parent.invTransform,clipPath.transform);
svgProxy.brush(clipPath);clipPath.transform=transform}else{svgProxy.brush(clipPath)}var pathEl=this.getSvgElement(clipPath);clipPathEl.innerHTML="";clipPathEl.appendChild(pathEl.cloneNode());parentEl.setAttribute("clip-path","url(#"+id+")");if(clipPaths.length>1){this.updateDom(clipPathEl,clipPaths.slice(1),isText)}}else{if(parentEl){parentEl.setAttribute("clip-path","none")}}};ClippathManager.prototype.markUsed=function(displayable){var that=this;if(displayable.__clipPaths&&displayable.__clipPaths.length>0){each$1(displayable.__clipPaths,function(clipPath){if(clipPath._dom){Definable.prototype.markUsed.call(that,clipPath._dom)}if(clipPath._textDom){Definable.prototype.markUsed.call(that,clipPath._textDom)}})}};function ShadowManager(zrId,svgRoot){Definable.call(this,zrId,svgRoot,["filter"],"__filter_in_use__","_shadowDom")}inherits(ShadowManager,Definable);ShadowManager.prototype.addWithoutUpdate=function(svgElement,displayable){if(displayable&&hasShadow(displayable.style)){var style=displayable.style;var dom;if(style._shadowDom){dom=style._shadowDom;var defs=this.getDefs(true);if(!defs.contains(style._shadowDom)){this.addDom(dom)}}else{dom=this.add(displayable)}this.markUsed(displayable);var id=dom.getAttribute("id");svgElement.style.filter="url(#"+id+")"}};ShadowManager.prototype.add=function(displayable){var dom=this.createElement("filter");var style=displayable.style;style._shadowDomId=style._shadowDomId||this.nextId++;dom.setAttribute("id","zr"+this._zrId+"-shadow-"+style._shadowDomId);this.updateDom(displayable,dom);this.addDom(dom);return dom};ShadowManager.prototype.update=function(svgElement,displayable){var style=displayable.style;if(hasShadow(style)){var that=this;Definable.prototype.update.call(this,displayable,function(style){that.updateDom(displayable,style._shadowDom)})}else{this.remove(svgElement,style)}};ShadowManager.prototype.remove=function(svgElement,style){if(style._shadowDomId!=null){this.removeDom(style);svgElement.style.filter=""}};ShadowManager.prototype.updateDom=function(displayable,dom){var domChild=dom.getElementsByTagName("feDropShadow");
if(domChild.length===0){domChild=this.createElement("feDropShadow")}else{domChild=domChild[0]}var style=displayable.style;var scaleX=displayable.scale?(displayable.scale[0]||1):1;var scaleY=displayable.scale?(displayable.scale[1]||1):1;var offsetX,offsetY,blur,color;if(style.shadowBlur||style.shadowOffsetX||style.shadowOffsetY){offsetX=style.shadowOffsetX||0;offsetY=style.shadowOffsetY||0;blur=style.shadowBlur;color=style.shadowColor}else{if(style.textShadowBlur){offsetX=style.textShadowOffsetX||0;offsetY=style.textShadowOffsetY||0;blur=style.textShadowBlur;color=style.textShadowColor}else{this.removeDom(dom,style);return}}domChild.setAttribute("dx",offsetX/scaleX);domChild.setAttribute("dy",offsetY/scaleY);domChild.setAttribute("flood-color",color);var stdDx=blur/2/scaleX;var stdDy=blur/2/scaleY;var stdDeviation=stdDx+" "+stdDy;domChild.setAttribute("stdDeviation",stdDeviation);dom.setAttribute("x","-100%");dom.setAttribute("y","-100%");dom.setAttribute("width",Math.ceil(blur/2*200)+"%");dom.setAttribute("height",Math.ceil(blur/2*200)+"%");dom.appendChild(domChild);style._shadowDom=dom};ShadowManager.prototype.markUsed=function(displayable){var style=displayable.style;if(style&&style._shadowDom){Definable.prototype.markUsed.call(this,style._shadowDom)}};function hasShadow(style){return style&&(style.shadowBlur||style.shadowOffsetX||style.shadowOffsetY||style.textShadowBlur||style.textShadowOffsetX||style.textShadowOffsetY)}function parseInt10$2(val){return parseInt(val,10)}function getSvgProxy(el){if(el instanceof Path){return svgPath}else{if(el instanceof ZImage){return svgImage}else{if(el instanceof Text){return svgText}else{return svgPath}}}}function checkParentAvailable(parent,child){return child&&parent&&child.parentNode!==parent}function insertAfter(parent,child,prevSibling){if(checkParentAvailable(parent,child)&&prevSibling){var nextSibling=prevSibling.nextSibling;nextSibling?parent.insertBefore(child,nextSibling):parent.appendChild(child)}}function prepend(parent,child){if(checkParentAvailable(parent,child)){var firstChild=parent.firstChild;
firstChild?parent.insertBefore(child,firstChild):parent.appendChild(child)}}function remove$1(parent,child){if(child&&parent&&child.parentNode===parent){parent.removeChild(child)}}function getTextSvgElement(displayable){return displayable.__textSvgEl}function getSvgElement(displayable){return displayable.__svgEl}var SVGPainter=function(root,storage,opts,zrId){this.root=root;this.storage=storage;this._opts=opts=extend({},opts||{});var svgRoot=createElement("svg");svgRoot.setAttribute("xmlns","http://www.w3.org/2000/svg");svgRoot.setAttribute("version","1.1");svgRoot.setAttribute("baseProfile","full");svgRoot.style.cssText="user-select:none;position:absolute;left:0;top:0;";this.gradientManager=new GradientManager(zrId,svgRoot);this.clipPathManager=new ClippathManager(zrId,svgRoot);this.shadowManager=new ShadowManager(zrId,svgRoot);var viewport=document.createElement("div");viewport.style.cssText="overflow:hidden;position:relative";this._svgRoot=svgRoot;this._viewport=viewport;root.appendChild(viewport);viewport.appendChild(svgRoot);this.resize(opts.width,opts.height);this._visibleList=[]};SVGPainter.prototype={constructor:SVGPainter,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var viewportRoot=this.getViewportRoot();if(viewportRoot){return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}}},refresh:function(){var list=this.storage.getDisplayList(true);this._paintList(list)},setBackgroundColor:function(backgroundColor){this._viewport.style.background=backgroundColor},_paintList:function(list){this.gradientManager.markAllUnused();this.clipPathManager.markAllUnused();this.shadowManager.markAllUnused();var svgRoot=this._svgRoot;var visibleList=this._visibleList;var listLen=list.length;var newVisibleList=[];var i;for(i=0;i<listLen;i++){var displayable=list[i];var svgProxy=getSvgProxy(displayable);var svgElement=getSvgElement(displayable)||getTextSvgElement(displayable);if(!displayable.invisible){if(displayable.__dirty){svgProxy&&svgProxy.brush(displayable);
this.clipPathManager.update(displayable);if(displayable.style){this.gradientManager.update(displayable.style.fill);this.gradientManager.update(displayable.style.stroke);this.shadowManager.update(svgElement,displayable)}displayable.__dirty=false}newVisibleList.push(displayable)}}var diff=arrayDiff$1(visibleList,newVisibleList);var prevSvgElement;for(i=0;i<diff.length;i++){var item=diff[i];if(item.removed){for(var k=0;k<item.count;k++){var displayable=visibleList[item.indices[k]];var svgElement=getSvgElement(displayable);var textSvgElement=getTextSvgElement(displayable);remove$1(svgRoot,svgElement);remove$1(svgRoot,textSvgElement)}}}for(i=0;i<diff.length;i++){var item=diff[i];if(item.added){for(var k=0;k<item.count;k++){var displayable=newVisibleList[item.indices[k]];var svgElement=getSvgElement(displayable);var textSvgElement=getTextSvgElement(displayable);prevSvgElement?insertAfter(svgRoot,svgElement,prevSvgElement):prepend(svgRoot,svgElement);if(svgElement){insertAfter(svgRoot,textSvgElement,svgElement)}else{if(prevSvgElement){insertAfter(svgRoot,textSvgElement,prevSvgElement)}else{prepend(svgRoot,textSvgElement)}}insertAfter(svgRoot,textSvgElement,svgElement);prevSvgElement=textSvgElement||svgElement||prevSvgElement;this.gradientManager.addWithoutUpdate(svgElement,displayable);this.shadowManager.addWithoutUpdate(prevSvgElement,displayable);this.clipPathManager.markUsed(displayable)}}else{if(!item.removed){for(var k=0;k<item.count;k++){var displayable=newVisibleList[item.indices[k]];prevSvgElement=svgElement=getTextSvgElement(displayable)||getSvgElement(displayable)||prevSvgElement;this.gradientManager.markUsed(displayable);this.gradientManager.addWithoutUpdate(svgElement,displayable);this.shadowManager.markUsed(displayable);this.shadowManager.addWithoutUpdate(svgElement,displayable);this.clipPathManager.markUsed(displayable)}}}}this.gradientManager.removeUnused();this.clipPathManager.removeUnused();this.shadowManager.removeUnused();this._visibleList=newVisibleList},_getDefs:function(isForceCreating){var svgRoot=this._svgRoot;
var defs=this._svgRoot.getElementsByTagName("defs");if(defs.length===0){if(isForceCreating){var defs=svgRoot.insertBefore(createElement("defs"),svgRoot.firstChild);if(!defs.contains){defs.contains=function(el){var children=defs.children;if(!children){return false}for(var i=children.length-1;i>=0;--i){if(children[i]===el){return true}}return false}}return defs}else{return null}}else{return defs[0]}},resize:function(width,height){var viewport=this._viewport;viewport.style.display="none";var opts=this._opts;width!=null&&(opts.width=width);height!=null&&(opts.height=height);width=this._getSize(0);height=this._getSize(1);viewport.style.display="";if(this._width!==width||this._height!==height){this._width=width;this._height=height;var viewportStyle=viewport.style;viewportStyle.width=width+"px";viewportStyle.height=height+"px";var svgRoot=this._svgRoot;svgRoot.setAttribute("width",width);svgRoot.setAttribute("height",height)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(whIdx){var opts=this._opts;var wh=["width","height"][whIdx];var cwh=["clientWidth","clientHeight"][whIdx];var plt=["paddingLeft","paddingTop"][whIdx];var prb=["paddingRight","paddingBottom"][whIdx];if(opts[wh]!=null&&opts[wh]!=="auto"){return parseFloat(opts[wh])}var root=this.root;var stl=document.defaultView.getComputedStyle(root);return((root[cwh]||parseInt10$2(stl[wh])||parseInt10$2(root.style[wh]))-(parseInt10$2(stl[plt])||0)-(parseInt10$2(stl[prb])||0))|0},dispose:function(){this.root.innerHTML="";this._svgRoot=this._viewport=this.storage=null},clear:function(){if(this._viewport){this.root.removeChild(this._viewport)}},pathToDataUrl:function(){this.refresh();var html=this._svgRoot.outerHTML;return"data:image/svg+xml;charset=UTF-8,"+html}};function createMethodNotSupport$1(method){return function(){zrLog('In SVG mode painter not support method "'+method+'"')}}each$1(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(name){SVGPainter.prototype[name]=createMethodNotSupport$1(name)
});registerPainter("svg",SVGPainter);exports.version=version;exports.dependencies=dependencies;exports.PRIORITY=PRIORITY;exports.init=init;exports.connect=connect;exports.disConnect=disConnect;exports.disconnect=disconnect;exports.dispose=dispose;exports.getInstanceByDom=getInstanceByDom;exports.getInstanceById=getInstanceById;exports.registerTheme=registerTheme;exports.registerPreprocessor=registerPreprocessor;exports.registerProcessor=registerProcessor;exports.registerPostUpdate=registerPostUpdate;exports.registerAction=registerAction;exports.registerCoordinateSystem=registerCoordinateSystem;exports.getCoordinateSystemDimensions=getCoordinateSystemDimensions;exports.registerLayout=registerLayout;exports.registerVisual=registerVisual;exports.registerLoading=registerLoading;exports.extendComponentModel=extendComponentModel;exports.extendComponentView=extendComponentView;exports.extendSeriesModel=extendSeriesModel;exports.extendChartView=extendChartView;exports.setCanvasCreator=setCanvasCreator;exports.registerMap=registerMap;exports.getMap=getMap;exports.dataTool=dataTool;exports.zrender=zrender;exports.number=number;exports.format=format;exports.throttle=throttle;exports.helper=helper;exports.matrix=matrix;exports.vector=vector;exports.color=color;exports.parseGeoJSON=parseGeoJson$1;exports.parseGeoJson=parseGeoJson;exports.util=ecUtil;exports.graphic=graphic$1;exports.List=List;exports.Model=Model;exports.Axis=Axis;exports.env=env$1})));
/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement("script");if(o.text=e,n){for(i in v){n[i]&&(o[i]=n[i])}}t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b="3.3.1",w=function(e,t){return new w.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++){if(null!=(e=arguments[s])){for(t in e){n=a[t],a!==(r=e[t])&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r))
}}}return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return !(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e){return !1}return !0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++){if(!1===t.call(e[r],r,e[r])){break}}}else{for(r in e){if(!1===t.call(e[r],r,e[r])){break}}}return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++){e[i++]=t[r]}return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++){(r=!t(e[o],o))!==s&&i.push(e[o])}return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e)){for(r=e.length;o<r;o++){null!=(i=t(e[o],o,n))&&s.push(i)}}else{for(o in e){null!=(i=t(e[o],o,n))&&s.push(i)}}return a.apply([],s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function C(e){var t=!!e&&"length" in e&&e.length,n=x(e);return !g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n<r;n++){if(e[n]===t){return n}}return -1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",I="\\["+M+"*("+R+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+M+"*\\]",W=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",$=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),F=new RegExp("^"+M+"*,"+M+"*"),_=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),X=new RegExp(W),U=new RegExp("^"+R+"$"),V={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;
return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){p()},ie=me(function(e){return !0===e.disabled&&("form" in e||"label" in e)},{dir:"parentNode",next:"legend"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]){}e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T){return r}if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e))){if(o=f[1]){if(9===T){if(!(l=t.getElementById(o))){return r}if(l.id===o){return r.push(l),r}}else{if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o){return r.push(l),r}}}else{if(f[2]){return L.apply(r,t.getElementsByTagName(e)),r}if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName){return L.apply(r,t.getElementsByClassName(o)),r}}}if(n.qsa&&!S[e+" "]&&(!y||!y.test(e))){if(1!==T){m=t,v=e}else{if("object"!==t.nodeName.toLowerCase()){(c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=b),s=(h=a(e)).length;while(s--){h[s]="#"+c+" "+ve(h[s])}v=h.join(","),m=K.test(e)&&ge(t.parentNode)||t}}if(v){try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute("id")}}}}return u(e.replace(B,"$1"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return !!e(t)}catch(e){return !1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var n=e.split("|"),i=n.length;while(i--){r.attrHandle[n[i]]=t}}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;
if(r){return r}if(n){while(n=n.nextSibling){if(n===t){return -1}}}return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form" in t?t.parentNode&&!1===t.disabled?"label" in t?"label" in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label" in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--){n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return !!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);
if(o){if((n=o.getAttributeNode("id"))&&n.value===e){return[o]}i=t.getElementsByName(e),r=0;while(o=i[r++]){if((n=o.getAttributeNode("id"))&&n.value===e){return[o]}}}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++]){1===n.nodeType&&r.push(n)}return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g){return t.getElementsByClassName(e)}},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),v.push("!=",W)}),y=y.length&&new RegExp(y.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;
return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return !0}}}return !1},D=t?function(e,t){if(e===t){return f=!0,0}var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t){return f=!0,0}var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o){return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0}if(i===o){return ce(e,t)}n=e;while(n=n.parentNode){a.unshift(n)}n=t;while(n=n.parentNode){s.unshift(n)}while(a[r]===s[r]){r++}return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,"='$1']"),n.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!y||!y.test(t))){try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType){return r}}catch(e){}}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++]){t===e[o]&&(i=r.push(o))}while(i--){e.splice(r[i],1)}}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent){return e.textContent
}for(e=e.firstChild;e;e=e.nextSibling){n+=i(e)}}else{if(3===o||4===o){return e.nodeValue}}}else{while(t=e[r++]){n+=i(t)}}return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return !0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return !!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g]){if(s?p.nodeName.toLowerCase()===v:1===p.nodeType){return !1}}h=g="only"===e&&!h&&"nextSibling"
}return !0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop()){if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}}else{if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x){while(p=++d&&p&&p[g]||(x=d=0)||h.pop()){if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t)){break}}}}return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--){e[r=O(e,o[a])]=!(n[r]=o[a])}}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--){(o=a[s])&&(e[s]=!(t[s]=o))}}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}}while((t=t.parentNode)&&1===t.nodeType);return !1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected
},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return !1}}return !0},parent:function(e){return !r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2){e.push(n)}return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2){e.push(n)}return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;){e.push(r)}return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;){e.push(r)}return e})}}).pseudos.nth=r.pseudos.eq;for(t in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){r.pseudos[t]=fe(t)}for(t in {submit:!0,reset:!0}){r.pseudos[t]=pe(t)}function ye(){}ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c){return t?0:c.slice(0)}s=e,u=[],l=r.preFilter;while(s){n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=_.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length));for(a in r.filter){!(i=V[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length))}if(!n){break}}return t?s.length:s?oe.error(e):k(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r="";t<n;t++){r+=e[t].value}return r}function me(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){while(t=t[r]){if(1===t.nodeType||a){return e(t,n,i)}}return !1}:function(t,n,u){var l,c,f,p=[T,s];if(u){while(t=t[r]){if((1===t.nodeType||a)&&e(t,n,u)){return !0}}}else{while(t=t[r]){if(1===t.nodeType||a){if(f=t[b]||(t[b]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase()){t=t[r]||t
}else{if((l=c[o])&&l[0]===T&&l[1]===s){return p[2]=l[2]}if(c[o]=p,p[2]=e(t,n,u)){return !0}}}}}return !1}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--){if(!e[i](t,n,r)){return !1}}return !0}:e[0]}function be(e,t,n){for(var r=0,i=t.length;r<i;r++){oe(e,t[r],n)}return n}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++){(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)))}return a}function Te(e,t,n,r,i,o){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,o)),se(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||be(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:we(g,p,e,s,u),v=n?i||(o?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){l=we(v,d),r(l,[],s,u),c=l.length;while(c--){(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}}if(o){if(i||e){if(i){l=[],c=v.length;while(c--){(f=v[c])&&l.push(y[c]=f)}i(null,v=[],l,u)}c=v.length;while(c--){(f=v[c])&&(l=i?O(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}}else{v=we(v===a?v.splice(h,v.length):v),i?i(null,a,v,u):L.apply(a,v)}})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=me(function(e){return e===t},s,!0),f=me(function(e){return O(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++){if(n=r.relative[e[u].type]){p=[me(xe(p),n)]}else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o;i++){if(r.relative[e[i].type]){break}}return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}p.push(n)}}return xe(p)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,y,v=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||0.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){h=0,a||f.ownerDocument===d||(p(f),s=!g);while(y=e[h++]){if(y(f,a||d,s)){u.push(f);break}}c&&(T=E)}n&&((f=!y&&f)&&v--,o&&x.push(f))}if(v+=m,n&&m!==v){h=0;while(y=t[h++]){y(x,b,a,s)
}if(o){if(v>0){while(m--){x[m]||b[m]||(b[m]=j.call(u))}}b=we(b)}L.apply(u,b),c&&!o&&b.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(T=E,l=w),x};return n?se(o):o}return s=oe.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=a(e)),n=t.length;while(n--){(o=Ce(t[n]))[b]?r.push(o):i.push(o)}(o=S(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0])){return n}p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){if(l=u[o],r.relative[c=l.type]){break}if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),K.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u))){return L.apply(n,i),n}break}}}return(p||s(e,d))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n){return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase()){return e.defaultValue}}),ue(function(e){return null==e.getAttribute("disabled")})||le(P,function(e,t,n){var r;if(!n){return !0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}}),oe}(e);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){var r=[],i=void 0!==n;
while((e=e[t])&&9!==e.nodeType){if(1===e.nodeType){if(i&&w(e).is(n)){break}r.push(e)}}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling){1===e.nodeType&&e!==t&&n.push(e)}return n},D=w.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return g(t)?w.grep(e,function(e,r){return !!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e){return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++){if(w.contains(i[t],this)){return !0}}}))}for(n=this.pushStack([]),t=0;t<r;t++){w.find(e,i[t],n)}return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return !!j(this,"string"==typeof e&&D.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var i,o;if(!e){return this}if(n=n||q,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t){return !t||t.jquery?(t||n).find(e):this.constructor(t).find(e)}if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&w.isPlainObject(t)){for(i in t){g(this[i])?this[i](t[i]):this.attr(i,t[i])}}return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(r);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};
w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++){if(w.contains(this,t[e])){return !0}}})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!D.test(e)){for(;r<i;r++){for(n=this[r];n&&n!==t;n=n.parentNode){if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}}}}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&1!==e.nodeType){}return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function R(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}w.Callbacks=function(e){e="string"==typeof e?R(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;
a.length;s=-1){n=a.shift();while(++s<o.length){!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){var n;while((n=w.inArray(t,o,n))>-1){o.splice(n,1),n<=s&&s--}}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return !o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return !!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return !!r}};return l};function I(e){return e}function W(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise()){throw new TypeError("Thenable self-resolution")
}l=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,I,i),a(o,n,W,i)):(o++,l.call(e,a(o,n,I,i),a(o,n,W,i),a(o,n,I,n.notifyWith))):(r!==I&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==W&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:I,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:I)),n[2][3].add(a(0,e,g(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&($(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then))){return a.then()}while(n--){$(i[n],s(n),a.reject)}return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();w.fn.ready=function(e){return F.then(e)["catch"](function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(r,[w]))}}),w.ready.then=F.then;function _(){r.removeEventListener("DOMContentLoaded",_),e.removeEventListener("load",_),w.ready()}"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",_),e.addEventListener("load",_));
var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n)){i=!0;for(s in n){z(e,t,s,n[s],!0,o,a)}}else{if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t)){for(;s<u;s++){t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)))}}}return i?e:l?t.call(e):u?t(e[0],n):o},X=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(X,"ms-").replace(U,V)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t){i[G(t)]=n}else{for(r in t){i[G(r)]=t[r]}}return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t)) in r?[t]:t.match(M)||[]).length;while(n--){delete r[t[n]]}}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var J=new Q,K=new Q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType){if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=te(n)}catch(e){}K.set(e,t,n)}else{n=void 0}}return n}w.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)
}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){n=a.length;while(n--){a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),ne(o,r,i[r]))}J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){K.set(this,e)}):z(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=K.get(o,e))){return n}if(void 0!==(n=ne(o,e))){return n}}else{this.each(function(){K.set(this,e,t)})}},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e){return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,w.makeArray(n)):r.push(n)),r||[]}},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:w.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--){(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s))}return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")
},se=function(e,t,n,r){var i,o,a={};for(o in t){a[o]=e.style[o],e.style[o]=t[o]}i=n.apply(e,r||[]);for(o in t){e.style[o]=a[o]}return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},u=s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==l&&+u)&&ie.exec(w.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--){w.style(e,t,c+l),(1-o)*(1-(o=s()/u||0.5))<=0&&(a=0),c/=o}c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++){(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)))}for(o=0;o<a;o++){null!=i[o]&&(e[o].style.display=i[o])}return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;function ye(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?w.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;
n++){J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}}var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++){if((o=e[d])||0===o){if("object"===x(o)){w.merge(p,o.nodeType?[o]:o)}else{if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];while(c--){a=a.lastChild}w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else{p.push(t.createTextNode(o))}}}}f.textContent="",d=0;while(o=p[d++]){if(r&&w.inArray(o,r)>-1){i&&i.push(o)}else{if(l=w.contains(o.ownerDocument,o),a=ye(f.appendChild(o),"script"),l&&ve(a),n){c=0;while(o=a[c++]){he.test(o.type||"")&&n.push(o)}}}}return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var be=r.documentElement,we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Ee(){return !0}function ke(){return !1}function Se(){try{return r.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t){De(e,s,n,r,t[s],o)}return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i){i=ke}else{if(!i){return e}}return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.get(e);if(y){n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(be,i),n.guid||(n.guid=w.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return"undefined"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0
}),l=(t=(t||"").match(M)||[""]).length;while(l--){d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)}}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.hasData(e)&&J.get(e);if(y&&(u=y.events)){l=(t=(t||"").match(M)||[""]).length;while(l--){if(s=Ce.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--){c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c))}a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||w.removeEvent(e,d,y.handle),delete u[d])}else{for(d in u){w.event.remove(e,d+t[l],n,r,!0)}}}w.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t=w.event.fix(e),n,r,i,o,a,s,u=new Array(arguments.length),l=(J.get(this,"events")||{})[t.type]||[],c=w.event.special[t.type]||{};for(u[0]=t,n=1;n<arguments.length;n++){u[n]=arguments[n]}if(t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){s=w.event.handlers.call(this,t,l),n=0;while((o=s[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem,r=0;while((a=o.handlers[r++])&&!t.isImmediatePropagationStopped()){t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()))
}}return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1)){for(;l!==this;l=l.parentNode||this){if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++){void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r)}o.length&&s.push({elem:l,handlers:o})}}}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent){return t(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[e]}},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus){return this.focus(),!1}},delegateType:"focusin"},blur:{trigger:function(){if(this===Se()&&this.blur){return this.blur(),!1}},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input")){return this.click(),!1}},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event)){return new w.Event(e,t)}e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;
this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj){return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this}if("object"==typeof e){for(i in e){this.off(i,t,e[i])}return this}return !1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")?w(e).children("tbody")[0]||e:e
}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l){for(n=0,r=l[i].length;n<r;n++){w.event.add(t,i,l[i][n])}}}K.hasData(e)&&(s=K.access(e),u=w.extend({},s),K.set(t,u))}}function Me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&pe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,y=t[0],v=g(y);if(v||p>1&&"string"==typeof y&&!h.checkClone&&je.test(y)){return e.each(function(i){var o=e.eq(i);v&&(t[0]=y.call(this,i,o.html())),Re(o,t,n,r)})}if(p&&(i=xe(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,"script"),He)).length;f<p;f++){l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,"script"))),n.call(e[f],l,f)}if(u){for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++){l=s[f],he.test(l.type||"")&&!J.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):m(l.textContent.replace(qe,""),c,l))}}}return e}function Ie(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++){n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ve(ye(r,"script")),r.parentNode.removeChild(r))}return e}w.extend({htmlPrefilter:function(e){return e.replace(Ne,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=w.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e))){for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++){Me(o[r],a[r])}}if(t){if(n){for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++){Pe(o[r],a[r])}}else{Pe(e,s)}}return(a=ye(s,"script")).length>0&&ve(a,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;
void 0!==(n=e[o]);o++){if(Y(n)){if(t=n[J.expando]){if(t.events){for(r in t.events){i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle)}}n[J.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}}),w.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return z(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="")}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType){return t.innerHTML}if("string"==typeof e&&!Ae.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++){1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e)}t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;
a<=o;a++){n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get())}return this.pushStack(r)}});var We=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(oe.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",be.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();function Fe(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&We.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e()){return(this.get=t).apply(this,arguments)}delete this.get}}}var ze=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Qe(e){if(e in Ye){return e}var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;while(n--){if((e=Ge[n]+t) in Ye){return e
}}}function Je(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=Qe(e)||e),t}function Ke(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content")){return 0}for(;a<4;a+=2){"margin"===n&&(u+=w.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+oe[a]+"Width",!0,i))):(u+=w.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=w.css(e,"border"+oe[a]+"Width",!0,i):s+=w.css(e,"border"+oe[a]+"Width",!0,i))}return !r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-0.5))),u}function et(e,t,n){var r=$e(e),i=Fe(e,t,r),o="border-box"===w.css(e,"boxSizing",!1,r),a=o;if(We.test(i)){if(!n){return i}i="auto"}return a=a&&(h.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===w.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Xe.test(t),l=e.style;if(u||(t=Je(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n){return a&&"get" in a&&void 0!==(i=a.get(e,!1,r))?i:l[t]}"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set" in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t);return Xe.test(t)||(t=Je(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get" in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Fe(e,t,r)),"normal"===i&&t in Ve&&(i=Ve[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i
}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n){return !ze.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ue,function(){return et(e,t,r)})}},set:function(e,n,r){var i,o=$e(e),a="border-box"===w.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&h.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-0.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(e,n,s)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t){return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++){i[e+oe[r]+t]=o[r]||o[r-2]||o[0]}return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++){o[t[a]]=w.css(e,t[a],!1,r)}return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}});function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;
return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t){i["margin"+(n=oe[r])]=i["padding"+n]=e}return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=i.length;o<a;o++){if(r=i[o].call(n,t,e)){return r}}}function ct(e,t,n){var r,i,o,a,s,u,l,c,f="width" in t||"height" in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=J.get(e,"fxshow");n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})}));for(r in t){if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[r]){continue}g=!0}d[r]=y&&y[r]||w.style(e,r)}}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=J.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=w.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l
}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d){u||(y?"hidden" in y&&(g=y.hidden):y=J.access(e,"fxshow",{display:l}),o&&(y.hidden=!g),g&&fe([e],!0),p.done(function(){g||fe([e]),J.remove(e,"fxshow");for(r in d){w.style(e,r,d[r])}})),u=lt(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}}}function ft(e,t){var n,r,i,o,a;for(n in e){if(r=G(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand" in a){o=a.expand(o),delete e[r];for(n in o){n in e||(e[n]=o[n],t[n]=i)}}else{t[r]=i}}}function pt(e,t,n){var r,i,o=0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i){return !1}for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++){l.tweens[o].run(r)}return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i){return this}for(i=!0;n<r;n++){l.tweens[n].run(1)}return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(ft(c,l.opts.specialEasing);o<a;o++){if(r=pt.prefilters[o].call(l,e,c,l.opts)){return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r}}return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);
return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++){n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)}},prefilters:[ct],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=pt(this,w.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=J.get(this);if(i){a[i]&&a[i].stop&&r(a[i])}else{for(i in a){a[i]&&a[i].stop&&ot.test(i)&&r(a[i])}}for(i=o.length;i--;){o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1))}!t&&n||w.dequeue(this,e)})},finish:function(e){return !1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;){o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1))}for(t=0;t<a;t++){r[t]&&r[t].finish&&r[t].finish.call(this)}delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)
}}),w.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++){(e=n[t])()||n[t]!==e||n.splice(t--,1)}n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx?w.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var dt,ht=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return z(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o){return"undefined"==typeof e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set" in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get" in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)}},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType){while(n=i[r++]){e.removeAttribute(n)}}}}),dt={set:function(e,t,n){return !1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||w.find.attr;
ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return z(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o){return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set" in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get" in i&&null!==(r=i.get(e,t))?r:e[t]}},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function vt(e){return(e.match(M)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e?e.match(M)||[]:[]}w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e)){return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))})}if((t=xt(e)).length){while(n=this[u++]){if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++]){r.indexOf(" "+o+" ")<0&&(r+=o+" ")}i!==(s=vt(r))&&n.setAttribute("class",s)}}}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e)){return this.each(function(t){w(this).removeClass(e.call(this,t,mt(this)))})}if(!arguments.length){return this.attr("class","")}if((t=xt(e)).length){while(n=this[u++]){if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++]){while(r.indexOf(" "+o+" ")>-1){r=r.replace(" "+o+" "," ")
}}i!==(s=vt(r))&&n.setAttribute("class",s)}}}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r){i=0,o=w(this),a=xt(e);while(t=a[i++]){o.hasClass(t)?o.removeClass(t):o.addClass(t)}}else{void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))}})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++]){if(1===n.nodeType&&(" "+vt(mt(n))+" ").indexOf(t)>-1){return !0}}return !1}});var bt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];if(arguments.length){return r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set" in t&&void 0!==t.set(this,i,"value")||(this.value=i))})}if(i){return(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get" in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:vt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++){if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=w(n).val(),a){return t}s.push(t)}}return s},set:function(e,t){var n,r,i=e.options,o=w.makeArray(t),a=i.length;while(a--){((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0)}return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t)){return e.checked=w.inArray(w(e).val(),t)>-1
}}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin" in e;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,v=[i||r],m=f.call(t,"type")?t.type:t,x=f.call(t,"namespace")?t.namespace.split("."):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(m=(x=m.split(".")).shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[w.expando]?t:new w.Event(m,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!y(i)){for(l=d.delegateType||m,wt.test(l+m)||(s=s.parentNode);s;s=s.parentNode){v.push(s),u=s}u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}a=0;while((s=v[a++])&&!t.isPropagationStopped()){h=s,t.type=a>1?l:d.bindType||m,(p=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&Y(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault())}return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||c&&g(i[m])&&!y(i)&&((u=i[c])&&(i[c]=null),w.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Tt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n){return w.event.trigger(e,t,n,!0)}}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);
i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var Ct=e.location,Et=Date.now(),kt=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t){return null}try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var St=/\[\]$/,Dt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t)){w.each(t,function(t,i){n||St.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)})}else{if(n||"object"!==x(t)){r(e,t)}else{for(i in t){jt(e+"["+i+"]",t[i],n,r)}}}}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e)){w.each(e,function(){i(this.name,this.value)})}else{for(n in e){jt(n,e[n],t,i)}}return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var qt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Bt=r.createElement("a");Bt.href=Ct.href;function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(M)||[];if(g(n)){while(r=o[i++]){"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)
}}}}function _t(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t){void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n])}return r&&w.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0]){u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"))}if(r){for(i in s){if(s[i]&&s[i].test(r)){u.unshift(i);break}}}if(u[0] in n){o=u[0]}else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o){return o!==u[0]&&u.unshift(o),n[o]}}function Ut(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1]){for(a in e.converters){l[a.toLowerCase()]=e.converters[a]}}o=c.shift();while(o){if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift()){if("*"===o){o=u}else{if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o])){for(i in l){if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}}}if(!0!==a){if(a&&e["throws"]){t=a(t)}else{try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}}}}}}return{state:"success",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:Pt.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,w.ajaxSettings),t):zt(w.ajaxSettings,e)
},ajaxPrefilter:Ft(It),ajaxTransport:Ft(Wt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,y=h.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),x=h.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Ot.exec(a)){s[t[1].toLowerCase()]=t[2]}}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e){if(c){E.always(e[E.status])}else{for(t in e){x[t]=[x[t],e[t]]}}}return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(v.promise(E),h.url=((t||h.url||Ct.href)+"").replace(Rt,Ct.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(M)||[""],null==h.crossDomain){l=r.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),_t(It,h,n,E),c){return E}(f=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(qt,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,"$1"),d=(kt.test(o)?"&":"?")+"_="+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]);
for(p in h.headers){E.setRequestHeader(p,h.headers[p])}if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c)){return E.abort()}if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),i=_t(Wt,h,n,E)){if(E.readyState=1,f&&y.trigger("ajaxSend",[E,h]),c){return E}h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,i.send(b,k)}catch(e){if(c){throw e}k(-1,e)}}else{k(-1,"No Transport")}function k(t,n,r,s){var l,p,d,b,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=Xt(h,E,r)),b=Ut(h,b,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(w.etag[o]=T)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",l?v.resolveWith(g,[p,C,E]):v.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&y.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(y.trigger("ajaxComplete",[E,h]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);
return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return !w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return !!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=w.ajaxSettings.xhr();h.cors=!!Gt&&"withCredentials" in Gt,h.ajax=Gt=!!Gt,w.ajaxTransport(function(t){var n,r;if(h.cors||Gt&&!t.crossDomain){return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields){for(a in t.xhrFields){s[a]=t.xhrFields[a]}}t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i){s.setRequestHeader(a,i[a])}n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n){throw e}}},abort:function(){n&&n()}}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;
return{send:function(i,o){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Yt=[],Qt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||w.expando+"_"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0]){return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qt,"$1"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Yt.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}}),h.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){if("string"!=typeof e){return[]}"boolean"==typeof t&&(n=t,t=!1);var i,o,a;return t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),o=A.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=xe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes))},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})
}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=w.css(e,"position"),f=w(e),p={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=w.css(e,"top"),u=w.css(e,"left"),(l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using" in t?t.using.call(e,p):f.css(p)}},w.fn.extend({offset:function(e){if(arguments.length){return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)})}var t,n,r=this[0];if(r){return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position")){t=r.getBoundingClientRect()}else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position")){e=e.parentNode}e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===w.css(e,"position")){e=e.offsetParent}return e||be})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return z(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i){return o?o[t]:e[r]}o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)
}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n){return n=Fe(e,t),We.test(n)?w(e).position()[t]+"px":n}})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e)){return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i}},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Jt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=Jt),w
},t||(e.jQuery=e.$=w),w});
